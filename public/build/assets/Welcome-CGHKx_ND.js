import{J as di,W as hi,I as en,e as tn,o as So,a as or,t as gi,d as er,x as mi,y as _i,b as kr,T as vi,w as wi,c as yi,f as bi,u as xi,m as Ti,F as Si}from"./app-CP8GE2m7.js";import{M as Je,O as Ci,B as yr,F as pn,S as nr,U as Yo,V as Ct,W as mo,H as _o,N as Pi,C as Mi,a as dt,b as Pe,A as zt,c as Ot,E as Ei,d as vt,e as Et,g as ze,f as Oe,h as Qr,i as zr,j as Yt,k as Ii,l as Ai,m as Di,R as Ri,n as ki,P as Ir,D as hr,o as Nn,p as Fn,q as dn,Q as Oi,I as Bi,r as Ro,s as hn,t as Li,u as ko,v as Oo,w as Ni,x as Fi,y as zi,z as Ui,J as Hi,K as Gi,T as Yi,L as Xi,G as Wi}from"./GlobalFooter-MJcmil0J.js";import{_ as zn}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Un=di("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(i,e){i.isMobile=e}},actions:{setActiveProject(i){this.activeProjectSlug=i},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(i){this.scrollPosition=i,console.log("Scroll position stored:",i)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function Zi(i,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function Vi(i,e,o){return e&&Zi(i.prototype,e),i}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var et,vo,Mt,jt,$t,br,Hn,tr,Ur,Gn,Wt,kt,Yn,Xn=function(){return et||typeof window<"u"&&(et=window.gsap)&&et.registerPlugin&&et},Wn=1,wr=[],he=[],Ht=[],Hr=Date.now,Xo=function(e,o){return o},ji=function(){var e=Ur.core,o=e.bridge||{},t=e._scrollers,r=e._proxies;t.push.apply(t,he),r.push.apply(r,Ht),he=t,Ht=r,Xo=function(s,l){return o[s](l)}},Qt=function(e,o){return~Ht.indexOf(e)&&Ht[Ht.indexOf(e)+1][o]},Gr=function(e){return!!~Gn.indexOf(e)},ft=function(e,o,t,r,n){return e.addEventListener(o,t,{passive:r!==!1,capture:!!n})},ut=function(e,o,t,r){return e.removeEventListener(o,t,!!r)},ro="scrollLeft",oo="scrollTop",Wo=function(){return Wt&&Wt.isPressed||he.cache++},Co=function(e,o){var t=function r(n){if(n||n===0){Wn&&(Mt.history.scrollRestoration="manual");var s=Wt&&Wt.isPressed;n=r.v=Math.round(n)||(Wt&&Wt.iOS?1:0),e(n),r.cacheID=he.cache,s&&Xo("ss",n)}else(o||he.cache!==r.cacheID||Xo("ref"))&&(r.cacheID=he.cache,r.v=e());return r.v+r.offset};return t.offset=0,e&&t},mt={s:ro,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Co(function(i){return arguments.length?Mt.scrollTo(i,We.sc()):Mt.pageXOffset||jt[ro]||$t[ro]||br[ro]||0})},We={s:oo,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:mt,sc:Co(function(i){return arguments.length?Mt.scrollTo(mt.sc(),i):Mt.pageYOffset||jt[oo]||$t[oo]||br[oo]||0})},_t=function(e,o){return(o&&o._ctx&&o._ctx.selector||et.utils.toArray)(e)[0]||(typeof e=="string"&&et.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},qt=function(e,o){var t=o.s,r=o.sc;Gr(e)&&(e=jt.scrollingElement||$t);var n=he.indexOf(e),s=r===We.sc?1:2;!~n&&(n=he.push(e)-1),he[n+s]||ft(e,"scroll",Wo);var l=he[n+s],f=l||(he[n+s]=Co(Qt(e,t),!0)||(Gr(e)?r:Co(function(_){return arguments.length?e[t]=_:e[t]})));return f.target=e,l||(f.smooth=et.getProperty(e,"scrollBehavior")==="smooth"),f},Zo=function(e,o,t){var r=e,n=e,s=Hr(),l=s,f=o||50,_=Math.max(500,f*3),y=function(v,C){var m=Hr();C||m-s>f?(n=r,r=v,l=s,s=m):t?r+=v:r=n+(v-n)/(m-l)*(s-l)},d=function(){n=r=t?0:r,l=s=0},p=function(v){var C=l,m=n,ee=Hr();return(v||v===0)&&v!==r&&y(v),s===l||ee-l>_?0:(r+(t?m:-m))/((t?ee:s)-C)*1e3};return{update:y,reset:d,getVelocity:p}},Ar=function(e,o){return o&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},gn=function(e){var o=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(o)>=Math.abs(t)?o:t},Zn=function(){Ur=et.core.globals().ScrollTrigger,Ur&&Ur.core&&ji()},Vn=function(e){return et=e||Xn(),!vo&&et&&typeof document<"u"&&document.body&&(Mt=window,jt=document,$t=jt.documentElement,br=jt.body,Gn=[Mt,jt,$t,br],et.utils.clamp,Yn=et.core.context||function(){},tr="onpointerenter"in br?"pointer":"mouse",Hn=Ue.isTouch=Mt.matchMedia&&Mt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Mt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,kt=Ue.eventTypes=("ontouchstart"in $t?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in $t?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Wn=0},500),Zn(),vo=1),vo};mt.op=We;he.cache=0;var Ue=function(){function i(o){this.init(o)}var e=i.prototype;return e.init=function(t){vo||Vn(et)||console.warn("Please gsap.registerPlugin(Observer)"),Ur||Zn();var r=t.tolerance,n=t.dragMinimum,s=t.type,l=t.target,f=t.lineHeight,_=t.debounce,y=t.preventDefault,d=t.onStop,p=t.onStopDelay,u=t.ignore,v=t.wheelSpeed,C=t.event,m=t.onDragStart,ee=t.onDragEnd,q=t.onDrag,re=t.onPress,x=t.onRelease,ge=t.onRight,H=t.onLeft,E=t.onUp,me=t.onDown,W=t.onChangeX,h=t.onChangeY,O=t.onChange,g=t.onToggleX,L=t.onToggleY,j=t.onHover,_e=t.onHoverEnd,Te=t.onMove,G=t.ignoreCheck,N=t.isNormalizer,T=t.onGestureStart,a=t.onGestureEnd,S=t.onWheel,Y=t.onEnable,K=t.onDisable,oe=t.onClick,Se=t.scrollSpeed,xe=t.capture,M=t.allowClicks,B=t.lockAxis,$=t.onLockAxis;this.target=l=_t(l)||$t,this.vars=t,u&&(u=et.utils.toArray(u)),r=r||1e-9,n=n||0,v=v||1,Se=Se||1,s=s||"wheel,touch,pointer",_=_!==!1,f||(f=parseFloat(Mt.getComputedStyle(br).lineHeight)||22);var I,F,z,w,R,Z,b,c=this,k=0,A=0,U=t.passive||!y&&t.passive!==!1,Q=qt(l,mt),we=qt(l,We),be=Q(),V=we(),te=~s.indexOf("touch")&&!~s.indexOf("pointer")&&kt[0]==="pointerdown",De=Gr(l),ve=l.ownerDocument||jt,le=[0,0,0],ue=[0,0,0],tt=0,Le=function(){return tt=Hr()},fe=function(J,Ce){return(c.event=J)&&u&&~u.indexOf(J.target)||Ce&&te&&J.pointerType!=="touch"||G&&G(J,Ce)},He=function(){c._vx.reset(),c._vy.reset(),F.pause(),d&&d(c)},Re=function(){var J=c.deltaX=gn(le),Ce=c.deltaY=gn(ue),P=Math.abs(J)>=r,ie=Math.abs(Ce)>=r;O&&(P||ie)&&O(c,J,Ce,le,ue),P&&(ge&&c.deltaX>0&&ge(c),H&&c.deltaX<0&&H(c),W&&W(c),g&&c.deltaX<0!=k<0&&g(c),k=c.deltaX,le[0]=le[1]=le[2]=0),ie&&(me&&c.deltaY>0&&me(c),E&&c.deltaY<0&&E(c),h&&h(c),L&&c.deltaY<0!=A<0&&L(c),A=c.deltaY,ue[0]=ue[1]=ue[2]=0),(w||z)&&(Te&&Te(c),z&&(m&&z===1&&m(c),q&&q(c),z=0),w=!1),Z&&!(Z=!1)&&$&&$(c),R&&(S(c),R=!1),I=0},wt=function(J,Ce,P){le[P]+=J,ue[P]+=Ce,c._vx.update(J),c._vy.update(Ce),_?I||(I=requestAnimationFrame(Re)):Re()},yt=function(J,Ce){B&&!b&&(c.axis=b=Math.abs(J)>Math.abs(Ce)?"x":"y",Z=!0),b!=="y"&&(le[2]+=J,c._vx.update(J,!0)),b!=="x"&&(ue[2]+=Ce,c._vy.update(Ce,!0)),_?I||(I=requestAnimationFrame(Re)):Re()},rt=function(J){if(!fe(J,1)){J=Ar(J,y);var Ce=J.clientX,P=J.clientY,ie=Ce-c.x,X=P-c.y,se=c.isDragging;c.x=Ce,c.y=P,(se||(ie||X)&&(Math.abs(c.startX-Ce)>=n||Math.abs(c.startY-P)>=n))&&(z=se?2:1,se||(c.isDragging=!0),yt(ie,X))}},Me=c.onPress=function(ae){fe(ae,1)||ae&&ae.button||(c.axis=b=null,F.pause(),c.isPressed=!0,ae=Ar(ae),k=A=0,c.startX=c.x=ae.clientX,c.startY=c.y=ae.clientY,c._vx.reset(),c._vy.reset(),ft(N?l:ve,kt[1],rt,U,!0),c.deltaX=c.deltaY=0,re&&re(c))},ne=c.onRelease=function(ae){if(!fe(ae,1)){ut(N?l:ve,kt[1],rt,!0);var J=!isNaN(c.y-c.startY),Ce=c.isDragging,P=Ce&&(Math.abs(c.x-c.startX)>3||Math.abs(c.y-c.startY)>3),ie=Ar(ae);!P&&J&&(c._vx.reset(),c._vy.reset(),y&&M&&et.delayedCall(.08,function(){if(Hr()-tt>300&&!ae.defaultPrevented){if(ae.target.click)ae.target.click();else if(ve.createEvent){var X=ve.createEvent("MouseEvents");X.initMouseEvent("click",!0,!0,Mt,1,ie.screenX,ie.screenY,ie.clientX,ie.clientY,!1,!1,!1,!1,0,null),ae.target.dispatchEvent(X)}}})),c.isDragging=c.isGesturing=c.isPressed=!1,d&&Ce&&!N&&F.restart(!0),z&&Re(),ee&&Ce&&ee(c),x&&x(c,P)}},ot=function(J){return J.touches&&J.touches.length>1&&(c.isGesturing=!0)&&T(J,c.isDragging)},$e=function(){return(c.isGesturing=!1)||a(c)},bt=function(J){if(!fe(J)){var Ce=Q(),P=we();wt((Ce-be)*Se,(P-V)*Se,1),be=Ce,V=P,d&&F.restart(!0)}},Qe=function(J){if(!fe(J)){J=Ar(J,y),S&&(R=!0);var Ce=(J.deltaMode===1?f:J.deltaMode===2?Mt.innerHeight:1)*v;wt(J.deltaX*Ce,J.deltaY*Ce,0),d&&!N&&F.restart(!0)}},Kt=function(J){if(!fe(J)){var Ce=J.clientX,P=J.clientY,ie=Ce-c.x,X=P-c.y;c.x=Ce,c.y=P,w=!0,d&&F.restart(!0),(ie||X)&&yt(ie,X)}},dr=function(J){c.event=J,j(c)},Gt=function(J){c.event=J,_e(c)},Cr=function(J){return fe(J)||Ar(J,y)&&oe(c)};F=c._dc=et.delayedCall(p||.25,He).pause(),c.deltaX=c.deltaY=0,c._vx=Zo(0,50,!0),c._vy=Zo(0,50,!0),c.scrollX=Q,c.scrollY=we,c.isDragging=c.isGesturing=c.isPressed=!1,Yn(this),c.enable=function(ae){return c.isEnabled||(ft(De?ve:l,"scroll",Wo),s.indexOf("scroll")>=0&&ft(De?ve:l,"scroll",bt,U,xe),s.indexOf("wheel")>=0&&ft(l,"wheel",Qe,U,xe),(s.indexOf("touch")>=0&&Hn||s.indexOf("pointer")>=0)&&(ft(l,kt[0],Me,U,xe),ft(ve,kt[2],ne),ft(ve,kt[3],ne),M&&ft(l,"click",Le,!0,!0),oe&&ft(l,"click",Cr),T&&ft(ve,"gesturestart",ot),a&&ft(ve,"gestureend",$e),j&&ft(l,tr+"enter",dr),_e&&ft(l,tr+"leave",Gt),Te&&ft(l,tr+"move",Kt)),c.isEnabled=!0,c.isDragging=c.isGesturing=c.isPressed=w=z=!1,c._vx.reset(),c._vy.reset(),be=Q(),V=we(),ae&&ae.type&&Me(ae),Y&&Y(c)),c},c.disable=function(){c.isEnabled&&(wr.filter(function(ae){return ae!==c&&Gr(ae.target)}).length||ut(De?ve:l,"scroll",Wo),c.isPressed&&(c._vx.reset(),c._vy.reset(),ut(N?l:ve,kt[1],rt,!0)),ut(De?ve:l,"scroll",bt,xe),ut(l,"wheel",Qe,xe),ut(l,kt[0],Me,xe),ut(ve,kt[2],ne),ut(ve,kt[3],ne),ut(l,"click",Le,!0),ut(l,"click",Cr),ut(ve,"gesturestart",ot),ut(ve,"gestureend",$e),ut(l,tr+"enter",dr),ut(l,tr+"leave",Gt),ut(l,tr+"move",Kt),c.isEnabled=c.isPressed=c.isDragging=!1,K&&K(c))},c.kill=c.revert=function(){c.disable();var ae=wr.indexOf(c);ae>=0&&wr.splice(ae,1),Wt===c&&(Wt=0)},wr.push(c),N&&Gr(l)&&(Wt=c),c.enable(C)},Vi(i,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),i}();Ue.version="3.12.7";Ue.create=function(i){return new Ue(i)};Ue.register=Vn;Ue.getAll=function(){return wr.slice()};Ue.getById=function(i){return wr.filter(function(e){return e.vars.id===i})[0]};Xn()&&et.registerPlugin(Ue);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var D,_r,de,Ae,Pt,Ee,rn,Po,qr,Yr,Or,no,at,Ao,Vo,ht,mn,_n,vr,jn,Bo,$n,pt,jo,Qn,qn,Vt,$o,on,xr,nn,Mo,Qo,Lo,io=1,lt=Date.now,No=lt(),Dt=0,Br=0,vn=function(e,o,t){var r=St(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+o+"Clamp"]=r,r?e.substr(6,e.length-7):e},wn=function(e,o){return o&&(!St(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},$i=function i(){return Br&&requestAnimationFrame(i)},yn=function(){return Ao=1},bn=function(){return Ao=0},Ft=function(e){return e},Lr=function(e){return Math.round(e*1e5)/1e5||0},Kn=function(){return typeof window<"u"},Jn=function(){return D||Kn()&&(D=window.gsap)&&D.registerPlugin&&D},cr=function(e){return!!~rn.indexOf(e)},ei=function(e){return(e==="Height"?nn:de["inner"+e])||Pt["client"+e]||Ee["client"+e]},ti=function(e){return Qt(e,"getBoundingClientRect")||(cr(e)?function(){return To.width=de.innerWidth,To.height=nn,To}:function(){return Xt(e)})},Qi=function(e,o,t){var r=t.d,n=t.d2,s=t.a;return(s=Qt(e,"getBoundingClientRect"))?function(){return s()[r]}:function(){return(o?ei(n):e["client"+n])||0}},qi=function(e,o){return!o||~Ht.indexOf(e)?ti(e):function(){return To}},Ut=function(e,o){var t=o.s,r=o.d2,n=o.d,s=o.a;return Math.max(0,(t="scroll"+r)&&(s=Qt(e,t))?s()-ti(e)()[n]:cr(e)?(Pt[t]||Ee[t])-ei(r):e[t]-e["offset"+r])},so=function(e,o){for(var t=0;t<vr.length;t+=3)(!o||~o.indexOf(vr[t+1]))&&e(vr[t],vr[t+1],vr[t+2])},St=function(e){return typeof e=="string"},ct=function(e){return typeof e=="function"},Nr=function(e){return typeof e=="number"},rr=function(e){return typeof e=="object"},Dr=function(e,o,t){return e&&e.progress(o?0:1)&&t&&e.pause()},Fo=function(e,o){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return o(e)}):o(e);t&&t.totalTime&&(e.callbackAnimation=t)}},gr=Math.abs,ri="left",oi="top",sn="right",an="bottom",sr="width",ar="height",Xr="Right",Wr="Left",Zr="Top",Vr="Bottom",Ge="padding",It="margin",Sr="Width",ln="Height",Xe="px",At=function(e){return de.getComputedStyle(e)},Ki=function(e){var o=At(e).position;e.style.position=o==="absolute"||o==="fixed"?o:"relative"},xn=function(e,o){for(var t in o)t in e||(e[t]=o[t]);return e},Xt=function(e,o){var t=o&&At(e)[Vo]!=="matrix(1, 0, 0, 1, 0, 0)"&&D.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return t&&t.progress(0).kill(),r},Eo=function(e,o){var t=o.d2;return e["offset"+t]||e["client"+t]||0},ni=function(e){var o=[],t=e.labels,r=e.duration(),n;for(n in t)o.push(t[n]/r);return o},Ji=function(e){return function(o){return D.utils.snap(ni(e),o)}},cn=function(e){var o=D.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(r,n){return r-n});return t?function(r,n,s){s===void 0&&(s=.001);var l;if(!n)return o(r);if(n>0){for(r-=s,l=0;l<t.length;l++)if(t[l]>=r)return t[l];return t[l-1]}else for(l=t.length,r+=s;l--;)if(t[l]<=r)return t[l];return t[0]}:function(r,n,s){s===void 0&&(s=.001);var l=o(r);return!n||Math.abs(l-r)<s||l-r<0==n<0?l:o(n<0?r-e:r+e)}},es=function(e){return function(o,t){return cn(ni(e))(o,t.direction)}},ao=function(e,o,t,r){return t.split(",").forEach(function(n){return e(o,n,r)})},je=function(e,o,t,r,n){return e.addEventListener(o,t,{passive:!r,capture:!!n})},Ve=function(e,o,t,r){return e.removeEventListener(o,t,!!r)},lo=function(e,o,t){t=t&&t.wheelHandler,t&&(e(o,"wheel",t),e(o,"touchmove",t))},Tn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},co={toggleActions:"play",anticipatePin:0},Io={top:0,left:0,center:.5,bottom:1,right:1},wo=function(e,o){if(St(e)){var t=e.indexOf("="),r=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(r*=o/100),e=e.substr(0,t-1)),e=r+(e in Io?Io[e]*o:~e.indexOf("%")?parseFloat(e)*o/100:parseFloat(e)||0)}return e},uo=function(e,o,t,r,n,s,l,f){var _=n.startColor,y=n.endColor,d=n.fontSize,p=n.indent,u=n.fontWeight,v=Ae.createElement("div"),C=cr(t)||Qt(t,"pinType")==="fixed",m=e.indexOf("scroller")!==-1,ee=C?Ee:t,q=e.indexOf("start")!==-1,re=q?_:y,x="border-color:"+re+";font-size:"+d+";color:"+re+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return x+="position:"+((m||f)&&C?"fixed;":"absolute;"),(m||f||!C)&&(x+=(r===We?sn:an)+":"+(s+parseFloat(p))+"px;"),l&&(x+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),v._isStart=q,v.setAttribute("class","gsap-marker-"+e+(o?" marker-"+o:"")),v.style.cssText=x,v.innerText=o||o===0?e+"-"+o:e,ee.children[0]?ee.insertBefore(v,ee.children[0]):ee.appendChild(v),v._offset=v["offset"+r.op.d2],yo(v,0,r,q),v},yo=function(e,o,t,r){var n={display:"block"},s=t[r?"os2":"p2"],l=t[r?"p2":"os2"];e._isFlipped=r,n[t.a+"Percent"]=r?-100:0,n[t.a]=r?"1px":0,n["border"+s+Sr]=1,n["border"+l+Sr]=0,n[t.p]=o+"px",D.set(e,n)},pe=[],qo={},Kr,Sn=function(){return lt()-Dt>34&&(Kr||(Kr=requestAnimationFrame(Zt)))},mr=function(){(!pt||!pt.isPressed||pt.startX>Ee.clientWidth)&&(he.cache++,pt?Kr||(Kr=requestAnimationFrame(Zt)):Zt(),Dt||fr("scrollStart"),Dt=lt())},zo=function(){qn=de.innerWidth,Qn=de.innerHeight},Fr=function(e){he.cache++,(e===!0||!at&&!$n&&!Ae.fullscreenElement&&!Ae.webkitFullscreenElement&&(!jo||qn!==de.innerWidth||Math.abs(de.innerHeight-Qn)>de.innerHeight*.25))&&Po.restart(!0)},ur={},ts=[],ii=function i(){return Ve(ce,"scrollEnd",i)||ir(!0)},fr=function(e){return ur[e]&&ur[e].map(function(o){return o()})||ts},Tt=[],si=function(e){for(var o=0;o<Tt.length;o+=5)(!e||Tt[o+4]&&Tt[o+4].query===e)&&(Tt[o].style.cssText=Tt[o+1],Tt[o].getBBox&&Tt[o].setAttribute("transform",Tt[o+2]||""),Tt[o+3].uncache=1)},un=function(e,o){var t;for(ht=0;ht<pe.length;ht++)t=pe[ht],t&&(!o||t._ctx===o)&&(e?t.kill(1):t.revert(!0,!0));Mo=!0,o&&si(o),o||fr("revert")},ai=function(e,o){he.cache++,(o||!gt)&&he.forEach(function(t){return ct(t)&&t.cacheID++&&(t.rec=0)}),St(e)&&(de.history.scrollRestoration=on=e)},gt,lr=0,Cn,rs=function(){if(Cn!==lr){var e=Cn=lr;requestAnimationFrame(function(){return e===lr&&ir(!0)})}},li=function(){Ee.appendChild(xr),nn=!pt&&xr.offsetHeight||de.innerHeight,Ee.removeChild(xr)},Pn=function(e){return qr(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(o){return o.style.display=e?"none":"block"})},ir=function(e,o){if(Pt=Ae.documentElement,Ee=Ae.body,rn=[de,Ae,Pt,Ee],Dt&&!e&&!Mo){je(ce,"scrollEnd",ii);return}li(),gt=ce.isRefreshing=!0,he.forEach(function(r){return ct(r)&&++r.cacheID&&(r.rec=r())});var t=fr("refreshInit");jn&&ce.sort(),o||un(),he.forEach(function(r){ct(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),pe.slice(0).forEach(function(r){return r.refresh()}),Mo=!1,pe.forEach(function(r){if(r._subPinOffset&&r.pin){var n=r.vars.horizontal?"offsetWidth":"offsetHeight",s=r.pin[n];r.revert(!0,1),r.adjustPinSpacing(r.pin[n]-s),r.refresh()}}),Qo=1,Pn(!0),pe.forEach(function(r){var n=Ut(r.scroller,r._dir),s=r.vars.end==="max"||r._endClamp&&r.end>n,l=r._startClamp&&r.start>=n;(s||l)&&r.setPositions(l?n-1:r.start,s?Math.max(l?n:r.start+1,n):r.end,!0)}),Pn(!1),Qo=0,t.forEach(function(r){return r&&r.render&&r.render(-1)}),he.forEach(function(r){ct(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),ai(on,1),Po.pause(),lr++,gt=2,Zt(2),pe.forEach(function(r){return ct(r.vars.onRefresh)&&r.vars.onRefresh(r)}),gt=ce.isRefreshing=!1,fr("refresh")},Ko=0,bo=1,jr,Zt=function(e){if(e===2||!gt&&!Mo){ce.isUpdating=!0,jr&&jr.update(0);var o=pe.length,t=lt(),r=t-No>=50,n=o&&pe[0].scroll();if(bo=Ko>n?-1:1,gt||(Ko=n),r&&(Dt&&!Ao&&t-Dt>200&&(Dt=0,fr("scrollEnd")),Or=No,No=t),bo<0){for(ht=o;ht-- >0;)pe[ht]&&pe[ht].update(0,r);bo=1}else for(ht=0;ht<o;ht++)pe[ht]&&pe[ht].update(0,r);ce.isUpdating=!1}Kr=0},Jo=[ri,oi,an,sn,It+Vr,It+Xr,It+Zr,It+Wr,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],xo=Jo.concat([sr,ar,"boxSizing","max"+Sr,"max"+ln,"position",It,Ge,Ge+Zr,Ge+Xr,Ge+Vr,Ge+Wr]),os=function(e,o,t){Tr(t);var r=e._gsap;if(r.spacerIsNative)Tr(r.spacerState);else if(e._gsap.swappedIn){var n=o.parentNode;n&&(n.insertBefore(e,o),n.removeChild(o))}e._gsap.swappedIn=!1},Uo=function(e,o,t,r){if(!e._gsap.swappedIn){for(var n=Jo.length,s=o.style,l=e.style,f;n--;)f=Jo[n],s[f]=t[f];s.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(s.display="inline-block"),l[an]=l[sn]="auto",s.flexBasis=t.flexBasis||"auto",s.overflow="visible",s.boxSizing="border-box",s[sr]=Eo(e,mt)+Xe,s[ar]=Eo(e,We)+Xe,s[Ge]=l[It]=l[oi]=l[ri]="0",Tr(r),l[sr]=l["max"+Sr]=t[sr],l[ar]=l["max"+ln]=t[ar],l[Ge]=t[Ge],e.parentNode!==o&&(e.parentNode.insertBefore(o,e),o.appendChild(e)),e._gsap.swappedIn=!0}},ns=/([A-Z])/g,Tr=function(e){if(e){var o=e.t.style,t=e.length,r=0,n,s;for((e.t._gsap||D.core.getCache(e.t)).uncache=1;r<t;r+=2)s=e[r+1],n=e[r],s?o[n]=s:o[n]&&o.removeProperty(n.replace(ns,"-$1").toLowerCase())}},fo=function(e){for(var o=xo.length,t=e.style,r=[],n=0;n<o;n++)r.push(xo[n],t[xo[n]]);return r.t=e,r},is=function(e,o,t){for(var r=[],n=e.length,s=t?8:0,l;s<n;s+=2)l=e[s],r.push(l,l in o?o[l]:e[s+1]);return r.t=e.t,r},To={left:0,top:0},Mn=function(e,o,t,r,n,s,l,f,_,y,d,p,u,v){ct(e)&&(e=e(f)),St(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?wo("0"+e.substr(3),t):0));var C=u?u.time():0,m,ee,q;if(u&&u.seek(0),isNaN(e)||(e=+e),Nr(e))u&&(e=D.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,p,e)),l&&yo(l,t,r,!0);else{ct(o)&&(o=o(f));var re=(e||"0").split(" "),x,ge,H,E;q=_t(o,f)||Ee,x=Xt(q)||{},(!x||!x.left&&!x.top)&&At(q).display==="none"&&(E=q.style.display,q.style.display="block",x=Xt(q),E?q.style.display=E:q.style.removeProperty("display")),ge=wo(re[0],x[r.d]),H=wo(re[1]||"0",t),e=x[r.p]-_[r.p]-y+ge+n-H,l&&yo(l,H,r,t-H<20||l._isStart&&H>20),t-=t-H}if(v&&(f[v]=e||-.001,e<0&&(e=0)),s){var me=e+t,W=s._isStart;m="scroll"+r.d2,yo(s,me,r,W&&me>20||!W&&(d?Math.max(Ee[m],Pt[m]):s.parentNode[m])<=me+1),d&&(_=Xt(l),d&&(s.style[r.op.p]=_[r.op.p]-r.op.m-s._offset+Xe))}return u&&q&&(m=Xt(q),u.seek(p),ee=Xt(q),u._caScrollDist=m[r.p]-ee[r.p],e=e/u._caScrollDist*p),u&&u.seek(C),u?e:Math.round(e)},ss=/(webkit|moz|length|cssText|inset)/i,En=function(e,o,t,r){if(e.parentNode!==o){var n=e.style,s,l;if(o===Ee){e._stOrig=n.cssText,l=At(e);for(s in l)!+s&&!ss.test(s)&&l[s]&&typeof n[s]=="string"&&s!=="0"&&(n[s]=l[s]);n.top=t,n.left=r}else n.cssText=e._stOrig;D.core.getCache(e).uncache=1,o.appendChild(e)}},ci=function(e,o,t){var r=o,n=r;return function(s){var l=Math.round(e());return l!==r&&l!==n&&Math.abs(l-r)>3&&Math.abs(l-n)>3&&(s=l,t&&t()),n=r,r=Math.round(s),r}},po=function(e,o,t){var r={};r[o.p]="+="+t,D.set(e,r)},In=function(e,o){var t=qt(e,o),r="_scroll"+o.p2,n=function s(l,f,_,y,d){var p=s.tween,u=f.onComplete,v={};_=_||t();var C=ci(t,_,function(){p.kill(),s.tween=0});return d=y&&d||0,y=y||l-_,p&&p.kill(),f[r]=l,f.inherit=!1,f.modifiers=v,v[r]=function(){return C(_+y*p.ratio+d*p.ratio*p.ratio)},f.onUpdate=function(){he.cache++,s.tween&&Zt()},f.onComplete=function(){s.tween=0,u&&u.call(p)},p=s.tween=D.to(e,f),p};return e[r]=t,t.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},je(e,"wheel",t.wheelHandler),ce.isTouch&&je(e,"touchmove",t.wheelHandler),n},ce=function(){function i(o,t){_r||i.register(D)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),$o(this),this.init(o,t)}var e=i.prototype;return e.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Br){this.update=this.refresh=this.kill=Ft;return}t=xn(St(t)||Nr(t)||t.nodeType?{trigger:t}:t,co);var n=t,s=n.onUpdate,l=n.toggleClass,f=n.id,_=n.onToggle,y=n.onRefresh,d=n.scrub,p=n.trigger,u=n.pin,v=n.pinSpacing,C=n.invalidateOnRefresh,m=n.anticipatePin,ee=n.onScrubComplete,q=n.onSnapComplete,re=n.once,x=n.snap,ge=n.pinReparent,H=n.pinSpacer,E=n.containerAnimation,me=n.fastScrollEnd,W=n.preventOverlaps,h=t.horizontal||t.containerAnimation&&t.horizontal!==!1?mt:We,O=!d&&d!==0,g=_t(t.scroller||de),L=D.core.getCache(g),j=cr(g),_e=("pinType"in t?t.pinType:Qt(g,"pinType")||j&&"fixed")==="fixed",Te=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],G=O&&t.toggleActions.split(" "),N="markers"in t?t.markers:co.markers,T=j?0:parseFloat(At(g)["border"+h.p2+Sr])||0,a=this,S=t.onRefreshInit&&function(){return t.onRefreshInit(a)},Y=Qi(g,j,h),K=qi(g,j),oe=0,Se=0,xe=0,M=qt(g,h),B,$,I,F,z,w,R,Z,b,c,k,A,U,Q,we,be,V,te,De,ve,le,ue,tt,Le,fe,He,Re,wt,yt,rt,Me,ne,ot,$e,bt,Qe,Kt,dr,Gt;if(a._startClamp=a._endClamp=!1,a._dir=h,m*=45,a.scroller=g,a.scroll=E?E.time.bind(E):M,F=M(),a.vars=t,r=r||t.animation,"refreshPriority"in t&&(jn=1,t.refreshPriority===-9999&&(jr=a)),L.tweenScroll=L.tweenScroll||{top:In(g,We),left:In(g,mt)},a.tweenTo=B=L.tweenScroll[h.p],a.scrubDuration=function(P){ot=Nr(P)&&P,ot?ne?ne.duration(P):ne=D.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ot,paused:!0,onComplete:function(){return ee&&ee(a)}}):(ne&&ne.progress(1).kill(),ne=0)},r&&(r.vars.lazy=!1,r._initted&&!a.isReverted||r.vars.immediateRender!==!1&&t.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),a.animation=r.pause(),r.scrollTrigger=a,a.scrubDuration(d),rt=0,f||(f=r.vars.id)),x&&((!rr(x)||x.push)&&(x={snapTo:x}),"scrollBehavior"in Ee.style&&D.set(j?[Ee,Pt]:g,{scrollBehavior:"auto"}),he.forEach(function(P){return ct(P)&&P.target===(j?Ae.scrollingElement||Pt:g)&&(P.smooth=!1)}),I=ct(x.snapTo)?x.snapTo:x.snapTo==="labels"?Ji(r):x.snapTo==="labelsDirectional"?es(r):x.directional!==!1?function(P,ie){return cn(x.snapTo)(P,lt()-Se<500?0:ie.direction)}:D.utils.snap(x.snapTo),$e=x.duration||{min:.1,max:2},$e=rr($e)?Yr($e.min,$e.max):Yr($e,$e),bt=D.delayedCall(x.delay||ot/2||.1,function(){var P=M(),ie=lt()-Se<500,X=B.tween;if((ie||Math.abs(a.getVelocity())<10)&&!X&&!Ao&&oe!==P){var se=(P-w)/Q,Ze=r&&!O?r.totalProgress():se,ye=ie?0:(Ze-Me)/(lt()-Or)*1e3||0,Fe=D.utils.clamp(-se,1-se,gr(ye/2)*ye/.185),nt=se+(x.inertia===!1?0:Fe),Ne,ke,Ie=x,Rt=Ie.onStart,Be=Ie.onInterrupt,xt=Ie.onComplete;if(Ne=I(nt,a),Nr(Ne)||(Ne=nt),ke=Math.max(0,Math.round(w+Ne*Q)),P<=R&&P>=w&&ke!==P){if(X&&!X._initted&&X.data<=gr(ke-P))return;x.inertia===!1&&(Fe=Ne-se),B(ke,{duration:$e(gr(Math.max(gr(nt-Ze),gr(Ne-Ze))*.185/ye/.05||0)),ease:x.ease||"power3",data:gr(ke-P),onInterrupt:function(){return bt.restart(!0)&&Be&&Be(a)},onComplete:function(){a.update(),oe=M(),r&&!O&&(ne?ne.resetTo("totalProgress",Ne,r._tTime/r._tDur):r.progress(Ne)),rt=Me=r&&!O?r.totalProgress():a.progress,q&&q(a),xt&&xt(a)}},P,Fe*Q,ke-P-Fe*Q),Rt&&Rt(a,B.tween)}}else a.isActive&&oe!==P&&bt.restart(!0)}).pause()),f&&(qo[f]=a),p=a.trigger=_t(p||u!==!0&&u),Gt=p&&p._gsap&&p._gsap.stRevert,Gt&&(Gt=Gt(a)),u=u===!0?p:_t(u),St(l)&&(l={targets:p,className:l}),u&&(v===!1||v===It||(v=!v&&u.parentNode&&u.parentNode.style&&At(u.parentNode).display==="flex"?!1:Ge),a.pin=u,$=D.core.getCache(u),$.spacer?we=$.pinState:(H&&(H=_t(H),H&&!H.nodeType&&(H=H.current||H.nativeElement),$.spacerIsNative=!!H,H&&($.spacerState=fo(H))),$.spacer=te=H||Ae.createElement("div"),te.classList.add("pin-spacer"),f&&te.classList.add("pin-spacer-"+f),$.pinState=we=fo(u)),t.force3D!==!1&&D.set(u,{force3D:!0}),a.spacer=te=$.spacer,yt=At(u),Le=yt[v+h.os2],ve=D.getProperty(u),le=D.quickSetter(u,h.a,Xe),Uo(u,te,yt),V=fo(u)),N){A=rr(N)?xn(N,Tn):Tn,c=uo("scroller-start",f,g,h,A,0),k=uo("scroller-end",f,g,h,A,0,c),De=c["offset"+h.op.d2];var Cr=_t(Qt(g,"content")||g);Z=this.markerStart=uo("start",f,Cr,h,A,De,0,E),b=this.markerEnd=uo("end",f,Cr,h,A,De,0,E),E&&(dr=D.quickSetter([Z,b],h.a,Xe)),!_e&&!(Ht.length&&Qt(g,"fixedMarkers")===!0)&&(Ki(j?Ee:g),D.set([c,k],{force3D:!0}),He=D.quickSetter(c,h.a,Xe),wt=D.quickSetter(k,h.a,Xe))}if(E){var ae=E.vars.onUpdate,J=E.vars.onUpdateParams;E.eventCallback("onUpdate",function(){a.update(0,0,1),ae&&ae.apply(E,J||[])})}if(a.previous=function(){return pe[pe.indexOf(a)-1]},a.next=function(){return pe[pe.indexOf(a)+1]},a.revert=function(P,ie){if(!ie)return a.kill(!0);var X=P!==!1||!a.enabled,se=at;X!==a.isReverted&&(X&&(Qe=Math.max(M(),a.scroll.rec||0),xe=a.progress,Kt=r&&r.progress()),Z&&[Z,b,c,k].forEach(function(Ze){return Ze.style.display=X?"none":"block"}),X&&(at=a,a.update(X)),u&&(!ge||!a.isActive)&&(X?os(u,te,we):Uo(u,te,At(u),fe)),X||a.update(X),at=se,a.isReverted=X)},a.refresh=function(P,ie,X,se){if(!((at||!a.enabled)&&!ie)){if(u&&P&&Dt){je(i,"scrollEnd",ii);return}!gt&&S&&S(a),at=a,B.tween&&!X&&(B.tween.kill(),B.tween=0),ne&&ne.pause(),C&&r&&r.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var Ze=Y(),ye=K(),Fe=E?E.duration():Ut(g,h),nt=Q<=.01,Ne=0,ke=se||0,Ie=rr(X)?X.end:t.end,Rt=t.endTrigger||p,Be=rr(X)?X.start:t.start||(t.start===0||!p?0:u?"0 0":"0 100%"),xt=a.pinnedContainer=t.pinnedContainer&&_t(t.pinnedContainer,a),Bt=p&&Math.max(0,pe.indexOf(a))||0,qe=Bt,Ke,it,Jt,eo,st,Ye,Lt,Do,fn,Pr,Nt,Mr,to;for(N&&rr(X)&&(Mr=D.getProperty(c,h.p),to=D.getProperty(k,h.p));qe-- >0;)Ye=pe[qe],Ye.end||Ye.refresh(0,1)||(at=a),Lt=Ye.pin,Lt&&(Lt===p||Lt===u||Lt===xt)&&!Ye.isReverted&&(Pr||(Pr=[]),Pr.unshift(Ye),Ye.revert(!0,!0)),Ye!==pe[qe]&&(Bt--,qe--);for(ct(Be)&&(Be=Be(a)),Be=vn(Be,"start",a),w=Mn(Be,p,Ze,h,M(),Z,c,a,ye,T,_e,Fe,E,a._startClamp&&"_startClamp")||(u?-.001:0),ct(Ie)&&(Ie=Ie(a)),St(Ie)&&!Ie.indexOf("+=")&&(~Ie.indexOf(" ")?Ie=(St(Be)?Be.split(" ")[0]:"")+Ie:(Ne=wo(Ie.substr(2),Ze),Ie=St(Be)?Be:(E?D.utils.mapRange(0,E.duration(),E.scrollTrigger.start,E.scrollTrigger.end,w):w)+Ne,Rt=p)),Ie=vn(Ie,"end",a),R=Math.max(w,Mn(Ie||(Rt?"100% 0":Fe),Rt,Ze,h,M()+Ne,b,k,a,ye,T,_e,Fe,E,a._endClamp&&"_endClamp"))||-.001,Ne=0,qe=Bt;qe--;)Ye=pe[qe],Lt=Ye.pin,Lt&&Ye.start-Ye._pinPush<=w&&!E&&Ye.end>0&&(Ke=Ye.end-(a._startClamp?Math.max(0,Ye.start):Ye.start),(Lt===p&&Ye.start-Ye._pinPush<w||Lt===xt)&&isNaN(Be)&&(Ne+=Ke*(1-Ye.progress)),Lt===u&&(ke+=Ke));if(w+=Ne,R+=Ne,a._startClamp&&(a._startClamp+=Ne),a._endClamp&&!gt&&(a._endClamp=R||-.001,R=Math.min(R,Ut(g,h))),Q=R-w||(w-=.01)&&.001,nt&&(xe=D.utils.clamp(0,1,D.utils.normalize(w,R,Qe))),a._pinPush=ke,Z&&Ne&&(Ke={},Ke[h.a]="+="+Ne,xt&&(Ke[h.p]="-="+M()),D.set([Z,b],Ke)),u&&!(Qo&&a.end>=Ut(g,h)))Ke=At(u),eo=h===We,Jt=M(),ue=parseFloat(ve(h.a))+ke,!Fe&&R>1&&(Nt=(j?Ae.scrollingElement||Pt:g).style,Nt={style:Nt,value:Nt["overflow"+h.a.toUpperCase()]},j&&At(Ee)["overflow"+h.a.toUpperCase()]!=="scroll"&&(Nt.style["overflow"+h.a.toUpperCase()]="scroll")),Uo(u,te,Ke),V=fo(u),it=Xt(u,!0),Do=_e&&qt(g,eo?mt:We)(),v?(fe=[v+h.os2,Q+ke+Xe],fe.t=te,qe=v===Ge?Eo(u,h)+Q+ke:0,qe&&(fe.push(h.d,qe+Xe),te.style.flexBasis!=="auto"&&(te.style.flexBasis=qe+Xe)),Tr(fe),xt&&pe.forEach(function(Er){Er.pin===xt&&Er.vars.pinSpacing!==!1&&(Er._subPinOffset=!0)}),_e&&M(Qe)):(qe=Eo(u,h),qe&&te.style.flexBasis!=="auto"&&(te.style.flexBasis=qe+Xe)),_e&&(st={top:it.top+(eo?Jt-w:Do)+Xe,left:it.left+(eo?Do:Jt-w)+Xe,boxSizing:"border-box",position:"fixed"},st[sr]=st["max"+Sr]=Math.ceil(it.width)+Xe,st[ar]=st["max"+ln]=Math.ceil(it.height)+Xe,st[It]=st[It+Zr]=st[It+Xr]=st[It+Vr]=st[It+Wr]="0",st[Ge]=Ke[Ge],st[Ge+Zr]=Ke[Ge+Zr],st[Ge+Xr]=Ke[Ge+Xr],st[Ge+Vr]=Ke[Ge+Vr],st[Ge+Wr]=Ke[Ge+Wr],be=is(we,st,ge),gt&&M(0)),r?(fn=r._initted,Bo(1),r.render(r.duration(),!0,!0),tt=ve(h.a)-ue+Q+ke,Re=Math.abs(Q-tt)>1,_e&&Re&&be.splice(be.length-2,2),r.render(0,!0,!0),fn||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),Bo(0)):tt=Q,Nt&&(Nt.value?Nt.style["overflow"+h.a.toUpperCase()]=Nt.value:Nt.style.removeProperty("overflow-"+h.a));else if(p&&M()&&!E)for(it=p.parentNode;it&&it!==Ee;)it._pinOffset&&(w-=it._pinOffset,R-=it._pinOffset),it=it.parentNode;Pr&&Pr.forEach(function(Er){return Er.revert(!1,!0)}),a.start=w,a.end=R,F=z=gt?Qe:M(),!E&&!gt&&(F<Qe&&M(Qe),a.scroll.rec=0),a.revert(!1,!0),Se=lt(),bt&&(oe=-1,bt.restart(!0)),at=0,r&&O&&(r._initted||Kt)&&r.progress()!==Kt&&r.progress(Kt||0,!0).render(r.time(),!0,!0),(nt||xe!==a.progress||E||C||r&&!r._initted)&&(r&&!O&&r.totalProgress(E&&w<-.001&&!xe?D.utils.normalize(w,R,0):xe,!0),a.progress=nt||(F-w)/Q===xe?0:xe),u&&v&&(te._pinOffset=Math.round(a.progress*tt)),ne&&ne.invalidate(),isNaN(Mr)||(Mr-=D.getProperty(c,h.p),to-=D.getProperty(k,h.p),po(c,h,Mr),po(Z,h,Mr-(se||0)),po(k,h,to),po(b,h,to-(se||0))),nt&&!gt&&a.update(),y&&!gt&&!U&&(U=!0,y(a),U=!1)}},a.getVelocity=function(){return(M()-z)/(lt()-Or)*1e3||0},a.endAnimation=function(){Dr(a.callbackAnimation),r&&(ne?ne.progress(1):r.paused()?O||Dr(r,a.direction<0,1):Dr(r,r.reversed()))},a.labelToScroll=function(P){return r&&r.labels&&(w||a.refresh()||w)+r.labels[P]/r.duration()*Q||0},a.getTrailing=function(P){var ie=pe.indexOf(a),X=a.direction>0?pe.slice(0,ie).reverse():pe.slice(ie+1);return(St(P)?X.filter(function(se){return se.vars.preventOverlaps===P}):X).filter(function(se){return a.direction>0?se.end<=w:se.start>=R})},a.update=function(P,ie,X){if(!(E&&!X&&!P)){var se=gt===!0?Qe:a.scroll(),Ze=P?0:(se-w)/Q,ye=Ze<0?0:Ze>1?1:Ze||0,Fe=a.progress,nt,Ne,ke,Ie,Rt,Be,xt,Bt;if(ie&&(z=F,F=E?M():se,x&&(Me=rt,rt=r&&!O?r.totalProgress():ye)),m&&u&&!at&&!io&&Dt&&(!ye&&w<se+(se-z)/(lt()-Or)*m?ye=1e-4:ye===1&&R>se+(se-z)/(lt()-Or)*m&&(ye=.9999)),ye!==Fe&&a.enabled){if(nt=a.isActive=!!ye&&ye<1,Ne=!!Fe&&Fe<1,Be=nt!==Ne,Rt=Be||!!ye!=!!Fe,a.direction=ye>Fe?1:-1,a.progress=ye,Rt&&!at&&(ke=ye&&!Fe?0:ye===1?1:Fe===1?2:3,O&&(Ie=!Be&&G[ke+1]!=="none"&&G[ke+1]||G[ke],Bt=r&&(Ie==="complete"||Ie==="reset"||Ie in r))),W&&(Be||Bt)&&(Bt||d||!r)&&(ct(W)?W(a):a.getTrailing(W).forEach(function(Jt){return Jt.endAnimation()})),O||(ne&&!at&&!io?(ne._dp._time-ne._start!==ne._time&&ne.render(ne._dp._time-ne._start),ne.resetTo?ne.resetTo("totalProgress",ye,r._tTime/r._tDur):(ne.vars.totalProgress=ye,ne.invalidate().restart())):r&&r.totalProgress(ye,!!(at&&(Se||P)))),u){if(P&&v&&(te.style[v+h.os2]=Le),!_e)le(Lr(ue+tt*ye));else if(Rt){if(xt=!P&&ye>Fe&&R+1>se&&se+1>=Ut(g,h),ge)if(!P&&(nt||xt)){var qe=Xt(u,!0),Ke=se-w;En(u,Ee,qe.top+(h===We?Ke:0)+Xe,qe.left+(h===We?0:Ke)+Xe)}else En(u,te);Tr(nt||xt?be:V),Re&&ye<1&&nt||le(ue+(ye===1&&!xt?tt:0))}}x&&!B.tween&&!at&&!io&&bt.restart(!0),l&&(Be||re&&ye&&(ye<1||!Lo))&&qr(l.targets).forEach(function(Jt){return Jt.classList[nt||re?"add":"remove"](l.className)}),s&&!O&&!P&&s(a),Rt&&!at?(O&&(Bt&&(Ie==="complete"?r.pause().totalProgress(1):Ie==="reset"?r.restart(!0).pause():Ie==="restart"?r.restart(!0):r[Ie]()),s&&s(a)),(Be||!Lo)&&(_&&Be&&Fo(a,_),Te[ke]&&Fo(a,Te[ke]),re&&(ye===1?a.kill(!1,1):Te[ke]=0),Be||(ke=ye===1?1:3,Te[ke]&&Fo(a,Te[ke]))),me&&!nt&&Math.abs(a.getVelocity())>(Nr(me)?me:2500)&&(Dr(a.callbackAnimation),ne?ne.progress(1):Dr(r,Ie==="reverse"?1:!ye,1))):O&&s&&!at&&s(a)}if(wt){var it=E?se/E.duration()*(E._caScrollDist||0):se;He(it+(c._isFlipped?1:0)),wt(it)}dr&&dr(-se/E.duration()*(E._caScrollDist||0))}},a.enable=function(P,ie){a.enabled||(a.enabled=!0,je(g,"resize",Fr),j||je(g,"scroll",mr),S&&je(i,"refreshInit",S),P!==!1&&(a.progress=xe=0,F=z=oe=M()),ie!==!1&&a.refresh())},a.getTween=function(P){return P&&B?B.tween:ne},a.setPositions=function(P,ie,X,se){if(E){var Ze=E.scrollTrigger,ye=E.duration(),Fe=Ze.end-Ze.start;P=Ze.start+Fe*P/ye,ie=Ze.start+Fe*ie/ye}a.refresh(!1,!1,{start:wn(P,X&&!!a._startClamp),end:wn(ie,X&&!!a._endClamp)},se),a.update()},a.adjustPinSpacing=function(P){if(fe&&P){var ie=fe.indexOf(h.d)+1;fe[ie]=parseFloat(fe[ie])+P+Xe,fe[1]=parseFloat(fe[1])+P+Xe,Tr(fe)}},a.disable=function(P,ie){if(a.enabled&&(P!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,ie||ne&&ne.pause(),Qe=0,$&&($.uncache=1),S&&Ve(i,"refreshInit",S),bt&&(bt.pause(),B.tween&&B.tween.kill()&&(B.tween=0)),!j)){for(var X=pe.length;X--;)if(pe[X].scroller===g&&pe[X]!==a)return;Ve(g,"resize",Fr),j||Ve(g,"scroll",mr)}},a.kill=function(P,ie){a.disable(P,ie),ne&&!ie&&ne.kill(),f&&delete qo[f];var X=pe.indexOf(a);X>=0&&pe.splice(X,1),X===ht&&bo>0&&ht--,X=0,pe.forEach(function(se){return se.scroller===a.scroller&&(X=1)}),X||gt||(a.scroll.rec=0),r&&(r.scrollTrigger=null,P&&r.revert({kill:!1}),ie||r.kill()),Z&&[Z,b,c,k].forEach(function(se){return se.parentNode&&se.parentNode.removeChild(se)}),jr===a&&(jr=0),u&&($&&($.uncache=1),X=0,pe.forEach(function(se){return se.pin===u&&X++}),X||($.spacer=0)),t.onKill&&t.onKill(a)},pe.push(a),a.enable(!1,!1),Gt&&Gt(a),r&&r.add&&!Q){var Ce=a.update;a.update=function(){a.update=Ce,he.cache++,w||R||a.refresh()},D.delayedCall(.01,a.update),Q=.01,w=R=0}else a.refresh();u&&rs()},i.register=function(t){return _r||(D=t||Jn(),Kn()&&window.document&&i.enable(),_r=Br),_r},i.defaults=function(t){if(t)for(var r in t)co[r]=t[r];return co},i.disable=function(t,r){Br=0,pe.forEach(function(s){return s[r?"kill":"disable"](t)}),Ve(de,"wheel",mr),Ve(Ae,"scroll",mr),clearInterval(no),Ve(Ae,"touchcancel",Ft),Ve(Ee,"touchstart",Ft),ao(Ve,Ae,"pointerdown,touchstart,mousedown",yn),ao(Ve,Ae,"pointerup,touchend,mouseup",bn),Po.kill(),so(Ve);for(var n=0;n<he.length;n+=3)lo(Ve,he[n],he[n+1]),lo(Ve,he[n],he[n+2])},i.enable=function(){if(de=window,Ae=document,Pt=Ae.documentElement,Ee=Ae.body,D&&(qr=D.utils.toArray,Yr=D.utils.clamp,$o=D.core.context||Ft,Bo=D.core.suppressOverwrites||Ft,on=de.history.scrollRestoration||"auto",Ko=de.pageYOffset||0,D.core.globals("ScrollTrigger",i),Ee)){Br=1,xr=document.createElement("div"),xr.style.height="100vh",xr.style.position="absolute",li(),$i(),Ue.register(D),i.isTouch=Ue.isTouch,Vt=Ue.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),jo=Ue.isTouch===1,je(de,"wheel",mr),rn=[de,Ae,Pt,Ee],D.matchMedia?(i.matchMedia=function(_){var y=D.matchMedia(),d;for(d in _)y.add(d,_[d]);return y},D.addEventListener("matchMediaInit",function(){return un()}),D.addEventListener("matchMediaRevert",function(){return si()}),D.addEventListener("matchMedia",function(){ir(0,1),fr("matchMedia")}),D.matchMedia().add("(orientation: portrait)",function(){return zo(),zo})):console.warn("Requires GSAP 3.11.0 or later"),zo(),je(Ae,"scroll",mr);var t=Ee.hasAttribute("style"),r=Ee.style,n=r.borderTopStyle,s=D.core.Animation.prototype,l,f;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",l=Xt(Ee),We.m=Math.round(l.top+We.sc())||0,mt.m=Math.round(l.left+mt.sc())||0,n?r.borderTopStyle=n:r.removeProperty("border-top-style"),t||(Ee.setAttribute("style",""),Ee.removeAttribute("style")),no=setInterval(Sn,250),D.delayedCall(.5,function(){return io=0}),je(Ae,"touchcancel",Ft),je(Ee,"touchstart",Ft),ao(je,Ae,"pointerdown,touchstart,mousedown",yn),ao(je,Ae,"pointerup,touchend,mouseup",bn),Vo=D.utils.checkPrefix("transform"),xo.push(Vo),_r=lt(),Po=D.delayedCall(.2,ir).pause(),vr=[Ae,"visibilitychange",function(){var _=de.innerWidth,y=de.innerHeight;Ae.hidden?(mn=_,_n=y):(mn!==_||_n!==y)&&Fr()},Ae,"DOMContentLoaded",ir,de,"load",ir,de,"resize",Fr],so(je),pe.forEach(function(_){return _.enable(0,1)}),f=0;f<he.length;f+=3)lo(Ve,he[f],he[f+1]),lo(Ve,he[f],he[f+2])}},i.config=function(t){"limitCallbacks"in t&&(Lo=!!t.limitCallbacks);var r=t.syncInterval;r&&clearInterval(no)||(no=r)&&setInterval(Sn,r),"ignoreMobileResize"in t&&(jo=i.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(so(Ve)||so(je,t.autoRefreshEvents||"none"),$n=(t.autoRefreshEvents+"").indexOf("resize")===-1)},i.scrollerProxy=function(t,r){var n=_t(t),s=he.indexOf(n),l=cr(n);~s&&he.splice(s,l?6:2),r&&(l?Ht.unshift(de,r,Ee,r,Pt,r):Ht.unshift(n,r))},i.clearMatchMedia=function(t){pe.forEach(function(r){return r._ctx&&r._ctx.query===t&&r._ctx.kill(!0,!0)})},i.isInViewport=function(t,r,n){var s=(St(t)?_t(t):t).getBoundingClientRect(),l=s[n?sr:ar]*r||0;return n?s.right-l>0&&s.left+l<de.innerWidth:s.bottom-l>0&&s.top+l<de.innerHeight},i.positionInViewport=function(t,r,n){St(t)&&(t=_t(t));var s=t.getBoundingClientRect(),l=s[n?sr:ar],f=r==null?l/2:r in Io?Io[r]*l:~r.indexOf("%")?parseFloat(r)*l/100:parseFloat(r)||0;return n?(s.left+f)/de.innerWidth:(s.top+f)/de.innerHeight},i.killAll=function(t){if(pe.slice(0).forEach(function(n){return n.vars.id!=="ScrollSmoother"&&n.kill()}),t!==!0){var r=ur.killAll||[];ur={},r.forEach(function(n){return n()})}},i}();ce.version="3.12.7";ce.saveStyles=function(i){return i?qr(i).forEach(function(e){if(e&&e.style){var o=Tt.indexOf(e);o>=0&&Tt.splice(o,5),Tt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),D.core.getCache(e),$o())}}):Tt};ce.revert=function(i,e){return un(!i,e)};ce.create=function(i,e){return new ce(i,e)};ce.refresh=function(i){return i?Fr(!0):(_r||ce.register())&&ir(!0)};ce.update=function(i){return++he.cache&&Zt(i===!0?2:0)};ce.clearScrollMemory=ai;ce.maxScroll=function(i,e){return Ut(i,e?mt:We)};ce.getScrollFunc=function(i,e){return qt(_t(i),e?mt:We)};ce.getById=function(i){return qo[i]};ce.getAll=function(){return pe.filter(function(i){return i.vars.id!=="ScrollSmoother"})};ce.isScrolling=function(){return!!Dt};ce.snapDirectional=cn;ce.addEventListener=function(i,e){var o=ur[i]||(ur[i]=[]);~o.indexOf(e)||o.push(e)};ce.removeEventListener=function(i,e){var o=ur[i],t=o&&o.indexOf(e);t>=0&&o.splice(t,1)};ce.batch=function(i,e){var o=[],t={},r=e.interval||.016,n=e.batchMax||1e9,s=function(_,y){var d=[],p=[],u=D.delayedCall(r,function(){y(d,p),d=[],p=[]}).pause();return function(v){d.length||u.restart(!0),d.push(v.trigger),p.push(v),n<=d.length&&u.progress(1)}},l;for(l in e)t[l]=l.substr(0,2)==="on"&&ct(e[l])&&l!=="onRefreshInit"?s(l,e[l]):e[l];return ct(n)&&(n=n(),je(ce,"refresh",function(){return n=e.batchMax()})),qr(i).forEach(function(f){var _={};for(l in t)_[l]=t[l];_.trigger=f,o.push(ce.create(_))}),o};var An=function(e,o,t,r){return o>r?e(r):o<0&&e(0),t>r?(r-o)/(t-o):t<0?o/(o-t):1},Ho=function i(e,o){o===!0?e.style.removeProperty("touch-action"):e.style.touchAction=o===!0?"auto":o?"pan-"+o+(Ue.isTouch?" pinch-zoom":""):"none",e===Pt&&i(Ee,o)},ho={auto:1,scroll:1},as=function(e){var o=e.event,t=e.target,r=e.axis,n=(o.changedTouches?o.changedTouches[0]:o).target,s=n._gsap||D.core.getCache(n),l=lt(),f;if(!s._isScrollT||l-s._isScrollT>2e3){for(;n&&n!==Ee&&(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth||!(ho[(f=At(n)).overflowY]||ho[f.overflowX]));)n=n.parentNode;s._isScroll=n&&n!==t&&!cr(n)&&(ho[(f=At(n)).overflowY]||ho[f.overflowX]),s._isScrollT=l}(s._isScroll||r==="x")&&(o.stopPropagation(),o._gsapAllow=!0)},ui=function(e,o,t,r){return Ue.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:o,onWheel:r=r&&as,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return t&&je(Ae,Ue.eventTypes[0],Rn,!1,!0)},onDisable:function(){return Ve(Ae,Ue.eventTypes[0],Rn,!0)}})},ls=/(input|label|select|textarea)/i,Dn,Rn=function(e){var o=ls.test(e.target.tagName);(o||Dn)&&(e._gsapAllow=!0,Dn=o)},cs=function(e){rr(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var o=e,t=o.normalizeScrollX,r=o.momentum,n=o.allowNestedScroll,s=o.onRelease,l,f,_=_t(e.target)||Pt,y=D.core.globals().ScrollSmoother,d=y&&y.get(),p=Vt&&(e.content&&_t(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),u=qt(_,We),v=qt(_,mt),C=1,m=(Ue.isTouch&&de.visualViewport?de.visualViewport.scale*de.visualViewport.width:de.outerWidth)/de.innerWidth,ee=0,q=ct(r)?function(){return r(l)}:function(){return r||2.8},re,x,ge=ui(_,e.type,!0,n),H=function(){return x=!1},E=Ft,me=Ft,W=function(){f=Ut(_,We),me=Yr(Vt?1:0,f),t&&(E=Yr(0,Ut(_,mt))),re=lr},h=function(){p._gsap.y=Lr(parseFloat(p._gsap.y)+u.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",u.offset=u.cacheID=0},O=function(){if(x){requestAnimationFrame(H);var N=Lr(l.deltaY/2),T=me(u.v-N);if(p&&T!==u.v+u.offset){u.offset=T-u.v;var a=Lr((parseFloat(p&&p._gsap.y)||0)-u.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",p._gsap.y=a+"px",u.cacheID=he.cache,Zt()}return!0}u.offset&&h(),x=!0},g,L,j,_e,Te=function(){W(),g.isActive()&&g.vars.scrollY>f&&(u()>f?g.progress(1)&&u(f):g.resetTo("scrollY",f))};return p&&D.set(p,{y:"+=0"}),e.ignoreCheck=function(G){return Vt&&G.type==="touchmove"&&O()||C>1.05&&G.type!=="touchstart"||l.isGesturing||G.touches&&G.touches.length>1},e.onPress=function(){x=!1;var G=C;C=Lr((de.visualViewport&&de.visualViewport.scale||1)/m),g.pause(),G!==C&&Ho(_,C>1.01?!0:t?!1:"x"),L=v(),j=u(),W(),re=lr},e.onRelease=e.onGestureStart=function(G,N){if(u.offset&&h(),!N)_e.restart(!0);else{he.cache++;var T=q(),a,S;t&&(a=v(),S=a+T*.05*-G.velocityX/.227,T*=An(v,a,S,Ut(_,mt)),g.vars.scrollX=E(S)),a=u(),S=a+T*.05*-G.velocityY/.227,T*=An(u,a,S,Ut(_,We)),g.vars.scrollY=me(S),g.invalidate().duration(T).play(.01),(Vt&&g.vars.scrollY>=f||a>=f-1)&&D.to({},{onUpdate:Te,duration:T})}s&&s(G)},e.onWheel=function(){g._ts&&g.pause(),lt()-ee>1e3&&(re=0,ee=lt())},e.onChange=function(G,N,T,a,S){if(lr!==re&&W(),N&&t&&v(E(a[2]===N?L+(G.startX-G.x):v()+N-a[1])),T){u.offset&&h();var Y=S[2]===T,K=Y?j+G.startY-G.y:u()+T-S[1],oe=me(K);Y&&K!==oe&&(j+=oe-K),u(oe)}(T||N)&&Zt()},e.onEnable=function(){Ho(_,t?!1:"x"),ce.addEventListener("refresh",Te),je(de,"resize",Te),u.smooth&&(u.target.style.scrollBehavior="auto",u.smooth=v.smooth=!1),ge.enable()},e.onDisable=function(){Ho(_,!0),Ve(de,"resize",Te),ce.removeEventListener("refresh",Te),ge.kill()},e.lockAxis=e.lockAxis!==!1,l=new Ue(e),l.iOS=Vt,Vt&&!u()&&u(1),Vt&&D.ticker.add(Ft),_e=l._dc,g=D.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:ci(u,u(),function(){return g.pause()})},onUpdate:Zt,onComplete:_e.vars.onComplete}),l};ce.sort=function(i){if(ct(i))return pe.sort(i);var e=de.pageYOffset||0;return ce.getAll().forEach(function(o){return o._sortY=o.trigger?e+o.trigger.getBoundingClientRect().top:o.start+de.innerHeight}),pe.sort(i||function(o,t){return(o.vars.refreshPriority||0)*-1e6+(o.vars.containerAnimation?1e6:o._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};ce.observe=function(i){return new Ue(i)};ce.normalizeScroll=function(i){if(typeof i>"u")return pt;if(i===!0&&pt)return pt.enable();if(i===!1){pt&&pt.kill(),pt=i;return}var e=i instanceof Ue?i:cs(i);return pt&&pt.target===e.target&&pt.kill(),cr(e.target)&&(pt=e),e};ce.core={_getVelocityProp:Zo,_inputObserver:ui,_scrollers:he,_proxies:Ht,bridge:{ss:function(){Dt||fr("scrollStart"),Dt=lt()},ref:function(){return at}}};Jn()&&D.registerPlugin(ce);var $r=function(){var i=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(y){y.preventDefault(),t(++i%e.children.length)},!1);function o(y){return e.appendChild(y.dom),y}function t(y){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===y?"block":"none";i=y}var r=(performance||Date).now(),n=r,s=0,l=o(new $r.Panel("FPS","#0ff","#002")),f=o(new $r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var _=o(new $r.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:o,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){s++;var y=(performance||Date).now();if(f.update(y-r,200),y>=n+1e3&&(l.update(s*1e3/(y-n),100),n=y,s=0,_)){var d=performance.memory;_.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return y},update:function(){r=this.end()},domElement:e,setMode:t}};$r.Panel=function(i,e,o){var t=1/0,r=0,n=Math.round,s=n(window.devicePixelRatio||1),l=80*s,f=48*s,_=3*s,y=2*s,d=3*s,p=15*s,u=74*s,v=30*s,C=document.createElement("canvas");C.width=l,C.height=f,C.style.cssText="width:80px;height:48px";var m=C.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=o,m.fillRect(0,0,l,f),m.fillStyle=e,m.fillText(i,_,y),m.fillRect(d,p,u,v),m.fillStyle=o,m.globalAlpha=.9,m.fillRect(d,p,u,v),{dom:C,update:function(ee,q){t=Math.min(t,ee),r=Math.max(r,ee),m.fillStyle=o,m.globalAlpha=1,m.fillRect(0,0,l,p),m.fillStyle=e,m.fillText(n(ee)+" "+i+" ("+n(t)+"-"+n(r)+")",_,y),m.drawImage(C,d+s,p,u-s,v,d,p,u-s,v),m.fillRect(d+u-s,p,s,v),m.fillStyle=o,m.globalAlpha=.9,m.fillRect(d+u-s,p,s,n((1-ee/q)*v))}}};const fi={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Jr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const us=new Ci(-1,1,1,-1,0,1);class fs extends yr{constructor(){super(),this.setAttribute("position",new pn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new pn([0,2,0,0,2,0],2))}}const ps=new fs;class pi{constructor(e){this._mesh=new Je(ps,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,us)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ds extends Jr{constructor(e,o){super(),this.textureID=o!==void 0?o:"tDiffuse",e instanceof nr?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Yo.clone(e.uniforms),this.material=new nr({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new pi(this.material)}render(e,o,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(o),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class kn extends Jr{constructor(e,o){super(),this.scene=e,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,o,t){const r=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let s,l;this.inverse?(s=0,l=1):(s=1,l=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),n.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),n.buffers.stencil.setClear(l),n.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(o),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.color.setMask(!0),n.buffers.depth.setMask(!0),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(r.EQUAL,1,4294967295),n.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),n.buffers.stencil.setLocked(!0)}}class hs extends Jr{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class gs{constructor(e,o){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),o===void 0){const t=e.getSize(new Ct);this._width=t.width,this._height=t.height,o=new mo(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:_o}),o.texture.name="EffectComposer.rt1"}else this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ds(fi),this.copyPass.material.blending=Pi,this.clock=new Mi}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,o){this.passes.splice(o,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const o=this.passes.indexOf(e);o!==-1&&this.passes.splice(o,1)}isLastEnabledPass(e){for(let o=e+1;o<this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const o=this.renderer.getRenderTarget();let t=!1;for(let r=0,n=this.passes.length;r<n;r++){const s=this.passes[r];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),s.needsSwap){if(t){const l=this.renderer.getContext(),f=this.renderer.state.buffers.stencil;f.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),f.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}kn!==void 0&&(s instanceof kn?t=!0:s instanceof hs&&(t=!1))}}this.renderer.setRenderTarget(o)}reset(e){if(e===void 0){const o=this.renderer.getSize(new Ct);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,o){this._width=e,this._height=o;const t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class ms extends Jr{constructor(e,o,t=null,r=null,n=null){super(),this.scene=e,this.camera=o,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new dt}render(e,o,t){const r=e.autoClear;e.autoClear=!1;let n,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(n),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=r}}const _s={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new dt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class pr extends Jr{constructor(e,o,t,r){super(),this.strength=o!==void 0?o:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new Ct(e.x,e.y):new Ct(256,256),this.clearColor=new dt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let n=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new mo(n,s,{type:_o}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){const p=new mo(n,s,{type:_o});p.texture.name="UnrealBloomPass.h"+d,p.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(p);const u=new mo(n,s,{type:_o});u.texture.name="UnrealBloomPass.v"+d,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),n=Math.round(n/2),s=Math.round(s/2)}const l=_s;this.highPassUniforms=Yo.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new nr({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const f=[3,5,7,9,11];n=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(f[d])),this.separableBlurMaterials[d].uniforms.invSize.value=new Ct(1/n,1/s),n=Math.round(n/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=o,this.compositeMaterial.uniforms.bloomRadius.value=.1;const _=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=_,this.bloomTintColors=[new Pe(1,1,1),new Pe(1,1,1),new Pe(1,1,1),new Pe(1,1,1),new Pe(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const y=fi;this.copyUniforms=Yo.clone(y.uniforms),this.blendMaterial=new nr({uniforms:this.copyUniforms,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,blending:zt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new dt,this.oldClearAlpha=1,this.basic=new Ot,this.fsQuad=new pi(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,o){let t=Math.round(e/2),r=Math.round(o/2);this.renderTargetBright.setSize(t,r);for(let n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(t,r),this.renderTargetsVertical[n].setSize(t,r),this.separableBlurMaterials[n].uniforms.invSize.value=new Ct(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,o,t,r,n){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),n&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let f=0;f<this.nMips;f++)this.fsQuad.material=this.separableBlurMaterials[f],this.separableBlurMaterials[f].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[f].uniforms.direction.value=pr.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[f]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[f].uniforms.colorTexture.value=this.renderTargetsHorizontal[f].texture,this.separableBlurMaterials[f].uniforms.direction.value=pr.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[f]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[f];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,n&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeparableBlurMaterial(e){const o=[];for(let t=0;t<e;t++)o.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new nr({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Ct(.5,.5)},direction:{value:new Ct(.5,.5)},gaussianCoefficients:{value:o}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new nr({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}pr.BlurDirectionX=new Ct(1,0);pr.BlurDirectionY=new Ct(0,1);class vs extends Ei{constructor(e,o={}){const t=o.font;if(t===void 0)super();else{const r=t.generateShapes(e,o.size);o.depth===void 0&&(o.depth=50),o.bevelThickness===void 0&&(o.bevelThickness=10),o.bevelSize===void 0&&(o.bevelSize=8),o.bevelEnabled===void 0&&(o.bevelEnabled=!1),super(r,o)}this.type="TextGeometry"}}function ws(i,e,o,t){const{CUBE_SIZE:r,FIRST_CUBE_Z:n}=o,s=8,l=24,f=.075;let _,y=[],d=[],p=[],u=[];const v=(m,ee,q,re)=>{const x=new Qr(m,m,m),ge=new zr(x),H=[new vt({color:16711680,transparent:!0,opacity:re.opacity,blending:zt}),new vt({color:65280,transparent:!0,opacity:re.opacity,blending:zt}),new vt({color:255,transparent:!0,opacity:re.opacity,blending:zt}),new vt({color:65535,transparent:!0,opacity:re.opacity,blending:zt}),new vt({color:16711935,transparent:!0,opacity:re.opacity,blending:zt}),new vt({color:16776960,transparent:!0,opacity:re.opacity,blending:zt})],E=new Et,me=ge.getAttribute("position").array,W=[];for(let g=0;g<me.length/3;g+=2)W.push(g,g+1);const h=Array(6).fill(null).map(()=>new yr),O=Array(6).fill(null).map(()=>[]);for(let g=0;g<W.length/2;g++){const L=g%6;O[L].push(W[g*2],W[g*2+1])}return h.forEach((g,L)=>{g.setIndex(O[L]),g.setAttribute("position",ge.getAttribute("position"));const j=new Yt(g,H[L]);E.add(j)}),E.position.z=ee,E.rotation.z=q,E};return(()=>{const q=.9/(l-1);for(let W=0;W<l;W++)d[W]=new vt({transparent:!0,opacity:1-W*q});if(_=new Et,!_){console.error("introGroup failed to initialize");return}for(let W=0;W<l;W++){const h=r-W*s,O=v(h,0,0,d[W]),g=O.children.map(L=>L.material);u.push(g.map(L=>({material:L,originalColor:L.color.clone()}))),_.add(O)}_.position.z=n,e.add(_),y.push(_),p=d.map(W=>W.opacity);const re=ze.timeline({repeat:-1});re.to(_.rotation,{x:Oe.degToRad(360),duration:12,ease:"none"},0),re.to(_.rotation,{y:Oe.degToRad(360),duration:10,ease:"none"},0),re.to(_.rotation,{z:Oe.degToRad(360),duration:14,ease:"none"},0);let x=-1,ge=0;const H=f*1e3,E=l*H,me=W=>{const h=W%E/H,O=Math.floor(h)%l;x!==-1&&W-ge>=H&&(u[x].forEach(j=>{j.material.opacity=p[x],j.material.color.copy(j.originalColor)}),x=-1),x===-1&&O!==x&&(x=O,ge=W,u[x].forEach(L=>{L.material.opacity=1,L.material.color.set(1,1,1)})),requestAnimationFrame(me)};requestAnimationFrame(me)})(),{introCubes:y}}class ys extends Ii{constructor(e){super(e)}load(e,o,t,r){const n=this,s=new Ai(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){const f=n.parse(JSON.parse(l));o&&o(f)},t,r)}parse(e){return new bs(e)}}class bs{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,o=100){const t=[],r=xs(e,o,this.data);for(let n=0,s=r.length;n<s;n++)t.push(...r[n].toShapes());return t}}function xs(i,e,o){const t=Array.from(i),r=e/o.resolution,n=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*r,s=[];let l=0,f=0;for(let _=0;_<t.length;_++){const y=t[_];if(y===`
`)l=0,f-=n;else{const d=Ts(y,r,l,f,o);l+=d.offsetX,s.push(d.path)}}return s}function Ts(i,e,o,t,r){const n=r.glyphs[i]||r.glyphs["?"];if(!n){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const s=new Di;let l,f,_,y,d,p,u,v;if(n.o){const C=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let m=0,ee=C.length;m<ee;)switch(C[m++]){case"m":l=C[m++]*e+o,f=C[m++]*e+t,s.moveTo(l,f);break;case"l":l=C[m++]*e+o,f=C[m++]*e+t,s.lineTo(l,f);break;case"q":_=C[m++]*e+o,y=C[m++]*e+t,d=C[m++]*e+o,p=C[m++]*e+t,s.quadraticCurveTo(d,p,_,y);break;case"b":_=C[m++]*e+o,y=C[m++]*e+t,d=C[m++]*e+o,p=C[m++]*e+t,u=C[m++]*e+o,v=C[m++]*e+t,s.bezierCurveTo(d,p,u,v,_,y);break}}return{offsetX:n.ha*e,path:s}}function Ss(i,e,o,t,r,n,s){const{CUBE_SIZE:l,CUBE_SPACING:f,FIRST_CUBE_Z:_}=e,y=_-(o.length+1)*f,d=65535,p=16711935,u=16711680,v=Oe.degToRad(15),C=1e3,m=.5,ee=80,q=1,re=15,x=.1;let ge=[];ge.length=0;let H=null,E=null,me=!1,W=!1,h=new Ri,O=new Ct,g=null,L=null,j=null,_e=!1,Te=null;const G=Un(),N=(M,B,$,I,F,z)=>{const w=new Et;w.position.z=$,w.rotation.z=I,w.userData.isActive=!1;const R=new Qr(B,B,B),Z=new zr(R),b=new vt({color:new dt(d),transparent:!0,opacity:0}),c=new Yt(Z,b);c.geometry.computeBoundingSphere(),w.add(c);let k="right";const A=B/2,U=()=>{const De=new dn(40,24),ve=new zr(De),le=new vt({color:new dt(d),transparent:!0,opacity:0,visible:!0}),ue=new Yt(ve,le);ue.userData.isPortal=!0,ue.userData.isAnimating=!1,ue.geometry.computeBoundingSphere();const tt=new Ir(120,120),Le=new Ot({visible:!1,side:hr}),fe=new Je(tt,Le);fe.userData.isPortalHitbox=!0,fe.userData.portal=ue,fe.geometry.computeBoundingSphere();const He=new Et,Re=new Ir(q,re),wt=65/2;for(let Me=0;Me<ee;Me++){const ne=new Ot({color:new dt(p),transparent:!0,opacity:0,visible:!1,side:hr}),ot=new Je(Re,ne),$e=Me/ee*Math.PI*2;ot.position.set(Math.cos($e)*wt,Math.sin($e)*wt,0),ot.rotation.z=$e+Math.PI/2,ot.userData.baseOpacity=.01,ot.userData.index=Me,ot.geometry.computeBoundingSphere(),He.add(ot)}const yt=2,rt=25;for(let Me=1;Me<rt;Me++){const ne=new dn(40,24),ot=new zr(ne),$e=Oe.lerp(1,.1,Me/(rt-1)),bt=new vt({color:new dt(d),transparent:!0,opacity:0}),Qe=new Yt(ot,bt);Qe.userData.isPortal=!0,Qe.userData.maxOpacity=$e,Qe.position.z=-Me*yt,Qe.geometry.computeBoundingSphere(),ue.add(Qe)}switch(ue.userData.maxOpacity=1,k){case"left":case"right":He.children.forEach(Me=>Me.position.x+=x);break;case"top":case"bottom":He.children.forEach(Me=>Me.position.y+=x);break}switch(ue.add(He),w.add(ue),w.add(fe),ue.updateMatrixWorld(!0),He.updateMatrixWorld(!0),k){case"left":ue.position.set(-A,0,0),ue.rotation.y=Math.PI/2,fe.position.set(-A,0,0),fe.rotation.y=Math.PI/2;break;case"top":ue.position.set(0,A,0),ue.rotation.x=-Math.PI/2,fe.position.set(0,A,0),fe.rotation.x=Math.PI/2;break;case"right":ue.position.set(A,0,0),ue.rotation.y=-Math.PI/2,fe.position.set(A,0,0),fe.rotation.y=-Math.PI/2;break;case"bottom":ue.position.set(0,-A,0),ue.rotation.x=Math.PI/2,fe.position.set(0,-A,0),fe.rotation.x=Math.PI/2;break}},Q=V=>{(V instanceof Yt||V instanceof Je)&&V.geometry&&V.geometry.computeBoundingSphere(),w.add(V)};if(F&&n.showKeyarts){switch(["left","top","right","bottom"].includes(z)?z:"left"){case"left":k="right";break;case"top":k="bottom";break;case"right":k="left";break;case"bottom":k="top";break}const te=s.get(F);if(te){const De=new Ir(B-1,B-1),ve=new Ot({map:te,transparent:!0,opacity:0,blending:zt,side:hr}),le=new Je(De,ve);switch(le.userData.isLoaded=!0,z){case"left":le.position.set(-A,0,0),I>=Oe.degToRad(120)?(le.rotation.y=Math.PI/2,le.rotation.z=-Math.PI):le.rotation.y=Math.PI/2;break;case"top":le.position.set(0,A,0),le.rotation.x=Math.PI/2,le.rotation.z=-Math.PI/2;break;case"right":le.position.set(A,0,0),I>=Oe.degToRad(120)?(le.rotation.y=-Math.PI/2,le.rotation.z=-Math.PI):le.rotation.y=-Math.PI/2;break;case"bottom":le.position.set(0,-A,0),I>=Oe.degToRad(180)?(le.rotation.x=-Math.PI/2,le.rotation.z=Math.PI/2):(le.rotation.x=-Math.PI/2,le.rotation.z=-Math.PI/2);break}le.geometry.computeBoundingSphere(),Q(le),U()}else console.warn(`Keyart texture not preloaded for ${M.title}: ${F}`),U()}else U();{const V=(Le,fe,He,Re)=>{const wt=new Ir(B-1,B-1),yt={map:Le,transparent:!0,opacity:0,blending:zt,side:hr,depthWrite:!1};Re&&(yt.color=Re);const rt=new Ot(yt),Me=new Je(wt,rt);Me.position.copy(fe),He.x&&(Me.rotation.x=He.x),He.y&&(Me.rotation.y=He.y),Me.userData.isGridPlane=!0,Me.geometry.computeBoundingSphere(),Q(Me)},te=s.get(t),De=s.get(r),ve=["left","top","right","bottom"],ue=[F&&n.showKeyarts?z||"left":null,k].filter(Boolean),tt=ve.filter(Le=>!ue.includes(Le));if(te)switch(V(te,new Pe(0,0,-B/2-1),{y:0}),V(te,new Pe(0,0,B/2+1),{y:0},new dt(16744448)),tt[0]){case"left":V(te,new Pe(-A,0,0),{y:-Math.PI/2},new dt(255));break;case"top":V(te,new Pe(0,A,0),{x:Math.PI/2},new dt(255));break;case"right":V(te,new Pe(A,0,0),{y:Math.PI/2},new dt(255));break;case"bottom":V(te,new Pe(0,-A,0),{x:-Math.PI/2},new dt(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(De)switch(tt[1]){case"left":V(De,new Pe(-A,0,0),{y:-Math.PI/2});break;case"top":V(De,new Pe(0,A,0),{x:Math.PI/2});break;case"right":V(De,new Pe(A,0,0),{y:Math.PI/2});break;case"bottom":V(De,new Pe(0,-A,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${r}`)}w.children.forEach(V=>{V.updateMatrixWorld(!0),V instanceof Et&&V.children.forEach(te=>{te.updateMatrixWorld(!0)})}),w.updateMatrixWorld(!0);const we=new Nn().setFromObject(w),be=new Fn;return we.getBoundingSphere(be),w.boundingSphere=be,w},T=new ki,a=(M,B,$,I,F,z)=>{const w=new vs(M,{font:z,size:F,depth:0,curveSegments:12,bevelEnabled:!1});w.computeBoundingBox(),w.center();const R=new Ot({color:16777215,transparent:!0,opacity:0,side:hr}),Z=new Je(w,R);Z.position.set(B,$,I);const b=w.boundingBox,c=b.max.x-b.min.x,k=b.max.y-b.min.y,A=c+8,U=k+4,Q=new Ir(A,U),we=new Ot({color:0,transparent:!0,opacity:0,side:hr}),be=new Je(Q,we);return be.position.set(B,$,I-1),i.add(be),i.add(Z),Z.userData.backgroundPlane=be,Z},S=()=>new Promise(M=>{H=new ys,H.load("/fonts/Poppins_Regular.json",B=>{E=B;const $=Array.isArray(o)?o:[];Array.isArray(o)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",o),$.forEach((I,F)=>{const z=_-(F+1)*f,w=(F+1)*v,R=N(I,l,z,w,I.keyart,I.keyartLocation);i.add(R),ge.push(R),a(I.title,0,I.size-15,_+90-(F+1)*f,I.size,B)}),M()},void 0,B=>console.error("Error loading font:",B))}),Y=()=>me?Promise.resolve({projectCubes:ge,updateCubeColors:Se,loadedFont:E,maxZ:y}):S().then(()=>(me=!0,{projectCubes:ge,updateCubeColors:Se,loadedFont:E,maxZ:y})).catch(M=>{throw console.error("Error in loadFontAndText:",M),M}),K=M=>{if(M.userData.isAnimating)return;M.userData.isAnimating=!0;const B=M.children.find(w=>w instanceof Et);if(!B)return;const $=B.children,I=$.length,F=ze.timeline({repeat:-1,defaults:{ease:"none"}}),z={value:0};F.to(z,{value:1,duration:1.5,onUpdate:()=>{$.forEach(R=>{const Z=R.material;if(Z.visible){const b=(R.userData.index/I+z.value)%1,k=(Math.sin(b*Math.PI*2)+1)/2,A=.01+(1-.01)*Math.pow(k,4);Z.opacity=A}})}}),M.userData.animationTimeline=F},oe=M=>{if(!M.userData.isAnimating)return;M.userData.isAnimating=!1;const B=M.children.find($=>$ instanceof Et);B&&(M.userData.animationTimeline&&(M.userData.animationTimeline.kill(),delete M.userData.animationTimeline),B.children.forEach($=>{const I=$.material;I.opacity=0}))},Se=M=>{T.setFromProjectionMatrix(M.projectionMatrix.clone().multiply(M.matrixWorldInverse));const B=M.position.z;let $=[];i.traverse(I=>{var F;return I instanceof Je&&((F=I.geometry)==null?void 0:F.type)==="TextGeometry"&&$.push(I)}),W||(W=!0),ge.forEach((I,F)=>{const z=I.boundingSphere;if(z){const b=z.clone();if(b.radius*=1.5,!T.intersectsSphere(b))return}else console.warn(`Cube ${F} has no boundingSphere`);const w=I.position.z,R=Math.abs(B-w+90);let Z=0;R<=C&&(Z=1-R/C),I.userData.isActive=Z>=m,I.children.forEach(b=>{if(b instanceof Yt&&!b.userData.isPortal&&!b.userData.isPortalHitbox){const c=b.material;if(R<=C){const k=Oe.lerp((d>>16&255)/255,(p>>16&255)/255,Z),A=Oe.lerp((d>>8&255)/255,(p>>8&255)/255,Z),U=Oe.lerp((d&255)/255,(p&255)/255,Z);c.color.set(k,A,U),c.opacity=Math.min(1,Z*2)}else c.opacity=0}else if(b instanceof Yt&&b.userData.isPortal)W&&(Z>.1?b.children.forEach(c=>{c instanceof Et&&c.children.forEach(k=>{k instanceof Je&&(k.material.visible=!0,!b.userData.animationStarted&&n.showPortalPulses&&(K(b),b.userData.animationStarted=!0))})}):Z<=.1&&b.userData.animationStarted&&(b.children.forEach(c=>{c instanceof Et&&c.children.forEach(k=>{k instanceof Je&&(k.material.visible=!1)})}),oe(b),delete b.userData.animationStarted));else if(b instanceof Je&&!b.userData.isPortalHitbox){const c=b.material;if(b.userData.isLoaded||b.userData.isGridPlane)if(R<=C){const k=1-R/C;c.opacity=Math.min(.8,k*2)}else c.opacity=0}})}),$.forEach(I=>{if(!T.intersectsObject(I))return;const F=I.material,z=I.userData.backgroundPlane,w=z==null?void 0:z.material,R=I.position.z,Z=Math.abs(B-R+120);if(Z<=C){const b=1-Z/C,c=Math.min(1,b*2);F.opacity=c,w&&(w.opacity=c*.8)}else F.opacity=0,w&&(w.opacity=0)})};return{getInitializedData:Y,updateCubeColors:Se,setupInteractivity:(M,B,$)=>{Te=$;let I=null,F=null;const z=(b,c=!0)=>{const k=[b,...b.children.filter(U=>U instanceof Yt&&U.userData.isPortal)],A=c?25:2;k.forEach((U,Q)=>{let we=-Q*A;(b.position.y>0&&b.rotation.x===-Math.PI/2||b.position.y<0&&b.rotation.x===Math.PI/2)&&(we=Q*A);const be=c?U.userData.maxOpacity:0;ze.to(U.position,{z:we,duration:1,ease:"power3.out",delay:.5}),ze.to(U.material,{opacity:be,duration:1,ease:"power3.out",delay:.5})})},w=b=>{O.x=b.clientX/window.innerWidth*2-1,O.y=-(b.clientY/window.innerHeight)*2+1,h.setFromCamera(O,M);const c=ge.flatMap(A=>A.userData.isActive?A.children.filter(U=>U instanceof Je&&U.userData.isPortalHitbox):[]),k=h.intersectObjects(c);if(k.length>0){const U=k[0].object.userData.portal;if(g!==U){if(g){const we=g.material;ze.to(we.color,{r:(d>>16&255)/255,g:(d>>8&255)/255,b:(d&255)/255,duration:.5})}g=U;const Q=g.material;ze.to(Q.color,{r:(u>>16&255)/255,g:(u>>8&255)/255,b:(u&255)/255,duration:.5})}B.style.cursor="pointer"}else{if(g){const A=g.material;ze.to(A.color,{r:(d>>16&255)/255,g:(d>>8&255)/255,b:(d&255)/255,duration:.5}),g=null}B.style.cursor="auto"}},R=b=>{O.x=b.clientX/window.innerWidth*2-1,O.y=-(b.clientY/window.innerHeight)*2+1,h.setFromCamera(O,M);const c=ge.flatMap(V=>V.userData.isActive?V.children.filter(te=>te instanceof Je&&te.userData.isPortalHitbox):[]),k=h.intersectObjects(c);if(k.length===0)return;const A=k[0].object,U=A.userData.portal,Q=A.parent,we=ge.indexOf(Q),be=o[we];if(_e&&U===F){U.getWorldPosition(new Pe);let V=new Pe;const te=e.CUBE_SIZE/2;U.position.x===te?V.set(-1,0,0):U.position.x===-te?V.set(1,0,0):U.position.y===te?V.set(0,-1,0):U.position.y===-te&&V.set(0,1,0),V.applyQuaternion(Q.getWorldQuaternion(new Oi)).normalize();const ve=M.position.clone().clone().add(V.clone().multiplyScalar(-675)),le=V.clone().multiplyScalar(-1e3),ue=ve.clone().add(le);ze.to(M.position,{x:ve.x,y:ve.y,z:ve.z,duration:1,ease:"power2.in",onUpdate:()=>M.lookAt(ue),onComplete:()=>{be!=null&&be.slug&&(G.setScrollPosition(window.scrollY),hi.visit(route("project.show",{project:be.slug}),{preserveScroll:!1}))}})}else if(!_e){L||(L=M.position.clone(),j=new Pe(0,0,y)),Te&&$(!0,L,j);const V=U.getWorldPosition(new Pe);ze.to(M.position,{x:0,y:0,z:Q.getWorldPosition(new Pe).z,duration:2,ease:"power3.out"}),ze.to({},{duration:2,ease:"power3.out",onUpdate:function(){const te=this.progress(),De=M.getWorldDirection(new Pe).multiplyScalar(1e3).add(M.position),ve=Oe.lerp(De.x,V.x,te),le=Oe.lerp(De.y,V.y,te),ue=Oe.lerp(De.z,V.z,te);M.lookAt(ve,le,ue)},onStart:()=>{_e=!0,I=window.scrollY,document.body.classList.add("no-scrollbar"),F=U,z(U,!0)}})}},Z=b=>{if(!_e||!F||!L||!j)return;let c=0;if(b instanceof WheelEvent?c=b.deltaY:c=window.scrollY-(I||0),b.preventDefault(),b.stopPropagation(),c>0){window.scrollTo(0,I);return}if(c<0){const k=F,A=j.clone(),U=L.z;ze.to(M.position,{x:L.x,y:L.y,z:U,duration:1,ease:"power3.out"}),ze.to({},{duration:1,ease:"power3.out",onUpdate:function(){const Q=this.progress(),we=M.getWorldDirection(new Pe).multiplyScalar(1e3).add(M.position),be=Oe.lerp(we.x,A.x,Q),V=Oe.lerp(we.y,A.y,Q),te=Oe.lerp(we.z,A.z,Q);M.lookAt(be,V,te)},onComplete:()=>{M.lookAt(A),_e=!1,F=null,document.body.classList.remove("no-scrollbar"),Te&&$(!1),z(k,!1),I=null,L=null,j=null}})}};return B.addEventListener("mousemove",w),B.addEventListener("click",R),window.addEventListener("wheel",Z,{passive:!1}),window.addEventListener("scroll",Z,{passive:!1}),()=>{B.removeEventListener("mousemove",w),B.removeEventListener("click",R),window.removeEventListener("wheel",Z),window.removeEventListener("scroll",Z)}}}}function Cs(i,e,o,t){const x=o-1e3,ge=Math.abs(-500-x),H=Math.ceil(ge/100),E=()=>{const T=new Et;let a=null,S=null;const Y=[],K=[],oe=[],Se=[],xe=[];{const M=new Qr(100,100,100),B=new zr(M),$=32*H,I=new Bi;I.copy(B),I.instanceCount=$;const F=new vt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),z=new Float32Array($*3),w=new Float32Array($*3),R=new Float32Array($*3),Z=32*100,b=-3200/2+100/2,c=-500;for(let Le=0;Le<32;Le++){const fe=me(Le);for(let He=0;He<H;He++){const Re=Le*H+He,wt=b+Le*100,yt=c-He*100,rt=Oe.randFloat(100,300),Me=rt/100,ne=-600+rt/2;z[Re*3]=wt,z[Re*3+1]=ne,z[Re*3+2]=yt,w[Re*3]=1,w[Re*3+1]=Me,w[Re*3+2]=1,R[Re*3]=fe,R[Re*3+1]=fe,R[Re*3+2]=fe}}I.setAttribute("instancePosition",new Ro(z,3)),I.setAttribute("instanceScale",new Ro(w,3)),I.setAttribute("color",new Ro(R,3)),F.onBeforeCompile=Le=>{Le.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${Le.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new Yt(I,F);const k=-3200/2,A=Z/2,U=-600,Q=-300,we=x,be=-500;I.boundingBox=new Nn(new Pe(k,U,we),new Pe(A,Q,be));const V=(k+A)/2,te=(U+Q)/2,De=(we+be)/2,ve=A-k,le=Q-U,ue=be-we,tt=Math.sqrt(ve*ve+le*le+ue*ue)/2;I.boundingSphere=new Fn(new Pe(V,te,De),tt),T.add(a)}{S=new Et;const M=32*100/5,B=-3200/2;for(let I=0;I<6;I++){let z=B+I*M,w=-500;const R=[new Pe(z,-450,w)];let Z=0;for(;w>x;){const b=w===-500?Oe.randFloat(300,800):Math.min(Oe.randFloat(300,800),Math.abs(w-x));if(w-=b,R.push(new Pe(z,-450,w)),Z+=b,w<=x){R[R.length-1].z=x;break}const c=Math.random()<.5?-1:1,k=Oe.randFloat(100,300);z+=c*k,R.push(new Pe(z,-450,w)),Z+=k}K.push({points:R,totalLength:Z})}const $=new Qr(4,4,4);for(let I=0;I<6;I++){const F=K[I],z=F.totalLength,w=z/60;for(let R=0;R<60;R++){const Z=new Ot({color:16711680,fog:!0}),b=new Je($,Z),c=R*w;let k=c;for(let A=0;A<F.points.length-1;A++){const U=F.points[A],Q=F.points[A+1],we=U.distanceTo(Q);if(k<=we){const be=k/we;b.position.lerpVectors(U,Q,be);break}k-=we}Y.push(b),oe.push(c),Se.push(I),xe.push(1),S.add(b)}for(let R=0;R<60;R++){const Z=new Ot({color:16777215,fog:!0}),b=new Je($,Z),c=z-(R*w+w/2);let k=z-c;const A=[...F.points].reverse();for(let U=0;U<A.length-1;U++){const Q=A[U],we=A[U+1],be=Q.distanceTo(we);if(k<=be){const V=k/be;b.position.lerpVectors(Q,we,V);break}k-=be}Y.push(b),oe.push(c),Se.push(I),xe.push(-1),S.add(b)}}e.add(S)}return e.add(T),{cityGroup:T,instancedLines:a,particleGroup:S,particles:Y,paths:K,particleDistances:oe,particlePaths:Se,particleDirections:xe}},me=T=>{if(T<10)return .05+T*.10555555555555556;if(T>=22){const a=31-T,S=(1-.05)/9;return .05+a*S}return 1},{cityGroup:W,instancedLines:h,particleGroup:O,particles:g,paths:L,particleDistances:j,particlePaths:_e,particleDirections:Te}=E();return{cityGroup:W,buildingLines:h?[h]:[],updateParticles:T=>{const a=100*T;for(let S=0;S<g.length;S++){const Y=Te[S],K=_e[S],oe=L[K],Se=oe.totalLength;j[S]+=a*Y,Y===1?(j[S]=j[S]%Se,j[S]<0&&(j[S]+=Se)):j[S]=(j[S]+Se)%Se;const xe=j[S],M=Y===1?oe.points:[...oe.points].reverse();let B=Y===1?xe:Se-xe;for(let $=0;$<M.length-1;$++){const I=M[$],F=M[$+1],z=I.distanceTo(F);if(B<=z){const w=B/z;g[S].position.lerpVectors(I,F,w);break}B-=z}}},dispose:()=>{h&&(W.remove(h),h.geometry.dispose(),h.material.dispose()),O&&(e.remove(O),O.children.forEach(T=>{T.geometry.dispose(),T.material.dispose()})),e.remove(W)}}}ze.registerPlugin(ce);function Ps(i,e,o,t,r,n,s={},l,f){ce.config({syncTouch:!0});const{CUBE_SPACING:_,FIRST_CUBE_Z:y}=n,d=(t==null?void 0:t.length)||0,p=y-(d+1)*_;let u=!1;const v=Math.abs(p)+(d-1)*_,C=ze.timeline();return ze.timeline({scrollTrigger:{trigger:o.value,start:"top top",end:`+=${v}`,scrub:s.scrub||.5,pin:!0,onUpdate:q=>{if(!u){const re=q.progress,x=Oe.lerp(0,p,re);e.position.set(0,0,x),e.lookAt(0,0,p)}r(e)}}}).fromTo(e.position,{z:0},{z:p,duration:1,ease:"none"}),{setReverting:ee=>{u=ee},timeline:C}}function Ms(i,e,o){const l=o-1e3,f=1e3,_=o,y=150,d=-500,p=o,u=new yr,v=new Float32Array(2e3*3),C=new Float32Array(2e3),m=new Float32Array(2e3);let ee=0;for(;ee<2e3;){const H=(Math.random()-.5)*4e3,E=(Math.random()-.5)*4e3,me=-1e3+Math.random()*(l- -1e3),W=me>_&&Math.abs(H)<f&&Math.abs(E)<f,h=Math.abs(H)<y&&Math.abs(E)<y&&me>p&&me<d;if(!W&&!h){const O=ee*3;v[O]=H,v[O+1]=E,v[O+2]=me;const g=.1+Math.random()*(.7-.1);C[ee]=g,m[ee]=g,ee++}}u.setAttribute("position",new hn(v,3)),u.setAttribute("opacity",new hn(m,1));const q=new nr({uniforms:{color:{value:new dt(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),re=new Li(u,q);i.add(re);const x=u.attributes.opacity;for(let H=0;H<2e3;H++)ze.to({opacity:C[H]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){m[H]=this.targets()[0].opacity,x.needsUpdate=!0}});return{dispose:()=>{ze.killTweensOf(m),i.remove(re),u.dispose(),q.dispose()}}}function Es(i,e){const t=e-1500,r=100,n=2,s=64,l=1e3,f=s*3,_=[4,4.5,5],y=6;let d,p,u,v,C,m;const ee=[],q=[[],[],[]],re=[[],[],[]],x=[[],[],[]];let ge=[0,0,0];const H=()=>{const h=0-t,O=[];for(let T=0;T<r;T++){const a=T/(r-1),S=0-a*h,Y=a*5*2*Math.PI,K=90*(.8+.2*Math.sin(Y*2)),oe=new Pe(K*Math.cos(Y),K*Math.sin(Y),S);(isNaN(oe.x)||isNaN(oe.y)||isNaN(oe.z))&&console.error("NaN in chaserPath points",{t:a,z:S,projectMaxZ:e}),O.push(oe)}d=new ko(O);const g=new yr().setFromPoints(d.getPoints(200));v=new Oo(g,new vt({color:16711935,linewidth:2,visible:!1})),i.add(v);const L=[];for(let T=0;T<r;T++){const a=T/(r-1),S=0-a*h,Y=a*3*2*Math.PI,K=60*(.8+.2*Math.sin(Y*4)),oe=new Pe(K*Math.cos(Y),K*Math.sin(Y),S);(isNaN(oe.x)||isNaN(oe.y)||isNaN(oe.z))&&console.error("NaN in chaserPath2 points",{t:a,z:S,projectMaxZ:e}),L.push(oe)}p=new ko(L);const j=new yr().setFromPoints(p.getPoints(200));C=new Oo(j,new vt({color:65535,linewidth:2,visible:!1})),i.add(C);const _e=[];for(let T=0;T<r;T++){const a=T/(r-1),S=0-a*h,Y=a*7*2*Math.PI,K=100,oe=90,Se=.1*Math.sin(Y),xe=new Pe(K*(1+Se)*Math.cos(Y),oe*(1-Se)*Math.sin(Y),S);(isNaN(xe.x)||isNaN(xe.y)||isNaN(xe.z))&&console.error("NaN in chaserPath3 points",{t:a,z:S,projectMaxZ:e}),_e.push(xe)}u=new ko(_e);const Te=new yr().setFromPoints(u.getPoints(200));m=new Oo(Te,new vt({color:16776960,linewidth:2,visible:!1})),i.add(m);const G=[16711680,65280,255],N=new Qr(n,n,n);N.attributes.color&&delete N.attributes.color;for(let T=0;T<3;T++){const a=new Et;a.opacity=1,a.renderOrder=1,ee[T]=a,i.add(a);for(let S=0;S<f;S++){const Y=new Ot({color:G[T],transparent:!0,opacity:0,blending:Ni,fog:!0,depthWrite:!1}),K=new Je(N,Y);K.renderOrder=1,K.visible=!1,a.add(K),q[T][S]=K,re[T][S]=0,x[T][S]=!1}}},E=h=>{const O=[d,p,u][h],g=O.getLength(),L=x[h].filter(_e=>_e).length;if(f-L>=s){let _e=0;for(let Te=0;Te<s;Te++){const G=x[h].findIndex(oe=>!oe);if(G===-1){console.warn(`No available chasers for path ${h}, emitted ${_e}/${s}`);break}const N=_e/(s-1),T=.05+(1-.05)*Math.pow(N,3),a=new Ot({color:[16711680,65280,255][h],transparent:!0,opacity:T,blending:zt,fog:!0,depthWrite:!1});q[h][G].material=a,q[h][G].visible=!0;const S=_e*y;re[h][G]=S,x[h][G]=!0;const Y=S/g,K=O.getPointAt(Y);q[h][G].position.copy(K),_e++}}},me=h=>{const O=performance.now()/1e3,g=[d,p,u];for(let L=0;L<3;L++){O-ge[L]>=_[L]&&(E(L),ge[L]=O);const j=g[L],_e=j.getLength(),Te=l*h;for(let G=0;G<f;G++)if(x[L][G]){re[L][G]+=Te;const N=re[L][G]/_e;if(N>=1)q[L][G].visible=!1,x[L][G]=!1,re[L][G]=0;else{const T=j.getPointAt(N);q[L][G].position.copy(T)}}}};return H(),{chaserPath:d,chaserPath2:p,chaserPath3:u,updateChasers:me,dispose:()=>{i.remove(v),i.remove(C),i.remove(m),v.geometry.dispose(),v.material.dispose(),C.geometry.dispose(),C.material.dispose(),m.geometry.dispose(),m.material.dispose(),ee.forEach(h=>{h.children.forEach(O=>{O.geometry.dispose(),O.material.dispose()}),i.remove(h)})}}}const Is={class:"preloader"},As={class:"progress-label"},Ds=en({__name:"Preloader",props:{progress:{}},setup(i){return(e,o)=>(So(),tn("div",Is,[or("div",As,gi(Math.round(e.progress))+"%",1)]))}}),Rs=zn(Ds,[["__scopeId","data-v-e5eadefa"]]),On=250,go=500,Rr=-500,Go=-520,Bn=-720,Ln=4e3,ks=en({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(i){ze.registerPlugin(ce);const e=Un();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const o=i,t={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},r=er(null),n=er(null),s=er(!1),l=er(0),f=er(!1),_=er(!0),y=new Map;er(null);let d,p,u,v,C,m,ee,q=null,re=null,x=null,ge=null,H=null,E=[],me=null,W=null,h=0,O=null,g;const L=()=>{const N=r.value?r.value.getBoundingClientRect().width:window.innerWidth,T=window.innerHeight,a=e.isMobile?.75:1,S=e.isMobile?Math.min(window.devicePixelRatio,1):window.devicePixelRatio;u.setSize(N*a,T*a),u.setPixelRatio(S),v.setSize(N*a,T*a),p.aspect=N/T,p.updateProjectionMatrix(),u.domElement.style.width=`${N}px`,u.domElement.style.height=`${T}px`},j=N=>y.has(N)?Promise.resolve(y.get(N)):new Promise((T,a)=>{new Yi().load(N,Y=>{Y.encoding=void 0,y.set(N,Y),T(Y)},void 0,Y=>a(Y))}),_e=async()=>{d=new Fi,d.background=new dt(0),d.fog=new zi(0,700,Ln),p=new Ui(75,window.innerWidth/window.innerHeight,1,Ln+6e3),p.position.set(0,0,0),p.lookAt(0,0,1e3),u=new Hi({antialias:!0}),e.isMobile?u.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):u.setPixelRatio(window.devicePixelRatio),u.toneMapping=Gi,u.toneMappingExposure=1,u.outputEncoding=void 0,v=new gs(u);const N=new ms(d,p);if(v.addPass(N),e.isMobile?C=new pr(new Ct(window.innerWidth,window.innerHeight),1.3,.2,0):C=new pr(new Ct(window.innerWidth,window.innerHeight),1.6,.2,0),C.renderToScreen=!0,v.addPass(C),r.value)r.value.appendChild(u.domElement),u.domElement.style.opacity="0";else return;m=new $r,m.dom.style.position="fixed",m.dom.style.top="0px",m.dom.style.left="0px",m.dom.style.zIndex="1000",document.body.appendChild(m.dom);const a=o.projects.filter(K=>K.keyart).length+2;let S=0;const Y=()=>{S++,l.value=S/a*100,S===a&&(s.value=!0)};await j(o.projectGridFile).then(()=>Y()).catch(()=>Y()),await j(o.projectGridFile2).then(()=>Y()).catch(()=>Y());for(const K of o.projects)K.keyart?await j(K.keyart).then(()=>Y()).catch(()=>Y()):Y();O=Ss(d,{CUBE_SIZE:On,CUBE_SPACING:go,FIRST_CUBE_Z:Rr},o.projects,o.projectGridFile,o.projectGridFile2,t,y);try{const K=await O.getInitializedData();if(g=K.maxZ,g===void 0||isNaN(g))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:oe}=ws(d,d,{CUBE_SIZE:On,FIRST_CUBE_Z:Rr},t);if(E=[...oe,...K.projectCubes],me=K.updateCubeColors,t.showCars){const{cityGroup:Se,updateParticles:xe,dispose:M}=Cs(d,d,g,t);ee=xe,H=M}if(t.showStarfield){const{dispose:Se}=Ms(d,p,g);q=Se}if(t.showChasers){const{dispose:Se,updateChasers:xe}=Es(d,g);x=Se,ge=xe}L()}catch(K){console.error("Error initializing project cubes:",K),g=Rr-(o.projects.length+1)*go}},Te=(N=0)=>{if(W=requestAnimationFrame(Te),u&&v){const T=(N-h)/1e3;h=N,ee(T),ge&&ge(T);const a=4e3,S=1e3,Y=Math.abs(p.position.z-g);p.far=Math.max(a+S,Y),p.updateProjectionMatrix();const K=Bn-Go;let oe=0;p.position.z>=Go?oe=0:p.position.z<=Bn?oe=1:oe=(p.position.z-Go)/K,e.isMobile?C.strength=Oe.lerp(1.3,0,oe):C.strength=Oe.lerp(1.6,.125,oe),v.render()}m.update()};mi(()=>{_e().then(()=>{if(s.value){W=requestAnimationFrame(Te);let N=null;const T=O.getInitializedData().then(({projectCubes:S})=>{S.forEach(K=>{K.userData.isActive=!0});const Y=Rr-(o.projects.length-1)*go;p.position.set(0,0,5e3),p.lookAt(0,0,Y),p.updateProjectionMatrix(),me(p),v.render(),E.length&&me&&(N=Ps(d,p,n,E,me,{CUBE_SPACING:go,FIRST_CUBE_Z:Rr},{scrub:e.isMobile?3:1}).setReverting),u&&re===null&&(re=O.setupInteractivity(p,u.domElement,K=>{N&&N(K)})),window.scrollTo({top:0,behavior:"auto"})}),a=()=>{T.then(()=>{_.value=!1,p.position.set(0,0,5e3),p.updateProjectionMatrix(),ze.to(u.domElement,{opacity:1,duration:.5,ease:"power4.out"});const S={z:5e3};ze.to(S,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{p.position.z=S.z,p.updateProjectionMatrix()},onComplete:()=>{p.position.z=0,f.value=!0}})})};ze.delayedCall(.5,a)}}).catch(N=>{console.error("Initialization failed:",N)}),window.addEventListener("resize",G)}),_i(()=>{W!==null&&cancelAnimationFrame(W),re&&re(),window.removeEventListener("resize",G),ce.getAll().forEach(N=>N.kill()),u.dispose(),v.dispose(),d.clear(),document.body.removeChild(m.dom),q&&q(),x&&x(),H&&H()});const G=()=>{L(),ce.refresh()};return(N,T)=>(So(),tn("section",{ref_key:"wrapper",ref:n,class:"wrapper"},[kr(vi,{name:"fade"},{default:wi(()=>[_.value?(So(),yi(Rs,{key:0,progress:l.value},null,8,["progress"])):bi("",!0)]),_:1}),or("div",{ref_key:"tunnelWrapper",ref:r,class:"tunnel-wrapper"},null,512)],512))}}),Os=zn(ks,[["__scopeId","data-v-54c16b79"]]),Bs={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Ls={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Ns={class:"overflow-hidden"},Hs=en({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(i){return(e,o)=>(So(),tn(Si,null,[kr(xi(Ti),{title:"Welcome"}),or("div",Bs,[or("nav",Ls,[kr(Xi)]),or("div",Ns,[kr(Os,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),o[0]||(o[0]=or("div",{class:"flex justify-center items-center"},null,-1)),o[1]||(o[1]=or("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),kr(Wi)])],64))}});export{Hs as default};
