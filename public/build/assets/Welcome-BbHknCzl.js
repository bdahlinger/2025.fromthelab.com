import{W as vr,d as $t,I as ls,e as Gs,o as An,a as fo,t as Tr,x as Pr,y as Mr,b as Ho,w as Us,c as Ys,f as Cr,T as Sr,u as Er,m as Ir}from"./app-C8iT6K7-.js";import{c as Be,O as Ar,e as ro,F as Xo,j as po,U as $n,V as Re,k as vn,H as Tn,N as Dr,C as kr,l as It,d as De,b as Vt,m as pt,E as Rr,n as Ws,o as Xs,p as vo,q as Or,r as Lr,s as Nr,P as zn,t as Br,v as to,G as yt,w as zr,a as Wt,L as Ot,g as ke,x as Ve,B as Do,y as jo,f as wt,u as js,R as Hr,z as Fr,I as Gr,J as eo,K as Vs,Q as Zs,T as ys,X as Ur,Y as Yr,Z as Hn,_ as xs,$ as Wr,a0 as Fn,a1 as Gn,a2 as Xr,S as jr,a3 as Vr,a4 as Zr,W as qr,a5 as $r,a6 as Qr,h as Kr,i as Jr}from"./GlobalFooter-CTZDZaCJ.js";import{u as ei,_ as ti}from"./App.vue_vue_type_script_setup_true_lang-C5xAWElZ.js";import{_ as qs}from"./_plugin-vue_export-helper-DlAUqK2U.js";function oi(f,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(f,t.key,t)}}function ni(f,e,n){return e&&oi(f.prototype,e),f}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _t,Pn,Ft,no,so,Eo,$s,co,Vo,Qs,Kt,Xt,Ks,Js=function(){return _t||typeof window<"u"&&(_t=window.gsap)&&_t.registerPlugin&&_t},er=1,So=[],Fe=[],qt=[],Zo=Date.now,Qn=function(e,n){return n},si=function(){var e=Vo.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,Fe),o.push.apply(o,qt),Fe=t,qt=o,Qn=function(c,p){return n[c](p)}},io=function(e,n){return~qt.indexOf(e)&&qt[qt.indexOf(e)+1][n]},qo=function(e){return!!~Qs.indexOf(e)},St=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Ct=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},cn="scrollLeft",un="scrollTop",Kn=function(){return Kt&&Kt.isPressed||Fe.cache++},Dn=function(e,n){var t=function o(s){if(s||s===0){er&&(Ft.history.scrollRestoration="manual");var c=Kt&&Kt.isPressed;s=o.v=Math.round(s)||(Kt&&Kt.iOS?1:0),e(s),o.cacheID=Fe.cache,c&&Qn("ss",s)}else(n||Fe.cache!==o.cacheID||Qn("ref"))&&(o.cacheID=Fe.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},kt={s:cn,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Dn(function(f){return arguments.length?Ft.scrollTo(f,dt.sc()):Ft.pageXOffset||no[cn]||so[cn]||Eo[cn]||0})},dt={s:un,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:kt,sc:Dn(function(f){return arguments.length?Ft.scrollTo(kt.sc(),f):Ft.pageYOffset||no[un]||so[un]||Eo[un]||0})},Rt=function(e,n){return(n&&n._ctx&&n._ctx.selector||_t.utils.toArray)(e)[0]||(typeof e=="string"&&_t.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},ao=function(e,n){var t=n.s,o=n.sc;qo(e)&&(e=no.scrollingElement||so);var s=Fe.indexOf(e),c=o===dt.sc?1:2;!~s&&(s=Fe.push(e)-1),Fe[s+c]||St(e,"scroll",Kn);var p=Fe[s+c],w=p||(Fe[s+c]=Dn(io(e,t),!0)||(qo(e)?o:Dn(function(R){return arguments.length?e[t]=R:e[t]})));return w.target=e,p||(w.smooth=_t.getProperty(e,"scrollBehavior")==="smooth"),w},Jn=function(e,n,t){var o=e,s=e,c=Zo(),p=c,w=n||50,R=Math.max(500,w*3),z=function(C,M){var y=Zo();M||y-c>w?(s=o,o=C,p=c,c=y):t?o+=C:o=s+(C-s)/(y-p)*(c-p)},I=function(){s=o=t?0:o,p=c=0},b=function(C){var M=p,y=s,U=Zo();return(C||C===0)&&C!==o&&z(C),c===p||U-p>R?0:(o+(t?y:-y))/((t?U:c)-M)*1e3};return{update:z,reset:I,getVelocity:b}},No=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},ws=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},tr=function(){Vo=_t.core.globals().ScrollTrigger,Vo&&Vo.core&&si()},or=function(e){return _t=e||Js(),!Pn&&_t&&typeof document<"u"&&document.body&&(Ft=window,no=document,so=no.documentElement,Eo=no.body,Qs=[Ft,no,so,Eo],_t.utils.clamp,Ks=_t.core.context||function(){},co="onpointerenter"in Eo?"pointer":"mouse",$s=at.isTouch=Ft.matchMedia&&Ft.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ft||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Xt=at.eventTypes=("ontouchstart"in so?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in so?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return er=0},500),tr(),Pn=1),Pn};kt.op=dt;Fe.cache=0;var at=function(){function f(n){this.init(n)}var e=f.prototype;return e.init=function(t){Pn||or(_t)||console.warn("Please gsap.registerPlugin(Observer)"),Vo||tr();var o=t.tolerance,s=t.dragMinimum,c=t.type,p=t.target,w=t.lineHeight,R=t.debounce,z=t.preventDefault,I=t.onStop,b=t.onStopDelay,m=t.ignore,C=t.wheelSpeed,M=t.event,y=t.onDragStart,U=t.onDragEnd,te=t.onDrag,O=t.onPress,S=t.onRelease,ee=t.onRight,G=t.onLeft,L=t.onUp,X=t.onDown,oe=t.onChangeX,v=t.onChangeY,fe=t.onChange,T=t.onToggleX,$=t.onToggleY,re=t.onHover,we=t.onHoverEnd,J=t.onMove,k=t.ignoreCheck,A=t.isNormalizer,K=t.onGestureStart,a=t.onGestureEnd,Y=t.onWheel,ue=t.onEnable,Se=t.onDisable,d=t.onClick,u=t.scrollSpeed,i=t.capture,r=t.allowClicks,P=t.lockAxis,B=t.onLockAxis;this.target=p=Rt(p)||so,this.vars=t,m&&(m=_t.utils.toArray(m)),o=o||1e-9,s=s||0,C=C||1,u=u||1,c=c||"wheel,touch,pointer",R=R!==!1,w||(w=parseFloat(Ft.getComputedStyle(Eo).lineHeight)||22);var x,H,W,D,_,N,Q,h=this,g=0,l=0,ne=t.passive||!z&&t.passive!==!1,pe=ao(p,kt),Ye=ao(p,dt),F=pe(),se=Ye(),ae=~c.indexOf("touch")&&!~c.indexOf("pointer")&&Xt[0]==="pointerdown",ye=qo(p),le=p.ownerDocument||no,_e=[0,0,0],be=[0,0,0],ge=0,Ae=function(){return ge=Zo()},ce=function(ie,q){return(h.event=ie)&&m&&~m.indexOf(ie.target)||q&&ae&&ie.pointerType!=="touch"||k&&k(ie,q)},de=function(){h._vx.reset(),h._vy.reset(),H.pause(),I&&I(h)},Ee=function(){var ie=h.deltaX=ws(_e),q=h.deltaY=ws(be),E=Math.abs(ie)>=o,j=Math.abs(q)>=o;fe&&(E||j)&&fe(h,ie,q,_e,be),E&&(ee&&h.deltaX>0&&ee(h),G&&h.deltaX<0&&G(h),oe&&oe(h),T&&h.deltaX<0!=g<0&&T(h),g=h.deltaX,_e[0]=_e[1]=_e[2]=0),j&&(X&&h.deltaY>0&&X(h),L&&h.deltaY<0&&L(h),v&&v(h),$&&h.deltaY<0!=l<0&&$(h),l=h.deltaY,be[0]=be[1]=be[2]=0),(D||W)&&(J&&J(h),W&&(y&&W===1&&y(h),te&&te(h),W=0),D=!1),N&&!(N=!1)&&B&&B(h),_&&(Y(h),_=!1),x=0},Xe=function(ie,q,E){_e[E]+=ie,be[E]+=q,h._vx.update(ie),h._vy.update(q),R?x||(x=requestAnimationFrame(Ee)):Ee()},Pe=function(ie,q){P&&!Q&&(h.axis=Q=Math.abs(ie)>Math.abs(q)?"x":"y",N=!0),Q!=="y"&&(_e[2]+=ie,h._vx.update(ie,!0)),Q!=="x"&&(be[2]+=q,h._vy.update(q,!0)),R?x||(x=requestAnimationFrame(Ee)):Ee()},lt=function(ie){if(!ce(ie,1)){ie=No(ie,z);var q=ie.clientX,E=ie.clientY,j=q-h.x,Z=E-h.y,he=h.isDragging;h.x=q,h.y=E,(he||(j||Z)&&(Math.abs(h.startX-q)>=s||Math.abs(h.startY-E)>=s))&&(W=he?2:1,he||(h.isDragging=!0),Pe(j,Z))}},ut=h.onPress=function(me){ce(me,1)||me&&me.button||(h.axis=Q=null,H.pause(),h.isPressed=!0,me=No(me),g=l=0,h.startX=h.x=me.clientX,h.startY=h.y=me.clientY,h._vx.reset(),h._vy.reset(),St(A?p:le,Xt[1],lt,ne,!0),h.deltaX=h.deltaY=0,O&&O(h))},Ie=h.onRelease=function(me){if(!ce(me,1)){Ct(A?p:le,Xt[1],lt,!0);var ie=!isNaN(h.y-h.startY),q=h.isDragging,E=q&&(Math.abs(h.x-h.startX)>3||Math.abs(h.y-h.startY)>3),j=No(me);!E&&ie&&(h._vx.reset(),h._vy.reset(),z&&r&&_t.delayedCall(.08,function(){if(Zo()-ge>300&&!me.defaultPrevented){if(me.target.click)me.target.click();else if(le.createEvent){var Z=le.createEvent("MouseEvents");Z.initMouseEvent("click",!0,!0,Ft,1,j.screenX,j.screenY,j.clientX,j.clientY,!1,!1,!1,!1,0,null),me.target.dispatchEvent(Z)}}})),h.isDragging=h.isGesturing=h.isPressed=!1,I&&q&&!A&&H.restart(!0),W&&Ee(),U&&q&&U(h),S&&S(h,E)}},bt=function(ie){return ie.touches&&ie.touches.length>1&&(h.isGesturing=!0)&&K(ie,h.isDragging)},Ge=function(){return(h.isGesturing=!1)||a(h)},Qe=function(ie){if(!ce(ie)){var q=pe(),E=Ye();Xe((q-F)*u,(E-se)*u,1),F=q,se=E,I&&H.restart(!0)}},st=function(ie){if(!ce(ie)){ie=No(ie,z),Y&&(_=!0);var q=(ie.deltaMode===1?w:ie.deltaMode===2?Ft.innerHeight:1)*C;Xe(ie.deltaX*q,ie.deltaY*q,0),I&&!A&&H.restart(!0)}},Mt=function(ie){if(!ce(ie)){var q=ie.clientX,E=ie.clientY,j=q-h.x,Z=E-h.y;h.x=q,h.y=E,D=!0,I&&H.restart(!0),(j||Z)&&Pe(j,Z)}},We=function(ie){h.event=ie,re(h)},Me=function(ie){h.event=ie,we(h)},Te=function(ie){return ce(ie)||No(ie,z)&&d(h)};H=h._dc=_t.delayedCall(b||.25,de).pause(),h.deltaX=h.deltaY=0,h._vx=Jn(0,50,!0),h._vy=Jn(0,50,!0),h.scrollX=pe,h.scrollY=Ye,h.isDragging=h.isGesturing=h.isPressed=!1,Ks(this),h.enable=function(me){return h.isEnabled||(St(ye?le:p,"scroll",Kn),c.indexOf("scroll")>=0&&St(ye?le:p,"scroll",Qe,ne,i),c.indexOf("wheel")>=0&&St(p,"wheel",st,ne,i),(c.indexOf("touch")>=0&&$s||c.indexOf("pointer")>=0)&&(St(p,Xt[0],ut,ne,i),St(le,Xt[2],Ie),St(le,Xt[3],Ie),r&&St(p,"click",Ae,!0,!0),d&&St(p,"click",Te),K&&St(le,"gesturestart",bt),a&&St(le,"gestureend",Ge),re&&St(p,co+"enter",We),we&&St(p,co+"leave",Me),J&&St(p,co+"move",Mt)),h.isEnabled=!0,h.isDragging=h.isGesturing=h.isPressed=D=W=!1,h._vx.reset(),h._vy.reset(),F=pe(),se=Ye(),me&&me.type&&ut(me),ue&&ue(h)),h},h.disable=function(){h.isEnabled&&(So.filter(function(me){return me!==h&&qo(me.target)}).length||Ct(ye?le:p,"scroll",Kn),h.isPressed&&(h._vx.reset(),h._vy.reset(),Ct(A?p:le,Xt[1],lt,!0)),Ct(ye?le:p,"scroll",Qe,i),Ct(p,"wheel",st,i),Ct(p,Xt[0],ut,i),Ct(le,Xt[2],Ie),Ct(le,Xt[3],Ie),Ct(p,"click",Ae,!0),Ct(p,"click",Te),Ct(le,"gesturestart",bt),Ct(le,"gestureend",Ge),Ct(p,co+"enter",We),Ct(p,co+"leave",Me),Ct(p,co+"move",Mt),h.isEnabled=h.isPressed=h.isDragging=!1,Se&&Se(h))},h.kill=h.revert=function(){h.disable();var me=So.indexOf(h);me>=0&&So.splice(me,1),Kt===h&&(Kt=0)},So.push(h),A&&qo(p)&&(Kt=h),h.enable(M)},ni(f,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),f}();at.version="3.12.7";at.create=function(f){return new at(f)};at.register=or;at.getAll=function(){return So.slice()};at.getById=function(f){return So.filter(function(e){return e.vars.id===f})[0]};Js()&&_t.registerPlugin(at);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var xe,Mo,He,tt,Ht,Ze,cs,kn,nn,$o,Fo,fn,vt,Bn,es,At,_s,bs,Co,nr,Un,sr,Et,ts,rr,ir,oo,os,us,Io,fs,Rn,ns,Yn,pn=1,Tt=Date.now,Wn=Tt(),Yt=0,Go=0,vs=function(e,n,t){var o=zt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Ts=function(e,n){return n&&(!zt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},ri=function f(){return Go&&requestAnimationFrame(f)},Ps=function(){return Bn=1},Ms=function(){return Bn=0},jt=function(e){return e},Uo=function(e){return Math.round(e*1e5)/1e5||0},ar=function(){return typeof window<"u"},lr=function(){return xe||ar()&&(xe=window.gsap)&&xe.registerPlugin&&xe},xo=function(e){return!!~cs.indexOf(e)},cr=function(e){return(e==="Height"?fs:He["inner"+e])||Ht["client"+e]||Ze["client"+e]},ur=function(e){return io(e,"getBoundingClientRect")||(xo(e)?function(){return In.width=He.innerWidth,In.height=fs,In}:function(){return Qt(e)})},ii=function(e,n,t){var o=t.d,s=t.d2,c=t.a;return(c=io(e,"getBoundingClientRect"))?function(){return c()[o]}:function(){return(n?cr(s):e["client"+s])||0}},ai=function(e,n){return!n||~qt.indexOf(e)?ur(e):function(){return In}},Zt=function(e,n){var t=n.s,o=n.d2,s=n.d,c=n.a;return Math.max(0,(t="scroll"+o)&&(c=io(e,t))?c()-ur(e)()[s]:xo(e)?(Ht[t]||Ze[t])-cr(o):e[t]-e["offset"+o])},dn=function(e,n){for(var t=0;t<Co.length;t+=3)(!n||~n.indexOf(Co[t+1]))&&e(Co[t],Co[t+1],Co[t+2])},zt=function(e){return typeof e=="string"},Pt=function(e){return typeof e=="function"},Yo=function(e){return typeof e=="number"},uo=function(e){return typeof e=="object"},Bo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},Xn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},To=Math.abs,fr="left",pr="top",ps="right",ds="bottom",go="width",mo="height",Qo="Right",Ko="Left",Jo="Top",en="Bottom",ct="padding",Gt="margin",ko="Width",hs="Height",ft="px",Ut=function(e){return He.getComputedStyle(e)},li=function(e){var n=Ut(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Cs=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},Qt=function(e,n){var t=n&&Ut(e)[es]!=="matrix(1, 0, 0, 1, 0, 0)"&&xe.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},On=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},dr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},ci=function(e){return function(n){return xe.utils.snap(dr(e),n)}},gs=function(e){var n=xe.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,c){c===void 0&&(c=.001);var p;if(!s)return n(o);if(s>0){for(o-=c,p=0;p<t.length;p++)if(t[p]>=o)return t[p];return t[p-1]}else for(p=t.length,o+=c;p--;)if(t[p]<=o)return t[p];return t[0]}:function(o,s,c){c===void 0&&(c=.001);var p=n(o);return!s||Math.abs(p-o)<c||p-o<0==s<0?p:n(s<0?o-e:o+e)}},ui=function(e){return function(n,t){return gs(dr(e))(n,t.direction)}},hn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},mt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},gt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},gn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Ss={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},mn={toggleActions:"play",anticipatePin:0},Ln={top:0,left:0,center:.5,bottom:1,right:1},Mn=function(e,n){if(zt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Ln?Ln[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},yn=function(e,n,t,o,s,c,p,w){var R=s.startColor,z=s.endColor,I=s.fontSize,b=s.indent,m=s.fontWeight,C=tt.createElement("div"),M=xo(t)||io(t,"pinType")==="fixed",y=e.indexOf("scroller")!==-1,U=M?Ze:t,te=e.indexOf("start")!==-1,O=te?R:z,S="border-color:"+O+";font-size:"+I+";color:"+O+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return S+="position:"+((y||w)&&M?"fixed;":"absolute;"),(y||w||!M)&&(S+=(o===dt?ps:ds)+":"+(c+parseFloat(b))+"px;"),p&&(S+="box-sizing:border-box;text-align:left;width:"+p.offsetWidth+"px;"),C._isStart=te,C.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),C.style.cssText=S,C.innerText=n||n===0?e+"-"+n:e,U.children[0]?U.insertBefore(C,U.children[0]):U.appendChild(C),C._offset=C["offset"+o.op.d2],Cn(C,0,o,te),C},Cn=function(e,n,t,o){var s={display:"block"},c=t[o?"os2":"p2"],p=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+c+ko]=1,s["border"+p+ko]=0,s[t.p]=n+"px",xe.set(e,s)},ze=[],ss={},sn,Es=function(){return Tt()-Yt>34&&(sn||(sn=requestAnimationFrame(Jt)))},Po=function(){(!Et||!Et.isPressed||Et.startX>Ze.clientWidth)&&(Fe.cache++,Et?sn||(sn=requestAnimationFrame(Jt)):Jt(),Yt||_o("scrollStart"),Yt=Tt())},jn=function(){ir=He.innerWidth,rr=He.innerHeight},Wo=function(e){Fe.cache++,(e===!0||!vt&&!sr&&!tt.fullscreenElement&&!tt.webkitFullscreenElement&&(!ts||ir!==He.innerWidth||Math.abs(He.innerHeight-rr)>He.innerHeight*.25))&&kn.restart(!0)},wo={},fi=[],hr=function f(){return gt(Le,"scrollEnd",f)||ho(!0)},_o=function(e){return wo[e]&&wo[e].map(function(n){return n()})||fi},Bt=[],gr=function(e){for(var n=0;n<Bt.length;n+=5)(!e||Bt[n+4]&&Bt[n+4].query===e)&&(Bt[n].style.cssText=Bt[n+1],Bt[n].getBBox&&Bt[n].setAttribute("transform",Bt[n+2]||""),Bt[n+3].uncache=1)},ms=function(e,n){var t;for(At=0;At<ze.length;At++)t=ze[At],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));Rn=!0,n&&gr(n),n||_o("revert")},mr=function(e,n){Fe.cache++,(n||!Dt)&&Fe.forEach(function(t){return Pt(t)&&t.cacheID++&&(t.rec=0)}),zt(e)&&(He.history.scrollRestoration=us=e)},Dt,yo=0,Is,pi=function(){if(Is!==yo){var e=Is=yo;requestAnimationFrame(function(){return e===yo&&ho(!0)})}},yr=function(){Ze.appendChild(Io),fs=!Et&&Io.offsetHeight||He.innerHeight,Ze.removeChild(Io)},As=function(e){return nn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},ho=function(e,n){if(Ht=tt.documentElement,Ze=tt.body,cs=[He,tt,Ht,Ze],Yt&&!e&&!Rn){mt(Le,"scrollEnd",hr);return}yr(),Dt=Le.isRefreshing=!0,Fe.forEach(function(o){return Pt(o)&&++o.cacheID&&(o.rec=o())});var t=_o("refreshInit");nr&&Le.sort(),n||ms(),Fe.forEach(function(o){Pt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),ze.slice(0).forEach(function(o){return o.refresh()}),Rn=!1,ze.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",c=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-c),o.refresh()}}),ns=1,As(!0),ze.forEach(function(o){var s=Zt(o.scroller,o._dir),c=o.vars.end==="max"||o._endClamp&&o.end>s,p=o._startClamp&&o.start>=s;(c||p)&&o.setPositions(p?s-1:o.start,c?Math.max(p?s:o.start+1,s):o.end,!0)}),As(!1),ns=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),Fe.forEach(function(o){Pt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),mr(us,1),kn.pause(),yo++,Dt=2,Jt(2),ze.forEach(function(o){return Pt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Dt=Le.isRefreshing=!1,_o("refresh")},rs=0,Sn=1,tn,Jt=function(e){if(e===2||!Dt&&!Rn){Le.isUpdating=!0,tn&&tn.update(0);var n=ze.length,t=Tt(),o=t-Wn>=50,s=n&&ze[0].scroll();if(Sn=rs>s?-1:1,Dt||(rs=s),o&&(Yt&&!Bn&&t-Yt>200&&(Yt=0,_o("scrollEnd")),Fo=Wn,Wn=t),Sn<0){for(At=n;At-- >0;)ze[At]&&ze[At].update(0,o);Sn=1}else for(At=0;At<n;At++)ze[At]&&ze[At].update(0,o);Le.isUpdating=!1}sn=0},is=[fr,pr,ds,ps,Gt+en,Gt+Qo,Gt+Jo,Gt+Ko,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],En=is.concat([go,mo,"boxSizing","max"+ko,"max"+hs,"position",Gt,ct,ct+Jo,ct+Qo,ct+en,ct+Ko]),di=function(e,n,t){Ao(t);var o=e._gsap;if(o.spacerIsNative)Ao(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},Vn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=is.length,c=n.style,p=e.style,w;s--;)w=is[s],c[w]=t[w];c.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(c.display="inline-block"),p[ds]=p[ps]="auto",c.flexBasis=t.flexBasis||"auto",c.overflow="visible",c.boxSizing="border-box",c[go]=On(e,kt)+ft,c[mo]=On(e,dt)+ft,c[ct]=p[Gt]=p[pr]=p[fr]="0",Ao(o),p[go]=p["max"+ko]=t[go],p[mo]=p["max"+hs]=t[mo],p[ct]=t[ct],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},hi=/([A-Z])/g,Ao=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,c;for((e.t._gsap||xe.core.getCache(e.t)).uncache=1;o<t;o+=2)c=e[o+1],s=e[o],c?n[s]=c:n[s]&&n.removeProperty(s.replace(hi,"-$1").toLowerCase())}},xn=function(e){for(var n=En.length,t=e.style,o=[],s=0;s<n;s++)o.push(En[s],t[En[s]]);return o.t=e,o},gi=function(e,n,t){for(var o=[],s=e.length,c=t?8:0,p;c<s;c+=2)p=e[c],o.push(p,p in n?n[p]:e[c+1]);return o.t=e.t,o},In={left:0,top:0},Ds=function(e,n,t,o,s,c,p,w,R,z,I,b,m,C){Pt(e)&&(e=e(w)),zt(e)&&e.substr(0,3)==="max"&&(e=b+(e.charAt(4)==="="?Mn("0"+e.substr(3),t):0));var M=m?m.time():0,y,U,te;if(m&&m.seek(0),isNaN(e)||(e=+e),Yo(e))m&&(e=xe.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,b,e)),p&&Cn(p,t,o,!0);else{Pt(n)&&(n=n(w));var O=(e||"0").split(" "),S,ee,G,L;te=Rt(n,w)||Ze,S=Qt(te)||{},(!S||!S.left&&!S.top)&&Ut(te).display==="none"&&(L=te.style.display,te.style.display="block",S=Qt(te),L?te.style.display=L:te.style.removeProperty("display")),ee=Mn(O[0],S[o.d]),G=Mn(O[1]||"0",t),e=S[o.p]-R[o.p]-z+ee+s-G,p&&Cn(p,G,o,t-G<20||p._isStart&&G>20),t-=t-G}if(C&&(w[C]=e||-.001,e<0&&(e=0)),c){var X=e+t,oe=c._isStart;y="scroll"+o.d2,Cn(c,X,o,oe&&X>20||!oe&&(I?Math.max(Ze[y],Ht[y]):c.parentNode[y])<=X+1),I&&(R=Qt(p),I&&(c.style[o.op.p]=R[o.op.p]-o.op.m-c._offset+ft))}return m&&te&&(y=Qt(te),m.seek(b),U=Qt(te),m._caScrollDist=y[o.p]-U[o.p],e=e/m._caScrollDist*b),m&&m.seek(M),m?e:Math.round(e)},mi=/(webkit|moz|length|cssText|inset)/i,ks=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,c,p;if(n===Ze){e._stOrig=s.cssText,p=Ut(e);for(c in p)!+c&&!mi.test(c)&&p[c]&&typeof s[c]=="string"&&c!=="0"&&(s[c]=p[c]);s.top=t,s.left=o}else s.cssText=e._stOrig;xe.core.getCache(e).uncache=1,n.appendChild(e)}},xr=function(e,n,t){var o=n,s=o;return function(c){var p=Math.round(e());return p!==o&&p!==s&&Math.abs(p-o)>3&&Math.abs(p-s)>3&&(c=p,t&&t()),s=o,o=Math.round(c),o}},wn=function(e,n,t){var o={};o[n.p]="+="+t,xe.set(e,o)},Rs=function(e,n){var t=ao(e,n),o="_scroll"+n.p2,s=function c(p,w,R,z,I){var b=c.tween,m=w.onComplete,C={};R=R||t();var M=xr(t,R,function(){b.kill(),c.tween=0});return I=z&&I||0,z=z||p-R,b&&b.kill(),w[o]=p,w.inherit=!1,w.modifiers=C,C[o]=function(){return M(R+z*b.ratio+I*b.ratio*b.ratio)},w.onUpdate=function(){Fe.cache++,c.tween&&Jt()},w.onComplete=function(){c.tween=0,m&&m.call(b)},b=c.tween=xe.to(e,w),b};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},mt(e,"wheel",t.wheelHandler),Le.isTouch&&mt(e,"touchmove",t.wheelHandler),s},Le=function(){function f(n,t){Mo||f.register(xe)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),os(this),this.init(n,t)}var e=f.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Go){this.update=this.refresh=this.kill=jt;return}t=Cs(zt(t)||Yo(t)||t.nodeType?{trigger:t}:t,mn);var s=t,c=s.onUpdate,p=s.toggleClass,w=s.id,R=s.onToggle,z=s.onRefresh,I=s.scrub,b=s.trigger,m=s.pin,C=s.pinSpacing,M=s.invalidateOnRefresh,y=s.anticipatePin,U=s.onScrubComplete,te=s.onSnapComplete,O=s.once,S=s.snap,ee=s.pinReparent,G=s.pinSpacer,L=s.containerAnimation,X=s.fastScrollEnd,oe=s.preventOverlaps,v=t.horizontal||t.containerAnimation&&t.horizontal!==!1?kt:dt,fe=!I&&I!==0,T=Rt(t.scroller||He),$=xe.core.getCache(T),re=xo(T),we=("pinType"in t?t.pinType:io(T,"pinType")||re&&"fixed")==="fixed",J=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],k=fe&&t.toggleActions.split(" "),A="markers"in t?t.markers:mn.markers,K=re?0:parseFloat(Ut(T)["border"+v.p2+ko])||0,a=this,Y=t.onRefreshInit&&function(){return t.onRefreshInit(a)},ue=ii(T,re,v),Se=ai(T,re),d=0,u=0,i=0,r=ao(T,v),P,B,x,H,W,D,_,N,Q,h,g,l,ne,pe,Ye,F,se,ae,ye,le,_e,be,ge,Ae,ce,de,Ee,Xe,Pe,lt,ut,Ie,bt,Ge,Qe,st,Mt,We,Me;if(a._startClamp=a._endClamp=!1,a._dir=v,y*=45,a.scroller=T,a.scroll=L?L.time.bind(L):r,H=r(),a.vars=t,o=o||t.animation,"refreshPriority"in t&&(nr=1,t.refreshPriority===-9999&&(tn=a)),$.tweenScroll=$.tweenScroll||{top:Rs(T,dt),left:Rs(T,kt)},a.tweenTo=P=$.tweenScroll[v.p],a.scrubDuration=function(E){bt=Yo(E)&&E,bt?Ie?Ie.duration(E):Ie=xe.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:bt,paused:!0,onComplete:function(){return U&&U(a)}}):(Ie&&Ie.progress(1).kill(),Ie=0)},o&&(o.vars.lazy=!1,o._initted&&!a.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),a.animation=o.pause(),o.scrollTrigger=a,a.scrubDuration(I),lt=0,w||(w=o.vars.id)),S&&((!uo(S)||S.push)&&(S={snapTo:S}),"scrollBehavior"in Ze.style&&xe.set(re?[Ze,Ht]:T,{scrollBehavior:"auto"}),Fe.forEach(function(E){return Pt(E)&&E.target===(re?tt.scrollingElement||Ht:T)&&(E.smooth=!1)}),x=Pt(S.snapTo)?S.snapTo:S.snapTo==="labels"?ci(o):S.snapTo==="labelsDirectional"?ui(o):S.directional!==!1?function(E,j){return gs(S.snapTo)(E,Tt()-u<500?0:j.direction)}:xe.utils.snap(S.snapTo),Ge=S.duration||{min:.1,max:2},Ge=uo(Ge)?$o(Ge.min,Ge.max):$o(Ge,Ge),Qe=xe.delayedCall(S.delay||bt/2||.1,function(){var E=r(),j=Tt()-u<500,Z=P.tween;if((j||Math.abs(a.getVelocity())<10)&&!Z&&!Bn&&d!==E){var he=(E-D)/pe,ve=o&&!fe?o.totalProgress():he,V=j?0:(ve-ut)/(Tt()-Fo)*1e3||0,Ce=xe.utils.clamp(-he,1-he,To(V/2)*V/.185),Oe=he+(S.inertia===!1?0:Ce),qe,je,$e=S,Lt=$e.onStart,Ke=$e.onInterrupt,nt=$e.onComplete;if(qe=x(Oe,a),Yo(qe)||(qe=Oe),je=Math.max(0,Math.round(D+qe*pe)),E<=_&&E>=D&&je!==E){if(Z&&!Z._initted&&Z.data<=To(je-E))return;S.inertia===!1&&(Ce=qe-he),P(je,{duration:Ge(To(Math.max(To(Oe-ve),To(qe-ve))*.185/V/.05||0)),ease:S.ease||"power3",data:To(je-E),onInterrupt:function(){return Qe.restart(!0)&&Ke&&Ke(a)},onComplete:function(){a.update(),d=r(),o&&!fe&&(Ie?Ie.resetTo("totalProgress",qe,o._tTime/o._tDur):o.progress(qe)),lt=ut=o&&!fe?o.totalProgress():a.progress,te&&te(a),nt&&nt(a)}},E,Ce*pe,je-E-Ce*pe),Lt&&Lt(a,P.tween)}}else a.isActive&&d!==E&&Qe.restart(!0)}).pause()),w&&(ss[w]=a),b=a.trigger=Rt(b||m!==!0&&m),Me=b&&b._gsap&&b._gsap.stRevert,Me&&(Me=Me(a)),m=m===!0?b:Rt(m),zt(p)&&(p={targets:b,className:p}),m&&(C===!1||C===Gt||(C=!C&&m.parentNode&&m.parentNode.style&&Ut(m.parentNode).display==="flex"?!1:ct),a.pin=m,B=xe.core.getCache(m),B.spacer?Ye=B.pinState:(G&&(G=Rt(G),G&&!G.nodeType&&(G=G.current||G.nativeElement),B.spacerIsNative=!!G,G&&(B.spacerState=xn(G))),B.spacer=ae=G||tt.createElement("div"),ae.classList.add("pin-spacer"),w&&ae.classList.add("pin-spacer-"+w),B.pinState=Ye=xn(m)),t.force3D!==!1&&xe.set(m,{force3D:!0}),a.spacer=ae=B.spacer,Pe=Ut(m),Ae=Pe[C+v.os2],le=xe.getProperty(m),_e=xe.quickSetter(m,v.a,ft),Vn(m,ae,Pe),se=xn(m)),A){l=uo(A)?Cs(A,Ss):Ss,h=yn("scroller-start",w,T,v,l,0),g=yn("scroller-end",w,T,v,l,0,h),ye=h["offset"+v.op.d2];var Te=Rt(io(T,"content")||T);N=this.markerStart=yn("start",w,Te,v,l,ye,0,L),Q=this.markerEnd=yn("end",w,Te,v,l,ye,0,L),L&&(We=xe.quickSetter([N,Q],v.a,ft)),!we&&!(qt.length&&io(T,"fixedMarkers")===!0)&&(li(re?Ze:T),xe.set([h,g],{force3D:!0}),de=xe.quickSetter(h,v.a,ft),Xe=xe.quickSetter(g,v.a,ft))}if(L){var me=L.vars.onUpdate,ie=L.vars.onUpdateParams;L.eventCallback("onUpdate",function(){a.update(0,0,1),me&&me.apply(L,ie||[])})}if(a.previous=function(){return ze[ze.indexOf(a)-1]},a.next=function(){return ze[ze.indexOf(a)+1]},a.revert=function(E,j){if(!j)return a.kill(!0);var Z=E!==!1||!a.enabled,he=vt;Z!==a.isReverted&&(Z&&(st=Math.max(r(),a.scroll.rec||0),i=a.progress,Mt=o&&o.progress()),N&&[N,Q,h,g].forEach(function(ve){return ve.style.display=Z?"none":"block"}),Z&&(vt=a,a.update(Z)),m&&(!ee||!a.isActive)&&(Z?di(m,ae,Ye):Vn(m,ae,Ut(m),ce)),Z||a.update(Z),vt=he,a.isReverted=Z)},a.refresh=function(E,j,Z,he){if(!((vt||!a.enabled)&&!j)){if(m&&E&&Yt){mt(f,"scrollEnd",hr);return}!Dt&&Y&&Y(a),vt=a,P.tween&&!Z&&(P.tween.kill(),P.tween=0),Ie&&Ie.pause(),M&&o&&o.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var ve=ue(),V=Se(),Ce=L?L.duration():Zt(T,v),Oe=pe<=.01,qe=0,je=he||0,$e=uo(Z)?Z.end:t.end,Lt=t.endTrigger||b,Ke=uo(Z)?Z.start:t.start||(t.start===0||!b?0:m?"0 0":"0 100%"),nt=a.pinnedContainer=t.pinnedContainer&&Rt(t.pinnedContainer,a),rt=b&&Math.max(0,ze.indexOf(a))||0,Ue=rt,Je,Ne,Nt,it,ot,et,ht,Ro,an,lo,xt,Oo,ln;for(A&&uo(Z)&&(Oo=xe.getProperty(h,v.p),ln=xe.getProperty(g,v.p));Ue-- >0;)et=ze[Ue],et.end||et.refresh(0,1)||(vt=a),ht=et.pin,ht&&(ht===b||ht===m||ht===nt)&&!et.isReverted&&(lo||(lo=[]),lo.unshift(et),et.revert(!0,!0)),et!==ze[Ue]&&(rt--,Ue--);for(Pt(Ke)&&(Ke=Ke(a)),Ke=vs(Ke,"start",a),D=Ds(Ke,b,ve,v,r(),N,h,a,V,K,we,Ce,L,a._startClamp&&"_startClamp")||(m?-.001:0),Pt($e)&&($e=$e(a)),zt($e)&&!$e.indexOf("+=")&&(~$e.indexOf(" ")?$e=(zt(Ke)?Ke.split(" ")[0]:"")+$e:(qe=Mn($e.substr(2),ve),$e=zt(Ke)?Ke:(L?xe.utils.mapRange(0,L.duration(),L.scrollTrigger.start,L.scrollTrigger.end,D):D)+qe,Lt=b)),$e=vs($e,"end",a),_=Math.max(D,Ds($e||(Lt?"100% 0":Ce),Lt,ve,v,r()+qe,Q,g,a,V,K,we,Ce,L,a._endClamp&&"_endClamp"))||-.001,qe=0,Ue=rt;Ue--;)et=ze[Ue],ht=et.pin,ht&&et.start-et._pinPush<=D&&!L&&et.end>0&&(Je=et.end-(a._startClamp?Math.max(0,et.start):et.start),(ht===b&&et.start-et._pinPush<D||ht===nt)&&isNaN(Ke)&&(qe+=Je*(1-et.progress)),ht===m&&(je+=Je));if(D+=qe,_+=qe,a._startClamp&&(a._startClamp+=qe),a._endClamp&&!Dt&&(a._endClamp=_||-.001,_=Math.min(_,Zt(T,v))),pe=_-D||(D-=.01)&&.001,Oe&&(i=xe.utils.clamp(0,1,xe.utils.normalize(D,_,st))),a._pinPush=je,N&&qe&&(Je={},Je[v.a]="+="+qe,nt&&(Je[v.p]="-="+r()),xe.set([N,Q],Je)),m&&!(ns&&a.end>=Zt(T,v)))Je=Ut(m),it=v===dt,Nt=r(),be=parseFloat(le(v.a))+je,!Ce&&_>1&&(xt=(re?tt.scrollingElement||Ht:T).style,xt={style:xt,value:xt["overflow"+v.a.toUpperCase()]},re&&Ut(Ze)["overflow"+v.a.toUpperCase()]!=="scroll"&&(xt.style["overflow"+v.a.toUpperCase()]="scroll")),Vn(m,ae,Je),se=xn(m),Ne=Qt(m,!0),Ro=we&&ao(T,it?kt:dt)(),C?(ce=[C+v.os2,pe+je+ft],ce.t=ae,Ue=C===ct?On(m,v)+pe+je:0,Ue&&(ce.push(v.d,Ue+ft),ae.style.flexBasis!=="auto"&&(ae.style.flexBasis=Ue+ft)),Ao(ce),nt&&ze.forEach(function(Lo){Lo.pin===nt&&Lo.vars.pinSpacing!==!1&&(Lo._subPinOffset=!0)}),we&&r(st)):(Ue=On(m,v),Ue&&ae.style.flexBasis!=="auto"&&(ae.style.flexBasis=Ue+ft)),we&&(ot={top:Ne.top+(it?Nt-D:Ro)+ft,left:Ne.left+(it?Ro:Nt-D)+ft,boxSizing:"border-box",position:"fixed"},ot[go]=ot["max"+ko]=Math.ceil(Ne.width)+ft,ot[mo]=ot["max"+hs]=Math.ceil(Ne.height)+ft,ot[Gt]=ot[Gt+Jo]=ot[Gt+Qo]=ot[Gt+en]=ot[Gt+Ko]="0",ot[ct]=Je[ct],ot[ct+Jo]=Je[ct+Jo],ot[ct+Qo]=Je[ct+Qo],ot[ct+en]=Je[ct+en],ot[ct+Ko]=Je[ct+Ko],F=gi(Ye,ot,ee),Dt&&r(0)),o?(an=o._initted,Un(1),o.render(o.duration(),!0,!0),ge=le(v.a)-be+pe+je,Ee=Math.abs(pe-ge)>1,we&&Ee&&F.splice(F.length-2,2),o.render(0,!0,!0),an||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Un(0)):ge=pe,xt&&(xt.value?xt.style["overflow"+v.a.toUpperCase()]=xt.value:xt.style.removeProperty("overflow-"+v.a));else if(b&&r()&&!L)for(Ne=b.parentNode;Ne&&Ne!==Ze;)Ne._pinOffset&&(D-=Ne._pinOffset,_-=Ne._pinOffset),Ne=Ne.parentNode;lo&&lo.forEach(function(Lo){return Lo.revert(!1,!0)}),a.start=D,a.end=_,H=W=Dt?st:r(),!L&&!Dt&&(H<st&&r(st),a.scroll.rec=0),a.revert(!1,!0),u=Tt(),Qe&&(d=-1,Qe.restart(!0)),vt=0,o&&fe&&(o._initted||Mt)&&o.progress()!==Mt&&o.progress(Mt||0,!0).render(o.time(),!0,!0),(Oe||i!==a.progress||L||M||o&&!o._initted)&&(o&&!fe&&o.totalProgress(L&&D<-.001&&!i?xe.utils.normalize(D,_,0):i,!0),a.progress=Oe||(H-D)/pe===i?0:i),m&&C&&(ae._pinOffset=Math.round(a.progress*ge)),Ie&&Ie.invalidate(),isNaN(Oo)||(Oo-=xe.getProperty(h,v.p),ln-=xe.getProperty(g,v.p),wn(h,v,Oo),wn(N,v,Oo-(he||0)),wn(g,v,ln),wn(Q,v,ln-(he||0))),Oe&&!Dt&&a.update(),z&&!Dt&&!ne&&(ne=!0,z(a),ne=!1)}},a.getVelocity=function(){return(r()-W)/(Tt()-Fo)*1e3||0},a.endAnimation=function(){Bo(a.callbackAnimation),o&&(Ie?Ie.progress(1):o.paused()?fe||Bo(o,a.direction<0,1):Bo(o,o.reversed()))},a.labelToScroll=function(E){return o&&o.labels&&(D||a.refresh()||D)+o.labels[E]/o.duration()*pe||0},a.getTrailing=function(E){var j=ze.indexOf(a),Z=a.direction>0?ze.slice(0,j).reverse():ze.slice(j+1);return(zt(E)?Z.filter(function(he){return he.vars.preventOverlaps===E}):Z).filter(function(he){return a.direction>0?he.end<=D:he.start>=_})},a.update=function(E,j,Z){if(!(L&&!Z&&!E)){var he=Dt===!0?st:a.scroll(),ve=E?0:(he-D)/pe,V=ve<0?0:ve>1?1:ve||0,Ce=a.progress,Oe,qe,je,$e,Lt,Ke,nt,rt;if(j&&(W=H,H=L?r():he,S&&(ut=lt,lt=o&&!fe?o.totalProgress():V)),y&&m&&!vt&&!pn&&Yt&&(!V&&D<he+(he-W)/(Tt()-Fo)*y?V=1e-4:V===1&&_>he+(he-W)/(Tt()-Fo)*y&&(V=.9999)),V!==Ce&&a.enabled){if(Oe=a.isActive=!!V&&V<1,qe=!!Ce&&Ce<1,Ke=Oe!==qe,Lt=Ke||!!V!=!!Ce,a.direction=V>Ce?1:-1,a.progress=V,Lt&&!vt&&(je=V&&!Ce?0:V===1?1:Ce===1?2:3,fe&&($e=!Ke&&k[je+1]!=="none"&&k[je+1]||k[je],rt=o&&($e==="complete"||$e==="reset"||$e in o))),oe&&(Ke||rt)&&(rt||I||!o)&&(Pt(oe)?oe(a):a.getTrailing(oe).forEach(function(Nt){return Nt.endAnimation()})),fe||(Ie&&!vt&&!pn?(Ie._dp._time-Ie._start!==Ie._time&&Ie.render(Ie._dp._time-Ie._start),Ie.resetTo?Ie.resetTo("totalProgress",V,o._tTime/o._tDur):(Ie.vars.totalProgress=V,Ie.invalidate().restart())):o&&o.totalProgress(V,!!(vt&&(u||E)))),m){if(E&&C&&(ae.style[C+v.os2]=Ae),!we)_e(Uo(be+ge*V));else if(Lt){if(nt=!E&&V>Ce&&_+1>he&&he+1>=Zt(T,v),ee)if(!E&&(Oe||nt)){var Ue=Qt(m,!0),Je=he-D;ks(m,Ze,Ue.top+(v===dt?Je:0)+ft,Ue.left+(v===dt?0:Je)+ft)}else ks(m,ae);Ao(Oe||nt?F:se),Ee&&V<1&&Oe||_e(be+(V===1&&!nt?ge:0))}}S&&!P.tween&&!vt&&!pn&&Qe.restart(!0),p&&(Ke||O&&V&&(V<1||!Yn))&&nn(p.targets).forEach(function(Nt){return Nt.classList[Oe||O?"add":"remove"](p.className)}),c&&!fe&&!E&&c(a),Lt&&!vt?(fe&&(rt&&($e==="complete"?o.pause().totalProgress(1):$e==="reset"?o.restart(!0).pause():$e==="restart"?o.restart(!0):o[$e]()),c&&c(a)),(Ke||!Yn)&&(R&&Ke&&Xn(a,R),J[je]&&Xn(a,J[je]),O&&(V===1?a.kill(!1,1):J[je]=0),Ke||(je=V===1?1:3,J[je]&&Xn(a,J[je]))),X&&!Oe&&Math.abs(a.getVelocity())>(Yo(X)?X:2500)&&(Bo(a.callbackAnimation),Ie?Ie.progress(1):Bo(o,$e==="reverse"?1:!V,1))):fe&&c&&!vt&&c(a)}if(Xe){var Ne=L?he/L.duration()*(L._caScrollDist||0):he;de(Ne+(h._isFlipped?1:0)),Xe(Ne)}We&&We(-he/L.duration()*(L._caScrollDist||0))}},a.enable=function(E,j){a.enabled||(a.enabled=!0,mt(T,"resize",Wo),re||mt(T,"scroll",Po),Y&&mt(f,"refreshInit",Y),E!==!1&&(a.progress=i=0,H=W=d=r()),j!==!1&&a.refresh())},a.getTween=function(E){return E&&P?P.tween:Ie},a.setPositions=function(E,j,Z,he){if(L){var ve=L.scrollTrigger,V=L.duration(),Ce=ve.end-ve.start;E=ve.start+Ce*E/V,j=ve.start+Ce*j/V}a.refresh(!1,!1,{start:Ts(E,Z&&!!a._startClamp),end:Ts(j,Z&&!!a._endClamp)},he),a.update()},a.adjustPinSpacing=function(E){if(ce&&E){var j=ce.indexOf(v.d)+1;ce[j]=parseFloat(ce[j])+E+ft,ce[1]=parseFloat(ce[1])+E+ft,Ao(ce)}},a.disable=function(E,j){if(a.enabled&&(E!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,j||Ie&&Ie.pause(),st=0,B&&(B.uncache=1),Y&&gt(f,"refreshInit",Y),Qe&&(Qe.pause(),P.tween&&P.tween.kill()&&(P.tween=0)),!re)){for(var Z=ze.length;Z--;)if(ze[Z].scroller===T&&ze[Z]!==a)return;gt(T,"resize",Wo),re||gt(T,"scroll",Po)}},a.kill=function(E,j){a.disable(E,j),Ie&&!j&&Ie.kill(),w&&delete ss[w];var Z=ze.indexOf(a);Z>=0&&ze.splice(Z,1),Z===At&&Sn>0&&At--,Z=0,ze.forEach(function(he){return he.scroller===a.scroller&&(Z=1)}),Z||Dt||(a.scroll.rec=0),o&&(o.scrollTrigger=null,E&&o.revert({kill:!1}),j||o.kill()),N&&[N,Q,h,g].forEach(function(he){return he.parentNode&&he.parentNode.removeChild(he)}),tn===a&&(tn=0),m&&(B&&(B.uncache=1),Z=0,ze.forEach(function(he){return he.pin===m&&Z++}),Z||(B.spacer=0)),t.onKill&&t.onKill(a)},ze.push(a),a.enable(!1,!1),Me&&Me(a),o&&o.add&&!pe){var q=a.update;a.update=function(){a.update=q,Fe.cache++,D||_||a.refresh()},xe.delayedCall(.01,a.update),pe=.01,D=_=0}else a.refresh();m&&pi()},f.register=function(t){return Mo||(xe=t||lr(),ar()&&window.document&&f.enable(),Mo=Go),Mo},f.defaults=function(t){if(t)for(var o in t)mn[o]=t[o];return mn},f.disable=function(t,o){Go=0,ze.forEach(function(c){return c[o?"kill":"disable"](t)}),gt(He,"wheel",Po),gt(tt,"scroll",Po),clearInterval(fn),gt(tt,"touchcancel",jt),gt(Ze,"touchstart",jt),hn(gt,tt,"pointerdown,touchstart,mousedown",Ps),hn(gt,tt,"pointerup,touchend,mouseup",Ms),kn.kill(),dn(gt);for(var s=0;s<Fe.length;s+=3)gn(gt,Fe[s],Fe[s+1]),gn(gt,Fe[s],Fe[s+2])},f.enable=function(){if(He=window,tt=document,Ht=tt.documentElement,Ze=tt.body,xe&&(nn=xe.utils.toArray,$o=xe.utils.clamp,os=xe.core.context||jt,Un=xe.core.suppressOverwrites||jt,us=He.history.scrollRestoration||"auto",rs=He.pageYOffset||0,xe.core.globals("ScrollTrigger",f),Ze)){Go=1,Io=document.createElement("div"),Io.style.height="100vh",Io.style.position="absolute",yr(),ri(),at.register(xe),f.isTouch=at.isTouch,oo=at.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),ts=at.isTouch===1,mt(He,"wheel",Po),cs=[He,tt,Ht,Ze],xe.matchMedia?(f.matchMedia=function(R){var z=xe.matchMedia(),I;for(I in R)z.add(I,R[I]);return z},xe.addEventListener("matchMediaInit",function(){return ms()}),xe.addEventListener("matchMediaRevert",function(){return gr()}),xe.addEventListener("matchMedia",function(){ho(0,1),_o("matchMedia")}),xe.matchMedia().add("(orientation: portrait)",function(){return jn(),jn})):console.warn("Requires GSAP 3.11.0 or later"),jn(),mt(tt,"scroll",Po);var t=Ze.hasAttribute("style"),o=Ze.style,s=o.borderTopStyle,c=xe.core.Animation.prototype,p,w;for(c.revert||Object.defineProperty(c,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",p=Qt(Ze),dt.m=Math.round(p.top+dt.sc())||0,kt.m=Math.round(p.left+kt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(Ze.setAttribute("style",""),Ze.removeAttribute("style")),fn=setInterval(Es,250),xe.delayedCall(.5,function(){return pn=0}),mt(tt,"touchcancel",jt),mt(Ze,"touchstart",jt),hn(mt,tt,"pointerdown,touchstart,mousedown",Ps),hn(mt,tt,"pointerup,touchend,mouseup",Ms),es=xe.utils.checkPrefix("transform"),En.push(es),Mo=Tt(),kn=xe.delayedCall(.2,ho).pause(),Co=[tt,"visibilitychange",function(){var R=He.innerWidth,z=He.innerHeight;tt.hidden?(_s=R,bs=z):(_s!==R||bs!==z)&&Wo()},tt,"DOMContentLoaded",ho,He,"load",ho,He,"resize",Wo],dn(mt),ze.forEach(function(R){return R.enable(0,1)}),w=0;w<Fe.length;w+=3)gn(gt,Fe[w],Fe[w+1]),gn(gt,Fe[w],Fe[w+2])}},f.config=function(t){"limitCallbacks"in t&&(Yn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(fn)||(fn=o)&&setInterval(Es,o),"ignoreMobileResize"in t&&(ts=f.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(dn(gt)||dn(mt,t.autoRefreshEvents||"none"),sr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},f.scrollerProxy=function(t,o){var s=Rt(t),c=Fe.indexOf(s),p=xo(s);~c&&Fe.splice(c,p?6:2),o&&(p?qt.unshift(He,o,Ze,o,Ht,o):qt.unshift(s,o))},f.clearMatchMedia=function(t){ze.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},f.isInViewport=function(t,o,s){var c=(zt(t)?Rt(t):t).getBoundingClientRect(),p=c[s?go:mo]*o||0;return s?c.right-p>0&&c.left+p<He.innerWidth:c.bottom-p>0&&c.top+p<He.innerHeight},f.positionInViewport=function(t,o,s){zt(t)&&(t=Rt(t));var c=t.getBoundingClientRect(),p=c[s?go:mo],w=o==null?p/2:o in Ln?Ln[o]*p:~o.indexOf("%")?parseFloat(o)*p/100:parseFloat(o)||0;return s?(c.left+w)/He.innerWidth:(c.top+w)/He.innerHeight},f.killAll=function(t){if(ze.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=wo.killAll||[];wo={},o.forEach(function(s){return s()})}},f}();Le.version="3.12.7";Le.saveStyles=function(f){return f?nn(f).forEach(function(e){if(e&&e.style){var n=Bt.indexOf(e);n>=0&&Bt.splice(n,5),Bt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),xe.core.getCache(e),os())}}):Bt};Le.revert=function(f,e){return ms(!f,e)};Le.create=function(f,e){return new Le(f,e)};Le.refresh=function(f){return f?Wo(!0):(Mo||Le.register())&&ho(!0)};Le.update=function(f){return++Fe.cache&&Jt(f===!0?2:0)};Le.clearScrollMemory=mr;Le.maxScroll=function(f,e){return Zt(f,e?kt:dt)};Le.getScrollFunc=function(f,e){return ao(Rt(f),e?kt:dt)};Le.getById=function(f){return ss[f]};Le.getAll=function(){return ze.filter(function(f){return f.vars.id!=="ScrollSmoother"})};Le.isScrolling=function(){return!!Yt};Le.snapDirectional=gs;Le.addEventListener=function(f,e){var n=wo[f]||(wo[f]=[]);~n.indexOf(e)||n.push(e)};Le.removeEventListener=function(f,e){var n=wo[f],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Le.batch=function(f,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,c=function(R,z){var I=[],b=[],m=xe.delayedCall(o,function(){z(I,b),I=[],b=[]}).pause();return function(C){I.length||m.restart(!0),I.push(C.trigger),b.push(C),s<=I.length&&m.progress(1)}},p;for(p in e)t[p]=p.substr(0,2)==="on"&&Pt(e[p])&&p!=="onRefreshInit"?c(p,e[p]):e[p];return Pt(s)&&(s=s(),mt(Le,"refresh",function(){return s=e.batchMax()})),nn(f).forEach(function(w){var R={};for(p in t)R[p]=t[p];R.trigger=w,n.push(Le.create(R))}),n};var Os=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},Zn=function f(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(at.isTouch?" pinch-zoom":""):"none",e===Ht&&f(Ze,n)},_n={auto:1,scroll:1},yi=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,c=s._gsap||xe.core.getCache(s),p=Tt(),w;if(!c._isScrollT||p-c._isScrollT>2e3){for(;s&&s!==Ze&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(_n[(w=Ut(s)).overflowY]||_n[w.overflowX]));)s=s.parentNode;c._isScroll=s&&s!==t&&!xo(s)&&(_n[(w=Ut(s)).overflowY]||_n[w.overflowX]),c._isScrollT=p}(c._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},wr=function(e,n,t,o){return at.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&yi,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&mt(tt,at.eventTypes[0],Ns,!1,!0)},onDisable:function(){return gt(tt,at.eventTypes[0],Ns,!0)}})},xi=/(input|label|select|textarea)/i,Ls,Ns=function(e){var n=xi.test(e.target.tagName);(n||Ls)&&(e._gsapAllow=!0,Ls=n)},wi=function(e){uo(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,c=n.onRelease,p,w,R=Rt(e.target)||Ht,z=xe.core.globals().ScrollSmoother,I=z&&z.get(),b=oo&&(e.content&&Rt(e.content)||I&&e.content!==!1&&!I.smooth()&&I.content()),m=ao(R,dt),C=ao(R,kt),M=1,y=(at.isTouch&&He.visualViewport?He.visualViewport.scale*He.visualViewport.width:He.outerWidth)/He.innerWidth,U=0,te=Pt(o)?function(){return o(p)}:function(){return o||2.8},O,S,ee=wr(R,e.type,!0,s),G=function(){return S=!1},L=jt,X=jt,oe=function(){w=Zt(R,dt),X=$o(oo?1:0,w),t&&(L=$o(0,Zt(R,kt))),O=yo},v=function(){b._gsap.y=Uo(parseFloat(b._gsap.y)+m.offset)+"px",b.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(b._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},fe=function(){if(S){requestAnimationFrame(G);var A=Uo(p.deltaY/2),K=X(m.v-A);if(b&&K!==m.v+m.offset){m.offset=K-m.v;var a=Uo((parseFloat(b&&b._gsap.y)||0)-m.offset);b.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",b._gsap.y=a+"px",m.cacheID=Fe.cache,Jt()}return!0}m.offset&&v(),S=!0},T,$,re,we,J=function(){oe(),T.isActive()&&T.vars.scrollY>w&&(m()>w?T.progress(1)&&m(w):T.resetTo("scrollY",w))};return b&&xe.set(b,{y:"+=0"}),e.ignoreCheck=function(k){return oo&&k.type==="touchmove"&&fe()||M>1.05&&k.type!=="touchstart"||p.isGesturing||k.touches&&k.touches.length>1},e.onPress=function(){S=!1;var k=M;M=Uo((He.visualViewport&&He.visualViewport.scale||1)/y),T.pause(),k!==M&&Zn(R,M>1.01?!0:t?!1:"x"),$=C(),re=m(),oe(),O=yo},e.onRelease=e.onGestureStart=function(k,A){if(m.offset&&v(),!A)we.restart(!0);else{Fe.cache++;var K=te(),a,Y;t&&(a=C(),Y=a+K*.05*-k.velocityX/.227,K*=Os(C,a,Y,Zt(R,kt)),T.vars.scrollX=L(Y)),a=m(),Y=a+K*.05*-k.velocityY/.227,K*=Os(m,a,Y,Zt(R,dt)),T.vars.scrollY=X(Y),T.invalidate().duration(K).play(.01),(oo&&T.vars.scrollY>=w||a>=w-1)&&xe.to({},{onUpdate:J,duration:K})}c&&c(k)},e.onWheel=function(){T._ts&&T.pause(),Tt()-U>1e3&&(O=0,U=Tt())},e.onChange=function(k,A,K,a,Y){if(yo!==O&&oe(),A&&t&&C(L(a[2]===A?$+(k.startX-k.x):C()+A-a[1])),K){m.offset&&v();var ue=Y[2]===K,Se=ue?re+k.startY-k.y:m()+K-Y[1],d=X(Se);ue&&Se!==d&&(re+=d-Se),m(d)}(K||A)&&Jt()},e.onEnable=function(){Zn(R,t?!1:"x"),Le.addEventListener("refresh",J),mt(He,"resize",J),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=C.smooth=!1),ee.enable()},e.onDisable=function(){Zn(R,!0),gt(He,"resize",J),Le.removeEventListener("refresh",J),ee.kill()},e.lockAxis=e.lockAxis!==!1,p=new at(e),p.iOS=oo,oo&&!m()&&m(1),oo&&xe.ticker.add(jt),we=p._dc,T=xe.to(p,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:xr(m,m(),function(){return T.pause()})},onUpdate:Jt,onComplete:we.vars.onComplete}),p};Le.sort=function(f){if(Pt(f))return ze.sort(f);var e=He.pageYOffset||0;return Le.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+He.innerHeight}),ze.sort(f||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Le.observe=function(f){return new at(f)};Le.normalizeScroll=function(f){if(typeof f>"u")return Et;if(f===!0&&Et)return Et.enable();if(f===!1){Et&&Et.kill(),Et=f;return}var e=f instanceof at?f:wi(f);return Et&&Et.target===e.target&&Et.kill(),xo(e.target)&&(Et=e),e};Le.core={_getVelocityProp:Jn,_inputObserver:wr,_scrollers:Fe,_proxies:qt,bridge:{ss:function(){Yt||_o("scrollStart"),Yt=Tt()},ref:function(){return vt}}};lr()&&xe.registerPlugin(Le);var on=function(){var f=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(z){z.preventDefault(),t(++f%e.children.length)},!1);function n(z){return e.appendChild(z.dom),z}function t(z){for(var I=0;I<e.children.length;I++)e.children[I].style.display=I===z?"block":"none";f=z}var o=(performance||Date).now(),s=o,c=0,p=n(new on.Panel("FPS","#0ff","#002")),w=n(new on.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var R=n(new on.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){c++;var z=(performance||Date).now();if(w.update(z-o,200),z>=s+1e3&&(p.update(c*1e3/(z-s),100),s=z,c=0,R)){var I=performance.memory;R.update(I.usedJSHeapSize/1048576,I.jsHeapSizeLimit/1048576)}return z},update:function(){o=this.end()},domElement:e,setMode:t}};on.Panel=function(f,e,n){var t=1/0,o=0,s=Math.round,c=s(window.devicePixelRatio||1),p=80*c,w=48*c,R=3*c,z=2*c,I=3*c,b=15*c,m=74*c,C=30*c,M=document.createElement("canvas");M.width=p,M.height=w,M.style.cssText="width:80px;height:48px";var y=M.getContext("2d");return y.font="bold "+9*c+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,p,w),y.fillStyle=e,y.fillText(f,R,z),y.fillRect(I,b,m,C),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(I,b,m,C),{dom:M,update:function(U,te){t=Math.min(t,U),o=Math.max(o,U),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,p,b),y.fillStyle=e,y.fillText(s(U)+" "+f+" ("+s(t)+"-"+s(o)+")",R,z),y.drawImage(M,I+c,b,m-c,C,I,b,m-c,C),y.fillRect(I+m-c,b,c,C),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(I+m-c,b,c,s((1-U/te)*C))}}};const _r={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class rn{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const _i=new Ar(-1,1,1,-1,0,1);class bi extends ro{constructor(){super(),this.setAttribute("position",new Xo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Xo([0,2,0,0,2,0],2))}}const vi=new bi;class br{constructor(e){this._mesh=new Be(vi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,_i)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ti extends rn{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof po?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=$n.clone(e.uniforms),this.material=new po({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new br(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Bs extends rn{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let c,p;this.inverse?(c=0,p=1):(c=1,p=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,c,4294967295),s.buffers.stencil.setClear(p),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Pi extends rn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Mi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new Re);this._width=t.width,this._height=t.height,n=new vn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Tn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ti(_r),this.copyPass.material.blending=Dr,this.clock=new kr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const c=this.passes[o];if(c.enabled!==!1){if(c.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),c.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),c.needsSwap){if(t){const p=this.renderer.getContext(),w=this.renderer.state.buffers.stencil;w.setFunc(p.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),w.setFunc(p.EQUAL,1,4294967295)}this.swapBuffers()}Bs!==void 0&&(c instanceof Bs?t=!0:c instanceof Pi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Re);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Ci extends rn{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new It}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,c;this.overrideMaterial!==null&&(c=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=c),e.autoClear=o}}const Si={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new It(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class bo extends rn{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new Re(e.x,e.y):new Re(256,256),this.clearColor=new It(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);this.renderTargetBright=new vn(s,c,{type:Tn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let I=0;I<this.nMips;I++){const b=new vn(s,c,{type:Tn});b.texture.name="UnrealBloomPass.h"+I,b.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(b);const m=new vn(s,c,{type:Tn});m.texture.name="UnrealBloomPass.v"+I,m.texture.generateMipmaps=!1,this.renderTargetsVertical.push(m),s=Math.round(s/2),c=Math.round(c/2)}const p=Si;this.highPassUniforms=$n.clone(p.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new po({uniforms:this.highPassUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}),this.separableBlurMaterials=[];const w=[3,5,7,9,11];s=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);for(let I=0;I<this.nMips;I++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(w[I])),this.separableBlurMaterials[I].uniforms.invSize.value=new Re(1/s,1/c),s=Math.round(s/2),c=Math.round(c/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const R=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=R,this.bloomTintColors=[new De(1,1,1),new De(1,1,1),new De(1,1,1),new De(1,1,1),new De(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const z=_r;this.copyUniforms=$n.clone(z.uniforms),this.blendMaterial=new po({uniforms:this.copyUniforms,vertexShader:z.vertexShader,fragmentShader:z.fragmentShader,blending:Vt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new It,this.oldClearAlpha=1,this.basic=new pt,this.fsQuad=new br(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new Re(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const c=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let p=this.renderTargetBright;for(let w=0;w<this.nMips;w++)this.fsQuad.material=this.separableBlurMaterials[w],this.separableBlurMaterials[w].uniforms.colorTexture.value=p.texture,this.separableBlurMaterials[w].uniforms.direction.value=bo.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[w]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[w].uniforms.colorTexture.value=this.renderTargetsHorizontal[w].texture,this.separableBlurMaterials[w].uniforms.direction.value=bo.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[w]),e.clear(),this.fsQuad.render(e),p=this.renderTargetsVertical[w];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=c}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new po({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Re(.5,.5)},direction:{value:new Re(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new po({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}bo.BlurDirectionX=new Re(1,0);bo.BlurDirectionY=new Re(0,1);class as extends Rr{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Ei=Br;class Nn extends Ws{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,c=new Xs(s.manager);c.setPath(s.path),c.setRequestHeader(s.requestHeader),c.setWithCredentials(s.withCredentials),c.load(e,function(p){try{n(s.parse(p))}catch(w){o?o(w):console.error(w),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(d,u){if(d.nodeType!==1)return;const i=S(d);let r=!1,P=null;switch(d.nodeName){case"svg":u=C(d,u);break;case"style":s(d);break;case"g":u=C(d,u);break;case"path":u=C(d,u),d.hasAttribute("d")&&(P=o(d));break;case"rect":u=C(d,u),P=w(d);break;case"polygon":u=C(d,u),P=R(d);break;case"polyline":u=C(d,u),P=z(d);break;case"circle":u=C(d,u),P=I(d);break;case"ellipse":u=C(d,u),P=b(d);break;case"line":u=C(d,u),P=m(d);break;case"defs":r=!0;break;case"use":u=C(d,u);const H=(d.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),W=d.viewportElement.getElementById(H);W?t(W,u):console.warn("SVGLoader: 'use node' references non-existent node id: "+H);break}P&&(u.fill!==void 0&&u.fill!=="none"&&P.color.setStyle(u.fill,Ei),G(P,Y),T.push(P),P.userData={node:d,style:u});const B=d.childNodes;for(let x=0;x<B.length;x++){const H=B[x];r&&H.nodeName!=="style"&&H.nodeName!=="defs"||t(H,u)}i&&(re.pop(),re.length>0?Y.copy(re[re.length-1]):Y.identity())}function o(d){const u=new to,i=new Re,r=new Re,P=new Re;let B=!0,x=!1;const H=d.getAttribute("d");if(H===""||H==="none")return null;const W=H.match(/[a-df-z][^a-df-z]*/ig);for(let D=0,_=W.length;D<_;D++){const N=W[D],Q=N.charAt(0),h=N.slice(1).trim();B===!0&&(x=!0,B=!1);let g;switch(Q){case"M":g=y(h);for(let l=0,ne=g.length;l<ne;l+=2)i.x=g[l+0],i.y=g[l+1],r.x=i.x,r.y=i.y,l===0?u.moveTo(i.x,i.y):u.lineTo(i.x,i.y),l===0&&P.copy(i);break;case"H":g=y(h);for(let l=0,ne=g.length;l<ne;l++)i.x=g[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&x===!0&&P.copy(i);break;case"V":g=y(h);for(let l=0,ne=g.length;l<ne;l++)i.y=g[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&x===!0&&P.copy(i);break;case"L":g=y(h);for(let l=0,ne=g.length;l<ne;l+=2)i.x=g[l+0],i.y=g[l+1],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&x===!0&&P.copy(i);break;case"C":g=y(h);for(let l=0,ne=g.length;l<ne;l+=6)u.bezierCurveTo(g[l+0],g[l+1],g[l+2],g[l+3],g[l+4],g[l+5]),r.x=g[l+2],r.y=g[l+3],i.x=g[l+4],i.y=g[l+5],l===0&&x===!0&&P.copy(i);break;case"S":g=y(h);for(let l=0,ne=g.length;l<ne;l+=4)u.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),g[l+0],g[l+1],g[l+2],g[l+3]),r.x=g[l+0],r.y=g[l+1],i.x=g[l+2],i.y=g[l+3],l===0&&x===!0&&P.copy(i);break;case"Q":g=y(h);for(let l=0,ne=g.length;l<ne;l+=4)u.quadraticCurveTo(g[l+0],g[l+1],g[l+2],g[l+3]),r.x=g[l+0],r.y=g[l+1],i.x=g[l+2],i.y=g[l+3],l===0&&x===!0&&P.copy(i);break;case"T":g=y(h);for(let l=0,ne=g.length;l<ne;l+=2){const pe=M(i.x,r.x),Ye=M(i.y,r.y);u.quadraticCurveTo(pe,Ye,g[l+0],g[l+1]),r.x=pe,r.y=Ye,i.x=g[l+0],i.y=g[l+1],l===0&&x===!0&&P.copy(i)}break;case"A":g=y(h,[3,4],7);for(let l=0,ne=g.length;l<ne;l+=7){if(g[l+5]==i.x&&g[l+6]==i.y)continue;const pe=i.clone();i.x=g[l+5],i.y=g[l+6],r.x=i.x,r.y=i.y,c(u,g[l],g[l+1],g[l+2],g[l+3],g[l+4],pe,i),l===0&&x===!0&&P.copy(i)}break;case"m":g=y(h);for(let l=0,ne=g.length;l<ne;l+=2)i.x+=g[l+0],i.y+=g[l+1],r.x=i.x,r.y=i.y,l===0?u.moveTo(i.x,i.y):u.lineTo(i.x,i.y),l===0&&P.copy(i);break;case"h":g=y(h);for(let l=0,ne=g.length;l<ne;l++)i.x+=g[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&x===!0&&P.copy(i);break;case"v":g=y(h);for(let l=0,ne=g.length;l<ne;l++)i.y+=g[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&x===!0&&P.copy(i);break;case"l":g=y(h);for(let l=0,ne=g.length;l<ne;l+=2)i.x+=g[l+0],i.y+=g[l+1],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&x===!0&&P.copy(i);break;case"c":g=y(h);for(let l=0,ne=g.length;l<ne;l+=6)u.bezierCurveTo(i.x+g[l+0],i.y+g[l+1],i.x+g[l+2],i.y+g[l+3],i.x+g[l+4],i.y+g[l+5]),r.x=i.x+g[l+2],r.y=i.y+g[l+3],i.x+=g[l+4],i.y+=g[l+5],l===0&&x===!0&&P.copy(i);break;case"s":g=y(h);for(let l=0,ne=g.length;l<ne;l+=4)u.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),i.x+g[l+0],i.y+g[l+1],i.x+g[l+2],i.y+g[l+3]),r.x=i.x+g[l+0],r.y=i.y+g[l+1],i.x+=g[l+2],i.y+=g[l+3],l===0&&x===!0&&P.copy(i);break;case"q":g=y(h);for(let l=0,ne=g.length;l<ne;l+=4)u.quadraticCurveTo(i.x+g[l+0],i.y+g[l+1],i.x+g[l+2],i.y+g[l+3]),r.x=i.x+g[l+0],r.y=i.y+g[l+1],i.x+=g[l+2],i.y+=g[l+3],l===0&&x===!0&&P.copy(i);break;case"t":g=y(h);for(let l=0,ne=g.length;l<ne;l+=2){const pe=M(i.x,r.x),Ye=M(i.y,r.y);u.quadraticCurveTo(pe,Ye,i.x+g[l+0],i.y+g[l+1]),r.x=pe,r.y=Ye,i.x=i.x+g[l+0],i.y=i.y+g[l+1],l===0&&x===!0&&P.copy(i)}break;case"a":g=y(h,[3,4],7);for(let l=0,ne=g.length;l<ne;l+=7){if(g[l+5]==0&&g[l+6]==0)continue;const pe=i.clone();i.x+=g[l+5],i.y+=g[l+6],r.x=i.x,r.y=i.y,c(u,g[l],g[l+1],g[l+2],g[l+3],g[l+4],pe,i),l===0&&x===!0&&P.copy(i)}break;case"Z":case"z":u.currentPath.autoClose=!0,u.currentPath.curves.length>0&&(i.copy(P),u.currentPath.currentPoint.copy(i),B=!0);break;default:console.warn(N)}x=!1}return u}function s(d){if(!(!d.sheet||!d.sheet.cssRules||!d.sheet.cssRules.length))for(let u=0;u<d.sheet.cssRules.length;u++){const i=d.sheet.cssRules[u];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(P=>P.trim());for(let P=0;P<r.length;P++){const B=Object.fromEntries(Object.entries(i.style).filter(([,x])=>x!==""));$[r[P]]=Object.assign($[r[P]]||{},B)}}}function c(d,u,i,r,P,B,x,H){if(u==0||i==0){d.lineTo(H.x,H.y);return}r=r*Math.PI/180,u=Math.abs(u),i=Math.abs(i);const W=(x.x-H.x)/2,D=(x.y-H.y)/2,_=Math.cos(r)*W+Math.sin(r)*D,N=-Math.sin(r)*W+Math.cos(r)*D;let Q=u*u,h=i*i;const g=_*_,l=N*N,ne=g/Q+l/h;if(ne>1){const ge=Math.sqrt(ne);u=ge*u,i=ge*i,Q=u*u,h=i*i}const pe=Q*l+h*g,Ye=(Q*h-pe)/pe;let F=Math.sqrt(Math.max(0,Ye));P===B&&(F=-F);const se=F*u*N/i,ae=-F*i*_/u,ye=Math.cos(r)*se-Math.sin(r)*ae+(x.x+H.x)/2,le=Math.sin(r)*se+Math.cos(r)*ae+(x.y+H.y)/2,_e=p(1,0,(_-se)/u,(N-ae)/i),be=p((_-se)/u,(N-ae)/i,(-_-se)/u,(-N-ae)/i)%(Math.PI*2);d.currentPath.absellipse(ye,le,u,i,_e,_e+be,B===0,r)}function p(d,u,i,r){const P=d*i+u*r,B=Math.sqrt(d*d+u*u)*Math.sqrt(i*i+r*r);let x=Math.acos(Math.max(-1,Math.min(1,P/B)));return d*r-u*i<0&&(x=-x),x}function w(d){const u=O(d.getAttribute("x")||0),i=O(d.getAttribute("y")||0),r=O(d.getAttribute("rx")||d.getAttribute("ry")||0),P=O(d.getAttribute("ry")||d.getAttribute("rx")||0),B=O(d.getAttribute("width")),x=O(d.getAttribute("height")),H=1-.551915024494,W=new to;return W.moveTo(u+r,i),W.lineTo(u+B-r,i),(r!==0||P!==0)&&W.bezierCurveTo(u+B-r*H,i,u+B,i+P*H,u+B,i+P),W.lineTo(u+B,i+x-P),(r!==0||P!==0)&&W.bezierCurveTo(u+B,i+x-P*H,u+B-r*H,i+x,u+B-r,i+x),W.lineTo(u+r,i+x),(r!==0||P!==0)&&W.bezierCurveTo(u+r*H,i+x,u,i+x-P*H,u,i+x-P),W.lineTo(u,i+P),(r!==0||P!==0)&&W.bezierCurveTo(u,i+P*H,u+r*H,i,u+r,i),W}function R(d){function u(B,x,H){const W=O(x),D=O(H);P===0?r.moveTo(W,D):r.lineTo(W,D),P++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new to;let P=0;return d.getAttribute("points").replace(i,u),r.currentPath.autoClose=!0,r}function z(d){function u(B,x,H){const W=O(x),D=O(H);P===0?r.moveTo(W,D):r.lineTo(W,D),P++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new to;let P=0;return d.getAttribute("points").replace(i,u),r.currentPath.autoClose=!1,r}function I(d){const u=O(d.getAttribute("cx")||0),i=O(d.getAttribute("cy")||0),r=O(d.getAttribute("r")||0),P=new zn;P.absarc(u,i,r,0,Math.PI*2);const B=new to;return B.subPaths.push(P),B}function b(d){const u=O(d.getAttribute("cx")||0),i=O(d.getAttribute("cy")||0),r=O(d.getAttribute("rx")||0),P=O(d.getAttribute("ry")||0),B=new zn;B.absellipse(u,i,r,P,0,Math.PI*2);const x=new to;return x.subPaths.push(B),x}function m(d){const u=O(d.getAttribute("x1")||0),i=O(d.getAttribute("y1")||0),r=O(d.getAttribute("x2")||0),P=O(d.getAttribute("y2")||0),B=new to;return B.moveTo(u,i),B.lineTo(r,P),B.currentPath.autoClose=!1,B}function C(d,u){u=Object.assign({},u);let i={};if(d.hasAttribute("class")){const x=d.getAttribute("class").split(/\s/).filter(Boolean).map(H=>H.trim());for(let H=0;H<x.length;H++)i=Object.assign(i,$["."+x[H]])}d.hasAttribute("id")&&(i=Object.assign(i,$["#"+d.getAttribute("id")]));function r(x,H,W){W===void 0&&(W=function(_){return _.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),_}),d.hasAttribute(x)&&(u[H]=W(d.getAttribute(x))),i[x]&&(u[H]=W(i[x])),d.style&&d.style[x]!==""&&(u[H]=W(d.style[x]))}function P(x){return Math.max(0,Math.min(1,O(x)))}function B(x){return Math.max(0,O(x))}return r("fill","fill"),r("fill-opacity","fillOpacity",P),r("fill-rule","fillRule"),r("opacity","opacity",P),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",P),r("stroke-width","strokeWidth",B),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",B),r("visibility","visibility"),u}function M(d,u){return d-(u-d)}function y(d,u,i){if(typeof d!="string")throw new TypeError("Invalid input: "+typeof d);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},P=0,B=1,x=2,H=3;let W=P,D=!0,_="",N="";const Q=[];function h(pe,Ye,F){const se=new SyntaxError('Unexpected character "'+pe+'" at index '+Ye+".");throw se.partial=F,se}function g(){_!==""&&(N===""?Q.push(Number(_)):Q.push(Number(_)*Math.pow(10,Number(N)))),_="",N=""}let l;const ne=d.length;for(let pe=0;pe<ne;pe++){if(l=d[pe],Array.isArray(u)&&u.includes(Q.length%i)&&r.FLAGS.test(l)){W=B,_=l,g();continue}if(W===P){if(r.WHITESPACE.test(l))continue;if(r.DIGIT.test(l)||r.SIGN.test(l)){W=B,_=l;continue}if(r.POINT.test(l)){W=x,_=l;continue}r.COMMA.test(l)&&(D&&h(l,pe,Q),D=!0)}if(W===B){if(r.DIGIT.test(l)){_+=l;continue}if(r.POINT.test(l)){_+=l,W=x;continue}if(r.EXP.test(l)){W=H;continue}r.SIGN.test(l)&&_.length===1&&r.SIGN.test(_[0])&&h(l,pe,Q)}if(W===x){if(r.DIGIT.test(l)){_+=l;continue}if(r.EXP.test(l)){W=H;continue}r.POINT.test(l)&&_[_.length-1]==="."&&h(l,pe,Q)}if(W===H){if(r.DIGIT.test(l)){N+=l;continue}if(r.SIGN.test(l)){if(N===""){N+=l;continue}N.length===1&&r.SIGN.test(N)&&h(l,pe,Q)}}r.WHITESPACE.test(l)?(g(),W=P,D=!1):r.COMMA.test(l)?(g(),W=P,D=!0):r.SIGN.test(l)?(g(),W=B,_=l):r.POINT.test(l)?(g(),W=x,_=l):h(l,pe,Q)}return g(),Q}const U=["mm","cm","in","pt","pc","px"],te={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function O(d){let u="px";if(typeof d=="string"||d instanceof String)for(let r=0,P=U.length;r<P;r++){const B=U[r];if(d.endsWith(B)){u=B,d=d.substring(0,d.length-B.length);break}}let i;return u==="px"&&n.defaultUnit!=="px"?i=te.in[n.defaultUnit]/n.defaultDPI:(i=te[u][n.defaultUnit],i<0&&(i=te[u].in*n.defaultDPI)),i*parseFloat(d)}function S(d){if(!(d.hasAttribute("transform")||d.nodeName==="use"&&(d.hasAttribute("x")||d.hasAttribute("y"))))return null;const u=ee(d);return re.length>0&&u.premultiply(re[re.length-1]),Y.copy(u),re.push(u),u}function ee(d){const u=new vo,i=we;if(d.nodeName==="use"&&(d.hasAttribute("x")||d.hasAttribute("y"))){const r=O(d.getAttribute("x")),P=O(d.getAttribute("y"));u.translate(r,P)}if(d.hasAttribute("transform")){const r=d.getAttribute("transform").split(")");for(let P=r.length-1;P>=0;P--){const B=r[P].trim();if(B==="")continue;const x=B.indexOf("("),H=B.length;if(x>0&&x<H){const W=B.slice(0,x),D=y(B.slice(x+1));switch(i.identity(),W){case"translate":if(D.length>=1){const _=D[0];let N=0;D.length>=2&&(N=D[1]),i.translate(_,N)}break;case"rotate":if(D.length>=1){let _=0,N=0,Q=0;_=D[0]*Math.PI/180,D.length>=3&&(N=D[1],Q=D[2]),J.makeTranslation(-N,-Q),k.makeRotation(_),A.multiplyMatrices(k,J),J.makeTranslation(N,Q),i.multiplyMatrices(J,A)}break;case"scale":if(D.length>=1){const _=D[0];let N=_;D.length>=2&&(N=D[1]),i.scale(_,N)}break;case"skewX":D.length===1&&i.set(1,Math.tan(D[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":D.length===1&&i.set(1,0,0,Math.tan(D[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":D.length===6&&i.set(D[0],D[2],D[4],D[1],D[3],D[5],0,0,1);break}}u.premultiply(i)}}return u}function G(d,u){function i(x){a.set(x.x,x.y,1).applyMatrix3(u),x.set(a.x,a.y)}function r(x){const H=x.xRadius,W=x.yRadius,D=Math.cos(x.aRotation),_=Math.sin(x.aRotation),N=new De(H*D,H*_,0),Q=new De(-W*_,W*D,0),h=N.applyMatrix3(u),g=Q.applyMatrix3(u),l=we.set(h.x,g.x,0,h.y,g.y,0,0,0,1),ne=J.copy(l).invert(),F=k.copy(ne).transpose().multiply(ne).elements,se=fe(F[0],F[1],F[4]),ae=Math.sqrt(se.rt1),ye=Math.sqrt(se.rt2);if(x.xRadius=1/ae,x.yRadius=1/ye,x.aRotation=Math.atan2(se.sn,se.cs),!((x.aEndAngle-x.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const _e=J.set(ae,0,0,0,ye,0,0,0,1),be=k.set(se.cs,se.sn,0,-se.sn,se.cs,0,0,0,1),ge=_e.multiply(be).multiply(l),Ae=ce=>{const{x:de,y:Ee}=new De(Math.cos(ce),Math.sin(ce),0).applyMatrix3(ge);return Math.atan2(Ee,de)};x.aStartAngle=Ae(x.aStartAngle),x.aEndAngle=Ae(x.aEndAngle),L(u)&&(x.aClockwise=!x.aClockwise)}}function P(x){const H=oe(u),W=v(u);x.xRadius*=H,x.yRadius*=W;const D=H>Number.EPSILON?Math.atan2(u.elements[1],u.elements[0]):Math.atan2(-u.elements[3],u.elements[4]);x.aRotation+=D,L(u)&&(x.aStartAngle*=-1,x.aEndAngle*=-1,x.aClockwise=!x.aClockwise)}const B=d.subPaths;for(let x=0,H=B.length;x<H;x++){const D=B[x].curves;for(let _=0;_<D.length;_++){const N=D[_];N.isLineCurve?(i(N.v1),i(N.v2)):N.isCubicBezierCurve?(i(N.v0),i(N.v1),i(N.v2),i(N.v3)):N.isQuadraticBezierCurve?(i(N.v0),i(N.v1),i(N.v2)):N.isEllipseCurve&&(K.set(N.aX,N.aY),i(K),N.aX=K.x,N.aY=K.y,X(u)?r(N):P(N))}}}function L(d){const u=d.elements;return u[0]*u[4]-u[1]*u[3]<0}function X(d){const u=d.elements,i=u[0]*u[3]+u[1]*u[4];if(i===0)return!1;const r=oe(d),P=v(d);return Math.abs(i/(r*P))>Number.EPSILON}function oe(d){const u=d.elements;return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function v(d){const u=d.elements;return Math.sqrt(u[3]*u[3]+u[4]*u[4])}function fe(d,u,i){let r,P,B,x,H;const W=d+i,D=d-i,_=Math.sqrt(D*D+4*u*u);return W>0?(r=.5*(W+_),H=1/r,P=d*H*i-u*H*u):W<0?P=.5*(W-_):(r=.5*_,P=-.5*_),D>0?B=D+_:B=D-_,Math.abs(B)>2*Math.abs(u)?(H=-2*u/B,x=1/Math.sqrt(1+H*H),B=H*x):Math.abs(u)===0?(B=1,x=0):(H=-.5*B/u,B=1/Math.sqrt(1+H*H),x=H*B),D>0&&(H=B,B=-x,x=H),{rt1:r,rt2:P,cs:B,sn:x}}const T=[],$={},re=[],we=new vo,J=new vo,k=new vo,A=new vo,K=new Re,a=new De,Y=new vo,ue=new DOMParser().parseFromString(e,"image/svg+xml");return t(ue.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:T,xml:ue.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(M,y,U,te){const O=M.x,S=y.x,ee=U.x,G=te.x,L=M.y,X=y.y,oe=U.y,v=te.y,fe=(G-ee)*(L-oe)-(v-oe)*(O-ee),T=(S-O)*(L-oe)-(X-L)*(O-ee),$=(v-oe)*(S-O)-(G-ee)*(X-L),re=fe/$,we=T/$;if($===0&&fe!==0||re<=0||re>=1||we<0||we>1)return null;if(fe===0&&$===0){for(let J=0;J<2;J++)if(c(J===0?U:te,M,y),o.loc==t.ORIGIN){const k=J===0?U:te;return{x:k.x,y:k.y,t:o.t}}else if(o.loc==t.BETWEEN){const k=+(O+o.t*(S-O)).toPrecision(10),A=+(L+o.t*(X-L)).toPrecision(10);return{x:k,y:A,t:o.t}}return null}else{for(let A=0;A<2;A++)if(c(A===0?U:te,M,y),o.loc==t.ORIGIN){const K=A===0?U:te;return{x:K.x,y:K.y,t:o.t}}const J=+(O+re*(S-O)).toPrecision(10),k=+(L+re*(X-L)).toPrecision(10);return{x:J,y:k,t:re}}}function c(M,y,U){const te=U.x-y.x,O=U.y-y.y,S=M.x-y.x,ee=M.y-y.y,G=te*ee-S*O;if(M.x===y.x&&M.y===y.y){o.loc=t.ORIGIN,o.t=0;return}if(M.x===U.x&&M.y===U.y){o.loc=t.DESTINATION,o.t=1;return}if(G<-Number.EPSILON){o.loc=t.LEFT;return}if(G>Number.EPSILON){o.loc=t.RIGHT;return}if(te*S<0||O*ee<0){o.loc=t.BEHIND;return}if(Math.sqrt(te*te+O*O)<Math.sqrt(S*S+ee*ee)){o.loc=t.BEYOND;return}let L;te!==0?L=S/te:L=ee/O,o.loc=t.BETWEEN,o.t=L}function p(M,y){const U=[],te=[];for(let O=1;O<M.length;O++){const S=M[O-1],ee=M[O];for(let G=1;G<y.length;G++){const L=y[G-1],X=y[G],oe=s(S,ee,L,X);oe!==null&&U.find(v=>v.t<=oe.t+Number.EPSILON&&v.t>=oe.t-Number.EPSILON)===void 0&&(U.push(oe),te.push(new Re(oe.x,oe.y)))}}return te}function w(M,y,U){const te=new Re;y.getCenter(te);const O=[];return U.forEach(S=>{S.boundingBox.containsPoint(te)&&p(M,S.points).forEach(G=>{O.push({identifier:S.identifier,isCW:S.isCW,point:G})})}),O.sort((S,ee)=>S.point.x-ee.point.x),O}function R(M,y,U,te,O){(O==null||O==="")&&(O="nonzero");const S=new Re;M.boundingBox.getCenter(S);const ee=[new Re(U,S.y),new Re(te,S.y)],G=w(ee,M.boundingBox,y);G.sort((T,$)=>T.point.x-$.point.x);const L=[],X=[];G.forEach(T=>{T.identifier===M.identifier?L.push(T):X.push(T)});const oe=L[0].point.x,v=[];let fe=0;for(;fe<X.length&&X[fe].point.x<oe;)v.length>0&&v[v.length-1]===X[fe].identifier?v.pop():v.push(X[fe].identifier),fe++;if(v.push(M.identifier),O==="evenodd"){const T=v.length%2===0,$=v[v.length-2];return{identifier:M.identifier,isHole:T,for:$}}else if(O==="nonzero"){let T=!0,$=null,re=null;for(let we=0;we<v.length;we++){const J=v[we];T?(re=y[J].isCW,T=!1,$=J):re!==y[J].isCW&&(re=y[J].isCW,T=!0)}return{identifier:M.identifier,isHole:T,for:$}}else console.warn('fill-rule: "'+O+'" is currently not implemented.')}let z=999999999,I=-999999999,b=e.subPaths.map(M=>{const y=M.getPoints();let U=-999999999,te=999999999,O=-999999999,S=999999999;for(let ee=0;ee<y.length;ee++){const G=y[ee];G.y>U&&(U=G.y),G.y<te&&(te=G.y),G.x>O&&(O=G.x),G.x<S&&(S=G.x)}return I<=O&&(I=O+1),z>=S&&(z=S-1),{curves:M.curves,points:y,isCW:Lr.isClockWise(y),identifier:-1,boundingBox:new Or(new Re(S,te),new Re(O,U))}});b=b.filter(M=>M.points.length>1);for(let M=0;M<b.length;M++)b[M].identifier=M;const m=b.map(M=>R(M,b,z,I,e.userData?e.userData.style.fillRule:void 0)),C=[];return b.forEach(M=>{if(!m[M.identifier].isHole){const U=new Nr;U.curves=M.curves,m.filter(O=>O.isHole&&O.for===M.identifier).forEach(O=>{const S=b[O.identifier],ee=new zn;ee.curves=S.curves,U.holes.push(ee)}),C.push(U)}}),C}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],c=[],p=[];if(Nn.pointsToStrokeWithBuffers(e,n,t,o,s,c,p)===0)return null;const w=new ro;return w.setAttribute("position",new Xo(s,3)),w.setAttribute("normal",new Xo(c,3)),w.setAttribute("uv",new Xo(p,2)),w}static pointsToStrokeWithBuffers(e,n,t,o,s,c,p,w){const R=new Re,z=new Re,I=new Re,b=new Re,m=new Re,C=new Re,M=new Re,y=new Re,U=new Re,te=new Re,O=new Re,S=new Re,ee=new Re,G=new Re,L=new Re,X=new Re,oe=new Re;t=t!==void 0?t:12,o=o!==void 0?o:.001,w=w!==void 0?w:0,e=D(e);const v=e.length;if(v<2)return 0;const fe=e[0].equals(e[v-1]);let T,$=e[0],re;const we=n.strokeWidth/2,J=1/(v-1);let k=0,A,K,a,Y,ue=!1,Se=0,d=w*3,u=w*2;i(e[0],e[1],R).multiplyScalar(we),y.copy(e[0]).sub(R),U.copy(e[0]).add(R),te.copy(y),O.copy(U);for(let _=1;_<v;_++){T=e[_],_===v-1?fe?re=e[1]:re=void 0:re=e[_+1];const N=R;if(i($,T,N),I.copy(N).multiplyScalar(we),S.copy(T).sub(I),ee.copy(T).add(I),A=k+J,K=!1,re!==void 0){i(T,re,z),I.copy(z).multiplyScalar(we),G.copy(T).sub(I),L.copy(T).add(I),a=!0,I.subVectors(re,$),N.dot(I)<0&&(a=!1),_===1&&(ue=a),I.subVectors(re,T),I.normalize();const Q=Math.abs(N.dot(I));if(Q>Number.EPSILON){const h=we/Q;I.multiplyScalar(-h),b.subVectors(T,$),m.copy(b).setLength(h).add(I),X.copy(m).negate();const g=m.length(),l=b.length();b.divideScalar(l),C.subVectors(re,T);const ne=C.length();switch(C.divideScalar(ne),b.dot(X)<l&&C.dot(X)<ne&&(K=!0),oe.copy(m).add(T),X.add(T),Y=!1,K?a?(L.copy(X),ee.copy(X)):(G.copy(X),S.copy(X)):B(),n.strokeLineJoin){case"bevel":x(a,K,A);break;case"round":H(a,K),a?P(T,S,G,A,0):P(T,L,ee,A,1);break;case"miter":case"miter-clip":default:const pe=we*n.strokeMiterLimit/g;if(pe<1)if(n.strokeLineJoin!=="miter-clip"){x(a,K,A);break}else H(a,K),a?(C.subVectors(oe,S).multiplyScalar(pe).add(S),M.subVectors(oe,G).multiplyScalar(pe).add(G),r(S,A,0),r(C,A,0),r(T,A,.5),r(T,A,.5),r(C,A,0),r(M,A,0),r(T,A,.5),r(M,A,0),r(G,A,0)):(C.subVectors(oe,ee).multiplyScalar(pe).add(ee),M.subVectors(oe,L).multiplyScalar(pe).add(L),r(ee,A,1),r(C,A,1),r(T,A,.5),r(T,A,.5),r(C,A,1),r(M,A,1),r(T,A,.5),r(M,A,1),r(L,A,1));else K?(a?(r(U,k,1),r(y,k,0),r(oe,A,0),r(U,k,1),r(oe,A,0),r(X,A,1)):(r(U,k,1),r(y,k,0),r(oe,A,1),r(y,k,0),r(X,A,0),r(oe,A,1)),a?G.copy(oe):L.copy(oe)):a?(r(S,A,0),r(oe,A,0),r(T,A,.5),r(T,A,.5),r(oe,A,0),r(G,A,0)):(r(ee,A,1),r(oe,A,1),r(T,A,.5),r(T,A,.5),r(oe,A,1),r(L,A,1)),Y=!0;break}}else B()}else B();!fe&&_===v-1&&W(e[0],te,O,a,!0,k),k=A,$=T,y.copy(G),U.copy(L)}if(!fe)W(T,S,ee,a,!1,A);else if(K&&s){let _=oe,N=X;ue!==a&&(_=X,N=oe),a?(Y||ue)&&(N.toArray(s,0*3),N.toArray(s,3*3),Y&&_.toArray(s,1*3)):(Y||!ue)&&(N.toArray(s,1*3),N.toArray(s,3*3),Y&&_.toArray(s,0*3))}return Se;function i(_,N,Q){return Q.subVectors(N,_),Q.set(-Q.y,Q.x).normalize()}function r(_,N,Q){s&&(s[d]=_.x,s[d+1]=_.y,s[d+2]=0,c&&(c[d]=0,c[d+1]=0,c[d+2]=1),d+=3,p&&(p[u]=N,p[u+1]=Q,u+=2)),Se+=3}function P(_,N,Q,h,g){R.copy(N).sub(_).normalize(),z.copy(Q).sub(_).normalize();let l=Math.PI;const ne=R.dot(z);Math.abs(ne)<1&&(l=Math.abs(Math.acos(ne))),l/=t,I.copy(N);for(let pe=0,Ye=t-1;pe<Ye;pe++)b.copy(I).rotateAround(_,l),r(I,h,g),r(b,h,g),r(_,h,.5),I.copy(b);r(b,h,g),r(Q,h,g),r(_,h,.5)}function B(){r(U,k,1),r(y,k,0),r(S,A,0),r(U,k,1),r(S,A,0),r(ee,A,1)}function x(_,N,Q){N?_?(r(U,k,1),r(y,k,0),r(S,A,0),r(U,k,1),r(S,A,0),r(X,A,1),r(S,Q,0),r(G,Q,0),r(X,Q,.5)):(r(U,k,1),r(y,k,0),r(ee,A,1),r(y,k,0),r(X,A,0),r(ee,A,1),r(ee,Q,1),r(X,Q,0),r(L,Q,1)):_?(r(S,Q,0),r(G,Q,0),r(T,Q,.5)):(r(ee,Q,1),r(L,Q,0),r(T,Q,.5))}function H(_,N){N&&(_?(r(U,k,1),r(y,k,0),r(S,A,0),r(U,k,1),r(S,A,0),r(X,A,1),r(S,k,0),r(T,A,.5),r(X,A,1),r(T,A,.5),r(G,k,0),r(X,A,1)):(r(U,k,1),r(y,k,0),r(ee,A,1),r(y,k,0),r(X,A,0),r(ee,A,1),r(ee,k,1),r(X,A,0),r(T,A,.5),r(T,A,.5),r(X,A,0),r(L,k,1)))}function W(_,N,Q,h,g,l){switch(n.strokeLineCap){case"round":g?P(_,Q,N,l,.5):P(_,N,Q,l,.5);break;case"square":if(g)R.subVectors(N,_),z.set(R.y,-R.x),I.addVectors(R,z).add(_),b.subVectors(z,R).add(_),h?(I.toArray(s,1*3),b.toArray(s,0*3),b.toArray(s,3*3)):(I.toArray(s,1*3),p[3*2+1]===1?b.toArray(s,3*3):I.toArray(s,3*3),b.toArray(s,0*3));else{R.subVectors(Q,_),z.set(R.y,-R.x),I.addVectors(R,z).add(_),b.subVectors(z,R).add(_);const ne=s.length;h?(I.toArray(s,ne-1*3),b.toArray(s,ne-2*3),b.toArray(s,ne-4*3)):(b.toArray(s,ne-2*3),I.toArray(s,ne-1*3),b.toArray(s,ne-4*3))}break}}function D(_){let N=!1;for(let h=1,g=_.length-1;h<g;h++)if(_[h].distanceTo(_[h+1])<o){N=!0;break}if(!N)return _;const Q=[];Q.push(_[0]);for(let h=1,g=_.length-1;h<g;h++)_[h].distanceTo(_[h+1])>=o&&Q.push(_[h]);return Q.push(_[_.length-1]),Q}}}function Ii(f,e,n,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=n,c=8,p=24,w=.075,R=200;let z,I=[],b=[],m=[],C=[];const M=(S,ee,G,L)=>{const X=new Do(S,S,S),oe=new jo(X),v=[new Ot({color:16711680,transparent:!0,opacity:L.opacity,blending:Vt}),new Ot({color:65280,transparent:!0,opacity:L.opacity,blending:Vt}),new Ot({color:255,transparent:!0,opacity:L.opacity,blending:Vt}),new Ot({color:65535,transparent:!0,opacity:L.opacity,blending:Vt}),new Ot({color:16711935,transparent:!0,opacity:L.opacity,blending:Vt}),new Ot({color:16776960,transparent:!0,opacity:L.opacity,blending:Vt})],fe=new yt,T=oe.getAttribute("position").array,$=[];for(let J=0;J<T.length/3;J+=2)$.push(J,J+1);const re=Array(6).fill(null).map(()=>new ro),we=Array(6).fill(null).map(()=>[]);for(let J=0;J<$.length/2;J++){const k=J%6;we[k].push($[J*2],$[J*2+1])}return re.forEach((J,k)=>{J.setIndex(we[k]),J.setAttribute("position",oe.getAttribute("position"));const A=new wt(J,v[k]);fe.add(A)}),fe.position.z=ee,fe.rotation.z=G,fe};if((()=>{const G=.9/(p-1);for(let $=0;$<p;$++)b[$]=new Ot({transparent:!0,opacity:1-$*G});if(z=new yt,!z){console.error("introGroup failed to initialize");return}for(let $=0;$<p;$++){const re=o-$*c,we=M(re,0,0,b[$]),J=we.children.map(k=>k.material);C.push(J.map(k=>({material:k,originalColor:k.color.clone()}))),z.add(we)}z.position.z=s,f.add(z),I.push(z),m=b.map($=>$.opacity);const L=ke.timeline({repeat:-1});L.to(z.rotation,{x:Ve.degToRad(360),duration:12,ease:"none"},0),L.to(z.rotation,{y:Ve.degToRad(360),duration:10,ease:"none"},0),L.to(z.rotation,{z:Ve.degToRad(360),duration:14,ease:"none"},0);let X=-1,oe=0;const v=w*1e3,fe=p*v,T=$=>{const re=$%fe/v,we=Math.floor(re)%p;X!==-1&&$-oe>=v&&(C[X].forEach(A=>{A.material.opacity=m[X],A.material.color.copy(A.originalColor)}),X=-1),X===-1&&we!==X&&(X=we,oe=$,C[X].forEach(k=>{k.material.opacity=1,k.material.color.set(1,1,1)})),requestAnimationFrame(T)};requestAnimationFrame(T)})(),e.value){const S=U(e.value);f.add(S)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:I};function U(S){const ee=new yt,G=te(S);G.position.set(0,-36,0),ee.add(G),O(X=>{ee.add(X),ke.fromTo(G.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const oe=X.children.find(v=>v instanceof Be&&v!==X.children[0]);if(oe){const v=oe.position.y;ke.to(oe.position,{y:v+3,duration:1,ease:"easeOut",onComplete:()=>{oe.position.y=v},repeat:-1})}}),ee.position.x=0,ee.position.y=-240;const L=s-p*c;return ee.position.z=L+R,ee}function te(S){const ee=new as("SCROLL TO CONTINUE",{font:S,size:8,depth:0,curveSegments:12,bevelEnabled:!1});ee.computeBoundingBox(),ee.center();const G=new pt({color:16777215,transparent:!0,opacity:1});return new Be(ee,G)}function O(S){new Nn().load("/3D/mouse.svg",G=>{const L=G.paths;let X=null,oe=null,v=new yt;if(L.forEach((fe,T)=>{Nn.createShapes(fe).forEach(re=>{const we=new zr(re);we.computeBoundingBox();const J=new pt({color:16777215,transparent:!0,opacity:1,side:Wt}),k=new Be(we,J);k.scale.set(.05,.05,1),T===0?X=k:T===1&&(oe=k)})}),X&&oe){v.add(X),v.add(oe);const T=(X.geometry.boundingBox.max.x-X.geometry.boundingBox.min.x)*X.scale.x/2;v.position.x=-T,v.rotation.x=Math.PI,S(v)}})}}function Ai(f,e,n,t,o,s,c,p){const w=js(),{CUBE_SIZE:R,CUBE_SPACING:z,FIRST_CUBE_Z:I}=e,b=I-(n.length+1)*z,m=65535,C=16711935,M=Ve.degToRad(15),y=1e3,U=.5,te=65280,O=80,S=1,ee=15,G=.1,L="ENTER TO LEARN MORE",X=w.isMobile?1:.5,oe=40,v=.125,fe=100,T=8,$=w.isMobile?1.5:2,re=w.isMobile?2:3.5,we=1;let J=[];J.length=0;let k=!1,A=!1,K=new Hr,a=new Re,Y=null,ue=null,Se=null,d=!1,u=null;const i=new Map,r=new Map,P=new Map,B=(F,se,ae,ye,le,_e,be)=>{const ge=new yt;ge.position.z=ae,ge.rotation.z=ye,ge.userData.isActive=!1,ge.userData.cubeIndex=be;const Ae=new Do(se,se,se),ce=new jo(Ae),de=new Ot({color:new It(m),transparent:!0,opacity:0}),Ee=new wt(ce,de);Ee.geometry.computeBoundingSphere(),ge.add(Ee);let Xe="right";const Pe=se/2,lt=Ge=>{const Mt=new ys(40,24),We=new jo(Mt),Me=new Ot({color:new It(m),transparent:!0,opacity:0,visible:!0}),Te=new wt(We,Me);Te.userData.isPortal=!0,Te.userData.isAnimating=!1,Te.geometry.computeBoundingSphere();const me=new eo(80,80),ie=new pt({visible:!1,side:Wt}),q=new Be(me,ie);q.userData.isPortalHitbox=!0,q.userData.portal=Te,q.geometry.computeBoundingSphere();const E=new yt,j=new eo(S,ee),Z=65/2;for(let Ne=0;Ne<O;Ne++){const Nt=new pt({color:new It(C),transparent:!0,opacity:0,visible:!1,side:Wt}),it=new Be(j,Nt),ot=Ne/O*Math.PI*2;it.position.set(Math.cos(ot)*Z,Math.sin(ot)*Z,0),it.rotation.z=ot+Math.PI/2,it.userData.baseOpacity=.01,it.userData.index=Ne,it.geometry.computeBoundingSphere(),E.add(it)}const he=2,ve=25;for(let Ne=1;Ne<ve;Ne++){const Nt=new ys(40,24),it=new jo(Nt),ot=Ve.lerp(1,.1,Ne/(ve-1)),et=new Ot({color:new It(m),transparent:!0,opacity:0}),ht=new wt(it,et);ht.userData.isPortal=!0,ht.userData.maxOpacity=ot,ht.position.z=-Ne*he,ht.geometry.computeBoundingSphere(),Te.add(ht)}if(Te.userData.maxOpacity=1,p.value){const Ne=new as(L,{font:p.value,size:3,depth:0,curveSegments:12,bevelEnabled:!1});Ne.computeBoundingBox(),Ne.center();const Nt=new pt({color:16777215,transparent:!0,opacity:0,side:Wt}),it=new Be(Ne,Nt);it.visible=!1,it.userData.isVisible=!1,it.userData.isExploreText=!0,it.userData.skipTextMeshes=!0;const ot=45;it.position.set(0,ot,0),Te.add(it),Te.userData.exploreText=it;const et=Ne.boundingBox,ht=et.max.x-et.min.x+10,Ro=et.max.y-et.min.y+10,an=new eo(ht,Ro),lo=new pt({transparent:!0,opacity:0,side:Wt,visible:!1}),xt=new Be(an,lo);xt.position.set(0,ot,0),xt.userData.isExploreTextHitbox=!0,xt.userData.portal=Te,xt.geometry.computeBoundingSphere(),Te.add(xt),Te.userData.exploreTextHitbox=xt}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const V=new yt,Ce=new eo(12,w.isMobile?1:.5),Oe=new pt({color:16777215,transparent:!0,opacity:0,side:Wt}),qe=new Be(Ce,Oe);qe.rotation.z=Math.PI/4;const je=new Be(Ce,Oe);je.rotation.z=-Math.PI/4,V.add(qe,je);const $e=new eo(30,30),Lt=new pt({opacity:0,transparent:!0,side:Wt,visible:!0}),Ke=new Be($e,Lt);Ke.userData.isCloseHitbox=!0,Ke.geometry.computeBoundingSphere(),Ke.renderOrder=2,V.add(Ke);const nt=42,rt=42,Ue=-10;V.visible=!1;let Je;switch(Xe){case"left":Te.position.set(-Pe,0,0),Te.rotation.y=Math.PI/2,q.position.set(-Pe,0,0),q.rotation.y=Math.PI/2,ye>=Ve.degToRad(120)?(Te.rotation.z=Math.PI,V.position.set(-Pe+Ue,-42,nt),Je=new De(-Pe+Ue,-42,nt)):(V.position.set(-Pe+Ue,rt,-42),Je=new De(-Pe+Ue,rt,-42)),V.rotation.y=Math.PI/2,E.children.forEach(Ne=>Ne.position.x+=G);break;case"top":Te.position.set(0,-Pe,0),Te.rotation.x=-Math.PI/2,Te.rotation.z=-Math.PI/2,q.position.set(0,-Pe,0),q.rotation.x=Math.PI/2,ye>=Ve.degToRad(100)?ye>=Ve.degToRad(180)?(Te.rotation.z=Math.PI/2,V.position.set(-42,-Pe+Ue,-42),Je=new De(-42,-Pe+Ue,-42)):(V.position.set(rt,-Pe+Ue,nt),Je=new De(rt,-Pe+Ue,nt)):(V.position.set(rt,-Pe+Ue,nt),Je=new De(rt,-Pe+Ue,nt)),V.rotation.x=-Math.PI/2,E.children.forEach(Ne=>Ne.position.y+=G);break;case"right":Te.position.set(Pe,0,0),Te.rotation.y=-Math.PI/2,q.position.set(Pe,0,0),q.rotation.y=-Math.PI/2,ye>=Ve.degToRad(120)?(Te.rotation.z=Math.PI,V.position.set(Pe+Ue,-42,-42),Je=new De(Pe+Ue,-42,-42)):(V.position.set(Pe+Ue,rt,nt),Je=new De(Pe+Ue,rt,nt)),V.rotation.y=-Math.PI/2,E.children.forEach(Ne=>Ne.position.x+=G);break;case"bottom":Te.position.set(0,Pe,0),Te.rotation.x=Math.PI/2,Te.rotation.z=-Math.PI/2,q.position.set(0,Pe,0),q.rotation.x=Math.PI/2,ye>=Ve.degToRad(100)?(V.position.set(nt,Pe-Ue,-42),Je=new De(nt,Pe-Ue,-42)):(V.position.set(rt,Pe-Ue,-42),Je=new De(rt,Pe-Ue,-42)),V.rotation.x=Math.PI/2,E.children.forEach(Ne=>Ne.position.y+=G);break}ge.userData.initialCloseGroupPosition=Je,V.updateMatrixWorld(!0),Te.add(E),ge.add(Te),ge.add(q),ge.add(V),ge.userData.closeButton=V,Te.updateMatrixWorld(!0),E.updateMatrixWorld(!0),V.updateMatrixWorld(!0),i.set(ge,[]),r.set(ge,0),P.set(ge,0)},ut=Ge=>{(Ge instanceof wt||Ge instanceof Be)&&Ge.geometry&&Ge.geometry.computeBoundingSphere(),ge.add(Ge)};if(le&&s.showKeyarts){switch(["left","top","right","bottom"].includes(_e)?_e:"left"){case"left":Xe="right";break;case"top":Xe="bottom";break;case"right":Xe="left";break;case"bottom":Xe="top";break}const Qe=c.get(le);if(Qe){const st=new eo(se-1,se-1),Mt=new pt({map:Qe,transparent:!0,opacity:0,blending:Vt,side:Wt}),We=new Be(st,Mt);switch(We.userData.isLoaded=!0,_e){case"left":We.position.set(-Pe,0,0),ye>=Ve.degToRad(120)?(We.rotation.y=Math.PI/2,We.rotation.z=-Math.PI):We.rotation.y=Math.PI/2;break;case"top":We.position.set(0,-Pe,0),We.rotation.x=-Math.PI/2,We.rotation.z=-Math.PI/2;break;case"right":We.position.set(Pe,0,0),ye>=Ve.degToRad(120)?(We.rotation.y=-Math.PI/2,We.rotation.z=-Math.PI):We.rotation.y=-Math.PI/2;break;case"bottom":We.position.set(0,Pe,0),ye>=Ve.degToRad(180)?ye>=Ve.degToRad(220)?(We.rotation.x=Math.PI/2,We.rotation.z=Math.PI/2):(We.rotation.x=-Math.PI/2,We.rotation.z=Math.PI/2):(We.rotation.x=Math.PI/2,We.rotation.z=-Math.PI/2);break}We.geometry.computeBoundingSphere(),ut(We),lt()}else console.warn(`Keyart texture not preloaded for ${F.title}: ${le}`),lt()}else lt();ge.userData.portalLocation=Xe;{const Ge=(me,ie,q,E)=>{const j=new eo(se-1,se-1),Z={map:me,transparent:!0,opacity:0,blending:Vt,side:Wt,depthWrite:!1};E&&(Z.color=E);const he=new pt(Z),ve=new Be(j,he);ve.position.copy(ie),q.x&&(ve.rotation.x=q.x),q.y&&(ve.rotation.y=q.y),ve.userData.isGridPlane=!0,ve.geometry.computeBoundingSphere(),ut(ve)},Qe=c.get(t),st=c.get(o),Mt=["left","top","right","bottom"],Me=[le&&s.showKeyarts?_e||"left":null,Xe].filter(Boolean),Te=Mt.filter(me=>!Me.includes(me));if(Qe)switch(Ge(Qe,new De(0,0,-se/2-1),{y:0}),Ge(Qe,new De(0,0,se/2+1),{y:0},new It(16744448)),Te[0]){case"left":Ge(Qe,new De(-Pe,0,0),{y:-Math.PI/2},new It(255));break;case"top":Ge(Qe,new De(0,Pe,0),{x:Math.PI/2},new It(255));break;case"right":Ge(Qe,new De(Pe,0,0),{y:Math.PI/2},new It(255));break;case"bottom":Ge(Qe,new De(0,-Pe,0),{x:-Math.PI/2},new It(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(st)switch(Te[1]){case"left":Ge(st,new De(-Pe,0,0),{y:-Math.PI/2});break;case"top":Ge(st,new De(0,Pe,0),{x:Math.PI/2});break;case"right":Ge(st,new De(Pe,0,0),{y:Math.PI/2});break;case"bottom":Ge(st,new De(0,-Pe,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}ge.children.forEach(Ge=>{Ge.updateMatrixWorld(!0),Ge instanceof yt&&Ge.children.forEach(Qe=>{Qe.updateMatrixWorld(!0)})}),ge.updateMatrixWorld(!0);const Ie=new Vs().setFromObject(ge),bt=new Zs;return Ie.getBoundingSphere(bt),ge.boundingSphere=bt,ge},x=new Fr,H=(F,se,ae,ye,le)=>{if(!p.value){console.warn("Font not available; skipping text creation for:",F);const Ie=new ro,bt=new pt({visible:!1});return new Be(Ie,bt)}const _e=new as(F,{font:p.value,size:le,depth:0,curveSegments:12,bevelEnabled:!1});_e.computeBoundingBox(),_e.center();const be=new pt({color:16777215,transparent:!0,opacity:0,side:Wt}),ge=new Be(_e,be);ge.position.set(se,ae,ye);const Ae=_e.boundingBox,ce=Ae.max.x-Ae.min.x,de=Ae.max.y-Ae.min.y,Ee=ce+8,Xe=de+4,Pe=new eo(Ee,Xe),lt=new pt({color:0,transparent:!0,opacity:0,side:Wt}),ut=new Be(Pe,lt);return ut.position.set(se,ae,ye-1),f.add(ut),f.add(ge),ge.userData.backgroundPlane=ut,ge},W=()=>{const F=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let se=0;F.forEach((ae,ye)=>{const le=I-(ye+1)*z,_e=(ye+1)*M,be=B(ae,R,le,_e,ae.keyart,ae.keyartLocation,se);f.add(be),J.push(be),se++,H(ae.title,0,ae.size-15,I+90-(ye+1)*z,ae.size)})},D=()=>k?Promise.resolve({projectCubes:J,updateCubeColors:g,maxZ:b}):(W(),k=!0,Promise.resolve({projectCubes:J,updateCubeColors:g,maxZ:b})),_=F=>{if(F.userData.isAnimating)return;F.userData.isAnimating=!0;const se=F.children.find(be=>be instanceof yt);if(!se)return;const ae=se.children,ye=ae.length,le=ke.timeline({repeat:-1,defaults:{ease:"none"}}),_e={value:0};le.to(_e,{value:1,duration:1.5,onUpdate:()=>{ae.forEach(ge=>{const Ae=ge.material;if(Ae.visible){const ce=(ge.userData.index/ye+_e.value)%1,Ee=(Math.sin(ce*Math.PI*2)+1)/2;Ae.opacity=.01+(1-.01)*Math.pow(Ee,4)}})}}),F.userData.animationTimeline=le},N=F=>{if(!F.userData.isAnimating)return;F.userData.isAnimating=!1;const se=F.children.find(ae=>ae instanceof yt);se&&(F.userData.animationTimeline&&(F.userData.animationTimeline.kill(),delete F.userData.animationTimeline),se.children.forEach(ae=>{const ye=ae.material;ye.opacity=0}))},Q=(F,se)=>{let ae;const ye=(P.get(F)||0)+1;P.set(F,ye),ye%T===0?ae=new Gr($,re,12,1):ae=new Do(X,X,X);const le=new pt({color:16777215,transparent:!0,opacity:0}),_e=new Be(ae,le);_e.position.set(0,0,0);const be=se.position.clone(),ge=be.clone().normalize(),Ae=be.length()+fe;if(ye%T===0){const de=_e.position.clone().add(ge);_e.lookAt(de),_e.rotateX(Math.PI/2)}F.add(_e),ke.to(le,{opacity:.5,duration:we,ease:"power2.in",overwrite:"auto"});const ce=i.get(F)||[];ce.push({mesh:_e,direction:ge,distanceTraveled:0,totalDistance:Ae}),i.set(F,ce)},h=F=>{(i.get(F)||[]).forEach(ae=>{F.remove(ae.mesh),ae.mesh.geometry.dispose(),ae.mesh.material.dispose()}),i.set(F,[])},g=F=>{x.setFromProjectionMatrix(F.projectionMatrix.clone().multiply(F.matrixWorldInverse));const se=F.position.z;let ae=[];f.traverse(ye=>{var le;return ye instanceof Be&&((le=ye.geometry)==null?void 0:le.type)==="TextGeometry"&&!ye.userData.skipTextMeshes&&ae.push(ye)}),A||(A=!0),J.forEach((ye,le)=>{const _e=ye.boundingSphere;if(_e){const ce=_e.clone();if(ce.radius*=1.5,!x.intersectsSphere(ce))return}else console.warn(`Cube ${le} has no boundingSphere`);const be=ye.position.z,ge=Math.abs(se-be);let Ae=0;ge<=y&&(Ae=1-ge/y),ye.userData.isActive=Ae>=U,ye.children.forEach(ce=>{if(ce instanceof wt&&!ce.userData.isPortal&&!ce.userData.isPortalHitbox){const de=ce.material;if(ge<=y){const Ee=Ve.lerp((m>>16&255)/255,(C>>16&255)/255,Ae),Xe=Ve.lerp((m>>8&255)/255,(C>>8&255)/255,Ae),Pe=Ve.lerp((m&255)/255,(C&255)/255,Ae);de.color.set(Ee,Xe,Pe),de.opacity=Math.min(1,Ae*2)}else de.opacity=0}else if(ce instanceof wt&&ce.userData.isPortal)ce.children.forEach(de=>{if(de instanceof Be&&de.userData.isExploreText){const Ee=de.material;if(ge<=y){const Xe=1-ge/y;Ee.opacity=Math.min(1,Xe*2),de.visible=!0}else Ee.opacity=0,de.visible=!1}}),A&&(Ae>.1?ce.children.forEach(de=>{de instanceof yt&&de.children.forEach(Ee=>{Ee instanceof Be&&(Ee.material.visible=!0,!ce.userData.animationStarted&&s.showPortalPulses&&(_(ce),ce.userData.animationStarted=!0))})}):Ae<=.1&&ce.userData.animationStarted&&(ce.children.forEach(de=>{de instanceof yt&&de.children.forEach(Ee=>{Ee instanceof Be&&(Ee.material.visible=!1)})}),N(ce),delete ce.userData.animationStarted));else if(ce instanceof Be&&!ce.userData.isPortalHitbox&&!ce.userData.isCloseHitbox){const de=ce.material;if(ce.userData.isLoaded||ce.userData.isGridPlane)if(ge<=y){const Ee=1-ge/y;de.opacity=Math.min(.8,Ee*2),ce.visible=!0}else de.opacity=0,ce.visible=!1}else if(ce instanceof yt&&ce.userData.closeButton){const de=Math.abs(se-ce.position.z);ce.children.forEach(Ee=>{if(Ee instanceof Be&&!Ee.userData.isCloseHitbox){const Xe=Ee.material;if(de<=y){const Pe=1-de/y;Xe.opacity=Math.min(1,Pe*2)}else Xe.opacity=0}})}})}),ae.forEach(ye=>{if(!x.intersectsObject(ye))return;const le=ye.material,_e=ye.userData.backgroundPlane,be=_e==null?void 0:_e.material,ge=ye.position.z,Ae=Math.abs(se-ge+120);if(d){le.opacity=0,be&&(be.opacity=0);return}if(Ae<=y){const ce=1-Ae/y,de=Math.min(1,ce*2);le.opacity=de,be&&(be.opacity=de*.8)}else le.opacity=0,be&&(be.opacity=0)})},l=(F,se)=>{const ae=performance.now()/1e3,ye=F.position.z;J.forEach(le=>{const _e=le.position.z;if(Math.abs(ye-_e+90)<=y&&!d){const ge=r.get(le)||0;if(ae-ge>=v){const de=le.children.find(Ee=>Ee instanceof wt&&Ee.userData.isPortal);de&&(Q(le,de),r.set(le,ae))}const ce=(i.get(le)||[]).filter(de=>{if(de.distanceTraveled+=oe*se,de.mesh.position.copy(de.direction.clone().multiplyScalar(de.distanceTraveled)),(de.totalDistance-de.distanceTraveled)/oe<=we&&!de.isFadingOut){de.isFadingOut=!0;const Pe=de.mesh.material;ke.to(Pe,{opacity:0,duration:we,ease:"power2.out",overwrite:"auto"})}return de.distanceTraveled>=de.totalDistance?(le.remove(de.mesh),de.mesh.geometry.dispose(),de.mesh.material.dispose(),!1):!0});i.set(le,ce)}else h(le)})},ne=F=>{const se=[F,...F.children.filter(le=>le instanceof wt&&le.userData.isPortal)],ae=2,ye=.1;se.forEach((le,_e)=>{const be=le.material;be.opacity=le.userData.maxOpacity;const ge=ke.timeline({repeat:-1,delay:_e*ye});ge.to(be,{opacity:0,duration:ae/2,ease:"power2.inOut"}).to(be,{opacity:le.userData.maxOpacity,duration:ae/2,ease:"power2.inOut"}),le.userData.marqueeTimeline=ge})},pe=F=>{[F,...F.children.filter(ae=>ae instanceof wt&&ae.userData.isPortal)].forEach(ae=>{if(ae.userData.marqueeTimeline){ae.userData.marqueeTimeline.kill(),delete ae.userData.marqueeTimeline;const ye=ae.material;ye.opacity=ae.userData.maxOpacity}})};return{getInitializedData:D,updateCubeColors:g,setupInteractivity:(F,se,ae,ye)=>{u=ye;let le=null,_e=null,be=null,ge=!1,Ae=!1,ce=!1,de=!1,Ee=[],Xe=!1;f.traverse(Me=>{var Te;Me instanceof Be&&((Te=Me.geometry)==null?void 0:Te.type)==="TextGeometry"&&!Me.userData.skipTextMeshes&&Ee.push(Me)});const Pe=Me=>{d&&(le=Me.touches[0].clientY,_e=_e??window.scrollY,ge=!0)},lt=Me=>{if(!d||!be||!le)return;const me=Me.touches[0].clientY-le;me<-20&&!Ae?(bt(),le=null):me>20&&(Me.preventDefault(),window.scrollTo(0,_e),ke.to(window,{scrollTo:{y:_e},duration:0}))},ut=()=>{le=null,ge=!1,ce=!0,ke.delayedCall(.5,()=>{ce=!1})},Ie=Me=>{if(ge||Ae||ce){Me.preventDefault(),Me.stopPropagation(),_e!==null&&(window.scrollTo(0,_e),ke.to(window,{scrollTo:{y:_e},duration:0}));return}if(!d||!be||!ue||!Se)return;let Te=0;if(Me instanceof WheelEvent?Te=Me.deltaY:Te=window.scrollY-(_e||0),Me.preventDefault(),Me.stopPropagation(),Te>0){window.scrollTo(0,_e);return}Te<0&&bt()},bt=()=>{const Me=be,Te=Se?Se.clone():new De(0,0,b),me=(ue==null?void 0:ue.z)??F.position.z,ie=Me==null?void 0:Me.parent,q=Me?J.indexOf(ie):-1;de=!0,Me&&pe(Me);const E=F.userData.lockedLookAt?F.userData.lockedLookAt.clone():F.getWorldDirection(new De).multiplyScalar(1e3).add(F.position),j={progress:0};ke.to(F.position,{x:(ue==null?void 0:ue.x)??F.position.x,y:(ue==null?void 0:ue.y)??F.position.y,z:me,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const Z=Ee[q];if(q!==-1&&Z){const he=Ee[q];if(he){const ve=he.material,V=he.userData.backgroundPlane,Ce=Math.abs(F.position.z-he.position.z+120),Oe=Ce<=y?Math.min(1,(1-Ce/y)*2):0;ke.to(ve,{opacity:Oe,duration:.5,ease:"power2.in"}),V&&ke.to(V.material,{opacity:Oe*.8,duration:.5,ease:"power2.in"})}}if(ie!=null&&ie.userData.closeButton){const he=ie.userData.closeButton.position;ke.to(ie.userData.closeButton.rotation,{z:0,duration:.3,ease:"power2.inOut"}),ke.to(ie.userData.closeButton.position,{x:he.x+2,duration:.3,ease:"power2.inOut"});const ve=ie.userData.closeButton.children.filter(V=>V instanceof Be).map(V=>V.material);ke.to(ve,{opacity:0,duration:.5,onUpdate:()=>{},onComplete:()=>{ie.userData.closeButton.updateMatrixWorld(!0),ie.userData.closeButton.visible=!1,ie.userData.lockedPosition=null,Xe=!1}}),Me&&Ge(Me,!1)}},onUpdate:()=>{const Z=j.progress,he=Ve.lerp(E.x,Te.x,Z),ve=Ve.lerp(E.y,Te.y,Z),V=Ve.lerp(E.z,Te.z,Z);F.lookAt(he,ve,V),F.updateMatrixWorld(!0)},onComplete:()=>{F.lookAt(Te),d=!1,be=null,document.body.classList.remove("no-scrollbar"),u&&u(!1),Me&&pe(Me),_e=null,ue=null,Se=null,F.userData.lockedLookAt=null,de=!1,J.forEach(Z=>{Math.abs(F.position.z-Z.position.z+90)<=y&&r.set(Z,0)})}}),ke.to(j,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},Ge=(Me,Te=!0)=>{const me=[Me,...Me.children.filter(q=>q instanceof wt&&q.userData.isPortal)],ie=Te?25:2;me.forEach((q,E)=>{let j=-E*ie;(Me.position.y>0&&Me.rotation.x===-Math.PI/2||Me.position.y<0&&Me.rotation.x===Math.PI/2)&&(j=E*ie);const Z=Te?q.userData.maxOpacity:0;ke.to(q.position,{z:j,duration:1,ease:"power3.out",delay:.5,onComplete:()=>{Te&&E===0&&ne(Me)}}),ke.to(q.material,{opacity:Z,duration:1,ease:"power3.out",delay:.5})})},Qe=Me=>{var ie;a.x=Me.clientX/window.innerWidth*2-1,a.y=-(Me.clientY/window.innerHeight)*2+1,K.setFromCamera(a,F),F.userData.lockedLookAt&&(F.lookAt(F.userData.lockedLookAt),F.updateMatrixWorld(!0)),J.forEach(q=>{q.userData.lockedPosition&&(q.position.equals(q.userData.lockedPosition)||q.position.copy(q.userData.lockedPosition)),q.updateMatrixWorld(!0),q.children.forEach(E=>E.updateMatrixWorld(!0))});const Te=J.flatMap(q=>{const E=[];return!d&&q.userData.isActive&&q.children.forEach(j=>{j instanceof Be&&(j.userData.isPortalHitbox||j.userData.isExploreTextHitbox)&&E.push(j)}),d&&be&&q===be.parent&&q.children.forEach(j=>{j instanceof Be&&j.userData.isPortalHitbox&&E.push(j),j instanceof wt&&j.userData.isPortal&&j.children.forEach(Z=>{Z instanceof Be&&Z.userData.isExploreTextHitbox&&E.push(Z)}),j instanceof yt&&j===q.userData.closeButton&&j.children.forEach(Z=>{Z instanceof Be&&Z.userData.isCloseHitbox&&E.push(Z)})}),E}),me=K.intersectObjects(Te);if(me.length>0){const q=me[0].object;if(q.userData.isPortalHitbox||q.userData.isExploreTextHitbox){const E=q.userData.portal;Y!==E&&(Y&&[Y,...Y.children.filter(he=>he instanceof wt&&he.userData.isPortal)].forEach(he=>{const ve=he.material;ke.to(ve.color,{r:(m>>16&255)/255,g:(m>>8&255)/255,b:(m&255)/255,duration:.5})}),Y=E,[Y,...Y.children.filter(Z=>Z instanceof wt&&Z.userData.isPortal)].forEach(Z=>{const he=Z.material;ke.to(he.color,{r:(te>>16&255)/255,g:(te>>8&255)/255,b:(te&255)/255,duration:.5})})),se.style.cursor="pointer"}else if(q.userData.isCloseHitbox&&d){if(!Xe){Xe=!0;const E=q.parent;E.children.filter(Z=>Z instanceof Be&&!Z.userData.isCloseHitbox);const j=E.position;ke.to(E.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"}),ke.to(E.position,{x:j.x-2,duration:.3,ease:"power2.inOut"})}se.style.cursor="pointer"}else se.style.cursor="auto"}else{if(Y&&([Y,...Y.children.filter(E=>E instanceof wt&&E.userData.isPortal)].forEach(E=>{const j=E.material;ke.to(j.color,{r:(m>>16&255)/255,g:(m>>8&255)/255,b:(m&255)/255,duration:.5})}),Y=null),d&&be&&Xe){const q=(ie=be.parent)==null?void 0:ie.userData.closeButton,E=q.position;q&&(Xe=!1,ke.to(q.rotation,{z:0,duration:.3,ease:"power2.inOut"}),ke.to(q.position,{x:E.x+2,duration:.3,ease:"power2.inOut"}))}se.style.cursor="auto"}},st=Me=>{if(de)return;a.x=Me.clientX/window.innerWidth*2-1,a.y=-(Me.clientY/window.innerHeight)*2+1,K.setFromCamera(a,F);const Te=J.flatMap(ve=>{const V=[];return d&&be&&ve===be.parent&&ve.children.forEach(Ce=>{Ce instanceof yt&&Ce===ve.userData.closeButton&&Ce.children.forEach(Oe=>{Oe instanceof Be&&Oe.userData.isCloseHitbox&&V.push(Oe)})}),V}),me=J.flatMap(ve=>{const V=[];return!d&&ve.userData.isActive&&ve.children.forEach(Ce=>{Ce instanceof Be&&(Ce.userData.isPortalHitbox||Ce.userData.isExploreTextHitbox)&&V.push(Ce)}),d&&be&&ve===be.parent&&ve.children.forEach(Ce=>{Ce instanceof Be&&Ce.userData.isPortalHitbox&&V.push(Ce),Ce instanceof wt&&Ce.userData.isPortal&&Ce.children.forEach(Oe=>{Oe instanceof Be&&Oe.userData.isExploreTextHitbox&&V.push(Oe)})}),V});let ie=K.intersectObjects(Te);for(const ve of ie)if(ve.object.userData.isCloseHitbox){bt();return}if(ie=K.intersectObjects(me),ie.length===0)return;const E=ie[0].object.userData.portal,j=E.parent,Z=J.indexOf(j),he=n[Z];if(d&&E===be){let ve=new De;const V=e.CUBE_SIZE/2;E.position.x===V?ve.set(-1,0,0):E.position.x===-V?ve.set(1,0,0):E.position.y===V?ve.set(0,-1,0):E.position.y===-V&&ve.set(0,1,0),ve.applyQuaternion(j.getWorldQuaternion(new Ur)).normalize();const Oe=F.position.clone().clone().add(ve.clone().multiplyScalar(-675)),qe=ve.clone().multiplyScalar(-1e3),je=Oe.clone().add(qe);de=!0,ke.to(F.position,{x:Oe.x,y:Oe.y,z:Oe.z,duration:1,ease:"power2.in",onUpdate:()=>F.lookAt(je),onStart:()=>{ke.to(ae.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{he!=null&&he.slug&&(w.setScrollPosition(window.scrollY),vr.visit(route("project.show",{project:he.slug}),{preserveScroll:!1})),de=!1}})}else if(!d){ue||(ue=F.position.clone(),Se=new De(0,0,b)),u&&ye(!0,ue,Se);const ve=E.getWorldPosition(new De);Ae=!0,de=!0,_e=window.scrollY,ke.to(F.position,{x:0,y:0,z:j.getWorldPosition(new De).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{d=!0,be=E,document.body.classList.add("no-scrollbar"),Ge(E,!0),j.userData.lockedPosition=j.position.clone(),h(j);const V=Ee[Z];if(V){const Ce=V.material,Oe=V.userData.backgroundPlane;ke.to(Ce,{opacity:0,duration:.5,ease:"power2.out"}),Oe&&ke.to(Oe.material,{opacity:0,duration:.5,ease:"power2.out"})}},onComplete:()=>{if(j.userData.closeButton){j.userData.initialCloseGroupPosition&&j.userData.closeButton.position.copy(j.userData.initialCloseGroupPosition),j.userData.closeButton.visible=!0,j.userData.closeButton.updateMatrixWorld(!0),j.updateMatrixWorld(!0),j.userData.closeButton.updateMatrixWorld(!0);const V=j.userData.closeButton.children.filter(Ce=>Ce instanceof Be&&!Ce.userData.isCloseHitbox).map(Ce=>Ce.material);V.length>0&&ke.to(V,{opacity:1,duration:.5,onComplete:()=>{j.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),ke.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const V=this.progress(),Ce=F.getWorldDirection(new De).multiplyScalar(1e3).add(F.position),Oe=Ve.lerp(Ce.x,ve.x,V),qe=Ve.lerp(Ce.y,ve.y,V),je=Ve.lerp(Ce.z,ve.z,V);F.lookAt(Oe,qe,je)},onComplete:()=>{F.lookAt(ve.x,ve.y,ve.z),F.updateMatrixWorld(!0),Ae=!1,de=!1,F.userData.lockedLookAt=ve.clone()}})}};se.addEventListener("mousemove",Qe),se.addEventListener("click",st),se.addEventListener("touchstart",Pe,{passive:!0}),se.addEventListener("touchmove",lt,{passive:!1}),se.addEventListener("touchend",ut,{passive:!0}),window.addEventListener("wheel",Ie,{passive:!1}),window.addEventListener("scroll",Ie,{passive:!1});const Mt=()=>{i.forEach((Me,Te)=>{Me.forEach(me=>{Te.remove(me.mesh),me.mesh.geometry.dispose(),me.mesh.material.dispose()})}),i.clear(),r.clear(),P.clear()},We=()=>{se.removeEventListener("mousemove",Qe),se.removeEventListener("click",st),se.removeEventListener("touchstart",Pe),se.removeEventListener("touchmove",lt),se.removeEventListener("touchend",ut),window.removeEventListener("wheel",Ie),window.removeEventListener("scroll",Ie),be&&pe(be)};return()=>{We(),Mt()}},updateClickHereParticles:l}}function Di(f,e,n,t){const S=n-1e3,ee=Math.abs(-500-S),G=Math.ceil(ee/100),L=()=>{const K=new yt;let a=null,Y=null;const ue=[],Se=[],d=[],u=[],i=[];{const r=new Do(100,100,100),P=new jo(r),B=32*G,x=new Yr;x.copy(P),x.instanceCount=B;const H=new Ot({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),W=new Float32Array(B*3),D=new Float32Array(B*3),_=new Float32Array(B*3),N=32*100,Q=-3200/2+100/2,h=-500;for(let Ae=0;Ae<32;Ae++){const ce=X(Ae);for(let de=0;de<G;de++){const Ee=Ae*G+de,Xe=Q+Ae*100,Pe=h-de*100,lt=Ve.randFloat(100,300),ut=lt/100,Ie=-600+lt/2;W[Ee*3]=Xe,W[Ee*3+1]=Ie,W[Ee*3+2]=Pe,D[Ee*3]=1,D[Ee*3+1]=ut,D[Ee*3+2]=1,_[Ee*3]=ce,_[Ee*3+1]=ce,_[Ee*3+2]=ce}}x.setAttribute("instancePosition",new Hn(W,3)),x.setAttribute("instanceScale",new Hn(D,3)),x.setAttribute("color",new Hn(_,3)),H.onBeforeCompile=Ae=>{Ae.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${Ae.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new wt(x,H);const g=-3200/2,l=N/2,ne=-600,pe=-300,Ye=S,F=-500;x.boundingBox=new Vs(new De(g,ne,Ye),new De(l,pe,F));const se=(g+l)/2,ae=(ne+pe)/2,ye=(Ye+F)/2,le=l-g,_e=pe-ne,be=F-Ye,ge=Math.sqrt(le*le+_e*_e+be*be)/2;x.boundingSphere=new Zs(new De(se,ae,ye),ge),K.add(a)}{Y=new yt;const r=32*100/5,P=-3200/2;for(let x=0;x<6;x++){let W=P+x*r,D=-500;const _=[new De(W,-450,D)];let N=0;for(;D>S;){const Q=D===-500?Ve.randFloat(300,800):Math.min(Ve.randFloat(300,800),Math.abs(D-S));if(D-=Q,_.push(new De(W,-450,D)),N+=Q,D<=S){_[_.length-1].z=S;break}const h=Math.random()<.5?-1:1,g=Ve.randFloat(100,300);W+=h*g,_.push(new De(W,-450,D)),N+=g}Se.push({points:_,totalLength:N})}const B=new Do(4,4,4);for(let x=0;x<6;x++){const H=Se[x],W=H.totalLength,D=W/60;for(let _=0;_<60;_++){const N=new pt({color:16711680,fog:!0}),Q=new Be(B,N),h=_*D;let g=h;for(let l=0;l<H.points.length-1;l++){const ne=H.points[l],pe=H.points[l+1],Ye=ne.distanceTo(pe);if(g<=Ye){const F=g/Ye;Q.position.lerpVectors(ne,pe,F);break}g-=Ye}ue.push(Q),d.push(h),u.push(x),i.push(1),Y.add(Q)}for(let _=0;_<60;_++){const N=new pt({color:16777215,fog:!0}),Q=new Be(B,N),h=W-(_*D+D/2);let g=W-h;const l=[...H.points].reverse();for(let ne=0;ne<l.length-1;ne++){const pe=l[ne],Ye=l[ne+1],F=pe.distanceTo(Ye);if(g<=F){const se=g/F;Q.position.lerpVectors(pe,Ye,se);break}g-=F}ue.push(Q),d.push(h),u.push(x),i.push(-1),Y.add(Q)}}e.add(Y)}return e.add(K),{cityGroup:K,instancedLines:a,particleGroup:Y,particles:ue,paths:Se,particleDistances:d,particlePaths:u,particleDirections:i}},X=K=>{if(K<10)return .05+K*.10555555555555556;if(K>=22){const a=31-K,Y=(1-.05)/9;return .05+a*Y}return 1},{cityGroup:oe,instancedLines:v,particleGroup:fe,particles:T,paths:$,particleDistances:re,particlePaths:we,particleDirections:J}=L();return{cityGroup:oe,buildingLines:v?[v]:[],updateParticles:K=>{const a=100*K;for(let Y=0;Y<T.length;Y++){const ue=J[Y],Se=we[Y],d=$[Se],u=d.totalLength;re[Y]+=a*ue,ue===1?(re[Y]=re[Y]%u,re[Y]<0&&(re[Y]+=u)):re[Y]=(re[Y]+u)%u;const i=re[Y],r=ue===1?d.points:[...d.points].reverse();let P=ue===1?i:u-i;for(let B=0;B<r.length-1;B++){const x=r[B],H=r[B+1],W=x.distanceTo(H);if(P<=W){const D=P/W;T[Y].position.lerpVectors(x,H,D);break}P-=W}}},dispose:()=>{v&&(oe.remove(v),v.geometry.dispose(),v.material.dispose()),fe&&(e.remove(fe),fe.children.forEach(K=>{K.geometry.dispose(),K.material.dispose()})),e.remove(oe)}}}ke.registerPlugin(Le);function ki(f,e,n,t,o,s,c={},p,w){const{CUBE_SPACING:R,FIRST_CUBE_Z:z}=s,I=(t==null?void 0:t.length)||0,b=z-(I+1)*R;let m=!1;const C=Math.abs(b)+(I-1)*R;let M=ke.timeline();return M=ke.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${C}`,scrub:c.scrub||.5,pin:!0,onUpdate:U=>{if(!m){const te=U.progress,O=Ve.lerp(0,b,te);e.position.set(0,0,O),e.lookAt(0,0,b)}o(e)}}}),M.fromTo(e.position,{z:0},{z:b,duration:1,ease:"none"},0),{setReverting:U=>{m=U},timeline:M}}function Ri(f,e,n){const p=n-1e3,w=1e3,R=n,z=150,I=-500,b=n,m=new ro,C=new Float32Array(2e3*3),M=new Float32Array(2e3),y=new Float32Array(2e3);let U=0;for(;U<2e3;){const G=(Math.random()-.5)*4e3,L=(Math.random()-.5)*4e3,X=-1e3+Math.random()*(p- -1e3),oe=X>R&&Math.abs(G)<w&&Math.abs(L)<w,v=Math.abs(G)<z&&Math.abs(L)<z&&X>b&&X<I;if(!oe&&!v){const fe=U*3;C[fe]=G,C[fe+1]=L,C[fe+2]=X;const T=.1+Math.random()*(.7-.1);M[U]=T,y[U]=T,U++}}m.setAttribute("position",new xs(C,3)),m.setAttribute("opacity",new xs(y,1));const te=new po({uniforms:{color:{value:new It(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),O=new Wr(m,te);f.add(O);const S=m.attributes.opacity;for(let G=0;G<2e3;G++)ke.to({opacity:M[G]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){y[G]=this.targets()[0].opacity,S.needsUpdate=!0}});return{dispose:()=>{ke.killTweensOf(y),f.remove(O),m.dispose(),te.dispose()}}}function Oi(f,e){const t=e-1500,o=100,s=2,c=64,p=1e3,w=c*3,R=[4,4.5,5],z=6;let I,b,m,C,M,y;const U=[],te=[[],[],[]],O=[[],[],[]],S=[[],[],[]];let ee=[0,0,0];const G=()=>{const v=0-t,fe=[];for(let K=0;K<o;K++){const a=K/(o-1),Y=0-a*v,ue=a*5*2*Math.PI,Se=90*(.8+.2*Math.sin(ue*2)),d=new De(Se*Math.cos(ue),Se*Math.sin(ue),Y);(isNaN(d.x)||isNaN(d.y)||isNaN(d.z))&&console.error("NaN in chaserPath points",{t:a,z:Y,projectMaxZ:e}),fe.push(d)}I=new Fn(fe);const T=new ro().setFromPoints(I.getPoints(200));C=new Gn(T,new Ot({color:16711935,linewidth:2,visible:!1})),f.add(C);const $=[];for(let K=0;K<o;K++){const a=K/(o-1),Y=0-a*v,ue=a*3*2*Math.PI,Se=60*(.8+.2*Math.sin(ue*4)),d=new De(Se*Math.cos(ue),Se*Math.sin(ue),Y);(isNaN(d.x)||isNaN(d.y)||isNaN(d.z))&&console.error("NaN in chaserPath2 points",{t:a,z:Y,projectMaxZ:e}),$.push(d)}b=new Fn($);const re=new ro().setFromPoints(b.getPoints(200));M=new Gn(re,new Ot({color:65535,linewidth:2,visible:!1})),f.add(M);const we=[];for(let K=0;K<o;K++){const a=K/(o-1),Y=0-a*v,ue=a*7*2*Math.PI,Se=100,d=90,u=.1*Math.sin(ue),i=new De(Se*(1+u)*Math.cos(ue),d*(1-u)*Math.sin(ue),Y);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:a,z:Y,projectMaxZ:e}),we.push(i)}m=new Fn(we);const J=new ro().setFromPoints(m.getPoints(200));y=new Gn(J,new Ot({color:16776960,linewidth:2,visible:!1})),f.add(y);const k=[16711680,65280,255],A=new Do(s,s,s);A.attributes.color&&delete A.attributes.color;for(let K=0;K<3;K++){const a=new yt;a.opacity=1,a.renderOrder=1,U[K]=a,f.add(a);for(let Y=0;Y<w;Y++){const ue=new pt({color:k[K],transparent:!0,opacity:0,blending:Xr,fog:!0,depthWrite:!1}),Se=new Be(A,ue);Se.renderOrder=1,Se.visible=!1,a.add(Se),te[K][Y]=Se,O[K][Y]=0,S[K][Y]=!1}}},L=v=>{const fe=[I,b,m][v],T=fe.getLength(),$=S[v].filter(we=>we).length;if(w-$>=c){let we=0;for(let J=0;J<c;J++){const k=S[v].findIndex(d=>!d);if(k===-1){console.warn(`No available chasers for path ${v}, emitted ${we}/${c}`);break}const A=we/(c-1),K=.05+(1-.05)*Math.pow(A,3),a=new pt({color:[16711680,65280,255][v],transparent:!0,opacity:K,blending:Vt,fog:!0,depthWrite:!1});te[v][k].material=a,te[v][k].visible=!0;const Y=we*z;O[v][k]=Y,S[v][k]=!0;const ue=Y/T,Se=fe.getPointAt(ue);te[v][k].position.copy(Se),we++}}},X=v=>{const fe=performance.now()/1e3,T=[I,b,m];for(let $=0;$<3;$++){fe-ee[$]>=R[$]&&(L($),ee[$]=fe);const re=T[$],we=re.getLength(),J=p*v;for(let k=0;k<w;k++)if(S[$][k]){O[$][k]+=J;const A=O[$][k]/we;if(A>=1)te[$][k].visible=!1,S[$][k]=!1,O[$][k]=0;else{const K=re.getPointAt(A);te[$][k].position.copy(K)}}}};return G(),{chaserPath:I,chaserPath2:b,chaserPath3:m,updateChasers:X,dispose:()=>{f.remove(C),f.remove(M),f.remove(y),C.geometry.dispose(),C.material.dispose(),M.geometry.dispose(),M.material.dispose(),y.geometry.dispose(),y.material.dispose(),U.forEach(v=>{v.children.forEach(fe=>{fe.geometry.dispose(),fe.material.dispose()}),f.remove(v)})}}}class Li extends Ws{constructor(e){super(e)}load(e,n,t,o){const s=this,c=new Xs(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(p){const w=s.parse(JSON.parse(p));n&&n(w)},t,o)}parse(e){return new Ni(e)}}class Ni{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=Bi(e,n,this.data);for(let s=0,c=o.length;s<c;s++)t.push(...o[s].toShapes());return t}}function Bi(f,e,n){const t=Array.from(f),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,c=[];let p=0,w=0;for(let R=0;R<t.length;R++){const z=t[R];if(z===`
`)p=0,w-=s;else{const I=zi(z,o,p,w,n);p+=I.offsetX,c.push(I.path)}}return c}function zi(f,e,n,t,o){const s=o.glyphs[f]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+f+'" does not exists in font family '+o.familyName+".");return}const c=new to;let p,w,R,z,I,b,m,C;if(s.o){const M=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,U=M.length;y<U;)switch(M[y++]){case"m":p=M[y++]*e+n,w=M[y++]*e+t,c.moveTo(p,w);break;case"l":p=M[y++]*e+n,w=M[y++]*e+t,c.lineTo(p,w);break;case"q":R=M[y++]*e+n,z=M[y++]*e+t,I=M[y++]*e+n,b=M[y++]*e+t,c.quadraticCurveTo(I,b,R,z);break;case"b":R=M[y++]*e+n,z=M[y++]*e+t,I=M[y++]*e+n,b=M[y++]*e+t,m=M[y++]*e+n,C=M[y++]*e+t,c.bezierCurveTo(I,b,m,C,R,z);break}}return{offsetX:s.ha*e,path:c}}function Hi(f="/fonts/Poppins_Regular.json"){const e=$t(null),n=$t(0),t=$t(!1),o=()=>new Promise((c,p)=>{new Li().load(f,R=>{e.value=R,n.value=100,t.value=!0,c(R)},R=>{R.lengthComputable&&(n.value=R.loaded/R.total*100)},R=>{console.error("Error loading font:",R),n.value=100,t.value=!0,p(R)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const Fi={class:"preloader"},Gi={class:"progress-label"},Ui=ls({__name:"Preloader",props:{progress:{}},setup(f){return(e,n)=>(An(),Gs("div",Fi,[fo("div",Gi,Tr(Math.round(e.progress))+"%",1)]))}}),Yi=qs(Ui,[["__scopeId","data-v-e5eadefa"]]),zs=250,bn=500,zo=-500,qn=-520,Hs=-720,Fs=4e3,Wi=ls({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(f){ke.registerPlugin(Le);const e=f,n=js();n.projects=e.projects;const t=ei(),o={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},s=$t(null),c=$t(null),p=$t(!1),w=$t(0),R=$t(!1),z=$t(!0),I=new Map;let b,m,C,M,y,U,te,O=null,S=null,ee=null,G=null,L=null,X=[],oe=null,v=null,fe=0,T=null,$;const re=Hi("/fonts/Poppins_Regular.json"),we=()=>{const a=s.value?s.value.getBoundingClientRect().width:window.innerWidth,Y=window.innerHeight,ue=t.isMobile?.75:1,Se=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;C.setSize(a*ue,Y*ue),C.setPixelRatio(Se),M.setSize(a*ue,Y*ue),m.aspect=a/Y,m.updateProjectionMatrix(),C.domElement.style.width=`${a}px`,C.domElement.style.height=`${Y}px`},J=a=>I.has(a)?Promise.resolve(I.get(a)):new Promise((Y,ue)=>{new Qr().load(a,d=>{d.encoding=void 0,I.set(a,d),Y(d)},void 0,d=>ue(d))}),k=async()=>{b=new jr,b.background=new It(0),b.fog=new Vr(0,700,Fs),m=new Zr(t.isMobile?95:75,window.innerWidth/window.innerHeight,1,Fs+6e3),m.position.set(0,0,0),m.lookAt(0,0,1e3),C=new qr({antialias:!0}),t.isMobile?C.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):C.setPixelRatio(window.devicePixelRatio),C.toneMapping=$r,C.toneMappingExposure=1,C.outputEncoding=void 0,M=new Mi(C);const a=new Ci(b,m);if(M.addPass(a),t.isMobile?y=new bo(new Re(window.innerWidth,window.innerHeight),1,.1,0):y=new bo(new Re(window.innerWidth,window.innerHeight),1.6,.2,0),y.renderToScreen=!0,M.addPass(y),s.value)s.value.appendChild(C.domElement),C.domElement.style.opacity="0";else return;U=new on,U.dom.style.position="fixed",U.dom.style.top="0px",U.dom.style.left="0px",U.dom.style.zIndex="1000",document.body.appendChild(U.dom);const ue=e.projects.filter(u=>u.keyart).length+2+1;let Se=0;const d=()=>{Se++;const u=Se/ue*100,i=re.loadingProgress.value;w.value=(u+i/ue)/(1+1/ue),Se===ue&&re.isLoaded.value&&(p.value=!0)};re.initialize().catch(u=>{console.error("Font loading failed:",u),d()}).then(()=>d()),await J(e.projectGridFile).then(()=>d()).catch(()=>d()),await J(e.projectGridFile2).then(()=>d()).catch(()=>d());for(const u of e.projects)u.keyart?await J(u.keyart).then(()=>d()).catch(()=>d()):d();T=Ai(b,{CUBE_SIZE:zs,CUBE_SPACING:bn,FIRST_CUBE_Z:zo},e.projects,e.projectGridFile,e.projectGridFile2,o,I,re.font);try{if(await T.getInitializedData().then(({maxZ:u,updateCubeColors:i,projectCubes:r})=>{if($=u,$===void 0||isNaN($))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:P}=Ii(b,re.font,{CUBE_SIZE:zs,FIRST_CUBE_Z:zo},o);X=[...P,...r],oe=i}),o.showCars){const{cityGroup:u,updateParticles:i,dispose:r}=Di(b,b,$,o);te=i,L=r}if(o.showStarfield){const{dispose:u}=Ri(b,m,$);O=u}if(o.showChasers){const{dispose:u,updateChasers:i}=Oi(b,$);ee=u,G=i}we()}catch(u){console.error("Error initializing project cubes:",u),$=zo-(e.projects.length+1)*bn}},A=(a=0)=>{if(v=requestAnimationFrame(A),C&&M){const Y=(a-fe)/1e3;fe=a,te(Y),G&&G(Y),T!=null&&T.updateClickHereParticles&&T.updateClickHereParticles(m,Y);const ue=4e3,Se=1e3,d=Math.abs(m.position.z-$);m.far=Math.max(ue+Se,d),m.updateProjectionMatrix();const u=Hs-qn;let i=0;m.position.z>=qn?i=0:m.position.z<=Hs?i=1:i=(m.position.z-qn)/u,t.isMobile?y.strength=Ve.lerp(1.3,0,i):y.strength=Ve.lerp(1.6,.125,i),M.render()}U.update()};Pr(()=>{k().then(()=>{if(p.value){v=requestAnimationFrame(A);let a=null;const Y=T.getInitializedData().then(({projectCubes:Se})=>{Se.forEach(u=>{u.userData.isActive=!0});const d=zo-(e.projects.length-1)*bn;m.position.set(0,0,5e3),m.lookAt(0,0,d),m.updateProjectionMatrix(),oe(m),M.render(),X.length&&oe&&(a=ki(b,m,c,X,oe,{CUBE_SPACING:bn,FIRST_CUBE_Z:zo},{scrub:t.isMobile?3:1}).setReverting),C&&S===null&&(S=T.setupInteractivity(m,C.domElement,C,u=>{a&&a(u)})),window.scrollTo({top:0,behavior:"auto"})}),ue=()=>{Y.then(()=>{z.value=!1,m.position.set(0,0,5e3),m.updateProjectionMatrix(),ke.to(C.domElement,{opacity:1,duration:.5,ease:"power4.out"});const Se={z:5e3};ke.to(Se,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{m.position.z=Se.z,m.updateProjectionMatrix()},onComplete:()=>{m.position.z=0,R.value=!0}})})};ke.delayedCall(.5,ue)}}).catch(a=>{console.error("Initialization failed:",a)}),window.addEventListener("resize",K)}),Mr(()=>{v!==null&&cancelAnimationFrame(v),S&&S(),window.removeEventListener("resize",K),Le.getAll().forEach(a=>a.kill()),C.dispose(),M.dispose(),b.clear(),document.body.removeChild(U.dom),O&&O(),ee&&ee(),L&&L()});const K=()=>{we(),Le.refresh()};return(a,Y)=>(An(),Gs("section",{ref_key:"wrapper",ref:c,class:"wrapper"},[Ho(Sr,{name:"fade"},{default:Us(()=>[z.value?(An(),Ys(Yi,{key:0,progress:w.value},null,8,["progress"])):Cr("",!0)]),_:1}),fo("div",{ref_key:"tunnelWrapper",ref:s,class:"tunnel-wrapper"},null,512)],512))}}),Xi=qs(Wi,[["__scopeId","data-v-fbcd47ec"]]),ji={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Vi={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Zi={class:"overflow-hidden"},Ji=ls({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(f){return(e,n)=>(An(),Ys(ti,null,{default:Us(()=>[Ho(Er(Ir),{title:"Welcome"}),fo("div",ji,[fo("nav",Vi,[Ho(Kr)]),fo("div",Zi,[Ho(Xi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),n[0]||(n[0]=fo("div",{class:"flex justify-center items-center"},null,-1)),n[1]||(n[1]=fo("div",{class:"flex justify-center items-center"},null,-1)),Ho(Jr)])]),_:1}))}});export{Ji as default};
