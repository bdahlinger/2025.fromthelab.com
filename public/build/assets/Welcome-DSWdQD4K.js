import{J as ds,W as hs,I as en,e as tn,o as So,a as ir,t as gs,d as tr,x as ms,y as _s,b as kr,T as ws,w as vs,c as bs,f as ys,u as xs,m as Ts,F as Ss}from"./app-BqHHda8t.js";import{M as Le,O as Cs,B as yr,F as pn,S as ar,U as Yo,V as It,W as mo,H as _o,N as Ps,C as Ms,a as _t,b as Te,A as Ht,c as Mt,E as Es,d as Tt,e as yt,g as Ne,f as We,h as Qr,i as zr,j as Xt,k as Is,l as Ds,m as As,R as Rs,n as ks,P as rr,D as or,o as Nn,p as Fn,q as dn,Q as Bs,I as Os,r as Ro,s as hn,t as Ls,u as ko,v as Bo,w as Ns,x as Fs,y as zs,z as Us,J as Hs,K as Gs,T as Ys,L as Xs,G as Ws}from"./GlobalFooter-RkkaT7nb.js";import{_ as zn}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Un=ds("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(s,e){s.isMobile=e}},actions:{setActiveProject(s){this.activeProjectSlug=s},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(s){this.scrollPosition=s,console.log("Scroll position stored:",s)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function Zs(s,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Vs(s,e,o){return e&&Zs(s.prototype,e),s}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ot,wo,At,Qt,qt,xr,Hn,nr,Ur,Gn,Zt,Lt,Yn,Xn=function(){return ot||typeof window<"u"&&(ot=window.gsap)&&ot.registerPlugin&&ot},Wn=1,br=[],_e=[],Yt=[],Hr=Date.now,Xo=function(e,o){return o},js=function(){var e=Ur.core,o=e.bridge||{},t=e._scrollers,r=e._proxies;t.push.apply(t,_e),r.push.apply(r,Yt),_e=t,Yt=r,Xo=function(i,l){return o[i](l)}},Kt=function(e,o){return~Yt.indexOf(e)&&Yt[Yt.indexOf(e)+1][o]},Gr=function(e){return!!~Gn.indexOf(e)},gt=function(e,o,t,r,n){return e.addEventListener(o,t,{passive:r!==!1,capture:!!n})},ht=function(e,o,t,r){return e.removeEventListener(o,t,!!r)},ro="scrollLeft",oo="scrollTop",Wo=function(){return Zt&&Zt.isPressed||_e.cache++},Co=function(e,o){var t=function r(n){if(n||n===0){Wn&&(At.history.scrollRestoration="manual");var i=Zt&&Zt.isPressed;n=r.v=Math.round(n)||(Zt&&Zt.iOS?1:0),e(n),r.cacheID=_e.cache,i&&Xo("ss",n)}else(o||_e.cache!==r.cacheID||Xo("ref"))&&(r.cacheID=_e.cache,r.v=e());return r.v+r.offset};return t.offset=0,e&&t},bt={s:ro,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Co(function(s){return arguments.length?At.scrollTo(s,qe.sc()):At.pageXOffset||Qt[ro]||qt[ro]||xr[ro]||0})},qe={s:oo,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:bt,sc:Co(function(s){return arguments.length?At.scrollTo(bt.sc(),s):At.pageYOffset||Qt[oo]||qt[oo]||xr[oo]||0})},xt=function(e,o){return(o&&o._ctx&&o._ctx.selector||ot.utils.toArray)(e)[0]||(typeof e=="string"&&ot.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Jt=function(e,o){var t=o.s,r=o.sc;Gr(e)&&(e=Qt.scrollingElement||qt);var n=_e.indexOf(e),i=r===qe.sc?1:2;!~n&&(n=_e.push(e)-1),_e[n+i]||gt(e,"scroll",Wo);var l=_e[n+i],f=l||(_e[n+i]=Co(Kt(e,t),!0)||(Gr(e)?r:Co(function(w){return arguments.length?e[t]=w:e[t]})));return f.target=e,l||(f.smooth=ot.getProperty(e,"scrollBehavior")==="smooth"),f},Zo=function(e,o,t){var r=e,n=e,i=Hr(),l=i,f=o||50,w=Math.max(500,f*3),y=function(v,T){var _=Hr();T||_-i>f?(n=r,r=v,l=i,i=_):t?r+=v:r=n+(v-n)/(_-l)*(i-l)},d=function(){n=r=t?0:r,l=i=0},p=function(v){var T=l,_=n,q=Hr();return(v||v===0)&&v!==r&&y(v),i===l||q-l>w?0:(r+(t?_:-_))/((t?q:i)-T)*1e3};return{update:y,reset:d,getVelocity:p}},Dr=function(e,o){return o&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},gn=function(e){var o=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(o)>=Math.abs(t)?o:t},Zn=function(){Ur=ot.core.globals().ScrollTrigger,Ur&&Ur.core&&js()},Vn=function(e){return ot=e||Xn(),!wo&&ot&&typeof document<"u"&&document.body&&(At=window,Qt=document,qt=Qt.documentElement,xr=Qt.body,Gn=[At,Qt,qt,xr],ot.utils.clamp,Yn=ot.core.context||function(){},nr="onpointerenter"in xr?"pointer":"mouse",Hn=Ze.isTouch=At.matchMedia&&At.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in At||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Lt=Ze.eventTypes=("ontouchstart"in qt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in qt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Wn=0},500),Zn(),wo=1),wo};bt.op=qe;_e.cache=0;var Ze=function(){function s(o){this.init(o)}var e=s.prototype;return e.init=function(t){wo||Vn(ot)||console.warn("Please gsap.registerPlugin(Observer)"),Ur||Zn();var r=t.tolerance,n=t.dragMinimum,i=t.type,l=t.target,f=t.lineHeight,w=t.debounce,y=t.preventDefault,d=t.onStop,p=t.onStopDelay,u=t.ignore,v=t.wheelSpeed,T=t.event,_=t.onDragStart,q=t.onDragEnd,K=t.onDrag,re=t.onPress,C=t.onRelease,we=t.onRight,Y=t.onLeft,R=t.onUp,ve=t.onDown,j=t.onChangeX,g=t.onChangeY,N=t.onChange,m=t.onToggleX,L=t.onToggleY,$=t.onHover,fe=t.onHoverEnd,Ce=t.onMove,X=t.ignoreCheck,z=t.isNormalizer,M=t.onGestureStart,a=t.onGestureEnd,P=t.onWheel,W=t.onEnable,J=t.onDisable,se=t.onClick,Ie=t.scrollSpeed,ye=t.capture,Pe=t.allowClicks,S=t.lockAxis,E=t.onLockAxis;this.target=l=xt(l)||qt,this.vars=t,u&&(u=ot.utils.toArray(u)),r=r||1e-9,n=n||0,v=v||1,Ie=Ie||1,i=i||"wheel,touch,pointer",w=w!==!1,f||(f=parseFloat(At.getComputedStyle(xr).lineHeight)||22);var H,D,k,h,x,Q,F,c=this,U=0,Z=0,G=t.passive||!y&&t.passive!==!1,ne=Jt(l,bt),De=Jt(l,qe),Re=ne(),Ge=De(),Be=~i.indexOf("touch")&&!~i.indexOf("pointer")&&Lt[0]==="pointerdown",nt=Gr(l),b=l.ownerDocument||Qt,oe=[0,0,0],ce=[0,0,0],ie=0,B=function(){return ie=Hr()},A=function(ee,Me){return(c.event=ee)&&u&&~u.indexOf(ee.target)||Me&&Be&&ee.pointerType!=="touch"||X&&X(ee,Me)},Fe=function(){c._vx.reset(),c._vy.reset(),D.pause(),d&&d(c)},be=function(){var ee=c.deltaX=gn(oe),Me=c.deltaY=gn(ce),I=Math.abs(ee)>=r,ae=Math.abs(Me)>=r;N&&(I||ae)&&N(c,ee,Me,oe,ce),I&&(we&&c.deltaX>0&&we(c),Y&&c.deltaX<0&&Y(c),j&&j(c),m&&c.deltaX<0!=U<0&&m(c),U=c.deltaX,oe[0]=oe[1]=oe[2]=0),ae&&(ve&&c.deltaY>0&&ve(c),R&&c.deltaY<0&&R(c),g&&g(c),L&&c.deltaY<0!=Z<0&&L(c),Z=c.deltaY,ce[0]=ce[1]=ce[2]=0),(h||k)&&(Ce&&Ce(c),k&&(_&&k===1&&_(c),K&&K(c),k=0),h=!1),Q&&!(Q=!1)&&E&&E(c),x&&(P(c),x=!1),H=0},de=function(ee,Me,I){oe[I]+=ee,ce[I]+=Me,c._vx.update(ee),c._vy.update(Me),w?H||(H=requestAnimationFrame(be)):be()},he=function(ee,Me){S&&!F&&(c.axis=F=Math.abs(ee)>Math.abs(Me)?"x":"y",Q=!0),F!=="y"&&(oe[2]+=ee,c._vx.update(ee,!0)),F!=="x"&&(ce[2]+=Me,c._vy.update(Me,!0)),w?H||(H=requestAnimationFrame(be)):be()},Oe=function(ee){if(!A(ee,1)){ee=Dr(ee,y);var Me=ee.clientX,I=ee.clientY,ae=Me-c.x,V=I-c.y,le=c.isDragging;c.x=Me,c.y=I,(le||(ae||V)&&(Math.abs(c.startX-Me)>=n||Math.abs(c.startY-I)>=n))&&(k=le?2:1,le||(c.isDragging=!0),he(ae,V))}},Ye=c.onPress=function(ue){A(ue,1)||ue&&ue.button||(c.axis=F=null,D.pause(),c.isPressed=!0,ue=Dr(ue),U=Z=0,c.startX=c.x=ue.clientX,c.startY=c.y=ue.clientY,c._vx.reset(),c._vy.reset(),gt(z?l:b,Lt[1],Oe,G,!0),c.deltaX=c.deltaY=0,re&&re(c))},te=c.onRelease=function(ue){if(!A(ue,1)){ht(z?l:b,Lt[1],Oe,!0);var ee=!isNaN(c.y-c.startY),Me=c.isDragging,I=Me&&(Math.abs(c.x-c.startX)>3||Math.abs(c.y-c.startY)>3),ae=Dr(ue);!I&&ee&&(c._vx.reset(),c._vy.reset(),y&&Pe&&ot.delayedCall(.08,function(){if(Hr()-ie>300&&!ue.defaultPrevented){if(ue.target.click)ue.target.click();else if(b.createEvent){var V=b.createEvent("MouseEvents");V.initMouseEvent("click",!0,!0,At,1,ae.screenX,ae.screenY,ae.clientX,ae.clientY,!1,!1,!1,!1,0,null),ue.target.dispatchEvent(V)}}})),c.isDragging=c.isGesturing=c.isPressed=!1,d&&Me&&!z&&D.restart(!0),k&&be(),q&&Me&&q(c),C&&C(c,I)}},st=function(ee){return ee.touches&&ee.touches.length>1&&(c.isGesturing=!0)&&M(ee,c.isDragging)},Se=function(){return(c.isGesturing=!1)||a(c)},pt=function(ee){if(!A(ee)){var Me=ne(),I=De();de((Me-Re)*Ie,(I-Ge)*Ie,1),Re=Me,Ge=I,d&&D.restart(!0)}},Ve=function(ee){if(!A(ee)){ee=Dr(ee,y),P&&(x=!0);var Me=(ee.deltaMode===1?f:ee.deltaMode===2?At.innerHeight:1)*v;de(ee.deltaX*Me,ee.deltaY*Me,0),d&&!z&&D.restart(!0)}},St=function(ee){if(!A(ee)){var Me=ee.clientX,I=ee.clientY,ae=Me-c.x,V=I-c.y;c.x=Me,c.y=I,h=!0,d&&D.restart(!0),(ae||V)&&he(ae,V)}},jt=function(ee){c.event=ee,$(c)},dt=function(ee){c.event=ee,fe(c)},Pr=function(ee){return A(ee)||Dr(ee,y)&&se(c)};D=c._dc=ot.delayedCall(p||.25,Fe).pause(),c.deltaX=c.deltaY=0,c._vx=Zo(0,50,!0),c._vy=Zo(0,50,!0),c.scrollX=ne,c.scrollY=De,c.isDragging=c.isGesturing=c.isPressed=!1,Yn(this),c.enable=function(ue){return c.isEnabled||(gt(nt?b:l,"scroll",Wo),i.indexOf("scroll")>=0&&gt(nt?b:l,"scroll",pt,G,ye),i.indexOf("wheel")>=0&&gt(l,"wheel",Ve,G,ye),(i.indexOf("touch")>=0&&Hn||i.indexOf("pointer")>=0)&&(gt(l,Lt[0],Ye,G,ye),gt(b,Lt[2],te),gt(b,Lt[3],te),Pe&&gt(l,"click",B,!0,!0),se&&gt(l,"click",Pr),M&&gt(b,"gesturestart",st),a&&gt(b,"gestureend",Se),$&&gt(l,nr+"enter",jt),fe&&gt(l,nr+"leave",dt),Ce&&gt(l,nr+"move",St)),c.isEnabled=!0,c.isDragging=c.isGesturing=c.isPressed=h=k=!1,c._vx.reset(),c._vy.reset(),Re=ne(),Ge=De(),ue&&ue.type&&Ye(ue),W&&W(c)),c},c.disable=function(){c.isEnabled&&(br.filter(function(ue){return ue!==c&&Gr(ue.target)}).length||ht(nt?b:l,"scroll",Wo),c.isPressed&&(c._vx.reset(),c._vy.reset(),ht(z?l:b,Lt[1],Oe,!0)),ht(nt?b:l,"scroll",pt,ye),ht(l,"wheel",Ve,ye),ht(l,Lt[0],Ye,ye),ht(b,Lt[2],te),ht(b,Lt[3],te),ht(l,"click",B,!0),ht(l,"click",Pr),ht(b,"gesturestart",st),ht(b,"gestureend",Se),ht(l,nr+"enter",jt),ht(l,nr+"leave",dt),ht(l,nr+"move",St),c.isEnabled=c.isPressed=c.isDragging=!1,J&&J(c))},c.kill=c.revert=function(){c.disable();var ue=br.indexOf(c);ue>=0&&br.splice(ue,1),Zt===c&&(Zt=0)},br.push(c),z&&Gr(l)&&(Zt=c),c.enable(T)},Vs(s,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),s}();Ze.version="3.12.7";Ze.create=function(s){return new Ze(s)};Ze.register=Vn;Ze.getAll=function(){return br.slice()};Ze.getById=function(s){return br.filter(function(e){return e.vars.id===s})[0]};Xn()&&ot.registerPlugin(Ze);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var O,wr,me,ke,Dt,Ee,rn,Po,qr,Yr,Br,no,ct,Do,Vo,wt,mn,_n,vr,jn,Oo,$n,mt,jo,Qn,qn,$t,$o,on,Tr,nn,Mo,Qo,Lo,so=1,ut=Date.now,No=ut(),Bt=0,Or=0,wn=function(e,o,t){var r=Et(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+o+"Clamp"]=r,r?e.substr(6,e.length-7):e},vn=function(e,o){return o&&(!Et(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},$s=function s(){return Or&&requestAnimationFrame(s)},bn=function(){return Do=1},yn=function(){return Do=0},Ut=function(e){return e},Lr=function(e){return Math.round(e*1e5)/1e5||0},Kn=function(){return typeof window<"u"},Jn=function(){return O||Kn()&&(O=window.gsap)&&O.registerPlugin&&O},pr=function(e){return!!~rn.indexOf(e)},es=function(e){return(e==="Height"?nn:me["inner"+e])||Dt["client"+e]||Ee["client"+e]},ts=function(e){return Kt(e,"getBoundingClientRect")||(pr(e)?function(){return To.width=me.innerWidth,To.height=nn,To}:function(){return Wt(e)})},Qs=function(e,o,t){var r=t.d,n=t.d2,i=t.a;return(i=Kt(e,"getBoundingClientRect"))?function(){return i()[r]}:function(){return(o?es(n):e["client"+n])||0}},qs=function(e,o){return!o||~Yt.indexOf(e)?ts(e):function(){return To}},Gt=function(e,o){var t=o.s,r=o.d2,n=o.d,i=o.a;return Math.max(0,(t="scroll"+r)&&(i=Kt(e,t))?i()-ts(e)()[n]:pr(e)?(Dt[t]||Ee[t])-es(r):e[t]-e["offset"+r])},io=function(e,o){for(var t=0;t<vr.length;t+=3)(!o||~o.indexOf(vr[t+1]))&&e(vr[t],vr[t+1],vr[t+2])},Et=function(e){return typeof e=="string"},ft=function(e){return typeof e=="function"},Nr=function(e){return typeof e=="number"},sr=function(e){return typeof e=="object"},Ar=function(e,o,t){return e&&e.progress(o?0:1)&&t&&e.pause()},Fo=function(e,o){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return o(e)}):o(e);t&&t.totalTime&&(e.callbackAnimation=t)}},mr=Math.abs,rs="left",os="top",sn="right",an="bottom",cr="width",ur="height",Xr="Right",Wr="Left",Zr="Top",Vr="Bottom",je="padding",Rt="margin",Cr="Width",ln="Height",Qe="px",kt=function(e){return me.getComputedStyle(e)},Ks=function(e){var o=kt(e).position;e.style.position=o==="absolute"||o==="fixed"?o:"relative"},xn=function(e,o){for(var t in o)t in e||(e[t]=o[t]);return e},Wt=function(e,o){var t=o&&kt(e)[Vo]!=="matrix(1, 0, 0, 1, 0, 0)"&&O.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return t&&t.progress(0).kill(),r},Eo=function(e,o){var t=o.d2;return e["offset"+t]||e["client"+t]||0},ns=function(e){var o=[],t=e.labels,r=e.duration(),n;for(n in t)o.push(t[n]/r);return o},Js=function(e){return function(o){return O.utils.snap(ns(e),o)}},cn=function(e){var o=O.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(r,n){return r-n});return t?function(r,n,i){i===void 0&&(i=.001);var l;if(!n)return o(r);if(n>0){for(r-=i,l=0;l<t.length;l++)if(t[l]>=r)return t[l];return t[l-1]}else for(l=t.length,r+=i;l--;)if(t[l]<=r)return t[l];return t[0]}:function(r,n,i){i===void 0&&(i=.001);var l=o(r);return!n||Math.abs(l-r)<i||l-r<0==n<0?l:o(n<0?r-e:r+e)}},ei=function(e){return function(o,t){return cn(ns(e))(o,t.direction)}},ao=function(e,o,t,r){return t.split(",").forEach(function(n){return e(o,n,r)})},et=function(e,o,t,r,n){return e.addEventListener(o,t,{passive:!r,capture:!!n})},Je=function(e,o,t,r){return e.removeEventListener(o,t,!!r)},lo=function(e,o,t){t=t&&t.wheelHandler,t&&(e(o,"wheel",t),e(o,"touchmove",t))},Tn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},co={toggleActions:"play",anticipatePin:0},Io={top:0,left:0,center:.5,bottom:1,right:1},vo=function(e,o){if(Et(e)){var t=e.indexOf("="),r=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(r*=o/100),e=e.substr(0,t-1)),e=r+(e in Io?Io[e]*o:~e.indexOf("%")?parseFloat(e)*o/100:parseFloat(e)||0)}return e},uo=function(e,o,t,r,n,i,l,f){var w=n.startColor,y=n.endColor,d=n.fontSize,p=n.indent,u=n.fontWeight,v=ke.createElement("div"),T=pr(t)||Kt(t,"pinType")==="fixed",_=e.indexOf("scroller")!==-1,q=T?Ee:t,K=e.indexOf("start")!==-1,re=K?w:y,C="border-color:"+re+";font-size:"+d+";color:"+re+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return C+="position:"+((_||f)&&T?"fixed;":"absolute;"),(_||f||!T)&&(C+=(r===qe?sn:an)+":"+(i+parseFloat(p))+"px;"),l&&(C+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),v._isStart=K,v.setAttribute("class","gsap-marker-"+e+(o?" marker-"+o:"")),v.style.cssText=C,v.innerText=o||o===0?e+"-"+o:e,q.children[0]?q.insertBefore(v,q.children[0]):q.appendChild(v),v._offset=v["offset"+r.op.d2],bo(v,0,r,K),v},bo=function(e,o,t,r){var n={display:"block"},i=t[r?"os2":"p2"],l=t[r?"p2":"os2"];e._isFlipped=r,n[t.a+"Percent"]=r?-100:0,n[t.a]=r?"1px":0,n["border"+i+Cr]=1,n["border"+l+Cr]=0,n[t.p]=o+"px",O.set(e,n)},ge=[],qo={},Kr,Sn=function(){return ut()-Bt>34&&(Kr||(Kr=requestAnimationFrame(Vt)))},_r=function(){(!mt||!mt.isPressed||mt.startX>Ee.clientWidth)&&(_e.cache++,mt?Kr||(Kr=requestAnimationFrame(Vt)):Vt(),Bt||hr("scrollStart"),Bt=ut())},zo=function(){qn=me.innerWidth,Qn=me.innerHeight},Fr=function(e){_e.cache++,(e===!0||!ct&&!$n&&!ke.fullscreenElement&&!ke.webkitFullscreenElement&&(!jo||qn!==me.innerWidth||Math.abs(me.innerHeight-Qn)>me.innerHeight*.25))&&Po.restart(!0)},dr={},ti=[],ss=function s(){return Je(pe,"scrollEnd",s)||lr(!0)},hr=function(e){return dr[e]&&dr[e].map(function(o){return o()})||ti},Pt=[],is=function(e){for(var o=0;o<Pt.length;o+=5)(!e||Pt[o+4]&&Pt[o+4].query===e)&&(Pt[o].style.cssText=Pt[o+1],Pt[o].getBBox&&Pt[o].setAttribute("transform",Pt[o+2]||""),Pt[o+3].uncache=1)},un=function(e,o){var t;for(wt=0;wt<ge.length;wt++)t=ge[wt],t&&(!o||t._ctx===o)&&(e?t.kill(1):t.revert(!0,!0));Mo=!0,o&&is(o),o||hr("revert")},as=function(e,o){_e.cache++,(o||!vt)&&_e.forEach(function(t){return ft(t)&&t.cacheID++&&(t.rec=0)}),Et(e)&&(me.history.scrollRestoration=on=e)},vt,fr=0,Cn,ri=function(){if(Cn!==fr){var e=Cn=fr;requestAnimationFrame(function(){return e===fr&&lr(!0)})}},ls=function(){Ee.appendChild(Tr),nn=!mt&&Tr.offsetHeight||me.innerHeight,Ee.removeChild(Tr)},Pn=function(e){return qr(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(o){return o.style.display=e?"none":"block"})},lr=function(e,o){if(Dt=ke.documentElement,Ee=ke.body,rn=[me,ke,Dt,Ee],Bt&&!e&&!Mo){et(pe,"scrollEnd",ss);return}ls(),vt=pe.isRefreshing=!0,_e.forEach(function(r){return ft(r)&&++r.cacheID&&(r.rec=r())});var t=hr("refreshInit");jn&&pe.sort(),o||un(),_e.forEach(function(r){ft(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),ge.slice(0).forEach(function(r){return r.refresh()}),Mo=!1,ge.forEach(function(r){if(r._subPinOffset&&r.pin){var n=r.vars.horizontal?"offsetWidth":"offsetHeight",i=r.pin[n];r.revert(!0,1),r.adjustPinSpacing(r.pin[n]-i),r.refresh()}}),Qo=1,Pn(!0),ge.forEach(function(r){var n=Gt(r.scroller,r._dir),i=r.vars.end==="max"||r._endClamp&&r.end>n,l=r._startClamp&&r.start>=n;(i||l)&&r.setPositions(l?n-1:r.start,i?Math.max(l?n:r.start+1,n):r.end,!0)}),Pn(!1),Qo=0,t.forEach(function(r){return r&&r.render&&r.render(-1)}),_e.forEach(function(r){ft(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),as(on,1),Po.pause(),fr++,vt=2,Vt(2),ge.forEach(function(r){return ft(r.vars.onRefresh)&&r.vars.onRefresh(r)}),vt=pe.isRefreshing=!1,hr("refresh")},Ko=0,yo=1,jr,Vt=function(e){if(e===2||!vt&&!Mo){pe.isUpdating=!0,jr&&jr.update(0);var o=ge.length,t=ut(),r=t-No>=50,n=o&&ge[0].scroll();if(yo=Ko>n?-1:1,vt||(Ko=n),r&&(Bt&&!Do&&t-Bt>200&&(Bt=0,hr("scrollEnd")),Br=No,No=t),yo<0){for(wt=o;wt-- >0;)ge[wt]&&ge[wt].update(0,r);yo=1}else for(wt=0;wt<o;wt++)ge[wt]&&ge[wt].update(0,r);pe.isUpdating=!1}Kr=0},Jo=[rs,os,an,sn,Rt+Vr,Rt+Xr,Rt+Zr,Rt+Wr,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],xo=Jo.concat([cr,ur,"boxSizing","max"+Cr,"max"+ln,"position",Rt,je,je+Zr,je+Xr,je+Vr,je+Wr]),oi=function(e,o,t){Sr(t);var r=e._gsap;if(r.spacerIsNative)Sr(r.spacerState);else if(e._gsap.swappedIn){var n=o.parentNode;n&&(n.insertBefore(e,o),n.removeChild(o))}e._gsap.swappedIn=!1},Uo=function(e,o,t,r){if(!e._gsap.swappedIn){for(var n=Jo.length,i=o.style,l=e.style,f;n--;)f=Jo[n],i[f]=t[f];i.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(i.display="inline-block"),l[an]=l[sn]="auto",i.flexBasis=t.flexBasis||"auto",i.overflow="visible",i.boxSizing="border-box",i[cr]=Eo(e,bt)+Qe,i[ur]=Eo(e,qe)+Qe,i[je]=l[Rt]=l[os]=l[rs]="0",Sr(r),l[cr]=l["max"+Cr]=t[cr],l[ur]=l["max"+ln]=t[ur],l[je]=t[je],e.parentNode!==o&&(e.parentNode.insertBefore(o,e),o.appendChild(e)),e._gsap.swappedIn=!0}},ni=/([A-Z])/g,Sr=function(e){if(e){var o=e.t.style,t=e.length,r=0,n,i;for((e.t._gsap||O.core.getCache(e.t)).uncache=1;r<t;r+=2)i=e[r+1],n=e[r],i?o[n]=i:o[n]&&o.removeProperty(n.replace(ni,"-$1").toLowerCase())}},fo=function(e){for(var o=xo.length,t=e.style,r=[],n=0;n<o;n++)r.push(xo[n],t[xo[n]]);return r.t=e,r},si=function(e,o,t){for(var r=[],n=e.length,i=t?8:0,l;i<n;i+=2)l=e[i],r.push(l,l in o?o[l]:e[i+1]);return r.t=e.t,r},To={left:0,top:0},Mn=function(e,o,t,r,n,i,l,f,w,y,d,p,u,v){ft(e)&&(e=e(f)),Et(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?vo("0"+e.substr(3),t):0));var T=u?u.time():0,_,q,K;if(u&&u.seek(0),isNaN(e)||(e=+e),Nr(e))u&&(e=O.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,p,e)),l&&bo(l,t,r,!0);else{ft(o)&&(o=o(f));var re=(e||"0").split(" "),C,we,Y,R;K=xt(o,f)||Ee,C=Wt(K)||{},(!C||!C.left&&!C.top)&&kt(K).display==="none"&&(R=K.style.display,K.style.display="block",C=Wt(K),R?K.style.display=R:K.style.removeProperty("display")),we=vo(re[0],C[r.d]),Y=vo(re[1]||"0",t),e=C[r.p]-w[r.p]-y+we+n-Y,l&&bo(l,Y,r,t-Y<20||l._isStart&&Y>20),t-=t-Y}if(v&&(f[v]=e||-.001,e<0&&(e=0)),i){var ve=e+t,j=i._isStart;_="scroll"+r.d2,bo(i,ve,r,j&&ve>20||!j&&(d?Math.max(Ee[_],Dt[_]):i.parentNode[_])<=ve+1),d&&(w=Wt(l),d&&(i.style[r.op.p]=w[r.op.p]-r.op.m-i._offset+Qe))}return u&&K&&(_=Wt(K),u.seek(p),q=Wt(K),u._caScrollDist=_[r.p]-q[r.p],e=e/u._caScrollDist*p),u&&u.seek(T),u?e:Math.round(e)},ii=/(webkit|moz|length|cssText|inset)/i,En=function(e,o,t,r){if(e.parentNode!==o){var n=e.style,i,l;if(o===Ee){e._stOrig=n.cssText,l=kt(e);for(i in l)!+i&&!ii.test(i)&&l[i]&&typeof n[i]=="string"&&i!=="0"&&(n[i]=l[i]);n.top=t,n.left=r}else n.cssText=e._stOrig;O.core.getCache(e).uncache=1,o.appendChild(e)}},cs=function(e,o,t){var r=o,n=r;return function(i){var l=Math.round(e());return l!==r&&l!==n&&Math.abs(l-r)>3&&Math.abs(l-n)>3&&(i=l,t&&t()),n=r,r=Math.round(i),r}},po=function(e,o,t){var r={};r[o.p]="+="+t,O.set(e,r)},In=function(e,o){var t=Jt(e,o),r="_scroll"+o.p2,n=function i(l,f,w,y,d){var p=i.tween,u=f.onComplete,v={};w=w||t();var T=cs(t,w,function(){p.kill(),i.tween=0});return d=y&&d||0,y=y||l-w,p&&p.kill(),f[r]=l,f.inherit=!1,f.modifiers=v,v[r]=function(){return T(w+y*p.ratio+d*p.ratio*p.ratio)},f.onUpdate=function(){_e.cache++,i.tween&&Vt()},f.onComplete=function(){i.tween=0,u&&u.call(p)},p=i.tween=O.to(e,f),p};return e[r]=t,t.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},et(e,"wheel",t.wheelHandler),pe.isTouch&&et(e,"touchmove",t.wheelHandler),n},pe=function(){function s(o,t){wr||s.register(O)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),$o(this),this.init(o,t)}var e=s.prototype;return e.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Or){this.update=this.refresh=this.kill=Ut;return}t=xn(Et(t)||Nr(t)||t.nodeType?{trigger:t}:t,co);var n=t,i=n.onUpdate,l=n.toggleClass,f=n.id,w=n.onToggle,y=n.onRefresh,d=n.scrub,p=n.trigger,u=n.pin,v=n.pinSpacing,T=n.invalidateOnRefresh,_=n.anticipatePin,q=n.onScrubComplete,K=n.onSnapComplete,re=n.once,C=n.snap,we=n.pinReparent,Y=n.pinSpacer,R=n.containerAnimation,ve=n.fastScrollEnd,j=n.preventOverlaps,g=t.horizontal||t.containerAnimation&&t.horizontal!==!1?bt:qe,N=!d&&d!==0,m=xt(t.scroller||me),L=O.core.getCache(m),$=pr(m),fe=("pinType"in t?t.pinType:Kt(m,"pinType")||$&&"fixed")==="fixed",Ce=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],X=N&&t.toggleActions.split(" "),z="markers"in t?t.markers:co.markers,M=$?0:parseFloat(kt(m)["border"+g.p2+Cr])||0,a=this,P=t.onRefreshInit&&function(){return t.onRefreshInit(a)},W=Qs(m,$,g),J=qs(m,$),se=0,Ie=0,ye=0,Pe=Jt(m,g),S,E,H,D,k,h,x,Q,F,c,U,Z,G,ne,De,Re,Ge,Be,nt,b,oe,ce,ie,B,A,Fe,be,de,he,Oe,Ye,te,st,Se,pt,Ve,St,jt,dt;if(a._startClamp=a._endClamp=!1,a._dir=g,_*=45,a.scroller=m,a.scroll=R?R.time.bind(R):Pe,D=Pe(),a.vars=t,r=r||t.animation,"refreshPriority"in t&&(jn=1,t.refreshPriority===-9999&&(jr=a)),L.tweenScroll=L.tweenScroll||{top:In(m,qe),left:In(m,bt)},a.tweenTo=S=L.tweenScroll[g.p],a.scrubDuration=function(I){st=Nr(I)&&I,st?te?te.duration(I):te=O.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:st,paused:!0,onComplete:function(){return q&&q(a)}}):(te&&te.progress(1).kill(),te=0)},r&&(r.vars.lazy=!1,r._initted&&!a.isReverted||r.vars.immediateRender!==!1&&t.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),a.animation=r.pause(),r.scrollTrigger=a,a.scrubDuration(d),Oe=0,f||(f=r.vars.id)),C&&((!sr(C)||C.push)&&(C={snapTo:C}),"scrollBehavior"in Ee.style&&O.set($?[Ee,Dt]:m,{scrollBehavior:"auto"}),_e.forEach(function(I){return ft(I)&&I.target===($?ke.scrollingElement||Dt:m)&&(I.smooth=!1)}),H=ft(C.snapTo)?C.snapTo:C.snapTo==="labels"?Js(r):C.snapTo==="labelsDirectional"?ei(r):C.directional!==!1?function(I,ae){return cn(C.snapTo)(I,ut()-Ie<500?0:ae.direction)}:O.utils.snap(C.snapTo),Se=C.duration||{min:.1,max:2},Se=sr(Se)?Yr(Se.min,Se.max):Yr(Se,Se),pt=O.delayedCall(C.delay||st/2||.1,function(){var I=Pe(),ae=ut()-Ie<500,V=S.tween;if((ae||Math.abs(a.getVelocity())<10)&&!V&&!Do&&se!==I){var le=(I-h)/ne,Ke=r&&!N?r.totalProgress():le,xe=ae?0:(Ke-Ye)/(ut()-Br)*1e3||0,Xe=O.utils.clamp(-le,1-le,mr(xe/2)*xe/.185),it=le+(C.inertia===!1?0:Xe),He,ze,Ae=C,Ot=Ae.onStart,Ue=Ae.onInterrupt,Ct=Ae.onComplete;if(He=H(it,a),Nr(He)||(He=it),ze=Math.max(0,Math.round(h+He*ne)),I<=x&&I>=h&&ze!==I){if(V&&!V._initted&&V.data<=mr(ze-I))return;C.inertia===!1&&(Xe=He-le),S(ze,{duration:Se(mr(Math.max(mr(it-Ke),mr(He-Ke))*.185/xe/.05||0)),ease:C.ease||"power3",data:mr(ze-I),onInterrupt:function(){return pt.restart(!0)&&Ue&&Ue(a)},onComplete:function(){a.update(),se=Pe(),r&&!N&&(te?te.resetTo("totalProgress",He,r._tTime/r._tDur):r.progress(He)),Oe=Ye=r&&!N?r.totalProgress():a.progress,K&&K(a),Ct&&Ct(a)}},I,Xe*ne,ze-I-Xe*ne),Ot&&Ot(a,S.tween)}}else a.isActive&&se!==I&&pt.restart(!0)}).pause()),f&&(qo[f]=a),p=a.trigger=xt(p||u!==!0&&u),dt=p&&p._gsap&&p._gsap.stRevert,dt&&(dt=dt(a)),u=u===!0?p:xt(u),Et(l)&&(l={targets:p,className:l}),u&&(v===!1||v===Rt||(v=!v&&u.parentNode&&u.parentNode.style&&kt(u.parentNode).display==="flex"?!1:je),a.pin=u,E=O.core.getCache(u),E.spacer?De=E.pinState:(Y&&(Y=xt(Y),Y&&!Y.nodeType&&(Y=Y.current||Y.nativeElement),E.spacerIsNative=!!Y,Y&&(E.spacerState=fo(Y))),E.spacer=Be=Y||ke.createElement("div"),Be.classList.add("pin-spacer"),f&&Be.classList.add("pin-spacer-"+f),E.pinState=De=fo(u)),t.force3D!==!1&&O.set(u,{force3D:!0}),a.spacer=Be=E.spacer,he=kt(u),B=he[v+g.os2],b=O.getProperty(u),oe=O.quickSetter(u,g.a,Qe),Uo(u,Be,he),Ge=fo(u)),z){Z=sr(z)?xn(z,Tn):Tn,c=uo("scroller-start",f,m,g,Z,0),U=uo("scroller-end",f,m,g,Z,0,c),nt=c["offset"+g.op.d2];var Pr=xt(Kt(m,"content")||m);Q=this.markerStart=uo("start",f,Pr,g,Z,nt,0,R),F=this.markerEnd=uo("end",f,Pr,g,Z,nt,0,R),R&&(jt=O.quickSetter([Q,F],g.a,Qe)),!fe&&!(Yt.length&&Kt(m,"fixedMarkers")===!0)&&(Ks($?Ee:m),O.set([c,U],{force3D:!0}),Fe=O.quickSetter(c,g.a,Qe),de=O.quickSetter(U,g.a,Qe))}if(R){var ue=R.vars.onUpdate,ee=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){a.update(0,0,1),ue&&ue.apply(R,ee||[])})}if(a.previous=function(){return ge[ge.indexOf(a)-1]},a.next=function(){return ge[ge.indexOf(a)+1]},a.revert=function(I,ae){if(!ae)return a.kill(!0);var V=I!==!1||!a.enabled,le=ct;V!==a.isReverted&&(V&&(Ve=Math.max(Pe(),a.scroll.rec||0),ye=a.progress,St=r&&r.progress()),Q&&[Q,F,c,U].forEach(function(Ke){return Ke.style.display=V?"none":"block"}),V&&(ct=a,a.update(V)),u&&(!we||!a.isActive)&&(V?oi(u,Be,De):Uo(u,Be,kt(u),A)),V||a.update(V),ct=le,a.isReverted=V)},a.refresh=function(I,ae,V,le){if(!((ct||!a.enabled)&&!ae)){if(u&&I&&Bt){et(s,"scrollEnd",ss);return}!vt&&P&&P(a),ct=a,S.tween&&!V&&(S.tween.kill(),S.tween=0),te&&te.pause(),T&&r&&r.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var Ke=W(),xe=J(),Xe=R?R.duration():Gt(m,g),it=ne<=.01,He=0,ze=le||0,Ae=sr(V)?V.end:t.end,Ot=t.endTrigger||p,Ue=sr(V)?V.start:t.start||(t.start===0||!p?0:u?"0 0":"0 100%"),Ct=a.pinnedContainer=t.pinnedContainer&&xt(t.pinnedContainer,a),Nt=p&&Math.max(0,ge.indexOf(a))||0,tt=Nt,rt,at,er,eo,lt,$e,Ft,Ao,fn,Mr,zt,Er,to;for(z&&sr(V)&&(Er=O.getProperty(c,g.p),to=O.getProperty(U,g.p));tt-- >0;)$e=ge[tt],$e.end||$e.refresh(0,1)||(ct=a),Ft=$e.pin,Ft&&(Ft===p||Ft===u||Ft===Ct)&&!$e.isReverted&&(Mr||(Mr=[]),Mr.unshift($e),$e.revert(!0,!0)),$e!==ge[tt]&&(Nt--,tt--);for(ft(Ue)&&(Ue=Ue(a)),Ue=wn(Ue,"start",a),h=Mn(Ue,p,Ke,g,Pe(),Q,c,a,xe,M,fe,Xe,R,a._startClamp&&"_startClamp")||(u?-.001:0),ft(Ae)&&(Ae=Ae(a)),Et(Ae)&&!Ae.indexOf("+=")&&(~Ae.indexOf(" ")?Ae=(Et(Ue)?Ue.split(" ")[0]:"")+Ae:(He=vo(Ae.substr(2),Ke),Ae=Et(Ue)?Ue:(R?O.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,h):h)+He,Ot=p)),Ae=wn(Ae,"end",a),x=Math.max(h,Mn(Ae||(Ot?"100% 0":Xe),Ot,Ke,g,Pe()+He,F,U,a,xe,M,fe,Xe,R,a._endClamp&&"_endClamp"))||-.001,He=0,tt=Nt;tt--;)$e=ge[tt],Ft=$e.pin,Ft&&$e.start-$e._pinPush<=h&&!R&&$e.end>0&&(rt=$e.end-(a._startClamp?Math.max(0,$e.start):$e.start),(Ft===p&&$e.start-$e._pinPush<h||Ft===Ct)&&isNaN(Ue)&&(He+=rt*(1-$e.progress)),Ft===u&&(ze+=rt));if(h+=He,x+=He,a._startClamp&&(a._startClamp+=He),a._endClamp&&!vt&&(a._endClamp=x||-.001,x=Math.min(x,Gt(m,g))),ne=x-h||(h-=.01)&&.001,it&&(ye=O.utils.clamp(0,1,O.utils.normalize(h,x,Ve))),a._pinPush=ze,Q&&He&&(rt={},rt[g.a]="+="+He,Ct&&(rt[g.p]="-="+Pe()),O.set([Q,F],rt)),u&&!(Qo&&a.end>=Gt(m,g)))rt=kt(u),eo=g===qe,er=Pe(),ce=parseFloat(b(g.a))+ze,!Xe&&x>1&&(zt=($?ke.scrollingElement||Dt:m).style,zt={style:zt,value:zt["overflow"+g.a.toUpperCase()]},$&&kt(Ee)["overflow"+g.a.toUpperCase()]!=="scroll"&&(zt.style["overflow"+g.a.toUpperCase()]="scroll")),Uo(u,Be,rt),Ge=fo(u),at=Wt(u,!0),Ao=fe&&Jt(m,eo?bt:qe)(),v?(A=[v+g.os2,ne+ze+Qe],A.t=Be,tt=v===je?Eo(u,g)+ne+ze:0,tt&&(A.push(g.d,tt+Qe),Be.style.flexBasis!=="auto"&&(Be.style.flexBasis=tt+Qe)),Sr(A),Ct&&ge.forEach(function(Ir){Ir.pin===Ct&&Ir.vars.pinSpacing!==!1&&(Ir._subPinOffset=!0)}),fe&&Pe(Ve)):(tt=Eo(u,g),tt&&Be.style.flexBasis!=="auto"&&(Be.style.flexBasis=tt+Qe)),fe&&(lt={top:at.top+(eo?er-h:Ao)+Qe,left:at.left+(eo?Ao:er-h)+Qe,boxSizing:"border-box",position:"fixed"},lt[cr]=lt["max"+Cr]=Math.ceil(at.width)+Qe,lt[ur]=lt["max"+ln]=Math.ceil(at.height)+Qe,lt[Rt]=lt[Rt+Zr]=lt[Rt+Xr]=lt[Rt+Vr]=lt[Rt+Wr]="0",lt[je]=rt[je],lt[je+Zr]=rt[je+Zr],lt[je+Xr]=rt[je+Xr],lt[je+Vr]=rt[je+Vr],lt[je+Wr]=rt[je+Wr],Re=si(De,lt,we),vt&&Pe(0)),r?(fn=r._initted,Oo(1),r.render(r.duration(),!0,!0),ie=b(g.a)-ce+ne+ze,be=Math.abs(ne-ie)>1,fe&&be&&Re.splice(Re.length-2,2),r.render(0,!0,!0),fn||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),Oo(0)):ie=ne,zt&&(zt.value?zt.style["overflow"+g.a.toUpperCase()]=zt.value:zt.style.removeProperty("overflow-"+g.a));else if(p&&Pe()&&!R)for(at=p.parentNode;at&&at!==Ee;)at._pinOffset&&(h-=at._pinOffset,x-=at._pinOffset),at=at.parentNode;Mr&&Mr.forEach(function(Ir){return Ir.revert(!1,!0)}),a.start=h,a.end=x,D=k=vt?Ve:Pe(),!R&&!vt&&(D<Ve&&Pe(Ve),a.scroll.rec=0),a.revert(!1,!0),Ie=ut(),pt&&(se=-1,pt.restart(!0)),ct=0,r&&N&&(r._initted||St)&&r.progress()!==St&&r.progress(St||0,!0).render(r.time(),!0,!0),(it||ye!==a.progress||R||T||r&&!r._initted)&&(r&&!N&&r.totalProgress(R&&h<-.001&&!ye?O.utils.normalize(h,x,0):ye,!0),a.progress=it||(D-h)/ne===ye?0:ye),u&&v&&(Be._pinOffset=Math.round(a.progress*ie)),te&&te.invalidate(),isNaN(Er)||(Er-=O.getProperty(c,g.p),to-=O.getProperty(U,g.p),po(c,g,Er),po(Q,g,Er-(le||0)),po(U,g,to),po(F,g,to-(le||0))),it&&!vt&&a.update(),y&&!vt&&!G&&(G=!0,y(a),G=!1)}},a.getVelocity=function(){return(Pe()-k)/(ut()-Br)*1e3||0},a.endAnimation=function(){Ar(a.callbackAnimation),r&&(te?te.progress(1):r.paused()?N||Ar(r,a.direction<0,1):Ar(r,r.reversed()))},a.labelToScroll=function(I){return r&&r.labels&&(h||a.refresh()||h)+r.labels[I]/r.duration()*ne||0},a.getTrailing=function(I){var ae=ge.indexOf(a),V=a.direction>0?ge.slice(0,ae).reverse():ge.slice(ae+1);return(Et(I)?V.filter(function(le){return le.vars.preventOverlaps===I}):V).filter(function(le){return a.direction>0?le.end<=h:le.start>=x})},a.update=function(I,ae,V){if(!(R&&!V&&!I)){var le=vt===!0?Ve:a.scroll(),Ke=I?0:(le-h)/ne,xe=Ke<0?0:Ke>1?1:Ke||0,Xe=a.progress,it,He,ze,Ae,Ot,Ue,Ct,Nt;if(ae&&(k=D,D=R?Pe():le,C&&(Ye=Oe,Oe=r&&!N?r.totalProgress():xe)),_&&u&&!ct&&!so&&Bt&&(!xe&&h<le+(le-k)/(ut()-Br)*_?xe=1e-4:xe===1&&x>le+(le-k)/(ut()-Br)*_&&(xe=.9999)),xe!==Xe&&a.enabled){if(it=a.isActive=!!xe&&xe<1,He=!!Xe&&Xe<1,Ue=it!==He,Ot=Ue||!!xe!=!!Xe,a.direction=xe>Xe?1:-1,a.progress=xe,Ot&&!ct&&(ze=xe&&!Xe?0:xe===1?1:Xe===1?2:3,N&&(Ae=!Ue&&X[ze+1]!=="none"&&X[ze+1]||X[ze],Nt=r&&(Ae==="complete"||Ae==="reset"||Ae in r))),j&&(Ue||Nt)&&(Nt||d||!r)&&(ft(j)?j(a):a.getTrailing(j).forEach(function(er){return er.endAnimation()})),N||(te&&!ct&&!so?(te._dp._time-te._start!==te._time&&te.render(te._dp._time-te._start),te.resetTo?te.resetTo("totalProgress",xe,r._tTime/r._tDur):(te.vars.totalProgress=xe,te.invalidate().restart())):r&&r.totalProgress(xe,!!(ct&&(Ie||I)))),u){if(I&&v&&(Be.style[v+g.os2]=B),!fe)oe(Lr(ce+ie*xe));else if(Ot){if(Ct=!I&&xe>Xe&&x+1>le&&le+1>=Gt(m,g),we)if(!I&&(it||Ct)){var tt=Wt(u,!0),rt=le-h;En(u,Ee,tt.top+(g===qe?rt:0)+Qe,tt.left+(g===qe?0:rt)+Qe)}else En(u,Be);Sr(it||Ct?Re:Ge),be&&xe<1&&it||oe(ce+(xe===1&&!Ct?ie:0))}}C&&!S.tween&&!ct&&!so&&pt.restart(!0),l&&(Ue||re&&xe&&(xe<1||!Lo))&&qr(l.targets).forEach(function(er){return er.classList[it||re?"add":"remove"](l.className)}),i&&!N&&!I&&i(a),Ot&&!ct?(N&&(Nt&&(Ae==="complete"?r.pause().totalProgress(1):Ae==="reset"?r.restart(!0).pause():Ae==="restart"?r.restart(!0):r[Ae]()),i&&i(a)),(Ue||!Lo)&&(w&&Ue&&Fo(a,w),Ce[ze]&&Fo(a,Ce[ze]),re&&(xe===1?a.kill(!1,1):Ce[ze]=0),Ue||(ze=xe===1?1:3,Ce[ze]&&Fo(a,Ce[ze]))),ve&&!it&&Math.abs(a.getVelocity())>(Nr(ve)?ve:2500)&&(Ar(a.callbackAnimation),te?te.progress(1):Ar(r,Ae==="reverse"?1:!xe,1))):N&&i&&!ct&&i(a)}if(de){var at=R?le/R.duration()*(R._caScrollDist||0):le;Fe(at+(c._isFlipped?1:0)),de(at)}jt&&jt(-le/R.duration()*(R._caScrollDist||0))}},a.enable=function(I,ae){a.enabled||(a.enabled=!0,et(m,"resize",Fr),$||et(m,"scroll",_r),P&&et(s,"refreshInit",P),I!==!1&&(a.progress=ye=0,D=k=se=Pe()),ae!==!1&&a.refresh())},a.getTween=function(I){return I&&S?S.tween:te},a.setPositions=function(I,ae,V,le){if(R){var Ke=R.scrollTrigger,xe=R.duration(),Xe=Ke.end-Ke.start;I=Ke.start+Xe*I/xe,ae=Ke.start+Xe*ae/xe}a.refresh(!1,!1,{start:vn(I,V&&!!a._startClamp),end:vn(ae,V&&!!a._endClamp)},le),a.update()},a.adjustPinSpacing=function(I){if(A&&I){var ae=A.indexOf(g.d)+1;A[ae]=parseFloat(A[ae])+I+Qe,A[1]=parseFloat(A[1])+I+Qe,Sr(A)}},a.disable=function(I,ae){if(a.enabled&&(I!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,ae||te&&te.pause(),Ve=0,E&&(E.uncache=1),P&&Je(s,"refreshInit",P),pt&&(pt.pause(),S.tween&&S.tween.kill()&&(S.tween=0)),!$)){for(var V=ge.length;V--;)if(ge[V].scroller===m&&ge[V]!==a)return;Je(m,"resize",Fr),$||Je(m,"scroll",_r)}},a.kill=function(I,ae){a.disable(I,ae),te&&!ae&&te.kill(),f&&delete qo[f];var V=ge.indexOf(a);V>=0&&ge.splice(V,1),V===wt&&yo>0&&wt--,V=0,ge.forEach(function(le){return le.scroller===a.scroller&&(V=1)}),V||vt||(a.scroll.rec=0),r&&(r.scrollTrigger=null,I&&r.revert({kill:!1}),ae||r.kill()),Q&&[Q,F,c,U].forEach(function(le){return le.parentNode&&le.parentNode.removeChild(le)}),jr===a&&(jr=0),u&&(E&&(E.uncache=1),V=0,ge.forEach(function(le){return le.pin===u&&V++}),V||(E.spacer=0)),t.onKill&&t.onKill(a)},ge.push(a),a.enable(!1,!1),dt&&dt(a),r&&r.add&&!ne){var Me=a.update;a.update=function(){a.update=Me,_e.cache++,h||x||a.refresh()},O.delayedCall(.01,a.update),ne=.01,h=x=0}else a.refresh();u&&ri()},s.register=function(t){return wr||(O=t||Jn(),Kn()&&window.document&&s.enable(),wr=Or),wr},s.defaults=function(t){if(t)for(var r in t)co[r]=t[r];return co},s.disable=function(t,r){Or=0,ge.forEach(function(i){return i[r?"kill":"disable"](t)}),Je(me,"wheel",_r),Je(ke,"scroll",_r),clearInterval(no),Je(ke,"touchcancel",Ut),Je(Ee,"touchstart",Ut),ao(Je,ke,"pointerdown,touchstart,mousedown",bn),ao(Je,ke,"pointerup,touchend,mouseup",yn),Po.kill(),io(Je);for(var n=0;n<_e.length;n+=3)lo(Je,_e[n],_e[n+1]),lo(Je,_e[n],_e[n+2])},s.enable=function(){if(me=window,ke=document,Dt=ke.documentElement,Ee=ke.body,O&&(qr=O.utils.toArray,Yr=O.utils.clamp,$o=O.core.context||Ut,Oo=O.core.suppressOverwrites||Ut,on=me.history.scrollRestoration||"auto",Ko=me.pageYOffset||0,O.core.globals("ScrollTrigger",s),Ee)){Or=1,Tr=document.createElement("div"),Tr.style.height="100vh",Tr.style.position="absolute",ls(),$s(),Ze.register(O),s.isTouch=Ze.isTouch,$t=Ze.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),jo=Ze.isTouch===1,et(me,"wheel",_r),rn=[me,ke,Dt,Ee],O.matchMedia?(s.matchMedia=function(w){var y=O.matchMedia(),d;for(d in w)y.add(d,w[d]);return y},O.addEventListener("matchMediaInit",function(){return un()}),O.addEventListener("matchMediaRevert",function(){return is()}),O.addEventListener("matchMedia",function(){lr(0,1),hr("matchMedia")}),O.matchMedia().add("(orientation: portrait)",function(){return zo(),zo})):console.warn("Requires GSAP 3.11.0 or later"),zo(),et(ke,"scroll",_r);var t=Ee.hasAttribute("style"),r=Ee.style,n=r.borderTopStyle,i=O.core.Animation.prototype,l,f;for(i.revert||Object.defineProperty(i,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",l=Wt(Ee),qe.m=Math.round(l.top+qe.sc())||0,bt.m=Math.round(l.left+bt.sc())||0,n?r.borderTopStyle=n:r.removeProperty("border-top-style"),t||(Ee.setAttribute("style",""),Ee.removeAttribute("style")),no=setInterval(Sn,250),O.delayedCall(.5,function(){return so=0}),et(ke,"touchcancel",Ut),et(Ee,"touchstart",Ut),ao(et,ke,"pointerdown,touchstart,mousedown",bn),ao(et,ke,"pointerup,touchend,mouseup",yn),Vo=O.utils.checkPrefix("transform"),xo.push(Vo),wr=ut(),Po=O.delayedCall(.2,lr).pause(),vr=[ke,"visibilitychange",function(){var w=me.innerWidth,y=me.innerHeight;ke.hidden?(mn=w,_n=y):(mn!==w||_n!==y)&&Fr()},ke,"DOMContentLoaded",lr,me,"load",lr,me,"resize",Fr],io(et),ge.forEach(function(w){return w.enable(0,1)}),f=0;f<_e.length;f+=3)lo(Je,_e[f],_e[f+1]),lo(Je,_e[f],_e[f+2])}},s.config=function(t){"limitCallbacks"in t&&(Lo=!!t.limitCallbacks);var r=t.syncInterval;r&&clearInterval(no)||(no=r)&&setInterval(Sn,r),"ignoreMobileResize"in t&&(jo=s.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(io(Je)||io(et,t.autoRefreshEvents||"none"),$n=(t.autoRefreshEvents+"").indexOf("resize")===-1)},s.scrollerProxy=function(t,r){var n=xt(t),i=_e.indexOf(n),l=pr(n);~i&&_e.splice(i,l?6:2),r&&(l?Yt.unshift(me,r,Ee,r,Dt,r):Yt.unshift(n,r))},s.clearMatchMedia=function(t){ge.forEach(function(r){return r._ctx&&r._ctx.query===t&&r._ctx.kill(!0,!0)})},s.isInViewport=function(t,r,n){var i=(Et(t)?xt(t):t).getBoundingClientRect(),l=i[n?cr:ur]*r||0;return n?i.right-l>0&&i.left+l<me.innerWidth:i.bottom-l>0&&i.top+l<me.innerHeight},s.positionInViewport=function(t,r,n){Et(t)&&(t=xt(t));var i=t.getBoundingClientRect(),l=i[n?cr:ur],f=r==null?l/2:r in Io?Io[r]*l:~r.indexOf("%")?parseFloat(r)*l/100:parseFloat(r)||0;return n?(i.left+f)/me.innerWidth:(i.top+f)/me.innerHeight},s.killAll=function(t){if(ge.slice(0).forEach(function(n){return n.vars.id!=="ScrollSmoother"&&n.kill()}),t!==!0){var r=dr.killAll||[];dr={},r.forEach(function(n){return n()})}},s}();pe.version="3.12.7";pe.saveStyles=function(s){return s?qr(s).forEach(function(e){if(e&&e.style){var o=Pt.indexOf(e);o>=0&&Pt.splice(o,5),Pt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),O.core.getCache(e),$o())}}):Pt};pe.revert=function(s,e){return un(!s,e)};pe.create=function(s,e){return new pe(s,e)};pe.refresh=function(s){return s?Fr(!0):(wr||pe.register())&&lr(!0)};pe.update=function(s){return++_e.cache&&Vt(s===!0?2:0)};pe.clearScrollMemory=as;pe.maxScroll=function(s,e){return Gt(s,e?bt:qe)};pe.getScrollFunc=function(s,e){return Jt(xt(s),e?bt:qe)};pe.getById=function(s){return qo[s]};pe.getAll=function(){return ge.filter(function(s){return s.vars.id!=="ScrollSmoother"})};pe.isScrolling=function(){return!!Bt};pe.snapDirectional=cn;pe.addEventListener=function(s,e){var o=dr[s]||(dr[s]=[]);~o.indexOf(e)||o.push(e)};pe.removeEventListener=function(s,e){var o=dr[s],t=o&&o.indexOf(e);t>=0&&o.splice(t,1)};pe.batch=function(s,e){var o=[],t={},r=e.interval||.016,n=e.batchMax||1e9,i=function(w,y){var d=[],p=[],u=O.delayedCall(r,function(){y(d,p),d=[],p=[]}).pause();return function(v){d.length||u.restart(!0),d.push(v.trigger),p.push(v),n<=d.length&&u.progress(1)}},l;for(l in e)t[l]=l.substr(0,2)==="on"&&ft(e[l])&&l!=="onRefreshInit"?i(l,e[l]):e[l];return ft(n)&&(n=n(),et(pe,"refresh",function(){return n=e.batchMax()})),qr(s).forEach(function(f){var w={};for(l in t)w[l]=t[l];w.trigger=f,o.push(pe.create(w))}),o};var Dn=function(e,o,t,r){return o>r?e(r):o<0&&e(0),t>r?(r-o)/(t-o):t<0?o/(o-t):1},Ho=function s(e,o){o===!0?e.style.removeProperty("touch-action"):e.style.touchAction=o===!0?"auto":o?"pan-"+o+(Ze.isTouch?" pinch-zoom":""):"none",e===Dt&&s(Ee,o)},ho={auto:1,scroll:1},ai=function(e){var o=e.event,t=e.target,r=e.axis,n=(o.changedTouches?o.changedTouches[0]:o).target,i=n._gsap||O.core.getCache(n),l=ut(),f;if(!i._isScrollT||l-i._isScrollT>2e3){for(;n&&n!==Ee&&(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth||!(ho[(f=kt(n)).overflowY]||ho[f.overflowX]));)n=n.parentNode;i._isScroll=n&&n!==t&&!pr(n)&&(ho[(f=kt(n)).overflowY]||ho[f.overflowX]),i._isScrollT=l}(i._isScroll||r==="x")&&(o.stopPropagation(),o._gsapAllow=!0)},us=function(e,o,t,r){return Ze.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:o,onWheel:r=r&&ai,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return t&&et(ke,Ze.eventTypes[0],Rn,!1,!0)},onDisable:function(){return Je(ke,Ze.eventTypes[0],Rn,!0)}})},li=/(input|label|select|textarea)/i,An,Rn=function(e){var o=li.test(e.target.tagName);(o||An)&&(e._gsapAllow=!0,An=o)},ci=function(e){sr(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var o=e,t=o.normalizeScrollX,r=o.momentum,n=o.allowNestedScroll,i=o.onRelease,l,f,w=xt(e.target)||Dt,y=O.core.globals().ScrollSmoother,d=y&&y.get(),p=$t&&(e.content&&xt(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),u=Jt(w,qe),v=Jt(w,bt),T=1,_=(Ze.isTouch&&me.visualViewport?me.visualViewport.scale*me.visualViewport.width:me.outerWidth)/me.innerWidth,q=0,K=ft(r)?function(){return r(l)}:function(){return r||2.8},re,C,we=us(w,e.type,!0,n),Y=function(){return C=!1},R=Ut,ve=Ut,j=function(){f=Gt(w,qe),ve=Yr($t?1:0,f),t&&(R=Yr(0,Gt(w,bt))),re=fr},g=function(){p._gsap.y=Lr(parseFloat(p._gsap.y)+u.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",u.offset=u.cacheID=0},N=function(){if(C){requestAnimationFrame(Y);var z=Lr(l.deltaY/2),M=ve(u.v-z);if(p&&M!==u.v+u.offset){u.offset=M-u.v;var a=Lr((parseFloat(p&&p._gsap.y)||0)-u.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",p._gsap.y=a+"px",u.cacheID=_e.cache,Vt()}return!0}u.offset&&g(),C=!0},m,L,$,fe,Ce=function(){j(),m.isActive()&&m.vars.scrollY>f&&(u()>f?m.progress(1)&&u(f):m.resetTo("scrollY",f))};return p&&O.set(p,{y:"+=0"}),e.ignoreCheck=function(X){return $t&&X.type==="touchmove"&&N()||T>1.05&&X.type!=="touchstart"||l.isGesturing||X.touches&&X.touches.length>1},e.onPress=function(){C=!1;var X=T;T=Lr((me.visualViewport&&me.visualViewport.scale||1)/_),m.pause(),X!==T&&Ho(w,T>1.01?!0:t?!1:"x"),L=v(),$=u(),j(),re=fr},e.onRelease=e.onGestureStart=function(X,z){if(u.offset&&g(),!z)fe.restart(!0);else{_e.cache++;var M=K(),a,P;t&&(a=v(),P=a+M*.05*-X.velocityX/.227,M*=Dn(v,a,P,Gt(w,bt)),m.vars.scrollX=R(P)),a=u(),P=a+M*.05*-X.velocityY/.227,M*=Dn(u,a,P,Gt(w,qe)),m.vars.scrollY=ve(P),m.invalidate().duration(M).play(.01),($t&&m.vars.scrollY>=f||a>=f-1)&&O.to({},{onUpdate:Ce,duration:M})}i&&i(X)},e.onWheel=function(){m._ts&&m.pause(),ut()-q>1e3&&(re=0,q=ut())},e.onChange=function(X,z,M,a,P){if(fr!==re&&j(),z&&t&&v(R(a[2]===z?L+(X.startX-X.x):v()+z-a[1])),M){u.offset&&g();var W=P[2]===M,J=W?$+X.startY-X.y:u()+M-P[1],se=ve(J);W&&J!==se&&($+=se-J),u(se)}(M||z)&&Vt()},e.onEnable=function(){Ho(w,t?!1:"x"),pe.addEventListener("refresh",Ce),et(me,"resize",Ce),u.smooth&&(u.target.style.scrollBehavior="auto",u.smooth=v.smooth=!1),we.enable()},e.onDisable=function(){Ho(w,!0),Je(me,"resize",Ce),pe.removeEventListener("refresh",Ce),we.kill()},e.lockAxis=e.lockAxis!==!1,l=new Ze(e),l.iOS=$t,$t&&!u()&&u(1),$t&&O.ticker.add(Ut),fe=l._dc,m=O.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:cs(u,u(),function(){return m.pause()})},onUpdate:Vt,onComplete:fe.vars.onComplete}),l};pe.sort=function(s){if(ft(s))return ge.sort(s);var e=me.pageYOffset||0;return pe.getAll().forEach(function(o){return o._sortY=o.trigger?e+o.trigger.getBoundingClientRect().top:o.start+me.innerHeight}),ge.sort(s||function(o,t){return(o.vars.refreshPriority||0)*-1e6+(o.vars.containerAnimation?1e6:o._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};pe.observe=function(s){return new Ze(s)};pe.normalizeScroll=function(s){if(typeof s>"u")return mt;if(s===!0&&mt)return mt.enable();if(s===!1){mt&&mt.kill(),mt=s;return}var e=s instanceof Ze?s:ci(s);return mt&&mt.target===e.target&&mt.kill(),pr(e.target)&&(mt=e),e};pe.core={_getVelocityProp:Zo,_inputObserver:us,_scrollers:_e,_proxies:Yt,bridge:{ss:function(){Bt||hr("scrollStart"),Bt=ut()},ref:function(){return ct}}};Jn()&&O.registerPlugin(pe);var $r=function(){var s=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(y){y.preventDefault(),t(++s%e.children.length)},!1);function o(y){return e.appendChild(y.dom),y}function t(y){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===y?"block":"none";s=y}var r=(performance||Date).now(),n=r,i=0,l=o(new $r.Panel("FPS","#0ff","#002")),f=o(new $r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var w=o(new $r.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:o,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){i++;var y=(performance||Date).now();if(f.update(y-r,200),y>=n+1e3&&(l.update(i*1e3/(y-n),100),n=y,i=0,w)){var d=performance.memory;w.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return y},update:function(){r=this.end()},domElement:e,setMode:t}};$r.Panel=function(s,e,o){var t=1/0,r=0,n=Math.round,i=n(window.devicePixelRatio||1),l=80*i,f=48*i,w=3*i,y=2*i,d=3*i,p=15*i,u=74*i,v=30*i,T=document.createElement("canvas");T.width=l,T.height=f,T.style.cssText="width:80px;height:48px";var _=T.getContext("2d");return _.font="bold "+9*i+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=o,_.fillRect(0,0,l,f),_.fillStyle=e,_.fillText(s,w,y),_.fillRect(d,p,u,v),_.fillStyle=o,_.globalAlpha=.9,_.fillRect(d,p,u,v),{dom:T,update:function(q,K){t=Math.min(t,q),r=Math.max(r,q),_.fillStyle=o,_.globalAlpha=1,_.fillRect(0,0,l,p),_.fillStyle=e,_.fillText(n(q)+" "+s+" ("+n(t)+"-"+n(r)+")",w,y),_.drawImage(T,d+i,p,u-i,v,d,p,u-i,v),_.fillRect(d+u-i,p,i,v),_.fillStyle=o,_.globalAlpha=.9,_.fillRect(d+u-i,p,i,n((1-q/K)*v))}}};const fs={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Jr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const ui=new Cs(-1,1,1,-1,0,1);class fi extends yr{constructor(){super(),this.setAttribute("position",new pn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new pn([0,2,0,0,2,0],2))}}const pi=new fi;class ps{constructor(e){this._mesh=new Le(pi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ui)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class di extends Jr{constructor(e,o){super(),this.textureID=o!==void 0?o:"tDiffuse",e instanceof ar?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Yo.clone(e.uniforms),this.material=new ar({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ps(this.material)}render(e,o,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(o),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class kn extends Jr{constructor(e,o){super(),this.scene=e,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,o,t){const r=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let i,l;this.inverse?(i=0,l=1):(i=1,l=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),n.buffers.stencil.setFunc(r.ALWAYS,i,4294967295),n.buffers.stencil.setClear(l),n.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(o),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.color.setMask(!0),n.buffers.depth.setMask(!0),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(r.EQUAL,1,4294967295),n.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),n.buffers.stencil.setLocked(!0)}}class hi extends Jr{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class gi{constructor(e,o){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),o===void 0){const t=e.getSize(new It);this._width=t.width,this._height=t.height,o=new mo(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:_o}),o.texture.name="EffectComposer.rt1"}else this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new di(fs),this.copyPass.material.blending=Ps,this.clock=new Ms}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,o){this.passes.splice(o,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const o=this.passes.indexOf(e);o!==-1&&this.passes.splice(o,1)}isLastEnabledPass(e){for(let o=e+1;o<this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const o=this.renderer.getRenderTarget();let t=!1;for(let r=0,n=this.passes.length;r<n;r++){const i=this.passes[r];if(i.enabled!==!1){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),i.needsSwap){if(t){const l=this.renderer.getContext(),f=this.renderer.state.buffers.stencil;f.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),f.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}kn!==void 0&&(i instanceof kn?t=!0:i instanceof hi&&(t=!1))}}this.renderer.setRenderTarget(o)}reset(e){if(e===void 0){const o=this.renderer.getSize(new It);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,o){this._width=e,this._height=o;const t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class mi extends Jr{constructor(e,o,t=null,r=null,n=null){super(),this.scene=e,this.camera=o,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new _t}render(e,o,t){const r=e.autoClear;e.autoClear=!1;let n,i;this.overrideMaterial!==null&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(n),this.overrideMaterial!==null&&(this.scene.overrideMaterial=i),e.autoClear=r}}const _i={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new _t(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class gr extends Jr{constructor(e,o,t,r){super(),this.strength=o!==void 0?o:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new It(e.x,e.y):new It(256,256),this.clearColor=new _t(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let n=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);this.renderTargetBright=new mo(n,i,{type:_o}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){const p=new mo(n,i,{type:_o});p.texture.name="UnrealBloomPass.h"+d,p.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(p);const u=new mo(n,i,{type:_o});u.texture.name="UnrealBloomPass.v"+d,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),n=Math.round(n/2),i=Math.round(i/2)}const l=_i;this.highPassUniforms=Yo.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ar({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const f=[3,5,7,9,11];n=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(f[d])),this.separableBlurMaterials[d].uniforms.invSize.value=new It(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=o,this.compositeMaterial.uniforms.bloomRadius.value=.1;const w=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=w,this.bloomTintColors=[new Te(1,1,1),new Te(1,1,1),new Te(1,1,1),new Te(1,1,1),new Te(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const y=fs;this.copyUniforms=Yo.clone(y.uniforms),this.blendMaterial=new ar({uniforms:this.copyUniforms,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,blending:Ht,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new _t,this.oldClearAlpha=1,this.basic=new Mt,this.fsQuad=new ps(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,o){let t=Math.round(e/2),r=Math.round(o/2);this.renderTargetBright.setSize(t,r);for(let n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(t,r),this.renderTargetsVertical[n].setSize(t,r),this.separableBlurMaterials[n].uniforms.invSize.value=new It(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,o,t,r,n){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const i=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),n&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let f=0;f<this.nMips;f++)this.fsQuad.material=this.separableBlurMaterials[f],this.separableBlurMaterials[f].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[f].uniforms.direction.value=gr.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[f]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[f].uniforms.colorTexture.value=this.renderTargetsHorizontal[f].texture,this.separableBlurMaterials[f].uniforms.direction.value=gr.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[f]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[f];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,n&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=i}getSeparableBlurMaterial(e){const o=[];for(let t=0;t<e;t++)o.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new ar({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new It(.5,.5)},direction:{value:new It(.5,.5)},gaussianCoefficients:{value:o}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new ar({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}gr.BlurDirectionX=new It(1,0);gr.BlurDirectionY=new It(0,1);class wi extends Es{constructor(e,o={}){const t=o.font;if(t===void 0)super();else{const r=t.generateShapes(e,o.size);o.depth===void 0&&(o.depth=50),o.bevelThickness===void 0&&(o.bevelThickness=10),o.bevelSize===void 0&&(o.bevelSize=8),o.bevelEnabled===void 0&&(o.bevelEnabled=!1),super(r,o)}this.type="TextGeometry"}}function vi(s,e,o,t){const{CUBE_SIZE:r,FIRST_CUBE_Z:n}=o,i=8,l=24,f=.075;let w,y=[],d=[],p=[],u=[];const v=(_,q,K,re)=>{const C=new Qr(_,_,_),we=new zr(C),Y=[new Tt({color:16711680,transparent:!0,opacity:re.opacity,blending:Ht}),new Tt({color:65280,transparent:!0,opacity:re.opacity,blending:Ht}),new Tt({color:255,transparent:!0,opacity:re.opacity,blending:Ht}),new Tt({color:65535,transparent:!0,opacity:re.opacity,blending:Ht}),new Tt({color:16711935,transparent:!0,opacity:re.opacity,blending:Ht}),new Tt({color:16776960,transparent:!0,opacity:re.opacity,blending:Ht})],R=new yt,ve=we.getAttribute("position").array,j=[];for(let m=0;m<ve.length/3;m+=2)j.push(m,m+1);const g=Array(6).fill(null).map(()=>new yr),N=Array(6).fill(null).map(()=>[]);for(let m=0;m<j.length/2;m++){const L=m%6;N[L].push(j[m*2],j[m*2+1])}return g.forEach((m,L)=>{m.setIndex(N[L]),m.setAttribute("position",we.getAttribute("position"));const $=new Xt(m,Y[L]);R.add($)}),R.position.z=q,R.rotation.z=K,R};return(()=>{const K=.9/(l-1);for(let j=0;j<l;j++)d[j]=new Tt({transparent:!0,opacity:1-j*K});if(w=new yt,!w){console.error("introGroup failed to initialize");return}for(let j=0;j<l;j++){const g=r-j*i,N=v(g,0,0,d[j]),m=N.children.map(L=>L.material);u.push(m.map(L=>({material:L,originalColor:L.color.clone()}))),w.add(N)}w.position.z=n,e.add(w),y.push(w),p=d.map(j=>j.opacity);const re=Ne.timeline({repeat:-1});re.to(w.rotation,{x:We.degToRad(360),duration:12,ease:"none"},0),re.to(w.rotation,{y:We.degToRad(360),duration:10,ease:"none"},0),re.to(w.rotation,{z:We.degToRad(360),duration:14,ease:"none"},0);let C=-1,we=0;const Y=f*1e3,R=l*Y,ve=j=>{const g=j%R/Y,N=Math.floor(g)%l;C!==-1&&j-we>=Y&&(u[C].forEach($=>{$.material.opacity=p[C],$.material.color.copy($.originalColor)}),C=-1),C===-1&&N!==C&&(C=N,we=j,u[C].forEach(L=>{L.material.opacity=1,L.material.color.set(1,1,1)})),requestAnimationFrame(ve)};requestAnimationFrame(ve)})(),{introCubes:y}}class bi extends Is{constructor(e){super(e)}load(e,o,t,r){const n=this,i=new Ds(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(l){const f=n.parse(JSON.parse(l));o&&o(f)},t,r)}parse(e){return new yi(e)}}class yi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,o=100){const t=[],r=xi(e,o,this.data);for(let n=0,i=r.length;n<i;n++)t.push(...r[n].toShapes());return t}}function xi(s,e,o){const t=Array.from(s),r=e/o.resolution,n=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*r,i=[];let l=0,f=0;for(let w=0;w<t.length;w++){const y=t[w];if(y===`
`)l=0,f-=n;else{const d=Ti(y,r,l,f,o);l+=d.offsetX,i.push(d.path)}}return i}function Ti(s,e,o,t,r){const n=r.glyphs[s]||r.glyphs["?"];if(!n){console.error('THREE.Font: character "'+s+'" does not exists in font family '+r.familyName+".");return}const i=new As;let l,f,w,y,d,p,u,v;if(n.o){const T=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let _=0,q=T.length;_<q;)switch(T[_++]){case"m":l=T[_++]*e+o,f=T[_++]*e+t,i.moveTo(l,f);break;case"l":l=T[_++]*e+o,f=T[_++]*e+t,i.lineTo(l,f);break;case"q":w=T[_++]*e+o,y=T[_++]*e+t,d=T[_++]*e+o,p=T[_++]*e+t,i.quadraticCurveTo(d,p,w,y);break;case"b":w=T[_++]*e+o,y=T[_++]*e+t,d=T[_++]*e+o,p=T[_++]*e+t,u=T[_++]*e+o,v=T[_++]*e+t,i.bezierCurveTo(d,p,u,v,w,y);break}}return{offsetX:n.ha*e,path:i}}function Si(s,e,o,t,r,n,i){const{CUBE_SIZE:l,CUBE_SPACING:f,FIRST_CUBE_Z:w}=e,y=w-(o.length+1)*f,d=65535,p=16711935,u=16711680,v=We.degToRad(15),T=1e3,_=.5,q=80,K=1,re=15,C=.1;let we=[];we.length=0;let Y=null,R=null,ve=!1,j=!1,g=new Rs,N=new It,m=null,L=null,$=null,fe=!1,Ce=null;const X=Un(),z=(S,E,H,D,k)=>{const h=E.getWorldPosition(new Te),x=D*.5,Q=D*.5;let F=new Te;switch(k){case"left":F.set(h.x,h.y+Q,h.z+20),S.rotation.y=Math.PI/2;break;case"right":F.set(h.x,h.y+Q,h.z+20),S.rotation.y=-Math.PI/2;break;case"top":F.set(h.x+x,h.y,h.z+20),S.rotation.x=-Math.PI/2;break;case"bottom":F.set(h.x+x,h.y,h.z+20),S.rotation.x=Math.PI/2;break}S.position.copy(F),S.updateMatrixWorld(!0),S.lookAt(H.position),console.log("Close button pos:",F,"Portal world pos:",h,"Camera pos:",H.position)},M=(S,E,H,D,k,h)=>{const x=new yt;x.position.z=H,x.rotation.z=D,x.userData.isActive=!1;const Q=new Qr(E,E,E),F=new zr(Q),c=new Tt({color:new _t(d),transparent:!0,opacity:0}),U=new Xt(F,c);U.geometry.computeBoundingSphere(),x.add(U);let Z="right";const G=E/2,ne=()=>{const ce=new dn(40,24),ie=new zr(ce),B=new Tt({color:new _t(d),transparent:!0,opacity:0,visible:!0}),A=new Xt(ie,B);A.userData.isPortal=!0,A.userData.isAnimating=!1,A.geometry.computeBoundingSphere();const Fe=new rr(120,120),be=new Mt({visible:!1,side:or}),de=new Le(Fe,be);de.userData.isPortalHitbox=!0,de.userData.portal=A,de.geometry.computeBoundingSphere();const he=new yt,Oe=new rr(K,re),Ye=65/2;for(let Se=0;Se<q;Se++){const pt=new Mt({color:new _t(p),transparent:!0,opacity:0,visible:!1,side:or}),Ve=new Le(Oe,pt),St=Se/q*Math.PI*2;Ve.position.set(Math.cos(St)*Ye,Math.sin(St)*Ye,0),Ve.rotation.z=St+Math.PI/2,Ve.userData.baseOpacity=.01,Ve.userData.index=Se,Ve.geometry.computeBoundingSphere(),he.add(Ve)}const te=2,st=25;for(let Se=1;Se<st;Se++){const pt=new dn(40,24),Ve=new zr(pt),St=We.lerp(1,.1,Se/(st-1)),jt=new Tt({color:new _t(d),transparent:!0,opacity:0}),dt=new Xt(Ve,jt);dt.userData.isPortal=!0,dt.userData.maxOpacity=St,dt.position.z=-Se*te,dt.geometry.computeBoundingSphere(),A.add(dt)}switch(A.userData.maxOpacity=1,Z){case"left":case"right":he.children.forEach(Se=>Se.position.x+=C);break;case"top":case"bottom":he.children.forEach(Se=>Se.position.y+=C);break}switch(A.add(he),x.add(A),x.add(de),A.updateMatrixWorld(!0),he.updateMatrixWorld(!0),Z){case"left":A.position.set(-G,0,0),A.rotation.y=Math.PI/2,de.position.set(-G,0,0),de.rotation.y=Math.PI/2;break;case"top":A.position.set(0,G,0),A.rotation.x=-Math.PI/2,de.position.set(0,G,0),de.rotation.x=Math.PI/2;break;case"right":A.position.set(G,0,0),A.rotation.y=-Math.PI/2,de.position.set(G,0,0),de.rotation.y=-Math.PI/2;break;case"bottom":A.position.set(0,-G,0),A.rotation.x=Math.PI/2,de.position.set(0,-G,0),de.rotation.x=Math.PI/2;break}},De=()=>{const b=new yt,oe=new rr(20,4),ce=new Mt({color:16711680,transparent:!0,opacity:0,side:or}),ie=new Le(oe,ce);ie.rotation.z=Math.PI/4;const B=new Le(oe,ce);B.rotation.z=-Math.PI/4,b.add(ie,B);const A=new rr(40,40),Fe=new Mt({visible:!1}),be=new Le(A,Fe);return be.userData.isCloseHitbox=!0,b.add(be),b.visible=!1,b},Re=b=>{(b instanceof Xt||b instanceof Le)&&b.geometry&&b.geometry.computeBoundingSphere(),x.add(b)};if(k&&n.showKeyarts){switch(["left","top","right","bottom"].includes(h)?h:"left"){case"left":Z="right";break;case"top":Z="bottom";break;case"right":Z="left";break;case"bottom":Z="top";break}const oe=i.get(k);if(oe){const ce=new rr(E-1,E-1),ie=new Mt({map:oe,transparent:!0,opacity:0,blending:Ht,side:or}),B=new Le(ce,ie);switch(B.userData.isLoaded=!0,h){case"left":B.position.set(-G,0,0),D>=We.degToRad(120)?(B.rotation.y=Math.PI/2,B.rotation.z=-Math.PI):B.rotation.y=Math.PI/2;break;case"top":B.position.set(0,G,0),B.rotation.x=Math.PI/2,B.rotation.z=-Math.PI/2;break;case"right":B.position.set(G,0,0),D>=We.degToRad(120)?(B.rotation.y=-Math.PI/2,B.rotation.z=-Math.PI):B.rotation.y=-Math.PI/2;break;case"bottom":B.position.set(0,-G,0),D>=We.degToRad(180)?(B.rotation.x=-Math.PI/2,B.rotation.z=Math.PI/2):(B.rotation.x=-Math.PI/2,B.rotation.z=-Math.PI/2);break}B.geometry.computeBoundingSphere(),Re(B),ne()}else console.warn(`Keyart texture not preloaded for ${S.title}: ${k}`),ne()}else ne();const Ge=De();x.add(Ge),x.userData.closeButton=Ge,x.userData.portalLocation=Z;{const b=(be,de,he,Oe)=>{const Ye=new rr(E-1,E-1),te={map:be,transparent:!0,opacity:0,blending:Ht,side:or,depthWrite:!1};Oe&&(te.color=Oe);const st=new Mt(te),Se=new Le(Ye,st);Se.position.copy(de),he.x&&(Se.rotation.x=he.x),he.y&&(Se.rotation.y=he.y),Se.userData.isGridPlane=!0,Se.geometry.computeBoundingSphere(),Re(Se)},oe=i.get(t),ce=i.get(r),ie=["left","top","right","bottom"],A=[k&&n.showKeyarts?h||"left":null,Z].filter(Boolean),Fe=ie.filter(be=>!A.includes(be));if(oe)switch(b(oe,new Te(0,0,-E/2-1),{y:0}),b(oe,new Te(0,0,E/2+1),{y:0},new _t(16744448)),Fe[0]){case"left":b(oe,new Te(-G,0,0),{y:-Math.PI/2},new _t(255));break;case"top":b(oe,new Te(0,G,0),{x:Math.PI/2},new _t(255));break;case"right":b(oe,new Te(G,0,0),{y:Math.PI/2},new _t(255));break;case"bottom":b(oe,new Te(0,-G,0),{x:-Math.PI/2},new _t(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(ce)switch(Fe[1]){case"left":b(ce,new Te(-G,0,0),{y:-Math.PI/2});break;case"top":b(ce,new Te(0,G,0),{x:Math.PI/2});break;case"right":b(ce,new Te(G,0,0),{y:Math.PI/2});break;case"bottom":b(ce,new Te(0,-G,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${r}`)}x.children.forEach(b=>{b.updateMatrixWorld(!0),b instanceof yt&&b.children.forEach(oe=>{oe.updateMatrixWorld(!0)})}),x.updateMatrixWorld(!0);const Be=new Nn().setFromObject(x),nt=new Fn;return Be.getBoundingSphere(nt),x.boundingSphere=nt,x},a=new ks,P=(S,E,H,D,k,h)=>{const x=new wi(S,{font:h,size:k,depth:0,curveSegments:12,bevelEnabled:!1});x.computeBoundingBox(),x.center();const Q=new Mt({color:16777215,transparent:!0,opacity:0,side:or}),F=new Le(x,Q);F.position.set(E,H,D);const c=x.boundingBox,U=c.max.x-c.min.x,Z=c.max.y-c.min.y,G=U+8,ne=Z+4,De=new rr(G,ne),Re=new Mt({color:0,transparent:!0,opacity:0,side:or}),Ge=new Le(De,Re);return Ge.position.set(E,H,D-1),s.add(Ge),s.add(F),F.userData.backgroundPlane=Ge,F},W=()=>new Promise(S=>{Y=new bi,Y.load("/fonts/Poppins_Regular.json",E=>{R=E;const H=Array.isArray(o)?o:[];Array.isArray(o)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",o),H.forEach((D,k)=>{const h=w-(k+1)*f,x=(k+1)*v,Q=M(D,l,h,x,D.keyart,D.keyartLocation);s.add(Q),we.push(Q),P(D.title,0,D.size-15,w+90-(k+1)*f,D.size,E)}),S()},void 0,E=>console.error("Error loading font:",E))}),J=()=>ve?Promise.resolve({projectCubes:we,updateCubeColors:ye,loadedFont:R,maxZ:y}):W().then(()=>(ve=!0,{projectCubes:we,updateCubeColors:ye,loadedFont:R,maxZ:y})).catch(S=>{throw console.error("Error in loadFontAndText:",S),S}),se=S=>{if(S.userData.isAnimating)return;S.userData.isAnimating=!0;const E=S.children.find(x=>x instanceof yt);if(!E)return;const H=E.children,D=H.length,k=Ne.timeline({repeat:-1,defaults:{ease:"none"}}),h={value:0};k.to(h,{value:1,duration:1.5,onUpdate:()=>{H.forEach(Q=>{const F=Q.material;if(F.visible){const c=(Q.userData.index/D+h.value)%1,Z=(Math.sin(c*Math.PI*2)+1)/2,G=.01+(1-.01)*Math.pow(Z,4);F.opacity=G}})}}),S.userData.animationTimeline=k},Ie=S=>{if(!S.userData.isAnimating)return;S.userData.isAnimating=!1;const E=S.children.find(H=>H instanceof yt);E&&(S.userData.animationTimeline&&(S.userData.animationTimeline.kill(),delete S.userData.animationTimeline),E.children.forEach(H=>{const D=H.material;D.opacity=0}))},ye=S=>{a.setFromProjectionMatrix(S.projectionMatrix.clone().multiply(S.matrixWorldInverse));const E=S.position.z;let H=[];s.traverse(D=>{var k;return D instanceof Le&&((k=D.geometry)==null?void 0:k.type)==="TextGeometry"&&H.push(D)}),j||(j=!0),we.forEach((D,k)=>{const h=D.boundingSphere;if(h){const c=h.clone();if(c.radius*=1.5,!a.intersectsSphere(c))return}else console.warn(`Cube ${k} has no boundingSphere`);const x=D.position.z,Q=Math.abs(E-x+90);let F=0;Q<=T&&(F=1-Q/T),D.userData.isActive=F>=_,D.children.forEach(c=>{if(c instanceof Xt&&!c.userData.isPortal&&!c.userData.isPortalHitbox){const U=c.material;if(Q<=T){const Z=We.lerp((d>>16&255)/255,(p>>16&255)/255,F),G=We.lerp((d>>8&255)/255,(p>>8&255)/255,F),ne=We.lerp((d&255)/255,(p&255)/255,F);U.color.set(Z,G,ne),U.opacity=Math.min(1,F*2)}else U.opacity=0}else if(c instanceof Xt&&c.userData.isPortal)j&&(F>.1?c.children.forEach(U=>{U instanceof yt&&U.children.forEach(Z=>{Z instanceof Le&&(Z.material.visible=!0,!c.userData.animationStarted&&n.showPortalPulses&&(se(c),c.userData.animationStarted=!0))})}):F<=.1&&c.userData.animationStarted&&(c.children.forEach(U=>{U instanceof yt&&U.children.forEach(Z=>{Z instanceof Le&&(Z.material.visible=!1)})}),Ie(c),delete c.userData.animationStarted));else if(c instanceof Le&&!c.userData.isPortalHitbox&&!c.userData.isCloseHitbox){const U=c.material;if(c.userData.isLoaded||c.userData.isGridPlane)if(Q<=T){const Z=1-Q/T;U.opacity=Math.min(.8,Z*2)}else U.opacity=0}else if(c instanceof yt&&c.userData.closeButton){const U=Math.abs(E-c.position.z);c.children.forEach(Z=>{if(Z instanceof Le&&!Z.userData.isCloseHitbox){const G=Z.material;if(U<=T){const ne=1-U/T;G.opacity=Math.min(1,ne*2)}else G.opacity=0}})}})}),H.forEach(D=>{if(!a.intersectsObject(D))return;const k=D.material,h=D.userData.backgroundPlane,x=h==null?void 0:h.material,Q=D.position.z,F=Math.abs(E-Q+120);if(F<=T){const c=1-F/T,U=Math.min(1,c*2);k.opacity=U,x&&(x.opacity=U*.8)}else k.opacity=0,x&&(x.opacity=0)})};return{getInitializedData:J,updateCubeColors:ye,setupInteractivity:(S,E,H)=>{Ce=H;let D=null,k=null,h=null,x=!1,Q=!1,F=!1,c=!1;const U=b=>{fe&&(D=b.touches[0].clientY,k=k??window.scrollY,x=!0)},Z=b=>{if(!fe||!h||!D)return;const ce=b.touches[0].clientY-D;ce<-20&&!Q?(console.log("Swipe Up - Exiting"),De(),D=null):ce>20&&(console.log("Swipe Down - Blocking"),b.preventDefault(),window.scrollTo(0,k),Ne.to(window,{scrollTo:{y:k},duration:0}))},G=()=>{D=null,x=!1,F=!0,Ne.delayedCall(.5,()=>{F=!1})},ne=b=>{if(x||Q||F){b.preventDefault(),b.stopPropagation(),k!==null&&(window.scrollTo(0,k),Ne.to(window,{scrollTo:{y:k},duration:0}));return}if(!fe||!h||!L||!$)return;let oe=0;if(b instanceof WheelEvent?oe=b.deltaY:oe=window.scrollY-(k||0),b.preventDefault(),b.stopPropagation(),oe>0){window.scrollTo(0,k);return}oe<0&&De()},De=()=>{const b=h,oe=$?$.clone():new Te(0,0,y),ce=(L==null?void 0:L.z)??S.position.z,ie=b==null?void 0:b.parent;c=!0,Ne.to(S.position,{x:(L==null?void 0:L.x)??S.position.x,y:(L==null?void 0:L.y)??S.position.y,z:ce,duration:1,ease:"power3.out",overwrite:"auto",onUpdate:()=>{S.lookAt(oe)},onComplete:()=>{if(S.lookAt(oe),fe=!1,h=null,document.body.classList.remove("no-scrollbar"),Ce&&H(!1),b&&Re(b,!1),ie!=null&&ie.userData.closeButton){const B=ie.userData.closeButton.children.filter(A=>A instanceof Le).map(A=>A.material);Ne.to(B,{opacity:0,duration:.5,onComplete:()=>{ie.userData.closeButton.visible=!1}})}k=null,L=null,$=null,c=!1,console.log("Exit complete, resuming ScrollTrigger, z:",S.position.z)}})},Re=(b,oe=!0)=>{const ce=[b,...b.children.filter(B=>B instanceof Xt&&B.userData.isPortal)],ie=oe?25:2;ce.forEach((B,A)=>{let Fe=-A*ie;(b.position.y>0&&b.rotation.x===-Math.PI/2||b.position.y<0&&b.rotation.x===Math.PI/2)&&(Fe=A*ie);const be=oe?B.userData.maxOpacity:0;Ne.to(B.position,{z:Fe,duration:1,ease:"power3.out",delay:.5}),Ne.to(B.material,{opacity:be,duration:1,ease:"power3.out",delay:.5})})},Ge=b=>{N.x=b.clientX/window.innerWidth*2-1,N.y=-(b.clientY/window.innerHeight)*2+1,g.setFromCamera(N,S);const oe=we.flatMap(ie=>ie.userData.isActive?ie.children.filter(B=>B instanceof Le&&B.userData.isPortalHitbox||B instanceof Le&&B.userData.isCloseHitbox):[]),ce=g.intersectObjects(oe);if(ce.length>0){const ie=ce[0].object;if(ie.userData.isPortalHitbox){const B=ie.userData.portal;if(m!==B){if(m){const Fe=m.material;Ne.to(Fe.color,{r:(d>>16&255)/255,g:(d>>8&255)/255,b:(d&255)/255,duration:.5})}m=B;const A=m.material;Ne.to(A.color,{r:(u>>16&255)/255,g:(u>>8&255)/255,b:(u&255)/255,duration:.5})}}else ie.userData.isCloseHitbox&&(E.style.cursor="pointer");E.style.cursor="pointer"}else{if(m){const ie=m.material;Ne.to(ie.color,{r:(d>>16&255)/255,g:(d>>8&255)/255,b:(d&255)/255,duration:.5}),m=null}E.style.cursor="auto"}},Be=b=>{if(c){console.log("Click ignored - Camera animating");return}N.x=b.clientX/window.innerWidth*2-1,N.y=-(b.clientY/window.innerHeight)*2+1,g.setFromCamera(N,S);const oe=we.flatMap(de=>de.userData.isActive?de.children.filter(he=>he instanceof Le&&he.userData.isPortalHitbox||he instanceof Le&&he.userData.isCloseHitbox):[]),ce=g.intersectObjects(oe);if(ce.length===0)return;const ie=ce[0].object;if(ie.userData.isCloseHitbox){De();return}const B=ie.userData.portal,A=ie.parent,Fe=we.indexOf(A),be=o[Fe];if(fe&&B===h){B.getWorldPosition(new Te);let de=new Te;const he=e.CUBE_SIZE/2;B.position.x===he?de.set(-1,0,0):B.position.x===-he?de.set(1,0,0):B.position.y===he?de.set(0,-1,0):B.position.y===-he&&de.set(0,1,0),de.applyQuaternion(A.getWorldQuaternion(new Bs)).normalize();const Ye=S.position.clone().clone().add(de.clone().multiplyScalar(-675)),te=de.clone().multiplyScalar(-1e3),st=Ye.clone().add(te);c=!0,Ne.to(S.position,{x:Ye.x,y:Ye.y,z:Ye.z,duration:1,ease:"power2.in",onUpdate:()=>S.lookAt(st),onComplete:()=>{be!=null&&be.slug&&(X.setScrollPosition(window.scrollY),hs.visit(route("project.show",{project:be.slug}),{preserveScroll:!1})),c=!1}})}else if(!fe){L||(L=S.position.clone(),$=new Te(0,0,y)),Ce&&H(!0,L,$);const de=B.getWorldPosition(new Te);Q=!0,c=!0,k=window.scrollY,Ne.to(S.position,{x:0,y:0,z:A.getWorldPosition(new Te).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{fe=!0,h=B,document.body.classList.add("no-scrollbar"),Re(B,!0)},onComplete:()=>{if(A.userData.closeButton){A.userData.closeButton.visible=!0,z(A.userData.closeButton,B,S,l/2,A.userData.portalLocation);const he=A.userData.closeButton.children.filter(Oe=>Oe instanceof Le).map(Oe=>Oe.material);Ne.to(he,{opacity:1,duration:.5,onComplete:()=>{console.log("Close button visible:",A.userData.closeButton.visible,"Opacity:",he[0].opacity)}})}}}),Ne.to({},{duration:2,ease:"power3.out",overwrite:"all",onUpdate:function(){const he=this.progress(),Oe=S.getWorldDirection(new Te).multiplyScalar(1e3).add(S.position),Ye=We.lerp(Oe.x,de.x,he),te=We.lerp(Oe.y,de.y,he),st=We.lerp(Oe.z,de.z,he);S.lookAt(Ye,te,st),A.userData.closeButton&&h&&z(A.userData.closeButton,h,S,l/2,A.userData.portalLocation)},onComplete:()=>{var he;S.lookAt(de),Q=!1,c=!1,console.log("Portal enter complete, close button pos:",(he=A.userData.closeButton)==null?void 0:he.position)}})}};E.addEventListener("mousemove",Ge),E.addEventListener("click",Be),E.addEventListener("touchstart",U,{passive:!0}),E.addEventListener("touchmove",Z,{passive:!1}),E.addEventListener("touchend",G,{passive:!0}),window.addEventListener("wheel",ne,{passive:!1}),window.addEventListener("scroll",ne,{passive:!1});const nt=()=>{if(fe&&h){const b=h.parent;b.userData.closeButton&&z(b.userData.closeButton,h,S,l/2,b.userData.portalLocation)}};return window.addEventListener("resize",nt),()=>{E.removeEventListener("mousemove",Ge),E.removeEventListener("click",Be),E.removeEventListener("touchstart",U),E.removeEventListener("touchmove",Z),E.removeEventListener("touchend",G),window.removeEventListener("wheel",ne),window.removeEventListener("scroll",ne),window.removeEventListener("resize",nt)}}}}function Ci(s,e,o,t){const C=o-1e3,we=Math.abs(-500-C),Y=Math.ceil(we/100),R=()=>{const M=new yt;let a=null,P=null;const W=[],J=[],se=[],Ie=[],ye=[];{const Pe=new Qr(100,100,100),S=new zr(Pe),E=32*Y,H=new Os;H.copy(S),H.instanceCount=E;const D=new Tt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),k=new Float32Array(E*3),h=new Float32Array(E*3),x=new Float32Array(E*3),Q=32*100,F=-3200/2+100/2,c=-500;for(let B=0;B<32;B++){const A=ve(B);for(let Fe=0;Fe<Y;Fe++){const be=B*Y+Fe,de=F+B*100,he=c-Fe*100,Oe=We.randFloat(100,300),Ye=Oe/100,te=-600+Oe/2;k[be*3]=de,k[be*3+1]=te,k[be*3+2]=he,h[be*3]=1,h[be*3+1]=Ye,h[be*3+2]=1,x[be*3]=A,x[be*3+1]=A,x[be*3+2]=A}}H.setAttribute("instancePosition",new Ro(k,3)),H.setAttribute("instanceScale",new Ro(h,3)),H.setAttribute("color",new Ro(x,3)),D.onBeforeCompile=B=>{B.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${B.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new Xt(H,D);const U=-3200/2,Z=Q/2,G=-600,ne=-300,De=C,Re=-500;H.boundingBox=new Nn(new Te(U,G,De),new Te(Z,ne,Re));const Ge=(U+Z)/2,Be=(G+ne)/2,nt=(De+Re)/2,b=Z-U,oe=ne-G,ce=Re-De,ie=Math.sqrt(b*b+oe*oe+ce*ce)/2;H.boundingSphere=new Fn(new Te(Ge,Be,nt),ie),M.add(a)}{P=new yt;const Pe=32*100/5,S=-3200/2;for(let H=0;H<6;H++){let k=S+H*Pe,h=-500;const x=[new Te(k,-450,h)];let Q=0;for(;h>C;){const F=h===-500?We.randFloat(300,800):Math.min(We.randFloat(300,800),Math.abs(h-C));if(h-=F,x.push(new Te(k,-450,h)),Q+=F,h<=C){x[x.length-1].z=C;break}const c=Math.random()<.5?-1:1,U=We.randFloat(100,300);k+=c*U,x.push(new Te(k,-450,h)),Q+=U}J.push({points:x,totalLength:Q})}const E=new Qr(4,4,4);for(let H=0;H<6;H++){const D=J[H],k=D.totalLength,h=k/60;for(let x=0;x<60;x++){const Q=new Mt({color:16711680,fog:!0}),F=new Le(E,Q),c=x*h;let U=c;for(let Z=0;Z<D.points.length-1;Z++){const G=D.points[Z],ne=D.points[Z+1],De=G.distanceTo(ne);if(U<=De){const Re=U/De;F.position.lerpVectors(G,ne,Re);break}U-=De}W.push(F),se.push(c),Ie.push(H),ye.push(1),P.add(F)}for(let x=0;x<60;x++){const Q=new Mt({color:16777215,fog:!0}),F=new Le(E,Q),c=k-(x*h+h/2);let U=k-c;const Z=[...D.points].reverse();for(let G=0;G<Z.length-1;G++){const ne=Z[G],De=Z[G+1],Re=ne.distanceTo(De);if(U<=Re){const Ge=U/Re;F.position.lerpVectors(ne,De,Ge);break}U-=Re}W.push(F),se.push(c),Ie.push(H),ye.push(-1),P.add(F)}}e.add(P)}return e.add(M),{cityGroup:M,instancedLines:a,particleGroup:P,particles:W,paths:J,particleDistances:se,particlePaths:Ie,particleDirections:ye}},ve=M=>{if(M<10)return .05+M*.10555555555555556;if(M>=22){const a=31-M,P=(1-.05)/9;return .05+a*P}return 1},{cityGroup:j,instancedLines:g,particleGroup:N,particles:m,paths:L,particleDistances:$,particlePaths:fe,particleDirections:Ce}=R();return{cityGroup:j,buildingLines:g?[g]:[],updateParticles:M=>{const a=100*M;for(let P=0;P<m.length;P++){const W=Ce[P],J=fe[P],se=L[J],Ie=se.totalLength;$[P]+=a*W,W===1?($[P]=$[P]%Ie,$[P]<0&&($[P]+=Ie)):$[P]=($[P]+Ie)%Ie;const ye=$[P],Pe=W===1?se.points:[...se.points].reverse();let S=W===1?ye:Ie-ye;for(let E=0;E<Pe.length-1;E++){const H=Pe[E],D=Pe[E+1],k=H.distanceTo(D);if(S<=k){const h=S/k;m[P].position.lerpVectors(H,D,h);break}S-=k}}},dispose:()=>{g&&(j.remove(g),g.geometry.dispose(),g.material.dispose()),N&&(e.remove(N),N.children.forEach(M=>{M.geometry.dispose(),M.material.dispose()})),e.remove(j)}}}Ne.registerPlugin(pe);function Pi(s,e,o,t,r,n,i={},l,f){const{CUBE_SPACING:w,FIRST_CUBE_Z:y}=n,d=(t==null?void 0:t.length)||0,p=y-(d+1)*w;let u=!1;const v=Math.abs(p)+(d-1)*w;let T=Ne.timeline();return T=Ne.timeline({scrollTrigger:{trigger:o.value,start:"top top",end:`+=${v}`,scrub:i.scrub||.5,pin:!0,onUpdate:q=>{if(!u){const K=q.progress,re=We.lerp(0,p,K);e.position.set(0,0,re),e.lookAt(0,0,p)}r(e)}}}),T.fromTo(e.position,{z:0},{z:p,duration:1,ease:"none"},0),{setReverting:q=>{u=q},timeline:T}}function Mi(s,e,o){const l=o-1e3,f=1e3,w=o,y=150,d=-500,p=o,u=new yr,v=new Float32Array(2e3*3),T=new Float32Array(2e3),_=new Float32Array(2e3);let q=0;for(;q<2e3;){const Y=(Math.random()-.5)*4e3,R=(Math.random()-.5)*4e3,ve=-1e3+Math.random()*(l- -1e3),j=ve>w&&Math.abs(Y)<f&&Math.abs(R)<f,g=Math.abs(Y)<y&&Math.abs(R)<y&&ve>p&&ve<d;if(!j&&!g){const N=q*3;v[N]=Y,v[N+1]=R,v[N+2]=ve;const m=.1+Math.random()*(.7-.1);T[q]=m,_[q]=m,q++}}u.setAttribute("position",new hn(v,3)),u.setAttribute("opacity",new hn(_,1));const K=new ar({uniforms:{color:{value:new _t(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),re=new Ls(u,K);s.add(re);const C=u.attributes.opacity;for(let Y=0;Y<2e3;Y++)Ne.to({opacity:T[Y]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){_[Y]=this.targets()[0].opacity,C.needsUpdate=!0}});return{dispose:()=>{Ne.killTweensOf(_),s.remove(re),u.dispose(),K.dispose()}}}function Ei(s,e){const t=e-1500,r=100,n=2,i=64,l=1e3,f=i*3,w=[4,4.5,5],y=6;let d,p,u,v,T,_;const q=[],K=[[],[],[]],re=[[],[],[]],C=[[],[],[]];let we=[0,0,0];const Y=()=>{const g=0-t,N=[];for(let M=0;M<r;M++){const a=M/(r-1),P=0-a*g,W=a*5*2*Math.PI,J=90*(.8+.2*Math.sin(W*2)),se=new Te(J*Math.cos(W),J*Math.sin(W),P);(isNaN(se.x)||isNaN(se.y)||isNaN(se.z))&&console.error("NaN in chaserPath points",{t:a,z:P,projectMaxZ:e}),N.push(se)}d=new ko(N);const m=new yr().setFromPoints(d.getPoints(200));v=new Bo(m,new Tt({color:16711935,linewidth:2,visible:!1})),s.add(v);const L=[];for(let M=0;M<r;M++){const a=M/(r-1),P=0-a*g,W=a*3*2*Math.PI,J=60*(.8+.2*Math.sin(W*4)),se=new Te(J*Math.cos(W),J*Math.sin(W),P);(isNaN(se.x)||isNaN(se.y)||isNaN(se.z))&&console.error("NaN in chaserPath2 points",{t:a,z:P,projectMaxZ:e}),L.push(se)}p=new ko(L);const $=new yr().setFromPoints(p.getPoints(200));T=new Bo($,new Tt({color:65535,linewidth:2,visible:!1})),s.add(T);const fe=[];for(let M=0;M<r;M++){const a=M/(r-1),P=0-a*g,W=a*7*2*Math.PI,J=100,se=90,Ie=.1*Math.sin(W),ye=new Te(J*(1+Ie)*Math.cos(W),se*(1-Ie)*Math.sin(W),P);(isNaN(ye.x)||isNaN(ye.y)||isNaN(ye.z))&&console.error("NaN in chaserPath3 points",{t:a,z:P,projectMaxZ:e}),fe.push(ye)}u=new ko(fe);const Ce=new yr().setFromPoints(u.getPoints(200));_=new Bo(Ce,new Tt({color:16776960,linewidth:2,visible:!1})),s.add(_);const X=[16711680,65280,255],z=new Qr(n,n,n);z.attributes.color&&delete z.attributes.color;for(let M=0;M<3;M++){const a=new yt;a.opacity=1,a.renderOrder=1,q[M]=a,s.add(a);for(let P=0;P<f;P++){const W=new Mt({color:X[M],transparent:!0,opacity:0,blending:Ns,fog:!0,depthWrite:!1}),J=new Le(z,W);J.renderOrder=1,J.visible=!1,a.add(J),K[M][P]=J,re[M][P]=0,C[M][P]=!1}}},R=g=>{const N=[d,p,u][g],m=N.getLength(),L=C[g].filter(fe=>fe).length;if(f-L>=i){let fe=0;for(let Ce=0;Ce<i;Ce++){const X=C[g].findIndex(se=>!se);if(X===-1){console.warn(`No available chasers for path ${g}, emitted ${fe}/${i}`);break}const z=fe/(i-1),M=.05+(1-.05)*Math.pow(z,3),a=new Mt({color:[16711680,65280,255][g],transparent:!0,opacity:M,blending:Ht,fog:!0,depthWrite:!1});K[g][X].material=a,K[g][X].visible=!0;const P=fe*y;re[g][X]=P,C[g][X]=!0;const W=P/m,J=N.getPointAt(W);K[g][X].position.copy(J),fe++}}},ve=g=>{const N=performance.now()/1e3,m=[d,p,u];for(let L=0;L<3;L++){N-we[L]>=w[L]&&(R(L),we[L]=N);const $=m[L],fe=$.getLength(),Ce=l*g;for(let X=0;X<f;X++)if(C[L][X]){re[L][X]+=Ce;const z=re[L][X]/fe;if(z>=1)K[L][X].visible=!1,C[L][X]=!1,re[L][X]=0;else{const M=$.getPointAt(z);K[L][X].position.copy(M)}}}};return Y(),{chaserPath:d,chaserPath2:p,chaserPath3:u,updateChasers:ve,dispose:()=>{s.remove(v),s.remove(T),s.remove(_),v.geometry.dispose(),v.material.dispose(),T.geometry.dispose(),T.material.dispose(),_.geometry.dispose(),_.material.dispose(),q.forEach(g=>{g.children.forEach(N=>{N.geometry.dispose(),N.material.dispose()}),s.remove(g)})}}}const Ii={class:"preloader"},Di={class:"progress-label"},Ai=en({__name:"Preloader",props:{progress:{}},setup(s){return(e,o)=>(So(),tn("div",Ii,[ir("div",Di,gs(Math.round(e.progress))+"%",1)]))}}),Ri=zn(Ai,[["__scopeId","data-v-e5eadefa"]]),Bn=250,go=500,Rr=-500,Go=-520,On=-720,Ln=4e3,ki=en({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(s){Ne.registerPlugin(pe);const e=Un();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const o=s,t={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},r=tr(null),n=tr(null),i=tr(!1),l=tr(0),f=tr(!1),w=tr(!0),y=new Map;tr(null);let d,p,u,v,T,_,q,K=null,re=null,C=null,we=null,Y=null,R=[],ve=null,j=null,g=0,N=null,m;const L=()=>{const z=r.value?r.value.getBoundingClientRect().width:window.innerWidth,M=window.innerHeight,a=e.isMobile?.75:1,P=e.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;u.setSize(z*a,M*a),u.setPixelRatio(P),v.setSize(z*a,M*a),p.aspect=z/M,p.updateProjectionMatrix(),u.domElement.style.width=`${z}px`,u.domElement.style.height=`${M}px`},$=z=>y.has(z)?Promise.resolve(y.get(z)):new Promise((M,a)=>{new Ys().load(z,W=>{W.encoding=void 0,y.set(z,W),M(W)},void 0,W=>a(W))}),fe=async()=>{d=new Fs,d.background=new _t(0),d.fog=new zs(0,700,Ln),p=new Us(75,window.innerWidth/window.innerHeight,1,Ln+6e3),p.position.set(0,0,0),p.lookAt(0,0,1e3),u=new Hs({antialias:!0}),e.isMobile?u.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):u.setPixelRatio(window.devicePixelRatio),u.toneMapping=Gs,u.toneMappingExposure=1,u.outputEncoding=void 0,v=new gi(u);const z=new mi(d,p);if(v.addPass(z),e.isMobile?T=new gr(new It(window.innerWidth,window.innerHeight),1.3,.2,0):T=new gr(new It(window.innerWidth,window.innerHeight),1.6,.2,0),T.renderToScreen=!0,v.addPass(T),r.value)r.value.appendChild(u.domElement),u.domElement.style.opacity="0";else return;_=new $r,_.dom.style.position="fixed",_.dom.style.top="0px",_.dom.style.left="0px",_.dom.style.zIndex="1000",document.body.appendChild(_.dom);const a=o.projects.filter(J=>J.keyart).length+2;let P=0;const W=()=>{P++,l.value=P/a*100,P===a&&(i.value=!0)};await $(o.projectGridFile).then(()=>W()).catch(()=>W()),await $(o.projectGridFile2).then(()=>W()).catch(()=>W());for(const J of o.projects)J.keyart?await $(J.keyart).then(()=>W()).catch(()=>W()):W();N=Si(d,{CUBE_SIZE:Bn,CUBE_SPACING:go,FIRST_CUBE_Z:Rr},o.projects,o.projectGridFile,o.projectGridFile2,t,y);try{const J=await N.getInitializedData();if(m=J.maxZ,m===void 0||isNaN(m))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:se}=vi(d,d,{CUBE_SIZE:Bn,FIRST_CUBE_Z:Rr},t);if(R=[...se,...J.projectCubes],ve=J.updateCubeColors,t.showCars){const{cityGroup:Ie,updateParticles:ye,dispose:Pe}=Ci(d,d,m,t);q=ye,Y=Pe}if(t.showStarfield){const{dispose:Ie}=Mi(d,p,m);K=Ie}if(t.showChasers){const{dispose:Ie,updateChasers:ye}=Ei(d,m);C=Ie,we=ye}L()}catch(J){console.error("Error initializing project cubes:",J),m=Rr-(o.projects.length+1)*go}},Ce=(z=0)=>{if(j=requestAnimationFrame(Ce),u&&v){const M=(z-g)/1e3;g=z,q(M),we&&we(M);const a=4e3,P=1e3,W=Math.abs(p.position.z-m);p.far=Math.max(a+P,W),p.updateProjectionMatrix();const J=On-Go;let se=0;p.position.z>=Go?se=0:p.position.z<=On?se=1:se=(p.position.z-Go)/J,e.isMobile?T.strength=We.lerp(1.3,0,se):T.strength=We.lerp(1.6,.125,se),v.render()}_.update()};ms(()=>{fe().then(()=>{if(i.value){j=requestAnimationFrame(Ce);let z=null;const M=N.getInitializedData().then(({projectCubes:P})=>{P.forEach(J=>{J.userData.isActive=!0});const W=Rr-(o.projects.length-1)*go;p.position.set(0,0,5e3),p.lookAt(0,0,W),p.updateProjectionMatrix(),ve(p),v.render(),R.length&&ve&&(z=Pi(d,p,n,R,ve,{CUBE_SPACING:go,FIRST_CUBE_Z:Rr},{scrub:e.isMobile?3:1}).setReverting),u&&re===null&&(re=N.setupInteractivity(p,u.domElement,J=>{z&&z(J)})),window.scrollTo({top:0,behavior:"auto"})}),a=()=>{M.then(()=>{w.value=!1,p.position.set(0,0,5e3),p.updateProjectionMatrix(),Ne.to(u.domElement,{opacity:1,duration:.5,ease:"power4.out"});const P={z:5e3};Ne.to(P,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{p.position.z=P.z,p.updateProjectionMatrix()},onComplete:()=>{p.position.z=0,f.value=!0}})})};Ne.delayedCall(.5,a)}}).catch(z=>{console.error("Initialization failed:",z)}),window.addEventListener("resize",X)}),_s(()=>{j!==null&&cancelAnimationFrame(j),re&&re(),window.removeEventListener("resize",X),pe.getAll().forEach(z=>z.kill()),u.dispose(),v.dispose(),d.clear(),document.body.removeChild(_.dom),K&&K(),C&&C(),Y&&Y()});const X=()=>{L(),pe.refresh()};return(z,M)=>(So(),tn("section",{ref_key:"wrapper",ref:n,class:"wrapper"},[kr(ws,{name:"fade"},{default:vs(()=>[w.value?(So(),bs(Ri,{key:0,progress:l.value},null,8,["progress"])):ys("",!0)]),_:1}),ir("div",{ref_key:"tunnelWrapper",ref:r,class:"tunnel-wrapper"},null,512)],512))}}),Bi=zn(ki,[["__scopeId","data-v-fd673b48"]]),Oi={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Li={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Ni={class:"overflow-hidden"},Hi=en({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(s){return(e,o)=>(So(),tn(Ss,null,[kr(xs(Ts),{title:"Welcome"}),ir("div",Oi,[ir("nav",Li,[kr(Xs)]),ir("div",Ni,[kr(Bi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),o[0]||(o[0]=ir("div",{class:"flex justify-center items-center"},null,-1)),o[1]||(o[1]=ir("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),kr(Ws)])],64))}});export{Hi as default};
