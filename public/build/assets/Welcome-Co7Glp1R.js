import{W as Tr,d as Qt,I as cs,e as Us,o as Dn,a as ho,t as Mr,x as Pr,y as Sr,b as Ho,w as Ws,c as Ys,f as Cr,T as Er,u as Ar,m as kr}from"./app-D9QjhJ0Y.js";import{c as Ne,O as Dr,e as io,F as Xo,j as go,U as Qn,V as Le,k as Tn,H as Mn,N as Ir,C as Rr,l as St,d as We,b as qt,m as ut,E as Or,n as Xs,o as js,p as Mo,q as Lr,r as Br,s as zr,P as Hn,t as Nr,v as oo,G as It,w as Hr,a as Xt,L as Rt,g as Be,x as Ze,B as Ro,y as jo,f as pt,u as Vs,R as Fr,z as Gr,I as Ur,J as to,K as qs,Q as Zs,T as xs,X as Wr,Y as Yr,Z as Fn,_ as bs,$ as Xr,a0 as Gn,a1 as Un,a2 as jr,S as Vr,a3 as qr,a4 as Zr,W as $r,a5 as Qr,a6 as Kr,h as Jr,i as ei}from"./GlobalFooter-DWE7W009.js";import{u as rn,_ as ti}from"./App.vue_vue_type_script_setup_true_lang-BT8fI-vv.js";import{_ as $s}from"./_plugin-vue_export-helper-DlAUqK2U.js";function oi(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function ni(p,e,n){return e&&oi(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gt,Pn,Ht,so,ro,ko,Qs,fo,Vo,Ks,Jt,jt,Js,er=function(){return gt||typeof window<"u"&&(gt=window.gsap)&&gt.registerPlugin&&gt},tr=1,Ao=[],Fe=[],$t=[],qo=Date.now,Kn=function(e,n){return n},si=function(){var e=Vo.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,Fe),o.push.apply(o,$t),Fe=t,$t=o,Kn=function(l,f){return n[l](f)}},ao=function(e,n){return~$t.indexOf(e)&&$t[$t.indexOf(e)+1][n]},Zo=function(e){return!!~Ks.indexOf(e)},Mt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Tt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},un="scrollLeft",fn="scrollTop",Jn=function(){return Jt&&Jt.isPressed||Fe.cache++},In=function(e,n){var t=function o(s){if(s||s===0){tr&&(Ht.history.scrollRestoration="manual");var l=Jt&&Jt.isPressed;s=o.v=Math.round(s)||(Jt&&Jt.iOS?1:0),e(s),o.cacheID=Fe.cache,l&&Kn("ss",s)}else(n||Fe.cache!==o.cacheID||Kn("ref"))&&(o.cacheID=Fe.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},At={s:un,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:In(function(p){return arguments.length?Ht.scrollTo(p,ft.sc()):Ht.pageXOffset||so[un]||ro[un]||ko[un]||0})},ft={s:fn,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:At,sc:In(function(p){return arguments.length?Ht.scrollTo(At.sc(),p):Ht.pageYOffset||so[fn]||ro[fn]||ko[fn]||0})},Dt=function(e,n){return(n&&n._ctx&&n._ctx.selector||gt.utils.toArray)(e)[0]||(typeof e=="string"&&gt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},lo=function(e,n){var t=n.s,o=n.sc;Zo(e)&&(e=so.scrollingElement||ro);var s=Fe.indexOf(e),l=o===ft.sc?1:2;!~s&&(s=Fe.push(e)-1),Fe[s+l]||Mt(e,"scroll",Jn);var f=Fe[s+l],w=f||(Fe[s+l]=In(ao(e,t),!0)||(Zo(e)?o:In(function(O){return arguments.length?e[t]=O:e[t]})));return w.target=e,f||(w.smooth=gt.getProperty(e,"scrollBehavior")==="smooth"),w},es=function(e,n,t){var o=e,s=e,l=qo(),f=l,w=n||50,O=Math.max(500,w*3),U=function(_,M){var x=qo();M||x-l>w?(s=o,o=_,f=l,l=x):t?o+=_:o=s+(_-s)/(x-f)*(l-f)},A=function(){s=o=t?0:o,f=l=0},T=function(_){var M=f,x=s,N=qo();return(_||_===0)&&_!==o&&U(_),l===f||N-f>O?0:(o+(t?x:-x))/((t?N:l)-M)*1e3};return{update:U,reset:A,getVelocity:T}},Bo=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},ws=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},or=function(){Vo=gt.core.globals().ScrollTrigger,Vo&&Vo.core&&si()},nr=function(e){return gt=e||er(),!Pn&&gt&&typeof document<"u"&&document.body&&(Ht=window,so=document,ro=so.documentElement,ko=so.body,Ks=[Ht,so,ro,ko],gt.utils.clamp,Js=gt.core.context||function(){},fo="onpointerenter"in ko?"pointer":"mouse",Qs=st.isTouch=Ht.matchMedia&&Ht.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ht||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,jt=st.eventTypes=("ontouchstart"in ro?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in ro?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return tr=0},500),or(),Pn=1),Pn};At.op=ft;Fe.cache=0;var st=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){Pn||nr(gt)||console.warn("Please gsap.registerPlugin(Observer)"),Vo||or();var o=t.tolerance,s=t.dragMinimum,l=t.type,f=t.target,w=t.lineHeight,O=t.debounce,U=t.preventDefault,A=t.onStop,T=t.onStopDelay,g=t.ignore,_=t.wheelSpeed,M=t.event,x=t.onDragStart,N=t.onDragEnd,Q=t.onDrag,F=t.onPress,S=t.onRelease,X=t.onRight,Z=t.onLeft,R=t.onUp,j=t.onDown,K=t.onChangeX,P=t.onChangeY,ae=t.onChange,C=t.onToggleX,V=t.onToggleY,pe=t.onHover,le=t.onHoverEnd,oe=t.onMove,k=t.ignoreCheck,L=t.isNormalizer,ie=t.onGestureStart,u=t.onGestureEnd,ce=t.onWheel,de=t.onEnable,Te=t.onDisable,h=t.onClick,c=t.scrollSpeed,i=t.capture,r=t.allowClicks,b=t.lockAxis,E=t.onLockAxis;this.target=f=Dt(f)||ro,this.vars=t,g&&(g=gt.utils.toArray(g)),o=o||1e-9,s=s||0,_=_||1,c=c||1,l=l||"wheel,touch,pointer",O=O!==!1,w||(w=parseFloat(Ht.getComputedStyle(ko).lineHeight)||22);var y,B,Y,H,v,z,$,d=this,m=0,a=0,ee=t.passive||!U&&t.passive!==!1,ue=lo(f,At),Ge=lo(f,ft),Xe=ue(),G=Ge(),te=~l.indexOf("touch")&&!~l.indexOf("pointer")&&jt[0]==="pointerdown",xe=Zo(f),ne=f.ownerDocument||so,me=[0,0,0],be=[0,0,0],Se=0,se=function(){return Se=qo()},ye=function(J,Ee){return(d.event=J)&&g&&~g.indexOf(J.target)||Ee&&te&&J.pointerType!=="touch"||k&&k(J,Ee)},we=function(){d._vx.reset(),d._vy.reset(),B.pause(),A&&A(d)},fe=function(){var J=d.deltaX=ws(me),Ee=d.deltaY=ws(be),I=Math.abs(J)>=o,q=Math.abs(Ee)>=o;ae&&(I||q)&&ae(d,J,Ee,me,be),I&&(X&&d.deltaX>0&&X(d),Z&&d.deltaX<0&&Z(d),K&&K(d),C&&d.deltaX<0!=m<0&&C(d),m=d.deltaX,me[0]=me[1]=me[2]=0),q&&(j&&d.deltaY>0&&j(d),R&&d.deltaY<0&&R(d),P&&P(d),V&&d.deltaY<0!=a<0&&V(d),a=d.deltaY,be[0]=be[1]=be[2]=0),(H||Y)&&(oe&&oe(d),Y&&(x&&Y===1&&x(d),Q&&Q(d),Y=0),H=!1),z&&!(z=!1)&&E&&E(d),v&&(ce(d),v=!1),y=0},Me=function(J,Ee,I){me[I]+=J,be[I]+=Ee,d._vx.update(J),d._vy.update(Ee),O?y||(y=requestAnimationFrame(fe)):fe()},je=function(J,Ee){b&&!$&&(d.axis=$=Math.abs(J)>Math.abs(Ee)?"x":"y",z=!0),$!=="y"&&(me[2]+=J,d._vx.update(J,!0)),$!=="x"&&(be[2]+=Ee,d._vy.update(Ee,!0)),O?y||(y=requestAnimationFrame(fe)):fe()},Ie=function(J){if(!ye(J,1)){J=Bo(J,U);var Ee=J.clientX,I=J.clientY,q=Ee-d.x,W=I-d.y,re=d.isDragging;d.x=Ee,d.y=I,(re||(q||W)&&(Math.abs(d.startX-Ee)>=s||Math.abs(d.startY-I)>=s))&&(Y=re?2:1,re||(d.isDragging=!0),je(q,W))}},it=d.onPress=function(D){ye(D,1)||D&&D.button||(d.axis=$=null,B.pause(),d.isPressed=!0,D=Bo(D),m=a=0,d.startX=d.x=D.clientX,d.startY=d.y=D.clientY,d._vx.reset(),d._vy.reset(),Mt(L?f:ne,jt[1],Ie,ee,!0),d.deltaX=d.deltaY=0,F&&F(d))},De=d.onRelease=function(D){if(!ye(D,1)){Tt(L?f:ne,jt[1],Ie,!0);var J=!isNaN(d.y-d.startY),Ee=d.isDragging,I=Ee&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),q=Bo(D);!I&&J&&(d._vx.reset(),d._vy.reset(),U&&r&&gt.delayedCall(.08,function(){if(qo()-Se>300&&!D.defaultPrevented){if(D.target.click)D.target.click();else if(ne.createEvent){var W=ne.createEvent("MouseEvents");W.initMouseEvent("click",!0,!0,Ht,1,q.screenX,q.screenY,q.clientX,q.clientY,!1,!1,!1,!1,0,null),D.target.dispatchEvent(W)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,A&&Ee&&!L&&B.restart(!0),Y&&fe(),N&&Ee&&N(d),S&&S(d,I)}},mt=function(J){return J.touches&&J.touches.length>1&&(d.isGesturing=!0)&&ie(J,d.isDragging)},ot=function(){return(d.isGesturing=!1)||u(d)},Ae=function(J){if(!ye(J)){var Ee=ue(),I=Ge();Me((Ee-Xe)*c,(I-G)*c,1),Xe=Ee,G=I,A&&B.restart(!0)}},qe=function(J){if(!ye(J)){J=Bo(J,U),ce&&(v=!0);var Ee=(J.deltaMode===1?w:J.deltaMode===2?Ht.innerHeight:1)*_;Me(J.deltaX*Ee,J.deltaY*Ee,0),A&&!L&&B.restart(!0)}},et=function(J){if(!ye(J)){var Ee=J.clientX,I=J.clientY,q=Ee-d.x,W=I-d.y;d.x=Ee,d.y=I,H=!0,A&&B.restart(!0),(q||W)&&je(q,W)}},_t=function(J){d.event=J,pe(d)},Ue=function(J){d.event=J,le(d)},Yt=function(J){return ye(J)||Bo(J,U)&&h(d)};B=d._dc=gt.delayedCall(T||.25,we).pause(),d.deltaX=d.deltaY=0,d._vx=es(0,50,!0),d._vy=es(0,50,!0),d.scrollX=ue,d.scrollY=Ge,d.isDragging=d.isGesturing=d.isPressed=!1,Js(this),d.enable=function(D){return d.isEnabled||(Mt(xe?ne:f,"scroll",Jn),l.indexOf("scroll")>=0&&Mt(xe?ne:f,"scroll",Ae,ee,i),l.indexOf("wheel")>=0&&Mt(f,"wheel",qe,ee,i),(l.indexOf("touch")>=0&&Qs||l.indexOf("pointer")>=0)&&(Mt(f,jt[0],it,ee,i),Mt(ne,jt[2],De),Mt(ne,jt[3],De),r&&Mt(f,"click",se,!0,!0),h&&Mt(f,"click",Yt),ie&&Mt(ne,"gesturestart",mt),u&&Mt(ne,"gestureend",ot),pe&&Mt(f,fo+"enter",_t),le&&Mt(f,fo+"leave",Ue),oe&&Mt(f,fo+"move",et)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=H=Y=!1,d._vx.reset(),d._vy.reset(),Xe=ue(),G=Ge(),D&&D.type&&it(D),de&&de(d)),d},d.disable=function(){d.isEnabled&&(Ao.filter(function(D){return D!==d&&Zo(D.target)}).length||Tt(xe?ne:f,"scroll",Jn),d.isPressed&&(d._vx.reset(),d._vy.reset(),Tt(L?f:ne,jt[1],Ie,!0)),Tt(xe?ne:f,"scroll",Ae,i),Tt(f,"wheel",qe,i),Tt(f,jt[0],it,i),Tt(ne,jt[2],De),Tt(ne,jt[3],De),Tt(f,"click",se,!0),Tt(f,"click",Yt),Tt(ne,"gesturestart",mt),Tt(ne,"gestureend",ot),Tt(f,fo+"enter",_t),Tt(f,fo+"leave",Ue),Tt(f,fo+"move",et),d.isEnabled=d.isPressed=d.isDragging=!1,Te&&Te(d))},d.kill=d.revert=function(){d.disable();var D=Ao.indexOf(d);D>=0&&Ao.splice(D,1),Jt===d&&(Jt=0)},Ao.push(d),L&&Zo(f)&&(Jt=d),d.enable(M)},ni(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();st.version="3.12.7";st.create=function(p){return new st(p)};st.register=nr;st.getAll=function(){return Ao.slice()};st.getById=function(p){return Ao.filter(function(e){return e.vars.id===p})[0]};er()&&gt.registerPlugin(st);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var he,Co,He,Je,Nt,Ve,us,Rn,nn,$o,Fo,pn,xt,Nn,ts,Ct,_s,vs,Eo,sr,Wn,rr,Pt,os,ir,ar,no,ns,fs,Do,ps,On,ss,Yn,dn=1,bt=Date.now,Xn=bt(),Wt=0,Go=0,Ts=function(e,n,t){var o=zt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Ms=function(e,n){return n&&(!zt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},ri=function p(){return Go&&requestAnimationFrame(p)},Ps=function(){return Nn=1},Ss=function(){return Nn=0},Vt=function(e){return e},Uo=function(e){return Math.round(e*1e5)/1e5||0},lr=function(){return typeof window<"u"},cr=function(){return he||lr()&&(he=window.gsap)&&he.registerPlugin&&he},wo=function(e){return!!~us.indexOf(e)},ur=function(e){return(e==="Height"?ps:He["inner"+e])||Nt["client"+e]||Ve["client"+e]},fr=function(e){return ao(e,"getBoundingClientRect")||(wo(e)?function(){return kn.width=He.innerWidth,kn.height=ps,kn}:function(){return Kt(e)})},ii=function(e,n,t){var o=t.d,s=t.d2,l=t.a;return(l=ao(e,"getBoundingClientRect"))?function(){return l()[o]}:function(){return(n?ur(s):e["client"+s])||0}},ai=function(e,n){return!n||~$t.indexOf(e)?fr(e):function(){return kn}},Zt=function(e,n){var t=n.s,o=n.d2,s=n.d,l=n.a;return Math.max(0,(t="scroll"+o)&&(l=ao(e,t))?l()-fr(e)()[s]:wo(e)?(Nt[t]||Ve[t])-ur(o):e[t]-e["offset"+o])},hn=function(e,n){for(var t=0;t<Eo.length;t+=3)(!n||~n.indexOf(Eo[t+1]))&&e(Eo[t],Eo[t+1],Eo[t+2])},zt=function(e){return typeof e=="string"},wt=function(e){return typeof e=="function"},Wo=function(e){return typeof e=="number"},po=function(e){return typeof e=="object"},zo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},jn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},Po=Math.abs,pr="left",dr="top",ds="right",hs="bottom",yo="width",xo="height",Qo="Right",Ko="Left",Jo="Top",en="Bottom",rt="padding",Gt="margin",Oo="Width",gs="Height",ct="px",Ut=function(e){return He.getComputedStyle(e)},li=function(e){var n=Ut(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Cs=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},Kt=function(e,n){var t=n&&Ut(e)[ts]!=="matrix(1, 0, 0, 1, 0, 0)"&&he.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Ln=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},hr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},ci=function(e){return function(n){return he.utils.snap(hr(e),n)}},ms=function(e){var n=he.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,l){l===void 0&&(l=.001);var f;if(!s)return n(o);if(s>0){for(o-=l,f=0;f<t.length;f++)if(t[f]>=o)return t[f];return t[f-1]}else for(f=t.length,o+=l;f--;)if(t[f]<=o)return t[f];return t[0]}:function(o,s,l){l===void 0&&(l=.001);var f=n(o);return!s||Math.abs(f-o)<l||f-o<0==s<0?f:n(s<0?o-e:o+e)}},ui=function(e){return function(n,t){return ms(hr(e))(n,t.direction)}},gn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},ht=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},dt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},mn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Es={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},yn={toggleActions:"play",anticipatePin:0},Bn={top:0,left:0,center:.5,bottom:1,right:1},Sn=function(e,n){if(zt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Bn?Bn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},xn=function(e,n,t,o,s,l,f,w){var O=s.startColor,U=s.endColor,A=s.fontSize,T=s.indent,g=s.fontWeight,_=Je.createElement("div"),M=wo(t)||ao(t,"pinType")==="fixed",x=e.indexOf("scroller")!==-1,N=M?Ve:t,Q=e.indexOf("start")!==-1,F=Q?O:U,S="border-color:"+F+";font-size:"+A+";color:"+F+";font-weight:"+g+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return S+="position:"+((x||w)&&M?"fixed;":"absolute;"),(x||w||!M)&&(S+=(o===ft?ds:hs)+":"+(l+parseFloat(T))+"px;"),f&&(S+="box-sizing:border-box;text-align:left;width:"+f.offsetWidth+"px;"),_._isStart=Q,_.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),_.style.cssText=S,_.innerText=n||n===0?e+"-"+n:e,N.children[0]?N.insertBefore(_,N.children[0]):N.appendChild(_),_._offset=_["offset"+o.op.d2],Cn(_,0,o,Q),_},Cn=function(e,n,t,o){var s={display:"block"},l=t[o?"os2":"p2"],f=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+l+Oo]=1,s["border"+f+Oo]=0,s[t.p]=n+"px",he.set(e,s)},ze=[],rs={},sn,As=function(){return bt()-Wt>34&&(sn||(sn=requestAnimationFrame(eo)))},So=function(){(!Pt||!Pt.isPressed||Pt.startX>Ve.clientWidth)&&(Fe.cache++,Pt?sn||(sn=requestAnimationFrame(eo)):eo(),Wt||vo("scrollStart"),Wt=bt())},Vn=function(){ar=He.innerWidth,ir=He.innerHeight},Yo=function(e){Fe.cache++,(e===!0||!xt&&!rr&&!Je.fullscreenElement&&!Je.webkitFullscreenElement&&(!os||ar!==He.innerWidth||Math.abs(He.innerHeight-ir)>He.innerHeight*.25))&&Rn.restart(!0)},_o={},fi=[],gr=function p(){return dt(Oe,"scrollEnd",p)||mo(!0)},vo=function(e){return _o[e]&&_o[e].map(function(n){return n()})||fi},Bt=[],mr=function(e){for(var n=0;n<Bt.length;n+=5)(!e||Bt[n+4]&&Bt[n+4].query===e)&&(Bt[n].style.cssText=Bt[n+1],Bt[n].getBBox&&Bt[n].setAttribute("transform",Bt[n+2]||""),Bt[n+3].uncache=1)},ys=function(e,n){var t;for(Ct=0;Ct<ze.length;Ct++)t=ze[Ct],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));On=!0,n&&mr(n),n||vo("revert")},yr=function(e,n){Fe.cache++,(n||!Et)&&Fe.forEach(function(t){return wt(t)&&t.cacheID++&&(t.rec=0)}),zt(e)&&(He.history.scrollRestoration=fs=e)},Et,bo=0,ks,pi=function(){if(ks!==bo){var e=ks=bo;requestAnimationFrame(function(){return e===bo&&mo(!0)})}},xr=function(){Ve.appendChild(Do),ps=!Pt&&Do.offsetHeight||He.innerHeight,Ve.removeChild(Do)},Ds=function(e){return nn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},mo=function(e,n){if(Nt=Je.documentElement,Ve=Je.body,us=[He,Je,Nt,Ve],Wt&&!e&&!On){ht(Oe,"scrollEnd",gr);return}xr(),Et=Oe.isRefreshing=!0,Fe.forEach(function(o){return wt(o)&&++o.cacheID&&(o.rec=o())});var t=vo("refreshInit");sr&&Oe.sort(),n||ys(),Fe.forEach(function(o){wt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),ze.slice(0).forEach(function(o){return o.refresh()}),On=!1,ze.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",l=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-l),o.refresh()}}),ss=1,Ds(!0),ze.forEach(function(o){var s=Zt(o.scroller,o._dir),l=o.vars.end==="max"||o._endClamp&&o.end>s,f=o._startClamp&&o.start>=s;(l||f)&&o.setPositions(f?s-1:o.start,l?Math.max(f?s:o.start+1,s):o.end,!0)}),Ds(!1),ss=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),Fe.forEach(function(o){wt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),yr(fs,1),Rn.pause(),bo++,Et=2,eo(2),ze.forEach(function(o){return wt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Et=Oe.isRefreshing=!1,vo("refresh")},is=0,En=1,tn,eo=function(e){if(e===2||!Et&&!On){Oe.isUpdating=!0,tn&&tn.update(0);var n=ze.length,t=bt(),o=t-Xn>=50,s=n&&ze[0].scroll();if(En=is>s?-1:1,Et||(is=s),o&&(Wt&&!Nn&&t-Wt>200&&(Wt=0,vo("scrollEnd")),Fo=Xn,Xn=t),En<0){for(Ct=n;Ct-- >0;)ze[Ct]&&ze[Ct].update(0,o);En=1}else for(Ct=0;Ct<n;Ct++)ze[Ct]&&ze[Ct].update(0,o);Oe.isUpdating=!1}sn=0},as=[pr,dr,hs,ds,Gt+en,Gt+Qo,Gt+Jo,Gt+Ko,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],An=as.concat([yo,xo,"boxSizing","max"+Oo,"max"+gs,"position",Gt,rt,rt+Jo,rt+Qo,rt+en,rt+Ko]),di=function(e,n,t){Io(t);var o=e._gsap;if(o.spacerIsNative)Io(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},qn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=as.length,l=n.style,f=e.style,w;s--;)w=as[s],l[w]=t[w];l.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(l.display="inline-block"),f[hs]=f[ds]="auto",l.flexBasis=t.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[yo]=Ln(e,At)+ct,l[xo]=Ln(e,ft)+ct,l[rt]=f[Gt]=f[dr]=f[pr]="0",Io(o),f[yo]=f["max"+Oo]=t[yo],f[xo]=f["max"+gs]=t[xo],f[rt]=t[rt],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},hi=/([A-Z])/g,Io=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,l;for((e.t._gsap||he.core.getCache(e.t)).uncache=1;o<t;o+=2)l=e[o+1],s=e[o],l?n[s]=l:n[s]&&n.removeProperty(s.replace(hi,"-$1").toLowerCase())}},bn=function(e){for(var n=An.length,t=e.style,o=[],s=0;s<n;s++)o.push(An[s],t[An[s]]);return o.t=e,o},gi=function(e,n,t){for(var o=[],s=e.length,l=t?8:0,f;l<s;l+=2)f=e[l],o.push(f,f in n?n[f]:e[l+1]);return o.t=e.t,o},kn={left:0,top:0},Is=function(e,n,t,o,s,l,f,w,O,U,A,T,g,_){wt(e)&&(e=e(w)),zt(e)&&e.substr(0,3)==="max"&&(e=T+(e.charAt(4)==="="?Sn("0"+e.substr(3),t):0));var M=g?g.time():0,x,N,Q;if(g&&g.seek(0),isNaN(e)||(e=+e),Wo(e))g&&(e=he.utils.mapRange(g.scrollTrigger.start,g.scrollTrigger.end,0,T,e)),f&&Cn(f,t,o,!0);else{wt(n)&&(n=n(w));var F=(e||"0").split(" "),S,X,Z,R;Q=Dt(n,w)||Ve,S=Kt(Q)||{},(!S||!S.left&&!S.top)&&Ut(Q).display==="none"&&(R=Q.style.display,Q.style.display="block",S=Kt(Q),R?Q.style.display=R:Q.style.removeProperty("display")),X=Sn(F[0],S[o.d]),Z=Sn(F[1]||"0",t),e=S[o.p]-O[o.p]-U+X+s-Z,f&&Cn(f,Z,o,t-Z<20||f._isStart&&Z>20),t-=t-Z}if(_&&(w[_]=e||-.001,e<0&&(e=0)),l){var j=e+t,K=l._isStart;x="scroll"+o.d2,Cn(l,j,o,K&&j>20||!K&&(A?Math.max(Ve[x],Nt[x]):l.parentNode[x])<=j+1),A&&(O=Kt(f),A&&(l.style[o.op.p]=O[o.op.p]-o.op.m-l._offset+ct))}return g&&Q&&(x=Kt(Q),g.seek(T),N=Kt(Q),g._caScrollDist=x[o.p]-N[o.p],e=e/g._caScrollDist*T),g&&g.seek(M),g?e:Math.round(e)},mi=/(webkit|moz|length|cssText|inset)/i,Rs=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,l,f;if(n===Ve){e._stOrig=s.cssText,f=Ut(e);for(l in f)!+l&&!mi.test(l)&&f[l]&&typeof s[l]=="string"&&l!=="0"&&(s[l]=f[l]);s.top=t,s.left=o}else s.cssText=e._stOrig;he.core.getCache(e).uncache=1,n.appendChild(e)}},br=function(e,n,t){var o=n,s=o;return function(l){var f=Math.round(e());return f!==o&&f!==s&&Math.abs(f-o)>3&&Math.abs(f-s)>3&&(l=f,t&&t()),s=o,o=Math.round(l),o}},wn=function(e,n,t){var o={};o[n.p]="+="+t,he.set(e,o)},Os=function(e,n){var t=lo(e,n),o="_scroll"+n.p2,s=function l(f,w,O,U,A){var T=l.tween,g=w.onComplete,_={};O=O||t();var M=br(t,O,function(){T.kill(),l.tween=0});return A=U&&A||0,U=U||f-O,T&&T.kill(),w[o]=f,w.inherit=!1,w.modifiers=_,_[o]=function(){return M(O+U*T.ratio+A*T.ratio*T.ratio)},w.onUpdate=function(){Fe.cache++,l.tween&&eo()},w.onComplete=function(){l.tween=0,g&&g.call(T)},T=l.tween=he.to(e,w),T};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},ht(e,"wheel",t.wheelHandler),Oe.isTouch&&ht(e,"touchmove",t.wheelHandler),s},Oe=function(){function p(n,t){Co||p.register(he)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ns(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Go){this.update=this.refresh=this.kill=Vt;return}t=Cs(zt(t)||Wo(t)||t.nodeType?{trigger:t}:t,yn);var s=t,l=s.onUpdate,f=s.toggleClass,w=s.id,O=s.onToggle,U=s.onRefresh,A=s.scrub,T=s.trigger,g=s.pin,_=s.pinSpacing,M=s.invalidateOnRefresh,x=s.anticipatePin,N=s.onScrubComplete,Q=s.onSnapComplete,F=s.once,S=s.snap,X=s.pinReparent,Z=s.pinSpacer,R=s.containerAnimation,j=s.fastScrollEnd,K=s.preventOverlaps,P=t.horizontal||t.containerAnimation&&t.horizontal!==!1?At:ft,ae=!A&&A!==0,C=Dt(t.scroller||He),V=he.core.getCache(C),pe=wo(C),le=("pinType"in t?t.pinType:ao(C,"pinType")||pe&&"fixed")==="fixed",oe=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],k=ae&&t.toggleActions.split(" "),L="markers"in t?t.markers:yn.markers,ie=pe?0:parseFloat(Ut(C)["border"+P.p2+Oo])||0,u=this,ce=t.onRefreshInit&&function(){return t.onRefreshInit(u)},de=ii(C,pe,P),Te=ai(C,pe),h=0,c=0,i=0,r=lo(C,P),b,E,y,B,Y,H,v,z,$,d,m,a,ee,ue,Ge,Xe,G,te,xe,ne,me,be,Se,se,ye,we,fe,Me,je,Ie,it,De,mt,ot,Ae,qe,et,_t,Ue;if(u._startClamp=u._endClamp=!1,u._dir=P,x*=45,u.scroller=C,u.scroll=R?R.time.bind(R):r,B=r(),u.vars=t,o=o||t.animation,"refreshPriority"in t&&(sr=1,t.refreshPriority===-9999&&(tn=u)),V.tweenScroll=V.tweenScroll||{top:Os(C,ft),left:Os(C,At)},u.tweenTo=b=V.tweenScroll[P.p],u.scrubDuration=function(I){mt=Wo(I)&&I,mt?De?De.duration(I):De=he.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:mt,paused:!0,onComplete:function(){return N&&N(u)}}):(De&&De.progress(1).kill(),De=0)},o&&(o.vars.lazy=!1,o._initted&&!u.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),u.animation=o.pause(),o.scrollTrigger=u,u.scrubDuration(A),Ie=0,w||(w=o.vars.id)),S&&((!po(S)||S.push)&&(S={snapTo:S}),"scrollBehavior"in Ve.style&&he.set(pe?[Ve,Nt]:C,{scrollBehavior:"auto"}),Fe.forEach(function(I){return wt(I)&&I.target===(pe?Je.scrollingElement||Nt:C)&&(I.smooth=!1)}),y=wt(S.snapTo)?S.snapTo:S.snapTo==="labels"?ci(o):S.snapTo==="labelsDirectional"?ui(o):S.directional!==!1?function(I,q){return ms(S.snapTo)(I,bt()-c<500?0:q.direction)}:he.utils.snap(S.snapTo),ot=S.duration||{min:.1,max:2},ot=po(ot)?$o(ot.min,ot.max):$o(ot,ot),Ae=he.delayedCall(S.delay||mt/2||.1,function(){var I=r(),q=bt()-c<500,W=b.tween;if((q||Math.abs(u.getVelocity())<10)&&!W&&!Nn&&h!==I){var re=(I-H)/ue,ke=o&&!ae?o.totalProgress():re,ge=q?0:(ke-it)/(bt()-Fo)*1e3||0,_e=he.utils.clamp(-re,1-re,Po(ge/2)*ge/.185),Ce=re+(S.inertia===!1?0:_e),ve,Pe,Re=S,tt=Re.onStart,Ke=Re.onInterrupt,yt=Re.onComplete;if(ve=y(Ce,u),Wo(ve)||(ve=Ce),Pe=Math.max(0,Math.round(H+ve*ue)),I<=v&&I>=H&&Pe!==I){if(W&&!W._initted&&W.data<=Po(Pe-I))return;S.inertia===!1&&(_e=ve-re),b(Pe,{duration:ot(Po(Math.max(Po(Ce-ke),Po(ve-ke))*.185/ge/.05||0)),ease:S.ease||"power3",data:Po(Pe-I),onInterrupt:function(){return Ae.restart(!0)&&Ke&&Ke(u)},onComplete:function(){u.update(),h=r(),o&&!ae&&(De?De.resetTo("totalProgress",ve,o._tTime/o._tDur):o.progress(ve)),Ie=it=o&&!ae?o.totalProgress():u.progress,Q&&Q(u),yt&&yt(u)}},I,_e*ue,Pe-I-_e*ue),tt&&tt(u,b.tween)}}else u.isActive&&h!==I&&Ae.restart(!0)}).pause()),w&&(rs[w]=u),T=u.trigger=Dt(T||g!==!0&&g),Ue=T&&T._gsap&&T._gsap.stRevert,Ue&&(Ue=Ue(u)),g=g===!0?T:Dt(g),zt(f)&&(f={targets:T,className:f}),g&&(_===!1||_===Gt||(_=!_&&g.parentNode&&g.parentNode.style&&Ut(g.parentNode).display==="flex"?!1:rt),u.pin=g,E=he.core.getCache(g),E.spacer?Ge=E.pinState:(Z&&(Z=Dt(Z),Z&&!Z.nodeType&&(Z=Z.current||Z.nativeElement),E.spacerIsNative=!!Z,Z&&(E.spacerState=bn(Z))),E.spacer=te=Z||Je.createElement("div"),te.classList.add("pin-spacer"),w&&te.classList.add("pin-spacer-"+w),E.pinState=Ge=bn(g)),t.force3D!==!1&&he.set(g,{force3D:!0}),u.spacer=te=E.spacer,je=Ut(g),se=je[_+P.os2],ne=he.getProperty(g),me=he.quickSetter(g,P.a,ct),qn(g,te,je),G=bn(g)),L){a=po(L)?Cs(L,Es):Es,d=xn("scroller-start",w,C,P,a,0),m=xn("scroller-end",w,C,P,a,0,d),xe=d["offset"+P.op.d2];var Yt=Dt(ao(C,"content")||C);z=this.markerStart=xn("start",w,Yt,P,a,xe,0,R),$=this.markerEnd=xn("end",w,Yt,P,a,xe,0,R),R&&(_t=he.quickSetter([z,$],P.a,ct)),!le&&!($t.length&&ao(C,"fixedMarkers")===!0)&&(li(pe?Ve:C),he.set([d,m],{force3D:!0}),we=he.quickSetter(d,P.a,ct),Me=he.quickSetter(m,P.a,ct))}if(R){var D=R.vars.onUpdate,J=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){u.update(0,0,1),D&&D.apply(R,J||[])})}if(u.previous=function(){return ze[ze.indexOf(u)-1]},u.next=function(){return ze[ze.indexOf(u)+1]},u.revert=function(I,q){if(!q)return u.kill(!0);var W=I!==!1||!u.enabled,re=xt;W!==u.isReverted&&(W&&(qe=Math.max(r(),u.scroll.rec||0),i=u.progress,et=o&&o.progress()),z&&[z,$,d,m].forEach(function(ke){return ke.style.display=W?"none":"block"}),W&&(xt=u,u.update(W)),g&&(!X||!u.isActive)&&(W?di(g,te,Ge):qn(g,te,Ut(g),ye)),W||u.update(W),xt=re,u.isReverted=W)},u.refresh=function(I,q,W,re){if(!((xt||!u.enabled)&&!q)){if(g&&I&&Wt){ht(p,"scrollEnd",gr);return}!Et&&ce&&ce(u),xt=u,b.tween&&!W&&(b.tween.kill(),b.tween=0),De&&De.pause(),M&&o&&o.revert({kill:!1}).invalidate(),u.isReverted||u.revert(!0,!0),u._subPinOffset=!1;var ke=de(),ge=Te(),_e=R?R.duration():Zt(C,P),Ce=ue<=.01,ve=0,Pe=re||0,Re=po(W)?W.end:t.end,tt=t.endTrigger||T,Ke=po(W)?W.start:t.start||(t.start===0||!T?0:g?"0 0":"0 100%"),yt=u.pinnedContainer=t.pinnedContainer&&Dt(t.pinnedContainer,u),Ot=T&&Math.max(0,ze.indexOf(u))||0,at=Ot,lt,nt,$e,Lt,Qe,Ye,vt,kt,ln,co,Ft,uo,cn;for(L&&po(W)&&(uo=he.getProperty(d,P.p),cn=he.getProperty(m,P.p));at-- >0;)Ye=ze[at],Ye.end||Ye.refresh(0,1)||(xt=u),vt=Ye.pin,vt&&(vt===T||vt===g||vt===yt)&&!Ye.isReverted&&(co||(co=[]),co.unshift(Ye),Ye.revert(!0,!0)),Ye!==ze[at]&&(Ot--,at--);for(wt(Ke)&&(Ke=Ke(u)),Ke=Ts(Ke,"start",u),H=Is(Ke,T,ke,P,r(),z,d,u,ge,ie,le,_e,R,u._startClamp&&"_startClamp")||(g?-.001:0),wt(Re)&&(Re=Re(u)),zt(Re)&&!Re.indexOf("+=")&&(~Re.indexOf(" ")?Re=(zt(Ke)?Ke.split(" ")[0]:"")+Re:(ve=Sn(Re.substr(2),ke),Re=zt(Ke)?Ke:(R?he.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,H):H)+ve,tt=T)),Re=Ts(Re,"end",u),v=Math.max(H,Is(Re||(tt?"100% 0":_e),tt,ke,P,r()+ve,$,m,u,ge,ie,le,_e,R,u._endClamp&&"_endClamp"))||-.001,ve=0,at=Ot;at--;)Ye=ze[at],vt=Ye.pin,vt&&Ye.start-Ye._pinPush<=H&&!R&&Ye.end>0&&(lt=Ye.end-(u._startClamp?Math.max(0,Ye.start):Ye.start),(vt===T&&Ye.start-Ye._pinPush<H||vt===yt)&&isNaN(Ke)&&(ve+=lt*(1-Ye.progress)),vt===g&&(Pe+=lt));if(H+=ve,v+=ve,u._startClamp&&(u._startClamp+=ve),u._endClamp&&!Et&&(u._endClamp=v||-.001,v=Math.min(v,Zt(C,P))),ue=v-H||(H-=.01)&&.001,Ce&&(i=he.utils.clamp(0,1,he.utils.normalize(H,v,qe))),u._pinPush=Pe,z&&ve&&(lt={},lt[P.a]="+="+ve,yt&&(lt[P.p]="-="+r()),he.set([z,$],lt)),g&&!(ss&&u.end>=Zt(C,P)))lt=Ut(g),Lt=P===ft,$e=r(),be=parseFloat(ne(P.a))+Pe,!_e&&v>1&&(Ft=(pe?Je.scrollingElement||Nt:C).style,Ft={style:Ft,value:Ft["overflow"+P.a.toUpperCase()]},pe&&Ut(Ve)["overflow"+P.a.toUpperCase()]!=="scroll"&&(Ft.style["overflow"+P.a.toUpperCase()]="scroll")),qn(g,te,lt),G=bn(g),nt=Kt(g,!0),kt=le&&lo(C,Lt?At:ft)(),_?(ye=[_+P.os2,ue+Pe+ct],ye.t=te,at=_===rt?Ln(g,P)+ue+Pe:0,at&&(ye.push(P.d,at+ct),te.style.flexBasis!=="auto"&&(te.style.flexBasis=at+ct)),Io(ye),yt&&ze.forEach(function(Lo){Lo.pin===yt&&Lo.vars.pinSpacing!==!1&&(Lo._subPinOffset=!0)}),le&&r(qe)):(at=Ln(g,P),at&&te.style.flexBasis!=="auto"&&(te.style.flexBasis=at+ct)),le&&(Qe={top:nt.top+(Lt?$e-H:kt)+ct,left:nt.left+(Lt?kt:$e-H)+ct,boxSizing:"border-box",position:"fixed"},Qe[yo]=Qe["max"+Oo]=Math.ceil(nt.width)+ct,Qe[xo]=Qe["max"+gs]=Math.ceil(nt.height)+ct,Qe[Gt]=Qe[Gt+Jo]=Qe[Gt+Qo]=Qe[Gt+en]=Qe[Gt+Ko]="0",Qe[rt]=lt[rt],Qe[rt+Jo]=lt[rt+Jo],Qe[rt+Qo]=lt[rt+Qo],Qe[rt+en]=lt[rt+en],Qe[rt+Ko]=lt[rt+Ko],Xe=gi(Ge,Qe,X),Et&&r(0)),o?(ln=o._initted,Wn(1),o.render(o.duration(),!0,!0),Se=ne(P.a)-be+ue+Pe,fe=Math.abs(ue-Se)>1,le&&fe&&Xe.splice(Xe.length-2,2),o.render(0,!0,!0),ln||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Wn(0)):Se=ue,Ft&&(Ft.value?Ft.style["overflow"+P.a.toUpperCase()]=Ft.value:Ft.style.removeProperty("overflow-"+P.a));else if(T&&r()&&!R)for(nt=T.parentNode;nt&&nt!==Ve;)nt._pinOffset&&(H-=nt._pinOffset,v-=nt._pinOffset),nt=nt.parentNode;co&&co.forEach(function(Lo){return Lo.revert(!1,!0)}),u.start=H,u.end=v,B=Y=Et?qe:r(),!R&&!Et&&(B<qe&&r(qe),u.scroll.rec=0),u.revert(!1,!0),c=bt(),Ae&&(h=-1,Ae.restart(!0)),xt=0,o&&ae&&(o._initted||et)&&o.progress()!==et&&o.progress(et||0,!0).render(o.time(),!0,!0),(Ce||i!==u.progress||R||M||o&&!o._initted)&&(o&&!ae&&o.totalProgress(R&&H<-.001&&!i?he.utils.normalize(H,v,0):i,!0),u.progress=Ce||(B-H)/ue===i?0:i),g&&_&&(te._pinOffset=Math.round(u.progress*Se)),De&&De.invalidate(),isNaN(uo)||(uo-=he.getProperty(d,P.p),cn-=he.getProperty(m,P.p),wn(d,P,uo),wn(z,P,uo-(re||0)),wn(m,P,cn),wn($,P,cn-(re||0))),Ce&&!Et&&u.update(),U&&!Et&&!ee&&(ee=!0,U(u),ee=!1)}},u.getVelocity=function(){return(r()-Y)/(bt()-Fo)*1e3||0},u.endAnimation=function(){zo(u.callbackAnimation),o&&(De?De.progress(1):o.paused()?ae||zo(o,u.direction<0,1):zo(o,o.reversed()))},u.labelToScroll=function(I){return o&&o.labels&&(H||u.refresh()||H)+o.labels[I]/o.duration()*ue||0},u.getTrailing=function(I){var q=ze.indexOf(u),W=u.direction>0?ze.slice(0,q).reverse():ze.slice(q+1);return(zt(I)?W.filter(function(re){return re.vars.preventOverlaps===I}):W).filter(function(re){return u.direction>0?re.end<=H:re.start>=v})},u.update=function(I,q,W){if(!(R&&!W&&!I)){var re=Et===!0?qe:u.scroll(),ke=I?0:(re-H)/ue,ge=ke<0?0:ke>1?1:ke||0,_e=u.progress,Ce,ve,Pe,Re,tt,Ke,yt,Ot;if(q&&(Y=B,B=R?r():re,S&&(it=Ie,Ie=o&&!ae?o.totalProgress():ge)),x&&g&&!xt&&!dn&&Wt&&(!ge&&H<re+(re-Y)/(bt()-Fo)*x?ge=1e-4:ge===1&&v>re+(re-Y)/(bt()-Fo)*x&&(ge=.9999)),ge!==_e&&u.enabled){if(Ce=u.isActive=!!ge&&ge<1,ve=!!_e&&_e<1,Ke=Ce!==ve,tt=Ke||!!ge!=!!_e,u.direction=ge>_e?1:-1,u.progress=ge,tt&&!xt&&(Pe=ge&&!_e?0:ge===1?1:_e===1?2:3,ae&&(Re=!Ke&&k[Pe+1]!=="none"&&k[Pe+1]||k[Pe],Ot=o&&(Re==="complete"||Re==="reset"||Re in o))),K&&(Ke||Ot)&&(Ot||A||!o)&&(wt(K)?K(u):u.getTrailing(K).forEach(function($e){return $e.endAnimation()})),ae||(De&&!xt&&!dn?(De._dp._time-De._start!==De._time&&De.render(De._dp._time-De._start),De.resetTo?De.resetTo("totalProgress",ge,o._tTime/o._tDur):(De.vars.totalProgress=ge,De.invalidate().restart())):o&&o.totalProgress(ge,!!(xt&&(c||I)))),g){if(I&&_&&(te.style[_+P.os2]=se),!le)me(Uo(be+Se*ge));else if(tt){if(yt=!I&&ge>_e&&v+1>re&&re+1>=Zt(C,P),X)if(!I&&(Ce||yt)){var at=Kt(g,!0),lt=re-H;Rs(g,Ve,at.top+(P===ft?lt:0)+ct,at.left+(P===ft?0:lt)+ct)}else Rs(g,te);Io(Ce||yt?Xe:G),fe&&ge<1&&Ce||me(be+(ge===1&&!yt?Se:0))}}S&&!b.tween&&!xt&&!dn&&Ae.restart(!0),f&&(Ke||F&&ge&&(ge<1||!Yn))&&nn(f.targets).forEach(function($e){return $e.classList[Ce||F?"add":"remove"](f.className)}),l&&!ae&&!I&&l(u),tt&&!xt?(ae&&(Ot&&(Re==="complete"?o.pause().totalProgress(1):Re==="reset"?o.restart(!0).pause():Re==="restart"?o.restart(!0):o[Re]()),l&&l(u)),(Ke||!Yn)&&(O&&Ke&&jn(u,O),oe[Pe]&&jn(u,oe[Pe]),F&&(ge===1?u.kill(!1,1):oe[Pe]=0),Ke||(Pe=ge===1?1:3,oe[Pe]&&jn(u,oe[Pe]))),j&&!Ce&&Math.abs(u.getVelocity())>(Wo(j)?j:2500)&&(zo(u.callbackAnimation),De?De.progress(1):zo(o,Re==="reverse"?1:!ge,1))):ae&&l&&!xt&&l(u)}if(Me){var nt=R?re/R.duration()*(R._caScrollDist||0):re;we(nt+(d._isFlipped?1:0)),Me(nt)}_t&&_t(-re/R.duration()*(R._caScrollDist||0))}},u.enable=function(I,q){u.enabled||(u.enabled=!0,ht(C,"resize",Yo),pe||ht(C,"scroll",So),ce&&ht(p,"refreshInit",ce),I!==!1&&(u.progress=i=0,B=Y=h=r()),q!==!1&&u.refresh())},u.getTween=function(I){return I&&b?b.tween:De},u.setPositions=function(I,q,W,re){if(R){var ke=R.scrollTrigger,ge=R.duration(),_e=ke.end-ke.start;I=ke.start+_e*I/ge,q=ke.start+_e*q/ge}u.refresh(!1,!1,{start:Ms(I,W&&!!u._startClamp),end:Ms(q,W&&!!u._endClamp)},re),u.update()},u.adjustPinSpacing=function(I){if(ye&&I){var q=ye.indexOf(P.d)+1;ye[q]=parseFloat(ye[q])+I+ct,ye[1]=parseFloat(ye[1])+I+ct,Io(ye)}},u.disable=function(I,q){if(u.enabled&&(I!==!1&&u.revert(!0,!0),u.enabled=u.isActive=!1,q||De&&De.pause(),qe=0,E&&(E.uncache=1),ce&&dt(p,"refreshInit",ce),Ae&&(Ae.pause(),b.tween&&b.tween.kill()&&(b.tween=0)),!pe)){for(var W=ze.length;W--;)if(ze[W].scroller===C&&ze[W]!==u)return;dt(C,"resize",Yo),pe||dt(C,"scroll",So)}},u.kill=function(I,q){u.disable(I,q),De&&!q&&De.kill(),w&&delete rs[w];var W=ze.indexOf(u);W>=0&&ze.splice(W,1),W===Ct&&En>0&&Ct--,W=0,ze.forEach(function(re){return re.scroller===u.scroller&&(W=1)}),W||Et||(u.scroll.rec=0),o&&(o.scrollTrigger=null,I&&o.revert({kill:!1}),q||o.kill()),z&&[z,$,d,m].forEach(function(re){return re.parentNode&&re.parentNode.removeChild(re)}),tn===u&&(tn=0),g&&(E&&(E.uncache=1),W=0,ze.forEach(function(re){return re.pin===g&&W++}),W||(E.spacer=0)),t.onKill&&t.onKill(u)},ze.push(u),u.enable(!1,!1),Ue&&Ue(u),o&&o.add&&!ue){var Ee=u.update;u.update=function(){u.update=Ee,Fe.cache++,H||v||u.refresh()},he.delayedCall(.01,u.update),ue=.01,H=v=0}else u.refresh();g&&pi()},p.register=function(t){return Co||(he=t||cr(),lr()&&window.document&&p.enable(),Co=Go),Co},p.defaults=function(t){if(t)for(var o in t)yn[o]=t[o];return yn},p.disable=function(t,o){Go=0,ze.forEach(function(l){return l[o?"kill":"disable"](t)}),dt(He,"wheel",So),dt(Je,"scroll",So),clearInterval(pn),dt(Je,"touchcancel",Vt),dt(Ve,"touchstart",Vt),gn(dt,Je,"pointerdown,touchstart,mousedown",Ps),gn(dt,Je,"pointerup,touchend,mouseup",Ss),Rn.kill(),hn(dt);for(var s=0;s<Fe.length;s+=3)mn(dt,Fe[s],Fe[s+1]),mn(dt,Fe[s],Fe[s+2])},p.enable=function(){if(He=window,Je=document,Nt=Je.documentElement,Ve=Je.body,he&&(nn=he.utils.toArray,$o=he.utils.clamp,ns=he.core.context||Vt,Wn=he.core.suppressOverwrites||Vt,fs=He.history.scrollRestoration||"auto",is=He.pageYOffset||0,he.core.globals("ScrollTrigger",p),Ve)){Go=1,Do=document.createElement("div"),Do.style.height="100vh",Do.style.position="absolute",xr(),ri(),st.register(he),p.isTouch=st.isTouch,no=st.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),os=st.isTouch===1,ht(He,"wheel",So),us=[He,Je,Nt,Ve],he.matchMedia?(p.matchMedia=function(O){var U=he.matchMedia(),A;for(A in O)U.add(A,O[A]);return U},he.addEventListener("matchMediaInit",function(){return ys()}),he.addEventListener("matchMediaRevert",function(){return mr()}),he.addEventListener("matchMedia",function(){mo(0,1),vo("matchMedia")}),he.matchMedia().add("(orientation: portrait)",function(){return Vn(),Vn})):console.warn("Requires GSAP 3.11.0 or later"),Vn(),ht(Je,"scroll",So);var t=Ve.hasAttribute("style"),o=Ve.style,s=o.borderTopStyle,l=he.core.Animation.prototype,f,w;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",f=Kt(Ve),ft.m=Math.round(f.top+ft.sc())||0,At.m=Math.round(f.left+At.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(Ve.setAttribute("style",""),Ve.removeAttribute("style")),pn=setInterval(As,250),he.delayedCall(.5,function(){return dn=0}),ht(Je,"touchcancel",Vt),ht(Ve,"touchstart",Vt),gn(ht,Je,"pointerdown,touchstart,mousedown",Ps),gn(ht,Je,"pointerup,touchend,mouseup",Ss),ts=he.utils.checkPrefix("transform"),An.push(ts),Co=bt(),Rn=he.delayedCall(.2,mo).pause(),Eo=[Je,"visibilitychange",function(){var O=He.innerWidth,U=He.innerHeight;Je.hidden?(_s=O,vs=U):(_s!==O||vs!==U)&&Yo()},Je,"DOMContentLoaded",mo,He,"load",mo,He,"resize",Yo],hn(ht),ze.forEach(function(O){return O.enable(0,1)}),w=0;w<Fe.length;w+=3)mn(dt,Fe[w],Fe[w+1]),mn(dt,Fe[w],Fe[w+2])}},p.config=function(t){"limitCallbacks"in t&&(Yn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(pn)||(pn=o)&&setInterval(As,o),"ignoreMobileResize"in t&&(os=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(hn(dt)||hn(ht,t.autoRefreshEvents||"none"),rr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,o){var s=Dt(t),l=Fe.indexOf(s),f=wo(s);~l&&Fe.splice(l,f?6:2),o&&(f?$t.unshift(He,o,Ve,o,Nt,o):$t.unshift(s,o))},p.clearMatchMedia=function(t){ze.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},p.isInViewport=function(t,o,s){var l=(zt(t)?Dt(t):t).getBoundingClientRect(),f=l[s?yo:xo]*o||0;return s?l.right-f>0&&l.left+f<He.innerWidth:l.bottom-f>0&&l.top+f<He.innerHeight},p.positionInViewport=function(t,o,s){zt(t)&&(t=Dt(t));var l=t.getBoundingClientRect(),f=l[s?yo:xo],w=o==null?f/2:o in Bn?Bn[o]*f:~o.indexOf("%")?parseFloat(o)*f/100:parseFloat(o)||0;return s?(l.left+w)/He.innerWidth:(l.top+w)/He.innerHeight},p.killAll=function(t){if(ze.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=_o.killAll||[];_o={},o.forEach(function(s){return s()})}},p}();Oe.version="3.12.7";Oe.saveStyles=function(p){return p?nn(p).forEach(function(e){if(e&&e.style){var n=Bt.indexOf(e);n>=0&&Bt.splice(n,5),Bt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),he.core.getCache(e),ns())}}):Bt};Oe.revert=function(p,e){return ys(!p,e)};Oe.create=function(p,e){return new Oe(p,e)};Oe.refresh=function(p){return p?Yo(!0):(Co||Oe.register())&&mo(!0)};Oe.update=function(p){return++Fe.cache&&eo(p===!0?2:0)};Oe.clearScrollMemory=yr;Oe.maxScroll=function(p,e){return Zt(p,e?At:ft)};Oe.getScrollFunc=function(p,e){return lo(Dt(p),e?At:ft)};Oe.getById=function(p){return rs[p]};Oe.getAll=function(){return ze.filter(function(p){return p.vars.id!=="ScrollSmoother"})};Oe.isScrolling=function(){return!!Wt};Oe.snapDirectional=ms;Oe.addEventListener=function(p,e){var n=_o[p]||(_o[p]=[]);~n.indexOf(e)||n.push(e)};Oe.removeEventListener=function(p,e){var n=_o[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Oe.batch=function(p,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,l=function(O,U){var A=[],T=[],g=he.delayedCall(o,function(){U(A,T),A=[],T=[]}).pause();return function(_){A.length||g.restart(!0),A.push(_.trigger),T.push(_),s<=A.length&&g.progress(1)}},f;for(f in e)t[f]=f.substr(0,2)==="on"&&wt(e[f])&&f!=="onRefreshInit"?l(f,e[f]):e[f];return wt(s)&&(s=s(),ht(Oe,"refresh",function(){return s=e.batchMax()})),nn(p).forEach(function(w){var O={};for(f in t)O[f]=t[f];O.trigger=w,n.push(Oe.create(O))}),n};var Ls=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},Zn=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(st.isTouch?" pinch-zoom":""):"none",e===Nt&&p(Ve,n)},_n={auto:1,scroll:1},yi=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,l=s._gsap||he.core.getCache(s),f=bt(),w;if(!l._isScrollT||f-l._isScrollT>2e3){for(;s&&s!==Ve&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(_n[(w=Ut(s)).overflowY]||_n[w.overflowX]));)s=s.parentNode;l._isScroll=s&&s!==t&&!wo(s)&&(_n[(w=Ut(s)).overflowY]||_n[w.overflowX]),l._isScrollT=f}(l._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},wr=function(e,n,t,o){return st.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&yi,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&ht(Je,st.eventTypes[0],zs,!1,!0)},onDisable:function(){return dt(Je,st.eventTypes[0],zs,!0)}})},xi=/(input|label|select|textarea)/i,Bs,zs=function(e){var n=xi.test(e.target.tagName);(n||Bs)&&(e._gsapAllow=!0,Bs=n)},bi=function(e){po(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,l=n.onRelease,f,w,O=Dt(e.target)||Nt,U=he.core.globals().ScrollSmoother,A=U&&U.get(),T=no&&(e.content&&Dt(e.content)||A&&e.content!==!1&&!A.smooth()&&A.content()),g=lo(O,ft),_=lo(O,At),M=1,x=(st.isTouch&&He.visualViewport?He.visualViewport.scale*He.visualViewport.width:He.outerWidth)/He.innerWidth,N=0,Q=wt(o)?function(){return o(f)}:function(){return o||2.8},F,S,X=wr(O,e.type,!0,s),Z=function(){return S=!1},R=Vt,j=Vt,K=function(){w=Zt(O,ft),j=$o(no?1:0,w),t&&(R=$o(0,Zt(O,At))),F=bo},P=function(){T._gsap.y=Uo(parseFloat(T._gsap.y)+g.offset)+"px",T.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(T._gsap.y)+", 0, 1)",g.offset=g.cacheID=0},ae=function(){if(S){requestAnimationFrame(Z);var L=Uo(f.deltaY/2),ie=j(g.v-L);if(T&&ie!==g.v+g.offset){g.offset=ie-g.v;var u=Uo((parseFloat(T&&T._gsap.y)||0)-g.offset);T.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+u+", 0, 1)",T._gsap.y=u+"px",g.cacheID=Fe.cache,eo()}return!0}g.offset&&P(),S=!0},C,V,pe,le,oe=function(){K(),C.isActive()&&C.vars.scrollY>w&&(g()>w?C.progress(1)&&g(w):C.resetTo("scrollY",w))};return T&&he.set(T,{y:"+=0"}),e.ignoreCheck=function(k){return no&&k.type==="touchmove"&&ae()||M>1.05&&k.type!=="touchstart"||f.isGesturing||k.touches&&k.touches.length>1},e.onPress=function(){S=!1;var k=M;M=Uo((He.visualViewport&&He.visualViewport.scale||1)/x),C.pause(),k!==M&&Zn(O,M>1.01?!0:t?!1:"x"),V=_(),pe=g(),K(),F=bo},e.onRelease=e.onGestureStart=function(k,L){if(g.offset&&P(),!L)le.restart(!0);else{Fe.cache++;var ie=Q(),u,ce;t&&(u=_(),ce=u+ie*.05*-k.velocityX/.227,ie*=Ls(_,u,ce,Zt(O,At)),C.vars.scrollX=R(ce)),u=g(),ce=u+ie*.05*-k.velocityY/.227,ie*=Ls(g,u,ce,Zt(O,ft)),C.vars.scrollY=j(ce),C.invalidate().duration(ie).play(.01),(no&&C.vars.scrollY>=w||u>=w-1)&&he.to({},{onUpdate:oe,duration:ie})}l&&l(k)},e.onWheel=function(){C._ts&&C.pause(),bt()-N>1e3&&(F=0,N=bt())},e.onChange=function(k,L,ie,u,ce){if(bo!==F&&K(),L&&t&&_(R(u[2]===L?V+(k.startX-k.x):_()+L-u[1])),ie){g.offset&&P();var de=ce[2]===ie,Te=de?pe+k.startY-k.y:g()+ie-ce[1],h=j(Te);de&&Te!==h&&(pe+=h-Te),g(h)}(ie||L)&&eo()},e.onEnable=function(){Zn(O,t?!1:"x"),Oe.addEventListener("refresh",oe),ht(He,"resize",oe),g.smooth&&(g.target.style.scrollBehavior="auto",g.smooth=_.smooth=!1),X.enable()},e.onDisable=function(){Zn(O,!0),dt(He,"resize",oe),Oe.removeEventListener("refresh",oe),X.kill()},e.lockAxis=e.lockAxis!==!1,f=new st(e),f.iOS=no,no&&!g()&&g(1),no&&he.ticker.add(Vt),le=f._dc,C=he.to(f,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:br(g,g(),function(){return C.pause()})},onUpdate:eo,onComplete:le.vars.onComplete}),f};Oe.sort=function(p){if(wt(p))return ze.sort(p);var e=He.pageYOffset||0;return Oe.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+He.innerHeight}),ze.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Oe.observe=function(p){return new st(p)};Oe.normalizeScroll=function(p){if(typeof p>"u")return Pt;if(p===!0&&Pt)return Pt.enable();if(p===!1){Pt&&Pt.kill(),Pt=p;return}var e=p instanceof st?p:bi(p);return Pt&&Pt.target===e.target&&Pt.kill(),wo(e.target)&&(Pt=e),e};Oe.core={_getVelocityProp:es,_inputObserver:wr,_scrollers:Fe,_proxies:$t,bridge:{ss:function(){Wt||vo("scrollStart"),Wt=bt()},ref:function(){return xt}}};cr()&&he.registerPlugin(Oe);var on=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(U){U.preventDefault(),t(++p%e.children.length)},!1);function n(U){return e.appendChild(U.dom),U}function t(U){for(var A=0;A<e.children.length;A++)e.children[A].style.display=A===U?"block":"none";p=U}var o=(performance||Date).now(),s=o,l=0,f=n(new on.Panel("FPS","#0ff","#002")),w=n(new on.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var O=n(new on.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){l++;var U=(performance||Date).now();if(w.update(U-o,200),U>=s+1e3&&(f.update(l*1e3/(U-s),100),s=U,l=0,O)){var A=performance.memory;O.update(A.usedJSHeapSize/1048576,A.jsHeapSizeLimit/1048576)}return U},update:function(){o=this.end()},domElement:e,setMode:t}};on.Panel=function(p,e,n){var t=1/0,o=0,s=Math.round,l=s(window.devicePixelRatio||1),f=80*l,w=48*l,O=3*l,U=2*l,A=3*l,T=15*l,g=74*l,_=30*l,M=document.createElement("canvas");M.width=f,M.height=w,M.style.cssText="width:80px;height:48px";var x=M.getContext("2d");return x.font="bold "+9*l+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=n,x.fillRect(0,0,f,w),x.fillStyle=e,x.fillText(p,O,U),x.fillRect(A,T,g,_),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(A,T,g,_),{dom:M,update:function(N,Q){t=Math.min(t,N),o=Math.max(o,N),x.fillStyle=n,x.globalAlpha=1,x.fillRect(0,0,f,T),x.fillStyle=e,x.fillText(s(N)+" "+p+" ("+s(t)+"-"+s(o)+")",O,U),x.drawImage(M,A+l,T,g-l,_,A,T,g-l,_),x.fillRect(A+g-l,T,l,_),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(A+g-l,T,l,s((1-N/Q)*_))}}};const _r={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class an{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const wi=new Dr(-1,1,1,-1,0,1);class _i extends io{constructor(){super(),this.setAttribute("position",new Xo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Xo([0,2,0,0,2,0],2))}}const vi=new _i;class vr{constructor(e){this._mesh=new Ne(vi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,wi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ti extends an{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof go?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Qn.clone(e.uniforms),this.material=new go({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new vr(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Ns extends an{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let l,f;this.inverse?(l=0,f=1):(l=1,f=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,l,4294967295),s.buffers.stencil.setClear(f),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Mi extends an{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Pi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new Le);this._width=t.width,this._height=t.height,n=new Tn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Mn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ti(_r),this.copyPass.material.blending=Ir,this.clock=new Rr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const l=this.passes[o];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),l.needsSwap){if(t){const f=this.renderer.getContext(),w=this.renderer.state.buffers.stencil;w.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),w.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}Ns!==void 0&&(l instanceof Ns?t=!0:l instanceof Mi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Le);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Si extends an{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new St}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,l;this.overrideMaterial!==null&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=l),e.autoClear=o}}const Ci={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new St(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class To extends an{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new Le(e.x,e.y):new Le(256,256),this.clearColor=new St(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new Tn(s,l,{type:Mn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let A=0;A<this.nMips;A++){const T=new Tn(s,l,{type:Mn});T.texture.name="UnrealBloomPass.h"+A,T.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(T);const g=new Tn(s,l,{type:Mn});g.texture.name="UnrealBloomPass.v"+A,g.texture.generateMipmaps=!1,this.renderTargetsVertical.push(g),s=Math.round(s/2),l=Math.round(l/2)}const f=Ci;this.highPassUniforms=Qn.clone(f.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new go({uniforms:this.highPassUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),this.separableBlurMaterials=[];const w=[3,5,7,9,11];s=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let A=0;A<this.nMips;A++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(w[A])),this.separableBlurMaterials[A].uniforms.invSize.value=new Le(1/s,1/l),s=Math.round(s/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const O=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=O,this.bloomTintColors=[new We(1,1,1),new We(1,1,1),new We(1,1,1),new We(1,1,1),new We(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const U=_r;this.copyUniforms=Qn.clone(U.uniforms),this.blendMaterial=new go({uniforms:this.copyUniforms,vertexShader:U.vertexShader,fragmentShader:U.fragmentShader,blending:qt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new St,this.oldClearAlpha=1,this.basic=new ut,this.fsQuad=new vr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new Le(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let f=this.renderTargetBright;for(let w=0;w<this.nMips;w++)this.fsQuad.material=this.separableBlurMaterials[w],this.separableBlurMaterials[w].uniforms.colorTexture.value=f.texture,this.separableBlurMaterials[w].uniforms.direction.value=To.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[w]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[w].uniforms.colorTexture.value=this.renderTargetsHorizontal[w].texture,this.separableBlurMaterials[w].uniforms.direction.value=To.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[w]),e.clear(),this.fsQuad.render(e),f=this.renderTargetsVertical[w];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new go({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Le(.5,.5)},direction:{value:new Le(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new go({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}To.BlurDirectionX=new Le(1,0);To.BlurDirectionY=new Le(0,1);class ls extends Or{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Ei=Nr;class zn extends Xs{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,l=new js(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(f){try{n(s.parse(f))}catch(w){o?o(w):console.error(w),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(h,c){if(h.nodeType!==1)return;const i=S(h);let r=!1,b=null;switch(h.nodeName){case"svg":c=_(h,c);break;case"style":s(h);break;case"g":c=_(h,c);break;case"path":c=_(h,c),h.hasAttribute("d")&&(b=o(h));break;case"rect":c=_(h,c),b=w(h);break;case"polygon":c=_(h,c),b=O(h);break;case"polyline":c=_(h,c),b=U(h);break;case"circle":c=_(h,c),b=A(h);break;case"ellipse":c=_(h,c),b=T(h);break;case"line":c=_(h,c),b=g(h);break;case"defs":r=!0;break;case"use":c=_(h,c);const B=(h.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),Y=h.viewportElement.getElementById(B);Y?t(Y,c):console.warn("SVGLoader: 'use node' references non-existent node id: "+B);break}b&&(c.fill!==void 0&&c.fill!=="none"&&b.color.setStyle(c.fill,Ei),Z(b,ce),C.push(b),b.userData={node:h,style:c});const E=h.childNodes;for(let y=0;y<E.length;y++){const B=E[y];r&&B.nodeName!=="style"&&B.nodeName!=="defs"||t(B,c)}i&&(pe.pop(),pe.length>0?ce.copy(pe[pe.length-1]):ce.identity())}function o(h){const c=new oo,i=new Le,r=new Le,b=new Le;let E=!0,y=!1;const B=h.getAttribute("d");if(B===""||B==="none")return null;const Y=B.match(/[a-df-z][^a-df-z]*/ig);for(let H=0,v=Y.length;H<v;H++){const z=Y[H],$=z.charAt(0),d=z.slice(1).trim();E===!0&&(y=!0,E=!1);let m;switch($){case"M":m=x(d);for(let a=0,ee=m.length;a<ee;a+=2)i.x=m[a+0],i.y=m[a+1],r.x=i.x,r.y=i.y,a===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),a===0&&b.copy(i);break;case"H":m=x(d);for(let a=0,ee=m.length;a<ee;a++)i.x=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&b.copy(i);break;case"V":m=x(d);for(let a=0,ee=m.length;a<ee;a++)i.y=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&b.copy(i);break;case"L":m=x(d);for(let a=0,ee=m.length;a<ee;a+=2)i.x=m[a+0],i.y=m[a+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&b.copy(i);break;case"C":m=x(d);for(let a=0,ee=m.length;a<ee;a+=6)c.bezierCurveTo(m[a+0],m[a+1],m[a+2],m[a+3],m[a+4],m[a+5]),r.x=m[a+2],r.y=m[a+3],i.x=m[a+4],i.y=m[a+5],a===0&&y===!0&&b.copy(i);break;case"S":m=x(d);for(let a=0,ee=m.length;a<ee;a+=4)c.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),m[a+0],m[a+1],m[a+2],m[a+3]),r.x=m[a+0],r.y=m[a+1],i.x=m[a+2],i.y=m[a+3],a===0&&y===!0&&b.copy(i);break;case"Q":m=x(d);for(let a=0,ee=m.length;a<ee;a+=4)c.quadraticCurveTo(m[a+0],m[a+1],m[a+2],m[a+3]),r.x=m[a+0],r.y=m[a+1],i.x=m[a+2],i.y=m[a+3],a===0&&y===!0&&b.copy(i);break;case"T":m=x(d);for(let a=0,ee=m.length;a<ee;a+=2){const ue=M(i.x,r.x),Ge=M(i.y,r.y);c.quadraticCurveTo(ue,Ge,m[a+0],m[a+1]),r.x=ue,r.y=Ge,i.x=m[a+0],i.y=m[a+1],a===0&&y===!0&&b.copy(i)}break;case"A":m=x(d,[3,4],7);for(let a=0,ee=m.length;a<ee;a+=7){if(m[a+5]==i.x&&m[a+6]==i.y)continue;const ue=i.clone();i.x=m[a+5],i.y=m[a+6],r.x=i.x,r.y=i.y,l(c,m[a],m[a+1],m[a+2],m[a+3],m[a+4],ue,i),a===0&&y===!0&&b.copy(i)}break;case"m":m=x(d);for(let a=0,ee=m.length;a<ee;a+=2)i.x+=m[a+0],i.y+=m[a+1],r.x=i.x,r.y=i.y,a===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),a===0&&b.copy(i);break;case"h":m=x(d);for(let a=0,ee=m.length;a<ee;a++)i.x+=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&b.copy(i);break;case"v":m=x(d);for(let a=0,ee=m.length;a<ee;a++)i.y+=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&b.copy(i);break;case"l":m=x(d);for(let a=0,ee=m.length;a<ee;a+=2)i.x+=m[a+0],i.y+=m[a+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&b.copy(i);break;case"c":m=x(d);for(let a=0,ee=m.length;a<ee;a+=6)c.bezierCurveTo(i.x+m[a+0],i.y+m[a+1],i.x+m[a+2],i.y+m[a+3],i.x+m[a+4],i.y+m[a+5]),r.x=i.x+m[a+2],r.y=i.y+m[a+3],i.x+=m[a+4],i.y+=m[a+5],a===0&&y===!0&&b.copy(i);break;case"s":m=x(d);for(let a=0,ee=m.length;a<ee;a+=4)c.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),i.x+m[a+0],i.y+m[a+1],i.x+m[a+2],i.y+m[a+3]),r.x=i.x+m[a+0],r.y=i.y+m[a+1],i.x+=m[a+2],i.y+=m[a+3],a===0&&y===!0&&b.copy(i);break;case"q":m=x(d);for(let a=0,ee=m.length;a<ee;a+=4)c.quadraticCurveTo(i.x+m[a+0],i.y+m[a+1],i.x+m[a+2],i.y+m[a+3]),r.x=i.x+m[a+0],r.y=i.y+m[a+1],i.x+=m[a+2],i.y+=m[a+3],a===0&&y===!0&&b.copy(i);break;case"t":m=x(d);for(let a=0,ee=m.length;a<ee;a+=2){const ue=M(i.x,r.x),Ge=M(i.y,r.y);c.quadraticCurveTo(ue,Ge,i.x+m[a+0],i.y+m[a+1]),r.x=ue,r.y=Ge,i.x=i.x+m[a+0],i.y=i.y+m[a+1],a===0&&y===!0&&b.copy(i)}break;case"a":m=x(d,[3,4],7);for(let a=0,ee=m.length;a<ee;a+=7){if(m[a+5]==0&&m[a+6]==0)continue;const ue=i.clone();i.x+=m[a+5],i.y+=m[a+6],r.x=i.x,r.y=i.y,l(c,m[a],m[a+1],m[a+2],m[a+3],m[a+4],ue,i),a===0&&y===!0&&b.copy(i)}break;case"Z":case"z":c.currentPath.autoClose=!0,c.currentPath.curves.length>0&&(i.copy(b),c.currentPath.currentPoint.copy(i),E=!0);break;default:console.warn(z)}y=!1}return c}function s(h){if(!(!h.sheet||!h.sheet.cssRules||!h.sheet.cssRules.length))for(let c=0;c<h.sheet.cssRules.length;c++){const i=h.sheet.cssRules[c];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(b=>b.trim());for(let b=0;b<r.length;b++){const E=Object.fromEntries(Object.entries(i.style).filter(([,y])=>y!==""));V[r[b]]=Object.assign(V[r[b]]||{},E)}}}function l(h,c,i,r,b,E,y,B){if(c==0||i==0){h.lineTo(B.x,B.y);return}r=r*Math.PI/180,c=Math.abs(c),i=Math.abs(i);const Y=(y.x-B.x)/2,H=(y.y-B.y)/2,v=Math.cos(r)*Y+Math.sin(r)*H,z=-Math.sin(r)*Y+Math.cos(r)*H;let $=c*c,d=i*i;const m=v*v,a=z*z,ee=m/$+a/d;if(ee>1){const Se=Math.sqrt(ee);c=Se*c,i=Se*i,$=c*c,d=i*i}const ue=$*a+d*m,Ge=($*d-ue)/ue;let Xe=Math.sqrt(Math.max(0,Ge));b===E&&(Xe=-Xe);const G=Xe*c*z/i,te=-Xe*i*v/c,xe=Math.cos(r)*G-Math.sin(r)*te+(y.x+B.x)/2,ne=Math.sin(r)*G+Math.cos(r)*te+(y.y+B.y)/2,me=f(1,0,(v-G)/c,(z-te)/i),be=f((v-G)/c,(z-te)/i,(-v-G)/c,(-z-te)/i)%(Math.PI*2);h.currentPath.absellipse(xe,ne,c,i,me,me+be,E===0,r)}function f(h,c,i,r){const b=h*i+c*r,E=Math.sqrt(h*h+c*c)*Math.sqrt(i*i+r*r);let y=Math.acos(Math.max(-1,Math.min(1,b/E)));return h*r-c*i<0&&(y=-y),y}function w(h){const c=F(h.getAttribute("x")||0),i=F(h.getAttribute("y")||0),r=F(h.getAttribute("rx")||h.getAttribute("ry")||0),b=F(h.getAttribute("ry")||h.getAttribute("rx")||0),E=F(h.getAttribute("width")),y=F(h.getAttribute("height")),B=1-.551915024494,Y=new oo;return Y.moveTo(c+r,i),Y.lineTo(c+E-r,i),(r!==0||b!==0)&&Y.bezierCurveTo(c+E-r*B,i,c+E,i+b*B,c+E,i+b),Y.lineTo(c+E,i+y-b),(r!==0||b!==0)&&Y.bezierCurveTo(c+E,i+y-b*B,c+E-r*B,i+y,c+E-r,i+y),Y.lineTo(c+r,i+y),(r!==0||b!==0)&&Y.bezierCurveTo(c+r*B,i+y,c,i+y-b*B,c,i+y-b),Y.lineTo(c,i+b),(r!==0||b!==0)&&Y.bezierCurveTo(c,i+b*B,c+r*B,i,c+r,i),Y}function O(h){function c(E,y,B){const Y=F(y),H=F(B);b===0?r.moveTo(Y,H):r.lineTo(Y,H),b++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new oo;let b=0;return h.getAttribute("points").replace(i,c),r.currentPath.autoClose=!0,r}function U(h){function c(E,y,B){const Y=F(y),H=F(B);b===0?r.moveTo(Y,H):r.lineTo(Y,H),b++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new oo;let b=0;return h.getAttribute("points").replace(i,c),r.currentPath.autoClose=!1,r}function A(h){const c=F(h.getAttribute("cx")||0),i=F(h.getAttribute("cy")||0),r=F(h.getAttribute("r")||0),b=new Hn;b.absarc(c,i,r,0,Math.PI*2);const E=new oo;return E.subPaths.push(b),E}function T(h){const c=F(h.getAttribute("cx")||0),i=F(h.getAttribute("cy")||0),r=F(h.getAttribute("rx")||0),b=F(h.getAttribute("ry")||0),E=new Hn;E.absellipse(c,i,r,b,0,Math.PI*2);const y=new oo;return y.subPaths.push(E),y}function g(h){const c=F(h.getAttribute("x1")||0),i=F(h.getAttribute("y1")||0),r=F(h.getAttribute("x2")||0),b=F(h.getAttribute("y2")||0),E=new oo;return E.moveTo(c,i),E.lineTo(r,b),E.currentPath.autoClose=!1,E}function _(h,c){c=Object.assign({},c);let i={};if(h.hasAttribute("class")){const y=h.getAttribute("class").split(/\s/).filter(Boolean).map(B=>B.trim());for(let B=0;B<y.length;B++)i=Object.assign(i,V["."+y[B]])}h.hasAttribute("id")&&(i=Object.assign(i,V["#"+h.getAttribute("id")]));function r(y,B,Y){Y===void 0&&(Y=function(v){return v.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),v}),h.hasAttribute(y)&&(c[B]=Y(h.getAttribute(y))),i[y]&&(c[B]=Y(i[y])),h.style&&h.style[y]!==""&&(c[B]=Y(h.style[y]))}function b(y){return Math.max(0,Math.min(1,F(y)))}function E(y){return Math.max(0,F(y))}return r("fill","fill"),r("fill-opacity","fillOpacity",b),r("fill-rule","fillRule"),r("opacity","opacity",b),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",b),r("stroke-width","strokeWidth",E),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",E),r("visibility","visibility"),c}function M(h,c){return h-(c-h)}function x(h,c,i){if(typeof h!="string")throw new TypeError("Invalid input: "+typeof h);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},b=0,E=1,y=2,B=3;let Y=b,H=!0,v="",z="";const $=[];function d(ue,Ge,Xe){const G=new SyntaxError('Unexpected character "'+ue+'" at index '+Ge+".");throw G.partial=Xe,G}function m(){v!==""&&(z===""?$.push(Number(v)):$.push(Number(v)*Math.pow(10,Number(z)))),v="",z=""}let a;const ee=h.length;for(let ue=0;ue<ee;ue++){if(a=h[ue],Array.isArray(c)&&c.includes($.length%i)&&r.FLAGS.test(a)){Y=E,v=a,m();continue}if(Y===b){if(r.WHITESPACE.test(a))continue;if(r.DIGIT.test(a)||r.SIGN.test(a)){Y=E,v=a;continue}if(r.POINT.test(a)){Y=y,v=a;continue}r.COMMA.test(a)&&(H&&d(a,ue,$),H=!0)}if(Y===E){if(r.DIGIT.test(a)){v+=a;continue}if(r.POINT.test(a)){v+=a,Y=y;continue}if(r.EXP.test(a)){Y=B;continue}r.SIGN.test(a)&&v.length===1&&r.SIGN.test(v[0])&&d(a,ue,$)}if(Y===y){if(r.DIGIT.test(a)){v+=a;continue}if(r.EXP.test(a)){Y=B;continue}r.POINT.test(a)&&v[v.length-1]==="."&&d(a,ue,$)}if(Y===B){if(r.DIGIT.test(a)){z+=a;continue}if(r.SIGN.test(a)){if(z===""){z+=a;continue}z.length===1&&r.SIGN.test(z)&&d(a,ue,$)}}r.WHITESPACE.test(a)?(m(),Y=b,H=!1):r.COMMA.test(a)?(m(),Y=b,H=!0):r.SIGN.test(a)?(m(),Y=E,v=a):r.POINT.test(a)?(m(),Y=y,v=a):d(a,ue,$)}return m(),$}const N=["mm","cm","in","pt","pc","px"],Q={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function F(h){let c="px";if(typeof h=="string"||h instanceof String)for(let r=0,b=N.length;r<b;r++){const E=N[r];if(h.endsWith(E)){c=E,h=h.substring(0,h.length-E.length);break}}let i;return c==="px"&&n.defaultUnit!=="px"?i=Q.in[n.defaultUnit]/n.defaultDPI:(i=Q[c][n.defaultUnit],i<0&&(i=Q[c].in*n.defaultDPI)),i*parseFloat(h)}function S(h){if(!(h.hasAttribute("transform")||h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))))return null;const c=X(h);return pe.length>0&&c.premultiply(pe[pe.length-1]),ce.copy(c),pe.push(c),c}function X(h){const c=new Mo,i=le;if(h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))){const r=F(h.getAttribute("x")),b=F(h.getAttribute("y"));c.translate(r,b)}if(h.hasAttribute("transform")){const r=h.getAttribute("transform").split(")");for(let b=r.length-1;b>=0;b--){const E=r[b].trim();if(E==="")continue;const y=E.indexOf("("),B=E.length;if(y>0&&y<B){const Y=E.slice(0,y),H=x(E.slice(y+1));switch(i.identity(),Y){case"translate":if(H.length>=1){const v=H[0];let z=0;H.length>=2&&(z=H[1]),i.translate(v,z)}break;case"rotate":if(H.length>=1){let v=0,z=0,$=0;v=H[0]*Math.PI/180,H.length>=3&&(z=H[1],$=H[2]),oe.makeTranslation(-z,-$),k.makeRotation(v),L.multiplyMatrices(k,oe),oe.makeTranslation(z,$),i.multiplyMatrices(oe,L)}break;case"scale":if(H.length>=1){const v=H[0];let z=v;H.length>=2&&(z=H[1]),i.scale(v,z)}break;case"skewX":H.length===1&&i.set(1,Math.tan(H[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":H.length===1&&i.set(1,0,0,Math.tan(H[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":H.length===6&&i.set(H[0],H[2],H[4],H[1],H[3],H[5],0,0,1);break}}c.premultiply(i)}}return c}function Z(h,c){function i(y){u.set(y.x,y.y,1).applyMatrix3(c),y.set(u.x,u.y)}function r(y){const B=y.xRadius,Y=y.yRadius,H=Math.cos(y.aRotation),v=Math.sin(y.aRotation),z=new We(B*H,B*v,0),$=new We(-Y*v,Y*H,0),d=z.applyMatrix3(c),m=$.applyMatrix3(c),a=le.set(d.x,m.x,0,d.y,m.y,0,0,0,1),ee=oe.copy(a).invert(),Xe=k.copy(ee).transpose().multiply(ee).elements,G=ae(Xe[0],Xe[1],Xe[4]),te=Math.sqrt(G.rt1),xe=Math.sqrt(G.rt2);if(y.xRadius=1/te,y.yRadius=1/xe,y.aRotation=Math.atan2(G.sn,G.cs),!((y.aEndAngle-y.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const me=oe.set(te,0,0,0,xe,0,0,0,1),be=k.set(G.cs,G.sn,0,-G.sn,G.cs,0,0,0,1),Se=me.multiply(be).multiply(a),se=ye=>{const{x:we,y:fe}=new We(Math.cos(ye),Math.sin(ye),0).applyMatrix3(Se);return Math.atan2(fe,we)};y.aStartAngle=se(y.aStartAngle),y.aEndAngle=se(y.aEndAngle),R(c)&&(y.aClockwise=!y.aClockwise)}}function b(y){const B=K(c),Y=P(c);y.xRadius*=B,y.yRadius*=Y;const H=B>Number.EPSILON?Math.atan2(c.elements[1],c.elements[0]):Math.atan2(-c.elements[3],c.elements[4]);y.aRotation+=H,R(c)&&(y.aStartAngle*=-1,y.aEndAngle*=-1,y.aClockwise=!y.aClockwise)}const E=h.subPaths;for(let y=0,B=E.length;y<B;y++){const H=E[y].curves;for(let v=0;v<H.length;v++){const z=H[v];z.isLineCurve?(i(z.v1),i(z.v2)):z.isCubicBezierCurve?(i(z.v0),i(z.v1),i(z.v2),i(z.v3)):z.isQuadraticBezierCurve?(i(z.v0),i(z.v1),i(z.v2)):z.isEllipseCurve&&(ie.set(z.aX,z.aY),i(ie),z.aX=ie.x,z.aY=ie.y,j(c)?r(z):b(z))}}}function R(h){const c=h.elements;return c[0]*c[4]-c[1]*c[3]<0}function j(h){const c=h.elements,i=c[0]*c[3]+c[1]*c[4];if(i===0)return!1;const r=K(h),b=P(h);return Math.abs(i/(r*b))>Number.EPSILON}function K(h){const c=h.elements;return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function P(h){const c=h.elements;return Math.sqrt(c[3]*c[3]+c[4]*c[4])}function ae(h,c,i){let r,b,E,y,B;const Y=h+i,H=h-i,v=Math.sqrt(H*H+4*c*c);return Y>0?(r=.5*(Y+v),B=1/r,b=h*B*i-c*B*c):Y<0?b=.5*(Y-v):(r=.5*v,b=-.5*v),H>0?E=H+v:E=H-v,Math.abs(E)>2*Math.abs(c)?(B=-2*c/E,y=1/Math.sqrt(1+B*B),E=B*y):Math.abs(c)===0?(E=1,y=0):(B=-.5*E/c,E=1/Math.sqrt(1+B*B),y=B*E),H>0&&(B=E,E=-y,y=B),{rt1:r,rt2:b,cs:E,sn:y}}const C=[],V={},pe=[],le=new Mo,oe=new Mo,k=new Mo,L=new Mo,ie=new Le,u=new We,ce=new Mo,de=new DOMParser().parseFromString(e,"image/svg+xml");return t(de.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:C,xml:de.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(M,x,N,Q){const F=M.x,S=x.x,X=N.x,Z=Q.x,R=M.y,j=x.y,K=N.y,P=Q.y,ae=(Z-X)*(R-K)-(P-K)*(F-X),C=(S-F)*(R-K)-(j-R)*(F-X),V=(P-K)*(S-F)-(Z-X)*(j-R),pe=ae/V,le=C/V;if(V===0&&ae!==0||pe<=0||pe>=1||le<0||le>1)return null;if(ae===0&&V===0){for(let oe=0;oe<2;oe++)if(l(oe===0?N:Q,M,x),o.loc==t.ORIGIN){const k=oe===0?N:Q;return{x:k.x,y:k.y,t:o.t}}else if(o.loc==t.BETWEEN){const k=+(F+o.t*(S-F)).toPrecision(10),L=+(R+o.t*(j-R)).toPrecision(10);return{x:k,y:L,t:o.t}}return null}else{for(let L=0;L<2;L++)if(l(L===0?N:Q,M,x),o.loc==t.ORIGIN){const ie=L===0?N:Q;return{x:ie.x,y:ie.y,t:o.t}}const oe=+(F+pe*(S-F)).toPrecision(10),k=+(R+pe*(j-R)).toPrecision(10);return{x:oe,y:k,t:pe}}}function l(M,x,N){const Q=N.x-x.x,F=N.y-x.y,S=M.x-x.x,X=M.y-x.y,Z=Q*X-S*F;if(M.x===x.x&&M.y===x.y){o.loc=t.ORIGIN,o.t=0;return}if(M.x===N.x&&M.y===N.y){o.loc=t.DESTINATION,o.t=1;return}if(Z<-Number.EPSILON){o.loc=t.LEFT;return}if(Z>Number.EPSILON){o.loc=t.RIGHT;return}if(Q*S<0||F*X<0){o.loc=t.BEHIND;return}if(Math.sqrt(Q*Q+F*F)<Math.sqrt(S*S+X*X)){o.loc=t.BEYOND;return}let R;Q!==0?R=S/Q:R=X/F,o.loc=t.BETWEEN,o.t=R}function f(M,x){const N=[],Q=[];for(let F=1;F<M.length;F++){const S=M[F-1],X=M[F];for(let Z=1;Z<x.length;Z++){const R=x[Z-1],j=x[Z],K=s(S,X,R,j);K!==null&&N.find(P=>P.t<=K.t+Number.EPSILON&&P.t>=K.t-Number.EPSILON)===void 0&&(N.push(K),Q.push(new Le(K.x,K.y)))}}return Q}function w(M,x,N){const Q=new Le;x.getCenter(Q);const F=[];return N.forEach(S=>{S.boundingBox.containsPoint(Q)&&f(M,S.points).forEach(Z=>{F.push({identifier:S.identifier,isCW:S.isCW,point:Z})})}),F.sort((S,X)=>S.point.x-X.point.x),F}function O(M,x,N,Q,F){(F==null||F==="")&&(F="nonzero");const S=new Le;M.boundingBox.getCenter(S);const X=[new Le(N,S.y),new Le(Q,S.y)],Z=w(X,M.boundingBox,x);Z.sort((C,V)=>C.point.x-V.point.x);const R=[],j=[];Z.forEach(C=>{C.identifier===M.identifier?R.push(C):j.push(C)});const K=R[0].point.x,P=[];let ae=0;for(;ae<j.length&&j[ae].point.x<K;)P.length>0&&P[P.length-1]===j[ae].identifier?P.pop():P.push(j[ae].identifier),ae++;if(P.push(M.identifier),F==="evenodd"){const C=P.length%2===0,V=P[P.length-2];return{identifier:M.identifier,isHole:C,for:V}}else if(F==="nonzero"){let C=!0,V=null,pe=null;for(let le=0;le<P.length;le++){const oe=P[le];C?(pe=x[oe].isCW,C=!1,V=oe):pe!==x[oe].isCW&&(pe=x[oe].isCW,C=!0)}return{identifier:M.identifier,isHole:C,for:V}}else console.warn('fill-rule: "'+F+'" is currently not implemented.')}let U=999999999,A=-999999999,T=e.subPaths.map(M=>{const x=M.getPoints();let N=-999999999,Q=999999999,F=-999999999,S=999999999;for(let X=0;X<x.length;X++){const Z=x[X];Z.y>N&&(N=Z.y),Z.y<Q&&(Q=Z.y),Z.x>F&&(F=Z.x),Z.x<S&&(S=Z.x)}return A<=F&&(A=F+1),U>=S&&(U=S-1),{curves:M.curves,points:x,isCW:Br.isClockWise(x),identifier:-1,boundingBox:new Lr(new Le(S,Q),new Le(F,N))}});T=T.filter(M=>M.points.length>1);for(let M=0;M<T.length;M++)T[M].identifier=M;const g=T.map(M=>O(M,T,U,A,e.userData?e.userData.style.fillRule:void 0)),_=[];return T.forEach(M=>{if(!g[M.identifier].isHole){const N=new zr;N.curves=M.curves,g.filter(F=>F.isHole&&F.for===M.identifier).forEach(F=>{const S=T[F.identifier],X=new Hn;X.curves=S.curves,N.holes.push(X)}),_.push(N)}}),_}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],l=[],f=[];if(zn.pointsToStrokeWithBuffers(e,n,t,o,s,l,f)===0)return null;const w=new io;return w.setAttribute("position",new Xo(s,3)),w.setAttribute("normal",new Xo(l,3)),w.setAttribute("uv",new Xo(f,2)),w}static pointsToStrokeWithBuffers(e,n,t,o,s,l,f,w){const O=new Le,U=new Le,A=new Le,T=new Le,g=new Le,_=new Le,M=new Le,x=new Le,N=new Le,Q=new Le,F=new Le,S=new Le,X=new Le,Z=new Le,R=new Le,j=new Le,K=new Le;t=t!==void 0?t:12,o=o!==void 0?o:.001,w=w!==void 0?w:0,e=H(e);const P=e.length;if(P<2)return 0;const ae=e[0].equals(e[P-1]);let C,V=e[0],pe;const le=n.strokeWidth/2,oe=1/(P-1);let k=0,L,ie,u,ce,de=!1,Te=0,h=w*3,c=w*2;i(e[0],e[1],O).multiplyScalar(le),x.copy(e[0]).sub(O),N.copy(e[0]).add(O),Q.copy(x),F.copy(N);for(let v=1;v<P;v++){C=e[v],v===P-1?ae?pe=e[1]:pe=void 0:pe=e[v+1];const z=O;if(i(V,C,z),A.copy(z).multiplyScalar(le),S.copy(C).sub(A),X.copy(C).add(A),L=k+oe,ie=!1,pe!==void 0){i(C,pe,U),A.copy(U).multiplyScalar(le),Z.copy(C).sub(A),R.copy(C).add(A),u=!0,A.subVectors(pe,V),z.dot(A)<0&&(u=!1),v===1&&(de=u),A.subVectors(pe,C),A.normalize();const $=Math.abs(z.dot(A));if($>Number.EPSILON){const d=le/$;A.multiplyScalar(-d),T.subVectors(C,V),g.copy(T).setLength(d).add(A),j.copy(g).negate();const m=g.length(),a=T.length();T.divideScalar(a),_.subVectors(pe,C);const ee=_.length();switch(_.divideScalar(ee),T.dot(j)<a&&_.dot(j)<ee&&(ie=!0),K.copy(g).add(C),j.add(C),ce=!1,ie?u?(R.copy(j),X.copy(j)):(Z.copy(j),S.copy(j)):E(),n.strokeLineJoin){case"bevel":y(u,ie,L);break;case"round":B(u,ie),u?b(C,S,Z,L,0):b(C,R,X,L,1);break;case"miter":case"miter-clip":default:const ue=le*n.strokeMiterLimit/m;if(ue<1)if(n.strokeLineJoin!=="miter-clip"){y(u,ie,L);break}else B(u,ie),u?(_.subVectors(K,S).multiplyScalar(ue).add(S),M.subVectors(K,Z).multiplyScalar(ue).add(Z),r(S,L,0),r(_,L,0),r(C,L,.5),r(C,L,.5),r(_,L,0),r(M,L,0),r(C,L,.5),r(M,L,0),r(Z,L,0)):(_.subVectors(K,X).multiplyScalar(ue).add(X),M.subVectors(K,R).multiplyScalar(ue).add(R),r(X,L,1),r(_,L,1),r(C,L,.5),r(C,L,.5),r(_,L,1),r(M,L,1),r(C,L,.5),r(M,L,1),r(R,L,1));else ie?(u?(r(N,k,1),r(x,k,0),r(K,L,0),r(N,k,1),r(K,L,0),r(j,L,1)):(r(N,k,1),r(x,k,0),r(K,L,1),r(x,k,0),r(j,L,0),r(K,L,1)),u?Z.copy(K):R.copy(K)):u?(r(S,L,0),r(K,L,0),r(C,L,.5),r(C,L,.5),r(K,L,0),r(Z,L,0)):(r(X,L,1),r(K,L,1),r(C,L,.5),r(C,L,.5),r(K,L,1),r(R,L,1)),ce=!0;break}}else E()}else E();!ae&&v===P-1&&Y(e[0],Q,F,u,!0,k),k=L,V=C,x.copy(Z),N.copy(R)}if(!ae)Y(C,S,X,u,!1,L);else if(ie&&s){let v=K,z=j;de!==u&&(v=j,z=K),u?(ce||de)&&(z.toArray(s,0*3),z.toArray(s,3*3),ce&&v.toArray(s,1*3)):(ce||!de)&&(z.toArray(s,1*3),z.toArray(s,3*3),ce&&v.toArray(s,0*3))}return Te;function i(v,z,$){return $.subVectors(z,v),$.set(-$.y,$.x).normalize()}function r(v,z,$){s&&(s[h]=v.x,s[h+1]=v.y,s[h+2]=0,l&&(l[h]=0,l[h+1]=0,l[h+2]=1),h+=3,f&&(f[c]=z,f[c+1]=$,c+=2)),Te+=3}function b(v,z,$,d,m){O.copy(z).sub(v).normalize(),U.copy($).sub(v).normalize();let a=Math.PI;const ee=O.dot(U);Math.abs(ee)<1&&(a=Math.abs(Math.acos(ee))),a/=t,A.copy(z);for(let ue=0,Ge=t-1;ue<Ge;ue++)T.copy(A).rotateAround(v,a),r(A,d,m),r(T,d,m),r(v,d,.5),A.copy(T);r(T,d,m),r($,d,m),r(v,d,.5)}function E(){r(N,k,1),r(x,k,0),r(S,L,0),r(N,k,1),r(S,L,0),r(X,L,1)}function y(v,z,$){z?v?(r(N,k,1),r(x,k,0),r(S,L,0),r(N,k,1),r(S,L,0),r(j,L,1),r(S,$,0),r(Z,$,0),r(j,$,.5)):(r(N,k,1),r(x,k,0),r(X,L,1),r(x,k,0),r(j,L,0),r(X,L,1),r(X,$,1),r(j,$,0),r(R,$,1)):v?(r(S,$,0),r(Z,$,0),r(C,$,.5)):(r(X,$,1),r(R,$,0),r(C,$,.5))}function B(v,z){z&&(v?(r(N,k,1),r(x,k,0),r(S,L,0),r(N,k,1),r(S,L,0),r(j,L,1),r(S,k,0),r(C,L,.5),r(j,L,1),r(C,L,.5),r(Z,k,0),r(j,L,1)):(r(N,k,1),r(x,k,0),r(X,L,1),r(x,k,0),r(j,L,0),r(X,L,1),r(X,k,1),r(j,L,0),r(C,L,.5),r(C,L,.5),r(j,L,0),r(R,k,1)))}function Y(v,z,$,d,m,a){switch(n.strokeLineCap){case"round":m?b(v,$,z,a,.5):b(v,z,$,a,.5);break;case"square":if(m)O.subVectors(z,v),U.set(O.y,-O.x),A.addVectors(O,U).add(v),T.subVectors(U,O).add(v),d?(A.toArray(s,1*3),T.toArray(s,0*3),T.toArray(s,3*3)):(A.toArray(s,1*3),f[3*2+1]===1?T.toArray(s,3*3):A.toArray(s,3*3),T.toArray(s,0*3));else{O.subVectors($,v),U.set(O.y,-O.x),A.addVectors(O,U).add(v),T.subVectors(U,O).add(v);const ee=s.length;d?(A.toArray(s,ee-1*3),T.toArray(s,ee-2*3),T.toArray(s,ee-4*3)):(T.toArray(s,ee-2*3),A.toArray(s,ee-1*3),T.toArray(s,ee-4*3))}break}}function H(v){let z=!1;for(let d=1,m=v.length-1;d<m;d++)if(v[d].distanceTo(v[d+1])<o){z=!0;break}if(!z)return v;const $=[];$.push(v[0]);for(let d=1,m=v.length-1;d<m;d++)v[d].distanceTo(v[d+1])>=o&&$.push(v[d]);return $.push(v[v.length-1]),$}}}function Ai(p,e,n,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=n,l=8,f=24,w=.075,O=200;let U,A=[],T=[],g=[],_=[];const M=(S,X,Z,R)=>{const j=new Ro(S,S,S),K=new jo(j),P=[new Rt({color:16711680,transparent:!0,opacity:R.opacity,blending:qt}),new Rt({color:65280,transparent:!0,opacity:R.opacity,blending:qt}),new Rt({color:255,transparent:!0,opacity:R.opacity,blending:qt}),new Rt({color:65535,transparent:!0,opacity:R.opacity,blending:qt}),new Rt({color:16711935,transparent:!0,opacity:R.opacity,blending:qt}),new Rt({color:16776960,transparent:!0,opacity:R.opacity,blending:qt})],ae=new It,C=K.getAttribute("position").array,V=[];for(let oe=0;oe<C.length/3;oe+=2)V.push(oe,oe+1);const pe=Array(6).fill(null).map(()=>new io),le=Array(6).fill(null).map(()=>[]);for(let oe=0;oe<V.length/2;oe++){const k=oe%6;le[k].push(V[oe*2],V[oe*2+1])}return pe.forEach((oe,k)=>{oe.setIndex(le[k]),oe.setAttribute("position",K.getAttribute("position"));const L=new pt(oe,P[k]);ae.add(L)}),ae.position.z=X,ae.rotation.z=Z,ae};if((()=>{const Z=.9/(f-1);for(let V=0;V<f;V++)T[V]=new Rt({transparent:!0,opacity:1-V*Z});if(U=new It,!U){console.error("introGroup failed to initialize");return}for(let V=0;V<f;V++){const pe=o-V*l,le=M(pe,0,0,T[V]),oe=le.children.map(k=>k.material);_.push(oe.map(k=>({material:k,originalColor:k.color.clone()}))),U.add(le)}U.position.z=s,p.add(U),A.push(U),g=T.map(V=>V.opacity);const R=Be.timeline({repeat:-1});R.to(U.rotation,{x:Ze.degToRad(360),duration:12,ease:"none"},0),R.to(U.rotation,{y:Ze.degToRad(360),duration:10,ease:"none"},0),R.to(U.rotation,{z:Ze.degToRad(360),duration:14,ease:"none"},0);let j=-1,K=0;const P=w*1e3,ae=f*P,C=V=>{const pe=V%ae/P,le=Math.floor(pe)%f;j!==-1&&V-K>=P&&(_[j].forEach(L=>{L.material.opacity=g[j],L.material.color.copy(L.originalColor)}),j=-1),j===-1&&le!==j&&(j=le,K=V,_[j].forEach(k=>{k.material.opacity=1,k.material.color.set(1,1,1)})),requestAnimationFrame(C)};requestAnimationFrame(C)})(),e.value){const S=N(e.value);p.add(S)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:A};function N(S){const X=new It,Z=Q(S);Z.position.set(0,-36,0),X.add(Z),F(j=>{X.add(j),Be.fromTo(Z.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const K=j.children.find(P=>P instanceof Ne&&P!==j.children[0]);if(K){const P=K.position.y;Be.to(K.position,{y:P+3,duration:1,ease:"easeOut",onComplete:()=>{K.position.y=P},repeat:-1})}}),X.position.x=0,X.position.y=-240;const R=s-f*l;return X.position.z=R+O,X}function Q(S){const X=new ls("SCROLL TO CONTINUE",{font:S,size:8,depth:0,curveSegments:12,bevelEnabled:!1});X.computeBoundingBox(),X.center();const Z=new ut({color:16777215,transparent:!0,opacity:1});return new Ne(X,Z)}function F(S){new zn().load("/3D/mouse.svg",Z=>{const R=Z.paths;let j=null,K=null,P=new It;if(R.forEach((ae,C)=>{zn.createShapes(ae).forEach(pe=>{const le=new Hr(pe);le.computeBoundingBox();const oe=new ut({color:16777215,transparent:!0,opacity:1,side:Xt}),k=new Ne(le,oe);k.scale.set(.05,.05,1),C===0?j=k:C===1&&(K=k)})}),j&&K){P.add(j),P.add(K);const C=(j.geometry.boundingBox.max.x-j.geometry.boundingBox.min.x)*j.scale.x/2;P.position.x=-C,P.rotation.x=Math.PI,S(P)}})}}function ki(p,e,n,t,o,s,l,f){const w=rn(),O=Vs(),{CUBE_SIZE:U,CUBE_SPACING:A,FIRST_CUBE_Z:T}=e,g=T-(n.length+1)*A,_=65535,M=16711935,x=Ze.degToRad(15),N=1e3,Q=.5,F=65280,S=80,X=1,Z=15,R=.1,j="ENTER TO LEARN MORE",K=O.isMobile?1:.5,P=40,ae=.125,C=100,V=8,pe=O.isMobile?1.5:2,le=O.isMobile?2:3.5,oe=1;let k=[];k.length=0;let L=!1,ie=!1,u=new Fr,ce=new Le,de=null,Te=null,h=null,c=!1,i=null;const r=new Map,b=new Map,E=new Map,y=(G,te,xe,ne,me,be,Se)=>{const se=new It;se.name="group",se.position.z=xe,se.rotation.z=ne,se.userData.isActive=!1,se.userData.cubeIndex=Se;const ye=new Ro(te,te,te),we=new jo(ye),fe=new Rt({color:new St(_),transparent:!0,opacity:0}),Me=new pt(we,fe);Me.geometry.computeBoundingSphere(),se.add(Me);let je="right";const Ie=te/2,it=()=>{const Ae=w.isMobile?1.5:1,qe=25*Ae,et=40*Ae,_t=new xs(et,24),Ue=new jo(_t),Yt=new Rt({color:new St(_),transparent:!0,opacity:0,visible:!0}),D=new pt(Ue,Yt);D.name="portal",D.userData.isPortal=!0,D.userData.isAnimating=!1,D.geometry.computeBoundingSphere();const J=80*Ae,Ee=new to(J,J),I=new ut({visible:!1,side:Xt}),q=new Ne(Ee,I);q.userData.isPortalHitbox=!0,q.userData.portal=D,q.geometry.computeBoundingSphere();const W=new It,re=X*Ae,ke=Z*Ae,ge=new to(re,ke),_e=(qe+et)/2;for(let $e=0;$e<S;$e++){const Lt=new ut({color:new St(M),transparent:!0,opacity:0,visible:!1,side:Xt}),Qe=new Ne(ge,Lt),Ye=$e/S*Math.PI*2;Qe.position.set(Math.cos(Ye)*_e,Math.sin(Ye)*_e,0),Qe.rotation.z=Ye+Math.PI/2,Qe.userData.baseOpacity=.01,Qe.userData.index=$e,Qe.geometry.computeBoundingSphere(),W.add(Qe)}D.userData.pulsesGroup=W;const Ce=2*Ae,ve=25;for(let $e=1;$e<ve;$e++){const Lt=new xs(et,24),Qe=new jo(Lt),Ye=Ze.lerp(1,.1,$e/(ve-1)),vt=new Rt({color:new St(_),transparent:!0,opacity:0}),kt=new pt(Qe,vt);kt.userData.isPortal=!0,kt.userData.maxOpacity=Ye,kt.position.z=-$e*Ce,kt.geometry.computeBoundingSphere(),D.add(kt)}D.userData.maxOpacity=1;let Pe=null;if(f.value){const $e=3*Ae,Lt=new ls(j,{font:f.value,size:$e,depth:0,curveSegments:12,bevelEnabled:!1});Lt.computeBoundingBox(),Lt.center();const Qe=new ut({color:16777215,transparent:!0,opacity:0,side:Xt}),Ye=new Ne(Lt,Qe);Ye.visible=!1,Ye.userData.isVisible=!1,Ye.userData.isExploreText=!0,Ye.userData.skipTextMeshes=!0;const vt=45*Ae;Ye.position.set(0,vt,0),Ye.name="textMesh",D.add(Ye),D.userData.exploreText=Ye;const kt=Lt.boundingBox,ln=(kt.max.x-kt.min.x+10)*Ae,co=(kt.max.y-kt.min.y+10)*Ae,Ft=new to(ln,co),uo=new ut({transparent:!0,opacity:0,side:Xt,visible:!1});Pe=new Ne(Ft,uo),Pe.position.set(0,vt,0),Pe.userData.isExploreTextHitbox=!0,Pe.userData.portal=D,Pe.geometry.computeBoundingSphere(),Pe.name="textHitbox",D.add(Pe),D.userData.exploreTextHitbox=Pe}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const Re=new It;Re.name="closeGroup",Re.position.set(w.isMobile?et-10:et,et,2);const tt=new to(12,O.isMobile?1:.5),Ke=new ut({color:16777215,transparent:!0,opacity:0,side:Xt}),yt=new Ne(tt,Ke);yt.rotation.z=Math.PI/4;const Ot=new Ne(tt,Ke);Ot.rotation.z=-Math.PI/4,Re.add(yt,Ot);const at=new to(15*Ae,15*Ae),lt=new ut({side:Xt,visible:!1}),nt=new Ne(at,lt);switch(nt.userData.isCloseHitbox=!0,nt.geometry.computeBoundingSphere(),nt.renderOrder=2,Re.add(nt),je){case"left":D.position.set(-Ie,0,0),D.rotation.y=Math.PI/2,q.position.set(-Ie,0,0),q.rotation.y=Math.PI/2,ne>=Ze.degToRad(120)&&(D.rotation.z=Math.PI),W.children.forEach($e=>$e.position.x+=R);break;case"top":D.position.set(0,-Ie,0),D.rotation.x=-Math.PI/2,D.rotation.z=-Math.PI/2,q.position.set(0,-Ie,0),q.rotation.x=Math.PI/2,ne>=Ze.degToRad(100)&&ne>=Ze.degToRad(180)&&(D.rotation.z=Math.PI/2),W.children.forEach($e=>$e.position.y+=R);break;case"right":D.position.set(Ie,0,0),D.rotation.y=-Math.PI/2,q.position.set(Ie,0,0),q.rotation.y=-Math.PI/2,ne>=Ze.degToRad(120)&&(D.rotation.z=Math.PI),W.children.forEach($e=>$e.position.x+=R);break;case"bottom":D.position.set(0,Ie,0),D.rotation.x=Math.PI/2,D.rotation.z=-Math.PI/2,q.position.set(0,Ie,0),q.rotation.x=Math.PI/2,W.children.forEach($e=>$e.position.y+=R);break}D.add(Re),D.userData.closeButton=Re,Re.updateMatrixWorld(!0),D.add(W),se.add(D),se.add(q),se.userData.closeButton=Re,D.updateMatrixWorld(!0),W.updateMatrixWorld(!0),Re.updateMatrixWorld(!0),r.set(se,[]),b.set(se,0),E.set(se,0)},De=Ae=>{(Ae instanceof pt||Ae instanceof Ne)&&Ae.geometry&&Ae.geometry.computeBoundingSphere(),se.add(Ae)};if(me&&s.showKeyarts){switch(["left","top","right","bottom"].includes(be)?be:"left"){case"left":je="right";break;case"top":je="bottom";break;case"right":je="left";break;case"bottom":je="top";break}const qe=l.get(me);if(qe){const et=new to(te-1,te-1),_t=new ut({map:qe,transparent:!0,opacity:0,blending:qt,side:Xt}),Ue=new Ne(et,_t);switch(Ue.userData.isLoaded=!0,be){case"left":Ue.position.set(-Ie,0,0),ne>=Ze.degToRad(120)?(Ue.rotation.y=Math.PI/2,Ue.rotation.z=-Math.PI):Ue.rotation.y=Math.PI/2;break;case"top":Ue.position.set(0,-Ie,0),Ue.rotation.x=-Math.PI/2,Ue.rotation.z=-Math.PI/2;break;case"right":Ue.position.set(Ie,0,0),ne>=Ze.degToRad(120)?(Ue.rotation.y=-Math.PI/2,Ue.rotation.z=-Math.PI):Ue.rotation.y=-Math.PI/2;break;case"bottom":Ue.position.set(0,Ie,0),ne>=Ze.degToRad(180)?ne>=Ze.degToRad(220)?(Ue.rotation.x=Math.PI/2,Ue.rotation.z=Math.PI/2):(Ue.rotation.x=-Math.PI/2,Ue.rotation.z=Math.PI/2):(Ue.rotation.x=Math.PI/2,Ue.rotation.z=-Math.PI/2);break}Ue.geometry.computeBoundingSphere(),De(Ue),it()}else console.warn(`Keyart texture not preloaded for ${G.title}: ${me}`),it()}else it();se.userData.portalLocation=je;{const Ae=(J,Ee,I,q)=>{const W=new to(te-1,te-1),re={map:J,transparent:!0,opacity:0,blending:qt,side:Xt,depthWrite:!1};q&&(re.color=q);const ke=new ut(re),ge=new Ne(W,ke);ge.position.copy(Ee),I.x&&(ge.rotation.x=I.x),I.y&&(ge.rotation.y=I.y),ge.userData.isGridPlane=!0,ge.geometry.computeBoundingSphere(),De(ge)},qe=l.get(t),et=l.get(o),_t=["left","top","right","bottom"],Yt=[me&&s.showKeyarts?be||"left":null,je].filter(Boolean),D=_t.filter(J=>!Yt.includes(J));if(qe)switch(Ae(qe,new We(0,0,-te/2-1),{y:0}),Ae(qe,new We(0,0,te/2+1),{y:0},new St(16744448)),D[0]){case"left":Ae(qe,new We(-Ie,0,0),{y:-Math.PI/2},new St(255));break;case"top":Ae(qe,new We(0,Ie,0),{x:Math.PI/2},new St(255));break;case"right":Ae(qe,new We(Ie,0,0),{y:Math.PI/2},new St(255));break;case"bottom":Ae(qe,new We(0,-Ie,0),{x:-Math.PI/2},new St(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(et)switch(D[1]){case"left":Ae(et,new We(-Ie,0,0),{y:-Math.PI/2});break;case"top":Ae(et,new We(0,Ie,0),{x:Math.PI/2});break;case"right":Ae(et,new We(Ie,0,0),{y:Math.PI/2});break;case"bottom":Ae(et,new We(0,-Ie,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}se.children.forEach(Ae=>{Ae.updateMatrixWorld(!0),Ae instanceof It&&Ae.children.forEach(qe=>{qe.updateMatrixWorld(!0)})}),se.updateMatrixWorld(!0);const mt=new qs().setFromObject(se),ot=new Zs;return mt.getBoundingSphere(ot),se.boundingSphere=ot,se},B=new Gr,Y=(G,te,xe,ne,me)=>{if(!f.value){console.warn("Font not available; skipping text creation for:",G);const mt=new io,ot=new ut({visible:!1});return new Ne(mt,ot)}const be=new ls(G,{font:f.value,size:me,depth:0,curveSegments:12,bevelEnabled:!1});be.computeBoundingBox(),be.center();const Se=new ut({color:16777215,transparent:!0,opacity:0,side:Xt}),se=new Ne(be,Se);se.position.set(te,xe,ne);const ye=be.boundingBox,we=ye.max.x-ye.min.x,fe=ye.max.y-ye.min.y,Me=we+8,je=fe+4,Ie=new to(Me,je),it=new ut({color:0,transparent:!0,opacity:0,side:Xt}),De=new Ne(Ie,it);return De.position.set(te,xe,ne-1),p.add(De),p.add(se),se.userData.backgroundPlane=De,se},H=()=>{const G=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let te=0;G.forEach((xe,ne)=>{const me=T-(ne+1)*A,be=(ne+1)*x,Se=y(xe,U,me,be,xe.keyart,xe.keyartLocation,te);p.add(Se),k.push(Se),te++,Y(xe.title,0,xe.size-15,T+90-(ne+1)*A,xe.size)})},v=()=>L?Promise.resolve({projectCubes:k,updateCubeColors:a,maxZ:g}):(H(),L=!0,Promise.resolve({projectCubes:k,updateCubeColors:a,maxZ:g})),z=G=>{if(G.userData.isAnimating)return;G.userData.isAnimating=!0;const te=G.userData.pulsesGroup;if(!te){console.warn("Pulses group not found in portal.userData");return}const xe=te.children,ne=xe.length,me=Be.timeline({repeat:-1,defaults:{ease:"none"}}),be={value:0};me.to(be,{value:1,duration:1.5,onUpdate:()=>{xe.forEach(se=>{const ye=se.material;if(ye.visible){const we=(se.userData.index/ne+be.value)%1,Me=(Math.sin(we*Math.PI*2)+1)/2;ye.opacity=.01+(1-.01)*Math.pow(Me,4)}})}}),G.userData.animationTimeline=me},$=G=>{if(!G.userData.isAnimating)return;G.userData.isAnimating=!1;const te=G.userData.pulsesGroup;if(!te){console.warn("Pulses group not found in portal.userData");return}G.userData.animationTimeline&&(G.userData.animationTimeline.kill(),delete G.userData.animationTimeline),te.children.forEach(xe=>{const ne=xe.material;ne.opacity=0})},d=(G,te)=>{let xe;const ne=(E.get(G)||0)+1;E.set(G,ne),ne%V===0?xe=new Ur(pe,le,12,1):xe=new Ro(K,K,K);const me=new ut({color:16777215,transparent:!0,opacity:0}),be=new Ne(xe,me);be.position.set(0,0,0);const Se=te.position.clone(),se=Se.clone().normalize(),ye=Se.length()+C;if(ne%V===0){const fe=be.position.clone().add(se);be.lookAt(fe),be.rotateX(Math.PI/2)}G.add(be),Be.to(me,{opacity:.5,duration:oe,ease:"power2.in",overwrite:"auto"});const we=r.get(G)||[];we.push({mesh:be,direction:se,distanceTraveled:0,totalDistance:ye}),r.set(G,we)},m=G=>{(r.get(G)||[]).forEach(xe=>{G.remove(xe.mesh),xe.mesh.geometry.dispose(),xe.mesh.material.dispose()}),r.set(G,[])},a=G=>{B.setFromProjectionMatrix(G.projectionMatrix.clone().multiply(G.matrixWorldInverse));const te=G.position.z;let xe=[];p.traverse(ne=>{var me;return ne instanceof Ne&&((me=ne.geometry)==null?void 0:me.type)==="TextGeometry"&&!ne.userData.skipTextMeshes&&xe.push(ne)}),ie||(ie=!0),k.forEach((ne,me)=>{const be=ne.boundingSphere;if(be){const we=be.clone();if(we.radius*=1.5,!B.intersectsSphere(we))return}else console.warn(`Cube ${me} has no boundingSphere`);const Se=ne.position.z,se=Math.abs(te-Se);let ye=0;se<=N&&(ye=1-se/N),ne.userData.isActive=ye>=Q,ne.children.forEach(we=>{if(we instanceof pt&&!we.userData.isPortal&&!we.userData.isPortalHitbox){const fe=we.material;if(se<=N){const Me=Ze.lerp((_>>16&255)/255,(M>>16&255)/255,ye),je=Ze.lerp((_>>8&255)/255,(M>>8&255)/255,ye),Ie=Ze.lerp((_&255)/255,(M&255)/255,ye);fe.color.set(Me,je,Ie),fe.opacity=Math.min(1,ye*2)}else fe.opacity=0}else if(we instanceof pt&&we.userData.isPortal){if(we.children.forEach(fe=>{if(fe instanceof Ne&&fe.userData.isExploreText){const Me=fe.material;if(se<=N){const je=1-se/N;Me.opacity=Math.min(1,je*2),fe.visible=!0}else Me.opacity=0,fe.visible=!1}}),ie){const fe=we.userData.pulsesGroup;ye>.1?fe&&fe.children.forEach(Me=>{Me instanceof Ne&&(Me.material.visible=!0,!we.userData.animationStarted&&s.showPortalPulses&&(z(we),we.userData.animationStarted=!0))}):ye<=.1&&we.userData.animationStarted&&(fe&&fe.children.forEach(Me=>{Me instanceof Ne&&(Me.material.visible=!1)}),$(we),delete we.userData.animationStarted)}}else if(we instanceof Ne&&!we.userData.isPortalHitbox&&!we.userData.isCloseHitbox){const fe=we.material;if(we.userData.isLoaded||we.userData.isGridPlane)if(se<=N){const Me=1-se/N;fe.opacity=Math.min(.8,Me*2),we.visible=!0}else fe.opacity=0,we.visible=!1}else if(we instanceof It&&we.userData.closeButton){const fe=Math.abs(te-we.position.z);we.children.forEach(Me=>{if(Me instanceof Ne&&!Me.userData.isCloseHitbox){const je=Me.material;if(fe<=N){const Ie=1-fe/N;je.opacity=Math.min(1,Ie*2)}else je.opacity=0}})}})}),xe.forEach(ne=>{if(!B.intersectsObject(ne))return;const me=ne.material,be=ne.userData.backgroundPlane,Se=be==null?void 0:be.material,se=ne.position.z,ye=Math.abs(te-se+120);if(c){me.opacity=0,Se&&(Se.opacity=0);return}if(ye<=N){const we=1-ye/N,fe=Math.min(1,we*2);me.opacity=fe,Se&&(Se.opacity=fe*.8)}else me.opacity=0,Se&&(Se.opacity=0)})},ee=(G,te)=>{const xe=performance.now()/1e3,ne=G.position.z;k.forEach(me=>{const be=me.position.z;if(Math.abs(ne-be+90)<=N&&!c){const se=b.get(me)||0;if(xe-se>=ae){const fe=me.children.find(Me=>Me instanceof pt&&Me.userData.isPortal);fe&&(d(me,fe),b.set(me,xe))}const we=(r.get(me)||[]).filter(fe=>{if(fe.distanceTraveled+=P*te,fe.mesh.position.copy(fe.direction.clone().multiplyScalar(fe.distanceTraveled)),(fe.totalDistance-fe.distanceTraveled)/P<=oe&&!fe.isFadingOut){fe.isFadingOut=!0;const Ie=fe.mesh.material;Be.to(Ie,{opacity:0,duration:oe,ease:"power2.out",overwrite:"auto"})}return fe.distanceTraveled>=fe.totalDistance?(me.remove(fe.mesh),fe.mesh.geometry.dispose(),fe.mesh.material.dispose(),!1):!0});r.set(me,we)}else m(me)})},ue=G=>{const te=[G,...G.children.filter(me=>me instanceof pt&&me.userData.isPortal)],xe=2,ne=.1;te.forEach((me,be)=>{const Se=me.material;Se.opacity=me.userData.maxOpacity;const se=Be.timeline({repeat:-1,delay:be*ne});se.to(Se,{opacity:0,duration:xe/2,ease:"power2.inOut"}).to(Se,{opacity:me.userData.maxOpacity,duration:xe/2,ease:"power2.inOut"}),me.userData.marqueeTimeline=se})},Ge=G=>{[G,...G.children.filter(xe=>xe instanceof pt&&xe.userData.isPortal)].forEach(xe=>{if(xe.userData.marqueeTimeline){xe.userData.marqueeTimeline.kill(),delete xe.userData.marqueeTimeline;const ne=xe.material;ne.opacity=xe.userData.maxOpacity}})};return{getInitializedData:v,updateCubeColors:a,setupInteractivity:(G,te,xe,ne,me)=>{i=ne;let be=null,Se=null,se=null,ye=!1,we=!1,fe=!1,Me=!1,je=[],Ie=!1;p.traverse(D=>{var J;D instanceof Ne&&((J=D.geometry)==null?void 0:J.type)==="TextGeometry"&&!D.userData.skipTextMeshes&&je.push(D)});const it=D=>{c&&(be=D.touches[0].clientY,Se=Se??window.scrollY,ye=!0)},De=D=>{if(!c||!se||!be||Me)return;const Ee=D.touches[0].clientY-be;w.isMobile&&Ee<-50&&!we&&(D.cancelable&&D.preventDefault(),Ae(),be=null)},mt=D=>{be=null,ye=!1,fe=!0,Be.delayedCall(.5,()=>{fe=!1})},ot=D=>{if(ye||we||fe||Me){D.preventDefault(),D.stopPropagation(),Se!==null&&(window.scrollTo(0,Se),Be.to(window,{scrollTo:{y:Se},duration:0}));return}if(!c||!se||!Te||!h)return;if(w.isMobile){D.preventDefault(),D.stopPropagation();return}let J=0;if(D instanceof WheelEvent?J=D.deltaY:J=window.scrollY-(Se||0),D.preventDefault(),D.stopPropagation(),J>0){window.scrollTo(0,Se);return}J<0&&Ae()},Ae=()=>{const D=se,J=h?h.clone():new We(0,0,g),Ee=(Te==null?void 0:Te.z)??G.position.z,I=D==null?void 0:D.parent,q=D?k.indexOf(I):-1;Me=!0,D&&Ge(D);const W=G.userData.lockedLookAt?G.userData.lockedLookAt.clone():G.getWorldDirection(new We).multiplyScalar(1e3).add(G.position),re={progress:0};Be.to(G.position,{x:(Te==null?void 0:Te.x)??G.position.x,y:(Te==null?void 0:Te.y)??G.position.y,z:Ee,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const ke=je[q];if(q!==-1&&ke){const ge=je[q];if(ge){const _e=ge.material,Ce=ge.userData.backgroundPlane,ve=Math.abs(G.position.z-ge.position.z+120),Pe=ve<=N?Math.min(1,(1-ve/N)*2):0;Be.to(_e,{opacity:Pe,duration:.5,ease:"power2.in"}),Ce&&Be.to(Ce.material,{opacity:Pe*.8,duration:.5,ease:"power2.in"})}}if(I!=null&&I.userData.closeButton){const ge=I.userData.closeButton.position;Be.to(I.userData.closeButton.rotation,{z:0,duration:.3,ease:"power2.inOut"}),Be.to(I.userData.closeButton.position,{x:ge.x+2,duration:.3,ease:"power2.inOut"});const _e=I.userData.closeButton.children.filter(Ce=>Ce instanceof Ne).map(Ce=>Ce.material);Be.to(_e,{opacity:0,duration:.5,onUpdate:()=>{},onComplete:()=>{I.userData.closeButton.updateMatrixWorld(!0),I.userData.closeButton.visible=!1,I.userData.lockedPosition=null,Ie=!1}}),D&&qe(D,!1)}},onUpdate:()=>{const ke=re.progress,ge=Ze.lerp(W.x,J.x,ke),_e=Ze.lerp(W.y,J.y,ke),Ce=Ze.lerp(W.z,J.z,ke);G.lookAt(ge,_e,Ce),G.updateMatrixWorld(!0)},onComplete:()=>{G.lookAt(J),c=!1,se=null,document.body.classList.remove("no-scrollbar"),w.isMobile&&(document.body.style.overflow=""),i&&i(!1),D&&Ge(D),Se=null,Te=null,h=null,G.userData.lockedLookAt=null,Me=!1,k.forEach(ke=>{Math.abs(G.position.z-ke.position.z+90)<=N&&b.set(ke,0)})}}),Be.to(re,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},qe=(D,J=!0)=>{const Ee=[D,...D.children.filter(q=>q instanceof pt&&q.userData.isPortal)],I=J?25:2;Ee.forEach((q,W)=>{let re=-W*I;(D.position.y>0&&D.rotation.x===-Math.PI/2||D.position.y<0&&D.rotation.x===Math.PI/2)&&(re=W*I);const ke=J?q.userData.maxOpacity:0;Be.to(q.position,{z:re,duration:1,ease:"power3.out",delay:.5,onComplete:()=>{J&&W===0&&ue(D)}}),Be.to(q.material,{opacity:ke,duration:1,ease:"power3.out",delay:.5})})},et=D=>{ce.x=D.clientX/window.innerWidth*2-1,ce.y=-(D.clientY/window.innerHeight)*2+1,u.setFromCamera(ce,G),G.userData.lockedLookAt&&(G.lookAt(G.userData.lockedLookAt),G.updateMatrixWorld(!0)),k.forEach(I=>{I.userData.lockedPosition&&(I.position.equals(I.userData.lockedPosition)||I.position.copy(I.userData.lockedPosition)),I.updateMatrixWorld(!0),I.children.forEach(q=>q.updateMatrixWorld(!0))});const J=k.flatMap(I=>{const q=[];return!c&&I.userData.isActive&&I.children.forEach(W=>{W instanceof Ne&&(W.userData.isPortalHitbox||W.userData.isExploreTextHitbox)&&q.push(W)}),c&&se&&I===se.parent&&I.children.forEach(W=>{if(W instanceof Ne&&W.userData.isPortalHitbox&&q.push(W),W instanceof pt&&W.userData.isPortal){const re=W;re.children.forEach(ke=>{ke instanceof Ne&&ke.userData.isExploreTextHitbox&&q.push(ke),ke instanceof It&&ke===re.userData.closeButton&&ke.children.forEach(ge=>{ge instanceof Ne&&ge.userData.isCloseHitbox&&q.push(ge)})})}}),q}),Ee=u.intersectObjects(J);if(Ee.length>0){const I=Ee[0].object;if(I.userData.isPortalHitbox||I.userData.isExploreTextHitbox){const q=I.userData.portal;de!==q&&(de&&[de,...de.children.filter(ke=>ke instanceof pt&&ke.userData.isPortal)].forEach(ke=>{const ge=ke.material;Be.to(ge.color,{r:(_>>16&255)/255,g:(_>>8&255)/255,b:(_&255)/255,duration:.5})}),de=q,[de,...de.children.filter(re=>re instanceof pt&&re.userData.isPortal)].forEach(re=>{const ke=re.material;Be.to(ke.color,{r:(F>>16&255)/255,g:(F>>8&255)/255,b:(F&255)/255,duration:.5})})),te.style.cursor="pointer"}else if(I.userData.isCloseHitbox&&c){if(!Ie){Ie=!0;const q=I.parent;Be.to(q.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"})}te.style.cursor="pointer"}}else{if(de&&([de,...de.children.filter(q=>q instanceof pt&&q.userData.isPortal)].forEach(q=>{const W=q.material;Be.to(W.color,{r:(_>>16&255)/255,g:(_>>8&255)/255,b:(_&255)/255,duration:.5})}),de=null),c&&se&&Ie){const I=se.userData.closeButton;I&&(Ie=!1,Be.to(I.rotation,{z:0,duration:.3,ease:"power2.inOut"}))}te.style.cursor="auto"}},_t=D=>{if(Me)return;ce.x=D.clientX/window.innerWidth*2-1,ce.y=-(D.clientY/window.innerHeight)*2+1,u.setFromCamera(ce,G);const J=k.flatMap(_e=>{const Ce=[];return c&&se&&_e===se.parent&&_e.children.forEach(ve=>{if(ve instanceof pt&&ve.userData.isPortal){const Pe=ve;Pe.children.forEach(Re=>{Re instanceof It&&Re===Pe.userData.closeButton&&Re.children.forEach(tt=>{tt instanceof Ne&&tt.userData.isCloseHitbox&&Ce.push(tt)})})}}),Ce}),Ee=k.flatMap(_e=>{const Ce=[];return!c&&_e.userData.isActive&&_e.children.forEach(ve=>{ve instanceof Ne&&(ve.userData.isPortalHitbox||ve.userData.isExploreTextHitbox)&&Ce.push(ve)}),c&&se&&_e===se.parent&&_e.children.forEach(ve=>{ve instanceof Ne&&ve.userData.isPortalHitbox&&Ce.push(ve),ve instanceof pt&&ve.userData.isPortal&&ve.children.forEach(Pe=>{Pe instanceof Ne&&Pe.userData.isExploreTextHitbox&&Ce.push(Pe)})}),Ce});let I=u.intersectObjects(J);for(const _e of I)if(_e.object.userData.isCloseHitbox){Ae();return}if(I=u.intersectObjects(Ee),I.length===0)return;const W=I[0].object.userData.portal,re=W.parent,ke=k.indexOf(re),ge=n[ke];if(c&&W===se){let _e=new We;const Ce=e.CUBE_SIZE/2;W.position.x===Ce?_e.set(-1,0,0):W.position.x===-Ce?_e.set(1,0,0):W.position.y===Ce?_e.set(0,-1,0):W.position.y===-Ce&&_e.set(0,1,0),_e.applyQuaternion(re.getWorldQuaternion(new Wr)).normalize();const Pe=G.position.clone().clone().add(_e.clone().multiplyScalar(-675)),Re=_e.clone().multiplyScalar(-1e3),tt=Pe.clone().add(Re);Me=!0,Be.to(G.position,{x:Pe.x,y:Pe.y,z:Pe.z,duration:1,ease:"power2.in",onUpdate:()=>G.lookAt(tt),onStart:()=>{Be.to(xe.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{ge!=null&&ge.slug&&(O.setScrollPosition(window.scrollY),Tr.visit(route("project.show",{project:ge.slug}),{preserveScroll:!1})),Me=!1}})}else if(!c){Te||(Te=G.position.clone(),h=new We(0,0,g)),i&&ne(!0,Te,h);const _e=W.getWorldPosition(new We);we=!0,Me=!0,Se=window.scrollY,Be.to(G.position,{x:0,y:0,z:re.getWorldPosition(new We).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{c=!0,se=W,document.body.classList.add("no-scrollbar"),w.isMobile&&(document.body.style.overflow="hidden"),qe(W,!0),re.userData.lockedPosition=re.position.clone(),m(re);const Ce=je[ke];if(Ce){const ve=Ce.material,Pe=Ce.userData.backgroundPlane;Be.to(ve,{opacity:0,duration:.5,ease:"power2.out"}),Pe&&Be.to(Pe.material,{opacity:0,duration:.5,ease:"power2.out"})}},onComplete:()=>{if(W.userData.closeButton){W.userData.closeButton.visible=!0,re.updateMatrixWorld(!0);const Ce=W.userData.closeButton.children.filter(ve=>ve instanceof Ne&&!ve.userData.isCloseHitbox).map(ve=>ve.material);Ce.length>0&&Be.to(Ce,{opacity:1,duration:.5,onComplete:()=>{W.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in portal.userData")}}),Be.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const Ce=this.progress(),ve=G.getWorldDirection(new We).multiplyScalar(1e3).add(G.position),Pe=Ze.lerp(ve.x,_e.x,Ce),Re=Ze.lerp(ve.y,_e.y,Ce),tt=Ze.lerp(ve.z,_e.z,Ce);G.lookAt(Pe,Re,tt)},onComplete:()=>{G.lookAt(_e.x,_e.y,_e.z),G.updateMatrixWorld(!0),we=!1,Me=!1,G.userData.lockedLookAt=_e.clone()}})}};te.addEventListener("mousemove",et),te.addEventListener("click",_t),te.addEventListener("touchstart",it,{passive:!1}),te.addEventListener("touchmove",De,{passive:!1}),te.addEventListener("touchend",mt,{passive:!0}),window.addEventListener("wheel",ot,{passive:!1}),window.addEventListener("scroll",ot,{passive:!1});const Ue=()=>{r.forEach((D,J)=>{D.forEach(Ee=>{J.remove(Ee.mesh),Ee.mesh.geometry.dispose(),Ee.mesh.material.dispose()})}),r.clear(),b.clear(),E.clear()},Yt=()=>{te.removeEventListener("mousemove",et),te.removeEventListener("click",_t),te.removeEventListener("touchstart",it),te.removeEventListener("touchmove",De),te.removeEventListener("touchend",mt),window.removeEventListener("wheel",ot),window.removeEventListener("scroll",ot),se&&Ge(se),w.isMobile&&(document.body.style.overflow="")};return()=>{Yt(),Ue()}},updateClickHereParticles:ee}}function Di(p,e,n,t){const o=rn(),s=100,l=100,f=300,w=3355443,O=o.isMobile?24:32,U=-600,A=-500,T=1e3,g=o.isMobile?5:10,_=.05,M=1,x=o.isMobile?6:4,N=o.isMobile?4:6,Q=100,F=-450,S=60,X=n-T,Z=Math.abs(A-X),R=Math.ceil(Z/s),j=()=>{const u=new It;let ce=null,de=null;const Te=[],h=[],c=[],i=[],r=[];{const b=new Ro(s,s,s),E=new jo(b),y=O*R,B=new Yr;B.copy(E),B.instanceCount=y;const Y=new Rt({color:w,transparent:!0,fog:!0,vertexColors:!0}),H=new Float32Array(y*3),v=new Float32Array(y*3),z=new Float32Array(y*3),$=O*s,d=-$/2+s/2,m=A;for(let ye=0;ye<O;ye++){const we=K(ye);for(let fe=0;fe<R;fe++){const Me=ye*R+fe,je=d+ye*s,Ie=m-fe*s,it=Ze.randFloat(l,f),De=it/s,mt=U+it/2;H[Me*3]=je,H[Me*3+1]=mt,H[Me*3+2]=Ie,v[Me*3]=1,v[Me*3+1]=De,v[Me*3+2]=1,z[Me*3]=we,z[Me*3+1]=we,z[Me*3+2]=we}}B.setAttribute("instancePosition",new Fn(H,3)),B.setAttribute("instanceScale",new Fn(v,3)),B.setAttribute("color",new Fn(z,3)),Y.onBeforeCompile=ye=>{ye.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${ye.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},ce=new pt(B,Y);const a=-$/2,ee=$/2,ue=U,Ge=U+f,Xe=X,G=A;B.boundingBox=new qs(new We(a,ue,Xe),new We(ee,Ge,G));const te=(a+ee)/2,xe=(ue+Ge)/2,ne=(Xe+G)/2,me=ee-a,be=Ge-ue,Se=G-Xe,se=Math.sqrt(me*me+be*be+Se*Se)/2;B.boundingSphere=new Zs(new We(te,xe,ne),se),u.add(ce)}{de=new It;const b=O*s/(N-1),E=-(O*s)/2;for(let B=0;B<N;B++){let H=E+B*b,v=A;const z=[new We(H,F,v)];let $=0;for(;v>X;){const d=v===A?Ze.randFloat(300,800):Math.min(Ze.randFloat(300,800),Math.abs(v-X));if(v-=d,z.push(new We(H,F,v)),$+=d,v<=X){z[z.length-1].z=X;break}const m=Math.random()<.5?-1:1,a=Ze.randFloat(100,300);H+=m*a,z.push(new We(H,F,v)),$+=a}h.push({points:z,totalLength:$})}const y=new Ro(x,x,x);for(let B=0;B<N;B++){const Y=h[B],H=Y.totalLength,v=H/S;for(let z=0;z<S;z++){const $=new ut({color:16711680,fog:!0}),d=new Ne(y,$),m=z*v;let a=m;for(let ee=0;ee<Y.points.length-1;ee++){const ue=Y.points[ee],Ge=Y.points[ee+1],Xe=ue.distanceTo(Ge);if(a<=Xe){const G=a/Xe;d.position.lerpVectors(ue,Ge,G);break}a-=Xe}Te.push(d),c.push(m),i.push(B),r.push(1),de.add(d)}for(let z=0;z<S;z++){const $=new ut({color:16777215,fog:!0}),d=new Ne(y,$),m=H-(z*v+v/2);let a=H-m;const ee=[...Y.points].reverse();for(let ue=0;ue<ee.length-1;ue++){const Ge=ee[ue],Xe=ee[ue+1],G=Ge.distanceTo(Xe);if(a<=G){const te=a/G;d.position.lerpVectors(Ge,Xe,te);break}a-=G}Te.push(d),c.push(m),i.push(B),r.push(-1),de.add(d)}}e.add(de)}return e.add(u),{cityGroup:u,instancedLines:ce,particleGroup:de,particles:Te,paths:h,particleDistances:c,particlePaths:i,particleDirections:r}},K=u=>{if(u<g){const ce=(M-_)/(g-1);return _+u*ce}else if(u>=O-g){const ce=O-1-u,de=(M-_)/(g-1);return _+ce*de}return M},{cityGroup:P,instancedLines:ae,particleGroup:C,particles:V,paths:pe,particleDistances:le,particlePaths:oe,particleDirections:k}=j();return{cityGroup:P,buildingLines:ae?[ae]:[],updateParticles:u=>{const ce=Q*u;for(let de=0;de<V.length;de++){const Te=k[de],h=oe[de],c=pe[h],i=c.totalLength;le[de]+=ce*Te,Te===1?(le[de]=le[de]%i,le[de]<0&&(le[de]+=i)):le[de]=(le[de]+i)%i;const r=le[de],b=Te===1?c.points:[...c.points].reverse();let E=Te===1?r:i-r;for(let y=0;y<b.length-1;y++){const B=b[y],Y=b[y+1],H=B.distanceTo(Y);if(E<=H){const v=E/H;V[de].position.lerpVectors(B,Y,v);break}E-=H}}},dispose:()=>{ae&&(P.remove(ae),ae.geometry.dispose(),ae.material.dispose()),C&&(e.remove(C),C.children.forEach(u=>{u.geometry.dispose(),u.material.dispose()})),e.remove(P)}}}Be.registerPlugin(Oe);function Ii(p,e,n,t,o,s,l={},f,w){const O=rn(),{CUBE_SPACING:U,FIRST_CUBE_Z:A}=s,T=(t==null?void 0:t.length)||0,g=A-(T+1)*U;let _=!1,M=!1;const x=O.isMobile?(Math.abs(g)+(T-1)*U)*.7:Math.abs(g)+(T-1)*U;let N=Be.timeline();Oe.config({ignoreMobileResize:!0});{let S=0;const X=16;N=Be.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${x}`,scrub:l.scrub,pin:!0,onUpdate:Z=>{const R=performance.now();if(R-S>=X){if(!_){const j=Z.progress,K=Ze.lerp(0,g,j);e.position.set(0,0,K),e.lookAt(0,0,g)}o(e),S=R}w&&w.update()},onRefresh:()=>{e.updateProjectionMatrix()}}}),N.fromTo(e.position,{z:0},{z:g,duration:1,ease:"none"},0)}return{setReverting:S=>{_=S},timeline:N,isScrollTriggerActive:()=>M}}function Ri(p,e,n){const t=rn(),o=t.isMobile?25:20,s=t.isMobile?1e3:2e3,l=4e3,f=-1e3,w=n-1e3,O=1e3,U=n,A=150,T=-500,g=n,_=new io,M=new Float32Array(s*3),x=new Float32Array(s),N=new Float32Array(s);let Q=0;for(;Q<s;){const R=(Math.random()-.5)*l,j=(Math.random()-.5)*l,K=f+Math.random()*(w-f),P=K>U&&Math.abs(R)<O&&Math.abs(j)<O,ae=Math.abs(R)<A&&Math.abs(j)<A&&K>g&&K<T;if(!P&&!ae){const C=Q*3;M[C]=R,M[C+1]=j,M[C+2]=K;const V=.1+Math.random()*(.7-.1);x[Q]=V,N[Q]=V,Q++}}_.setAttribute("position",new bs(M,3)),_.setAttribute("opacity",new bs(N,1));const F=new go({uniforms:{color:{value:new St(1,1,1)},size:{value:o}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),S=new Xr(_,F);p.add(S);const X=_.attributes.opacity;for(let R=0;R<s;R++)Be.to({opacity:x[R]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){N[R]=this.targets()[0].opacity,X.needsUpdate=!0}});return{dispose:()=>{Be.killTweensOf(N),p.remove(S),_.dispose(),F.dispose()}}}function Oi(p,e){const t=e-1500,o=100,s=2,l=64,f=1e3,w=l*3,O=[4,4.5,5],U=6;let A,T,g,_,M,x;const N=[],Q=[[],[],[]],F=[[],[],[]],S=[[],[],[]];let X=[0,0,0];const Z=()=>{const P=0-t,ae=[];for(let ie=0;ie<o;ie++){const u=ie/(o-1),ce=0-u*P,de=u*5*2*Math.PI,Te=90*(.8+.2*Math.sin(de*2)),h=new We(Te*Math.cos(de),Te*Math.sin(de),ce);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath points",{t:u,z:ce,projectMaxZ:e}),ae.push(h)}A=new Gn(ae);const C=new io().setFromPoints(A.getPoints(200));_=new Un(C,new Rt({color:16711935,linewidth:2,visible:!1})),p.add(_);const V=[];for(let ie=0;ie<o;ie++){const u=ie/(o-1),ce=0-u*P,de=u*3*2*Math.PI,Te=60*(.8+.2*Math.sin(de*4)),h=new We(Te*Math.cos(de),Te*Math.sin(de),ce);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath2 points",{t:u,z:ce,projectMaxZ:e}),V.push(h)}T=new Gn(V);const pe=new io().setFromPoints(T.getPoints(200));M=new Un(pe,new Rt({color:65535,linewidth:2,visible:!1})),p.add(M);const le=[];for(let ie=0;ie<o;ie++){const u=ie/(o-1),ce=0-u*P,de=u*7*2*Math.PI,Te=100,h=90,c=.1*Math.sin(de),i=new We(Te*(1+c)*Math.cos(de),h*(1-c)*Math.sin(de),ce);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:u,z:ce,projectMaxZ:e}),le.push(i)}g=new Gn(le);const oe=new io().setFromPoints(g.getPoints(200));x=new Un(oe,new Rt({color:16776960,linewidth:2,visible:!1})),p.add(x);const k=[16711680,65280,255],L=new Ro(s,s,s);L.attributes.color&&delete L.attributes.color;for(let ie=0;ie<3;ie++){const u=new It;u.opacity=1,u.renderOrder=1,N[ie]=u,p.add(u);for(let ce=0;ce<w;ce++){const de=new ut({color:k[ie],transparent:!0,opacity:0,blending:jr,fog:!0,depthWrite:!1}),Te=new Ne(L,de);Te.renderOrder=1,Te.visible=!1,u.add(Te),Q[ie][ce]=Te,F[ie][ce]=0,S[ie][ce]=!1}}},R=P=>{const ae=[A,T,g][P],C=ae.getLength(),V=S[P].filter(le=>le).length;if(w-V>=l){let le=0;for(let oe=0;oe<l;oe++){const k=S[P].findIndex(h=>!h);if(k===-1){console.warn(`No available chasers for path ${P}, emitted ${le}/${l}`);break}const L=le/(l-1),ie=.05+(1-.05)*Math.pow(L,3),u=new ut({color:[16711680,65280,255][P],transparent:!0,opacity:ie,blending:qt,fog:!0,depthWrite:!1});Q[P][k].material=u,Q[P][k].visible=!0;const ce=le*U;F[P][k]=ce,S[P][k]=!0;const de=ce/C,Te=ae.getPointAt(de);Q[P][k].position.copy(Te),le++}}},j=P=>{const ae=performance.now()/1e3,C=[A,T,g];for(let V=0;V<3;V++){ae-X[V]>=O[V]&&(R(V),X[V]=ae);const pe=C[V],le=pe.getLength(),oe=f*P;for(let k=0;k<w;k++)if(S[V][k]){F[V][k]+=oe;const L=F[V][k]/le;if(L>=1)Q[V][k].visible=!1,S[V][k]=!1,F[V][k]=0;else{const ie=pe.getPointAt(L);Q[V][k].position.copy(ie)}}}};return Z(),{chaserPath:A,chaserPath2:T,chaserPath3:g,updateChasers:j,dispose:()=>{p.remove(_),p.remove(M),p.remove(x),_.geometry.dispose(),_.material.dispose(),M.geometry.dispose(),M.material.dispose(),x.geometry.dispose(),x.material.dispose(),N.forEach(P=>{P.children.forEach(ae=>{ae.geometry.dispose(),ae.material.dispose()}),p.remove(P)})}}}class Li extends Xs{constructor(e){super(e)}load(e,n,t,o){const s=this,l=new js(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){const w=s.parse(JSON.parse(f));n&&n(w)},t,o)}parse(e){return new Bi(e)}}class Bi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=zi(e,n,this.data);for(let s=0,l=o.length;s<l;s++)t.push(...o[s].toShapes());return t}}function zi(p,e,n){const t=Array.from(p),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,l=[];let f=0,w=0;for(let O=0;O<t.length;O++){const U=t[O];if(U===`
`)f=0,w-=s;else{const A=Ni(U,o,f,w,n);f+=A.offsetX,l.push(A.path)}}return l}function Ni(p,e,n,t,o){const s=o.glyphs[p]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+p+'" does not exists in font family '+o.familyName+".");return}const l=new oo;let f,w,O,U,A,T,g,_;if(s.o){const M=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let x=0,N=M.length;x<N;)switch(M[x++]){case"m":f=M[x++]*e+n,w=M[x++]*e+t,l.moveTo(f,w);break;case"l":f=M[x++]*e+n,w=M[x++]*e+t,l.lineTo(f,w);break;case"q":O=M[x++]*e+n,U=M[x++]*e+t,A=M[x++]*e+n,T=M[x++]*e+t,l.quadraticCurveTo(A,T,O,U);break;case"b":O=M[x++]*e+n,U=M[x++]*e+t,A=M[x++]*e+n,T=M[x++]*e+t,g=M[x++]*e+n,_=M[x++]*e+t,l.bezierCurveTo(A,T,g,_,O,U);break}}return{offsetX:s.ha*e,path:l}}function Hi(p="/fonts/Poppins_Regular.json"){const e=Qt(null),n=Qt(0),t=Qt(!1),o=()=>new Promise((l,f)=>{new Li().load(p,O=>{e.value=O,n.value=100,t.value=!0,l(O)},O=>{O.lengthComputable&&(n.value=O.loaded/O.total*100)},O=>{n.value=100,t.value=!0,f(O)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const Fi={class:"preloader"},Gi={class:"progress-label"},Ui=cs({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>(Dn(),Us("div",Fi,[ho("div",Gi,Mr(Math.round(e.progress))+"%",1)]))}}),Wi=$s(Ui,[["__scopeId","data-v-e5eadefa"]]),Hs=250,vn=500,No=-500,$n=-520,Fs=-720,Gs=4e3,Yi=cs({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){Be.registerPlugin(Oe);const e=p,n=Vs();n.projects=e.projects;const t=rn(),o={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},s=Qt(null),l=Qt(null),f=Qt(!1),w=Qt(0),O=Qt(!1),U=Qt(!0),A=new Map;let T,g,_,M,x,N,Q,F=null,S=null,X=null,Z=null,R=null,j=[],K=null,P=null,ae=0,C=null,V,pe=null,le=null,oe=null;const k=Hi("/fonts/Poppins_Regular.json"),L=()=>{const h=s.value?s.value.getBoundingClientRect().width:window.innerWidth,c=window.innerHeight,i=t.isMobile?.75:1,r=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;_.setSize(h*i,c*i),_.setPixelRatio(r),M.setSize(h*i,c*i),g.aspect=h/c,g.updateProjectionMatrix(),_.domElement.style.width=`${h}px`,_.domElement.style.height=`${c}px`},ie=h=>A.has(h)?Promise.resolve(A.get(h)):new Promise((c,i)=>{new Kr().load(h,b=>{b.encoding=void 0,A.set(h,b),c(b)},void 0,b=>i(b))}),u=async()=>{T=new Vr,T.background=new St(0),T.fog=new qr(0,700,Gs),g=new Zr(t.isMobile?95:75,window.innerWidth/window.innerHeight,1,Gs+6e3),g.position.set(0,0,0),g.lookAt(0,0,1e3),_=new $r({antialias:!0}),t.isMobile?_.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):_.setPixelRatio(window.devicePixelRatio),_.toneMapping=Qr,_.toneMappingExposure=1,_.outputEncoding=void 0,M=new Pi(_);const h=new Si(T,g);if(M.addPass(h),t.isMobile?x=new To(new Le(window.innerWidth,window.innerHeight),1,.1,0):x=new To(new Le(window.innerWidth,window.innerHeight),1.6,.2,0),x.renderToScreen=!0,M.addPass(x),s.value)s.value.appendChild(_.domElement),_.domElement.style.opacity="0";else return;N=new on,N.dom.style.position="fixed",N.dom.style.top="0px",N.dom.style.left="0px",N.dom.style.zIndex="1000",document.body.appendChild(N.dom);const i=e.projects.filter(E=>E.keyart).length+2+1;let r=0;const b=()=>{r++;const E=r/i*100,y=k.loadingProgress.value;w.value=(E+y/i)/(1+1/i),r===i&&k.isLoaded.value&&(f.value=!0)};await k.initialize().then(()=>{b()}).catch(E=>{console.error("Font initialization failed:",E),b()}),await ie(e.projectGridFile).then(()=>b()).catch(()=>b()),await ie(e.projectGridFile2).then(()=>b()).catch(()=>b());for(const E of e.projects)E.keyart?await ie(E.keyart).then(()=>b()).catch(()=>b()):b();C=ki(T,{CUBE_SIZE:Hs,CUBE_SPACING:vn,FIRST_CUBE_Z:No},e.projects,e.projectGridFile,e.projectGridFile2,o,A,k.font);try{if(await C.getInitializedData().then(({maxZ:E,updateCubeColors:y,projectCubes:B})=>{if(V=E,V===void 0||isNaN(V))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:Y}=Ai(T,k.font,{CUBE_SIZE:Hs,FIRST_CUBE_Z:No},o);j=[...Y,...B],K=y}),o.showCars){const{cityGroup:E,updateParticles:y,dispose:B}=Di(T,T,V,o);Q=y,R=B}if(o.showStarfield){const{dispose:E}=Ri(T,g,V);F=E}if(o.showChasers){const{dispose:E,updateChasers:y}=Oi(T,V);X=E,Z=y}L()}catch(E){console.error("Error initializing project cubes:",E),V=No-(e.projects.length+1)*vn}},ce=(h=0)=>{if(P=requestAnimationFrame(ce),_&&M){const c=(h-ae)/1e3;ae=h,Q(c),Z&&Z(c),C!=null&&C.updateClickHereParticles&&C.updateClickHereParticles(g,c);const i=4e3,r=1e3,b=Math.abs(g.position.z-V);g.far=Math.max(i+r,b),g.updateProjectionMatrix();const E=Fs-$n;let y=0;g.position.z>=$n?y=0:g.position.z<=Fs?y=1:y=(g.position.z-$n)/E,t.isMobile?x.strength=Ze.lerp(1.3,0,y):x.strength=Ze.lerp(1.6,.125,y),M.render()}N.update()},de=()=>{console.log("handleResize()"),L(),Oe.refresh()},Te=()=>{if(t.isMobile){const h=t.orientation;console.log("Resize: orientation",h,"lastOrientation",le),h!==le&&(le=h,oe&&clearTimeout(oe),oe=setTimeout(()=>{de(),oe=null},500))}else de()};return Pr(()=>{u().then(()=>{if(f.value){P=requestAnimationFrame(ce);let h=null;const c=C.getInitializedData().then(({projectCubes:r})=>{r.forEach(E=>{E.userData.isActive=!0});const b=No-(e.projects.length-1)*vn;if(g.position.set(0,0,5e3),g.lookAt(0,0,b),g.updateProjectionMatrix(),K(g),M.render(),Oe.getAll().forEach(E=>E.kill()),j.length&&K){const E=Ii(T,g,l,j,K,{CUBE_SPACING:vn,FIRST_CUBE_Z:No},{scrub:t.isMobile?.5:1},o,N);h=E.setReverting,pe=E.isScrollTriggerActive}_&&S===null&&(S=C.setupInteractivity(g,_.domElement,_,E=>{h&&h(E)},pe)),window.scrollTo({top:0,behavior:"auto"})}),i=()=>{c.then(()=>{U.value=!1,g.position.set(0,0,5e3),g.updateProjectionMatrix(),Be.to(_.domElement,{opacity:1,duration:.5,ease:"power4.out"});const r={z:5e3};Be.to(r,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{g.position.z=r.z,g.updateProjectionMatrix()},onComplete:()=>{g.position.z=0,O.value=!0}})})};Be.delayedCall(.5,i)}}).catch(h=>{console.error("Initialization failed:",h)}),window.addEventListener("resize",Te)}),Sr(()=>{P!==null&&cancelAnimationFrame(P),S&&S(),window.removeEventListener("resize",Te),Oe.getAll().forEach(h=>h.kill()),_.dispose(),M.dispose(),T.clear(),document.body.removeChild(N.dom),F&&F(),X&&X(),R&&R()}),(h,c)=>(Dn(),Us("section",{ref_key:"wrapper",ref:l,class:"wrapper"},[Ho(Er,{name:"fade"},{default:Ws(()=>[U.value?(Dn(),Ys(Wi,{key:0,progress:w.value},null,8,["progress"])):Cr("",!0)]),_:1}),ho("div",{ref_key:"tunnelWrapper",ref:s,class:"tunnel-wrapper"},null,512)],512))}}),Xi=$s(Yi,[["__scopeId","data-v-fef8b5ea"]]),ji={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Vi={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},qi={class:"overflow-hidden"},Ji=cs({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(p){return(e,n)=>(Dn(),Ys(ti,null,{default:Ws(()=>[Ho(Ar(kr),{title:"Welcome"}),ho("div",ji,[ho("nav",Vi,[Ho(Jr)]),ho("div",qi,[Ho(Xi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),n[0]||(n[0]=ho("div",{class:"flex justify-center items-center"},null,-1)),n[1]||(n[1]=ho("div",{class:"flex justify-center items-center"},null,-1)),Ho(ei)])]),_:1}))}});export{Ji as default};
