import{W as Tr,d as Kt,I as cs,e as Us,o as Dn,a as ho,t as Mr,x as Pr,y as Cr,b as Ho,w as Ws,c as Ys,f as Sr,T as Er,u as Ar,m as kr}from"./app-3I3gFW4q.js";import{c as Be,O as Dr,e as ao,F as Xo,j as go,U as Qn,V as Le,k as Tn,H as Mn,N as Ir,C as Rr,l as Et,d as Ie,b as Zt,m as ut,E as Or,n as Xs,o as js,p as Mo,q as Lr,r as Br,s as zr,P as Hn,t as Nr,v as no,G as gt,w as Hr,a as Xt,L as Rt,g as Oe,x as Ze,B as Ro,y as jo,f as xt,u as Vs,R as Fr,z as Gr,I as Ur,J as oo,K as qs,Q as Zs,T as xs,X as Wr,Y as Yr,Z as Fn,_ as ws,$ as Xr,a0 as Gn,a1 as Un,a2 as jr,S as Vr,a3 as qr,a4 as Zr,W as $r,a5 as Qr,a6 as Kr,h as Jr,i as ei}from"./GlobalFooter-CM2ihDo8.js";import{u as rn,_ as ti}from"./App.vue_vue_type_script_setup_true_lang-BhrMEvzr.js";import{_ as $s}from"./_plugin-vue_export-helper-DlAUqK2U.js";function oi(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function ni(p,e,n){return e&&oi(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var wt,Pn,zt,ro,io,ko,Qs,fo,Vo,Ks,eo,jt,Js,er=function(){return wt||typeof window<"u"&&(wt=window.gsap)&&wt.registerPlugin&&wt},tr=1,Ao=[],Fe=[],Qt=[],qo=Date.now,Kn=function(e,n){return n},si=function(){var e=Vo.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,Fe),o.push.apply(o,Qt),Fe=t,Qt=o,Kn=function(l,f){return n[l](f)}},lo=function(e,n){return~Qt.indexOf(e)&&Qt[Qt.indexOf(e)+1][n]},Zo=function(e){return!!~Ks.indexOf(e)},Ct=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Pt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},un="scrollLeft",fn="scrollTop",Jn=function(){return eo&&eo.isPressed||Fe.cache++},In=function(e,n){var t=function o(s){if(s||s===0){tr&&(zt.history.scrollRestoration="manual");var l=eo&&eo.isPressed;s=o.v=Math.round(s)||(eo&&eo.iOS?1:0),e(s),o.cacheID=Fe.cache,l&&Kn("ss",s)}else(n||Fe.cache!==o.cacheID||Kn("ref"))&&(o.cacheID=Fe.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Dt={s:un,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:In(function(p){return arguments.length?zt.scrollTo(p,ft.sc()):zt.pageXOffset||ro[un]||io[un]||ko[un]||0})},ft={s:fn,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Dt,sc:In(function(p){return arguments.length?zt.scrollTo(Dt.sc(),p):zt.pageYOffset||ro[fn]||io[fn]||ko[fn]||0})},It=function(e,n){return(n&&n._ctx&&n._ctx.selector||wt.utils.toArray)(e)[0]||(typeof e=="string"&&wt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},co=function(e,n){var t=n.s,o=n.sc;Zo(e)&&(e=ro.scrollingElement||io);var s=Fe.indexOf(e),l=o===ft.sc?1:2;!~s&&(s=Fe.push(e)-1),Fe[s+l]||Ct(e,"scroll",Jn);var f=Fe[s+l],x=f||(Fe[s+l]=In(lo(e,t),!0)||(Zo(e)?o:In(function(I){return arguments.length?e[t]=I:e[t]})));return x.target=e,f||(x.smooth=wt.getProperty(e,"scrollBehavior")==="smooth"),x},es=function(e,n,t){var o=e,s=e,l=qo(),f=l,x=n||50,I=Math.max(500,x*3),U=function(w,T){var y=qo();T||y-l>x?(s=o,o=w,f=l,l=y):t?o+=w:o=s+(w-s)/(y-f)*(l-f)},E=function(){s=o=t?0:o,f=l=0},v=function(w){var T=f,y=s,L=qo();return(w||w===0)&&w!==o&&U(w),l===f||L-f>I?0:(o+(t?y:-y))/((t?L:l)-T)*1e3};return{update:U,reset:E,getVelocity:v}},Bo=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},bs=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},or=function(){Vo=wt.core.globals().ScrollTrigger,Vo&&Vo.core&&si()},nr=function(e){return wt=e||er(),!Pn&&wt&&typeof document<"u"&&document.body&&(zt=window,ro=document,io=ro.documentElement,ko=ro.body,Ks=[zt,ro,io,ko],wt.utils.clamp,Js=wt.core.context||function(){},fo="onpointerenter"in ko?"pointer":"mouse",Qs=rt.isTouch=zt.matchMedia&&zt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in zt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,jt=rt.eventTypes=("ontouchstart"in io?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in io?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return tr=0},500),or(),Pn=1),Pn};Dt.op=ft;Fe.cache=0;var rt=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){Pn||nr(wt)||console.warn("Please gsap.registerPlugin(Observer)"),Vo||or();var o=t.tolerance,s=t.dragMinimum,l=t.type,f=t.target,x=t.lineHeight,I=t.debounce,U=t.preventDefault,E=t.onStop,v=t.onStopDelay,g=t.ignore,w=t.wheelSpeed,T=t.event,y=t.onDragStart,L=t.onDragEnd,J=t.onDrag,N=t.onPress,C=t.onRelease,V=t.onRight,Q=t.onLeft,k=t.onUp,q=t.onDown,ee=t.onChangeX,M=t.onChangeY,ue=t.onChange,S=t.onToggleX,Z=t.onToggleY,he=t.onHover,ce=t.onHoverEnd,le=t.onMove,A=t.ignoreCheck,R=t.isNormalizer,fe=t.onGestureStart,u=t.onGestureEnd,$=t.onWheel,ne=t.onEnable,ge=t.onDisable,h=t.onClick,c=t.scrollSpeed,i=t.capture,r=t.allowClicks,P=t.lockAxis,G=t.onLockAxis;this.target=f=It(f)||io,this.vars=t,g&&(g=wt.utils.toArray(g)),o=o||1e-9,s=s||0,w=w||1,c=c||1,l=l||"wheel,touch,pointer",I=I!==!1,x||(x=parseFloat(zt.getComputedStyle(ko).lineHeight)||22);var _,H,X,z,b,O,K,d=this,m=0,a=0,se=t.passive||!U&&t.passive!==!1,de=co(f,Dt),Ge=co(f,ft),je=de(),F=Ge(),te=~l.indexOf("touch")&&!~l.indexOf("pointer")&&jt[0]==="pointerdown",be=Zo(f),ie=f.ownerDocument||ro,xe=[0,0,0],Te=[0,0,0],Me=0,ae=function(){return Me=qo()},_e=function(oe,Ae){return(d.event=oe)&&g&&~g.indexOf(oe.target)||Ae&&te&&oe.pointerType!=="touch"||A&&A(oe,Ae)},ve=function(){d._vx.reset(),d._vy.reset(),H.pause(),E&&E(d)},pe=function(){var oe=d.deltaX=bs(xe),Ae=d.deltaY=bs(Te),B=Math.abs(oe)>=o,j=Math.abs(Ae)>=o;ue&&(B||j)&&ue(d,oe,Ae,xe,Te),B&&(V&&d.deltaX>0&&V(d),Q&&d.deltaX<0&&Q(d),ee&&ee(d),S&&d.deltaX<0!=m<0&&S(d),m=d.deltaX,xe[0]=xe[1]=xe[2]=0),j&&(q&&d.deltaY>0&&q(d),k&&d.deltaY<0&&k(d),M&&M(d),Z&&d.deltaY<0!=a<0&&Z(d),a=d.deltaY,Te[0]=Te[1]=Te[2]=0),(z||X)&&(le&&le(d),X&&(y&&X===1&&y(d),J&&J(d),X=0),z=!1),O&&!(O=!1)&&G&&G(d),b&&($(d),b=!1),_=0},Ce=function(oe,Ae,B){xe[B]+=oe,Te[B]+=Ae,d._vx.update(oe),d._vy.update(Ae),I?_||(_=requestAnimationFrame(pe)):pe()},Ve=function(oe,Ae){P&&!K&&(d.axis=K=Math.abs(oe)>Math.abs(Ae)?"x":"y",O=!0),K!=="y"&&(xe[2]+=oe,d._vx.update(oe,!0)),K!=="x"&&(Te[2]+=Ae,d._vy.update(Ae,!0)),I?_||(_=requestAnimationFrame(pe)):pe()},we=function(oe){if(!_e(oe,1)){oe=Bo(oe,U);var Ae=oe.clientX,B=oe.clientY,j=Ae-d.x,W=B-d.y,Y=d.isDragging;d.x=Ae,d.y=B,(Y||(j||W)&&(Math.abs(d.startX-Ae)>=s||Math.abs(d.startY-B)>=s))&&(X=Y?2:1,Y||(d.isDragging=!0),Ve(j,W))}},at=d.onPress=function(D){_e(D,1)||D&&D.button||(d.axis=K=null,H.pause(),d.isPressed=!0,D=Bo(D),m=a=0,d.startX=d.x=D.clientX,d.startY=d.y=D.clientY,d._vx.reset(),d._vy.reset(),Ct(R?f:ie,jt[1],we,se,!0),d.deltaX=d.deltaY=0,N&&N(d))},ke=d.onRelease=function(D){if(!_e(D,1)){Pt(R?f:ie,jt[1],we,!0);var oe=!isNaN(d.y-d.startY),Ae=d.isDragging,B=Ae&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),j=Bo(D);!B&&oe&&(d._vx.reset(),d._vy.reset(),U&&r&&wt.delayedCall(.08,function(){if(qo()-Me>300&&!D.defaultPrevented){if(D.target.click)D.target.click();else if(ie.createEvent){var W=ie.createEvent("MouseEvents");W.initMouseEvent("click",!0,!0,zt,1,j.screenX,j.screenY,j.clientX,j.clientY,!1,!1,!1,!1,0,null),D.target.dispatchEvent(W)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,E&&Ae&&!R&&H.restart(!0),X&&pe(),L&&Ae&&L(d),C&&C(d,B)}},bt=function(oe){return oe.touches&&oe.touches.length>1&&(d.isGesturing=!0)&&fe(oe,d.isDragging)},nt=function(){return(d.isGesturing=!1)||u(d)},Ne=function(oe){if(!_e(oe)){var Ae=de(),B=Ge();Ce((Ae-je)*c,(B-F)*c,1),je=Ae,F=B,E&&H.restart(!0)}},Qe=function(oe){if(!_e(oe)){oe=Bo(oe,U),$&&(b=!0);var Ae=(oe.deltaMode===1?x:oe.deltaMode===2?zt.innerHeight:1)*w;Ce(oe.deltaX*Ae,oe.deltaY*Ae,0),E&&!R&&H.restart(!0)}},lt=function(oe){if(!_e(oe)){var Ae=oe.clientX,B=oe.clientY,j=Ae-d.x,W=B-d.y;d.x=Ae,d.y=B,z=!0,E&&H.restart(!0),(j||W)&&Ve(j,W)}},Mt=function(oe){d.event=oe,he(d)},Ue=function(oe){d.event=oe,ce(d)},Wt=function(oe){return _e(oe)||Bo(oe,U)&&h(d)};H=d._dc=wt.delayedCall(v||.25,ve).pause(),d.deltaX=d.deltaY=0,d._vx=es(0,50,!0),d._vy=es(0,50,!0),d.scrollX=de,d.scrollY=Ge,d.isDragging=d.isGesturing=d.isPressed=!1,Js(this),d.enable=function(D){return d.isEnabled||(Ct(be?ie:f,"scroll",Jn),l.indexOf("scroll")>=0&&Ct(be?ie:f,"scroll",Ne,se,i),l.indexOf("wheel")>=0&&Ct(f,"wheel",Qe,se,i),(l.indexOf("touch")>=0&&Qs||l.indexOf("pointer")>=0)&&(Ct(f,jt[0],at,se,i),Ct(ie,jt[2],ke),Ct(ie,jt[3],ke),r&&Ct(f,"click",ae,!0,!0),h&&Ct(f,"click",Wt),fe&&Ct(ie,"gesturestart",bt),u&&Ct(ie,"gestureend",nt),he&&Ct(f,fo+"enter",Mt),ce&&Ct(f,fo+"leave",Ue),le&&Ct(f,fo+"move",lt)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=z=X=!1,d._vx.reset(),d._vy.reset(),je=de(),F=Ge(),D&&D.type&&at(D),ne&&ne(d)),d},d.disable=function(){d.isEnabled&&(Ao.filter(function(D){return D!==d&&Zo(D.target)}).length||Pt(be?ie:f,"scroll",Jn),d.isPressed&&(d._vx.reset(),d._vy.reset(),Pt(R?f:ie,jt[1],we,!0)),Pt(be?ie:f,"scroll",Ne,i),Pt(f,"wheel",Qe,i),Pt(f,jt[0],at,i),Pt(ie,jt[2],ke),Pt(ie,jt[3],ke),Pt(f,"click",ae,!0),Pt(f,"click",Wt),Pt(ie,"gesturestart",bt),Pt(ie,"gestureend",nt),Pt(f,fo+"enter",Mt),Pt(f,fo+"leave",Ue),Pt(f,fo+"move",lt),d.isEnabled=d.isPressed=d.isDragging=!1,ge&&ge(d))},d.kill=d.revert=function(){d.disable();var D=Ao.indexOf(d);D>=0&&Ao.splice(D,1),eo===d&&(eo=0)},Ao.push(d),R&&Zo(f)&&(eo=d),d.enable(T)},ni(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();rt.version="3.12.7";rt.create=function(p){return new rt(p)};rt.register=nr;rt.getAll=function(){return Ao.slice()};rt.getById=function(p){return Ao.filter(function(e){return e.vars.id===p})[0]};er()&&wt.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ye,So,He,tt,Bt,$e,us,Rn,nn,$o,Fo,pn,_t,Nn,ts,At,_s,vs,Eo,sr,Wn,rr,St,os,ir,ar,so,ns,fs,Do,ps,On,ss,Yn,dn=1,vt=Date.now,Xn=vt(),Ut=0,Go=0,Ts=function(e,n,t){var o=Lt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Ms=function(e,n){return n&&(!Lt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},ri=function p(){return Go&&requestAnimationFrame(p)},Ps=function(){return Nn=1},Cs=function(){return Nn=0},qt=function(e){return e},Uo=function(e){return Math.round(e*1e5)/1e5||0},lr=function(){return typeof window<"u"},cr=function(){return ye||lr()&&(ye=window.gsap)&&ye.registerPlugin&&ye},bo=function(e){return!!~us.indexOf(e)},ur=function(e){return(e==="Height"?ps:He["inner"+e])||Bt["client"+e]||$e["client"+e]},fr=function(e){return lo(e,"getBoundingClientRect")||(bo(e)?function(){return kn.width=He.innerWidth,kn.height=ps,kn}:function(){return Jt(e)})},ii=function(e,n,t){var o=t.d,s=t.d2,l=t.a;return(l=lo(e,"getBoundingClientRect"))?function(){return l()[o]}:function(){return(n?ur(s):e["client"+s])||0}},ai=function(e,n){return!n||~Qt.indexOf(e)?fr(e):function(){return kn}},$t=function(e,n){var t=n.s,o=n.d2,s=n.d,l=n.a;return Math.max(0,(t="scroll"+o)&&(l=lo(e,t))?l()-fr(e)()[s]:bo(e)?(Bt[t]||$e[t])-ur(o):e[t]-e["offset"+o])},hn=function(e,n){for(var t=0;t<Eo.length;t+=3)(!n||~n.indexOf(Eo[t+1]))&&e(Eo[t],Eo[t+1],Eo[t+2])},Lt=function(e){return typeof e=="string"},Tt=function(e){return typeof e=="function"},Wo=function(e){return typeof e=="number"},po=function(e){return typeof e=="object"},zo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},jn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},Po=Math.abs,pr="left",dr="top",ds="right",hs="bottom",yo="width",xo="height",Qo="Right",Ko="Left",Jo="Top",en="Bottom",it="padding",Ft="margin",Oo="Width",gs="Height",ct="px",Gt=function(e){return He.getComputedStyle(e)},li=function(e){var n=Gt(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Ss=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},Jt=function(e,n){var t=n&&Gt(e)[ts]!=="matrix(1, 0, 0, 1, 0, 0)"&&ye.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Ln=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},hr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},ci=function(e){return function(n){return ye.utils.snap(hr(e),n)}},ms=function(e){var n=ye.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,l){l===void 0&&(l=.001);var f;if(!s)return n(o);if(s>0){for(o-=l,f=0;f<t.length;f++)if(t[f]>=o)return t[f];return t[f-1]}else for(f=t.length,o+=l;f--;)if(t[f]<=o)return t[f];return t[0]}:function(o,s,l){l===void 0&&(l=.001);var f=n(o);return!s||Math.abs(f-o)<l||f-o<0==s<0?f:n(s<0?o-e:o+e)}},ui=function(e){return function(n,t){return ms(hr(e))(n,t.direction)}},gn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},ht=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},dt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},mn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Es={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},yn={toggleActions:"play",anticipatePin:0},Bn={top:0,left:0,center:.5,bottom:1,right:1},Cn=function(e,n){if(Lt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Bn?Bn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},xn=function(e,n,t,o,s,l,f,x){var I=s.startColor,U=s.endColor,E=s.fontSize,v=s.indent,g=s.fontWeight,w=tt.createElement("div"),T=bo(t)||lo(t,"pinType")==="fixed",y=e.indexOf("scroller")!==-1,L=T?$e:t,J=e.indexOf("start")!==-1,N=J?I:U,C="border-color:"+N+";font-size:"+E+";color:"+N+";font-weight:"+g+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return C+="position:"+((y||x)&&T?"fixed;":"absolute;"),(y||x||!T)&&(C+=(o===ft?ds:hs)+":"+(l+parseFloat(v))+"px;"),f&&(C+="box-sizing:border-box;text-align:left;width:"+f.offsetWidth+"px;"),w._isStart=J,w.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),w.style.cssText=C,w.innerText=n||n===0?e+"-"+n:e,L.children[0]?L.insertBefore(w,L.children[0]):L.appendChild(w),w._offset=w["offset"+o.op.d2],Sn(w,0,o,J),w},Sn=function(e,n,t,o){var s={display:"block"},l=t[o?"os2":"p2"],f=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+l+Oo]=1,s["border"+f+Oo]=0,s[t.p]=n+"px",ye.set(e,s)},ze=[],rs={},sn,As=function(){return vt()-Ut>34&&(sn||(sn=requestAnimationFrame(to)))},Co=function(){(!St||!St.isPressed||St.startX>$e.clientWidth)&&(Fe.cache++,St?sn||(sn=requestAnimationFrame(to)):to(),Ut||vo("scrollStart"),Ut=vt())},Vn=function(){ar=He.innerWidth,ir=He.innerHeight},Yo=function(e){Fe.cache++,(e===!0||!_t&&!rr&&!tt.fullscreenElement&&!tt.webkitFullscreenElement&&(!os||ar!==He.innerWidth||Math.abs(He.innerHeight-ir)>He.innerHeight*.25))&&Rn.restart(!0)},_o={},fi=[],gr=function p(){return dt(Re,"scrollEnd",p)||mo(!0)},vo=function(e){return _o[e]&&_o[e].map(function(n){return n()})||fi},Ot=[],mr=function(e){for(var n=0;n<Ot.length;n+=5)(!e||Ot[n+4]&&Ot[n+4].query===e)&&(Ot[n].style.cssText=Ot[n+1],Ot[n].getBBox&&Ot[n].setAttribute("transform",Ot[n+2]||""),Ot[n+3].uncache=1)},ys=function(e,n){var t;for(At=0;At<ze.length;At++)t=ze[At],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));On=!0,n&&mr(n),n||vo("revert")},yr=function(e,n){Fe.cache++,(n||!kt)&&Fe.forEach(function(t){return Tt(t)&&t.cacheID++&&(t.rec=0)}),Lt(e)&&(He.history.scrollRestoration=fs=e)},kt,wo=0,ks,pi=function(){if(ks!==wo){var e=ks=wo;requestAnimationFrame(function(){return e===wo&&mo(!0)})}},xr=function(){$e.appendChild(Do),ps=!St&&Do.offsetHeight||He.innerHeight,$e.removeChild(Do)},Ds=function(e){return nn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},mo=function(e,n){if(Bt=tt.documentElement,$e=tt.body,us=[He,tt,Bt,$e],Ut&&!e&&!On){ht(Re,"scrollEnd",gr);return}xr(),kt=Re.isRefreshing=!0,Fe.forEach(function(o){return Tt(o)&&++o.cacheID&&(o.rec=o())});var t=vo("refreshInit");sr&&Re.sort(),n||ys(),Fe.forEach(function(o){Tt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),ze.slice(0).forEach(function(o){return o.refresh()}),On=!1,ze.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",l=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-l),o.refresh()}}),ss=1,Ds(!0),ze.forEach(function(o){var s=$t(o.scroller,o._dir),l=o.vars.end==="max"||o._endClamp&&o.end>s,f=o._startClamp&&o.start>=s;(l||f)&&o.setPositions(f?s-1:o.start,l?Math.max(f?s:o.start+1,s):o.end,!0)}),Ds(!1),ss=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),Fe.forEach(function(o){Tt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),yr(fs,1),Rn.pause(),wo++,kt=2,to(2),ze.forEach(function(o){return Tt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),kt=Re.isRefreshing=!1,vo("refresh")},is=0,En=1,tn,to=function(e){if(e===2||!kt&&!On){Re.isUpdating=!0,tn&&tn.update(0);var n=ze.length,t=vt(),o=t-Xn>=50,s=n&&ze[0].scroll();if(En=is>s?-1:1,kt||(is=s),o&&(Ut&&!Nn&&t-Ut>200&&(Ut=0,vo("scrollEnd")),Fo=Xn,Xn=t),En<0){for(At=n;At-- >0;)ze[At]&&ze[At].update(0,o);En=1}else for(At=0;At<n;At++)ze[At]&&ze[At].update(0,o);Re.isUpdating=!1}sn=0},as=[pr,dr,hs,ds,Ft+en,Ft+Qo,Ft+Jo,Ft+Ko,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],An=as.concat([yo,xo,"boxSizing","max"+Oo,"max"+gs,"position",Ft,it,it+Jo,it+Qo,it+en,it+Ko]),di=function(e,n,t){Io(t);var o=e._gsap;if(o.spacerIsNative)Io(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},qn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=as.length,l=n.style,f=e.style,x;s--;)x=as[s],l[x]=t[x];l.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(l.display="inline-block"),f[hs]=f[ds]="auto",l.flexBasis=t.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[yo]=Ln(e,Dt)+ct,l[xo]=Ln(e,ft)+ct,l[it]=f[Ft]=f[dr]=f[pr]="0",Io(o),f[yo]=f["max"+Oo]=t[yo],f[xo]=f["max"+gs]=t[xo],f[it]=t[it],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},hi=/([A-Z])/g,Io=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,l;for((e.t._gsap||ye.core.getCache(e.t)).uncache=1;o<t;o+=2)l=e[o+1],s=e[o],l?n[s]=l:n[s]&&n.removeProperty(s.replace(hi,"-$1").toLowerCase())}},wn=function(e){for(var n=An.length,t=e.style,o=[],s=0;s<n;s++)o.push(An[s],t[An[s]]);return o.t=e,o},gi=function(e,n,t){for(var o=[],s=e.length,l=t?8:0,f;l<s;l+=2)f=e[l],o.push(f,f in n?n[f]:e[l+1]);return o.t=e.t,o},kn={left:0,top:0},Is=function(e,n,t,o,s,l,f,x,I,U,E,v,g,w){Tt(e)&&(e=e(x)),Lt(e)&&e.substr(0,3)==="max"&&(e=v+(e.charAt(4)==="="?Cn("0"+e.substr(3),t):0));var T=g?g.time():0,y,L,J;if(g&&g.seek(0),isNaN(e)||(e=+e),Wo(e))g&&(e=ye.utils.mapRange(g.scrollTrigger.start,g.scrollTrigger.end,0,v,e)),f&&Sn(f,t,o,!0);else{Tt(n)&&(n=n(x));var N=(e||"0").split(" "),C,V,Q,k;J=It(n,x)||$e,C=Jt(J)||{},(!C||!C.left&&!C.top)&&Gt(J).display==="none"&&(k=J.style.display,J.style.display="block",C=Jt(J),k?J.style.display=k:J.style.removeProperty("display")),V=Cn(N[0],C[o.d]),Q=Cn(N[1]||"0",t),e=C[o.p]-I[o.p]-U+V+s-Q,f&&Sn(f,Q,o,t-Q<20||f._isStart&&Q>20),t-=t-Q}if(w&&(x[w]=e||-.001,e<0&&(e=0)),l){var q=e+t,ee=l._isStart;y="scroll"+o.d2,Sn(l,q,o,ee&&q>20||!ee&&(E?Math.max($e[y],Bt[y]):l.parentNode[y])<=q+1),E&&(I=Jt(f),E&&(l.style[o.op.p]=I[o.op.p]-o.op.m-l._offset+ct))}return g&&J&&(y=Jt(J),g.seek(v),L=Jt(J),g._caScrollDist=y[o.p]-L[o.p],e=e/g._caScrollDist*v),g&&g.seek(T),g?e:Math.round(e)},mi=/(webkit|moz|length|cssText|inset)/i,Rs=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,l,f;if(n===$e){e._stOrig=s.cssText,f=Gt(e);for(l in f)!+l&&!mi.test(l)&&f[l]&&typeof s[l]=="string"&&l!=="0"&&(s[l]=f[l]);s.top=t,s.left=o}else s.cssText=e._stOrig;ye.core.getCache(e).uncache=1,n.appendChild(e)}},wr=function(e,n,t){var o=n,s=o;return function(l){var f=Math.round(e());return f!==o&&f!==s&&Math.abs(f-o)>3&&Math.abs(f-s)>3&&(l=f,t&&t()),s=o,o=Math.round(l),o}},bn=function(e,n,t){var o={};o[n.p]="+="+t,ye.set(e,o)},Os=function(e,n){var t=co(e,n),o="_scroll"+n.p2,s=function l(f,x,I,U,E){var v=l.tween,g=x.onComplete,w={};I=I||t();var T=wr(t,I,function(){v.kill(),l.tween=0});return E=U&&E||0,U=U||f-I,v&&v.kill(),x[o]=f,x.inherit=!1,x.modifiers=w,w[o]=function(){return T(I+U*v.ratio+E*v.ratio*v.ratio)},x.onUpdate=function(){Fe.cache++,l.tween&&to()},x.onComplete=function(){l.tween=0,g&&g.call(v)},v=l.tween=ye.to(e,x),v};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},ht(e,"wheel",t.wheelHandler),Re.isTouch&&ht(e,"touchmove",t.wheelHandler),s},Re=function(){function p(n,t){So||p.register(ye)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ns(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Go){this.update=this.refresh=this.kill=qt;return}t=Ss(Lt(t)||Wo(t)||t.nodeType?{trigger:t}:t,yn);var s=t,l=s.onUpdate,f=s.toggleClass,x=s.id,I=s.onToggle,U=s.onRefresh,E=s.scrub,v=s.trigger,g=s.pin,w=s.pinSpacing,T=s.invalidateOnRefresh,y=s.anticipatePin,L=s.onScrubComplete,J=s.onSnapComplete,N=s.once,C=s.snap,V=s.pinReparent,Q=s.pinSpacer,k=s.containerAnimation,q=s.fastScrollEnd,ee=s.preventOverlaps,M=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Dt:ft,ue=!E&&E!==0,S=It(t.scroller||He),Z=ye.core.getCache(S),he=bo(S),ce=("pinType"in t?t.pinType:lo(S,"pinType")||he&&"fixed")==="fixed",le=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],A=ue&&t.toggleActions.split(" "),R="markers"in t?t.markers:yn.markers,fe=he?0:parseFloat(Gt(S)["border"+M.p2+Oo])||0,u=this,$=t.onRefreshInit&&function(){return t.onRefreshInit(u)},ne=ii(S,he,M),ge=ai(S,he),h=0,c=0,i=0,r=co(S,M),P,G,_,H,X,z,b,O,K,d,m,a,se,de,Ge,je,F,te,be,ie,xe,Te,Me,ae,_e,ve,pe,Ce,Ve,we,at,ke,bt,nt,Ne,Qe,lt,Mt,Ue;if(u._startClamp=u._endClamp=!1,u._dir=M,y*=45,u.scroller=S,u.scroll=k?k.time.bind(k):r,H=r(),u.vars=t,o=o||t.animation,"refreshPriority"in t&&(sr=1,t.refreshPriority===-9999&&(tn=u)),Z.tweenScroll=Z.tweenScroll||{top:Os(S,ft),left:Os(S,Dt)},u.tweenTo=P=Z.tweenScroll[M.p],u.scrubDuration=function(B){bt=Wo(B)&&B,bt?ke?ke.duration(B):ke=ye.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:bt,paused:!0,onComplete:function(){return L&&L(u)}}):(ke&&ke.progress(1).kill(),ke=0)},o&&(o.vars.lazy=!1,o._initted&&!u.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),u.animation=o.pause(),o.scrollTrigger=u,u.scrubDuration(E),we=0,x||(x=o.vars.id)),C&&((!po(C)||C.push)&&(C={snapTo:C}),"scrollBehavior"in $e.style&&ye.set(he?[$e,Bt]:S,{scrollBehavior:"auto"}),Fe.forEach(function(B){return Tt(B)&&B.target===(he?tt.scrollingElement||Bt:S)&&(B.smooth=!1)}),_=Tt(C.snapTo)?C.snapTo:C.snapTo==="labels"?ci(o):C.snapTo==="labelsDirectional"?ui(o):C.directional!==!1?function(B,j){return ms(C.snapTo)(B,vt()-c<500?0:j.direction)}:ye.utils.snap(C.snapTo),nt=C.duration||{min:.1,max:2},nt=po(nt)?$o(nt.min,nt.max):$o(nt,nt),Ne=ye.delayedCall(C.delay||bt/2||.1,function(){var B=r(),j=vt()-c<500,W=P.tween;if((j||Math.abs(u.getVelocity())<10)&&!W&&!Nn&&h!==B){var Y=(B-z)/de,Se=o&&!ue?o.totalProgress():Y,me=j?0:(Se-at)/(vt()-Fo)*1e3||0,re=ye.utils.clamp(-Y,1-Y,Po(me/2)*me/.185),Ee=Y+(C.inertia===!1?0:re),Pe,De,Ye=C,mt=Ye.onStart,ot=Ye.onInterrupt,pt=Ye.onComplete;if(Pe=_(Ee,u),Wo(Pe)||(Pe=Ee),De=Math.max(0,Math.round(z+Pe*de)),B<=b&&B>=z&&De!==B){if(W&&!W._initted&&W.data<=Po(De-B))return;C.inertia===!1&&(re=Pe-Y),P(De,{duration:nt(Po(Math.max(Po(Ee-Se),Po(Pe-Se))*.185/me/.05||0)),ease:C.ease||"power3",data:Po(De-B),onInterrupt:function(){return Ne.restart(!0)&&ot&&ot(u)},onComplete:function(){u.update(),h=r(),o&&!ue&&(ke?ke.resetTo("totalProgress",Pe,o._tTime/o._tDur):o.progress(Pe)),we=at=o&&!ue?o.totalProgress():u.progress,J&&J(u),pt&&pt(u)}},B,re*de,De-B-re*de),mt&&mt(u,P.tween)}}else u.isActive&&h!==B&&Ne.restart(!0)}).pause()),x&&(rs[x]=u),v=u.trigger=It(v||g!==!0&&g),Ue=v&&v._gsap&&v._gsap.stRevert,Ue&&(Ue=Ue(u)),g=g===!0?v:It(g),Lt(f)&&(f={targets:v,className:f}),g&&(w===!1||w===Ft||(w=!w&&g.parentNode&&g.parentNode.style&&Gt(g.parentNode).display==="flex"?!1:it),u.pin=g,G=ye.core.getCache(g),G.spacer?Ge=G.pinState:(Q&&(Q=It(Q),Q&&!Q.nodeType&&(Q=Q.current||Q.nativeElement),G.spacerIsNative=!!Q,Q&&(G.spacerState=wn(Q))),G.spacer=te=Q||tt.createElement("div"),te.classList.add("pin-spacer"),x&&te.classList.add("pin-spacer-"+x),G.pinState=Ge=wn(g)),t.force3D!==!1&&ye.set(g,{force3D:!0}),u.spacer=te=G.spacer,Ve=Gt(g),ae=Ve[w+M.os2],ie=ye.getProperty(g),xe=ye.quickSetter(g,M.a,ct),qn(g,te,Ve),F=wn(g)),R){a=po(R)?Ss(R,Es):Es,d=xn("scroller-start",x,S,M,a,0),m=xn("scroller-end",x,S,M,a,0,d),be=d["offset"+M.op.d2];var Wt=It(lo(S,"content")||S);O=this.markerStart=xn("start",x,Wt,M,a,be,0,k),K=this.markerEnd=xn("end",x,Wt,M,a,be,0,k),k&&(Mt=ye.quickSetter([O,K],M.a,ct)),!ce&&!(Qt.length&&lo(S,"fixedMarkers")===!0)&&(li(he?$e:S),ye.set([d,m],{force3D:!0}),ve=ye.quickSetter(d,M.a,ct),Ce=ye.quickSetter(m,M.a,ct))}if(k){var D=k.vars.onUpdate,oe=k.vars.onUpdateParams;k.eventCallback("onUpdate",function(){u.update(0,0,1),D&&D.apply(k,oe||[])})}if(u.previous=function(){return ze[ze.indexOf(u)-1]},u.next=function(){return ze[ze.indexOf(u)+1]},u.revert=function(B,j){if(!j)return u.kill(!0);var W=B!==!1||!u.enabled,Y=_t;W!==u.isReverted&&(W&&(Qe=Math.max(r(),u.scroll.rec||0),i=u.progress,lt=o&&o.progress()),O&&[O,K,d,m].forEach(function(Se){return Se.style.display=W?"none":"block"}),W&&(_t=u,u.update(W)),g&&(!V||!u.isActive)&&(W?di(g,te,Ge):qn(g,te,Gt(g),_e)),W||u.update(W),_t=Y,u.isReverted=W)},u.refresh=function(B,j,W,Y){if(!((_t||!u.enabled)&&!j)){if(g&&B&&Ut){ht(p,"scrollEnd",gr);return}!kt&&$&&$(u),_t=u,P.tween&&!W&&(P.tween.kill(),P.tween=0),ke&&ke.pause(),T&&o&&o.revert({kill:!1}).invalidate(),u.isReverted||u.revert(!0,!0),u._subPinOffset=!1;var Se=ne(),me=ge(),re=k?k.duration():$t(S,M),Ee=de<=.01,Pe=0,De=Y||0,Ye=po(W)?W.end:t.end,mt=t.endTrigger||v,ot=po(W)?W.start:t.start||(t.start===0||!v?0:g?"0 0":"0 100%"),pt=u.pinnedContainer=t.pinnedContainer&&It(t.pinnedContainer,u),st=v&&Math.max(0,ze.indexOf(u))||0,Ke=st,We,et,qe,Vt,Xe,Je,yt,Yt,ln,uo,Nt,Ht,cn;for(R&&po(W)&&(Ht=ye.getProperty(d,M.p),cn=ye.getProperty(m,M.p));Ke-- >0;)Je=ze[Ke],Je.end||Je.refresh(0,1)||(_t=u),yt=Je.pin,yt&&(yt===v||yt===g||yt===pt)&&!Je.isReverted&&(uo||(uo=[]),uo.unshift(Je),Je.revert(!0,!0)),Je!==ze[Ke]&&(st--,Ke--);for(Tt(ot)&&(ot=ot(u)),ot=Ts(ot,"start",u),z=Is(ot,v,Se,M,r(),O,d,u,me,fe,ce,re,k,u._startClamp&&"_startClamp")||(g?-.001:0),Tt(Ye)&&(Ye=Ye(u)),Lt(Ye)&&!Ye.indexOf("+=")&&(~Ye.indexOf(" ")?Ye=(Lt(ot)?ot.split(" ")[0]:"")+Ye:(Pe=Cn(Ye.substr(2),Se),Ye=Lt(ot)?ot:(k?ye.utils.mapRange(0,k.duration(),k.scrollTrigger.start,k.scrollTrigger.end,z):z)+Pe,mt=v)),Ye=Ts(Ye,"end",u),b=Math.max(z,Is(Ye||(mt?"100% 0":re),mt,Se,M,r()+Pe,K,m,u,me,fe,ce,re,k,u._endClamp&&"_endClamp"))||-.001,Pe=0,Ke=st;Ke--;)Je=ze[Ke],yt=Je.pin,yt&&Je.start-Je._pinPush<=z&&!k&&Je.end>0&&(We=Je.end-(u._startClamp?Math.max(0,Je.start):Je.start),(yt===v&&Je.start-Je._pinPush<z||yt===pt)&&isNaN(ot)&&(Pe+=We*(1-Je.progress)),yt===g&&(De+=We));if(z+=Pe,b+=Pe,u._startClamp&&(u._startClamp+=Pe),u._endClamp&&!kt&&(u._endClamp=b||-.001,b=Math.min(b,$t(S,M))),de=b-z||(z-=.01)&&.001,Ee&&(i=ye.utils.clamp(0,1,ye.utils.normalize(z,b,Qe))),u._pinPush=De,O&&Pe&&(We={},We[M.a]="+="+Pe,pt&&(We[M.p]="-="+r()),ye.set([O,K],We)),g&&!(ss&&u.end>=$t(S,M)))We=Gt(g),Vt=M===ft,qe=r(),Te=parseFloat(ie(M.a))+De,!re&&b>1&&(Nt=(he?tt.scrollingElement||Bt:S).style,Nt={style:Nt,value:Nt["overflow"+M.a.toUpperCase()]},he&&Gt($e)["overflow"+M.a.toUpperCase()]!=="scroll"&&(Nt.style["overflow"+M.a.toUpperCase()]="scroll")),qn(g,te,We),F=wn(g),et=Jt(g,!0),Yt=ce&&co(S,Vt?Dt:ft)(),w?(_e=[w+M.os2,de+De+ct],_e.t=te,Ke=w===it?Ln(g,M)+de+De:0,Ke&&(_e.push(M.d,Ke+ct),te.style.flexBasis!=="auto"&&(te.style.flexBasis=Ke+ct)),Io(_e),pt&&ze.forEach(function(Lo){Lo.pin===pt&&Lo.vars.pinSpacing!==!1&&(Lo._subPinOffset=!0)}),ce&&r(Qe)):(Ke=Ln(g,M),Ke&&te.style.flexBasis!=="auto"&&(te.style.flexBasis=Ke+ct)),ce&&(Xe={top:et.top+(Vt?qe-z:Yt)+ct,left:et.left+(Vt?Yt:qe-z)+ct,boxSizing:"border-box",position:"fixed"},Xe[yo]=Xe["max"+Oo]=Math.ceil(et.width)+ct,Xe[xo]=Xe["max"+gs]=Math.ceil(et.height)+ct,Xe[Ft]=Xe[Ft+Jo]=Xe[Ft+Qo]=Xe[Ft+en]=Xe[Ft+Ko]="0",Xe[it]=We[it],Xe[it+Jo]=We[it+Jo],Xe[it+Qo]=We[it+Qo],Xe[it+en]=We[it+en],Xe[it+Ko]=We[it+Ko],je=gi(Ge,Xe,V),kt&&r(0)),o?(ln=o._initted,Wn(1),o.render(o.duration(),!0,!0),Me=ie(M.a)-Te+de+De,pe=Math.abs(de-Me)>1,ce&&pe&&je.splice(je.length-2,2),o.render(0,!0,!0),ln||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Wn(0)):Me=de,Nt&&(Nt.value?Nt.style["overflow"+M.a.toUpperCase()]=Nt.value:Nt.style.removeProperty("overflow-"+M.a));else if(v&&r()&&!k)for(et=v.parentNode;et&&et!==$e;)et._pinOffset&&(z-=et._pinOffset,b-=et._pinOffset),et=et.parentNode;uo&&uo.forEach(function(Lo){return Lo.revert(!1,!0)}),u.start=z,u.end=b,H=X=kt?Qe:r(),!k&&!kt&&(H<Qe&&r(Qe),u.scroll.rec=0),u.revert(!1,!0),c=vt(),Ne&&(h=-1,Ne.restart(!0)),_t=0,o&&ue&&(o._initted||lt)&&o.progress()!==lt&&o.progress(lt||0,!0).render(o.time(),!0,!0),(Ee||i!==u.progress||k||T||o&&!o._initted)&&(o&&!ue&&o.totalProgress(k&&z<-.001&&!i?ye.utils.normalize(z,b,0):i,!0),u.progress=Ee||(H-z)/de===i?0:i),g&&w&&(te._pinOffset=Math.round(u.progress*Me)),ke&&ke.invalidate(),isNaN(Ht)||(Ht-=ye.getProperty(d,M.p),cn-=ye.getProperty(m,M.p),bn(d,M,Ht),bn(O,M,Ht-(Y||0)),bn(m,M,cn),bn(K,M,cn-(Y||0))),Ee&&!kt&&u.update(),U&&!kt&&!se&&(se=!0,U(u),se=!1)}},u.getVelocity=function(){return(r()-X)/(vt()-Fo)*1e3||0},u.endAnimation=function(){zo(u.callbackAnimation),o&&(ke?ke.progress(1):o.paused()?ue||zo(o,u.direction<0,1):zo(o,o.reversed()))},u.labelToScroll=function(B){return o&&o.labels&&(z||u.refresh()||z)+o.labels[B]/o.duration()*de||0},u.getTrailing=function(B){var j=ze.indexOf(u),W=u.direction>0?ze.slice(0,j).reverse():ze.slice(j+1);return(Lt(B)?W.filter(function(Y){return Y.vars.preventOverlaps===B}):W).filter(function(Y){return u.direction>0?Y.end<=z:Y.start>=b})},u.update=function(B,j,W){if(!(k&&!W&&!B)){var Y=kt===!0?Qe:u.scroll(),Se=B?0:(Y-z)/de,me=Se<0?0:Se>1?1:Se||0,re=u.progress,Ee,Pe,De,Ye,mt,ot,pt,st;if(j&&(X=H,H=k?r():Y,C&&(at=we,we=o&&!ue?o.totalProgress():me)),y&&g&&!_t&&!dn&&Ut&&(!me&&z<Y+(Y-X)/(vt()-Fo)*y?me=1e-4:me===1&&b>Y+(Y-X)/(vt()-Fo)*y&&(me=.9999)),me!==re&&u.enabled){if(Ee=u.isActive=!!me&&me<1,Pe=!!re&&re<1,ot=Ee!==Pe,mt=ot||!!me!=!!re,u.direction=me>re?1:-1,u.progress=me,mt&&!_t&&(De=me&&!re?0:me===1?1:re===1?2:3,ue&&(Ye=!ot&&A[De+1]!=="none"&&A[De+1]||A[De],st=o&&(Ye==="complete"||Ye==="reset"||Ye in o))),ee&&(ot||st)&&(st||E||!o)&&(Tt(ee)?ee(u):u.getTrailing(ee).forEach(function(qe){return qe.endAnimation()})),ue||(ke&&!_t&&!dn?(ke._dp._time-ke._start!==ke._time&&ke.render(ke._dp._time-ke._start),ke.resetTo?ke.resetTo("totalProgress",me,o._tTime/o._tDur):(ke.vars.totalProgress=me,ke.invalidate().restart())):o&&o.totalProgress(me,!!(_t&&(c||B)))),g){if(B&&w&&(te.style[w+M.os2]=ae),!ce)xe(Uo(Te+Me*me));else if(mt){if(pt=!B&&me>re&&b+1>Y&&Y+1>=$t(S,M),V)if(!B&&(Ee||pt)){var Ke=Jt(g,!0),We=Y-z;Rs(g,$e,Ke.top+(M===ft?We:0)+ct,Ke.left+(M===ft?0:We)+ct)}else Rs(g,te);Io(Ee||pt?je:F),pe&&me<1&&Ee||xe(Te+(me===1&&!pt?Me:0))}}C&&!P.tween&&!_t&&!dn&&Ne.restart(!0),f&&(ot||N&&me&&(me<1||!Yn))&&nn(f.targets).forEach(function(qe){return qe.classList[Ee||N?"add":"remove"](f.className)}),l&&!ue&&!B&&l(u),mt&&!_t?(ue&&(st&&(Ye==="complete"?o.pause().totalProgress(1):Ye==="reset"?o.restart(!0).pause():Ye==="restart"?o.restart(!0):o[Ye]()),l&&l(u)),(ot||!Yn)&&(I&&ot&&jn(u,I),le[De]&&jn(u,le[De]),N&&(me===1?u.kill(!1,1):le[De]=0),ot||(De=me===1?1:3,le[De]&&jn(u,le[De]))),q&&!Ee&&Math.abs(u.getVelocity())>(Wo(q)?q:2500)&&(zo(u.callbackAnimation),ke?ke.progress(1):zo(o,Ye==="reverse"?1:!me,1))):ue&&l&&!_t&&l(u)}if(Ce){var et=k?Y/k.duration()*(k._caScrollDist||0):Y;ve(et+(d._isFlipped?1:0)),Ce(et)}Mt&&Mt(-Y/k.duration()*(k._caScrollDist||0))}},u.enable=function(B,j){u.enabled||(u.enabled=!0,ht(S,"resize",Yo),he||ht(S,"scroll",Co),$&&ht(p,"refreshInit",$),B!==!1&&(u.progress=i=0,H=X=h=r()),j!==!1&&u.refresh())},u.getTween=function(B){return B&&P?P.tween:ke},u.setPositions=function(B,j,W,Y){if(k){var Se=k.scrollTrigger,me=k.duration(),re=Se.end-Se.start;B=Se.start+re*B/me,j=Se.start+re*j/me}u.refresh(!1,!1,{start:Ms(B,W&&!!u._startClamp),end:Ms(j,W&&!!u._endClamp)},Y),u.update()},u.adjustPinSpacing=function(B){if(_e&&B){var j=_e.indexOf(M.d)+1;_e[j]=parseFloat(_e[j])+B+ct,_e[1]=parseFloat(_e[1])+B+ct,Io(_e)}},u.disable=function(B,j){if(u.enabled&&(B!==!1&&u.revert(!0,!0),u.enabled=u.isActive=!1,j||ke&&ke.pause(),Qe=0,G&&(G.uncache=1),$&&dt(p,"refreshInit",$),Ne&&(Ne.pause(),P.tween&&P.tween.kill()&&(P.tween=0)),!he)){for(var W=ze.length;W--;)if(ze[W].scroller===S&&ze[W]!==u)return;dt(S,"resize",Yo),he||dt(S,"scroll",Co)}},u.kill=function(B,j){u.disable(B,j),ke&&!j&&ke.kill(),x&&delete rs[x];var W=ze.indexOf(u);W>=0&&ze.splice(W,1),W===At&&En>0&&At--,W=0,ze.forEach(function(Y){return Y.scroller===u.scroller&&(W=1)}),W||kt||(u.scroll.rec=0),o&&(o.scrollTrigger=null,B&&o.revert({kill:!1}),j||o.kill()),O&&[O,K,d,m].forEach(function(Y){return Y.parentNode&&Y.parentNode.removeChild(Y)}),tn===u&&(tn=0),g&&(G&&(G.uncache=1),W=0,ze.forEach(function(Y){return Y.pin===g&&W++}),W||(G.spacer=0)),t.onKill&&t.onKill(u)},ze.push(u),u.enable(!1,!1),Ue&&Ue(u),o&&o.add&&!de){var Ae=u.update;u.update=function(){u.update=Ae,Fe.cache++,z||b||u.refresh()},ye.delayedCall(.01,u.update),de=.01,z=b=0}else u.refresh();g&&pi()},p.register=function(t){return So||(ye=t||cr(),lr()&&window.document&&p.enable(),So=Go),So},p.defaults=function(t){if(t)for(var o in t)yn[o]=t[o];return yn},p.disable=function(t,o){Go=0,ze.forEach(function(l){return l[o?"kill":"disable"](t)}),dt(He,"wheel",Co),dt(tt,"scroll",Co),clearInterval(pn),dt(tt,"touchcancel",qt),dt($e,"touchstart",qt),gn(dt,tt,"pointerdown,touchstart,mousedown",Ps),gn(dt,tt,"pointerup,touchend,mouseup",Cs),Rn.kill(),hn(dt);for(var s=0;s<Fe.length;s+=3)mn(dt,Fe[s],Fe[s+1]),mn(dt,Fe[s],Fe[s+2])},p.enable=function(){if(He=window,tt=document,Bt=tt.documentElement,$e=tt.body,ye&&(nn=ye.utils.toArray,$o=ye.utils.clamp,ns=ye.core.context||qt,Wn=ye.core.suppressOverwrites||qt,fs=He.history.scrollRestoration||"auto",is=He.pageYOffset||0,ye.core.globals("ScrollTrigger",p),$e)){Go=1,Do=document.createElement("div"),Do.style.height="100vh",Do.style.position="absolute",xr(),ri(),rt.register(ye),p.isTouch=rt.isTouch,so=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),os=rt.isTouch===1,ht(He,"wheel",Co),us=[He,tt,Bt,$e],ye.matchMedia?(p.matchMedia=function(I){var U=ye.matchMedia(),E;for(E in I)U.add(E,I[E]);return U},ye.addEventListener("matchMediaInit",function(){return ys()}),ye.addEventListener("matchMediaRevert",function(){return mr()}),ye.addEventListener("matchMedia",function(){mo(0,1),vo("matchMedia")}),ye.matchMedia().add("(orientation: portrait)",function(){return Vn(),Vn})):console.warn("Requires GSAP 3.11.0 or later"),Vn(),ht(tt,"scroll",Co);var t=$e.hasAttribute("style"),o=$e.style,s=o.borderTopStyle,l=ye.core.Animation.prototype,f,x;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",f=Jt($e),ft.m=Math.round(f.top+ft.sc())||0,Dt.m=Math.round(f.left+Dt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||($e.setAttribute("style",""),$e.removeAttribute("style")),pn=setInterval(As,250),ye.delayedCall(.5,function(){return dn=0}),ht(tt,"touchcancel",qt),ht($e,"touchstart",qt),gn(ht,tt,"pointerdown,touchstart,mousedown",Ps),gn(ht,tt,"pointerup,touchend,mouseup",Cs),ts=ye.utils.checkPrefix("transform"),An.push(ts),So=vt(),Rn=ye.delayedCall(.2,mo).pause(),Eo=[tt,"visibilitychange",function(){var I=He.innerWidth,U=He.innerHeight;tt.hidden?(_s=I,vs=U):(_s!==I||vs!==U)&&Yo()},tt,"DOMContentLoaded",mo,He,"load",mo,He,"resize",Yo],hn(ht),ze.forEach(function(I){return I.enable(0,1)}),x=0;x<Fe.length;x+=3)mn(dt,Fe[x],Fe[x+1]),mn(dt,Fe[x],Fe[x+2])}},p.config=function(t){"limitCallbacks"in t&&(Yn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(pn)||(pn=o)&&setInterval(As,o),"ignoreMobileResize"in t&&(os=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(hn(dt)||hn(ht,t.autoRefreshEvents||"none"),rr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,o){var s=It(t),l=Fe.indexOf(s),f=bo(s);~l&&Fe.splice(l,f?6:2),o&&(f?Qt.unshift(He,o,$e,o,Bt,o):Qt.unshift(s,o))},p.clearMatchMedia=function(t){ze.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},p.isInViewport=function(t,o,s){var l=(Lt(t)?It(t):t).getBoundingClientRect(),f=l[s?yo:xo]*o||0;return s?l.right-f>0&&l.left+f<He.innerWidth:l.bottom-f>0&&l.top+f<He.innerHeight},p.positionInViewport=function(t,o,s){Lt(t)&&(t=It(t));var l=t.getBoundingClientRect(),f=l[s?yo:xo],x=o==null?f/2:o in Bn?Bn[o]*f:~o.indexOf("%")?parseFloat(o)*f/100:parseFloat(o)||0;return s?(l.left+x)/He.innerWidth:(l.top+x)/He.innerHeight},p.killAll=function(t){if(ze.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=_o.killAll||[];_o={},o.forEach(function(s){return s()})}},p}();Re.version="3.12.7";Re.saveStyles=function(p){return p?nn(p).forEach(function(e){if(e&&e.style){var n=Ot.indexOf(e);n>=0&&Ot.splice(n,5),Ot.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),ye.core.getCache(e),ns())}}):Ot};Re.revert=function(p,e){return ys(!p,e)};Re.create=function(p,e){return new Re(p,e)};Re.refresh=function(p){return p?Yo(!0):(So||Re.register())&&mo(!0)};Re.update=function(p){return++Fe.cache&&to(p===!0?2:0)};Re.clearScrollMemory=yr;Re.maxScroll=function(p,e){return $t(p,e?Dt:ft)};Re.getScrollFunc=function(p,e){return co(It(p),e?Dt:ft)};Re.getById=function(p){return rs[p]};Re.getAll=function(){return ze.filter(function(p){return p.vars.id!=="ScrollSmoother"})};Re.isScrolling=function(){return!!Ut};Re.snapDirectional=ms;Re.addEventListener=function(p,e){var n=_o[p]||(_o[p]=[]);~n.indexOf(e)||n.push(e)};Re.removeEventListener=function(p,e){var n=_o[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Re.batch=function(p,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,l=function(I,U){var E=[],v=[],g=ye.delayedCall(o,function(){U(E,v),E=[],v=[]}).pause();return function(w){E.length||g.restart(!0),E.push(w.trigger),v.push(w),s<=E.length&&g.progress(1)}},f;for(f in e)t[f]=f.substr(0,2)==="on"&&Tt(e[f])&&f!=="onRefreshInit"?l(f,e[f]):e[f];return Tt(s)&&(s=s(),ht(Re,"refresh",function(){return s=e.batchMax()})),nn(p).forEach(function(x){var I={};for(f in t)I[f]=t[f];I.trigger=x,n.push(Re.create(I))}),n};var Ls=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},Zn=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(rt.isTouch?" pinch-zoom":""):"none",e===Bt&&p($e,n)},_n={auto:1,scroll:1},yi=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,l=s._gsap||ye.core.getCache(s),f=vt(),x;if(!l._isScrollT||f-l._isScrollT>2e3){for(;s&&s!==$e&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(_n[(x=Gt(s)).overflowY]||_n[x.overflowX]));)s=s.parentNode;l._isScroll=s&&s!==t&&!bo(s)&&(_n[(x=Gt(s)).overflowY]||_n[x.overflowX]),l._isScrollT=f}(l._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},br=function(e,n,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&yi,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&ht(tt,rt.eventTypes[0],zs,!1,!0)},onDisable:function(){return dt(tt,rt.eventTypes[0],zs,!0)}})},xi=/(input|label|select|textarea)/i,Bs,zs=function(e){var n=xi.test(e.target.tagName);(n||Bs)&&(e._gsapAllow=!0,Bs=n)},wi=function(e){po(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,l=n.onRelease,f,x,I=It(e.target)||Bt,U=ye.core.globals().ScrollSmoother,E=U&&U.get(),v=so&&(e.content&&It(e.content)||E&&e.content!==!1&&!E.smooth()&&E.content()),g=co(I,ft),w=co(I,Dt),T=1,y=(rt.isTouch&&He.visualViewport?He.visualViewport.scale*He.visualViewport.width:He.outerWidth)/He.innerWidth,L=0,J=Tt(o)?function(){return o(f)}:function(){return o||2.8},N,C,V=br(I,e.type,!0,s),Q=function(){return C=!1},k=qt,q=qt,ee=function(){x=$t(I,ft),q=$o(so?1:0,x),t&&(k=$o(0,$t(I,Dt))),N=wo},M=function(){v._gsap.y=Uo(parseFloat(v._gsap.y)+g.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",g.offset=g.cacheID=0},ue=function(){if(C){requestAnimationFrame(Q);var R=Uo(f.deltaY/2),fe=q(g.v-R);if(v&&fe!==g.v+g.offset){g.offset=fe-g.v;var u=Uo((parseFloat(v&&v._gsap.y)||0)-g.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+u+", 0, 1)",v._gsap.y=u+"px",g.cacheID=Fe.cache,to()}return!0}g.offset&&M(),C=!0},S,Z,he,ce,le=function(){ee(),S.isActive()&&S.vars.scrollY>x&&(g()>x?S.progress(1)&&g(x):S.resetTo("scrollY",x))};return v&&ye.set(v,{y:"+=0"}),e.ignoreCheck=function(A){return so&&A.type==="touchmove"&&ue()||T>1.05&&A.type!=="touchstart"||f.isGesturing||A.touches&&A.touches.length>1},e.onPress=function(){C=!1;var A=T;T=Uo((He.visualViewport&&He.visualViewport.scale||1)/y),S.pause(),A!==T&&Zn(I,T>1.01?!0:t?!1:"x"),Z=w(),he=g(),ee(),N=wo},e.onRelease=e.onGestureStart=function(A,R){if(g.offset&&M(),!R)ce.restart(!0);else{Fe.cache++;var fe=J(),u,$;t&&(u=w(),$=u+fe*.05*-A.velocityX/.227,fe*=Ls(w,u,$,$t(I,Dt)),S.vars.scrollX=k($)),u=g(),$=u+fe*.05*-A.velocityY/.227,fe*=Ls(g,u,$,$t(I,ft)),S.vars.scrollY=q($),S.invalidate().duration(fe).play(.01),(so&&S.vars.scrollY>=x||u>=x-1)&&ye.to({},{onUpdate:le,duration:fe})}l&&l(A)},e.onWheel=function(){S._ts&&S.pause(),vt()-L>1e3&&(N=0,L=vt())},e.onChange=function(A,R,fe,u,$){if(wo!==N&&ee(),R&&t&&w(k(u[2]===R?Z+(A.startX-A.x):w()+R-u[1])),fe){g.offset&&M();var ne=$[2]===fe,ge=ne?he+A.startY-A.y:g()+fe-$[1],h=q(ge);ne&&ge!==h&&(he+=h-ge),g(h)}(fe||R)&&to()},e.onEnable=function(){Zn(I,t?!1:"x"),Re.addEventListener("refresh",le),ht(He,"resize",le),g.smooth&&(g.target.style.scrollBehavior="auto",g.smooth=w.smooth=!1),V.enable()},e.onDisable=function(){Zn(I,!0),dt(He,"resize",le),Re.removeEventListener("refresh",le),V.kill()},e.lockAxis=e.lockAxis!==!1,f=new rt(e),f.iOS=so,so&&!g()&&g(1),so&&ye.ticker.add(qt),ce=f._dc,S=ye.to(f,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:wr(g,g(),function(){return S.pause()})},onUpdate:to,onComplete:ce.vars.onComplete}),f};Re.sort=function(p){if(Tt(p))return ze.sort(p);var e=He.pageYOffset||0;return Re.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+He.innerHeight}),ze.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Re.observe=function(p){return new rt(p)};Re.normalizeScroll=function(p){if(typeof p>"u")return St;if(p===!0&&St)return St.enable();if(p===!1){St&&St.kill(),St=p;return}var e=p instanceof rt?p:wi(p);return St&&St.target===e.target&&St.kill(),bo(e.target)&&(St=e),e};Re.core={_getVelocityProp:es,_inputObserver:br,_scrollers:Fe,_proxies:Qt,bridge:{ss:function(){Ut||vo("scrollStart"),Ut=vt()},ref:function(){return _t}}};cr()&&ye.registerPlugin(Re);var on=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(U){U.preventDefault(),t(++p%e.children.length)},!1);function n(U){return e.appendChild(U.dom),U}function t(U){for(var E=0;E<e.children.length;E++)e.children[E].style.display=E===U?"block":"none";p=U}var o=(performance||Date).now(),s=o,l=0,f=n(new on.Panel("FPS","#0ff","#002")),x=n(new on.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var I=n(new on.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){l++;var U=(performance||Date).now();if(x.update(U-o,200),U>=s+1e3&&(f.update(l*1e3/(U-s),100),s=U,l=0,I)){var E=performance.memory;I.update(E.usedJSHeapSize/1048576,E.jsHeapSizeLimit/1048576)}return U},update:function(){o=this.end()},domElement:e,setMode:t}};on.Panel=function(p,e,n){var t=1/0,o=0,s=Math.round,l=s(window.devicePixelRatio||1),f=80*l,x=48*l,I=3*l,U=2*l,E=3*l,v=15*l,g=74*l,w=30*l,T=document.createElement("canvas");T.width=f,T.height=x,T.style.cssText="width:80px;height:48px";var y=T.getContext("2d");return y.font="bold "+9*l+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,f,x),y.fillStyle=e,y.fillText(p,I,U),y.fillRect(E,v,g,w),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(E,v,g,w),{dom:T,update:function(L,J){t=Math.min(t,L),o=Math.max(o,L),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,f,v),y.fillStyle=e,y.fillText(s(L)+" "+p+" ("+s(t)+"-"+s(o)+")",I,U),y.drawImage(T,E+l,v,g-l,w,E,v,g-l,w),y.fillRect(E+g-l,v,l,w),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(E+g-l,v,l,s((1-L/J)*w))}}};const _r={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class an{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const bi=new Dr(-1,1,1,-1,0,1);class _i extends ao{constructor(){super(),this.setAttribute("position",new Xo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Xo([0,2,0,0,2,0],2))}}const vi=new _i;class vr{constructor(e){this._mesh=new Be(vi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,bi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ti extends an{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof go?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Qn.clone(e.uniforms),this.material=new go({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new vr(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Ns extends an{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let l,f;this.inverse?(l=0,f=1):(l=1,f=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,l,4294967295),s.buffers.stencil.setClear(f),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Mi extends an{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Pi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new Le);this._width=t.width,this._height=t.height,n=new Tn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Mn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ti(_r),this.copyPass.material.blending=Ir,this.clock=new Rr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const l=this.passes[o];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),l.needsSwap){if(t){const f=this.renderer.getContext(),x=this.renderer.state.buffers.stencil;x.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),x.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}Ns!==void 0&&(l instanceof Ns?t=!0:l instanceof Mi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Le);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Ci extends an{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Et}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,l;this.overrideMaterial!==null&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=l),e.autoClear=o}}const Si={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Et(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class To extends an{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new Le(e.x,e.y):new Le(256,256),this.clearColor=new Et(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new Tn(s,l,{type:Mn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let E=0;E<this.nMips;E++){const v=new Tn(s,l,{type:Mn});v.texture.name="UnrealBloomPass.h"+E,v.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(v);const g=new Tn(s,l,{type:Mn});g.texture.name="UnrealBloomPass.v"+E,g.texture.generateMipmaps=!1,this.renderTargetsVertical.push(g),s=Math.round(s/2),l=Math.round(l/2)}const f=Si;this.highPassUniforms=Qn.clone(f.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new go({uniforms:this.highPassUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),this.separableBlurMaterials=[];const x=[3,5,7,9,11];s=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let E=0;E<this.nMips;E++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(x[E])),this.separableBlurMaterials[E].uniforms.invSize.value=new Le(1/s,1/l),s=Math.round(s/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const I=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=I,this.bloomTintColors=[new Ie(1,1,1),new Ie(1,1,1),new Ie(1,1,1),new Ie(1,1,1),new Ie(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const U=_r;this.copyUniforms=Qn.clone(U.uniforms),this.blendMaterial=new go({uniforms:this.copyUniforms,vertexShader:U.vertexShader,fragmentShader:U.fragmentShader,blending:Zt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Et,this.oldClearAlpha=1,this.basic=new ut,this.fsQuad=new vr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new Le(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let f=this.renderTargetBright;for(let x=0;x<this.nMips;x++)this.fsQuad.material=this.separableBlurMaterials[x],this.separableBlurMaterials[x].uniforms.colorTexture.value=f.texture,this.separableBlurMaterials[x].uniforms.direction.value=To.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[x]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[x].uniforms.colorTexture.value=this.renderTargetsHorizontal[x].texture,this.separableBlurMaterials[x].uniforms.direction.value=To.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[x]),e.clear(),this.fsQuad.render(e),f=this.renderTargetsVertical[x];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new go({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Le(.5,.5)},direction:{value:new Le(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new go({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}To.BlurDirectionX=new Le(1,0);To.BlurDirectionY=new Le(0,1);class ls extends Or{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Ei=Nr;class zn extends Xs{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,l=new js(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(f){try{n(s.parse(f))}catch(x){o?o(x):console.error(x),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(h,c){if(h.nodeType!==1)return;const i=C(h);let r=!1,P=null;switch(h.nodeName){case"svg":c=w(h,c);break;case"style":s(h);break;case"g":c=w(h,c);break;case"path":c=w(h,c),h.hasAttribute("d")&&(P=o(h));break;case"rect":c=w(h,c),P=x(h);break;case"polygon":c=w(h,c),P=I(h);break;case"polyline":c=w(h,c),P=U(h);break;case"circle":c=w(h,c),P=E(h);break;case"ellipse":c=w(h,c),P=v(h);break;case"line":c=w(h,c),P=g(h);break;case"defs":r=!0;break;case"use":c=w(h,c);const H=(h.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),X=h.viewportElement.getElementById(H);X?t(X,c):console.warn("SVGLoader: 'use node' references non-existent node id: "+H);break}P&&(c.fill!==void 0&&c.fill!=="none"&&P.color.setStyle(c.fill,Ei),Q(P,$),S.push(P),P.userData={node:h,style:c});const G=h.childNodes;for(let _=0;_<G.length;_++){const H=G[_];r&&H.nodeName!=="style"&&H.nodeName!=="defs"||t(H,c)}i&&(he.pop(),he.length>0?$.copy(he[he.length-1]):$.identity())}function o(h){const c=new no,i=new Le,r=new Le,P=new Le;let G=!0,_=!1;const H=h.getAttribute("d");if(H===""||H==="none")return null;const X=H.match(/[a-df-z][^a-df-z]*/ig);for(let z=0,b=X.length;z<b;z++){const O=X[z],K=O.charAt(0),d=O.slice(1).trim();G===!0&&(_=!0,G=!1);let m;switch(K){case"M":m=y(d);for(let a=0,se=m.length;a<se;a+=2)i.x=m[a+0],i.y=m[a+1],r.x=i.x,r.y=i.y,a===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),a===0&&P.copy(i);break;case"H":m=y(d);for(let a=0,se=m.length;a<se;a++)i.x=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&_===!0&&P.copy(i);break;case"V":m=y(d);for(let a=0,se=m.length;a<se;a++)i.y=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&_===!0&&P.copy(i);break;case"L":m=y(d);for(let a=0,se=m.length;a<se;a+=2)i.x=m[a+0],i.y=m[a+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&_===!0&&P.copy(i);break;case"C":m=y(d);for(let a=0,se=m.length;a<se;a+=6)c.bezierCurveTo(m[a+0],m[a+1],m[a+2],m[a+3],m[a+4],m[a+5]),r.x=m[a+2],r.y=m[a+3],i.x=m[a+4],i.y=m[a+5],a===0&&_===!0&&P.copy(i);break;case"S":m=y(d);for(let a=0,se=m.length;a<se;a+=4)c.bezierCurveTo(T(i.x,r.x),T(i.y,r.y),m[a+0],m[a+1],m[a+2],m[a+3]),r.x=m[a+0],r.y=m[a+1],i.x=m[a+2],i.y=m[a+3],a===0&&_===!0&&P.copy(i);break;case"Q":m=y(d);for(let a=0,se=m.length;a<se;a+=4)c.quadraticCurveTo(m[a+0],m[a+1],m[a+2],m[a+3]),r.x=m[a+0],r.y=m[a+1],i.x=m[a+2],i.y=m[a+3],a===0&&_===!0&&P.copy(i);break;case"T":m=y(d);for(let a=0,se=m.length;a<se;a+=2){const de=T(i.x,r.x),Ge=T(i.y,r.y);c.quadraticCurveTo(de,Ge,m[a+0],m[a+1]),r.x=de,r.y=Ge,i.x=m[a+0],i.y=m[a+1],a===0&&_===!0&&P.copy(i)}break;case"A":m=y(d,[3,4],7);for(let a=0,se=m.length;a<se;a+=7){if(m[a+5]==i.x&&m[a+6]==i.y)continue;const de=i.clone();i.x=m[a+5],i.y=m[a+6],r.x=i.x,r.y=i.y,l(c,m[a],m[a+1],m[a+2],m[a+3],m[a+4],de,i),a===0&&_===!0&&P.copy(i)}break;case"m":m=y(d);for(let a=0,se=m.length;a<se;a+=2)i.x+=m[a+0],i.y+=m[a+1],r.x=i.x,r.y=i.y,a===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),a===0&&P.copy(i);break;case"h":m=y(d);for(let a=0,se=m.length;a<se;a++)i.x+=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&_===!0&&P.copy(i);break;case"v":m=y(d);for(let a=0,se=m.length;a<se;a++)i.y+=m[a],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&_===!0&&P.copy(i);break;case"l":m=y(d);for(let a=0,se=m.length;a<se;a+=2)i.x+=m[a+0],i.y+=m[a+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),a===0&&_===!0&&P.copy(i);break;case"c":m=y(d);for(let a=0,se=m.length;a<se;a+=6)c.bezierCurveTo(i.x+m[a+0],i.y+m[a+1],i.x+m[a+2],i.y+m[a+3],i.x+m[a+4],i.y+m[a+5]),r.x=i.x+m[a+2],r.y=i.y+m[a+3],i.x+=m[a+4],i.y+=m[a+5],a===0&&_===!0&&P.copy(i);break;case"s":m=y(d);for(let a=0,se=m.length;a<se;a+=4)c.bezierCurveTo(T(i.x,r.x),T(i.y,r.y),i.x+m[a+0],i.y+m[a+1],i.x+m[a+2],i.y+m[a+3]),r.x=i.x+m[a+0],r.y=i.y+m[a+1],i.x+=m[a+2],i.y+=m[a+3],a===0&&_===!0&&P.copy(i);break;case"q":m=y(d);for(let a=0,se=m.length;a<se;a+=4)c.quadraticCurveTo(i.x+m[a+0],i.y+m[a+1],i.x+m[a+2],i.y+m[a+3]),r.x=i.x+m[a+0],r.y=i.y+m[a+1],i.x+=m[a+2],i.y+=m[a+3],a===0&&_===!0&&P.copy(i);break;case"t":m=y(d);for(let a=0,se=m.length;a<se;a+=2){const de=T(i.x,r.x),Ge=T(i.y,r.y);c.quadraticCurveTo(de,Ge,i.x+m[a+0],i.y+m[a+1]),r.x=de,r.y=Ge,i.x=i.x+m[a+0],i.y=i.y+m[a+1],a===0&&_===!0&&P.copy(i)}break;case"a":m=y(d,[3,4],7);for(let a=0,se=m.length;a<se;a+=7){if(m[a+5]==0&&m[a+6]==0)continue;const de=i.clone();i.x+=m[a+5],i.y+=m[a+6],r.x=i.x,r.y=i.y,l(c,m[a],m[a+1],m[a+2],m[a+3],m[a+4],de,i),a===0&&_===!0&&P.copy(i)}break;case"Z":case"z":c.currentPath.autoClose=!0,c.currentPath.curves.length>0&&(i.copy(P),c.currentPath.currentPoint.copy(i),G=!0);break;default:console.warn(O)}_=!1}return c}function s(h){if(!(!h.sheet||!h.sheet.cssRules||!h.sheet.cssRules.length))for(let c=0;c<h.sheet.cssRules.length;c++){const i=h.sheet.cssRules[c];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(P=>P.trim());for(let P=0;P<r.length;P++){const G=Object.fromEntries(Object.entries(i.style).filter(([,_])=>_!==""));Z[r[P]]=Object.assign(Z[r[P]]||{},G)}}}function l(h,c,i,r,P,G,_,H){if(c==0||i==0){h.lineTo(H.x,H.y);return}r=r*Math.PI/180,c=Math.abs(c),i=Math.abs(i);const X=(_.x-H.x)/2,z=(_.y-H.y)/2,b=Math.cos(r)*X+Math.sin(r)*z,O=-Math.sin(r)*X+Math.cos(r)*z;let K=c*c,d=i*i;const m=b*b,a=O*O,se=m/K+a/d;if(se>1){const Me=Math.sqrt(se);c=Me*c,i=Me*i,K=c*c,d=i*i}const de=K*a+d*m,Ge=(K*d-de)/de;let je=Math.sqrt(Math.max(0,Ge));P===G&&(je=-je);const F=je*c*O/i,te=-je*i*b/c,be=Math.cos(r)*F-Math.sin(r)*te+(_.x+H.x)/2,ie=Math.sin(r)*F+Math.cos(r)*te+(_.y+H.y)/2,xe=f(1,0,(b-F)/c,(O-te)/i),Te=f((b-F)/c,(O-te)/i,(-b-F)/c,(-O-te)/i)%(Math.PI*2);h.currentPath.absellipse(be,ie,c,i,xe,xe+Te,G===0,r)}function f(h,c,i,r){const P=h*i+c*r,G=Math.sqrt(h*h+c*c)*Math.sqrt(i*i+r*r);let _=Math.acos(Math.max(-1,Math.min(1,P/G)));return h*r-c*i<0&&(_=-_),_}function x(h){const c=N(h.getAttribute("x")||0),i=N(h.getAttribute("y")||0),r=N(h.getAttribute("rx")||h.getAttribute("ry")||0),P=N(h.getAttribute("ry")||h.getAttribute("rx")||0),G=N(h.getAttribute("width")),_=N(h.getAttribute("height")),H=1-.551915024494,X=new no;return X.moveTo(c+r,i),X.lineTo(c+G-r,i),(r!==0||P!==0)&&X.bezierCurveTo(c+G-r*H,i,c+G,i+P*H,c+G,i+P),X.lineTo(c+G,i+_-P),(r!==0||P!==0)&&X.bezierCurveTo(c+G,i+_-P*H,c+G-r*H,i+_,c+G-r,i+_),X.lineTo(c+r,i+_),(r!==0||P!==0)&&X.bezierCurveTo(c+r*H,i+_,c,i+_-P*H,c,i+_-P),X.lineTo(c,i+P),(r!==0||P!==0)&&X.bezierCurveTo(c,i+P*H,c+r*H,i,c+r,i),X}function I(h){function c(G,_,H){const X=N(_),z=N(H);P===0?r.moveTo(X,z):r.lineTo(X,z),P++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new no;let P=0;return h.getAttribute("points").replace(i,c),r.currentPath.autoClose=!0,r}function U(h){function c(G,_,H){const X=N(_),z=N(H);P===0?r.moveTo(X,z):r.lineTo(X,z),P++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new no;let P=0;return h.getAttribute("points").replace(i,c),r.currentPath.autoClose=!1,r}function E(h){const c=N(h.getAttribute("cx")||0),i=N(h.getAttribute("cy")||0),r=N(h.getAttribute("r")||0),P=new Hn;P.absarc(c,i,r,0,Math.PI*2);const G=new no;return G.subPaths.push(P),G}function v(h){const c=N(h.getAttribute("cx")||0),i=N(h.getAttribute("cy")||0),r=N(h.getAttribute("rx")||0),P=N(h.getAttribute("ry")||0),G=new Hn;G.absellipse(c,i,r,P,0,Math.PI*2);const _=new no;return _.subPaths.push(G),_}function g(h){const c=N(h.getAttribute("x1")||0),i=N(h.getAttribute("y1")||0),r=N(h.getAttribute("x2")||0),P=N(h.getAttribute("y2")||0),G=new no;return G.moveTo(c,i),G.lineTo(r,P),G.currentPath.autoClose=!1,G}function w(h,c){c=Object.assign({},c);let i={};if(h.hasAttribute("class")){const _=h.getAttribute("class").split(/\s/).filter(Boolean).map(H=>H.trim());for(let H=0;H<_.length;H++)i=Object.assign(i,Z["."+_[H]])}h.hasAttribute("id")&&(i=Object.assign(i,Z["#"+h.getAttribute("id")]));function r(_,H,X){X===void 0&&(X=function(b){return b.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),b}),h.hasAttribute(_)&&(c[H]=X(h.getAttribute(_))),i[_]&&(c[H]=X(i[_])),h.style&&h.style[_]!==""&&(c[H]=X(h.style[_]))}function P(_){return Math.max(0,Math.min(1,N(_)))}function G(_){return Math.max(0,N(_))}return r("fill","fill"),r("fill-opacity","fillOpacity",P),r("fill-rule","fillRule"),r("opacity","opacity",P),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",P),r("stroke-width","strokeWidth",G),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",G),r("visibility","visibility"),c}function T(h,c){return h-(c-h)}function y(h,c,i){if(typeof h!="string")throw new TypeError("Invalid input: "+typeof h);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},P=0,G=1,_=2,H=3;let X=P,z=!0,b="",O="";const K=[];function d(de,Ge,je){const F=new SyntaxError('Unexpected character "'+de+'" at index '+Ge+".");throw F.partial=je,F}function m(){b!==""&&(O===""?K.push(Number(b)):K.push(Number(b)*Math.pow(10,Number(O)))),b="",O=""}let a;const se=h.length;for(let de=0;de<se;de++){if(a=h[de],Array.isArray(c)&&c.includes(K.length%i)&&r.FLAGS.test(a)){X=G,b=a,m();continue}if(X===P){if(r.WHITESPACE.test(a))continue;if(r.DIGIT.test(a)||r.SIGN.test(a)){X=G,b=a;continue}if(r.POINT.test(a)){X=_,b=a;continue}r.COMMA.test(a)&&(z&&d(a,de,K),z=!0)}if(X===G){if(r.DIGIT.test(a)){b+=a;continue}if(r.POINT.test(a)){b+=a,X=_;continue}if(r.EXP.test(a)){X=H;continue}r.SIGN.test(a)&&b.length===1&&r.SIGN.test(b[0])&&d(a,de,K)}if(X===_){if(r.DIGIT.test(a)){b+=a;continue}if(r.EXP.test(a)){X=H;continue}r.POINT.test(a)&&b[b.length-1]==="."&&d(a,de,K)}if(X===H){if(r.DIGIT.test(a)){O+=a;continue}if(r.SIGN.test(a)){if(O===""){O+=a;continue}O.length===1&&r.SIGN.test(O)&&d(a,de,K)}}r.WHITESPACE.test(a)?(m(),X=P,z=!1):r.COMMA.test(a)?(m(),X=P,z=!0):r.SIGN.test(a)?(m(),X=G,b=a):r.POINT.test(a)?(m(),X=_,b=a):d(a,de,K)}return m(),K}const L=["mm","cm","in","pt","pc","px"],J={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function N(h){let c="px";if(typeof h=="string"||h instanceof String)for(let r=0,P=L.length;r<P;r++){const G=L[r];if(h.endsWith(G)){c=G,h=h.substring(0,h.length-G.length);break}}let i;return c==="px"&&n.defaultUnit!=="px"?i=J.in[n.defaultUnit]/n.defaultDPI:(i=J[c][n.defaultUnit],i<0&&(i=J[c].in*n.defaultDPI)),i*parseFloat(h)}function C(h){if(!(h.hasAttribute("transform")||h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))))return null;const c=V(h);return he.length>0&&c.premultiply(he[he.length-1]),$.copy(c),he.push(c),c}function V(h){const c=new Mo,i=ce;if(h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))){const r=N(h.getAttribute("x")),P=N(h.getAttribute("y"));c.translate(r,P)}if(h.hasAttribute("transform")){const r=h.getAttribute("transform").split(")");for(let P=r.length-1;P>=0;P--){const G=r[P].trim();if(G==="")continue;const _=G.indexOf("("),H=G.length;if(_>0&&_<H){const X=G.slice(0,_),z=y(G.slice(_+1));switch(i.identity(),X){case"translate":if(z.length>=1){const b=z[0];let O=0;z.length>=2&&(O=z[1]),i.translate(b,O)}break;case"rotate":if(z.length>=1){let b=0,O=0,K=0;b=z[0]*Math.PI/180,z.length>=3&&(O=z[1],K=z[2]),le.makeTranslation(-O,-K),A.makeRotation(b),R.multiplyMatrices(A,le),le.makeTranslation(O,K),i.multiplyMatrices(le,R)}break;case"scale":if(z.length>=1){const b=z[0];let O=b;z.length>=2&&(O=z[1]),i.scale(b,O)}break;case"skewX":z.length===1&&i.set(1,Math.tan(z[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":z.length===1&&i.set(1,0,0,Math.tan(z[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":z.length===6&&i.set(z[0],z[2],z[4],z[1],z[3],z[5],0,0,1);break}}c.premultiply(i)}}return c}function Q(h,c){function i(_){u.set(_.x,_.y,1).applyMatrix3(c),_.set(u.x,u.y)}function r(_){const H=_.xRadius,X=_.yRadius,z=Math.cos(_.aRotation),b=Math.sin(_.aRotation),O=new Ie(H*z,H*b,0),K=new Ie(-X*b,X*z,0),d=O.applyMatrix3(c),m=K.applyMatrix3(c),a=ce.set(d.x,m.x,0,d.y,m.y,0,0,0,1),se=le.copy(a).invert(),je=A.copy(se).transpose().multiply(se).elements,F=ue(je[0],je[1],je[4]),te=Math.sqrt(F.rt1),be=Math.sqrt(F.rt2);if(_.xRadius=1/te,_.yRadius=1/be,_.aRotation=Math.atan2(F.sn,F.cs),!((_.aEndAngle-_.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const xe=le.set(te,0,0,0,be,0,0,0,1),Te=A.set(F.cs,F.sn,0,-F.sn,F.cs,0,0,0,1),Me=xe.multiply(Te).multiply(a),ae=_e=>{const{x:ve,y:pe}=new Ie(Math.cos(_e),Math.sin(_e),0).applyMatrix3(Me);return Math.atan2(pe,ve)};_.aStartAngle=ae(_.aStartAngle),_.aEndAngle=ae(_.aEndAngle),k(c)&&(_.aClockwise=!_.aClockwise)}}function P(_){const H=ee(c),X=M(c);_.xRadius*=H,_.yRadius*=X;const z=H>Number.EPSILON?Math.atan2(c.elements[1],c.elements[0]):Math.atan2(-c.elements[3],c.elements[4]);_.aRotation+=z,k(c)&&(_.aStartAngle*=-1,_.aEndAngle*=-1,_.aClockwise=!_.aClockwise)}const G=h.subPaths;for(let _=0,H=G.length;_<H;_++){const z=G[_].curves;for(let b=0;b<z.length;b++){const O=z[b];O.isLineCurve?(i(O.v1),i(O.v2)):O.isCubicBezierCurve?(i(O.v0),i(O.v1),i(O.v2),i(O.v3)):O.isQuadraticBezierCurve?(i(O.v0),i(O.v1),i(O.v2)):O.isEllipseCurve&&(fe.set(O.aX,O.aY),i(fe),O.aX=fe.x,O.aY=fe.y,q(c)?r(O):P(O))}}}function k(h){const c=h.elements;return c[0]*c[4]-c[1]*c[3]<0}function q(h){const c=h.elements,i=c[0]*c[3]+c[1]*c[4];if(i===0)return!1;const r=ee(h),P=M(h);return Math.abs(i/(r*P))>Number.EPSILON}function ee(h){const c=h.elements;return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function M(h){const c=h.elements;return Math.sqrt(c[3]*c[3]+c[4]*c[4])}function ue(h,c,i){let r,P,G,_,H;const X=h+i,z=h-i,b=Math.sqrt(z*z+4*c*c);return X>0?(r=.5*(X+b),H=1/r,P=h*H*i-c*H*c):X<0?P=.5*(X-b):(r=.5*b,P=-.5*b),z>0?G=z+b:G=z-b,Math.abs(G)>2*Math.abs(c)?(H=-2*c/G,_=1/Math.sqrt(1+H*H),G=H*_):Math.abs(c)===0?(G=1,_=0):(H=-.5*G/c,G=1/Math.sqrt(1+H*H),_=H*G),z>0&&(H=G,G=-_,_=H),{rt1:r,rt2:P,cs:G,sn:_}}const S=[],Z={},he=[],ce=new Mo,le=new Mo,A=new Mo,R=new Mo,fe=new Le,u=new Ie,$=new Mo,ne=new DOMParser().parseFromString(e,"image/svg+xml");return t(ne.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:S,xml:ne.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(T,y,L,J){const N=T.x,C=y.x,V=L.x,Q=J.x,k=T.y,q=y.y,ee=L.y,M=J.y,ue=(Q-V)*(k-ee)-(M-ee)*(N-V),S=(C-N)*(k-ee)-(q-k)*(N-V),Z=(M-ee)*(C-N)-(Q-V)*(q-k),he=ue/Z,ce=S/Z;if(Z===0&&ue!==0||he<=0||he>=1||ce<0||ce>1)return null;if(ue===0&&Z===0){for(let le=0;le<2;le++)if(l(le===0?L:J,T,y),o.loc==t.ORIGIN){const A=le===0?L:J;return{x:A.x,y:A.y,t:o.t}}else if(o.loc==t.BETWEEN){const A=+(N+o.t*(C-N)).toPrecision(10),R=+(k+o.t*(q-k)).toPrecision(10);return{x:A,y:R,t:o.t}}return null}else{for(let R=0;R<2;R++)if(l(R===0?L:J,T,y),o.loc==t.ORIGIN){const fe=R===0?L:J;return{x:fe.x,y:fe.y,t:o.t}}const le=+(N+he*(C-N)).toPrecision(10),A=+(k+he*(q-k)).toPrecision(10);return{x:le,y:A,t:he}}}function l(T,y,L){const J=L.x-y.x,N=L.y-y.y,C=T.x-y.x,V=T.y-y.y,Q=J*V-C*N;if(T.x===y.x&&T.y===y.y){o.loc=t.ORIGIN,o.t=0;return}if(T.x===L.x&&T.y===L.y){o.loc=t.DESTINATION,o.t=1;return}if(Q<-Number.EPSILON){o.loc=t.LEFT;return}if(Q>Number.EPSILON){o.loc=t.RIGHT;return}if(J*C<0||N*V<0){o.loc=t.BEHIND;return}if(Math.sqrt(J*J+N*N)<Math.sqrt(C*C+V*V)){o.loc=t.BEYOND;return}let k;J!==0?k=C/J:k=V/N,o.loc=t.BETWEEN,o.t=k}function f(T,y){const L=[],J=[];for(let N=1;N<T.length;N++){const C=T[N-1],V=T[N];for(let Q=1;Q<y.length;Q++){const k=y[Q-1],q=y[Q],ee=s(C,V,k,q);ee!==null&&L.find(M=>M.t<=ee.t+Number.EPSILON&&M.t>=ee.t-Number.EPSILON)===void 0&&(L.push(ee),J.push(new Le(ee.x,ee.y)))}}return J}function x(T,y,L){const J=new Le;y.getCenter(J);const N=[];return L.forEach(C=>{C.boundingBox.containsPoint(J)&&f(T,C.points).forEach(Q=>{N.push({identifier:C.identifier,isCW:C.isCW,point:Q})})}),N.sort((C,V)=>C.point.x-V.point.x),N}function I(T,y,L,J,N){(N==null||N==="")&&(N="nonzero");const C=new Le;T.boundingBox.getCenter(C);const V=[new Le(L,C.y),new Le(J,C.y)],Q=x(V,T.boundingBox,y);Q.sort((S,Z)=>S.point.x-Z.point.x);const k=[],q=[];Q.forEach(S=>{S.identifier===T.identifier?k.push(S):q.push(S)});const ee=k[0].point.x,M=[];let ue=0;for(;ue<q.length&&q[ue].point.x<ee;)M.length>0&&M[M.length-1]===q[ue].identifier?M.pop():M.push(q[ue].identifier),ue++;if(M.push(T.identifier),N==="evenodd"){const S=M.length%2===0,Z=M[M.length-2];return{identifier:T.identifier,isHole:S,for:Z}}else if(N==="nonzero"){let S=!0,Z=null,he=null;for(let ce=0;ce<M.length;ce++){const le=M[ce];S?(he=y[le].isCW,S=!1,Z=le):he!==y[le].isCW&&(he=y[le].isCW,S=!0)}return{identifier:T.identifier,isHole:S,for:Z}}else console.warn('fill-rule: "'+N+'" is currently not implemented.')}let U=999999999,E=-999999999,v=e.subPaths.map(T=>{const y=T.getPoints();let L=-999999999,J=999999999,N=-999999999,C=999999999;for(let V=0;V<y.length;V++){const Q=y[V];Q.y>L&&(L=Q.y),Q.y<J&&(J=Q.y),Q.x>N&&(N=Q.x),Q.x<C&&(C=Q.x)}return E<=N&&(E=N+1),U>=C&&(U=C-1),{curves:T.curves,points:y,isCW:Br.isClockWise(y),identifier:-1,boundingBox:new Lr(new Le(C,J),new Le(N,L))}});v=v.filter(T=>T.points.length>1);for(let T=0;T<v.length;T++)v[T].identifier=T;const g=v.map(T=>I(T,v,U,E,e.userData?e.userData.style.fillRule:void 0)),w=[];return v.forEach(T=>{if(!g[T.identifier].isHole){const L=new zr;L.curves=T.curves,g.filter(N=>N.isHole&&N.for===T.identifier).forEach(N=>{const C=v[N.identifier],V=new Hn;V.curves=C.curves,L.holes.push(V)}),w.push(L)}}),w}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],l=[],f=[];if(zn.pointsToStrokeWithBuffers(e,n,t,o,s,l,f)===0)return null;const x=new ao;return x.setAttribute("position",new Xo(s,3)),x.setAttribute("normal",new Xo(l,3)),x.setAttribute("uv",new Xo(f,2)),x}static pointsToStrokeWithBuffers(e,n,t,o,s,l,f,x){const I=new Le,U=new Le,E=new Le,v=new Le,g=new Le,w=new Le,T=new Le,y=new Le,L=new Le,J=new Le,N=new Le,C=new Le,V=new Le,Q=new Le,k=new Le,q=new Le,ee=new Le;t=t!==void 0?t:12,o=o!==void 0?o:.001,x=x!==void 0?x:0,e=z(e);const M=e.length;if(M<2)return 0;const ue=e[0].equals(e[M-1]);let S,Z=e[0],he;const ce=n.strokeWidth/2,le=1/(M-1);let A=0,R,fe,u,$,ne=!1,ge=0,h=x*3,c=x*2;i(e[0],e[1],I).multiplyScalar(ce),y.copy(e[0]).sub(I),L.copy(e[0]).add(I),J.copy(y),N.copy(L);for(let b=1;b<M;b++){S=e[b],b===M-1?ue?he=e[1]:he=void 0:he=e[b+1];const O=I;if(i(Z,S,O),E.copy(O).multiplyScalar(ce),C.copy(S).sub(E),V.copy(S).add(E),R=A+le,fe=!1,he!==void 0){i(S,he,U),E.copy(U).multiplyScalar(ce),Q.copy(S).sub(E),k.copy(S).add(E),u=!0,E.subVectors(he,Z),O.dot(E)<0&&(u=!1),b===1&&(ne=u),E.subVectors(he,S),E.normalize();const K=Math.abs(O.dot(E));if(K>Number.EPSILON){const d=ce/K;E.multiplyScalar(-d),v.subVectors(S,Z),g.copy(v).setLength(d).add(E),q.copy(g).negate();const m=g.length(),a=v.length();v.divideScalar(a),w.subVectors(he,S);const se=w.length();switch(w.divideScalar(se),v.dot(q)<a&&w.dot(q)<se&&(fe=!0),ee.copy(g).add(S),q.add(S),$=!1,fe?u?(k.copy(q),V.copy(q)):(Q.copy(q),C.copy(q)):G(),n.strokeLineJoin){case"bevel":_(u,fe,R);break;case"round":H(u,fe),u?P(S,C,Q,R,0):P(S,k,V,R,1);break;case"miter":case"miter-clip":default:const de=ce*n.strokeMiterLimit/m;if(de<1)if(n.strokeLineJoin!=="miter-clip"){_(u,fe,R);break}else H(u,fe),u?(w.subVectors(ee,C).multiplyScalar(de).add(C),T.subVectors(ee,Q).multiplyScalar(de).add(Q),r(C,R,0),r(w,R,0),r(S,R,.5),r(S,R,.5),r(w,R,0),r(T,R,0),r(S,R,.5),r(T,R,0),r(Q,R,0)):(w.subVectors(ee,V).multiplyScalar(de).add(V),T.subVectors(ee,k).multiplyScalar(de).add(k),r(V,R,1),r(w,R,1),r(S,R,.5),r(S,R,.5),r(w,R,1),r(T,R,1),r(S,R,.5),r(T,R,1),r(k,R,1));else fe?(u?(r(L,A,1),r(y,A,0),r(ee,R,0),r(L,A,1),r(ee,R,0),r(q,R,1)):(r(L,A,1),r(y,A,0),r(ee,R,1),r(y,A,0),r(q,R,0),r(ee,R,1)),u?Q.copy(ee):k.copy(ee)):u?(r(C,R,0),r(ee,R,0),r(S,R,.5),r(S,R,.5),r(ee,R,0),r(Q,R,0)):(r(V,R,1),r(ee,R,1),r(S,R,.5),r(S,R,.5),r(ee,R,1),r(k,R,1)),$=!0;break}}else G()}else G();!ue&&b===M-1&&X(e[0],J,N,u,!0,A),A=R,Z=S,y.copy(Q),L.copy(k)}if(!ue)X(S,C,V,u,!1,R);else if(fe&&s){let b=ee,O=q;ne!==u&&(b=q,O=ee),u?($||ne)&&(O.toArray(s,0*3),O.toArray(s,3*3),$&&b.toArray(s,1*3)):($||!ne)&&(O.toArray(s,1*3),O.toArray(s,3*3),$&&b.toArray(s,0*3))}return ge;function i(b,O,K){return K.subVectors(O,b),K.set(-K.y,K.x).normalize()}function r(b,O,K){s&&(s[h]=b.x,s[h+1]=b.y,s[h+2]=0,l&&(l[h]=0,l[h+1]=0,l[h+2]=1),h+=3,f&&(f[c]=O,f[c+1]=K,c+=2)),ge+=3}function P(b,O,K,d,m){I.copy(O).sub(b).normalize(),U.copy(K).sub(b).normalize();let a=Math.PI;const se=I.dot(U);Math.abs(se)<1&&(a=Math.abs(Math.acos(se))),a/=t,E.copy(O);for(let de=0,Ge=t-1;de<Ge;de++)v.copy(E).rotateAround(b,a),r(E,d,m),r(v,d,m),r(b,d,.5),E.copy(v);r(v,d,m),r(K,d,m),r(b,d,.5)}function G(){r(L,A,1),r(y,A,0),r(C,R,0),r(L,A,1),r(C,R,0),r(V,R,1)}function _(b,O,K){O?b?(r(L,A,1),r(y,A,0),r(C,R,0),r(L,A,1),r(C,R,0),r(q,R,1),r(C,K,0),r(Q,K,0),r(q,K,.5)):(r(L,A,1),r(y,A,0),r(V,R,1),r(y,A,0),r(q,R,0),r(V,R,1),r(V,K,1),r(q,K,0),r(k,K,1)):b?(r(C,K,0),r(Q,K,0),r(S,K,.5)):(r(V,K,1),r(k,K,0),r(S,K,.5))}function H(b,O){O&&(b?(r(L,A,1),r(y,A,0),r(C,R,0),r(L,A,1),r(C,R,0),r(q,R,1),r(C,A,0),r(S,R,.5),r(q,R,1),r(S,R,.5),r(Q,A,0),r(q,R,1)):(r(L,A,1),r(y,A,0),r(V,R,1),r(y,A,0),r(q,R,0),r(V,R,1),r(V,A,1),r(q,R,0),r(S,R,.5),r(S,R,.5),r(q,R,0),r(k,A,1)))}function X(b,O,K,d,m,a){switch(n.strokeLineCap){case"round":m?P(b,K,O,a,.5):P(b,O,K,a,.5);break;case"square":if(m)I.subVectors(O,b),U.set(I.y,-I.x),E.addVectors(I,U).add(b),v.subVectors(U,I).add(b),d?(E.toArray(s,1*3),v.toArray(s,0*3),v.toArray(s,3*3)):(E.toArray(s,1*3),f[3*2+1]===1?v.toArray(s,3*3):E.toArray(s,3*3),v.toArray(s,0*3));else{I.subVectors(K,b),U.set(I.y,-I.x),E.addVectors(I,U).add(b),v.subVectors(U,I).add(b);const se=s.length;d?(E.toArray(s,se-1*3),v.toArray(s,se-2*3),v.toArray(s,se-4*3)):(v.toArray(s,se-2*3),E.toArray(s,se-1*3),v.toArray(s,se-4*3))}break}}function z(b){let O=!1;for(let d=1,m=b.length-1;d<m;d++)if(b[d].distanceTo(b[d+1])<o){O=!0;break}if(!O)return b;const K=[];K.push(b[0]);for(let d=1,m=b.length-1;d<m;d++)b[d].distanceTo(b[d+1])>=o&&K.push(b[d]);return K.push(b[b.length-1]),K}}}function Ai(p,e,n,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=n,l=8,f=24,x=.075,I=200;let U,E=[],v=[],g=[],w=[];const T=(C,V,Q,k)=>{const q=new Ro(C,C,C),ee=new jo(q),M=[new Rt({color:16711680,transparent:!0,opacity:k.opacity,blending:Zt}),new Rt({color:65280,transparent:!0,opacity:k.opacity,blending:Zt}),new Rt({color:255,transparent:!0,opacity:k.opacity,blending:Zt}),new Rt({color:65535,transparent:!0,opacity:k.opacity,blending:Zt}),new Rt({color:16711935,transparent:!0,opacity:k.opacity,blending:Zt}),new Rt({color:16776960,transparent:!0,opacity:k.opacity,blending:Zt})],ue=new gt,S=ee.getAttribute("position").array,Z=[];for(let le=0;le<S.length/3;le+=2)Z.push(le,le+1);const he=Array(6).fill(null).map(()=>new ao),ce=Array(6).fill(null).map(()=>[]);for(let le=0;le<Z.length/2;le++){const A=le%6;ce[A].push(Z[le*2],Z[le*2+1])}return he.forEach((le,A)=>{le.setIndex(ce[A]),le.setAttribute("position",ee.getAttribute("position"));const R=new xt(le,M[A]);ue.add(R)}),ue.position.z=V,ue.rotation.z=Q,ue};if((()=>{const Q=.9/(f-1);for(let Z=0;Z<f;Z++)v[Z]=new Rt({transparent:!0,opacity:1-Z*Q});if(U=new gt,!U){console.error("introGroup failed to initialize");return}for(let Z=0;Z<f;Z++){const he=o-Z*l,ce=T(he,0,0,v[Z]),le=ce.children.map(A=>A.material);w.push(le.map(A=>({material:A,originalColor:A.color.clone()}))),U.add(ce)}U.position.z=s,p.add(U),E.push(U),g=v.map(Z=>Z.opacity);const k=Oe.timeline({repeat:-1});k.to(U.rotation,{x:Ze.degToRad(360),duration:12,ease:"none"},0),k.to(U.rotation,{y:Ze.degToRad(360),duration:10,ease:"none"},0),k.to(U.rotation,{z:Ze.degToRad(360),duration:14,ease:"none"},0);let q=-1,ee=0;const M=x*1e3,ue=f*M,S=Z=>{const he=Z%ue/M,ce=Math.floor(he)%f;q!==-1&&Z-ee>=M&&(w[q].forEach(R=>{R.material.opacity=g[q],R.material.color.copy(R.originalColor)}),q=-1),q===-1&&ce!==q&&(q=ce,ee=Z,w[q].forEach(A=>{A.material.opacity=1,A.material.color.set(1,1,1)})),requestAnimationFrame(S)};requestAnimationFrame(S)})(),e.value){const C=L(e.value);p.add(C)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:E};function L(C){const V=new gt,Q=J(C);Q.position.set(0,-36,0),V.add(Q),N(q=>{V.add(q),Oe.fromTo(Q.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const ee=q.children.find(M=>M instanceof Be&&M!==q.children[0]);if(ee){const M=ee.position.y;Oe.to(ee.position,{y:M+3,duration:1,ease:"easeOut",onComplete:()=>{ee.position.y=M},repeat:-1})}}),V.position.x=0,V.position.y=-240;const k=s-f*l;return V.position.z=k+I,V}function J(C){const V=new ls("SCROLL TO CONTINUE",{font:C,size:8,depth:0,curveSegments:12,bevelEnabled:!1});V.computeBoundingBox(),V.center();const Q=new ut({color:16777215,transparent:!0,opacity:1});return new Be(V,Q)}function N(C){new zn().load("/3D/mouse.svg",Q=>{const k=Q.paths;let q=null,ee=null,M=new gt;if(k.forEach((ue,S)=>{zn.createShapes(ue).forEach(he=>{const ce=new Hr(he);ce.computeBoundingBox();const le=new ut({color:16777215,transparent:!0,opacity:1,side:Xt}),A=new Be(ce,le);A.scale.set(.05,.05,1),S===0?q=A:S===1&&(ee=A)})}),q&&ee){M.add(q),M.add(ee);const S=(q.geometry.boundingBox.max.x-q.geometry.boundingBox.min.x)*q.scale.x/2;M.position.x=-S,M.rotation.x=Math.PI,C(M)}})}}function ki(p,e,n,t,o,s,l,f){const x=rn(),I=Vs(),{CUBE_SIZE:U,CUBE_SPACING:E,FIRST_CUBE_Z:v}=e,g=v-(n.length+1)*E,w=65535,T=16711935,y=Ze.degToRad(15),L=1e3,J=.5,N=65280,C=80,V=1,Q=15,k=.1,q="ENTER TO LEARN MORE",ee=I.isMobile?1:.5,M=40,ue=.125,S=100,Z=8,he=I.isMobile?1.5:2,ce=I.isMobile?2:3.5,le=1;let A=[];A.length=0;let R=!1,fe=!1,u=new Fr,$=new Le,ne=null,ge=null,h=null,c=!1,i=null;const r=new Map,P=new Map,G=new Map,_=(F,te,be,ie,xe,Te,Me)=>{const ae=new gt;ae.position.z=be,ae.rotation.z=ie,ae.userData.isActive=!1,ae.userData.cubeIndex=Me;const _e=new Ro(te,te,te),ve=new jo(_e),pe=new Rt({color:new Et(w),transparent:!0,opacity:0}),Ce=new xt(ve,pe);Ce.geometry.computeBoundingSphere(),ae.add(Ce);let Ve="right";const we=te/2,at=Ne=>{const Mt=new xs(40,24),Ue=new jo(Mt),Wt=new Rt({color:new Et(w),transparent:!0,opacity:0,visible:!0}),D=new xt(Ue,Wt);D.userData.isPortal=!0,D.userData.isAnimating=!1,D.geometry.computeBoundingSphere();const oe=new oo(80,80),Ae=new ut({visible:!1,side:Xt}),B=new Be(oe,Ae);B.userData.isPortalHitbox=!0,B.userData.portal=D,B.geometry.computeBoundingSphere();const j=new gt,W=new oo(V,Q),Y=65/2;for(let qe=0;qe<C;qe++){const Vt=new ut({color:new Et(T),transparent:!0,opacity:0,visible:!1,side:Xt}),Xe=new Be(W,Vt),Je=qe/C*Math.PI*2;Xe.position.set(Math.cos(Je)*Y,Math.sin(Je)*Y,0),Xe.rotation.z=Je+Math.PI/2,Xe.userData.baseOpacity=.01,Xe.userData.index=qe,Xe.geometry.computeBoundingSphere(),j.add(Xe)}const Se=2,me=25;for(let qe=1;qe<me;qe++){const Vt=new xs(40,24),Xe=new jo(Vt),Je=Ze.lerp(1,.1,qe/(me-1)),yt=new Rt({color:new Et(w),transparent:!0,opacity:0}),Yt=new xt(Xe,yt);Yt.userData.isPortal=!0,Yt.userData.maxOpacity=Je,Yt.position.z=-qe*Se,Yt.geometry.computeBoundingSphere(),D.add(Yt)}if(D.userData.maxOpacity=1,f.value){const qe=new ls(q,{font:f.value,size:3,depth:0,curveSegments:12,bevelEnabled:!1});qe.computeBoundingBox(),qe.center();const Vt=new ut({color:16777215,transparent:!0,opacity:0,side:Xt}),Xe=new Be(qe,Vt);Xe.visible=!1,Xe.userData.isVisible=!1,Xe.userData.isExploreText=!0,Xe.userData.skipTextMeshes=!0;const Je=45;Xe.position.set(0,Je,0),D.add(Xe),D.userData.exploreText=Xe;const yt=qe.boundingBox,Yt=yt.max.x-yt.min.x+10,ln=yt.max.y-yt.min.y+10,uo=new oo(Yt,ln),Nt=new ut({transparent:!0,opacity:0,side:Xt,visible:!1}),Ht=new Be(uo,Nt);Ht.position.set(0,Je,0),Ht.userData.isExploreTextHitbox=!0,Ht.userData.portal=D,Ht.geometry.computeBoundingSphere(),D.add(Ht),D.userData.exploreTextHitbox=Ht}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const re=new gt,Ee=new oo(12,I.isMobile?1:.5),Pe=new ut({color:16777215,transparent:!0,opacity:0,side:Xt}),De=new Be(Ee,Pe);De.rotation.z=Math.PI/4;const Ye=new Be(Ee,Pe);Ye.rotation.z=-Math.PI/4,re.add(De,Ye);const mt=new oo(30,30),ot=new ut({opacity:0,transparent:!0,side:Xt,visible:!0}),pt=new Be(mt,ot);pt.userData.isCloseHitbox=!0,pt.geometry.computeBoundingSphere(),pt.renderOrder=2,re.add(pt);const st=42,Ke=42,We=-10;re.visible=!1;let et;switch(Ve){case"left":D.position.set(-we,0,0),D.rotation.y=Math.PI/2,B.position.set(-we,0,0),B.rotation.y=Math.PI/2,ie>=Ze.degToRad(120)?(D.rotation.z=Math.PI,re.position.set(-we+We,-42,st),et=new Ie(-we+We,-42,st)):(re.position.set(-we+We,Ke,-42),et=new Ie(-we+We,Ke,-42)),re.rotation.y=Math.PI/2,j.children.forEach(qe=>qe.position.x+=k);break;case"top":D.position.set(0,-we,0),D.rotation.x=-Math.PI/2,D.rotation.z=-Math.PI/2,B.position.set(0,-we,0),B.rotation.x=Math.PI/2,ie>=Ze.degToRad(100)?ie>=Ze.degToRad(180)?(D.rotation.z=Math.PI/2,re.position.set(-42,-we+We,-42),et=new Ie(-42,-we+We,-42)):(re.position.set(Ke,-we+We,st),et=new Ie(Ke,-we+We,st)):(re.position.set(Ke,-we+We,st),et=new Ie(Ke,-we+We,st)),re.rotation.x=-Math.PI/2,j.children.forEach(qe=>qe.position.y+=k);break;case"right":D.position.set(we,0,0),D.rotation.y=-Math.PI/2,B.position.set(we,0,0),B.rotation.y=-Math.PI/2,ie>=Ze.degToRad(120)?(D.rotation.z=Math.PI,re.position.set(we+We,-42,-42),et=new Ie(we+We,-42,-42)):(re.position.set(we+We,Ke,st),et=new Ie(we+We,Ke,st)),re.rotation.y=-Math.PI/2,j.children.forEach(qe=>qe.position.x+=k);break;case"bottom":D.position.set(0,we,0),D.rotation.x=Math.PI/2,D.rotation.z=-Math.PI/2,B.position.set(0,we,0),B.rotation.x=Math.PI/2,ie>=Ze.degToRad(100)?(re.position.set(st,we-We,-42),et=new Ie(st,we-We,-42)):(re.position.set(Ke,we-We,-42),et=new Ie(Ke,we-We,-42)),re.rotation.x=Math.PI/2,j.children.forEach(qe=>qe.position.y+=k);break}ae.userData.initialCloseGroupPosition=et,re.updateMatrixWorld(!0),D.add(j),ae.add(D),ae.add(B),ae.add(re),ae.userData.closeButton=re,D.updateMatrixWorld(!0),j.updateMatrixWorld(!0),re.updateMatrixWorld(!0),r.set(ae,[]),P.set(ae,0),G.set(ae,0)},ke=Ne=>{(Ne instanceof xt||Ne instanceof Be)&&Ne.geometry&&Ne.geometry.computeBoundingSphere(),ae.add(Ne)};if(xe&&s.showKeyarts){switch(["left","top","right","bottom"].includes(Te)?Te:"left"){case"left":Ve="right";break;case"top":Ve="bottom";break;case"right":Ve="left";break;case"bottom":Ve="top";break}const Qe=l.get(xe);if(Qe){const lt=new oo(te-1,te-1),Mt=new ut({map:Qe,transparent:!0,opacity:0,blending:Zt,side:Xt}),Ue=new Be(lt,Mt);switch(Ue.userData.isLoaded=!0,Te){case"left":Ue.position.set(-we,0,0),ie>=Ze.degToRad(120)?(Ue.rotation.y=Math.PI/2,Ue.rotation.z=-Math.PI):Ue.rotation.y=Math.PI/2;break;case"top":Ue.position.set(0,-we,0),Ue.rotation.x=-Math.PI/2,Ue.rotation.z=-Math.PI/2;break;case"right":Ue.position.set(we,0,0),ie>=Ze.degToRad(120)?(Ue.rotation.y=-Math.PI/2,Ue.rotation.z=-Math.PI):Ue.rotation.y=-Math.PI/2;break;case"bottom":Ue.position.set(0,we,0),ie>=Ze.degToRad(180)?ie>=Ze.degToRad(220)?(Ue.rotation.x=Math.PI/2,Ue.rotation.z=Math.PI/2):(Ue.rotation.x=-Math.PI/2,Ue.rotation.z=Math.PI/2):(Ue.rotation.x=Math.PI/2,Ue.rotation.z=-Math.PI/2);break}Ue.geometry.computeBoundingSphere(),ke(Ue),at()}else console.warn(`Keyart texture not preloaded for ${F.title}: ${xe}`),at()}else at();ae.userData.portalLocation=Ve;{const Ne=(oe,Ae,B,j)=>{const W=new oo(te-1,te-1),Y={map:oe,transparent:!0,opacity:0,blending:Zt,side:Xt,depthWrite:!1};j&&(Y.color=j);const Se=new ut(Y),me=new Be(W,Se);me.position.copy(Ae),B.x&&(me.rotation.x=B.x),B.y&&(me.rotation.y=B.y),me.userData.isGridPlane=!0,me.geometry.computeBoundingSphere(),ke(me)},Qe=l.get(t),lt=l.get(o),Mt=["left","top","right","bottom"],Wt=[xe&&s.showKeyarts?Te||"left":null,Ve].filter(Boolean),D=Mt.filter(oe=>!Wt.includes(oe));if(Qe)switch(Ne(Qe,new Ie(0,0,-te/2-1),{y:0}),Ne(Qe,new Ie(0,0,te/2+1),{y:0},new Et(16744448)),D[0]){case"left":Ne(Qe,new Ie(-we,0,0),{y:-Math.PI/2},new Et(255));break;case"top":Ne(Qe,new Ie(0,we,0),{x:Math.PI/2},new Et(255));break;case"right":Ne(Qe,new Ie(we,0,0),{y:Math.PI/2},new Et(255));break;case"bottom":Ne(Qe,new Ie(0,-we,0),{x:-Math.PI/2},new Et(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(lt)switch(D[1]){case"left":Ne(lt,new Ie(-we,0,0),{y:-Math.PI/2});break;case"top":Ne(lt,new Ie(0,we,0),{x:Math.PI/2});break;case"right":Ne(lt,new Ie(we,0,0),{y:Math.PI/2});break;case"bottom":Ne(lt,new Ie(0,-we,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}ae.children.forEach(Ne=>{Ne.updateMatrixWorld(!0),Ne instanceof gt&&Ne.children.forEach(Qe=>{Qe.updateMatrixWorld(!0)})}),ae.updateMatrixWorld(!0);const bt=new qs().setFromObject(ae),nt=new Zs;return bt.getBoundingSphere(nt),ae.boundingSphere=nt,ae},H=new Gr,X=(F,te,be,ie,xe)=>{if(!f.value){console.warn("Font not available; skipping text creation for:",F);const bt=new ao,nt=new ut({visible:!1});return new Be(bt,nt)}const Te=new ls(F,{font:f.value,size:xe,depth:0,curveSegments:12,bevelEnabled:!1});Te.computeBoundingBox(),Te.center();const Me=new ut({color:16777215,transparent:!0,opacity:0,side:Xt}),ae=new Be(Te,Me);ae.position.set(te,be,ie);const _e=Te.boundingBox,ve=_e.max.x-_e.min.x,pe=_e.max.y-_e.min.y,Ce=ve+8,Ve=pe+4,we=new oo(Ce,Ve),at=new ut({color:0,transparent:!0,opacity:0,side:Xt}),ke=new Be(we,at);return ke.position.set(te,be,ie-1),p.add(ke),p.add(ae),ae.userData.backgroundPlane=ke,ae},z=()=>{const F=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let te=0;F.forEach((be,ie)=>{const xe=v-(ie+1)*E,Te=(ie+1)*y,Me=_(be,U,xe,Te,be.keyart,be.keyartLocation,te);p.add(Me),A.push(Me),te++,X(be.title,0,be.size-15,v+90-(ie+1)*E,be.size)})},b=()=>R?Promise.resolve({projectCubes:A,updateCubeColors:a,maxZ:g}):(z(),R=!0,Promise.resolve({projectCubes:A,updateCubeColors:a,maxZ:g})),O=F=>{if(F.userData.isAnimating)return;F.userData.isAnimating=!0;const te=F.children.find(Me=>Me instanceof gt);if(!te)return;const be=te.children,ie=be.length,xe=Oe.timeline({repeat:-1,defaults:{ease:"none"}}),Te={value:0};xe.to(Te,{value:1,duration:1.5,onUpdate:()=>{be.forEach(ae=>{const _e=ae.material;if(_e.visible){const ve=(ae.userData.index/ie+Te.value)%1,Ce=(Math.sin(ve*Math.PI*2)+1)/2;_e.opacity=.01+(1-.01)*Math.pow(Ce,4)}})}}),F.userData.animationTimeline=xe},K=F=>{if(!F.userData.isAnimating)return;F.userData.isAnimating=!1;const te=F.children.find(be=>be instanceof gt);te&&(F.userData.animationTimeline&&(F.userData.animationTimeline.kill(),delete F.userData.animationTimeline),te.children.forEach(be=>{const ie=be.material;ie.opacity=0}))},d=(F,te)=>{let be;const ie=(G.get(F)||0)+1;G.set(F,ie),ie%Z===0?be=new Ur(he,ce,12,1):be=new Ro(ee,ee,ee);const xe=new ut({color:16777215,transparent:!0,opacity:0}),Te=new Be(be,xe);Te.position.set(0,0,0);const Me=te.position.clone(),ae=Me.clone().normalize(),_e=Me.length()+S;if(ie%Z===0){const pe=Te.position.clone().add(ae);Te.lookAt(pe),Te.rotateX(Math.PI/2)}F.add(Te),Oe.to(xe,{opacity:.5,duration:le,ease:"power2.in",overwrite:"auto"});const ve=r.get(F)||[];ve.push({mesh:Te,direction:ae,distanceTraveled:0,totalDistance:_e}),r.set(F,ve)},m=F=>{(r.get(F)||[]).forEach(be=>{F.remove(be.mesh),be.mesh.geometry.dispose(),be.mesh.material.dispose()}),r.set(F,[])},a=F=>{H.setFromProjectionMatrix(F.projectionMatrix.clone().multiply(F.matrixWorldInverse));const te=F.position.z;let be=[];p.traverse(ie=>{var xe;return ie instanceof Be&&((xe=ie.geometry)==null?void 0:xe.type)==="TextGeometry"&&!ie.userData.skipTextMeshes&&be.push(ie)}),fe||(fe=!0),A.forEach((ie,xe)=>{const Te=ie.boundingSphere;if(Te){const ve=Te.clone();if(ve.radius*=1.5,!H.intersectsSphere(ve))return}else console.warn(`Cube ${xe} has no boundingSphere`);const Me=ie.position.z,ae=Math.abs(te-Me);let _e=0;ae<=L&&(_e=1-ae/L),ie.userData.isActive=_e>=J,ie.children.forEach(ve=>{if(ve instanceof xt&&!ve.userData.isPortal&&!ve.userData.isPortalHitbox){const pe=ve.material;if(ae<=L){const Ce=Ze.lerp((w>>16&255)/255,(T>>16&255)/255,_e),Ve=Ze.lerp((w>>8&255)/255,(T>>8&255)/255,_e),we=Ze.lerp((w&255)/255,(T&255)/255,_e);pe.color.set(Ce,Ve,we),pe.opacity=Math.min(1,_e*2)}else pe.opacity=0}else if(ve instanceof xt&&ve.userData.isPortal)ve.children.forEach(pe=>{if(pe instanceof Be&&pe.userData.isExploreText){const Ce=pe.material;if(ae<=L){const Ve=1-ae/L;Ce.opacity=Math.min(1,Ve*2),pe.visible=!0}else Ce.opacity=0,pe.visible=!1}}),fe&&(_e>.1?ve.children.forEach(pe=>{pe instanceof gt&&pe.children.forEach(Ce=>{Ce instanceof Be&&(Ce.material.visible=!0,!ve.userData.animationStarted&&s.showPortalPulses&&(O(ve),ve.userData.animationStarted=!0))})}):_e<=.1&&ve.userData.animationStarted&&(ve.children.forEach(pe=>{pe instanceof gt&&pe.children.forEach(Ce=>{Ce instanceof Be&&(Ce.material.visible=!1)})}),K(ve),delete ve.userData.animationStarted));else if(ve instanceof Be&&!ve.userData.isPortalHitbox&&!ve.userData.isCloseHitbox){const pe=ve.material;if(ve.userData.isLoaded||ve.userData.isGridPlane)if(ae<=L){const Ce=1-ae/L;pe.opacity=Math.min(.8,Ce*2),ve.visible=!0}else pe.opacity=0,ve.visible=!1}else if(ve instanceof gt&&ve.userData.closeButton){const pe=Math.abs(te-ve.position.z);ve.children.forEach(Ce=>{if(Ce instanceof Be&&!Ce.userData.isCloseHitbox){const Ve=Ce.material;if(pe<=L){const we=1-pe/L;Ve.opacity=Math.min(1,we*2)}else Ve.opacity=0}})}})}),be.forEach(ie=>{if(!H.intersectsObject(ie))return;const xe=ie.material,Te=ie.userData.backgroundPlane,Me=Te==null?void 0:Te.material,ae=ie.position.z,_e=Math.abs(te-ae+120);if(c){xe.opacity=0,Me&&(Me.opacity=0);return}if(_e<=L){const ve=1-_e/L,pe=Math.min(1,ve*2);xe.opacity=pe,Me&&(Me.opacity=pe*.8)}else xe.opacity=0,Me&&(Me.opacity=0)})},se=(F,te)=>{const be=performance.now()/1e3,ie=F.position.z;A.forEach(xe=>{const Te=xe.position.z;if(Math.abs(ie-Te+90)<=L&&!c){const ae=P.get(xe)||0;if(be-ae>=ue){const pe=xe.children.find(Ce=>Ce instanceof xt&&Ce.userData.isPortal);pe&&(d(xe,pe),P.set(xe,be))}const ve=(r.get(xe)||[]).filter(pe=>{if(pe.distanceTraveled+=M*te,pe.mesh.position.copy(pe.direction.clone().multiplyScalar(pe.distanceTraveled)),(pe.totalDistance-pe.distanceTraveled)/M<=le&&!pe.isFadingOut){pe.isFadingOut=!0;const we=pe.mesh.material;Oe.to(we,{opacity:0,duration:le,ease:"power2.out",overwrite:"auto"})}return pe.distanceTraveled>=pe.totalDistance?(xe.remove(pe.mesh),pe.mesh.geometry.dispose(),pe.mesh.material.dispose(),!1):!0});r.set(xe,ve)}else m(xe)})},de=F=>{const te=[F,...F.children.filter(xe=>xe instanceof xt&&xe.userData.isPortal)],be=2,ie=.1;te.forEach((xe,Te)=>{const Me=xe.material;Me.opacity=xe.userData.maxOpacity;const ae=Oe.timeline({repeat:-1,delay:Te*ie});ae.to(Me,{opacity:0,duration:be/2,ease:"power2.inOut"}).to(Me,{opacity:xe.userData.maxOpacity,duration:be/2,ease:"power2.inOut"}),xe.userData.marqueeTimeline=ae})},Ge=F=>{[F,...F.children.filter(be=>be instanceof xt&&be.userData.isPortal)].forEach(be=>{if(be.userData.marqueeTimeline){be.userData.marqueeTimeline.kill(),delete be.userData.marqueeTimeline;const ie=be.material;ie.opacity=be.userData.maxOpacity}})};return{getInitializedData:b,updateCubeColors:a,setupInteractivity:(F,te,be,ie,xe)=>{i=ie;let Te=null,Me=null,ae=null,_e=!1,ve=!1,pe=!1,Ce=!1,Ve=[],we=!1;p.traverse(D=>{var oe;D instanceof Be&&((oe=D.geometry)==null?void 0:oe.type)==="TextGeometry"&&!D.userData.skipTextMeshes&&Ve.push(D)});const at=D=>{c&&(Te=D.touches[0].clientY,Me=Me??window.scrollY,_e=!0)},ke=D=>{if(!c||!ae||!Te||Ce)return;const Ae=D.touches[0].clientY-Te;x.isMobile&&Ae<-50&&!ve&&(D.cancelable&&D.preventDefault(),Ne(),Te=null)},bt=D=>{Te=null,_e=!1,pe=!0,Oe.delayedCall(.5,()=>{pe=!1})},nt=D=>{if(_e||ve||pe||Ce){D.preventDefault(),D.stopPropagation(),Me!==null&&(window.scrollTo(0,Me),Oe.to(window,{scrollTo:{y:Me},duration:0}));return}if(!c||!ae||!ge||!h)return;if(x.isMobile){D.preventDefault(),D.stopPropagation();return}let oe=0;if(D instanceof WheelEvent?oe=D.deltaY:oe=window.scrollY-(Me||0),D.preventDefault(),D.stopPropagation(),oe>0){window.scrollTo(0,Me);return}oe<0&&Ne()},Ne=()=>{const D=ae,oe=h?h.clone():new Ie(0,0,g),Ae=(ge==null?void 0:ge.z)??F.position.z,B=D==null?void 0:D.parent,j=D?A.indexOf(B):-1;Ce=!0,D&&Ge(D);const W=F.userData.lockedLookAt?F.userData.lockedLookAt.clone():F.getWorldDirection(new Ie).multiplyScalar(1e3).add(F.position),Y={progress:0};Oe.to(F.position,{x:(ge==null?void 0:ge.x)??F.position.x,y:(ge==null?void 0:ge.y)??F.position.y,z:Ae,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const Se=Ve[j];if(j!==-1&&Se){const me=Ve[j];if(me){const re=me.material,Ee=me.userData.backgroundPlane,Pe=Math.abs(F.position.z-me.position.z+120),De=Pe<=L?Math.min(1,(1-Pe/L)*2):0;Oe.to(re,{opacity:De,duration:.5,ease:"power2.in"}),Ee&&Oe.to(Ee.material,{opacity:De*.8,duration:.5,ease:"power2.in"})}}if(B!=null&&B.userData.closeButton){const me=B.userData.closeButton.position;Oe.to(B.userData.closeButton.rotation,{z:0,duration:.3,ease:"power2.inOut"}),Oe.to(B.userData.closeButton.position,{x:me.x+2,duration:.3,ease:"power2.inOut"});const re=B.userData.closeButton.children.filter(Ee=>Ee instanceof Be).map(Ee=>Ee.material);Oe.to(re,{opacity:0,duration:.5,onUpdate:()=>{},onComplete:()=>{B.userData.closeButton.updateMatrixWorld(!0),B.userData.closeButton.visible=!1,B.userData.lockedPosition=null,we=!1}}),D&&Qe(D,!1)}},onUpdate:()=>{const Se=Y.progress,me=Ze.lerp(W.x,oe.x,Se),re=Ze.lerp(W.y,oe.y,Se),Ee=Ze.lerp(W.z,oe.z,Se);F.lookAt(me,re,Ee),F.updateMatrixWorld(!0)},onComplete:()=>{F.lookAt(oe),c=!1,ae=null,document.body.classList.remove("no-scrollbar"),x.isMobile&&(document.body.style.overflow="",document.body.style.position="",document.body.style.top="",window.scrollTo(0,Me)),i&&i(!1),D&&Ge(D),Me=null,ge=null,h=null,F.userData.lockedLookAt=null,Ce=!1,A.forEach(Se=>{Math.abs(F.position.z-Se.position.z+90)<=L&&P.set(Se,0)})}}),Oe.to(Y,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},Qe=(D,oe=!0)=>{const Ae=[D,...D.children.filter(j=>j instanceof xt&&j.userData.isPortal)],B=oe?25:2;Ae.forEach((j,W)=>{let Y=-W*B;(D.position.y>0&&D.rotation.x===-Math.PI/2||D.position.y<0&&D.rotation.x===Math.PI/2)&&(Y=W*B);const Se=oe?j.userData.maxOpacity:0;Oe.to(j.position,{z:Y,duration:1,ease:"power3.out",delay:.5,onComplete:()=>{oe&&W===0&&de(D)}}),Oe.to(j.material,{opacity:Se,duration:1,ease:"power3.out",delay:.5})})},lt=D=>{var B;$.x=D.clientX/window.innerWidth*2-1,$.y=-(D.clientY/window.innerHeight)*2+1,u.setFromCamera($,F),F.userData.lockedLookAt&&(F.lookAt(F.userData.lockedLookAt),F.updateMatrixWorld(!0)),A.forEach(j=>{j.userData.lockedPosition&&(j.position.equals(j.userData.lockedPosition)||j.position.copy(j.userData.lockedPosition)),j.updateMatrixWorld(!0),j.children.forEach(W=>W.updateMatrixWorld(!0))});const oe=A.flatMap(j=>{const W=[];return!c&&j.userData.isActive&&j.children.forEach(Y=>{Y instanceof Be&&(Y.userData.isPortalHitbox||Y.userData.isExploreTextHitbox)&&W.push(Y)}),c&&ae&&j===ae.parent&&j.children.forEach(Y=>{Y instanceof Be&&Y.userData.isPortalHitbox&&W.push(Y),Y instanceof xt&&Y.userData.isPortal&&Y.children.forEach(Se=>{Se instanceof Be&&Se.userData.isExploreTextHitbox&&W.push(Se)}),Y instanceof gt&&Y===j.userData.closeButton&&Y.children.forEach(Se=>{Se instanceof Be&&Se.userData.isCloseHitbox&&W.push(Se)})}),W}),Ae=u.intersectObjects(oe);if(Ae.length>0){const j=Ae[0].object;if(j.userData.isPortalHitbox||j.userData.isExploreTextHitbox){const W=j.userData.portal;ne!==W&&(ne&&[ne,...ne.children.filter(me=>me instanceof xt&&me.userData.isPortal)].forEach(me=>{const re=me.material;Oe.to(re.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5})}),ne=W,[ne,...ne.children.filter(Se=>Se instanceof xt&&Se.userData.isPortal)].forEach(Se=>{const me=Se.material;Oe.to(me.color,{r:(N>>16&255)/255,g:(N>>8&255)/255,b:(N&255)/255,duration:.5})})),te.style.cursor="pointer"}else if(j.userData.isCloseHitbox&&c){if(!we){we=!0;const W=j.parent;W.children.filter(Se=>Se instanceof Be&&!Se.userData.isCloseHitbox);const Y=W.position;Oe.to(W.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"}),Oe.to(W.position,{x:Y.x-2,duration:.3,ease:"power2.inOut"})}te.style.cursor="pointer"}else te.style.cursor="auto"}else{if(ne&&([ne,...ne.children.filter(W=>W instanceof xt&&W.userData.isPortal)].forEach(W=>{const Y=W.material;Oe.to(Y.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5})}),ne=null),c&&ae&&we){const j=(B=ae.parent)==null?void 0:B.userData.closeButton,W=j.position;j&&(we=!1,Oe.to(j.rotation,{z:0,duration:.3,ease:"power2.inOut"}),Oe.to(j.position,{x:W.x+2,duration:.3,ease:"power2.inOut"}))}te.style.cursor="auto"}},Mt=D=>{if(console.log("isScrollTriggerActive()",xe()),Ce)return;$.x=D.clientX/window.innerWidth*2-1,$.y=-(D.clientY/window.innerHeight)*2+1,u.setFromCamera($,F);const oe=A.flatMap(re=>{const Ee=[];return c&&ae&&re===ae.parent&&re.children.forEach(Pe=>{Pe instanceof gt&&Pe===re.userData.closeButton&&Pe.children.forEach(De=>{De instanceof Be&&De.userData.isCloseHitbox&&Ee.push(De)})}),Ee}),Ae=A.flatMap(re=>{const Ee=[];return!c&&re.userData.isActive&&re.children.forEach(Pe=>{Pe instanceof Be&&(Pe.userData.isPortalHitbox||Pe.userData.isExploreTextHitbox)&&Ee.push(Pe)}),c&&ae&&re===ae.parent&&re.children.forEach(Pe=>{Pe instanceof Be&&Pe.userData.isPortalHitbox&&Ee.push(Pe),Pe instanceof xt&&Pe.userData.isPortal&&Pe.children.forEach(De=>{De instanceof Be&&De.userData.isExploreTextHitbox&&Ee.push(De)})}),Ee});let B=u.intersectObjects(oe);for(const re of B)if(re.object.userData.isCloseHitbox){Ne();return}if(B=u.intersectObjects(Ae),B.length===0)return;const W=B[0].object.userData.portal,Y=W.parent,Se=A.indexOf(Y),me=n[Se];if(c&&W===ae){let re=new Ie;const Ee=e.CUBE_SIZE/2;W.position.x===Ee?re.set(-1,0,0):W.position.x===-Ee?re.set(1,0,0):W.position.y===Ee?re.set(0,-1,0):W.position.y===-Ee&&re.set(0,1,0),re.applyQuaternion(Y.getWorldQuaternion(new Wr)).normalize();const De=F.position.clone().clone().add(re.clone().multiplyScalar(-675)),Ye=re.clone().multiplyScalar(-1e3),mt=De.clone().add(Ye);Ce=!0,Oe.to(F.position,{x:De.x,y:De.y,z:De.z,duration:1,ease:"power2.in",onUpdate:()=>F.lookAt(mt),onStart:()=>{Oe.to(be.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{me!=null&&me.slug&&(I.setScrollPosition(window.scrollY),Tr.visit(route("project.show",{project:me.slug}),{preserveScroll:!1})),Ce=!1}})}else if(!c){ge||(ge=F.position.clone(),h=new Ie(0,0,g)),i&&ie(!0,ge,h);const re=W.getWorldPosition(new Ie);ve=!0,Ce=!0,Me=window.scrollY,Oe.to(F.position,{x:0,y:0,z:Y.getWorldPosition(new Ie).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{c=!0,ae=W,document.body.classList.add("no-scrollbar"),x.isMobile&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${Me}px`),Qe(W,!0),Y.userData.lockedPosition=Y.position.clone(),m(Y);const Ee=Ve[Se];if(Ee){const Pe=Ee.material,De=Ee.userData.backgroundPlane;Oe.to(Pe,{opacity:0,duration:.5,ease:"power2.out"}),De&&Oe.to(De.material,{opacity:0,duration:.5,ease:"power2.out"})}},onComplete:()=>{if(Y.userData.closeButton){Y.userData.initialCloseGroupPosition&&Y.userData.closeButton.position.copy(Y.userData.initialCloseGroupPosition),Y.userData.closeButton.visible=!0,Y.userData.closeButton.updateMatrixWorld(!0),Y.updateMatrixWorld(!0),Y.userData.closeButton.updateMatrixWorld(!0);const Ee=Y.userData.closeButton.children.filter(Pe=>Pe instanceof Be&&!Pe.userData.isCloseHitbox).map(Pe=>Pe.material);Ee.length>0&&Oe.to(Ee,{opacity:1,duration:.5,onComplete:()=>{Y.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),Oe.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const Ee=this.progress(),Pe=F.getWorldDirection(new Ie).multiplyScalar(1e3).add(F.position),De=Ze.lerp(Pe.x,re.x,Ee),Ye=Ze.lerp(Pe.y,re.y,Ee),mt=Ze.lerp(Pe.z,re.z,Ee);F.lookAt(De,Ye,mt)},onComplete:()=>{F.lookAt(re.x,re.y,re.z),F.updateMatrixWorld(!0),ve=!1,Ce=!1,F.userData.lockedLookAt=re.clone()}})}};te.addEventListener("mousemove",lt),te.addEventListener("click",Mt),te.addEventListener("touchstart",at,{passive:!1}),te.addEventListener("touchmove",ke,{passive:!1}),te.addEventListener("touchend",bt,{passive:!0}),window.addEventListener("wheel",nt,{passive:!1}),window.addEventListener("scroll",nt,{passive:!1});const Ue=()=>{r.forEach((D,oe)=>{D.forEach(Ae=>{oe.remove(Ae.mesh),Ae.mesh.geometry.dispose(),Ae.mesh.material.dispose()})}),r.clear(),P.clear(),G.clear()},Wt=()=>{te.removeEventListener("mousemove",lt),te.removeEventListener("click",Mt),te.removeEventListener("touchstart",at),te.removeEventListener("touchmove",ke),te.removeEventListener("touchend",bt),window.removeEventListener("wheel",nt),window.removeEventListener("scroll",nt),ae&&Ge(ae),x.isMobile&&(document.body.style.overflow="",document.body.style.position="",document.body.style.top="")};return()=>{Wt(),Ue()}},updateClickHereParticles:se}}function Di(p,e,n,t){const o=rn(),s=100,l=100,f=300,x=3355443,I=o.isMobile?24:32,U=-600,E=-500,v=1e3,g=o.isMobile?5:10,w=.05,T=1,y=o.isMobile?6:4,L=o.isMobile?4:6,J=100,N=-450,C=60,V=n-v,Q=Math.abs(E-V),k=Math.ceil(Q/s),q=()=>{const u=new gt;let $=null,ne=null;const ge=[],h=[],c=[],i=[],r=[];{const P=new Ro(s,s,s),G=new jo(P),_=I*k,H=new Yr;H.copy(G),H.instanceCount=_;const X=new Rt({color:x,transparent:!0,fog:!0,vertexColors:!0}),z=new Float32Array(_*3),b=new Float32Array(_*3),O=new Float32Array(_*3),K=I*s,d=-K/2+s/2,m=E;for(let _e=0;_e<I;_e++){const ve=ee(_e);for(let pe=0;pe<k;pe++){const Ce=_e*k+pe,Ve=d+_e*s,we=m-pe*s,at=Ze.randFloat(l,f),ke=at/s,bt=U+at/2;z[Ce*3]=Ve,z[Ce*3+1]=bt,z[Ce*3+2]=we,b[Ce*3]=1,b[Ce*3+1]=ke,b[Ce*3+2]=1,O[Ce*3]=ve,O[Ce*3+1]=ve,O[Ce*3+2]=ve}}H.setAttribute("instancePosition",new Fn(z,3)),H.setAttribute("instanceScale",new Fn(b,3)),H.setAttribute("color",new Fn(O,3)),X.onBeforeCompile=_e=>{_e.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${_e.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},$=new xt(H,X);const a=-K/2,se=K/2,de=U,Ge=U+f,je=V,F=E;H.boundingBox=new qs(new Ie(a,de,je),new Ie(se,Ge,F));const te=(a+se)/2,be=(de+Ge)/2,ie=(je+F)/2,xe=se-a,Te=Ge-de,Me=F-je,ae=Math.sqrt(xe*xe+Te*Te+Me*Me)/2;H.boundingSphere=new Zs(new Ie(te,be,ie),ae),u.add($)}{ne=new gt;const P=I*s/(L-1),G=-(I*s)/2;for(let H=0;H<L;H++){let z=G+H*P,b=E;const O=[new Ie(z,N,b)];let K=0;for(;b>V;){const d=b===E?Ze.randFloat(300,800):Math.min(Ze.randFloat(300,800),Math.abs(b-V));if(b-=d,O.push(new Ie(z,N,b)),K+=d,b<=V){O[O.length-1].z=V;break}const m=Math.random()<.5?-1:1,a=Ze.randFloat(100,300);z+=m*a,O.push(new Ie(z,N,b)),K+=a}h.push({points:O,totalLength:K})}const _=new Ro(y,y,y);for(let H=0;H<L;H++){const X=h[H],z=X.totalLength,b=z/C;for(let O=0;O<C;O++){const K=new ut({color:16711680,fog:!0}),d=new Be(_,K),m=O*b;let a=m;for(let se=0;se<X.points.length-1;se++){const de=X.points[se],Ge=X.points[se+1],je=de.distanceTo(Ge);if(a<=je){const F=a/je;d.position.lerpVectors(de,Ge,F);break}a-=je}ge.push(d),c.push(m),i.push(H),r.push(1),ne.add(d)}for(let O=0;O<C;O++){const K=new ut({color:16777215,fog:!0}),d=new Be(_,K),m=z-(O*b+b/2);let a=z-m;const se=[...X.points].reverse();for(let de=0;de<se.length-1;de++){const Ge=se[de],je=se[de+1],F=Ge.distanceTo(je);if(a<=F){const te=a/F;d.position.lerpVectors(Ge,je,te);break}a-=F}ge.push(d),c.push(m),i.push(H),r.push(-1),ne.add(d)}}e.add(ne)}return e.add(u),{cityGroup:u,instancedLines:$,particleGroup:ne,particles:ge,paths:h,particleDistances:c,particlePaths:i,particleDirections:r}},ee=u=>{if(u<g){const $=(T-w)/(g-1);return w+u*$}else if(u>=I-g){const $=I-1-u,ne=(T-w)/(g-1);return w+$*ne}return T},{cityGroup:M,instancedLines:ue,particleGroup:S,particles:Z,paths:he,particleDistances:ce,particlePaths:le,particleDirections:A}=q();return{cityGroup:M,buildingLines:ue?[ue]:[],updateParticles:u=>{const $=J*u;for(let ne=0;ne<Z.length;ne++){const ge=A[ne],h=le[ne],c=he[h],i=c.totalLength;ce[ne]+=$*ge,ge===1?(ce[ne]=ce[ne]%i,ce[ne]<0&&(ce[ne]+=i)):ce[ne]=(ce[ne]+i)%i;const r=ce[ne],P=ge===1?c.points:[...c.points].reverse();let G=ge===1?r:i-r;for(let _=0;_<P.length-1;_++){const H=P[_],X=P[_+1],z=H.distanceTo(X);if(G<=z){const b=G/z;Z[ne].position.lerpVectors(H,X,b);break}G-=z}}},dispose:()=>{ue&&(M.remove(ue),ue.geometry.dispose(),ue.material.dispose()),S&&(e.remove(S),S.children.forEach(u=>{u.geometry.dispose(),u.material.dispose()})),e.remove(M)}}}Oe.registerPlugin(Re);function Ii(p,e,n,t,o,s,l={},f,x){const I=rn(),{CUBE_SPACING:U,FIRST_CUBE_Z:E}=s,v=(t==null?void 0:t.length)||0,g=E-(v+1)*U;let w=!1,T=!1;const y=I.isMobile?(Math.abs(g)+(v-1)*U)*.7:Math.abs(g)+(v-1)*U;let L=Oe.timeline();Re.config({ignoreMobileResize:!0});{let C=0;const V=16;L=Oe.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${y}`,scrub:l.scrub,pin:!0,onUpdate:Q=>{const k=performance.now();if(k-C>=V){if(!w){const q=Q.progress,ee=Ze.lerp(0,g,q);e.position.set(0,0,ee),e.lookAt(0,0,g)}o(e),C=k}x&&x.update()},onRefresh:()=>{e.updateProjectionMatrix()}}}),L.fromTo(e.position,{z:0},{z:g,duration:1,ease:"none"},0)}return{setReverting:C=>{w=C},timeline:L,isScrollTriggerActive:()=>T}}function Ri(p,e,n){const t=rn(),o=t.isMobile?25:20,s=t.isMobile?1e3:2e3,l=4e3,f=-1e3,x=n-1e3,I=1e3,U=n,E=150,v=-500,g=n,w=new ao,T=new Float32Array(s*3),y=new Float32Array(s),L=new Float32Array(s);let J=0;for(;J<s;){const k=(Math.random()-.5)*l,q=(Math.random()-.5)*l,ee=f+Math.random()*(x-f),M=ee>U&&Math.abs(k)<I&&Math.abs(q)<I,ue=Math.abs(k)<E&&Math.abs(q)<E&&ee>g&&ee<v;if(!M&&!ue){const S=J*3;T[S]=k,T[S+1]=q,T[S+2]=ee;const Z=.1+Math.random()*(.7-.1);y[J]=Z,L[J]=Z,J++}}w.setAttribute("position",new ws(T,3)),w.setAttribute("opacity",new ws(L,1));const N=new go({uniforms:{color:{value:new Et(1,1,1)},size:{value:o}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),C=new Xr(w,N);p.add(C);const V=w.attributes.opacity;for(let k=0;k<s;k++)Oe.to({opacity:y[k]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){L[k]=this.targets()[0].opacity,V.needsUpdate=!0}});return{dispose:()=>{Oe.killTweensOf(L),p.remove(C),w.dispose(),N.dispose()}}}function Oi(p,e){const t=e-1500,o=100,s=2,l=64,f=1e3,x=l*3,I=[4,4.5,5],U=6;let E,v,g,w,T,y;const L=[],J=[[],[],[]],N=[[],[],[]],C=[[],[],[]];let V=[0,0,0];const Q=()=>{const M=0-t,ue=[];for(let fe=0;fe<o;fe++){const u=fe/(o-1),$=0-u*M,ne=u*5*2*Math.PI,ge=90*(.8+.2*Math.sin(ne*2)),h=new Ie(ge*Math.cos(ne),ge*Math.sin(ne),$);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath points",{t:u,z:$,projectMaxZ:e}),ue.push(h)}E=new Gn(ue);const S=new ao().setFromPoints(E.getPoints(200));w=new Un(S,new Rt({color:16711935,linewidth:2,visible:!1})),p.add(w);const Z=[];for(let fe=0;fe<o;fe++){const u=fe/(o-1),$=0-u*M,ne=u*3*2*Math.PI,ge=60*(.8+.2*Math.sin(ne*4)),h=new Ie(ge*Math.cos(ne),ge*Math.sin(ne),$);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath2 points",{t:u,z:$,projectMaxZ:e}),Z.push(h)}v=new Gn(Z);const he=new ao().setFromPoints(v.getPoints(200));T=new Un(he,new Rt({color:65535,linewidth:2,visible:!1})),p.add(T);const ce=[];for(let fe=0;fe<o;fe++){const u=fe/(o-1),$=0-u*M,ne=u*7*2*Math.PI,ge=100,h=90,c=.1*Math.sin(ne),i=new Ie(ge*(1+c)*Math.cos(ne),h*(1-c)*Math.sin(ne),$);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:u,z:$,projectMaxZ:e}),ce.push(i)}g=new Gn(ce);const le=new ao().setFromPoints(g.getPoints(200));y=new Un(le,new Rt({color:16776960,linewidth:2,visible:!1})),p.add(y);const A=[16711680,65280,255],R=new Ro(s,s,s);R.attributes.color&&delete R.attributes.color;for(let fe=0;fe<3;fe++){const u=new gt;u.opacity=1,u.renderOrder=1,L[fe]=u,p.add(u);for(let $=0;$<x;$++){const ne=new ut({color:A[fe],transparent:!0,opacity:0,blending:jr,fog:!0,depthWrite:!1}),ge=new Be(R,ne);ge.renderOrder=1,ge.visible=!1,u.add(ge),J[fe][$]=ge,N[fe][$]=0,C[fe][$]=!1}}},k=M=>{const ue=[E,v,g][M],S=ue.getLength(),Z=C[M].filter(ce=>ce).length;if(x-Z>=l){let ce=0;for(let le=0;le<l;le++){const A=C[M].findIndex(h=>!h);if(A===-1){console.warn(`No available chasers for path ${M}, emitted ${ce}/${l}`);break}const R=ce/(l-1),fe=.05+(1-.05)*Math.pow(R,3),u=new ut({color:[16711680,65280,255][M],transparent:!0,opacity:fe,blending:Zt,fog:!0,depthWrite:!1});J[M][A].material=u,J[M][A].visible=!0;const $=ce*U;N[M][A]=$,C[M][A]=!0;const ne=$/S,ge=ue.getPointAt(ne);J[M][A].position.copy(ge),ce++}}},q=M=>{const ue=performance.now()/1e3,S=[E,v,g];for(let Z=0;Z<3;Z++){ue-V[Z]>=I[Z]&&(k(Z),V[Z]=ue);const he=S[Z],ce=he.getLength(),le=f*M;for(let A=0;A<x;A++)if(C[Z][A]){N[Z][A]+=le;const R=N[Z][A]/ce;if(R>=1)J[Z][A].visible=!1,C[Z][A]=!1,N[Z][A]=0;else{const fe=he.getPointAt(R);J[Z][A].position.copy(fe)}}}};return Q(),{chaserPath:E,chaserPath2:v,chaserPath3:g,updateChasers:q,dispose:()=>{p.remove(w),p.remove(T),p.remove(y),w.geometry.dispose(),w.material.dispose(),T.geometry.dispose(),T.material.dispose(),y.geometry.dispose(),y.material.dispose(),L.forEach(M=>{M.children.forEach(ue=>{ue.geometry.dispose(),ue.material.dispose()}),p.remove(M)})}}}class Li extends Xs{constructor(e){super(e)}load(e,n,t,o){const s=this,l=new js(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){const x=s.parse(JSON.parse(f));n&&n(x)},t,o)}parse(e){return new Bi(e)}}class Bi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=zi(e,n,this.data);for(let s=0,l=o.length;s<l;s++)t.push(...o[s].toShapes());return t}}function zi(p,e,n){const t=Array.from(p),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,l=[];let f=0,x=0;for(let I=0;I<t.length;I++){const U=t[I];if(U===`
`)f=0,x-=s;else{const E=Ni(U,o,f,x,n);f+=E.offsetX,l.push(E.path)}}return l}function Ni(p,e,n,t,o){const s=o.glyphs[p]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+p+'" does not exists in font family '+o.familyName+".");return}const l=new no;let f,x,I,U,E,v,g,w;if(s.o){const T=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,L=T.length;y<L;)switch(T[y++]){case"m":f=T[y++]*e+n,x=T[y++]*e+t,l.moveTo(f,x);break;case"l":f=T[y++]*e+n,x=T[y++]*e+t,l.lineTo(f,x);break;case"q":I=T[y++]*e+n,U=T[y++]*e+t,E=T[y++]*e+n,v=T[y++]*e+t,l.quadraticCurveTo(E,v,I,U);break;case"b":I=T[y++]*e+n,U=T[y++]*e+t,E=T[y++]*e+n,v=T[y++]*e+t,g=T[y++]*e+n,w=T[y++]*e+t,l.bezierCurveTo(E,v,g,w,I,U);break}}return{offsetX:s.ha*e,path:l}}function Hi(p="/fonts/Poppins_Regular.json"){const e=Kt(null),n=Kt(0),t=Kt(!1),o=()=>new Promise((l,f)=>{new Li().load(p,I=>{e.value=I,n.value=100,t.value=!0,l(I)},I=>{I.lengthComputable&&(n.value=I.loaded/I.total*100)},I=>{n.value=100,t.value=!0,f(I)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const Fi={class:"preloader"},Gi={class:"progress-label"},Ui=cs({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>(Dn(),Us("div",Fi,[ho("div",Gi,Mr(Math.round(e.progress))+"%",1)]))}}),Wi=$s(Ui,[["__scopeId","data-v-e5eadefa"]]),Hs=250,vn=500,No=-500,$n=-520,Fs=-720,Gs=4e3,Yi=cs({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){Oe.registerPlugin(Re);const e=p,n=Vs();n.projects=e.projects;const t=rn(),o={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},s=Kt(null),l=Kt(null),f=Kt(!1),x=Kt(0),I=Kt(!1),U=Kt(!0),E=new Map;let v,g,w,T,y,L,J,N=null,C=null,V=null,Q=null,k=null,q=[],ee=null,M=null,ue=0,S=null,Z,he=null;const ce=Hi("/fonts/Poppins_Regular.json"),le=()=>{const $=s.value?s.value.getBoundingClientRect().width:window.innerWidth,ne=window.innerHeight,ge=t.isMobile?.75:1,h=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;w.setSize($*ge,ne*ge),w.setPixelRatio(h),T.setSize($*ge,ne*ge),g.aspect=$/ne,g.updateProjectionMatrix(),w.domElement.style.width=`${$}px`,w.domElement.style.height=`${ne}px`},A=$=>E.has($)?Promise.resolve(E.get($)):new Promise((ne,ge)=>{new Kr().load($,c=>{c.encoding=void 0,E.set($,c),ne(c)},void 0,c=>ge(c))}),R=async()=>{v=new Vr,v.background=new Et(0),v.fog=new qr(0,700,Gs),g=new Zr(t.isMobile?95:75,window.innerWidth/window.innerHeight,1,Gs+6e3),g.position.set(0,0,0),g.lookAt(0,0,1e3),w=new $r({antialias:!0}),t.isMobile?w.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):w.setPixelRatio(window.devicePixelRatio),w.toneMapping=Qr,w.toneMappingExposure=1,w.outputEncoding=void 0,T=new Pi(w);const $=new Ci(v,g);if(T.addPass($),t.isMobile?y=new To(new Le(window.innerWidth,window.innerHeight),1,.1,0):y=new To(new Le(window.innerWidth,window.innerHeight),1.6,.2,0),y.renderToScreen=!0,T.addPass(y),s.value)s.value.appendChild(w.domElement),w.domElement.style.opacity="0";else return;L=new on,L.dom.style.position="fixed",L.dom.style.top="0px",L.dom.style.left="0px",L.dom.style.zIndex="1000",document.body.appendChild(L.dom);const ge=e.projects.filter(i=>i.keyart).length+2+1;let h=0;const c=()=>{h++;const i=h/ge*100,r=ce.loadingProgress.value;x.value=(i+r/ge)/(1+1/ge),h===ge&&ce.isLoaded.value&&(f.value=!0)};await ce.initialize().then(()=>{c()}).catch(i=>{console.error("Font initialization failed:",i),c()}),await A(e.projectGridFile).then(()=>c()).catch(()=>c()),await A(e.projectGridFile2).then(()=>c()).catch(()=>c());for(const i of e.projects)i.keyart?await A(i.keyart).then(()=>c()).catch(()=>c()):c();S=ki(v,{CUBE_SIZE:Hs,CUBE_SPACING:vn,FIRST_CUBE_Z:No},e.projects,e.projectGridFile,e.projectGridFile2,o,E,ce.font);try{if(await S.getInitializedData().then(({maxZ:i,updateCubeColors:r,projectCubes:P})=>{if(Z=i,Z===void 0||isNaN(Z))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:G}=Ai(v,ce.font,{CUBE_SIZE:Hs,FIRST_CUBE_Z:No},o);q=[...G,...P],ee=r}),o.showCars){const{cityGroup:i,updateParticles:r,dispose:P}=Di(v,v,Z,o);J=r,k=P}if(o.showStarfield){const{dispose:i}=Ri(v,g,Z);N=i}if(o.showChasers){const{dispose:i,updateChasers:r}=Oi(v,Z);V=i,Q=r}le()}catch(i){console.error("Error initializing project cubes:",i),Z=No-(e.projects.length+1)*vn}},fe=($=0)=>{if(M=requestAnimationFrame(fe),w&&T){const ne=($-ue)/1e3;ue=$,J(ne),Q&&Q(ne),S!=null&&S.updateClickHereParticles&&S.updateClickHereParticles(g,ne);const ge=4e3,h=1e3,c=Math.abs(g.position.z-Z);g.far=Math.max(ge+h,c),g.updateProjectionMatrix();const i=Fs-$n;let r=0;g.position.z>=$n?r=0:g.position.z<=Fs?r=1:r=(g.position.z-$n)/i,t.isMobile?y.strength=Ze.lerp(1.3,0,r):y.strength=Ze.lerp(1.6,.125,r),T.render()}L.update()};Pr(()=>{R().then(()=>{if(f.value){M=requestAnimationFrame(fe);let $=null;const ne=S.getInitializedData().then(({projectCubes:h})=>{h.forEach(i=>{i.userData.isActive=!0});const c=No-(e.projects.length-1)*vn;if(g.position.set(0,0,5e3),g.lookAt(0,0,c),g.updateProjectionMatrix(),ee(g),T.render(),Re.getAll().forEach(i=>i.kill()),q.length&&ee){const i=Ii(v,g,l,q,ee,{CUBE_SPACING:vn,FIRST_CUBE_Z:No},{scrub:t.isMobile?!1:1},o,L);$=i.setReverting,he=i.isScrollTriggerActive}w&&C===null&&(C=S.setupInteractivity(g,w.domElement,w,i=>{$&&$(i)},he)),window.scrollTo({top:0,behavior:"auto"})}),ge=()=>{ne.then(()=>{U.value=!1,g.position.set(0,0,5e3),g.updateProjectionMatrix(),Oe.to(w.domElement,{opacity:1,duration:.5,ease:"power4.out"});const h={z:5e3};Oe.to(h,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{g.position.z=h.z,g.updateProjectionMatrix()},onComplete:()=>{g.position.z=0,I.value=!0}})})};Oe.delayedCall(.5,ge)}}).catch($=>{console.error("Initialization failed:",$)}),window.addEventListener("resize",u)}),Cr(()=>{M!==null&&cancelAnimationFrame(M),C&&C(),window.removeEventListener("resize",u),Re.getAll().forEach($=>$.kill()),w.dispose(),T.dispose(),v.clear(),document.body.removeChild(L.dom),N&&N(),V&&V(),k&&k()});const u=()=>{le(),Re.refresh()};return($,ne)=>(Dn(),Us("section",{ref_key:"wrapper",ref:l,class:"wrapper"},[Ho(Er,{name:"fade"},{default:Ws(()=>[U.value?(Dn(),Ys(Wi,{key:0,progress:x.value},null,8,["progress"])):Sr("",!0)]),_:1}),ho("div",{ref_key:"tunnelWrapper",ref:s,class:"tunnel-wrapper"},null,512)],512))}}),Xi=$s(Yi,[["__scopeId","data-v-671de7de"]]),ji={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Vi={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},qi={class:"overflow-hidden"},Ji=cs({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(p){return(e,n)=>(Dn(),Ys(ti,null,{default:Ws(()=>[Ho(Ar(kr),{title:"Welcome"}),ho("div",ji,[ho("nav",Vi,[Ho(Jr)]),ho("div",qi,[Ho(Xi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),n[0]||(n[0]=ho("div",{class:"flex justify-center items-center"},null,-1)),n[1]||(n[1]=ho("div",{class:"flex justify-center items-center"},null,-1)),Ho(ei)])]),_:1}))}});export{Ji as default};
