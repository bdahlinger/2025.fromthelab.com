import{W as Fr,d as $t,I as gs,e as uo,o as Qt,a as Lt,t as Qs,x as Gr,y as Ur,b as Yo,w as Ks,c as Js,f as Wr,T as Yr,n as os,j as Ms,u as Vr,m as jr,F as Cs,h as Ps,g as Xr}from"./app-BXDOuTys.js";import{c as Ye,O as qr,f as ho,F as $o,k as vo,U as ns,V as Be,l as Sn,H as En,N as Zr,C as $r,m as At,e as je,b as Jt,n as lt,E as Qr,o as er,p as tr,q as ko,r as Kr,s as Jr,t as ei,P as Yn,v as ss,w as lo,G as Ft,x as ti,a as Yt,L as zt,g as ze,y as Ke,B as Ho,z as Qo,h as gt,u as or,R as oi,I as nr,J as ni,K as ao,Q as sr,T as rr,X as Ss,Y as si,Z as ri,_ as Vn,$ as Es,a0 as ii,a1 as jn,a2 as Xn,a3 as ai,S as li,a4 as ci,a5 as ui,W as fi,a6 as pi,a7 as di,d as dn,i as hi,j as gi}from"./GlobalFooter-hgLZ9C6n.js";import{u as fn,_ as mi}from"./App.vue_vue_type_script_setup_true_lang-1o4XReuQ.js";import{_ as ir}from"./_plugin-vue_export-helper-DlAUqK2U.js";function yi(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function xi(p,e,n){return e&&yi(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var wt,An,Ut,fo,po,Bo,ar,wo,Ko,lr,so,qt,cr,ur=function(){return wt||typeof window<"u"&&(wt=window.gsap)&&wt.registerPlugin&&wt},fr=1,Lo=[],Ue=[],to=[],Jo=Date.now,rs=function(e,n){return n},wi=function(){var e=Ko.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,Ue),o.push.apply(o,to),Ue=t,to=o,rs=function(a,c){return n[a](c)}},go=function(e,n){return~to.indexOf(e)&&to[to.indexOf(e)+1][n]},en=function(e){return!!~lr.indexOf(e)},St=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Pt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},hn="scrollLeft",gn="scrollTop",is=function(){return so&&so.isPressed||Ue.cache++},Bn=function(e,n){var t=function o(s){if(s||s===0){fr&&(Ut.history.scrollRestoration="manual");var a=so&&so.isPressed;s=o.v=Math.round(s)||(so&&so.iOS?1:0),e(s),o.cacheID=Ue.cache,a&&rs("ss",s)}else(n||Ue.cache!==o.cacheID||rs("ref"))&&(o.cacheID=Ue.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Rt={s:hn,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Bn(function(p){return arguments.length?Ut.scrollTo(p,dt.sc()):Ut.pageXOffset||fo[hn]||po[hn]||Bo[hn]||0})},dt={s:gn,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Rt,sc:Bn(function(p){return arguments.length?Ut.scrollTo(Rt.sc(),p):Ut.pageYOffset||fo[gn]||po[gn]||Bo[gn]||0})},Bt=function(e,n){return(n&&n._ctx&&n._ctx.selector||wt.utils.toArray)(e)[0]||(typeof e=="string"&&wt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},mo=function(e,n){var t=n.s,o=n.sc;en(e)&&(e=fo.scrollingElement||po);var s=Ue.indexOf(e),a=o===dt.sc?1:2;!~s&&(s=Ue.push(e)-1),Ue[s+a]||St(e,"scroll",is);var c=Ue[s+a],v=c||(Ue[s+a]=Bn(go(e,t),!0)||(en(e)?o:Bn(function(I){return arguments.length?e[t]=I:e[t]})));return v.target=e,c||(v.smooth=wt.getProperty(e,"scrollBehavior")==="smooth"),v},as=function(e,n,t){var o=e,s=e,a=Jo(),c=a,v=n||50,I=Math.max(500,v*3),H=function(T,M){var x=Jo();M||x-a>v?(s=o,o=T,c=a,a=x):t?o+=T:o=s+(T-s)/(x-c)*(a-c)},E=function(){s=o=t?0:o,c=a=0},A=function(T){var M=c,x=s,U=Jo();return(T||T===0)&&T!==o&&H(T),a===c||U-c>I?0:(o+(t?x:-x))/((t?U:a)-M)*1e3};return{update:H,reset:E,getVelocity:A}},Go=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},As=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},pr=function(){Ko=wt.core.globals().ScrollTrigger,Ko&&Ko.core&&wi()},dr=function(e){return wt=e||ur(),!An&&wt&&typeof document<"u"&&document.body&&(Ut=window,fo=document,po=fo.documentElement,Bo=fo.body,lr=[Ut,fo,po,Bo],wt.utils.clamp,cr=wt.core.context||function(){},wo="onpointerenter"in Bo?"pointer":"mouse",ar=rt.isTouch=Ut.matchMedia&&Ut.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ut||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,qt=rt.eventTypes=("ontouchstart"in po?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in po?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return fr=0},500),pr(),An=1),An};Rt.op=dt;Ue.cache=0;var rt=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){An||dr(wt)||console.warn("Please gsap.registerPlugin(Observer)"),Ko||pr();var o=t.tolerance,s=t.dragMinimum,a=t.type,c=t.target,v=t.lineHeight,I=t.debounce,H=t.preventDefault,E=t.onStop,A=t.onStopDelay,m=t.ignore,T=t.wheelSpeed,M=t.event,x=t.onDragStart,U=t.onDragEnd,Z=t.onDrag,z=t.onPress,P=t.onRelease,W=t.onRight,X=t.onLeft,R=t.onUp,j=t.onDown,$=t.onChangeX,C=t.onChangeY,re=t.onChange,D=t.onToggleX,Y=t.onToggleY,te=t.onHover,ie=t.onHoverEnd,ne=t.onMove,B=t.ignoreCheck,O=t.isNormalizer,ue=t.onGestureStart,f=t.onGestureEnd,ge=t.onWheel,me=t.onEnable,Pe=t.onDisable,g=t.onClick,u=t.scrollSpeed,i=t.capture,r=t.allowClicks,b=t.lockAxis,k=t.onLockAxis;this.target=c=Bt(c)||po,this.vars=t,m&&(m=wt.utils.toArray(m)),o=o||1e-9,s=s||0,T=T||1,u=u||1,a=a||"wheel,touch,pointer",I=I!==!1,v||(v=parseFloat(Ut.getComputedStyle(Bo).lineHeight)||22);var y,_,N,S,w,L,Q,d=this,h=0,l=0,J=t.passive||!H&&t.passive!==!1,fe=mo(c,Rt),Xe=mo(c,dt),Ze=fe(),Fe=Xe(),Ve=~a.indexOf("touch")&&!~a.indexOf("pointer")&&qt[0]==="pointerdown",xt=en(c),Je=c.ownerDocument||fo,tt=[0,0,0],it=[0,0,0],V=0,ye=function(){return V=Jo()},q=function(pe,Ae){return(d.event=pe)&&m&&~m.indexOf(pe.target)||Ae&&Ve&&pe.pointerType!=="touch"||B&&B(pe,Ae)},Se=function(){d._vx.reset(),d._vy.reset(),_.pause(),E&&E(d)},xe=function(){var pe=d.deltaX=As(tt),Ae=d.deltaY=As(it),K=Math.abs(pe)>=o,ce=Math.abs(Ae)>=o;re&&(K||ce)&&re(d,pe,Ae,tt,it),K&&(W&&d.deltaX>0&&W(d),X&&d.deltaX<0&&X(d),$&&$(d),D&&d.deltaX<0!=h<0&&D(d),h=d.deltaX,tt[0]=tt[1]=tt[2]=0),ce&&(j&&d.deltaY>0&&j(d),R&&d.deltaY<0&&R(d),C&&C(d),Y&&d.deltaY<0!=l<0&&Y(d),l=d.deltaY,it[0]=it[1]=it[2]=0),(S||N)&&(ne&&ne(d),N&&(x&&N===1&&x(d),Z&&Z(d),N=0),S=!1),L&&!(L=!1)&&k&&k(d),w&&(ge(d),w=!1),y=0},be=function(pe,Ae,K){tt[K]+=pe,it[K]+=Ae,d._vx.update(pe),d._vy.update(Ae),I?y||(y=requestAnimationFrame(xe)):xe()},ke=function(pe,Ae){b&&!Q&&(d.axis=Q=Math.abs(pe)>Math.abs(Ae)?"x":"y",L=!0),Q!=="y"&&(tt[2]+=pe,d._vx.update(pe,!0)),Q!=="x"&&(it[2]+=Ae,d._vy.update(Ae,!0)),I?y||(y=requestAnimationFrame(xe)):xe()},oe=function(pe){if(!q(pe,1)){pe=Go(pe,H);var Ae=pe.clientX,K=pe.clientY,ce=Ae-d.x,G=K-d.y,F=d.isDragging;d.x=Ae,d.y=K,(F||(ce||G)&&(Math.abs(d.startX-Ae)>=s||Math.abs(d.startY-K)>=s))&&(N=F?2:1,F||(d.isDragging=!0),ke(ce,G))}},ve=d.onPress=function(ee){q(ee,1)||ee&&ee.button||(d.axis=Q=null,_.pause(),d.isPressed=!0,ee=Go(ee),h=l=0,d.startX=d.x=ee.clientX,d.startY=d.y=ee.clientY,d._vx.reset(),d._vy.reset(),St(O?c:Je,qt[1],oe,J,!0),d.deltaX=d.deltaY=0,z&&z(d))},le=d.onRelease=function(ee){if(!q(ee,1)){Pt(O?c:Je,qt[1],oe,!0);var pe=!isNaN(d.y-d.startY),Ae=d.isDragging,K=Ae&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),ce=Go(ee);!K&&pe&&(d._vx.reset(),d._vy.reset(),H&&r&&wt.delayedCall(.08,function(){if(Jo()-V>300&&!ee.defaultPrevented){if(ee.target.click)ee.target.click();else if(Je.createEvent){var G=Je.createEvent("MouseEvents");G.initMouseEvent("click",!0,!0,Ut,1,ce.screenX,ce.screenY,ce.clientX,ce.clientY,!1,!1,!1,!1,0,null),ee.target.dispatchEvent(G)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,E&&Ae&&!O&&_.restart(!0),N&&xe(),U&&Ae&&U(d),P&&P(d,K)}},Te=function(pe){return pe.touches&&pe.touches.length>1&&(d.isGesturing=!0)&&ue(pe,d.isDragging)},We=function(){return(d.isGesturing=!1)||f(d)},$e=function(pe){if(!q(pe)){var Ae=fe(),K=Xe();be((Ae-Ze)*u,(K-Fe)*u,1),Ze=Ae,Fe=K,E&&_.restart(!0)}},Ne=function(pe){if(!q(pe)){pe=Go(pe,H),ge&&(w=!0);var Ae=(pe.deltaMode===1?v:pe.deltaMode===2?Ut.innerHeight:1)*T;be(pe.deltaX*Ae,pe.deltaY*Ae,0),E&&!O&&_.restart(!0)}},bt=function(pe){if(!q(pe)){var Ae=pe.clientX,K=pe.clientY,ce=Ae-d.x,G=K-d.y;d.x=Ae,d.y=K,S=!0,E&&_.restart(!0),(ce||G)&&ke(ce,G)}},vt=function(pe){d.event=pe,te(d)},ht=function(pe){d.event=pe,ie(d)},It=function(pe){return q(pe)||Go(pe,H)&&g(d)};_=d._dc=wt.delayedCall(A||.25,Se).pause(),d.deltaX=d.deltaY=0,d._vx=as(0,50,!0),d._vy=as(0,50,!0),d.scrollX=fe,d.scrollY=Xe,d.isDragging=d.isGesturing=d.isPressed=!1,cr(this),d.enable=function(ee){return d.isEnabled||(St(xt?Je:c,"scroll",is),a.indexOf("scroll")>=0&&St(xt?Je:c,"scroll",$e,J,i),a.indexOf("wheel")>=0&&St(c,"wheel",Ne,J,i),(a.indexOf("touch")>=0&&ar||a.indexOf("pointer")>=0)&&(St(c,qt[0],ve,J,i),St(Je,qt[2],le),St(Je,qt[3],le),r&&St(c,"click",ye,!0,!0),g&&St(c,"click",It),ue&&St(Je,"gesturestart",Te),f&&St(Je,"gestureend",We),te&&St(c,wo+"enter",vt),ie&&St(c,wo+"leave",ht),ne&&St(c,wo+"move",bt)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=S=N=!1,d._vx.reset(),d._vy.reset(),Ze=fe(),Fe=Xe(),ee&&ee.type&&ve(ee),me&&me(d)),d},d.disable=function(){d.isEnabled&&(Lo.filter(function(ee){return ee!==d&&en(ee.target)}).length||Pt(xt?Je:c,"scroll",is),d.isPressed&&(d._vx.reset(),d._vy.reset(),Pt(O?c:Je,qt[1],oe,!0)),Pt(xt?Je:c,"scroll",$e,i),Pt(c,"wheel",Ne,i),Pt(c,qt[0],ve,i),Pt(Je,qt[2],le),Pt(Je,qt[3],le),Pt(c,"click",ye,!0),Pt(c,"click",It),Pt(Je,"gesturestart",Te),Pt(Je,"gestureend",We),Pt(c,wo+"enter",vt),Pt(c,wo+"leave",ht),Pt(c,wo+"move",bt),d.isEnabled=d.isPressed=d.isDragging=!1,Pe&&Pe(d))},d.kill=d.revert=function(){d.disable();var ee=Lo.indexOf(d);ee>=0&&Lo.splice(ee,1),so===d&&(so=0)},Lo.push(d),O&&en(c)&&(so=d),d.enable(M)},xi(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();rt.version="3.12.7";rt.create=function(p){return new rt(p)};rt.register=dr;rt.getAll=function(){return Lo.slice()};rt.getById=function(p){return Lo.filter(function(e){return e.vars.id===p})[0]};ur()&&wt.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var he,Io,Ge,et,Gt,Qe,ms,zn,cn,tn,Vo,mn,Tt,Un,ls,kt,ks,Ds,Oo,hr,qn,gr,Et,cs,mr,yr,co,us,ys,zo,xs,Nn,fs,Zn,yn=1,Mt=Date.now,$n=Mt(),Xt=0,jo=0,Rs=function(e,n,t){var o=Ht(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Is=function(e,n){return n&&(!Ht(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},bi=function p(){return jo&&requestAnimationFrame(p)},Os=function(){return Un=1},Ls=function(){return Un=0},Kt=function(e){return e},Xo=function(e){return Math.round(e*1e5)/1e5||0},xr=function(){return typeof window<"u"},wr=function(){return he||xr()&&(he=window.gsap)&&he.registerPlugin&&he},Po=function(e){return!!~ms.indexOf(e)},br=function(e){return(e==="Height"?xs:Ge["inner"+e])||Gt["client"+e]||Qe["client"+e]},vr=function(e){return go(e,"getBoundingClientRect")||(Po(e)?function(){return On.width=Ge.innerWidth,On.height=xs,On}:function(){return no(e)})},vi=function(e,n,t){var o=t.d,s=t.d2,a=t.a;return(a=go(e,"getBoundingClientRect"))?function(){return a()[o]}:function(){return(n?br(s):e["client"+s])||0}},_i=function(e,n){return!n||~to.indexOf(e)?vr(e):function(){return On}},eo=function(e,n){var t=n.s,o=n.d2,s=n.d,a=n.a;return Math.max(0,(t="scroll"+o)&&(a=go(e,t))?a()-vr(e)()[s]:Po(e)?(Gt[t]||Qe[t])-br(o):e[t]-e["offset"+o])},xn=function(e,n){for(var t=0;t<Oo.length;t+=3)(!n||~n.indexOf(Oo[t+1]))&&e(Oo[t],Oo[t+1],Oo[t+2])},Ht=function(e){return typeof e=="string"},Ct=function(e){return typeof e=="function"},qo=function(e){return typeof e=="number"},bo=function(e){return typeof e=="object"},Uo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},Qn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},Do=Math.abs,_r="left",Tr="top",ws="right",bs="bottom",To="width",Mo="height",on="Right",nn="Left",sn="Top",rn="Bottom",ct="padding",Vt="margin",Fo="Width",vs="Height",pt="px",jt=function(e){return Ge.getComputedStyle(e)},Ti=function(e){var n=jt(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Bs=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},no=function(e,n){var t=n&&jt(e)[ls]!=="matrix(1, 0, 0, 1, 0, 0)"&&he.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Hn=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},Mr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},Mi=function(e){return function(n){return he.utils.snap(Mr(e),n)}},_s=function(e){var n=he.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,a){a===void 0&&(a=.001);var c;if(!s)return n(o);if(s>0){for(o-=a,c=0;c<t.length;c++)if(t[c]>=o)return t[c];return t[c-1]}else for(c=t.length,o+=a;c--;)if(t[c]<=o)return t[c];return t[0]}:function(o,s,a){a===void 0&&(a=.001);var c=n(o);return!s||Math.abs(c-o)<a||c-o<0==s<0?c:n(s<0?o-e:o+e)}},Ci=function(e){return function(n,t){return _s(Mr(e))(n,t.direction)}},wn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},yt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},mt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},bn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},zs={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},vn={toggleActions:"play",anticipatePin:0},Fn={top:0,left:0,center:.5,bottom:1,right:1},kn=function(e,n){if(Ht(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Fn?Fn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},_n=function(e,n,t,o,s,a,c,v){var I=s.startColor,H=s.endColor,E=s.fontSize,A=s.indent,m=s.fontWeight,T=et.createElement("div"),M=Po(t)||go(t,"pinType")==="fixed",x=e.indexOf("scroller")!==-1,U=M?Qe:t,Z=e.indexOf("start")!==-1,z=Z?I:H,P="border-color:"+z+";font-size:"+E+";color:"+z+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return P+="position:"+((x||v)&&M?"fixed;":"absolute;"),(x||v||!M)&&(P+=(o===dt?ws:bs)+":"+(a+parseFloat(A))+"px;"),c&&(P+="box-sizing:border-box;text-align:left;width:"+c.offsetWidth+"px;"),T._isStart=Z,T.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),T.style.cssText=P,T.innerText=n||n===0?e+"-"+n:e,U.children[0]?U.insertBefore(T,U.children[0]):U.appendChild(T),T._offset=T["offset"+o.op.d2],Dn(T,0,o,Z),T},Dn=function(e,n,t,o){var s={display:"block"},a=t[o?"os2":"p2"],c=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+a+Fo]=1,s["border"+c+Fo]=0,s[t.p]=n+"px",he.set(e,s)},He=[],ps={},un,Ns=function(){return Mt()-Xt>34&&(un||(un=requestAnimationFrame(ro)))},Ro=function(){(!Et||!Et.isPressed||Et.startX>Qe.clientWidth)&&(Ue.cache++,Et?un||(un=requestAnimationFrame(ro)):ro(),Xt||Eo("scrollStart"),Xt=Mt())},Kn=function(){yr=Ge.innerWidth,mr=Ge.innerHeight},Zo=function(e){Ue.cache++,(e===!0||!Tt&&!gr&&!et.fullscreenElement&&!et.webkitFullscreenElement&&(!cs||yr!==Ge.innerWidth||Math.abs(Ge.innerHeight-mr)>Ge.innerHeight*.25))&&zn.restart(!0)},So={},Pi=[],Cr=function p(){return mt(Ie,"scrollEnd",p)||_o(!0)},Eo=function(e){return So[e]&&So[e].map(function(n){return n()})||Pi},Nt=[],Pr=function(e){for(var n=0;n<Nt.length;n+=5)(!e||Nt[n+4]&&Nt[n+4].query===e)&&(Nt[n].style.cssText=Nt[n+1],Nt[n].getBBox&&Nt[n].setAttribute("transform",Nt[n+2]||""),Nt[n+3].uncache=1)},Ts=function(e,n){var t;for(kt=0;kt<He.length;kt++)t=He[kt],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));Nn=!0,n&&Pr(n),n||Eo("revert")},Sr=function(e,n){Ue.cache++,(n||!Dt)&&Ue.forEach(function(t){return Ct(t)&&t.cacheID++&&(t.rec=0)}),Ht(e)&&(Ge.history.scrollRestoration=ys=e)},Dt,Co=0,Hs,Si=function(){if(Hs!==Co){var e=Hs=Co;requestAnimationFrame(function(){return e===Co&&_o(!0)})}},Er=function(){Qe.appendChild(zo),xs=!Et&&zo.offsetHeight||Ge.innerHeight,Qe.removeChild(zo)},Fs=function(e){return cn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},_o=function(e,n){if(Gt=et.documentElement,Qe=et.body,ms=[Ge,et,Gt,Qe],Xt&&!e&&!Nn){yt(Ie,"scrollEnd",Cr);return}Er(),Dt=Ie.isRefreshing=!0,Ue.forEach(function(o){return Ct(o)&&++o.cacheID&&(o.rec=o())});var t=Eo("refreshInit");hr&&Ie.sort(),n||Ts(),Ue.forEach(function(o){Ct(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),He.slice(0).forEach(function(o){return o.refresh()}),Nn=!1,He.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",a=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-a),o.refresh()}}),fs=1,Fs(!0),He.forEach(function(o){var s=eo(o.scroller,o._dir),a=o.vars.end==="max"||o._endClamp&&o.end>s,c=o._startClamp&&o.start>=s;(a||c)&&o.setPositions(c?s-1:o.start,a?Math.max(c?s:o.start+1,s):o.end,!0)}),Fs(!1),fs=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),Ue.forEach(function(o){Ct(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),Sr(ys,1),zn.pause(),Co++,Dt=2,ro(2),He.forEach(function(o){return Ct(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Dt=Ie.isRefreshing=!1,Eo("refresh")},ds=0,Rn=1,an,ro=function(e){if(e===2||!Dt&&!Nn){Ie.isUpdating=!0,an&&an.update(0);var n=He.length,t=Mt(),o=t-$n>=50,s=n&&He[0].scroll();if(Rn=ds>s?-1:1,Dt||(ds=s),o&&(Xt&&!Un&&t-Xt>200&&(Xt=0,Eo("scrollEnd")),Vo=$n,$n=t),Rn<0){for(kt=n;kt-- >0;)He[kt]&&He[kt].update(0,o);Rn=1}else for(kt=0;kt<n;kt++)He[kt]&&He[kt].update(0,o);Ie.isUpdating=!1}un=0},hs=[_r,Tr,bs,ws,Vt+rn,Vt+on,Vt+sn,Vt+nn,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],In=hs.concat([To,Mo,"boxSizing","max"+Fo,"max"+vs,"position",Vt,ct,ct+sn,ct+on,ct+rn,ct+nn]),Ei=function(e,n,t){No(t);var o=e._gsap;if(o.spacerIsNative)No(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},Jn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=hs.length,a=n.style,c=e.style,v;s--;)v=hs[s],a[v]=t[v];a.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(a.display="inline-block"),c[bs]=c[ws]="auto",a.flexBasis=t.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[To]=Hn(e,Rt)+pt,a[Mo]=Hn(e,dt)+pt,a[ct]=c[Vt]=c[Tr]=c[_r]="0",No(o),c[To]=c["max"+Fo]=t[To],c[Mo]=c["max"+vs]=t[Mo],c[ct]=t[ct],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},Ai=/([A-Z])/g,No=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,a;for((e.t._gsap||he.core.getCache(e.t)).uncache=1;o<t;o+=2)a=e[o+1],s=e[o],a?n[s]=a:n[s]&&n.removeProperty(s.replace(Ai,"-$1").toLowerCase())}},Tn=function(e){for(var n=In.length,t=e.style,o=[],s=0;s<n;s++)o.push(In[s],t[In[s]]);return o.t=e,o},ki=function(e,n,t){for(var o=[],s=e.length,a=t?8:0,c;a<s;a+=2)c=e[a],o.push(c,c in n?n[c]:e[a+1]);return o.t=e.t,o},On={left:0,top:0},Gs=function(e,n,t,o,s,a,c,v,I,H,E,A,m,T){Ct(e)&&(e=e(v)),Ht(e)&&e.substr(0,3)==="max"&&(e=A+(e.charAt(4)==="="?kn("0"+e.substr(3),t):0));var M=m?m.time():0,x,U,Z;if(m&&m.seek(0),isNaN(e)||(e=+e),qo(e))m&&(e=he.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,A,e)),c&&Dn(c,t,o,!0);else{Ct(n)&&(n=n(v));var z=(e||"0").split(" "),P,W,X,R;Z=Bt(n,v)||Qe,P=no(Z)||{},(!P||!P.left&&!P.top)&&jt(Z).display==="none"&&(R=Z.style.display,Z.style.display="block",P=no(Z),R?Z.style.display=R:Z.style.removeProperty("display")),W=kn(z[0],P[o.d]),X=kn(z[1]||"0",t),e=P[o.p]-I[o.p]-H+W+s-X,c&&Dn(c,X,o,t-X<20||c._isStart&&X>20),t-=t-X}if(T&&(v[T]=e||-.001,e<0&&(e=0)),a){var j=e+t,$=a._isStart;x="scroll"+o.d2,Dn(a,j,o,$&&j>20||!$&&(E?Math.max(Qe[x],Gt[x]):a.parentNode[x])<=j+1),E&&(I=no(c),E&&(a.style[o.op.p]=I[o.op.p]-o.op.m-a._offset+pt))}return m&&Z&&(x=no(Z),m.seek(A),U=no(Z),m._caScrollDist=x[o.p]-U[o.p],e=e/m._caScrollDist*A),m&&m.seek(M),m?e:Math.round(e)},Di=/(webkit|moz|length|cssText|inset)/i,Us=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,a,c;if(n===Qe){e._stOrig=s.cssText,c=jt(e);for(a in c)!+a&&!Di.test(a)&&c[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=c[a]);s.top=t,s.left=o}else s.cssText=e._stOrig;he.core.getCache(e).uncache=1,n.appendChild(e)}},Ar=function(e,n,t){var o=n,s=o;return function(a){var c=Math.round(e());return c!==o&&c!==s&&Math.abs(c-o)>3&&Math.abs(c-s)>3&&(a=c,t&&t()),s=o,o=Math.round(a),o}},Mn=function(e,n,t){var o={};o[n.p]="+="+t,he.set(e,o)},Ws=function(e,n){var t=mo(e,n),o="_scroll"+n.p2,s=function a(c,v,I,H,E){var A=a.tween,m=v.onComplete,T={};I=I||t();var M=Ar(t,I,function(){A.kill(),a.tween=0});return E=H&&E||0,H=H||c-I,A&&A.kill(),v[o]=c,v.inherit=!1,v.modifiers=T,T[o]=function(){return M(I+H*A.ratio+E*A.ratio*A.ratio)},v.onUpdate=function(){Ue.cache++,a.tween&&ro()},v.onComplete=function(){a.tween=0,m&&m.call(A)},A=a.tween=he.to(e,v),A};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},yt(e,"wheel",t.wheelHandler),Ie.isTouch&&yt(e,"touchmove",t.wheelHandler),s},Ie=function(){function p(n,t){Io||p.register(he)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),us(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!jo){this.update=this.refresh=this.kill=Kt;return}t=Bs(Ht(t)||qo(t)||t.nodeType?{trigger:t}:t,vn);var s=t,a=s.onUpdate,c=s.toggleClass,v=s.id,I=s.onToggle,H=s.onRefresh,E=s.scrub,A=s.trigger,m=s.pin,T=s.pinSpacing,M=s.invalidateOnRefresh,x=s.anticipatePin,U=s.onScrubComplete,Z=s.onSnapComplete,z=s.once,P=s.snap,W=s.pinReparent,X=s.pinSpacer,R=s.containerAnimation,j=s.fastScrollEnd,$=s.preventOverlaps,C=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Rt:dt,re=!E&&E!==0,D=Bt(t.scroller||Ge),Y=he.core.getCache(D),te=Po(D),ie=("pinType"in t?t.pinType:go(D,"pinType")||te&&"fixed")==="fixed",ne=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],B=re&&t.toggleActions.split(" "),O="markers"in t?t.markers:vn.markers,ue=te?0:parseFloat(jt(D)["border"+C.p2+Fo])||0,f=this,ge=t.onRefreshInit&&function(){return t.onRefreshInit(f)},me=vi(D,te,C),Pe=_i(D,te),g=0,u=0,i=0,r=mo(D,C),b,k,y,_,N,S,w,L,Q,d,h,l,J,fe,Xe,Ze,Fe,Ve,xt,Je,tt,it,V,ye,q,Se,xe,be,ke,oe,ve,le,Te,We,$e,Ne,bt,vt,ht;if(f._startClamp=f._endClamp=!1,f._dir=C,x*=45,f.scroller=D,f.scroll=R?R.time.bind(R):r,_=r(),f.vars=t,o=o||t.animation,"refreshPriority"in t&&(hr=1,t.refreshPriority===-9999&&(an=f)),Y.tweenScroll=Y.tweenScroll||{top:Ws(D,dt),left:Ws(D,Rt)},f.tweenTo=b=Y.tweenScroll[C.p],f.scrubDuration=function(K){Te=qo(K)&&K,Te?le?le.duration(K):le=he.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Te,paused:!0,onComplete:function(){return U&&U(f)}}):(le&&le.progress(1).kill(),le=0)},o&&(o.vars.lazy=!1,o._initted&&!f.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),f.animation=o.pause(),o.scrollTrigger=f,f.scrubDuration(E),oe=0,v||(v=o.vars.id)),P&&((!bo(P)||P.push)&&(P={snapTo:P}),"scrollBehavior"in Qe.style&&he.set(te?[Qe,Gt]:D,{scrollBehavior:"auto"}),Ue.forEach(function(K){return Ct(K)&&K.target===(te?et.scrollingElement||Gt:D)&&(K.smooth=!1)}),y=Ct(P.snapTo)?P.snapTo:P.snapTo==="labels"?Mi(o):P.snapTo==="labelsDirectional"?Ci(o):P.directional!==!1?function(K,ce){return _s(P.snapTo)(K,Mt()-u<500?0:ce.direction)}:he.utils.snap(P.snapTo),We=P.duration||{min:.1,max:2},We=bo(We)?tn(We.min,We.max):tn(We,We),$e=he.delayedCall(P.delay||Te/2||.1,function(){var K=r(),ce=Mt()-u<500,G=b.tween;if((ce||Math.abs(f.getVelocity())<10)&&!G&&!Un&&g!==K){var F=(K-S)/fe,De=o&&!re?o.totalProgress():F,se=ce?0:(De-ve)/(Mt()-Vo)*1e3||0,Me=he.utils.clamp(-F,1-F,Do(se/2)*se/.185),ae=F+(P.inertia===!1?0:Me),_e,de,Ee=P,Ce=Ee.onStart,we=Ee.onInterrupt,Re=Ee.onComplete;if(_e=y(ae,f),qo(_e)||(_e=ae),de=Math.max(0,Math.round(S+_e*fe)),K<=w&&K>=S&&de!==K){if(G&&!G._initted&&G.data<=Do(de-K))return;P.inertia===!1&&(Me=_e-F),b(de,{duration:We(Do(Math.max(Do(ae-De),Do(_e-De))*.185/se/.05||0)),ease:P.ease||"power3",data:Do(de-K),onInterrupt:function(){return $e.restart(!0)&&we&&we(f)},onComplete:function(){f.update(),g=r(),o&&!re&&(le?le.resetTo("totalProgress",_e,o._tTime/o._tDur):o.progress(_e)),oe=ve=o&&!re?o.totalProgress():f.progress,Z&&Z(f),Re&&Re(f)}},K,Me*fe,de-K-Me*fe),Ce&&Ce(f,b.tween)}}else f.isActive&&g!==K&&$e.restart(!0)}).pause()),v&&(ps[v]=f),A=f.trigger=Bt(A||m!==!0&&m),ht=A&&A._gsap&&A._gsap.stRevert,ht&&(ht=ht(f)),m=m===!0?A:Bt(m),Ht(c)&&(c={targets:A,className:c}),m&&(T===!1||T===Vt||(T=!T&&m.parentNode&&m.parentNode.style&&jt(m.parentNode).display==="flex"?!1:ct),f.pin=m,k=he.core.getCache(m),k.spacer?Xe=k.pinState:(X&&(X=Bt(X),X&&!X.nodeType&&(X=X.current||X.nativeElement),k.spacerIsNative=!!X,X&&(k.spacerState=Tn(X))),k.spacer=Ve=X||et.createElement("div"),Ve.classList.add("pin-spacer"),v&&Ve.classList.add("pin-spacer-"+v),k.pinState=Xe=Tn(m)),t.force3D!==!1&&he.set(m,{force3D:!0}),f.spacer=Ve=k.spacer,ke=jt(m),ye=ke[T+C.os2],Je=he.getProperty(m),tt=he.quickSetter(m,C.a,pt),Jn(m,Ve,ke),Fe=Tn(m)),O){l=bo(O)?Bs(O,zs):zs,d=_n("scroller-start",v,D,C,l,0),h=_n("scroller-end",v,D,C,l,0,d),xt=d["offset"+C.op.d2];var It=Bt(go(D,"content")||D);L=this.markerStart=_n("start",v,It,C,l,xt,0,R),Q=this.markerEnd=_n("end",v,It,C,l,xt,0,R),R&&(vt=he.quickSetter([L,Q],C.a,pt)),!ie&&!(to.length&&go(D,"fixedMarkers")===!0)&&(Ti(te?Qe:D),he.set([d,h],{force3D:!0}),Se=he.quickSetter(d,C.a,pt),be=he.quickSetter(h,C.a,pt))}if(R){var ee=R.vars.onUpdate,pe=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){f.update(0,0,1),ee&&ee.apply(R,pe||[])})}if(f.previous=function(){return He[He.indexOf(f)-1]},f.next=function(){return He[He.indexOf(f)+1]},f.revert=function(K,ce){if(!ce)return f.kill(!0);var G=K!==!1||!f.enabled,F=Tt;G!==f.isReverted&&(G&&(Ne=Math.max(r(),f.scroll.rec||0),i=f.progress,bt=o&&o.progress()),L&&[L,Q,d,h].forEach(function(De){return De.style.display=G?"none":"block"}),G&&(Tt=f,f.update(G)),m&&(!W||!f.isActive)&&(G?Ei(m,Ve,Xe):Jn(m,Ve,jt(m),q)),G||f.update(G),Tt=F,f.isReverted=G)},f.refresh=function(K,ce,G,F){if(!((Tt||!f.enabled)&&!ce)){if(m&&K&&Xt){yt(p,"scrollEnd",Cr);return}!Dt&&ge&&ge(f),Tt=f,b.tween&&!G&&(b.tween.kill(),b.tween=0),le&&le.pause(),M&&o&&o.revert({kill:!1}).invalidate(),f.isReverted||f.revert(!0,!0),f._subPinOffset=!1;var De=me(),se=Pe(),Me=R?R.duration():eo(D,C),ae=fe<=.01,_e=0,de=F||0,Ee=bo(G)?G.end:t.end,Ce=t.endTrigger||A,we=bo(G)?G.start:t.start||(t.start===0||!A?0:m?"0 0":"0 100%"),Re=f.pinnedContainer=t.pinnedContainer&&Bt(t.pinnedContainer,f),qe=A&&Math.max(0,He.indexOf(f))||0,Oe=qe,Le,ut,Zt,yo,ft,nt,Wt,io,ot,Ot,st,at,oo;for(O&&bo(G)&&(at=he.getProperty(d,C.p),oo=he.getProperty(h,C.p));Oe-- >0;)nt=He[Oe],nt.end||nt.refresh(0,1)||(Tt=f),Wt=nt.pin,Wt&&(Wt===A||Wt===m||Wt===Re)&&!nt.isReverted&&(Ot||(Ot=[]),Ot.unshift(nt),nt.revert(!0,!0)),nt!==He[Oe]&&(qe--,Oe--);for(Ct(we)&&(we=we(f)),we=Rs(we,"start",f),S=Gs(we,A,De,C,r(),L,d,f,se,ue,ie,Me,R,f._startClamp&&"_startClamp")||(m?-.001:0),Ct(Ee)&&(Ee=Ee(f)),Ht(Ee)&&!Ee.indexOf("+=")&&(~Ee.indexOf(" ")?Ee=(Ht(we)?we.split(" ")[0]:"")+Ee:(_e=kn(Ee.substr(2),De),Ee=Ht(we)?we:(R?he.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,S):S)+_e,Ce=A)),Ee=Rs(Ee,"end",f),w=Math.max(S,Gs(Ee||(Ce?"100% 0":Me),Ce,De,C,r()+_e,Q,h,f,se,ue,ie,Me,R,f._endClamp&&"_endClamp"))||-.001,_e=0,Oe=qe;Oe--;)nt=He[Oe],Wt=nt.pin,Wt&&nt.start-nt._pinPush<=S&&!R&&nt.end>0&&(Le=nt.end-(f._startClamp?Math.max(0,nt.start):nt.start),(Wt===A&&nt.start-nt._pinPush<S||Wt===Re)&&isNaN(we)&&(_e+=Le*(1-nt.progress)),Wt===m&&(de+=Le));if(S+=_e,w+=_e,f._startClamp&&(f._startClamp+=_e),f._endClamp&&!Dt&&(f._endClamp=w||-.001,w=Math.min(w,eo(D,C))),fe=w-S||(S-=.01)&&.001,ae&&(i=he.utils.clamp(0,1,he.utils.normalize(S,w,Ne))),f._pinPush=de,L&&_e&&(Le={},Le[C.a]="+="+_e,Re&&(Le[C.p]="-="+r()),he.set([L,Q],Le)),m&&!(fs&&f.end>=eo(D,C)))Le=jt(m),yo=C===dt,Zt=r(),it=parseFloat(Je(C.a))+de,!Me&&w>1&&(st=(te?et.scrollingElement||Gt:D).style,st={style:st,value:st["overflow"+C.a.toUpperCase()]},te&&jt(Qe)["overflow"+C.a.toUpperCase()]!=="scroll"&&(st.style["overflow"+C.a.toUpperCase()]="scroll")),Jn(m,Ve,Le),Fe=Tn(m),ut=no(m,!0),io=ie&&mo(D,yo?Rt:dt)(),T?(q=[T+C.os2,fe+de+pt],q.t=Ve,Oe=T===ct?Hn(m,C)+fe+de:0,Oe&&(q.push(C.d,Oe+pt),Ve.style.flexBasis!=="auto"&&(Ve.style.flexBasis=Oe+pt)),No(q),Re&&He.forEach(function(_t){_t.pin===Re&&_t.vars.pinSpacing!==!1&&(_t._subPinOffset=!0)}),ie&&r(Ne)):(Oe=Hn(m,C),Oe&&Ve.style.flexBasis!=="auto"&&(Ve.style.flexBasis=Oe+pt)),ie&&(ft={top:ut.top+(yo?Zt-S:io)+pt,left:ut.left+(yo?io:Zt-S)+pt,boxSizing:"border-box",position:"fixed"},ft[To]=ft["max"+Fo]=Math.ceil(ut.width)+pt,ft[Mo]=ft["max"+vs]=Math.ceil(ut.height)+pt,ft[Vt]=ft[Vt+sn]=ft[Vt+on]=ft[Vt+rn]=ft[Vt+nn]="0",ft[ct]=Le[ct],ft[ct+sn]=Le[ct+sn],ft[ct+on]=Le[ct+on],ft[ct+rn]=Le[ct+rn],ft[ct+nn]=Le[ct+nn],Ze=ki(Xe,ft,W),Dt&&r(0)),o?(ot=o._initted,qn(1),o.render(o.duration(),!0,!0),V=Je(C.a)-it+fe+de,xe=Math.abs(fe-V)>1,ie&&xe&&Ze.splice(Ze.length-2,2),o.render(0,!0,!0),ot||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),qn(0)):V=fe,st&&(st.value?st.style["overflow"+C.a.toUpperCase()]=st.value:st.style.removeProperty("overflow-"+C.a));else if(A&&r()&&!R)for(ut=A.parentNode;ut&&ut!==Qe;)ut._pinOffset&&(S-=ut._pinOffset,w-=ut._pinOffset),ut=ut.parentNode;Ot&&Ot.forEach(function(_t){return _t.revert(!1,!0)}),f.start=S,f.end=w,_=N=Dt?Ne:r(),!R&&!Dt&&(_<Ne&&r(Ne),f.scroll.rec=0),f.revert(!1,!0),u=Mt(),$e&&(g=-1,$e.restart(!0)),Tt=0,o&&re&&(o._initted||bt)&&o.progress()!==bt&&o.progress(bt||0,!0).render(o.time(),!0,!0),(ae||i!==f.progress||R||M||o&&!o._initted)&&(o&&!re&&o.totalProgress(R&&S<-.001&&!i?he.utils.normalize(S,w,0):i,!0),f.progress=ae||(_-S)/fe===i?0:i),m&&T&&(Ve._pinOffset=Math.round(f.progress*V)),le&&le.invalidate(),isNaN(at)||(at-=he.getProperty(d,C.p),oo-=he.getProperty(h,C.p),Mn(d,C,at),Mn(L,C,at-(F||0)),Mn(h,C,oo),Mn(Q,C,oo-(F||0))),ae&&!Dt&&f.update(),H&&!Dt&&!J&&(J=!0,H(f),J=!1)}},f.getVelocity=function(){return(r()-N)/(Mt()-Vo)*1e3||0},f.endAnimation=function(){Uo(f.callbackAnimation),o&&(le?le.progress(1):o.paused()?re||Uo(o,f.direction<0,1):Uo(o,o.reversed()))},f.labelToScroll=function(K){return o&&o.labels&&(S||f.refresh()||S)+o.labels[K]/o.duration()*fe||0},f.getTrailing=function(K){var ce=He.indexOf(f),G=f.direction>0?He.slice(0,ce).reverse():He.slice(ce+1);return(Ht(K)?G.filter(function(F){return F.vars.preventOverlaps===K}):G).filter(function(F){return f.direction>0?F.end<=S:F.start>=w})},f.update=function(K,ce,G){if(!(R&&!G&&!K)){var F=Dt===!0?Ne:f.scroll(),De=K?0:(F-S)/fe,se=De<0?0:De>1?1:De||0,Me=f.progress,ae,_e,de,Ee,Ce,we,Re,qe;if(ce&&(N=_,_=R?r():F,P&&(ve=oe,oe=o&&!re?o.totalProgress():se)),x&&m&&!Tt&&!yn&&Xt&&(!se&&S<F+(F-N)/(Mt()-Vo)*x?se=1e-4:se===1&&w>F+(F-N)/(Mt()-Vo)*x&&(se=.9999)),se!==Me&&f.enabled){if(ae=f.isActive=!!se&&se<1,_e=!!Me&&Me<1,we=ae!==_e,Ce=we||!!se!=!!Me,f.direction=se>Me?1:-1,f.progress=se,Ce&&!Tt&&(de=se&&!Me?0:se===1?1:Me===1?2:3,re&&(Ee=!we&&B[de+1]!=="none"&&B[de+1]||B[de],qe=o&&(Ee==="complete"||Ee==="reset"||Ee in o))),$&&(we||qe)&&(qe||E||!o)&&(Ct($)?$(f):f.getTrailing($).forEach(function(Zt){return Zt.endAnimation()})),re||(le&&!Tt&&!yn?(le._dp._time-le._start!==le._time&&le.render(le._dp._time-le._start),le.resetTo?le.resetTo("totalProgress",se,o._tTime/o._tDur):(le.vars.totalProgress=se,le.invalidate().restart())):o&&o.totalProgress(se,!!(Tt&&(u||K)))),m){if(K&&T&&(Ve.style[T+C.os2]=ye),!ie)tt(Xo(it+V*se));else if(Ce){if(Re=!K&&se>Me&&w+1>F&&F+1>=eo(D,C),W)if(!K&&(ae||Re)){var Oe=no(m,!0),Le=F-S;Us(m,Qe,Oe.top+(C===dt?Le:0)+pt,Oe.left+(C===dt?0:Le)+pt)}else Us(m,Ve);No(ae||Re?Ze:Fe),xe&&se<1&&ae||tt(it+(se===1&&!Re?V:0))}}P&&!b.tween&&!Tt&&!yn&&$e.restart(!0),c&&(we||z&&se&&(se<1||!Zn))&&cn(c.targets).forEach(function(Zt){return Zt.classList[ae||z?"add":"remove"](c.className)}),a&&!re&&!K&&a(f),Ce&&!Tt?(re&&(qe&&(Ee==="complete"?o.pause().totalProgress(1):Ee==="reset"?o.restart(!0).pause():Ee==="restart"?o.restart(!0):o[Ee]()),a&&a(f)),(we||!Zn)&&(I&&we&&Qn(f,I),ne[de]&&Qn(f,ne[de]),z&&(se===1?f.kill(!1,1):ne[de]=0),we||(de=se===1?1:3,ne[de]&&Qn(f,ne[de]))),j&&!ae&&Math.abs(f.getVelocity())>(qo(j)?j:2500)&&(Uo(f.callbackAnimation),le?le.progress(1):Uo(o,Ee==="reverse"?1:!se,1))):re&&a&&!Tt&&a(f)}if(be){var ut=R?F/R.duration()*(R._caScrollDist||0):F;Se(ut+(d._isFlipped?1:0)),be(ut)}vt&&vt(-F/R.duration()*(R._caScrollDist||0))}},f.enable=function(K,ce){f.enabled||(f.enabled=!0,yt(D,"resize",Zo),te||yt(D,"scroll",Ro),ge&&yt(p,"refreshInit",ge),K!==!1&&(f.progress=i=0,_=N=g=r()),ce!==!1&&f.refresh())},f.getTween=function(K){return K&&b?b.tween:le},f.setPositions=function(K,ce,G,F){if(R){var De=R.scrollTrigger,se=R.duration(),Me=De.end-De.start;K=De.start+Me*K/se,ce=De.start+Me*ce/se}f.refresh(!1,!1,{start:Is(K,G&&!!f._startClamp),end:Is(ce,G&&!!f._endClamp)},F),f.update()},f.adjustPinSpacing=function(K){if(q&&K){var ce=q.indexOf(C.d)+1;q[ce]=parseFloat(q[ce])+K+pt,q[1]=parseFloat(q[1])+K+pt,No(q)}},f.disable=function(K,ce){if(f.enabled&&(K!==!1&&f.revert(!0,!0),f.enabled=f.isActive=!1,ce||le&&le.pause(),Ne=0,k&&(k.uncache=1),ge&&mt(p,"refreshInit",ge),$e&&($e.pause(),b.tween&&b.tween.kill()&&(b.tween=0)),!te)){for(var G=He.length;G--;)if(He[G].scroller===D&&He[G]!==f)return;mt(D,"resize",Zo),te||mt(D,"scroll",Ro)}},f.kill=function(K,ce){f.disable(K,ce),le&&!ce&&le.kill(),v&&delete ps[v];var G=He.indexOf(f);G>=0&&He.splice(G,1),G===kt&&Rn>0&&kt--,G=0,He.forEach(function(F){return F.scroller===f.scroller&&(G=1)}),G||Dt||(f.scroll.rec=0),o&&(o.scrollTrigger=null,K&&o.revert({kill:!1}),ce||o.kill()),L&&[L,Q,d,h].forEach(function(F){return F.parentNode&&F.parentNode.removeChild(F)}),an===f&&(an=0),m&&(k&&(k.uncache=1),G=0,He.forEach(function(F){return F.pin===m&&G++}),G||(k.spacer=0)),t.onKill&&t.onKill(f)},He.push(f),f.enable(!1,!1),ht&&ht(f),o&&o.add&&!fe){var Ae=f.update;f.update=function(){f.update=Ae,Ue.cache++,S||w||f.refresh()},he.delayedCall(.01,f.update),fe=.01,S=w=0}else f.refresh();m&&Si()},p.register=function(t){return Io||(he=t||wr(),xr()&&window.document&&p.enable(),Io=jo),Io},p.defaults=function(t){if(t)for(var o in t)vn[o]=t[o];return vn},p.disable=function(t,o){jo=0,He.forEach(function(a){return a[o?"kill":"disable"](t)}),mt(Ge,"wheel",Ro),mt(et,"scroll",Ro),clearInterval(mn),mt(et,"touchcancel",Kt),mt(Qe,"touchstart",Kt),wn(mt,et,"pointerdown,touchstart,mousedown",Os),wn(mt,et,"pointerup,touchend,mouseup",Ls),zn.kill(),xn(mt);for(var s=0;s<Ue.length;s+=3)bn(mt,Ue[s],Ue[s+1]),bn(mt,Ue[s],Ue[s+2])},p.enable=function(){if(Ge=window,et=document,Gt=et.documentElement,Qe=et.body,he&&(cn=he.utils.toArray,tn=he.utils.clamp,us=he.core.context||Kt,qn=he.core.suppressOverwrites||Kt,ys=Ge.history.scrollRestoration||"auto",ds=Ge.pageYOffset||0,he.core.globals("ScrollTrigger",p),Qe)){jo=1,zo=document.createElement("div"),zo.style.height="100vh",zo.style.position="absolute",Er(),bi(),rt.register(he),p.isTouch=rt.isTouch,co=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),cs=rt.isTouch===1,yt(Ge,"wheel",Ro),ms=[Ge,et,Gt,Qe],he.matchMedia?(p.matchMedia=function(I){var H=he.matchMedia(),E;for(E in I)H.add(E,I[E]);return H},he.addEventListener("matchMediaInit",function(){return Ts()}),he.addEventListener("matchMediaRevert",function(){return Pr()}),he.addEventListener("matchMedia",function(){_o(0,1),Eo("matchMedia")}),he.matchMedia().add("(orientation: portrait)",function(){return Kn(),Kn})):console.warn("Requires GSAP 3.11.0 or later"),Kn(),yt(et,"scroll",Ro);var t=Qe.hasAttribute("style"),o=Qe.style,s=o.borderTopStyle,a=he.core.Animation.prototype,c,v;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",c=no(Qe),dt.m=Math.round(c.top+dt.sc())||0,Rt.m=Math.round(c.left+Rt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(Qe.setAttribute("style",""),Qe.removeAttribute("style")),mn=setInterval(Ns,250),he.delayedCall(.5,function(){return yn=0}),yt(et,"touchcancel",Kt),yt(Qe,"touchstart",Kt),wn(yt,et,"pointerdown,touchstart,mousedown",Os),wn(yt,et,"pointerup,touchend,mouseup",Ls),ls=he.utils.checkPrefix("transform"),In.push(ls),Io=Mt(),zn=he.delayedCall(.2,_o).pause(),Oo=[et,"visibilitychange",function(){var I=Ge.innerWidth,H=Ge.innerHeight;et.hidden?(ks=I,Ds=H):(ks!==I||Ds!==H)&&Zo()},et,"DOMContentLoaded",_o,Ge,"load",_o,Ge,"resize",Zo],xn(yt),He.forEach(function(I){return I.enable(0,1)}),v=0;v<Ue.length;v+=3)bn(mt,Ue[v],Ue[v+1]),bn(mt,Ue[v],Ue[v+2])}},p.config=function(t){"limitCallbacks"in t&&(Zn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(mn)||(mn=o)&&setInterval(Ns,o),"ignoreMobileResize"in t&&(cs=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(xn(mt)||xn(yt,t.autoRefreshEvents||"none"),gr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,o){var s=Bt(t),a=Ue.indexOf(s),c=Po(s);~a&&Ue.splice(a,c?6:2),o&&(c?to.unshift(Ge,o,Qe,o,Gt,o):to.unshift(s,o))},p.clearMatchMedia=function(t){He.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},p.isInViewport=function(t,o,s){var a=(Ht(t)?Bt(t):t).getBoundingClientRect(),c=a[s?To:Mo]*o||0;return s?a.right-c>0&&a.left+c<Ge.innerWidth:a.bottom-c>0&&a.top+c<Ge.innerHeight},p.positionInViewport=function(t,o,s){Ht(t)&&(t=Bt(t));var a=t.getBoundingClientRect(),c=a[s?To:Mo],v=o==null?c/2:o in Fn?Fn[o]*c:~o.indexOf("%")?parseFloat(o)*c/100:parseFloat(o)||0;return s?(a.left+v)/Ge.innerWidth:(a.top+v)/Ge.innerHeight},p.killAll=function(t){if(He.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=So.killAll||[];So={},o.forEach(function(s){return s()})}},p}();Ie.version="3.12.7";Ie.saveStyles=function(p){return p?cn(p).forEach(function(e){if(e&&e.style){var n=Nt.indexOf(e);n>=0&&Nt.splice(n,5),Nt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),he.core.getCache(e),us())}}):Nt};Ie.revert=function(p,e){return Ts(!p,e)};Ie.create=function(p,e){return new Ie(p,e)};Ie.refresh=function(p){return p?Zo(!0):(Io||Ie.register())&&_o(!0)};Ie.update=function(p){return++Ue.cache&&ro(p===!0?2:0)};Ie.clearScrollMemory=Sr;Ie.maxScroll=function(p,e){return eo(p,e?Rt:dt)};Ie.getScrollFunc=function(p,e){return mo(Bt(p),e?Rt:dt)};Ie.getById=function(p){return ps[p]};Ie.getAll=function(){return He.filter(function(p){return p.vars.id!=="ScrollSmoother"})};Ie.isScrolling=function(){return!!Xt};Ie.snapDirectional=_s;Ie.addEventListener=function(p,e){var n=So[p]||(So[p]=[]);~n.indexOf(e)||n.push(e)};Ie.removeEventListener=function(p,e){var n=So[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Ie.batch=function(p,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,a=function(I,H){var E=[],A=[],m=he.delayedCall(o,function(){H(E,A),E=[],A=[]}).pause();return function(T){E.length||m.restart(!0),E.push(T.trigger),A.push(T),s<=E.length&&m.progress(1)}},c;for(c in e)t[c]=c.substr(0,2)==="on"&&Ct(e[c])&&c!=="onRefreshInit"?a(c,e[c]):e[c];return Ct(s)&&(s=s(),yt(Ie,"refresh",function(){return s=e.batchMax()})),cn(p).forEach(function(v){var I={};for(c in t)I[c]=t[c];I.trigger=v,n.push(Ie.create(I))}),n};var Ys=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},es=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(rt.isTouch?" pinch-zoom":""):"none",e===Gt&&p(Qe,n)},Cn={auto:1,scroll:1},Ri=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,a=s._gsap||he.core.getCache(s),c=Mt(),v;if(!a._isScrollT||c-a._isScrollT>2e3){for(;s&&s!==Qe&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Cn[(v=jt(s)).overflowY]||Cn[v.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==t&&!Po(s)&&(Cn[(v=jt(s)).overflowY]||Cn[v.overflowX]),a._isScrollT=c}(a._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},kr=function(e,n,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&Ri,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&yt(et,rt.eventTypes[0],js,!1,!0)},onDisable:function(){return mt(et,rt.eventTypes[0],js,!0)}})},Ii=/(input|label|select|textarea)/i,Vs,js=function(e){var n=Ii.test(e.target.tagName);(n||Vs)&&(e._gsapAllow=!0,Vs=n)},Oi=function(e){bo(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,a=n.onRelease,c,v,I=Bt(e.target)||Gt,H=he.core.globals().ScrollSmoother,E=H&&H.get(),A=co&&(e.content&&Bt(e.content)||E&&e.content!==!1&&!E.smooth()&&E.content()),m=mo(I,dt),T=mo(I,Rt),M=1,x=(rt.isTouch&&Ge.visualViewport?Ge.visualViewport.scale*Ge.visualViewport.width:Ge.outerWidth)/Ge.innerWidth,U=0,Z=Ct(o)?function(){return o(c)}:function(){return o||2.8},z,P,W=kr(I,e.type,!0,s),X=function(){return P=!1},R=Kt,j=Kt,$=function(){v=eo(I,dt),j=tn(co?1:0,v),t&&(R=tn(0,eo(I,Rt))),z=Co},C=function(){A._gsap.y=Xo(parseFloat(A._gsap.y)+m.offset)+"px",A.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(A._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},re=function(){if(P){requestAnimationFrame(X);var O=Xo(c.deltaY/2),ue=j(m.v-O);if(A&&ue!==m.v+m.offset){m.offset=ue-m.v;var f=Xo((parseFloat(A&&A._gsap.y)||0)-m.offset);A.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+f+", 0, 1)",A._gsap.y=f+"px",m.cacheID=Ue.cache,ro()}return!0}m.offset&&C(),P=!0},D,Y,te,ie,ne=function(){$(),D.isActive()&&D.vars.scrollY>v&&(m()>v?D.progress(1)&&m(v):D.resetTo("scrollY",v))};return A&&he.set(A,{y:"+=0"}),e.ignoreCheck=function(B){return co&&B.type==="touchmove"&&re()||M>1.05&&B.type!=="touchstart"||c.isGesturing||B.touches&&B.touches.length>1},e.onPress=function(){P=!1;var B=M;M=Xo((Ge.visualViewport&&Ge.visualViewport.scale||1)/x),D.pause(),B!==M&&es(I,M>1.01?!0:t?!1:"x"),Y=T(),te=m(),$(),z=Co},e.onRelease=e.onGestureStart=function(B,O){if(m.offset&&C(),!O)ie.restart(!0);else{Ue.cache++;var ue=Z(),f,ge;t&&(f=T(),ge=f+ue*.05*-B.velocityX/.227,ue*=Ys(T,f,ge,eo(I,Rt)),D.vars.scrollX=R(ge)),f=m(),ge=f+ue*.05*-B.velocityY/.227,ue*=Ys(m,f,ge,eo(I,dt)),D.vars.scrollY=j(ge),D.invalidate().duration(ue).play(.01),(co&&D.vars.scrollY>=v||f>=v-1)&&he.to({},{onUpdate:ne,duration:ue})}a&&a(B)},e.onWheel=function(){D._ts&&D.pause(),Mt()-U>1e3&&(z=0,U=Mt())},e.onChange=function(B,O,ue,f,ge){if(Co!==z&&$(),O&&t&&T(R(f[2]===O?Y+(B.startX-B.x):T()+O-f[1])),ue){m.offset&&C();var me=ge[2]===ue,Pe=me?te+B.startY-B.y:m()+ue-ge[1],g=j(Pe);me&&Pe!==g&&(te+=g-Pe),m(g)}(ue||O)&&ro()},e.onEnable=function(){es(I,t?!1:"x"),Ie.addEventListener("refresh",ne),yt(Ge,"resize",ne),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=T.smooth=!1),W.enable()},e.onDisable=function(){es(I,!0),mt(Ge,"resize",ne),Ie.removeEventListener("refresh",ne),W.kill()},e.lockAxis=e.lockAxis!==!1,c=new rt(e),c.iOS=co,co&&!m()&&m(1),co&&he.ticker.add(Kt),ie=c._dc,D=he.to(c,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Ar(m,m(),function(){return D.pause()})},onUpdate:ro,onComplete:ie.vars.onComplete}),c};Ie.sort=function(p){if(Ct(p))return He.sort(p);var e=Ge.pageYOffset||0;return Ie.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+Ge.innerHeight}),He.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Ie.observe=function(p){return new rt(p)};Ie.normalizeScroll=function(p){if(typeof p>"u")return Et;if(p===!0&&Et)return Et.enable();if(p===!1){Et&&Et.kill(),Et=p;return}var e=p instanceof rt?p:Oi(p);return Et&&Et.target===e.target&&Et.kill(),Po(e.target)&&(Et=e),e};Ie.core={_getVelocityProp:as,_inputObserver:kr,_scrollers:Ue,_proxies:to,bridge:{ss:function(){Xt||Eo("scrollStart"),Xt=Mt()},ref:function(){return Tt}}};wr()&&he.registerPlugin(Ie);var ln=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(H){H.preventDefault(),t(++p%e.children.length)},!1);function n(H){return e.appendChild(H.dom),H}function t(H){for(var E=0;E<e.children.length;E++)e.children[E].style.display=E===H?"block":"none";p=H}var o=(performance||Date).now(),s=o,a=0,c=n(new ln.Panel("FPS","#0ff","#002")),v=n(new ln.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var I=n(new ln.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){a++;var H=(performance||Date).now();if(v.update(H-o,200),H>=s+1e3&&(c.update(a*1e3/(H-s),100),s=H,a=0,I)){var E=performance.memory;I.update(E.usedJSHeapSize/1048576,E.jsHeapSizeLimit/1048576)}return H},update:function(){o=this.end()},domElement:e,setMode:t}};ln.Panel=function(p,e,n){var t=1/0,o=0,s=Math.round,a=s(window.devicePixelRatio||1),c=80*a,v=48*a,I=3*a,H=2*a,E=3*a,A=15*a,m=74*a,T=30*a,M=document.createElement("canvas");M.width=c,M.height=v,M.style.cssText="width:80px;height:48px";var x=M.getContext("2d");return x.font="bold "+9*a+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=n,x.fillRect(0,0,c,v),x.fillStyle=e,x.fillText(p,I,H),x.fillRect(E,A,m,T),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(E,A,m,T),{dom:M,update:function(U,Z){t=Math.min(t,U),o=Math.max(o,U),x.fillStyle=n,x.globalAlpha=1,x.fillRect(0,0,c,A),x.fillStyle=e,x.fillText(s(U)+" "+p+" ("+s(t)+"-"+s(o)+")",I,H),x.drawImage(M,E+a,A,m-a,T,E,A,m-a,T),x.fillRect(E+m-a,A,a,T),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(E+m-a,A,a,s((1-U/Z)*T))}}};const Dr={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class pn{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Li=new qr(-1,1,1,-1,0,1);class Bi extends ho{constructor(){super(),this.setAttribute("position",new $o([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new $o([0,2,0,0,2,0],2))}}const zi=new Bi;class Rr{constructor(e){this._mesh=new Ye(zi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Li)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ni extends pn{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof vo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=ns.clone(e.uniforms),this.material=new vo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Rr(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Xs extends pn{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,c;this.inverse?(a=0,c=1):(a=1,c=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,a,4294967295),s.buffers.stencil.setClear(c),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Hi extends pn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Fi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new Be);this._width=t.width,this._height=t.height,n=new Sn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:En}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ni(Dr),this.copyPass.material.blending=Zr,this.clock=new $r}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const a=this.passes[o];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),a.needsSwap){if(t){const c=this.renderer.getContext(),v=this.renderer.state.buffers.stencil;v.setFunc(c.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),v.setFunc(c.EQUAL,1,4294967295)}this.swapBuffers()}Xs!==void 0&&(a instanceof Xs?t=!0:a instanceof Hi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Be);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Gi extends pn{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new At}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=o}}const Ui={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new At(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Ao extends pn{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new Be(e.x,e.y):new Be(256,256),this.clearColor=new At(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Sn(s,a,{type:En}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let E=0;E<this.nMips;E++){const A=new Sn(s,a,{type:En});A.texture.name="UnrealBloomPass.h"+E,A.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(A);const m=new Sn(s,a,{type:En});m.texture.name="UnrealBloomPass.v"+E,m.texture.generateMipmaps=!1,this.renderTargetsVertical.push(m),s=Math.round(s/2),a=Math.round(a/2)}const c=Ui;this.highPassUniforms=ns.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new vo({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}),this.separableBlurMaterials=[];const v=[3,5,7,9,11];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let E=0;E<this.nMips;E++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(v[E])),this.separableBlurMaterials[E].uniforms.invSize.value=new Be(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const I=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=I,this.bloomTintColors=[new je(1,1,1),new je(1,1,1),new je(1,1,1),new je(1,1,1),new je(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const H=Dr;this.copyUniforms=ns.clone(H.uniforms),this.blendMaterial=new vo({uniforms:this.copyUniforms,vertexShader:H.vertexShader,fragmentShader:H.fragmentShader,blending:Jt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new At,this.oldClearAlpha=1,this.basic=new lt,this.fsQuad=new Rr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new Be(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let c=this.renderTargetBright;for(let v=0;v<this.nMips;v++)this.fsQuad.material=this.separableBlurMaterials[v],this.separableBlurMaterials[v].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[v].uniforms.direction.value=Ao.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[v]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[v].uniforms.colorTexture.value=this.renderTargetsHorizontal[v].texture,this.separableBlurMaterials[v].uniforms.direction.value=Ao.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[v]),e.clear(),this.fsQuad.render(e),c=this.renderTargetsVertical[v];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new vo({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Be(.5,.5)},direction:{value:new Be(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new vo({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Ao.BlurDirectionX=new Be(1,0);Ao.BlurDirectionY=new Be(0,1);class Ln extends Qr{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Wi=ss;class Gn extends er{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,a=new tr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(c){try{n(s.parse(c))}catch(v){o?o(v):console.error(v),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(g,u){if(g.nodeType!==1)return;const i=P(g);let r=!1,b=null;switch(g.nodeName){case"svg":u=T(g,u);break;case"style":s(g);break;case"g":u=T(g,u);break;case"path":u=T(g,u),g.hasAttribute("d")&&(b=o(g));break;case"rect":u=T(g,u),b=v(g);break;case"polygon":u=T(g,u),b=I(g);break;case"polyline":u=T(g,u),b=H(g);break;case"circle":u=T(g,u),b=E(g);break;case"ellipse":u=T(g,u),b=A(g);break;case"line":u=T(g,u),b=m(g);break;case"defs":r=!0;break;case"use":u=T(g,u);const _=(g.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),N=g.viewportElement.getElementById(_);N?t(N,u):console.warn("SVGLoader: 'use node' references non-existent node id: "+_);break}b&&(u.fill!==void 0&&u.fill!=="none"&&b.color.setStyle(u.fill,Wi),X(b,ge),D.push(b),b.userData={node:g,style:u});const k=g.childNodes;for(let y=0;y<k.length;y++){const _=k[y];r&&_.nodeName!=="style"&&_.nodeName!=="defs"||t(_,u)}i&&(te.pop(),te.length>0?ge.copy(te[te.length-1]):ge.identity())}function o(g){const u=new lo,i=new Be,r=new Be,b=new Be;let k=!0,y=!1;const _=g.getAttribute("d");if(_===""||_==="none")return null;const N=_.match(/[a-df-z][^a-df-z]*/ig);for(let S=0,w=N.length;S<w;S++){const L=N[S],Q=L.charAt(0),d=L.slice(1).trim();k===!0&&(y=!0,k=!1);let h;switch(Q){case"M":h=x(d);for(let l=0,J=h.length;l<J;l+=2)i.x=h[l+0],i.y=h[l+1],r.x=i.x,r.y=i.y,l===0?u.moveTo(i.x,i.y):u.lineTo(i.x,i.y),l===0&&b.copy(i);break;case"H":h=x(d);for(let l=0,J=h.length;l<J;l++)i.x=h[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&y===!0&&b.copy(i);break;case"V":h=x(d);for(let l=0,J=h.length;l<J;l++)i.y=h[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&y===!0&&b.copy(i);break;case"L":h=x(d);for(let l=0,J=h.length;l<J;l+=2)i.x=h[l+0],i.y=h[l+1],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&y===!0&&b.copy(i);break;case"C":h=x(d);for(let l=0,J=h.length;l<J;l+=6)u.bezierCurveTo(h[l+0],h[l+1],h[l+2],h[l+3],h[l+4],h[l+5]),r.x=h[l+2],r.y=h[l+3],i.x=h[l+4],i.y=h[l+5],l===0&&y===!0&&b.copy(i);break;case"S":h=x(d);for(let l=0,J=h.length;l<J;l+=4)u.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),h[l+0],h[l+1],h[l+2],h[l+3]),r.x=h[l+0],r.y=h[l+1],i.x=h[l+2],i.y=h[l+3],l===0&&y===!0&&b.copy(i);break;case"Q":h=x(d);for(let l=0,J=h.length;l<J;l+=4)u.quadraticCurveTo(h[l+0],h[l+1],h[l+2],h[l+3]),r.x=h[l+0],r.y=h[l+1],i.x=h[l+2],i.y=h[l+3],l===0&&y===!0&&b.copy(i);break;case"T":h=x(d);for(let l=0,J=h.length;l<J;l+=2){const fe=M(i.x,r.x),Xe=M(i.y,r.y);u.quadraticCurveTo(fe,Xe,h[l+0],h[l+1]),r.x=fe,r.y=Xe,i.x=h[l+0],i.y=h[l+1],l===0&&y===!0&&b.copy(i)}break;case"A":h=x(d,[3,4],7);for(let l=0,J=h.length;l<J;l+=7){if(h[l+5]==i.x&&h[l+6]==i.y)continue;const fe=i.clone();i.x=h[l+5],i.y=h[l+6],r.x=i.x,r.y=i.y,a(u,h[l],h[l+1],h[l+2],h[l+3],h[l+4],fe,i),l===0&&y===!0&&b.copy(i)}break;case"m":h=x(d);for(let l=0,J=h.length;l<J;l+=2)i.x+=h[l+0],i.y+=h[l+1],r.x=i.x,r.y=i.y,l===0?u.moveTo(i.x,i.y):u.lineTo(i.x,i.y),l===0&&b.copy(i);break;case"h":h=x(d);for(let l=0,J=h.length;l<J;l++)i.x+=h[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&y===!0&&b.copy(i);break;case"v":h=x(d);for(let l=0,J=h.length;l<J;l++)i.y+=h[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&y===!0&&b.copy(i);break;case"l":h=x(d);for(let l=0,J=h.length;l<J;l+=2)i.x+=h[l+0],i.y+=h[l+1],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&y===!0&&b.copy(i);break;case"c":h=x(d);for(let l=0,J=h.length;l<J;l+=6)u.bezierCurveTo(i.x+h[l+0],i.y+h[l+1],i.x+h[l+2],i.y+h[l+3],i.x+h[l+4],i.y+h[l+5]),r.x=i.x+h[l+2],r.y=i.y+h[l+3],i.x+=h[l+4],i.y+=h[l+5],l===0&&y===!0&&b.copy(i);break;case"s":h=x(d);for(let l=0,J=h.length;l<J;l+=4)u.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),i.x+h[l+0],i.y+h[l+1],i.x+h[l+2],i.y+h[l+3]),r.x=i.x+h[l+0],r.y=i.y+h[l+1],i.x+=h[l+2],i.y+=h[l+3],l===0&&y===!0&&b.copy(i);break;case"q":h=x(d);for(let l=0,J=h.length;l<J;l+=4)u.quadraticCurveTo(i.x+h[l+0],i.y+h[l+1],i.x+h[l+2],i.y+h[l+3]),r.x=i.x+h[l+0],r.y=i.y+h[l+1],i.x+=h[l+2],i.y+=h[l+3],l===0&&y===!0&&b.copy(i);break;case"t":h=x(d);for(let l=0,J=h.length;l<J;l+=2){const fe=M(i.x,r.x),Xe=M(i.y,r.y);u.quadraticCurveTo(fe,Xe,i.x+h[l+0],i.y+h[l+1]),r.x=fe,r.y=Xe,i.x=i.x+h[l+0],i.y=i.y+h[l+1],l===0&&y===!0&&b.copy(i)}break;case"a":h=x(d,[3,4],7);for(let l=0,J=h.length;l<J;l+=7){if(h[l+5]==0&&h[l+6]==0)continue;const fe=i.clone();i.x+=h[l+5],i.y+=h[l+6],r.x=i.x,r.y=i.y,a(u,h[l],h[l+1],h[l+2],h[l+3],h[l+4],fe,i),l===0&&y===!0&&b.copy(i)}break;case"Z":case"z":u.currentPath.autoClose=!0,u.currentPath.curves.length>0&&(i.copy(b),u.currentPath.currentPoint.copy(i),k=!0);break;default:console.warn(L)}y=!1}return u}function s(g){if(!(!g.sheet||!g.sheet.cssRules||!g.sheet.cssRules.length))for(let u=0;u<g.sheet.cssRules.length;u++){const i=g.sheet.cssRules[u];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(b=>b.trim());for(let b=0;b<r.length;b++){const k=Object.fromEntries(Object.entries(i.style).filter(([,y])=>y!==""));Y[r[b]]=Object.assign(Y[r[b]]||{},k)}}}function a(g,u,i,r,b,k,y,_){if(u==0||i==0){g.lineTo(_.x,_.y);return}r=r*Math.PI/180,u=Math.abs(u),i=Math.abs(i);const N=(y.x-_.x)/2,S=(y.y-_.y)/2,w=Math.cos(r)*N+Math.sin(r)*S,L=-Math.sin(r)*N+Math.cos(r)*S;let Q=u*u,d=i*i;const h=w*w,l=L*L,J=h/Q+l/d;if(J>1){const V=Math.sqrt(J);u=V*u,i=V*i,Q=u*u,d=i*i}const fe=Q*l+d*h,Xe=(Q*d-fe)/fe;let Ze=Math.sqrt(Math.max(0,Xe));b===k&&(Ze=-Ze);const Fe=Ze*u*L/i,Ve=-Ze*i*w/u,xt=Math.cos(r)*Fe-Math.sin(r)*Ve+(y.x+_.x)/2,Je=Math.sin(r)*Fe+Math.cos(r)*Ve+(y.y+_.y)/2,tt=c(1,0,(w-Fe)/u,(L-Ve)/i),it=c((w-Fe)/u,(L-Ve)/i,(-w-Fe)/u,(-L-Ve)/i)%(Math.PI*2);g.currentPath.absellipse(xt,Je,u,i,tt,tt+it,k===0,r)}function c(g,u,i,r){const b=g*i+u*r,k=Math.sqrt(g*g+u*u)*Math.sqrt(i*i+r*r);let y=Math.acos(Math.max(-1,Math.min(1,b/k)));return g*r-u*i<0&&(y=-y),y}function v(g){const u=z(g.getAttribute("x")||0),i=z(g.getAttribute("y")||0),r=z(g.getAttribute("rx")||g.getAttribute("ry")||0),b=z(g.getAttribute("ry")||g.getAttribute("rx")||0),k=z(g.getAttribute("width")),y=z(g.getAttribute("height")),_=1-.551915024494,N=new lo;return N.moveTo(u+r,i),N.lineTo(u+k-r,i),(r!==0||b!==0)&&N.bezierCurveTo(u+k-r*_,i,u+k,i+b*_,u+k,i+b),N.lineTo(u+k,i+y-b),(r!==0||b!==0)&&N.bezierCurveTo(u+k,i+y-b*_,u+k-r*_,i+y,u+k-r,i+y),N.lineTo(u+r,i+y),(r!==0||b!==0)&&N.bezierCurveTo(u+r*_,i+y,u,i+y-b*_,u,i+y-b),N.lineTo(u,i+b),(r!==0||b!==0)&&N.bezierCurveTo(u,i+b*_,u+r*_,i,u+r,i),N}function I(g){function u(k,y,_){const N=z(y),S=z(_);b===0?r.moveTo(N,S):r.lineTo(N,S),b++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new lo;let b=0;return g.getAttribute("points").replace(i,u),r.currentPath.autoClose=!0,r}function H(g){function u(k,y,_){const N=z(y),S=z(_);b===0?r.moveTo(N,S):r.lineTo(N,S),b++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new lo;let b=0;return g.getAttribute("points").replace(i,u),r.currentPath.autoClose=!1,r}function E(g){const u=z(g.getAttribute("cx")||0),i=z(g.getAttribute("cy")||0),r=z(g.getAttribute("r")||0),b=new Yn;b.absarc(u,i,r,0,Math.PI*2);const k=new lo;return k.subPaths.push(b),k}function A(g){const u=z(g.getAttribute("cx")||0),i=z(g.getAttribute("cy")||0),r=z(g.getAttribute("rx")||0),b=z(g.getAttribute("ry")||0),k=new Yn;k.absellipse(u,i,r,b,0,Math.PI*2);const y=new lo;return y.subPaths.push(k),y}function m(g){const u=z(g.getAttribute("x1")||0),i=z(g.getAttribute("y1")||0),r=z(g.getAttribute("x2")||0),b=z(g.getAttribute("y2")||0),k=new lo;return k.moveTo(u,i),k.lineTo(r,b),k.currentPath.autoClose=!1,k}function T(g,u){u=Object.assign({},u);let i={};if(g.hasAttribute("class")){const y=g.getAttribute("class").split(/\s/).filter(Boolean).map(_=>_.trim());for(let _=0;_<y.length;_++)i=Object.assign(i,Y["."+y[_]])}g.hasAttribute("id")&&(i=Object.assign(i,Y["#"+g.getAttribute("id")]));function r(y,_,N){N===void 0&&(N=function(w){return w.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),w}),g.hasAttribute(y)&&(u[_]=N(g.getAttribute(y))),i[y]&&(u[_]=N(i[y])),g.style&&g.style[y]!==""&&(u[_]=N(g.style[y]))}function b(y){return Math.max(0,Math.min(1,z(y)))}function k(y){return Math.max(0,z(y))}return r("fill","fill"),r("fill-opacity","fillOpacity",b),r("fill-rule","fillRule"),r("opacity","opacity",b),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",b),r("stroke-width","strokeWidth",k),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",k),r("visibility","visibility"),u}function M(g,u){return g-(u-g)}function x(g,u,i){if(typeof g!="string")throw new TypeError("Invalid input: "+typeof g);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},b=0,k=1,y=2,_=3;let N=b,S=!0,w="",L="";const Q=[];function d(fe,Xe,Ze){const Fe=new SyntaxError('Unexpected character "'+fe+'" at index '+Xe+".");throw Fe.partial=Ze,Fe}function h(){w!==""&&(L===""?Q.push(Number(w)):Q.push(Number(w)*Math.pow(10,Number(L)))),w="",L=""}let l;const J=g.length;for(let fe=0;fe<J;fe++){if(l=g[fe],Array.isArray(u)&&u.includes(Q.length%i)&&r.FLAGS.test(l)){N=k,w=l,h();continue}if(N===b){if(r.WHITESPACE.test(l))continue;if(r.DIGIT.test(l)||r.SIGN.test(l)){N=k,w=l;continue}if(r.POINT.test(l)){N=y,w=l;continue}r.COMMA.test(l)&&(S&&d(l,fe,Q),S=!0)}if(N===k){if(r.DIGIT.test(l)){w+=l;continue}if(r.POINT.test(l)){w+=l,N=y;continue}if(r.EXP.test(l)){N=_;continue}r.SIGN.test(l)&&w.length===1&&r.SIGN.test(w[0])&&d(l,fe,Q)}if(N===y){if(r.DIGIT.test(l)){w+=l;continue}if(r.EXP.test(l)){N=_;continue}r.POINT.test(l)&&w[w.length-1]==="."&&d(l,fe,Q)}if(N===_){if(r.DIGIT.test(l)){L+=l;continue}if(r.SIGN.test(l)){if(L===""){L+=l;continue}L.length===1&&r.SIGN.test(L)&&d(l,fe,Q)}}r.WHITESPACE.test(l)?(h(),N=b,S=!1):r.COMMA.test(l)?(h(),N=b,S=!0):r.SIGN.test(l)?(h(),N=k,w=l):r.POINT.test(l)?(h(),N=y,w=l):d(l,fe,Q)}return h(),Q}const U=["mm","cm","in","pt","pc","px"],Z={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function z(g){let u="px";if(typeof g=="string"||g instanceof String)for(let r=0,b=U.length;r<b;r++){const k=U[r];if(g.endsWith(k)){u=k,g=g.substring(0,g.length-k.length);break}}let i;return u==="px"&&n.defaultUnit!=="px"?i=Z.in[n.defaultUnit]/n.defaultDPI:(i=Z[u][n.defaultUnit],i<0&&(i=Z[u].in*n.defaultDPI)),i*parseFloat(g)}function P(g){if(!(g.hasAttribute("transform")||g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))))return null;const u=W(g);return te.length>0&&u.premultiply(te[te.length-1]),ge.copy(u),te.push(u),u}function W(g){const u=new ko,i=ie;if(g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))){const r=z(g.getAttribute("x")),b=z(g.getAttribute("y"));u.translate(r,b)}if(g.hasAttribute("transform")){const r=g.getAttribute("transform").split(")");for(let b=r.length-1;b>=0;b--){const k=r[b].trim();if(k==="")continue;const y=k.indexOf("("),_=k.length;if(y>0&&y<_){const N=k.slice(0,y),S=x(k.slice(y+1));switch(i.identity(),N){case"translate":if(S.length>=1){const w=S[0];let L=0;S.length>=2&&(L=S[1]),i.translate(w,L)}break;case"rotate":if(S.length>=1){let w=0,L=0,Q=0;w=S[0]*Math.PI/180,S.length>=3&&(L=S[1],Q=S[2]),ne.makeTranslation(-L,-Q),B.makeRotation(w),O.multiplyMatrices(B,ne),ne.makeTranslation(L,Q),i.multiplyMatrices(ne,O)}break;case"scale":if(S.length>=1){const w=S[0];let L=w;S.length>=2&&(L=S[1]),i.scale(w,L)}break;case"skewX":S.length===1&&i.set(1,Math.tan(S[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":S.length===1&&i.set(1,0,0,Math.tan(S[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":S.length===6&&i.set(S[0],S[2],S[4],S[1],S[3],S[5],0,0,1);break}}u.premultiply(i)}}return u}function X(g,u){function i(y){f.set(y.x,y.y,1).applyMatrix3(u),y.set(f.x,f.y)}function r(y){const _=y.xRadius,N=y.yRadius,S=Math.cos(y.aRotation),w=Math.sin(y.aRotation),L=new je(_*S,_*w,0),Q=new je(-N*w,N*S,0),d=L.applyMatrix3(u),h=Q.applyMatrix3(u),l=ie.set(d.x,h.x,0,d.y,h.y,0,0,0,1),J=ne.copy(l).invert(),Ze=B.copy(J).transpose().multiply(J).elements,Fe=re(Ze[0],Ze[1],Ze[4]),Ve=Math.sqrt(Fe.rt1),xt=Math.sqrt(Fe.rt2);if(y.xRadius=1/Ve,y.yRadius=1/xt,y.aRotation=Math.atan2(Fe.sn,Fe.cs),!((y.aEndAngle-y.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const tt=ne.set(Ve,0,0,0,xt,0,0,0,1),it=B.set(Fe.cs,Fe.sn,0,-Fe.sn,Fe.cs,0,0,0,1),V=tt.multiply(it).multiply(l),ye=q=>{const{x:Se,y:xe}=new je(Math.cos(q),Math.sin(q),0).applyMatrix3(V);return Math.atan2(xe,Se)};y.aStartAngle=ye(y.aStartAngle),y.aEndAngle=ye(y.aEndAngle),R(u)&&(y.aClockwise=!y.aClockwise)}}function b(y){const _=$(u),N=C(u);y.xRadius*=_,y.yRadius*=N;const S=_>Number.EPSILON?Math.atan2(u.elements[1],u.elements[0]):Math.atan2(-u.elements[3],u.elements[4]);y.aRotation+=S,R(u)&&(y.aStartAngle*=-1,y.aEndAngle*=-1,y.aClockwise=!y.aClockwise)}const k=g.subPaths;for(let y=0,_=k.length;y<_;y++){const S=k[y].curves;for(let w=0;w<S.length;w++){const L=S[w];L.isLineCurve?(i(L.v1),i(L.v2)):L.isCubicBezierCurve?(i(L.v0),i(L.v1),i(L.v2),i(L.v3)):L.isQuadraticBezierCurve?(i(L.v0),i(L.v1),i(L.v2)):L.isEllipseCurve&&(ue.set(L.aX,L.aY),i(ue),L.aX=ue.x,L.aY=ue.y,j(u)?r(L):b(L))}}}function R(g){const u=g.elements;return u[0]*u[4]-u[1]*u[3]<0}function j(g){const u=g.elements,i=u[0]*u[3]+u[1]*u[4];if(i===0)return!1;const r=$(g),b=C(g);return Math.abs(i/(r*b))>Number.EPSILON}function $(g){const u=g.elements;return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function C(g){const u=g.elements;return Math.sqrt(u[3]*u[3]+u[4]*u[4])}function re(g,u,i){let r,b,k,y,_;const N=g+i,S=g-i,w=Math.sqrt(S*S+4*u*u);return N>0?(r=.5*(N+w),_=1/r,b=g*_*i-u*_*u):N<0?b=.5*(N-w):(r=.5*w,b=-.5*w),S>0?k=S+w:k=S-w,Math.abs(k)>2*Math.abs(u)?(_=-2*u/k,y=1/Math.sqrt(1+_*_),k=_*y):Math.abs(u)===0?(k=1,y=0):(_=-.5*k/u,k=1/Math.sqrt(1+_*_),y=_*k),S>0&&(_=k,k=-y,y=_),{rt1:r,rt2:b,cs:k,sn:y}}const D=[],Y={},te=[],ie=new ko,ne=new ko,B=new ko,O=new ko,ue=new Be,f=new je,ge=new ko,me=new DOMParser().parseFromString(e,"image/svg+xml");return t(me.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:D,xml:me.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(M,x,U,Z){const z=M.x,P=x.x,W=U.x,X=Z.x,R=M.y,j=x.y,$=U.y,C=Z.y,re=(X-W)*(R-$)-(C-$)*(z-W),D=(P-z)*(R-$)-(j-R)*(z-W),Y=(C-$)*(P-z)-(X-W)*(j-R),te=re/Y,ie=D/Y;if(Y===0&&re!==0||te<=0||te>=1||ie<0||ie>1)return null;if(re===0&&Y===0){for(let ne=0;ne<2;ne++)if(a(ne===0?U:Z,M,x),o.loc==t.ORIGIN){const B=ne===0?U:Z;return{x:B.x,y:B.y,t:o.t}}else if(o.loc==t.BETWEEN){const B=+(z+o.t*(P-z)).toPrecision(10),O=+(R+o.t*(j-R)).toPrecision(10);return{x:B,y:O,t:o.t}}return null}else{for(let O=0;O<2;O++)if(a(O===0?U:Z,M,x),o.loc==t.ORIGIN){const ue=O===0?U:Z;return{x:ue.x,y:ue.y,t:o.t}}const ne=+(z+te*(P-z)).toPrecision(10),B=+(R+te*(j-R)).toPrecision(10);return{x:ne,y:B,t:te}}}function a(M,x,U){const Z=U.x-x.x,z=U.y-x.y,P=M.x-x.x,W=M.y-x.y,X=Z*W-P*z;if(M.x===x.x&&M.y===x.y){o.loc=t.ORIGIN,o.t=0;return}if(M.x===U.x&&M.y===U.y){o.loc=t.DESTINATION,o.t=1;return}if(X<-Number.EPSILON){o.loc=t.LEFT;return}if(X>Number.EPSILON){o.loc=t.RIGHT;return}if(Z*P<0||z*W<0){o.loc=t.BEHIND;return}if(Math.sqrt(Z*Z+z*z)<Math.sqrt(P*P+W*W)){o.loc=t.BEYOND;return}let R;Z!==0?R=P/Z:R=W/z,o.loc=t.BETWEEN,o.t=R}function c(M,x){const U=[],Z=[];for(let z=1;z<M.length;z++){const P=M[z-1],W=M[z];for(let X=1;X<x.length;X++){const R=x[X-1],j=x[X],$=s(P,W,R,j);$!==null&&U.find(C=>C.t<=$.t+Number.EPSILON&&C.t>=$.t-Number.EPSILON)===void 0&&(U.push($),Z.push(new Be($.x,$.y)))}}return Z}function v(M,x,U){const Z=new Be;x.getCenter(Z);const z=[];return U.forEach(P=>{P.boundingBox.containsPoint(Z)&&c(M,P.points).forEach(X=>{z.push({identifier:P.identifier,isCW:P.isCW,point:X})})}),z.sort((P,W)=>P.point.x-W.point.x),z}function I(M,x,U,Z,z){(z==null||z==="")&&(z="nonzero");const P=new Be;M.boundingBox.getCenter(P);const W=[new Be(U,P.y),new Be(Z,P.y)],X=v(W,M.boundingBox,x);X.sort((D,Y)=>D.point.x-Y.point.x);const R=[],j=[];X.forEach(D=>{D.identifier===M.identifier?R.push(D):j.push(D)});const $=R[0].point.x,C=[];let re=0;for(;re<j.length&&j[re].point.x<$;)C.length>0&&C[C.length-1]===j[re].identifier?C.pop():C.push(j[re].identifier),re++;if(C.push(M.identifier),z==="evenodd"){const D=C.length%2===0,Y=C[C.length-2];return{identifier:M.identifier,isHole:D,for:Y}}else if(z==="nonzero"){let D=!0,Y=null,te=null;for(let ie=0;ie<C.length;ie++){const ne=C[ie];D?(te=x[ne].isCW,D=!1,Y=ne):te!==x[ne].isCW&&(te=x[ne].isCW,D=!0)}return{identifier:M.identifier,isHole:D,for:Y}}else console.warn('fill-rule: "'+z+'" is currently not implemented.')}let H=999999999,E=-999999999,A=e.subPaths.map(M=>{const x=M.getPoints();let U=-999999999,Z=999999999,z=-999999999,P=999999999;for(let W=0;W<x.length;W++){const X=x[W];X.y>U&&(U=X.y),X.y<Z&&(Z=X.y),X.x>z&&(z=X.x),X.x<P&&(P=X.x)}return E<=z&&(E=z+1),H>=P&&(H=P-1),{curves:M.curves,points:x,isCW:Jr.isClockWise(x),identifier:-1,boundingBox:new Kr(new Be(P,Z),new Be(z,U))}});A=A.filter(M=>M.points.length>1);for(let M=0;M<A.length;M++)A[M].identifier=M;const m=A.map(M=>I(M,A,H,E,e.userData?e.userData.style.fillRule:void 0)),T=[];return A.forEach(M=>{if(!m[M.identifier].isHole){const U=new ei;U.curves=M.curves,m.filter(z=>z.isHole&&z.for===M.identifier).forEach(z=>{const P=A[z.identifier],W=new Yn;W.curves=P.curves,U.holes.push(W)}),T.push(U)}}),T}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],a=[],c=[];if(Gn.pointsToStrokeWithBuffers(e,n,t,o,s,a,c)===0)return null;const v=new ho;return v.setAttribute("position",new $o(s,3)),v.setAttribute("normal",new $o(a,3)),v.setAttribute("uv",new $o(c,2)),v}static pointsToStrokeWithBuffers(e,n,t,o,s,a,c,v){const I=new Be,H=new Be,E=new Be,A=new Be,m=new Be,T=new Be,M=new Be,x=new Be,U=new Be,Z=new Be,z=new Be,P=new Be,W=new Be,X=new Be,R=new Be,j=new Be,$=new Be;t=t!==void 0?t:12,o=o!==void 0?o:.001,v=v!==void 0?v:0,e=S(e);const C=e.length;if(C<2)return 0;const re=e[0].equals(e[C-1]);let D,Y=e[0],te;const ie=n.strokeWidth/2,ne=1/(C-1);let B=0,O,ue,f,ge,me=!1,Pe=0,g=v*3,u=v*2;i(e[0],e[1],I).multiplyScalar(ie),x.copy(e[0]).sub(I),U.copy(e[0]).add(I),Z.copy(x),z.copy(U);for(let w=1;w<C;w++){D=e[w],w===C-1?re?te=e[1]:te=void 0:te=e[w+1];const L=I;if(i(Y,D,L),E.copy(L).multiplyScalar(ie),P.copy(D).sub(E),W.copy(D).add(E),O=B+ne,ue=!1,te!==void 0){i(D,te,H),E.copy(H).multiplyScalar(ie),X.copy(D).sub(E),R.copy(D).add(E),f=!0,E.subVectors(te,Y),L.dot(E)<0&&(f=!1),w===1&&(me=f),E.subVectors(te,D),E.normalize();const Q=Math.abs(L.dot(E));if(Q>Number.EPSILON){const d=ie/Q;E.multiplyScalar(-d),A.subVectors(D,Y),m.copy(A).setLength(d).add(E),j.copy(m).negate();const h=m.length(),l=A.length();A.divideScalar(l),T.subVectors(te,D);const J=T.length();switch(T.divideScalar(J),A.dot(j)<l&&T.dot(j)<J&&(ue=!0),$.copy(m).add(D),j.add(D),ge=!1,ue?f?(R.copy(j),W.copy(j)):(X.copy(j),P.copy(j)):k(),n.strokeLineJoin){case"bevel":y(f,ue,O);break;case"round":_(f,ue),f?b(D,P,X,O,0):b(D,R,W,O,1);break;case"miter":case"miter-clip":default:const fe=ie*n.strokeMiterLimit/h;if(fe<1)if(n.strokeLineJoin!=="miter-clip"){y(f,ue,O);break}else _(f,ue),f?(T.subVectors($,P).multiplyScalar(fe).add(P),M.subVectors($,X).multiplyScalar(fe).add(X),r(P,O,0),r(T,O,0),r(D,O,.5),r(D,O,.5),r(T,O,0),r(M,O,0),r(D,O,.5),r(M,O,0),r(X,O,0)):(T.subVectors($,W).multiplyScalar(fe).add(W),M.subVectors($,R).multiplyScalar(fe).add(R),r(W,O,1),r(T,O,1),r(D,O,.5),r(D,O,.5),r(T,O,1),r(M,O,1),r(D,O,.5),r(M,O,1),r(R,O,1));else ue?(f?(r(U,B,1),r(x,B,0),r($,O,0),r(U,B,1),r($,O,0),r(j,O,1)):(r(U,B,1),r(x,B,0),r($,O,1),r(x,B,0),r(j,O,0),r($,O,1)),f?X.copy($):R.copy($)):f?(r(P,O,0),r($,O,0),r(D,O,.5),r(D,O,.5),r($,O,0),r(X,O,0)):(r(W,O,1),r($,O,1),r(D,O,.5),r(D,O,.5),r($,O,1),r(R,O,1)),ge=!0;break}}else k()}else k();!re&&w===C-1&&N(e[0],Z,z,f,!0,B),B=O,Y=D,x.copy(X),U.copy(R)}if(!re)N(D,P,W,f,!1,O);else if(ue&&s){let w=$,L=j;me!==f&&(w=j,L=$),f?(ge||me)&&(L.toArray(s,0*3),L.toArray(s,3*3),ge&&w.toArray(s,1*3)):(ge||!me)&&(L.toArray(s,1*3),L.toArray(s,3*3),ge&&w.toArray(s,0*3))}return Pe;function i(w,L,Q){return Q.subVectors(L,w),Q.set(-Q.y,Q.x).normalize()}function r(w,L,Q){s&&(s[g]=w.x,s[g+1]=w.y,s[g+2]=0,a&&(a[g]=0,a[g+1]=0,a[g+2]=1),g+=3,c&&(c[u]=L,c[u+1]=Q,u+=2)),Pe+=3}function b(w,L,Q,d,h){I.copy(L).sub(w).normalize(),H.copy(Q).sub(w).normalize();let l=Math.PI;const J=I.dot(H);Math.abs(J)<1&&(l=Math.abs(Math.acos(J))),l/=t,E.copy(L);for(let fe=0,Xe=t-1;fe<Xe;fe++)A.copy(E).rotateAround(w,l),r(E,d,h),r(A,d,h),r(w,d,.5),E.copy(A);r(A,d,h),r(Q,d,h),r(w,d,.5)}function k(){r(U,B,1),r(x,B,0),r(P,O,0),r(U,B,1),r(P,O,0),r(W,O,1)}function y(w,L,Q){L?w?(r(U,B,1),r(x,B,0),r(P,O,0),r(U,B,1),r(P,O,0),r(j,O,1),r(P,Q,0),r(X,Q,0),r(j,Q,.5)):(r(U,B,1),r(x,B,0),r(W,O,1),r(x,B,0),r(j,O,0),r(W,O,1),r(W,Q,1),r(j,Q,0),r(R,Q,1)):w?(r(P,Q,0),r(X,Q,0),r(D,Q,.5)):(r(W,Q,1),r(R,Q,0),r(D,Q,.5))}function _(w,L){L&&(w?(r(U,B,1),r(x,B,0),r(P,O,0),r(U,B,1),r(P,O,0),r(j,O,1),r(P,B,0),r(D,O,.5),r(j,O,1),r(D,O,.5),r(X,B,0),r(j,O,1)):(r(U,B,1),r(x,B,0),r(W,O,1),r(x,B,0),r(j,O,0),r(W,O,1),r(W,B,1),r(j,O,0),r(D,O,.5),r(D,O,.5),r(j,O,0),r(R,B,1)))}function N(w,L,Q,d,h,l){switch(n.strokeLineCap){case"round":h?b(w,Q,L,l,.5):b(w,L,Q,l,.5);break;case"square":if(h)I.subVectors(L,w),H.set(I.y,-I.x),E.addVectors(I,H).add(w),A.subVectors(H,I).add(w),d?(E.toArray(s,1*3),A.toArray(s,0*3),A.toArray(s,3*3)):(E.toArray(s,1*3),c[3*2+1]===1?A.toArray(s,3*3):E.toArray(s,3*3),A.toArray(s,0*3));else{I.subVectors(Q,w),H.set(I.y,-I.x),E.addVectors(I,H).add(w),A.subVectors(H,I).add(w);const J=s.length;d?(E.toArray(s,J-1*3),A.toArray(s,J-2*3),A.toArray(s,J-4*3)):(A.toArray(s,J-2*3),E.toArray(s,J-1*3),A.toArray(s,J-4*3))}break}}function S(w){let L=!1;for(let d=1,h=w.length-1;d<h;d++)if(w[d].distanceTo(w[d+1])<o){L=!0;break}if(!L)return w;const Q=[];Q.push(w[0]);for(let d=1,h=w.length-1;d<h;d++)w[d].distanceTo(w[d+1])>=o&&Q.push(w[d]);return Q.push(w[w.length-1]),Q}}}function Yi(p,e,n,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=n,a=8,c=24,v=.075,I=200;let H,E=[],A=[],m=[],T=[];const M=(P,W,X,R)=>{const j=new Ho(P,P,P),$=new Qo(j),C=[new zt({color:16711680,transparent:!0,opacity:R.opacity,blending:Jt}),new zt({color:65280,transparent:!0,opacity:R.opacity,blending:Jt}),new zt({color:255,transparent:!0,opacity:R.opacity,blending:Jt}),new zt({color:65535,transparent:!0,opacity:R.opacity,blending:Jt}),new zt({color:16711935,transparent:!0,opacity:R.opacity,blending:Jt}),new zt({color:16776960,transparent:!0,opacity:R.opacity,blending:Jt})],re=new Ft,D=$.getAttribute("position").array,Y=[];for(let ne=0;ne<D.length/3;ne+=2)Y.push(ne,ne+1);const te=Array(6).fill(null).map(()=>new ho),ie=Array(6).fill(null).map(()=>[]);for(let ne=0;ne<Y.length/2;ne++){const B=ne%6;ie[B].push(Y[ne*2],Y[ne*2+1])}return te.forEach((ne,B)=>{ne.setIndex(ie[B]),ne.setAttribute("position",$.getAttribute("position"));const O=new gt(ne,C[B]);re.add(O)}),re.position.z=W,re.rotation.z=X,re};if((()=>{const X=.9/(c-1);for(let Y=0;Y<c;Y++)A[Y]=new zt({transparent:!0,opacity:1-Y*X});if(H=new Ft,!H){console.error("introGroup failed to initialize");return}for(let Y=0;Y<c;Y++){const te=o-Y*a,ie=M(te,0,0,A[Y]),ne=ie.children.map(B=>B.material);T.push(ne.map(B=>({material:B,originalColor:B.color.clone()}))),H.add(ie)}H.position.z=s,p.add(H),E.push(H),m=A.map(Y=>Y.opacity);const R=ze.timeline({repeat:-1});R.to(H.rotation,{x:Ke.degToRad(360),duration:12,ease:"none"},0),R.to(H.rotation,{y:Ke.degToRad(360),duration:10,ease:"none"},0),R.to(H.rotation,{z:Ke.degToRad(360),duration:14,ease:"none"},0);let j=-1,$=0;const C=v*1e3,re=c*C,D=Y=>{const te=Y%re/C,ie=Math.floor(te)%c;j!==-1&&Y-$>=C&&(T[j].forEach(O=>{O.material.opacity=m[j],O.material.color.copy(O.originalColor)}),j=-1),j===-1&&ie!==j&&(j=ie,$=Y,T[j].forEach(B=>{B.material.opacity=1,B.material.color.set(1,1,1)})),requestAnimationFrame(D)};requestAnimationFrame(D)})(),e.value){const P=U(e.value);p.add(P)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:E};function U(P){const W=new Ft,X=Z(P);X.position.set(0,-36,0),W.add(X),z(j=>{W.add(j),ze.fromTo(X.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const $=j.children.find(C=>C instanceof Ye&&C!==j.children[0]);if($){const C=$.position.y;ze.to($.position,{y:C+3,duration:1,ease:"easeOut",onComplete:()=>{$.position.y=C},repeat:-1})}}),W.position.x=0,W.position.y=-240;const R=s-c*a;return W.position.z=R+I,W}function Z(P){const W=new Ln("SCROLL TO CONTINUE",{font:P,size:8,depth:0,curveSegments:12,bevelEnabled:!1});W.computeBoundingBox(),W.center();const X=new lt({color:16777215,transparent:!0,opacity:1});return new Ye(W,X)}function z(P){new Gn().load("/3D/mouse.svg",X=>{const R=X.paths;let j=null,$=null,C=new Ft;if(R.forEach((re,D)=>{Gn.createShapes(re).forEach(te=>{const ie=new ti(te);ie.computeBoundingBox();const ne=new lt({color:16777215,transparent:!0,opacity:1,side:Yt}),B=new Ye(ie,ne);B.scale.set(.05,.05,1),D===0?j=B:D===1&&($=B)})}),j&&$){C.add(j),C.add($);const D=(j.geometry.boundingBox.max.x-j.geometry.boundingBox.min.x)*j.scale.x/2;C.position.x=-D,C.rotation.x=Math.PI,P(C)}})}}function Vi(p,e,n,t,o,s,a,c){const v=fn(),I=or(),{CUBE_SIZE:H,CUBE_SPACING:E,FIRST_CUBE_Z:A}=e,m=A-(n.length+1)*E,T=65535,M=16711935,x=(T>>16&255)/255,U=(T>>8&255)/255,Z=(T&255)/255,z=(M>>16&255)/255,P=(M>>8&255)/255,W=(M&255)/255,X=Ke.degToRad(15),R=1e3,j=.5,$=65280,C=80,re=1,D=15,Y=.1,te="ENTER TO LEARN MORE",ie=I.isMobile?1:.5,ne=40,B=.125,O=100,ue=8,f=I.isMobile?1.5:2,ge=I.isMobile?2:3.5,me=1;let Pe=[];Pe.length=0;let g=[],u=!1,i=new oi,r=new Be,b=null,k=null,y=null,_=!1,N=null;const S=new Map,w=new Map,L=new Map,Q=(V,ye,q,Se,xe,be,ke)=>{const oe=new Ft;oe.name="group",oe.position.z=q,oe.rotation.z=Se,oe.userData.isActive=!1,oe.userData.cubeIndex=ke;const ve=new Ho(ye,ye,ye),le=new Qo(ve),Te=new zt({color:new At(T),transparent:!0,opacity:0}),We=new gt(le,Te);We.geometry.computeBoundingSphere(),oe.add(We);let $e="right";const Ne=ye/2,bt=()=>{const ee=v.isMobile?2:1,pe=25*ee,Ae=40*ee,K=new Ss(Ae,75),ce=new Qo(K),G=new zt({color:new At(T),transparent:!0,opacity:0,visible:!0}),F=new gt(ce,G);F.name="portal",F.userData.isPortal=!0,F.userData.isAnimating=!1,F.geometry.computeBoundingSphere();const De=80*ee,se=new ao(De,De),Me=new lt({visible:!1,side:Yt}),ae=new Ye(se,Me);ae.userData.isPortalHitbox=!0,ae.userData.portal=F,ae.geometry.computeBoundingSphere();const _e=new Ft,de=re*ee,Ee=D*ee,Ce=new ao(de,Ee),we=(pe+Ae)/2;for(let ot=0;ot<C;ot++){const Ot=new lt({color:new At(M),transparent:!0,opacity:0,visible:!1,side:Yt}),st=new Ye(Ce,Ot),at=ot/C*Math.PI*2;st.position.set(Math.cos(at)*we,Math.sin(at)*we,0),st.rotation.z=at+Math.PI/2,st.userData.baseOpacity=.01,st.userData.index=ot,st.geometry.computeBoundingSphere(),_e.add(st)}F.userData.pulsesGroup=_e;const Re=2*ee,qe=25;for(let ot=1;ot<qe;ot++){const Ot=new Ss(Ae,75),st=new Qo(Ot),at=Ke.lerp(.125,.1,ot/(qe-1)),oo=new zt({color:new At(T),transparent:!0,opacity:0}),_t=new gt(st,oo);_t.userData.isPortal=!0,_t.userData.maxOpacity=at,_t.position.z=-ot*Re,_t.geometry.computeBoundingSphere(),F.add(_t)}F.userData.maxOpacity=.125;let Oe=null;if(c.value){const ot=3*ee,Ot=new Ln(te,{font:c.value,size:ot,depth:0,curveSegments:12,bevelEnabled:!1});Ot.computeBoundingBox(),Ot.center();const st=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),at=new Ye(Ot,st);at.visible=!1,at.userData.isVisible=!1,at.userData.isExploreText=!0,at.userData.skipTextMeshes=!0;const oo=-45*ee;at.position.set(0,oo,0),at.name="textMesh",F.add(at),F.userData.exploreText=at;const _t=Ot.boundingBox,Ir=(_t.max.x-_t.min.x+10)*ee,Or=(_t.max.y-_t.min.y+10)*ee,Lr=new ao(Ir,Or),Br=new lt({transparent:!0,opacity:0,side:Yt,visible:!1});Oe=new Ye(Lr,Br),Oe.position.set(0,oo,0),Oe.userData.isExploreTextHitbox=!0,Oe.userData.portal=F,Oe.geometry.computeBoundingSphere(),Oe.name="textHitbox",F.add(Oe),F.userData.exploreTextHitbox=Oe;const zr=5,Wn=new Ln(V.title,{font:c.value,size:zr,depth:0,curveSegments:12,bevelEnabled:!1});Wn.computeBoundingBox(),Wn.center();const Nr=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),xo=new Ye(Wn,Nr);xo.visible=!1,xo.userData.isVisible=!1,xo.userData.isTitleText=!0,xo.userData.skipTextMeshes=!0;const Hr=v.isMobile?v.orientation==="portrait"?100:106:60;xo.position.set(0,Hr,0),F.add(xo),F.userData.titleText=xo}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const Le=new Ft;Le.name="closeGroup",Le.position.set(v.isMobile?Ae-10:Ae,Ae,2);const ut=new ao(12,I.isMobile?1:.5),Zt=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),yo=new Ye(ut,Zt);yo.rotation.z=Math.PI/4;const ft=new Ye(ut,Zt);ft.rotation.z=-Math.PI/4,Le.add(yo,ft);const nt=new ao(15*ee,15*ee),Wt=new lt({side:Yt,visible:!1}),io=new Ye(nt,Wt);switch(io.userData.isCloseHitbox=!0,io.geometry.computeBoundingSphere(),io.renderOrder=2,Le.add(io),$e){case"left":F.position.set(-Ne,0,0),F.rotation.y=Math.PI/2,ae.position.set(-Ne,0,0),ae.rotation.y=Math.PI/2,Se>=Ke.degToRad(120)&&(F.rotation.z=Math.PI),_e.children.forEach(ot=>ot.position.x+=Y);break;case"top":F.position.set(0,-Ne,0),F.rotation.x=-Math.PI/2,F.rotation.z=-Math.PI/2,ae.position.set(0,-Ne,0),ae.rotation.x=Math.PI/2,Se>=Ke.degToRad(100)&&Se>=Ke.degToRad(180)&&(F.rotation.z=Math.PI/2),_e.children.forEach(ot=>ot.position.y+=Y);break;case"right":F.position.set(Ne,0,0),F.rotation.y=-Math.PI/2,ae.position.set(Ne,0,0),ae.rotation.y=-Math.PI/2,Se>=Ke.degToRad(120)&&(F.rotation.z=Math.PI),_e.children.forEach(ot=>ot.position.x+=Y);break;case"bottom":F.position.set(0,Ne,0),F.rotation.x=Math.PI/2,F.rotation.z=-Math.PI/2,ae.position.set(0,Ne,0),ae.rotation.x=Math.PI/2,_e.children.forEach(ot=>ot.position.y+=Y);break}F.add(Le),F.userData.closeButton=Le,Le.updateMatrixWorld(!0),F.add(_e),oe.add(F),oe.add(ae),oe.userData.closeButton=Le,F.updateMatrixWorld(!0),_e.updateMatrixWorld(!0),Le.updateMatrixWorld(!0),S.set(oe,[]),w.set(oe,0),L.set(oe,0)},vt=ee=>{(ee instanceof gt||ee instanceof Ye)&&ee.geometry&&ee.geometry.computeBoundingSphere(),oe.add(ee)};if(xe&&s.showKeyarts){switch(["left","top","right","bottom"].includes(be)?be:"left"){case"left":$e="right";break;case"top":$e="bottom";break;case"right":$e="left";break;case"bottom":$e="top";break}const pe=a.get(xe);if(pe){const Ae=new ao(ye-1,ye-1),K=new lt({map:pe,transparent:!0,opacity:0,blending:Jt,side:Yt}),ce=new Ye(Ae,K);switch(ce.userData.isLoaded=!0,be){case"left":ce.position.set(-Ne,0,0),Se>=Ke.degToRad(120)?(ce.rotation.y=Math.PI/2,ce.rotation.z=-Math.PI):ce.rotation.y=Math.PI/2;break;case"top":ce.position.set(0,-Ne,0),ce.rotation.x=-Math.PI/2,ce.rotation.z=-Math.PI/2;break;case"right":ce.position.set(Ne,0,0),Se>=Ke.degToRad(120)?(ce.rotation.y=-Math.PI/2,ce.rotation.z=-Math.PI):ce.rotation.y=-Math.PI/2;break;case"bottom":ce.position.set(0,Ne,0),Se>=Ke.degToRad(180)?Se>=Ke.degToRad(220)?(ce.rotation.x=Math.PI/2,ce.rotation.z=Math.PI/2):(ce.rotation.x=-Math.PI/2,ce.rotation.z=Math.PI/2):(ce.rotation.x=Math.PI/2,ce.rotation.z=-Math.PI/2);break}ce.geometry.computeBoundingSphere(),vt(ce),bt()}else console.warn(`Keyart texture not preloaded for ${V.title}: ${xe}`),bt()}else bt();oe.userData.portalLocation=$e;{const ee=(De,se,Me,ae)=>{const _e=new ao(ye-1,ye-1),de={map:De,transparent:!0,opacity:0,blending:Jt,side:Yt,depthWrite:!1};ae&&(de.color=ae);const Ee=new lt(de),Ce=new Ye(_e,Ee);Ce.position.copy(se),Me.x&&(Ce.rotation.x=Me.x),Me.y&&(Ce.rotation.y=Me.y),Ce.userData.isGridPlane=!0,Ce.geometry.computeBoundingSphere(),vt(Ce)},pe=a.get(t),Ae=a.get(o),K=["left","top","right","bottom"],G=[xe&&s.showKeyarts?be||"left":null,$e].filter(Boolean),F=K.filter(De=>!G.includes(De));if(pe)switch(ee(pe,new je(0,0,-ye/2-1),{y:0}),ee(pe,new je(0,0,ye/2+1),{y:0},new At(16744448)),F[0]){case"left":ee(pe,new je(-Ne,0,0),{y:-Math.PI/2},new At(255));break;case"top":ee(pe,new je(0,Ne,0),{x:Math.PI/2},new At(255));break;case"right":ee(pe,new je(Ne,0,0),{y:Math.PI/2},new At(255));break;case"bottom":ee(pe,new je(0,-Ne,0),{x:-Math.PI/2},new At(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(Ae)switch(F[1]){case"left":ee(Ae,new je(-Ne,0,0),{y:-Math.PI/2});break;case"top":ee(Ae,new je(0,Ne,0),{x:Math.PI/2});break;case"right":ee(Ae,new je(Ne,0,0),{y:Math.PI/2});break;case"bottom":ee(Ae,new je(0,-Ne,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}oe.children.forEach(ee=>{ee.updateMatrixWorld(!0),ee instanceof Ft&&ee.children.forEach(pe=>{pe.updateMatrixWorld(!0)})}),oe.updateMatrixWorld(!0);const ht=new sr().setFromObject(oe),It=new rr;return ht.getBoundingSphere(It),oe.boundingSphere=It,oe},d=new nr,h=(V,ye,q,Se,xe)=>{if(!c.value){console.warn("Font not available; skipping text creation for:",V);const ht=new ho,It=new lt({visible:!1});return new Ye(ht,It)}const be=new Ln(V,{font:c.value,size:xe,depth:0,curveSegments:12,bevelEnabled:!1});be.computeBoundingBox(),be.center();const ke=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),oe=new Ye(be,ke);oe.position.set(ye,q,Se);const ve=be.boundingBox,le=ve.max.x-ve.min.x,Te=ve.max.y-ve.min.y,We=le+8,$e=Te+4,Ne=new ao(We,$e),bt=new lt({color:0,transparent:!0,opacity:0,side:Yt}),vt=new Ye(Ne,bt);return vt.position.set(ye,q,Se-1),p.add(vt),p.add(oe),oe.userData.backgroundPlane=vt,oe},l=()=>{const V=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let ye=0;V.forEach((q,Se)=>{const xe=A-(Se+1)*E,be=(Se+1)*X,ke=Q(q,H,xe,be,q.keyart,q.keyartLocation,ye);p.add(ke),Pe.push(ke),ye++,h(q.title,0,q.size-15,A+90-(Se+1)*E,q.size)}),p.traverse(q=>{var Se;q instanceof Ye&&((Se=q.geometry)==null?void 0:Se.type)==="TextGeometry"&&!q.userData.skipTextMeshes&&g.push(q)})},J=()=>u?Promise.resolve({projectCubes:Pe,updateCubeColors:Ve,maxZ:m}):(l(),u=!0,Promise.resolve({projectCubes:Pe,updateCubeColors:Ve,maxZ:m})),fe=V=>{if(V.userData.isAnimating)return;V.userData.isAnimating=!0;const ye=V.userData.pulsesGroup;if(!ye){console.warn("Pulses group not found in portal.userData");return}const q=ye.children,Se=q.length,xe=ze.timeline({repeat:-1,defaults:{ease:"none"}}),be={value:0};xe.to(be,{value:1,duration:1.5,onUpdate:()=>{q.forEach(oe=>{const ve=oe.material;if(ve.visible){const le=(oe.userData.index/Se+be.value)%1,We=(Math.sin(le*Math.PI*2)+1)/2;ve.opacity=.01+(1-.01)*Math.pow(We,4)}})}}),V.userData.animationTimeline=xe},Xe=V=>{if(!V.userData.isAnimating)return;V.userData.isAnimating=!1;const ye=V.userData.pulsesGroup;if(!ye){console.warn("Pulses group not found in portal.userData");return}V.userData.animationTimeline&&(V.userData.animationTimeline.kill(),delete V.userData.animationTimeline),ye.children.forEach(q=>{const Se=q.material;Se.opacity=0})},Ze=(V,ye)=>{let q;const Se=(L.get(V)||0)+1;L.set(V,Se),Se%ue===0?q=new ni(f,ge,12,1):q=new Ho(ie,ie,ie);const xe=new lt({color:16777215,transparent:!0,opacity:0}),be=new Ye(q,xe);be.position.set(0,0,0);const ke=ye.position.clone(),oe=ke.clone().normalize(),ve=ke.length()+O;if(Se%ue===0){const Te=be.position.clone().add(oe);be.lookAt(Te),be.rotateX(Math.PI/2)}V.add(be),ze.to(xe,{opacity:.5,duration:me,ease:"power2.in",overwrite:"auto"});const le=S.get(V)||[];le.push({mesh:be,direction:oe,distanceTraveled:0,totalDistance:ve}),S.set(V,le)},Fe=V=>{(S.get(V)||[]).forEach(q=>{V.remove(q.mesh),q.mesh.geometry.dispose(),q.mesh.material.dispose()}),S.set(V,[])},Ve=V=>{d.setFromProjectionMatrix(V.projectionMatrix.clone().multiply(V.matrixWorldInverse));const ye=V.position.z;Pe.forEach((q,Se)=>{const xe=q.boundingSphere;if(xe){const ve=xe.clone();if(ve.radius*=1.5,!d.intersectsSphere(ve))return}else console.warn(`Cube ${Se} has no boundingSphere`);const be=q.position.z,ke=Math.abs(ye-be);let oe=0;ke<=R&&(oe=1-ke/R),q.userData.isActive=oe>=j,q.children.forEach(ve=>{if(ve instanceof gt&&!ve.userData.isPortal&&!ve.userData.isPortalHitbox){const le=ve.material;if(ke<=R){const Te=Ke.lerp(x,z,oe),We=Ke.lerp(U,P,oe),$e=Ke.lerp(Z,W,oe);le.color.set(Te,We,$e),le.opacity=Math.min(1,oe*2)}else le.opacity=0}else if(ve instanceof gt&&ve.userData.isPortal){ve.children.forEach(Te=>{if(Te instanceof Ye&&Te.userData.isExploreText){const We=Te.material;if(Te===ve.userData.titleText&&_)return;if(ke<=R){const $e=1-ke/R;We.opacity=Math.min(1,$e*2),Te.visible=!0}else We.opacity=0,Te.visible=!1}});const le=ve.userData.pulsesGroup;oe>.1?le&&le.children.forEach(Te=>{Te instanceof Ye&&(Te.material.visible=!0,!ve.userData.animationStarted&&s.showPortalPulses&&(fe(ve),ve.userData.animationStarted=!0))}):oe<=.1&&ve.userData.animationStarted&&(le&&le.children.forEach(Te=>{Te instanceof Ye&&(Te.material.visible=!1)}),Xe(ve),delete ve.userData.animationStarted)}else if(ve instanceof Ye&&!ve.userData.isPortalHitbox&&!ve.userData.isCloseHitbox){const le=ve.material;if(ve.userData.isLoaded||ve.userData.isGridPlane)if(ke<=R){const Te=1-ke/R;le.opacity=Math.min(.8,Te*2),ve.visible=!0}else le.opacity=0,ve.visible=!1}})}),g.forEach(q=>{if(!d.intersectsObject(q))return;const Se=q.material,xe=q.userData.backgroundPlane,be=xe==null?void 0:xe.material,ke=q.position.z,oe=Math.abs(ye-ke+120);if(_){Se.opacity=0,be&&(be.opacity=0);return}if(oe<=R){const ve=1-oe/R,le=Math.min(1,ve*2);Se.opacity=le,be&&(be.opacity=le*.8)}else Se.opacity=0,be&&(be.opacity=0)})},xt=(V,ye)=>{const q=performance.now()/1e3,Se=V.position.z;Pe.forEach(xe=>{const be=xe.position.z;if(Math.abs(Se-be+90)<=R&&!_){const oe=w.get(xe)||0;if(q-oe>=B){const Te=xe.children.find(We=>We instanceof gt&&We.userData.isPortal);Te&&(Ze(xe,Te),w.set(xe,q))}const le=(S.get(xe)||[]).filter(Te=>{if(Te.distanceTraveled+=ne*ye,Te.mesh.position.copy(Te.direction.clone().multiplyScalar(Te.distanceTraveled)),(Te.totalDistance-Te.distanceTraveled)/ne<=me&&!Te.isFadingOut){Te.isFadingOut=!0;const Ne=Te.mesh.material;ze.to(Ne,{opacity:0,duration:me,ease:"power2.out",overwrite:"auto"})}return Te.distanceTraveled>=Te.totalDistance?(xe.remove(Te.mesh),Te.mesh.geometry.dispose(),Te.mesh.material.dispose(),!1):!0});S.set(xe,le)}else Fe(xe)})},Je=V=>{const ye=[V,...V.children.filter(xe=>xe instanceof gt&&xe.userData.isPortal)],q=2,Se=.1;ye.forEach((xe,be)=>{const ke=xe.material;ke.opacity=xe.userData.maxOpacity;const oe=ze.timeline({repeat:-1,delay:be*Se});oe.to(ke,{opacity:0,duration:q/2,ease:"power2.inOut"}).to(ke,{opacity:xe.userData.maxOpacity,duration:q/2,ease:"power2.inOut"}),xe.userData.marqueeTimeline=oe})},tt=V=>{const ye=[V,...V.children.filter(q=>q instanceof gt&&q.userData.isPortal)];ye.forEach(q=>{q.userData.marqueeTimeline&&(q.userData.marqueeTimeline.kill(),delete q.userData.marqueeTimeline)}),V.userData.ringExpandTimeline&&(V.userData.ringExpandTimeline.kill(),delete V.userData.ringExpandTimeline),ye.forEach((q,Se)=>{const xe=q.material;ze.killTweensOf(q.position),ze.killTweensOf(xe),q.position.z=-Se*2,xe.opacity=0})};return{getInitializedData:J,updateCubeColors:Ve,setupInteractivity:(V,ye,q,Se,xe)=>{N=Se;let be=null,ke=null,oe=null,ve=!1,le=!1,Te=!1,We=!1,$e=!1;const Ne=G=>{_&&(be=G.touches[0].clientY,ke=ke??window.scrollY,ve=!0)},bt=G=>{if(!_||!oe||!be||We)return;const De=G.touches[0].clientY-be;v.isMobile&&De<-50&&!le&&(G.cancelable&&G.preventDefault(),It(),be=null)},vt=G=>{be=null,ve=!1,Te=!0,ze.delayedCall(.5,()=>{Te=!1})},ht=G=>{if(ve||le||Te||We){G.preventDefault(),G.stopPropagation(),ke!==null&&(window.scrollTo(0,ke),ze.to(window,{scrollTo:{y:ke},duration:0}));return}if(!_||!oe||!k||!y)return;if(v.isMobile){G.preventDefault(),G.stopPropagation();return}let F=0;if(G instanceof WheelEvent?F=G.deltaY:F=window.scrollY-(ke||0),G.preventDefault(),G.stopPropagation(),F>0){window.scrollTo(0,ke);return}F<0&&It()},It=()=>{const G=oe,F=y?y.clone():new je(0,0,m),De=(k==null?void 0:k.z)??V.position.z,se=G==null?void 0:G.parent,Me=G?Pe.indexOf(se):-1;if(We=!0,G){tt(G);const de=G.userData.titleText;if(de){const Ee=de.material;ze.to(Ee,{opacity:0,duration:.5,ease:"power2.out",onComplete:()=>{de.visible=!1}})}if(G.userData.closeButton){const Ee=G.userData.closeButton,Ce=Ee.children.filter(we=>we instanceof Ye&&!we.userData.isCloseHitbox).map(we=>we.material);Ce.length>0&&ze.to(Ce,{opacity:0,duration:.5,ease:"power2.out",onComplete:()=>{Ee.visible=!1}})}}ze.to(V.position,{x:(k==null?void 0:k.x)??V.position.x,y:(k==null?void 0:k.y)??V.position.y,z:De,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const de=g[Me];if(Me!==-1&&de){const Ee=de.material,Ce=de.userData.backgroundPlane,we=Math.abs(V.position.z-de.position.z+120),Re=we<=R?Math.min(1,(1-we/R)*2):0;ze.to(Ee,{opacity:Re,duration:.5,ease:"power2.in"}),Ce&&ze.to(Ce.material,{opacity:Re*.8,duration:.5,ease:"power2.in"})}},onUpdate:()=>{const de=_e.progress,Ee=Ke.lerp(ae.x,F.x,de),Ce=Ke.lerp(ae.y,F.y,de),we=Ke.lerp(ae.z,F.z,de);V.lookAt(Ee,Ce,we),V.updateMatrixWorld(!0)},onComplete:()=>{V.lookAt(F),_=!1,oe=null,document.body.classList.remove("no-scrollbar"),v.isMobile&&(document.body.style.overflow=""),N&&N(!1),ke=null,k=null,y=null,V.userData.lockedLookAt=null,We=!1,Pe.forEach(de=>{Math.abs(V.position.z-de.position.z+90)<=R&&w.set(de,0)})}});const ae=V.userData.lockedLookAt?V.userData.lockedLookAt.clone():V.getWorldDirection(new je).multiplyScalar(1e3).add(V.position),_e={progress:0};ze.to(_e,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},ee=(G,F=!0)=>{const De=[G,...G.children.filter(ae=>ae instanceof gt&&ae.userData.isPortal)],se=F?25:2,Me=ze.timeline({onComplete:()=>{F&&De[0]===G&&Je(G)}});De.forEach((ae,_e)=>{let de=-_e*se;(G.position.y>0&&G.rotation.x===-Math.PI/2||G.position.y<0&&G.rotation.x===Math.PI/2)&&(de=_e*se);const Ee=F?ae.userData.maxOpacity:0;Me.to(ae.position,{z:de,duration:1,ease:"power3.out",delay:.5},0),Me.to(ae.material,{opacity:Ee,duration:1,ease:"power3.out",delay:.5},0)}),G.userData.ringExpandTimeline=Me},pe=G=>{r.x=G.clientX/window.innerWidth*2-1,r.y=-(G.clientY/window.innerHeight)*2+1,i.setFromCamera(r,V),V.userData.lockedLookAt&&(V.lookAt(V.userData.lockedLookAt),V.updateMatrixWorld(!0)),Pe.forEach(se=>{se.userData.lockedPosition&&(se.position.equals(se.userData.lockedPosition)||se.position.copy(se.userData.lockedPosition)),se.updateMatrixWorld(!0),se.children.forEach(Me=>Me.updateMatrixWorld(!0))});const F=Pe.flatMap(se=>{const Me=[];return!_&&se.userData.isActive&&se.children.forEach(ae=>{ae instanceof Ye&&(ae.userData.isPortalHitbox||ae.userData.isExploreTextHitbox)&&Me.push(ae)}),_&&oe&&se===oe.parent&&se.children.forEach(ae=>{if(ae instanceof Ye&&ae.userData.isPortalHitbox&&Me.push(ae),ae instanceof gt&&ae.userData.isPortal){const _e=ae;_e.children.forEach(de=>{de instanceof Ye&&de.userData.isExploreTextHitbox&&Me.push(de),de instanceof Ft&&de===_e.userData.closeButton&&de.children.forEach(Ee=>{Ee instanceof Ye&&Ee.userData.isCloseHitbox&&Me.push(Ee)})})}}),Me}),De=i.intersectObjects(F);if(De.length>0){const se=De[0].object;if(se.userData.isPortalHitbox||se.userData.isExploreTextHitbox){const Me=se.userData.portal;b!==Me&&(b&&[b,...b.children.filter(de=>de instanceof gt&&de.userData.isPortal)].forEach(de=>{const Ee=de.material;ze.to(Ee.color,{r:(T>>16&255)/255,g:(T>>8&255)/255,b:(T&255)/255,duration:.5})}),b=Me,[b,...b.children.filter(_e=>_e instanceof gt&&_e.userData.isPortal)].forEach(_e=>{const de=_e.material;ze.to(de.color,{r:($>>16&255)/255,g:($>>8&255)/255,b:($&255)/255,duration:.5})})),ye.style.cursor="pointer"}else if(se.userData.isCloseHitbox&&_){if(!$e){$e=!0;const Me=se.parent;ze.to(Me.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"})}ye.style.cursor="pointer"}}else{if(b&&([b,...b.children.filter(Me=>Me instanceof gt&&Me.userData.isPortal)].forEach(Me=>{const ae=Me.material;ze.to(ae.color,{r:(T>>16&255)/255,g:(T>>8&255)/255,b:(T&255)/255,duration:.5})}),b=null),_&&oe&&$e){const se=oe.userData.closeButton;se&&($e=!1,ze.to(se.rotation,{z:0,duration:.3,ease:"power2.inOut"}))}ye.style.cursor="auto"}},Ae=G=>{if(We)return;r.x=G.clientX/window.innerWidth*2-1,r.y=-(G.clientY/window.innerHeight)*2+1,i.setFromCamera(r,V);const F=Pe.flatMap(Ce=>{const we=[];return _&&oe&&Ce===oe.parent&&Ce.children.forEach(Re=>{if(Re instanceof gt&&Re.userData.isPortal){const qe=Re;qe.children.forEach(Oe=>{Oe instanceof Ft&&Oe===qe.userData.closeButton&&Oe.children.forEach(Le=>{Le instanceof Ye&&Le.userData.isCloseHitbox&&we.push(Le)})})}}),we}),De=Pe.flatMap(Ce=>{const we=[];return!_&&Ce.userData.isActive&&Ce.children.forEach(Re=>{Re instanceof Ye&&(Re.userData.isPortalHitbox||Re.userData.isExploreTextHitbox)&&we.push(Re)}),_&&oe&&Ce===oe.parent&&Ce.children.forEach(Re=>{Re instanceof Ye&&Re.userData.isPortalHitbox&&we.push(Re),Re instanceof gt&&Re.userData.isPortal&&Re.children.forEach(qe=>{qe instanceof Ye&&qe.userData.isExploreTextHitbox&&we.push(qe)})}),we});let se=i.intersectObjects(F);for(const Ce of se)if(Ce.object.userData.isCloseHitbox){It();return}if(se=i.intersectObjects(De),se.length===0)return;const ae=se[0].object.userData.portal,_e=ae.parent,de=Pe.indexOf(_e),Ee=n[de];if(_&&ae===oe){let Ce=new je;const we=e.CUBE_SIZE/2;ae.position.x===we?Ce.set(-1,0,0):ae.position.x===-we?Ce.set(1,0,0):ae.position.y===we?Ce.set(0,-1,0):ae.position.y===-we&&Ce.set(0,1,0),Ce.applyQuaternion(_e.getWorldQuaternion(new si)).normalize();const qe=V.position.clone().clone().add(Ce.clone().multiplyScalar(-675)),Oe=Ce.clone().multiplyScalar(-1e3),Le=qe.clone().add(Oe);We=!0,ze.to(V.position,{x:qe.x,y:qe.y,z:qe.z,duration:1,ease:"power2.in",onUpdate:()=>V.lookAt(Le),onStart:()=>{ze.to(q.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{Ee!=null&&Ee.slug&&(I.setScrollPosition(window.scrollY),Fr.visit(route("project.show",{project:Ee.slug}),{preserveScroll:!1})),We=!1}})}else if(!_){k||(k=V.position.clone(),y=new je(0,0,m)),N&&Se(!0,k,y);const Ce=ae.getWorldPosition(new je);le=!0,We=!0,ke=window.scrollY,ze.to(V.position,{x:0,y:0,z:_e.getWorldPosition(new je).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{_=!0,oe=ae,document.body.classList.add("no-scrollbar"),v.isMobile&&(document.body.style.overflow="hidden"),_e.userData.lockedPosition=_e.position.clone(),Fe(_e);const we=g[de];if(we){const qe=we.material,Oe=we.userData.backgroundPlane;ze.to(qe,{opacity:0,duration:.5,ease:"power2.out"}),Oe&&ze.to(Oe.material,{opacity:0,duration:.5,ease:"power2.out"})}const Re=ae.userData.titleText;if(Re){Re.visible=!0;const qe=Re.material;ze.to(qe,{opacity:1,duration:1,ease:"power2.in",delay:.5})}if(ae.userData.closeButton){const qe=ae.userData.closeButton;qe.visible=!0;const Oe=qe.children.filter(Le=>Le instanceof Ye&&!Le.userData.isCloseHitbox).map(Le=>Le.material);Oe.length>0&&ze.to(Oe,{opacity:1,duration:.5,ease:"power2.in",delay:.5})}},onComplete:()=>{ee(ae,!0),le=!1,We=!1,V.userData.lockedLookAt=Ce.clone()}}),ze.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const we=this.progress(),Re=V.getWorldDirection(new je).multiplyScalar(1e3).add(V.position),qe=Ke.lerp(Re.x,Ce.x,we),Oe=Ke.lerp(Re.y,Ce.y,we),Le=Ke.lerp(Re.z,Ce.z,we);V.lookAt(qe,Oe,Le)},onComplete:()=>{V.lookAt(Ce.x,Ce.y,Ce.z),V.updateMatrixWorld(!0)}})}};ye.addEventListener("mousemove",pe),ye.addEventListener("click",Ae),ye.addEventListener("touchstart",Ne,{passive:!1}),ye.addEventListener("touchmove",bt,{passive:!1}),ye.addEventListener("touchend",vt,{passive:!0}),window.addEventListener("wheel",ht,{passive:!1}),window.addEventListener("scroll",ht,{passive:!1});const K=()=>{S.forEach((G,F)=>{G.forEach(De=>{F.remove(De.mesh),De.mesh.geometry.dispose(),De.mesh.material.dispose()})}),S.clear(),w.clear(),L.clear()},ce=()=>{ye.removeEventListener("mousemove",pe),ye.removeEventListener("click",Ae),ye.removeEventListener("touchstart",Ne),ye.removeEventListener("touchmove",bt),ye.removeEventListener("touchend",vt),window.removeEventListener("wheel",ht),window.removeEventListener("scroll",ht),oe&&tt(oe),v.isMobile&&(document.body.style.overflow="")};return()=>{ce(),K()}},updateClickHereParticles:xt}}function ji(p,e,n,t){const o=fn(),s=100,a=100,c=300,v=3355443,I=o.isMobile?24:32,H=-600,E=-500,A=500,m=o.isMobile?5:10,T=.05,M=1,x=o.isMobile?6:4,U=o.isMobile?4:6,Z=100,z=-450,P=60,W=n-A,X=Math.abs(E-W),R=Math.ceil(X/s),j=()=>{const f=new Ft;let ge=null,me=null;const Pe=[],g=[],u=[],i=[],r=[];{const b=new Ho(s,s,s),k=new Qo(b),y=I*R,_=new ri;_.copy(k),_.instanceCount=y;const N=new zt({color:v,transparent:!0,fog:!0,vertexColors:!0}),S=new Float32Array(y*3),w=new Float32Array(y*3),L=new Float32Array(y*3),Q=I*s,d=-Q/2+s/2,h=E;for(let q=0;q<I;q++){const Se=$(q);for(let xe=0;xe<R;xe++){const be=q*R+xe,ke=d+q*s,oe=h-xe*s,ve=Ke.randFloat(a,c),le=ve/s,Te=H+ve/2;S[be*3]=ke,S[be*3+1]=Te,S[be*3+2]=oe,w[be*3]=1,w[be*3+1]=le,w[be*3+2]=1,L[be*3]=Se,L[be*3+1]=Se,L[be*3+2]=Se}}_.setAttribute("instancePosition",new Vn(S,3)),_.setAttribute("instanceScale",new Vn(w,3)),_.setAttribute("color",new Vn(L,3)),N.onBeforeCompile=q=>{q.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${q.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},ge=new gt(_,N);const l=-Q/2,J=Q/2,fe=H,Xe=H+c,Ze=W,Fe=E;_.boundingBox=new sr(new je(l,fe,Ze),new je(J,Xe,Fe));const Ve=(l+J)/2,xt=(fe+Xe)/2,Je=(Ze+Fe)/2,tt=J-l,it=Xe-fe,V=Fe-Ze,ye=Math.sqrt(tt*tt+it*it+V*V)/2;_.boundingSphere=new rr(new je(Ve,xt,Je),ye),f.add(ge)}{me=new Ft;const b=I*s/(U-1),k=-(I*s)/2;for(let _=0;_<U;_++){let S=k+_*b,w=E;const L=[new je(S,z,w)];let Q=0;for(;w>W;){const d=w===E?Ke.randFloat(300,800):Math.min(Ke.randFloat(300,800),Math.abs(w-W));if(w-=d,L.push(new je(S,z,w)),Q+=d,w<=W){L[L.length-1].z=W;break}const h=Math.random()<.5?-1:1,l=Ke.randFloat(100,300);S+=h*l,L.push(new je(S,z,w)),Q+=l}g.push({points:L,totalLength:Q})}const y=new Ho(x,x,x);for(let _=0;_<U;_++){const N=g[_],S=N.totalLength,w=S/P;for(let L=0;L<P;L++){const Q=new lt({color:16711680,fog:!0}),d=new Ye(y,Q),h=L*w;let l=h;for(let J=0;J<N.points.length-1;J++){const fe=N.points[J],Xe=N.points[J+1],Ze=fe.distanceTo(Xe);if(l<=Ze){const Fe=l/Ze;d.position.lerpVectors(fe,Xe,Fe);break}l-=Ze}Pe.push(d),u.push(h),i.push(_),r.push(1),me.add(d)}for(let L=0;L<P;L++){const Q=new lt({color:16777215,fog:!0}),d=new Ye(y,Q),h=S-(L*w+w/2);let l=S-h;const J=[...N.points].reverse();for(let fe=0;fe<J.length-1;fe++){const Xe=J[fe],Ze=J[fe+1],Fe=Xe.distanceTo(Ze);if(l<=Fe){const Ve=l/Fe;d.position.lerpVectors(Xe,Ze,Ve);break}l-=Fe}Pe.push(d),u.push(h),i.push(_),r.push(-1),me.add(d)}}e.add(me)}return e.add(f),{cityGroup:f,instancedLines:ge,particleGroup:me,particles:Pe,paths:g,particleDistances:u,particlePaths:i,particleDirections:r}},$=f=>{if(f<m){const ge=(M-T)/(m-1);return T+f*ge}else if(f>=I-m){const ge=I-1-f,me=(M-T)/(m-1);return T+ge*me}return M},{cityGroup:C,instancedLines:re,particleGroup:D,particles:Y,paths:te,particleDistances:ie,particlePaths:ne,particleDirections:B}=j();return{cityGroup:C,buildingLines:re?[re]:[],updateParticles:f=>{const ge=Z*f;for(let me=0;me<Y.length;me++){const Pe=B[me],g=ne[me],u=te[g],i=u.totalLength;ie[me]+=ge*Pe,Pe===1?(ie[me]=ie[me]%i,ie[me]<0&&(ie[me]+=i)):ie[me]=(ie[me]+i)%i;const r=ie[me],b=Pe===1?u.points:[...u.points].reverse();let k=Pe===1?r:i-r;for(let y=0;y<b.length-1;y++){const _=b[y],N=b[y+1],S=_.distanceTo(N);if(k<=S){const w=k/S;Y[me].position.lerpVectors(_,N,w);break}k-=S}}},dispose:()=>{re&&(C.remove(re),re.geometry.dispose(),re.material.dispose()),D&&(e.remove(D),D.children.forEach(f=>{f.geometry.dispose(),f.material.dispose()})),e.remove(C)}}}ze.registerPlugin(Ie);function Xi(p,e,n,t,o,s,a={},c,v){const I=fn(),{CUBE_SPACING:H,FIRST_CUBE_Z:E}=s,A=(t==null?void 0:t.length)||0,m=E-(A+1)*H;let T=!1,M=!1;const x=I.isMobile?(Math.abs(m)+(A-1)*H)*.7:Math.abs(m)+(A-1)*H;let U=ze.timeline();Ie.config({ignoreMobileResize:!0});{let P=0;const W=16;U=ze.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${x}`,scrub:a.scrub,pin:!0,onUpdate:X=>{const R=performance.now();if(R-P>=W){if(!T){const j=X.progress,$=Ke.lerp(0,m,j);e.position.set(0,0,$),e.lookAt(0,0,m)}o(e),P=R}v&&v.update()},onRefresh:()=>{e.updateProjectionMatrix()}}}),U.fromTo(e.position,{z:0},{z:m,duration:1,ease:"none"},0)}return{setReverting:P=>{T=P},timeline:U,isScrollTriggerActive:()=>M}}function qi(p,e,n){const t=fn(),o=t.isMobile?25:20,s=t.isMobile?800:1800,a=4e3,c=-1e3,v=n-1e3,I=1e3,H=n,E=150,A=-500,m=n,T=new ho,M=new Float32Array(s*3),x=new Float32Array(s),U=new Float32Array(s);let Z=0;for(;Z<s;){const j=(Math.random()-.5)*a,$=(Math.random()-.5)*a,C=c+Math.random()*(v-c),re=C>H&&Math.abs(j)<I&&Math.abs($)<I,D=Math.abs(j)<E&&Math.abs($)<E&&C>m&&C<A;if(!re&&!D){const Y=Z*3;M[Y]=j,M[Y+1]=$,M[Y+2]=C;const te=.1+Math.random()*(.7-.1);x[Z]=te,U[Z]=te,Z++}}T.setAttribute("position",new Es(M,3)),T.setAttribute("opacity",new Es(U,1));const z=new vo({uniforms:{color:{value:new At(1,1,1)},size:{value:o}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),P=new ii(T,z);P.frustumCulled=!0,p.add(P);const W={values:U.slice()},X=T.attributes.opacity;return ze.to(W,{duration:2,onUpdate:()=>{const j=Date.now()*.001;for(let $=0;$<s;$++)W.values[$]=x[$]*(.05+.95*Math.abs(Math.sin(j+$*.01)));X.array.set(W.values),X.needsUpdate=!0},repeat:-1,ease:"none"}),new nr,{dispose:()=>{ze.killTweensOf(U),p.remove(P),T.dispose(),z.dispose()}}}function Zi(p,e){const t=e-1500,o=100,s=2,a=64,c=1e3,v=a*3,I=[4,4.5,5],H=6;let E,A,m,T,M,x;const U=[],Z=[[],[],[]],z=[[],[],[]],P=[[],[],[]];let W=[0,0,0];const X=()=>{const C=0-t,re=[];for(let ue=0;ue<o;ue++){const f=ue/(o-1),ge=0-f*C,me=f*5*2*Math.PI,Pe=90*(.8+.2*Math.sin(me*2)),g=new je(Pe*Math.cos(me),Pe*Math.sin(me),ge);(isNaN(g.x)||isNaN(g.y)||isNaN(g.z))&&console.error("NaN in chaserPath points",{t:f,z:ge,projectMaxZ:e}),re.push(g)}E=new jn(re);const D=new ho().setFromPoints(E.getPoints(200));T=new Xn(D,new zt({color:16711935,linewidth:2,visible:!1})),p.add(T);const Y=[];for(let ue=0;ue<o;ue++){const f=ue/(o-1),ge=0-f*C,me=f*3*2*Math.PI,Pe=60*(.8+.2*Math.sin(me*4)),g=new je(Pe*Math.cos(me),Pe*Math.sin(me),ge);(isNaN(g.x)||isNaN(g.y)||isNaN(g.z))&&console.error("NaN in chaserPath2 points",{t:f,z:ge,projectMaxZ:e}),Y.push(g)}A=new jn(Y);const te=new ho().setFromPoints(A.getPoints(200));M=new Xn(te,new zt({color:65535,linewidth:2,visible:!1})),p.add(M);const ie=[];for(let ue=0;ue<o;ue++){const f=ue/(o-1),ge=0-f*C,me=f*7*2*Math.PI,Pe=100,g=90,u=.1*Math.sin(me),i=new je(Pe*(1+u)*Math.cos(me),g*(1-u)*Math.sin(me),ge);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:f,z:ge,projectMaxZ:e}),ie.push(i)}m=new jn(ie);const ne=new ho().setFromPoints(m.getPoints(200));x=new Xn(ne,new zt({color:16776960,linewidth:2,visible:!1})),p.add(x);const B=[16711680,65280,255],O=new Ho(s,s,s);O.attributes.color&&delete O.attributes.color;for(let ue=0;ue<3;ue++){const f=new Ft;f.opacity=1,f.renderOrder=1,U[ue]=f,p.add(f);for(let ge=0;ge<v;ge++){const me=new lt({color:B[ue],transparent:!0,opacity:0,blending:ai,fog:!0,depthWrite:!1}),Pe=new Ye(O,me);Pe.renderOrder=1,Pe.visible=!1,f.add(Pe),Z[ue][ge]=Pe,z[ue][ge]=0,P[ue][ge]=!1}}},R=C=>{const re=[E,A,m][C],D=re.getLength(),Y=P[C].filter(ie=>ie).length;if(v-Y>=a){let ie=0;for(let ne=0;ne<a;ne++){const B=P[C].findIndex(g=>!g);if(B===-1){console.warn(`No available chasers for path ${C}, emitted ${ie}/${a}`);break}const O=ie/(a-1),ue=.05+(1-.05)*Math.pow(O,3),f=new lt({color:[16711680,65280,255][C],transparent:!0,opacity:ue,blending:Jt,fog:!0,depthWrite:!1});Z[C][B].material=f,Z[C][B].visible=!0;const ge=ie*H;z[C][B]=ge,P[C][B]=!0;const me=ge/D,Pe=re.getPointAt(me);Z[C][B].position.copy(Pe),ie++}}},j=C=>{const re=performance.now()/1e3,D=[E,A,m];for(let Y=0;Y<3;Y++){re-W[Y]>=I[Y]&&(R(Y),W[Y]=re);const te=D[Y],ie=te.getLength(),ne=c*C;for(let B=0;B<v;B++)if(P[Y][B]){z[Y][B]+=ne;const O=z[Y][B]/ie;if(O>=1)Z[Y][B].visible=!1,P[Y][B]=!1,z[Y][B]=0;else{const ue=te.getPointAt(O);Z[Y][B].position.copy(ue)}}}};return X(),{chaserPath:E,chaserPath2:A,chaserPath3:m,updateChasers:j,dispose:()=>{p.remove(T),p.remove(M),p.remove(x),T.geometry.dispose(),T.material.dispose(),M.geometry.dispose(),M.material.dispose(),x.geometry.dispose(),x.material.dispose(),U.forEach(C=>{C.children.forEach(re=>{re.geometry.dispose(),re.material.dispose()}),p.remove(C)})}}}class $i extends er{constructor(e){super(e)}load(e,n,t,o){const s=this,a=new tr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){const v=s.parse(JSON.parse(c));n&&n(v)},t,o)}parse(e){return new Qi(e)}}class Qi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=Ki(e,n,this.data);for(let s=0,a=o.length;s<a;s++)t.push(...o[s].toShapes());return t}}function Ki(p,e,n){const t=Array.from(p),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,a=[];let c=0,v=0;for(let I=0;I<t.length;I++){const H=t[I];if(H===`
`)c=0,v-=s;else{const E=Ji(H,o,c,v,n);c+=E.offsetX,a.push(E.path)}}return a}function Ji(p,e,n,t,o){const s=o.glyphs[p]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+p+'" does not exists in font family '+o.familyName+".");return}const a=new lo;let c,v,I,H,E,A,m,T;if(s.o){const M=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let x=0,U=M.length;x<U;)switch(M[x++]){case"m":c=M[x++]*e+n,v=M[x++]*e+t,a.moveTo(c,v);break;case"l":c=M[x++]*e+n,v=M[x++]*e+t,a.lineTo(c,v);break;case"q":I=M[x++]*e+n,H=M[x++]*e+t,E=M[x++]*e+n,A=M[x++]*e+t,a.quadraticCurveTo(E,A,I,H);break;case"b":I=M[x++]*e+n,H=M[x++]*e+t,E=M[x++]*e+n,A=M[x++]*e+t,m=M[x++]*e+n,T=M[x++]*e+t,a.bezierCurveTo(E,A,m,T,I,H);break}}return{offsetX:s.ha*e,path:a}}function ea(p="/fonts/Poppins_Regular.json"){const e=$t(null),n=$t(0),t=$t(!1),o=()=>new Promise((a,c)=>{new $i().load(p,I=>{e.value=I,n.value=100,t.value=!0,a(I)},I=>{I.lengthComputable&&(n.value=I.loaded/I.total*100)},I=>{n.value=100,t.value=!0,c(I)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const ta={class:"preloader"},oa={class:"progress-label"},na=gs({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>(Qt(),uo("div",ta,[Lt("div",oa,Qs(Math.round(e.progress))+"%",1)]))}}),sa=ir(na,[["__scopeId","data-v-e5eadefa"]]),qs=250,Pn=500,Wo=-500,ts=-520,Zs=-720,$s=4e3,ra=gs({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){ze.registerPlugin(Ie);const e=p,n=or();n.projects=e.projects;const t=fn(),o=$t(!1),s={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},a=$t(null),c=$t(null),v=$t(!1),I=$t(0),H=$t(!1),E=$t(!0),A=new Map;let m,T,M,x,U,Z,z,P=null,W=null,X=null,R=null,j=null,$=[],C=null,re=null,D=0,Y=null,te,ie=null,ne=null,B=null;const O=ea("/fonts/Poppins_Regular.json"),ue=()=>{const u=a.value?a.value.getBoundingClientRect().width:window.innerWidth,i=window.innerHeight,r=t.isMobile?.75:1,b=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;M.setSize(u*r,i*r),M.setPixelRatio(b),x.setSize(u*r,i*r),T.aspect=u/i,T.updateProjectionMatrix(),M.domElement.style.width=`${u}px`,M.domElement.style.height=`${i}px`},f=u=>A.has(u)?Promise.resolve(A.get(u)):new Promise((i,r)=>{new di().load(u,k=>{k.encoding=ss,A.set(u,k),i(k)},void 0,k=>r(k))}),ge=async()=>{m=new li,m.background=new At(0),m.fog=new ci(0,700,$s),T=new ui(t.isMobile?t.orientation==="landscape"?90:120:75,window.innerWidth/window.innerHeight,1,$s+6e3),T.position.set(0,0,0),T.lookAt(0,0,1e3),M=new fi({antialias:!0}),t.isMobile?M.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):M.setPixelRatio(window.devicePixelRatio),M.toneMapping=pi,M.toneMappingExposure=1,M.outputEncoding=ss,x=new Fi(M);const u=new Gi(m,T);x.addPass(u);const i=new Be(Math.floor(window.innerWidth/2),Math.floor(window.innerHeight/2));if(t.isMobile?U=new Ao(i,1,.1,0):U=new Ao(i,1.6,.2,0),U.renderToScreen=!0,x.addPass(U),a.value)a.value.appendChild(M.domElement),M.domElement.style.opacity="0";else return;Z=new ln,Z.dom.style.position="fixed",Z.dom.style.top="0px",Z.dom.style.left="0px",Z.dom.style.zIndex="1000",document.body.appendChild(Z.dom);const b=e.projects.filter(_=>_.keyart).length+2+1;let k=0;const y=()=>{k++;const _=k/b*100,N=O.loadingProgress.value;I.value=(_+N/b)/(1+1/b),k===b&&O.isLoaded.value&&(v.value=!0)};await O.initialize().then(()=>{y()}).catch(_=>{console.error("Font initialization failed:",_),y()}),await f(e.projectGridFile).then(()=>y()).catch(()=>y()),await f(e.projectGridFile2).then(()=>y()).catch(()=>y());for(const _ of e.projects)_.keyart?await f(_.keyart).then(()=>y()).catch(()=>y()):y();Y=Vi(m,{CUBE_SIZE:qs,CUBE_SPACING:Pn,FIRST_CUBE_Z:Wo},e.projects,e.projectGridFile,e.projectGridFile2,s,A,O.font);try{if(await Y.getInitializedData().then(({maxZ:_,updateCubeColors:N,projectCubes:S})=>{if(te=_,te===void 0||isNaN(te))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:w}=Yi(m,O.font,{CUBE_SIZE:qs,FIRST_CUBE_Z:Wo},s);$=[...w,...S],C=N}),s.showCars){const{cityGroup:_,updateParticles:N,dispose:S}=ji(m,m,te,s);z=N,j=S}if(s.showStarfield){const{dispose:_}=qi(m,T,te);P=_}if(s.showChasers){const{dispose:_,updateChasers:N}=Zi(m,te);X=_,R=N}ue()}catch(_){console.error("Error initializing project cubes:",_),te=Wo-(e.projects.length+1)*Pn}},me=(u=0)=>{if(re=requestAnimationFrame(me),M&&x){const i=(u-D)/1e3;D=u,z(i),R&&R(i),Y!=null&&Y.updateClickHereParticles&&Y.updateClickHereParticles(T,i);const r=4e3,b=1e3,k=Math.abs(T.position.z-te);T.far=Math.max(r+b,k),T.updateProjectionMatrix();const y=Zs-ts;let _=0;T.position.z>=ts?_=0:T.position.z<=Zs?_=1:_=(T.position.z-ts)/y;const N=.01,S=1-Math.pow(1-_,2);let w;t.isMobile?w=Ke.lerp(1.3,N,S):w=Ke.lerp(1.6,N,S),U.strength=w,x.render()}Z.update()},Pe=()=>{console.log("handleResize()"),ue(),Ie.refresh()},g=()=>{if(t.isMobile){const u=t.orientation;console.log("Resize: orientation",u,"lastOrientation",ne),u!==ne&&(ne=u,B&&clearTimeout(B),B=setTimeout(()=>{Pe(),B=null},500))}else Pe()};return Gr(()=>{ge().then(()=>{if(v.value){re=requestAnimationFrame(me);let u=null;const i=Y.getInitializedData().then(({projectCubes:b})=>{b.forEach(y=>{y.userData.isActive=!0});const k=Wo-(e.projects.length-1)*Pn;if(T.position.set(0,0,5e3),T.lookAt(0,0,k),T.updateProjectionMatrix(),C(T),x.render(),Ie.getAll().forEach(y=>y.kill()),$.length&&C){const y=Xi(m,T,c,$,C,{CUBE_SPACING:Pn,FIRST_CUBE_Z:Wo},{scrub:t.isMobile?.5:1},s,Z);u=y.setReverting,ie=y.isScrollTriggerActive}M&&W===null&&(W=Y.setupInteractivity(T,M.domElement,M,y=>{u&&u(y)},ie)),o.value=!0,window.scrollTo({top:0,behavior:"auto"})}),r=()=>{i.then(()=>{E.value=!1,T.position.set(0,0,5e3),T.updateProjectionMatrix(),ze.to(M.domElement,{opacity:1,duration:.5,ease:"power4.out"});const b={z:5e3};ze.to(b,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{T.position.z=b.z,T.updateProjectionMatrix()},onComplete:()=>{T.position.z=0,H.value=!0}})})};ze.delayedCall(.5,r)}}).catch(u=>{console.error("Initialization failed:",u)}),window.addEventListener("resize",g)}),Ur(()=>{re!==null&&cancelAnimationFrame(re),W&&W(),window.removeEventListener("resize",g),Ie.getAll().forEach(u=>u.kill()),M.dispose(),x.dispose(),m.clear(),document.body.removeChild(Z.dom),P&&P(),X&&X(),j&&j()}),(u,i)=>(Qt(),uo("section",{ref_key:"wrapper",ref:c,class:os(["wrapper",{ready:o.value}])},[Yo(Yr,{name:"fade"},{default:Ks(()=>[E.value?(Qt(),Js(sa,{key:0,progress:I.value},null,8,["progress"])):Wr("",!0)]),_:1}),Lt("div",{ref_key:"tunnelWrapper",ref:a,class:"tunnel-wrapper"},null,512)],2))}}),ia=ir(ra,[["__scopeId","data-v-5cdc6d38"]]),aa={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},la={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},ca={class:"overflow-hidden"},ua={class:"mt-16 px-4 md:px-16"},fa={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},pa=["innerHTML"],da={class:"flex justify-center items-center gap-8 text-xs text-white/80 uppercase mt-12"},xa=gs({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{},archived:{}},setup(p){const e=p,n=Ms(()=>[...e.archived].sort((s,a)=>s.title.localeCompare(a.title))),t=Ms(()=>Object.values(dn.Enums.Classification)),o=s=>{switch(s){case dn.Enums.Classification.ENTERTAINMENT:return"fill-red-400";case dn.Enums.Classification.ECOMMERCE:return"fill-green-500";case dn.Enums.Classification.OTHER:return"fill-white";default:return"fill-white-500"}};return(s,a)=>(Qt(),Js(mi,null,{default:Ks(()=>[Yo(Vr(jr),{title:"Welcome"}),Lt("div",aa,[Lt("nav",la,[Yo(hi)]),Lt("div",ca,[Yo(ia,{projects:s.projects,"project-grid-file":s.projectGridFile,"project-grid-file2":s.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file2"])]),Lt("div",ua,[a[2]||(a[2]=Lt("h2",{class:"mb-4 text-white"},"OTHER WEB PROJECTS",-1)),Lt("ul",fa,[(Qt(!0),uo(Cs,null,Ps(n.value,(c,v)=>(Qt(),uo("li",{class:"text-xs text-white/80 flex items-center gap-2",key:v},[(Qt(),uo("svg",{class:os(["size-1.5 md:size-[.375vw] 3xl:size-[.375rem]",o(c.classification)]),viewBox:"0 0 6 6","aria-hidden":"true"},a[0]||(a[0]=[Lt("circle",{cx:"3",cy:"3",r:"3"},null,-1)]),2)),Lt("span",{innerHTML:c.title},null,8,pa)]))),128))]),Lt("ul",da,[(Qt(!0),uo(Cs,null,Ps(t.value,c=>(Qt(),uo("li",{class:"flex items-center gap-2",key:c},[(Qt(),uo("svg",{class:os(["size-3",o(c)]),viewBox:"0 0 6 6","aria-hidden":"true"},a[1]||(a[1]=[Lt("circle",{cx:"3",cy:"3",r:"3"},null,-1)]),2)),Xr(" "+Qs(c),1)]))),128))])]),a[3]||(a[3]=Lt("div",{class:"flex justify-center items-center"},null,-1)),a[4]||(a[4]=Lt("div",{class:"flex justify-center items-center"},null,-1)),Yo(gi)])]),_:1}))}});export{xa as default};
