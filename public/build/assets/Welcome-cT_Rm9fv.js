import{W as hs,I as en,e as tn,o as Cr,a as ao,t as gs,d as wo,x as ms,y as _s,b as Bo,T as ws,w as vs,c as ys,f as xs,u as bs,m as Ts,F as Cs}from"./app-DMU8O3Th.js";import{c as We,O as Ps,d as Co,F as pn,j as lo,U as Yr,f as kt,k as mr,H as _r,N as Ss,C as Ms,l as Pt,V as ge,b as Xt,m as Tt,E as Es,L as Dt,G as wt,g as Le,n as Ne,B as Eo,o as Go,e as Yt,p as Is,q as Ds,r as As,u as Fn,R as Rs,s as ks,t as Os,P as no,a as $t,v as zn,w as Hn,x as dn,Q as Ls,I as Bs,y as Rr,z as hn,J as Ns,K as kr,T as Or,X as Fs,S as zs,Y as Hs,Z as Us,W as Gs,_ as Ys,$ as Ws,h as Xs,i as Zs}from"./GlobalFooter-C9yG0oL5.js";import{_ as Un}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Vs(s,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function js(s,e,r){return e&&Vs(s.prototype,e),s}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gt,wr,Lt,eo,to,Po,Gn,so,Yo,Yn,qt,zt,Wn,Xn=function(){return gt||typeof window<"u"&&(gt=window.gsap)&&gt.registerPlugin&&gt},Zn=1,To=[],be=[],Vt=[],Wo=Date.now,Wr=function(e,r){return r},$s=function(){var e=Yo.core,r=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,be),o.push.apply(o,Vt),be=t,Vt=o,Wr=function(i,l){return r[i](l)}},oo=function(e,r){return~Vt.indexOf(e)&&Vt[Vt.indexOf(e)+1][r]},Xo=function(e){return!!~Yn.indexOf(e)},bt=function(e,r,t,o,n){return e.addEventListener(r,t,{passive:o!==!1,capture:!!n})},xt=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},rr="scrollLeft",nr="scrollTop",Xr=function(){return qt&&qt.isPressed||be.cache++},Pr=function(e,r){var t=function o(n){if(n||n===0){Zn&&(Lt.history.scrollRestoration="manual");var i=qt&&qt.isPressed;n=o.v=Math.round(n)||(qt&&qt.iOS?1:0),e(n),o.cacheID=be.cache,i&&Wr("ss",n)}else(r||be.cache!==o.cacheID||Wr("ref"))&&(o.cacheID=be.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Et={s:rr,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Pr(function(s){return arguments.length?Lt.scrollTo(s,ut.sc()):Lt.pageXOffset||eo[rr]||to[rr]||Po[rr]||0})},ut={s:nr,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Et,sc:Pr(function(s){return arguments.length?Lt.scrollTo(Et.sc(),s):Lt.pageYOffset||eo[nr]||to[nr]||Po[nr]||0})},It=function(e,r){return(r&&r._ctx&&r._ctx.selector||gt.utils.toArray)(e)[0]||(typeof e=="string"&&gt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},ro=function(e,r){var t=r.s,o=r.sc;Xo(e)&&(e=eo.scrollingElement||to);var n=be.indexOf(e),i=o===ut.sc?1:2;!~n&&(n=be.push(e)-1),be[n+i]||bt(e,"scroll",Xr);var l=be[n+i],p=l||(be[n+i]=Pr(oo(e,t),!0)||(Xo(e)?o:Pr(function(w){return arguments.length?e[t]=w:e[t]})));return p.target=e,l||(p.smooth=gt.getProperty(e,"scrollBehavior")==="smooth"),p},Zr=function(e,r,t){var o=e,n=e,i=Wo(),l=i,p=r||50,w=Math.max(500,p*3),C=function(v,P){var m=Wo();P||m-i>p?(n=o,o=v,l=i,i=m):t?o+=v:o=n+(v-n)/(m-l)*(i-l)},d=function(){n=o=t?0:o,l=i=0},f=function(v){var P=l,m=n,K=Wo();return(v||v===0)&&v!==o&&C(v),i===l||K-l>w?0:(o+(t?m:-m))/((t?K:i)-P)*1e3};return{update:C,reset:d,getVelocity:f}},ko=function(e,r){return r&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},gn=function(e){var r=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(r)>=Math.abs(t)?r:t},Vn=function(){Yo=gt.core.globals().ScrollTrigger,Yo&&Yo.core&&$s()},jn=function(e){return gt=e||Xn(),!wr&&gt&&typeof document<"u"&&document.body&&(Lt=window,eo=document,to=eo.documentElement,Po=eo.body,Yn=[Lt,eo,to,Po],gt.utils.clamp,Wn=gt.core.context||function(){},so="onpointerenter"in Po?"pointer":"mouse",Gn=rt.isTouch=Lt.matchMedia&&Lt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Lt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,zt=rt.eventTypes=("ontouchstart"in to?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in to?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Zn=0},500),Vn(),wr=1),wr};Et.op=ut;be.cache=0;var rt=function(){function s(r){this.init(r)}var e=s.prototype;return e.init=function(t){wr||jn(gt)||console.warn("Please gsap.registerPlugin(Observer)"),Yo||Vn();var o=t.tolerance,n=t.dragMinimum,i=t.type,l=t.target,p=t.lineHeight,w=t.debounce,C=t.preventDefault,d=t.onStop,f=t.onStopDelay,c=t.ignore,v=t.wheelSpeed,P=t.event,m=t.onDragStart,K=t.onDragEnd,J=t.onDrag,ne=t.onPress,D=t.onRelease,Me=t.onRight,Q=t.onLeft,k=t.onUp,Te=t.onDown,te=t.onChangeX,g=t.onChangeY,Y=t.onChange,y=t.onToggleX,ee=t.onToggleY,re=t.onHover,ie=t.onHoverEnd,Be=t.onMove,V=t.ignoreCheck,Z=t.isNormalizer,M=t.onGestureStart,a=t.onGestureEnd,S=t.onWheel,W=t.onEnable,H=t.onDisable,oe=t.onClick,ve=t.scrollSpeed,Ce=t.capture,me=t.allowClicks,ze=t.lockAxis,Pe=t.onLockAxis;this.target=l=It(l)||to,this.vars=t,c&&(c=gt.utils.toArray(c)),o=o||1e-9,n=n||0,v=v||1,ve=ve||1,i=i||"wheel,touch,pointer",w=w!==!1,p||(p=parseFloat(Lt.getComputedStyle(Po).lineHeight)||22);var Ee,Ie,Se,j,le,Xe,Ue,u=this,ke=0,Ze=0,ot=t.passive||!C&&t.passive!==!1,De=ro(l,Et),x=ro(l,ut),L=De(),de=x(),O=~i.indexOf("touch")&&!~i.indexOf("pointer")&&zt[0]==="pointerdown",q=Xo(l),z=l.ownerDocument||eo,B=[0,0,0],ce=[0,0,0],he=0,U=function(){return he=Wo()},E=function(_,se){return(u.event=_)&&c&&~c.indexOf(_.target)||se&&O&&_.pointerType!=="touch"||V&&V(_,se)},ue=function(){u._vx.reset(),u._vy.reset(),Ie.pause(),d&&d(u)},R=function(){var _=u.deltaX=gn(B),se=u.deltaY=gn(ce),b=Math.abs(_)>=o,I=Math.abs(se)>=o;Y&&(b||I)&&Y(u,_,se,B,ce),b&&(Me&&u.deltaX>0&&Me(u),Q&&u.deltaX<0&&Q(u),te&&te(u),y&&u.deltaX<0!=ke<0&&y(u),ke=u.deltaX,B[0]=B[1]=B[2]=0),I&&(Te&&u.deltaY>0&&Te(u),k&&u.deltaY<0&&k(u),g&&g(u),ee&&u.deltaY<0!=Ze<0&&ee(u),Ze=u.deltaY,ce[0]=ce[1]=ce[2]=0),(j||Se)&&(Be&&Be(u),Se&&(m&&Se===1&&m(u),J&&J(u),Se=0),j=!1),Xe&&!(Xe=!1)&&Pe&&Pe(u),le&&(S(u),le=!1),Ee=0},qe=function(_,se,b){B[b]+=_,ce[b]+=se,u._vx.update(_),u._vy.update(se),w?Ee||(Ee=requestAnimationFrame(R)):R()},ft=function(_,se){ze&&!Ue&&(u.axis=Ue=Math.abs(_)>Math.abs(se)?"x":"y",Xe=!0),Ue!=="y"&&(B[2]+=_,u._vx.update(_,!0)),Ue!=="x"&&(ce[2]+=se,u._vy.update(se,!0)),w?Ee||(Ee=requestAnimationFrame(R)):R()},st=function(_){if(!E(_,1)){_=ko(_,C);var se=_.clientX,b=_.clientY,I=se-u.x,h=b-u.y,G=u.isDragging;u.x=se,u.y=b,(G||(I||h)&&(Math.abs(u.startX-se)>=n||Math.abs(u.startY-b)>=n))&&(Se=G?2:1,G||(u.isDragging=!0),ft(I,h))}},it=u.onPress=function(T){E(T,1)||T&&T.button||(u.axis=Ue=null,Ie.pause(),u.isPressed=!0,T=ko(T),ke=Ze=0,u.startX=u.x=T.clientX,u.startY=u.y=T.clientY,u._vx.reset(),u._vy.reset(),bt(Z?l:z,zt[1],st,ot,!0),u.deltaX=u.deltaY=0,ne&&ne(u))},N=u.onRelease=function(T){if(!E(T,1)){xt(Z?l:z,zt[1],st,!0);var _=!isNaN(u.y-u.startY),se=u.isDragging,b=se&&(Math.abs(u.x-u.startX)>3||Math.abs(u.y-u.startY)>3),I=ko(T);!b&&_&&(u._vx.reset(),u._vy.reset(),C&&me&&gt.delayedCall(.08,function(){if(Wo()-he>300&&!T.defaultPrevented){if(T.target.click)T.target.click();else if(z.createEvent){var h=z.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,Lt,1,I.screenX,I.screenY,I.clientX,I.clientY,!1,!1,!1,!1,0,null),T.target.dispatchEvent(h)}}})),u.isDragging=u.isGesturing=u.isPressed=!1,d&&se&&!Z&&Ie.restart(!0),Se&&R(),K&&se&&K(u),D&&D(u,b)}},je=function(_){return _.touches&&_.touches.length>1&&(u.isGesturing=!0)&&M(_,u.isDragging)},Ke=function(){return(u.isGesturing=!1)||a(u)},at=function(_){if(!E(_)){var se=De(),b=x();qe((se-L)*ve,(b-de)*ve,1),L=se,de=b,d&&Ie.restart(!0)}},A=function(_){if(!E(_)){_=ko(_,C),S&&(le=!0);var se=(_.deltaMode===1?p:_.deltaMode===2?Lt.innerHeight:1)*v;qe(_.deltaX*se,_.deltaY*se,0),d&&!Z&&Ie.restart(!0)}},$=function(_){if(!E(_)){var se=_.clientX,b=_.clientY,I=se-u.x,h=b-u.y;u.x=se,u.y=b,j=!0,d&&Ie.restart(!0),(I||h)&&ft(I,h)}},Ge=function(_){u.event=_,re(u)},X=function(_){u.event=_,ie(u)},ae=function(_){return E(_)||ko(_,C)&&oe(u)};Ie=u._dc=gt.delayedCall(f||.25,ue).pause(),u.deltaX=u.deltaY=0,u._vx=Zr(0,50,!0),u._vy=Zr(0,50,!0),u.scrollX=De,u.scrollY=x,u.isDragging=u.isGesturing=u.isPressed=!1,Wn(this),u.enable=function(T){return u.isEnabled||(bt(q?z:l,"scroll",Xr),i.indexOf("scroll")>=0&&bt(q?z:l,"scroll",at,ot,Ce),i.indexOf("wheel")>=0&&bt(l,"wheel",A,ot,Ce),(i.indexOf("touch")>=0&&Gn||i.indexOf("pointer")>=0)&&(bt(l,zt[0],it,ot,Ce),bt(z,zt[2],N),bt(z,zt[3],N),me&&bt(l,"click",U,!0,!0),oe&&bt(l,"click",ae),M&&bt(z,"gesturestart",je),a&&bt(z,"gestureend",Ke),re&&bt(l,so+"enter",Ge),ie&&bt(l,so+"leave",X),Be&&bt(l,so+"move",$)),u.isEnabled=!0,u.isDragging=u.isGesturing=u.isPressed=j=Se=!1,u._vx.reset(),u._vy.reset(),L=De(),de=x(),T&&T.type&&it(T),W&&W(u)),u},u.disable=function(){u.isEnabled&&(To.filter(function(T){return T!==u&&Xo(T.target)}).length||xt(q?z:l,"scroll",Xr),u.isPressed&&(u._vx.reset(),u._vy.reset(),xt(Z?l:z,zt[1],st,!0)),xt(q?z:l,"scroll",at,Ce),xt(l,"wheel",A,Ce),xt(l,zt[0],it,Ce),xt(z,zt[2],N),xt(z,zt[3],N),xt(l,"click",U,!0),xt(l,"click",ae),xt(z,"gesturestart",je),xt(z,"gestureend",Ke),xt(l,so+"enter",Ge),xt(l,so+"leave",X),xt(l,so+"move",$),u.isEnabled=u.isPressed=u.isDragging=!1,H&&H(u))},u.kill=u.revert=function(){u.disable();var T=To.indexOf(u);T>=0&&To.splice(T,1),qt===u&&(qt=0)},To.push(u),Z&&Xo(l)&&(qt=u),u.enable(P)},js(s,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),s}();rt.version="3.12.7";rt.create=function(s){return new rt(s)};rt.register=jn;rt.getAll=function(){return To.slice()};rt.getById=function(s){return To.filter(function(e){return e.vars.id===s})[0]};Xn()&&gt.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var F,xo,xe,Ve,Ot,Fe,on,Sr,Jo,Zo,No,sr,_t,Dr,Vr,St,mn,_n,bo,$n,Lr,Qn,Ct,jr,qn,Kn,Jt,$r,rn,So,nn,Mr,Qr,Br,ir=1,vt=Date.now,Nr=vt(),Ft=0,Fo=0,wn=function(e,r,t){var o=Rt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+r+"Clamp"]=o,o?e.substr(6,e.length-7):e},vn=function(e,r){return r&&(!Rt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Qs=function s(){return Fo&&requestAnimationFrame(s)},yn=function(){return Dr=1},xn=function(){return Dr=0},Wt=function(e){return e},zo=function(e){return Math.round(e*1e5)/1e5||0},Jn=function(){return typeof window<"u"},es=function(){return F||Jn()&&(F=window.gsap)&&F.registerPlugin&&F},ho=function(e){return!!~on.indexOf(e)},ts=function(e){return(e==="Height"?nn:xe["inner"+e])||Ot["client"+e]||Fe["client"+e]},os=function(e){return oo(e,"getBoundingClientRect")||(ho(e)?function(){return Tr.width=xe.innerWidth,Tr.height=nn,Tr}:function(){return Qt(e)})},qs=function(e,r,t){var o=t.d,n=t.d2,i=t.a;return(i=oo(e,"getBoundingClientRect"))?function(){return i()[o]}:function(){return(r?ts(n):e["client"+n])||0}},Ks=function(e,r){return!r||~Vt.indexOf(e)?os(e):function(){return Tr}},Zt=function(e,r){var t=r.s,o=r.d2,n=r.d,i=r.a;return Math.max(0,(t="scroll"+o)&&(i=oo(e,t))?i()-os(e)()[n]:ho(e)?(Ot[t]||Fe[t])-ts(o):e[t]-e["offset"+o])},ar=function(e,r){for(var t=0;t<bo.length;t+=3)(!r||~r.indexOf(bo[t+1]))&&e(bo[t],bo[t+1],bo[t+2])},Rt=function(e){return typeof e=="string"},yt=function(e){return typeof e=="function"},Ho=function(e){return typeof e=="number"},io=function(e){return typeof e=="object"},Oo=function(e,r,t){return e&&e.progress(r?0:1)&&t&&e.pause()},Fr=function(e,r){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return r(e)}):r(e);t&&t.totalTime&&(e.callbackAnimation=t)}},vo=Math.abs,rs="left",ns="top",sn="right",an="bottom",uo="width",fo="height",Vo="Right",jo="Left",$o="Top",Qo="Bottom",nt="padding",Bt="margin",Io="Width",ln="Height",ct="px",Nt=function(e){return xe.getComputedStyle(e)},Js=function(e){var r=Nt(e).position;e.style.position=r==="absolute"||r==="fixed"?r:"relative"},bn=function(e,r){for(var t in r)t in e||(e[t]=r[t]);return e},Qt=function(e,r){var t=r&&Nt(e)[Vr]!=="matrix(1, 0, 0, 1, 0, 0)"&&F.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Er=function(e,r){var t=r.d2;return e["offset"+t]||e["client"+t]||0},ss=function(e){var r=[],t=e.labels,o=e.duration(),n;for(n in t)r.push(t[n]/o);return r},ei=function(e){return function(r){return F.utils.snap(ss(e),r)}},cn=function(e){var r=F.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,n){return o-n});return t?function(o,n,i){i===void 0&&(i=.001);var l;if(!n)return r(o);if(n>0){for(o-=i,l=0;l<t.length;l++)if(t[l]>=o)return t[l];return t[l-1]}else for(l=t.length,o+=i;l--;)if(t[l]<=o)return t[l];return t[0]}:function(o,n,i){i===void 0&&(i=.001);var l=r(o);return!n||Math.abs(l-o)<i||l-o<0==n<0?l:r(n<0?o-e:o+e)}},ti=function(e){return function(r,t){return cn(ss(e))(r,t.direction)}},lr=function(e,r,t,o){return t.split(",").forEach(function(n){return e(r,n,o)})},ht=function(e,r,t,o,n){return e.addEventListener(r,t,{passive:!o,capture:!!n})},dt=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},cr=function(e,r,t){t=t&&t.wheelHandler,t&&(e(r,"wheel",t),e(r,"touchmove",t))},Tn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ur={toggleActions:"play",anticipatePin:0},Ir={top:0,left:0,center:.5,bottom:1,right:1},vr=function(e,r){if(Rt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=r/100),e=e.substr(0,t-1)),e=o+(e in Ir?Ir[e]*r:~e.indexOf("%")?parseFloat(e)*r/100:parseFloat(e)||0)}return e},fr=function(e,r,t,o,n,i,l,p){var w=n.startColor,C=n.endColor,d=n.fontSize,f=n.indent,c=n.fontWeight,v=Ve.createElement("div"),P=ho(t)||oo(t,"pinType")==="fixed",m=e.indexOf("scroller")!==-1,K=P?Fe:t,J=e.indexOf("start")!==-1,ne=J?w:C,D="border-color:"+ne+";font-size:"+d+";color:"+ne+";font-weight:"+c+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return D+="position:"+((m||p)&&P?"fixed;":"absolute;"),(m||p||!P)&&(D+=(o===ut?sn:an)+":"+(i+parseFloat(f))+"px;"),l&&(D+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),v._isStart=J,v.setAttribute("class","gsap-marker-"+e+(r?" marker-"+r:"")),v.style.cssText=D,v.innerText=r||r===0?e+"-"+r:e,K.children[0]?K.insertBefore(v,K.children[0]):K.appendChild(v),v._offset=v["offset"+o.op.d2],yr(v,0,o,J),v},yr=function(e,r,t,o){var n={display:"block"},i=t[o?"os2":"p2"],l=t[o?"p2":"os2"];e._isFlipped=o,n[t.a+"Percent"]=o?-100:0,n[t.a]=o?"1px":0,n["border"+i+Io]=1,n["border"+l+Io]=0,n[t.p]=r+"px",F.set(e,n)},we=[],qr={},er,Cn=function(){return vt()-Ft>34&&(er||(er=requestAnimationFrame(Kt)))},yo=function(){(!Ct||!Ct.isPressed||Ct.startX>Fe.clientWidth)&&(be.cache++,Ct?er||(er=requestAnimationFrame(Kt)):Kt(),Ft||mo("scrollStart"),Ft=vt())},zr=function(){Kn=xe.innerWidth,qn=xe.innerHeight},Uo=function(e){be.cache++,(e===!0||!_t&&!Qn&&!Ve.fullscreenElement&&!Ve.webkitFullscreenElement&&(!jr||Kn!==xe.innerWidth||Math.abs(xe.innerHeight-qn)>xe.innerHeight*.25))&&Sr.restart(!0)},go={},oi=[],is=function s(){return dt(_e,"scrollEnd",s)||co(!0)},mo=function(e){return go[e]&&go[e].map(function(r){return r()})||oi},At=[],as=function(e){for(var r=0;r<At.length;r+=5)(!e||At[r+4]&&At[r+4].query===e)&&(At[r].style.cssText=At[r+1],At[r].getBBox&&At[r].setAttribute("transform",At[r+2]||""),At[r+3].uncache=1)},un=function(e,r){var t;for(St=0;St<we.length;St++)t=we[St],t&&(!r||t._ctx===r)&&(e?t.kill(1):t.revert(!0,!0));Mr=!0,r&&as(r),r||mo("revert")},ls=function(e,r){be.cache++,(r||!Mt)&&be.forEach(function(t){return yt(t)&&t.cacheID++&&(t.rec=0)}),Rt(e)&&(xe.history.scrollRestoration=rn=e)},Mt,po=0,Pn,ri=function(){if(Pn!==po){var e=Pn=po;requestAnimationFrame(function(){return e===po&&co(!0)})}},cs=function(){Fe.appendChild(So),nn=!Ct&&So.offsetHeight||xe.innerHeight,Fe.removeChild(So)},Sn=function(e){return Jo(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(r){return r.style.display=e?"none":"block"})},co=function(e,r){if(Ot=Ve.documentElement,Fe=Ve.body,on=[xe,Ve,Ot,Fe],Ft&&!e&&!Mr){ht(_e,"scrollEnd",is);return}cs(),Mt=_e.isRefreshing=!0,be.forEach(function(o){return yt(o)&&++o.cacheID&&(o.rec=o())});var t=mo("refreshInit");$n&&_e.sort(),r||un(),be.forEach(function(o){yt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),we.slice(0).forEach(function(o){return o.refresh()}),Mr=!1,we.forEach(function(o){if(o._subPinOffset&&o.pin){var n=o.vars.horizontal?"offsetWidth":"offsetHeight",i=o.pin[n];o.revert(!0,1),o.adjustPinSpacing(o.pin[n]-i),o.refresh()}}),Qr=1,Sn(!0),we.forEach(function(o){var n=Zt(o.scroller,o._dir),i=o.vars.end==="max"||o._endClamp&&o.end>n,l=o._startClamp&&o.start>=n;(i||l)&&o.setPositions(l?n-1:o.start,i?Math.max(l?n:o.start+1,n):o.end,!0)}),Sn(!1),Qr=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),be.forEach(function(o){yt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),ls(rn,1),Sr.pause(),po++,Mt=2,Kt(2),we.forEach(function(o){return yt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Mt=_e.isRefreshing=!1,mo("refresh")},Kr=0,xr=1,qo,Kt=function(e){if(e===2||!Mt&&!Mr){_e.isUpdating=!0,qo&&qo.update(0);var r=we.length,t=vt(),o=t-Nr>=50,n=r&&we[0].scroll();if(xr=Kr>n?-1:1,Mt||(Kr=n),o&&(Ft&&!Dr&&t-Ft>200&&(Ft=0,mo("scrollEnd")),No=Nr,Nr=t),xr<0){for(St=r;St-- >0;)we[St]&&we[St].update(0,o);xr=1}else for(St=0;St<r;St++)we[St]&&we[St].update(0,o);_e.isUpdating=!1}er=0},Jr=[rs,ns,an,sn,Bt+Qo,Bt+Vo,Bt+$o,Bt+jo,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],br=Jr.concat([uo,fo,"boxSizing","max"+Io,"max"+ln,"position",Bt,nt,nt+$o,nt+Vo,nt+Qo,nt+jo]),ni=function(e,r,t){Mo(t);var o=e._gsap;if(o.spacerIsNative)Mo(o.spacerState);else if(e._gsap.swappedIn){var n=r.parentNode;n&&(n.insertBefore(e,r),n.removeChild(r))}e._gsap.swappedIn=!1},Hr=function(e,r,t,o){if(!e._gsap.swappedIn){for(var n=Jr.length,i=r.style,l=e.style,p;n--;)p=Jr[n],i[p]=t[p];i.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(i.display="inline-block"),l[an]=l[sn]="auto",i.flexBasis=t.flexBasis||"auto",i.overflow="visible",i.boxSizing="border-box",i[uo]=Er(e,Et)+ct,i[fo]=Er(e,ut)+ct,i[nt]=l[Bt]=l[ns]=l[rs]="0",Mo(o),l[uo]=l["max"+Io]=t[uo],l[fo]=l["max"+ln]=t[fo],l[nt]=t[nt],e.parentNode!==r&&(e.parentNode.insertBefore(r,e),r.appendChild(e)),e._gsap.swappedIn=!0}},si=/([A-Z])/g,Mo=function(e){if(e){var r=e.t.style,t=e.length,o=0,n,i;for((e.t._gsap||F.core.getCache(e.t)).uncache=1;o<t;o+=2)i=e[o+1],n=e[o],i?r[n]=i:r[n]&&r.removeProperty(n.replace(si,"-$1").toLowerCase())}},pr=function(e){for(var r=br.length,t=e.style,o=[],n=0;n<r;n++)o.push(br[n],t[br[n]]);return o.t=e,o},ii=function(e,r,t){for(var o=[],n=e.length,i=t?8:0,l;i<n;i+=2)l=e[i],o.push(l,l in r?r[l]:e[i+1]);return o.t=e.t,o},Tr={left:0,top:0},Mn=function(e,r,t,o,n,i,l,p,w,C,d,f,c,v){yt(e)&&(e=e(p)),Rt(e)&&e.substr(0,3)==="max"&&(e=f+(e.charAt(4)==="="?vr("0"+e.substr(3),t):0));var P=c?c.time():0,m,K,J;if(c&&c.seek(0),isNaN(e)||(e=+e),Ho(e))c&&(e=F.utils.mapRange(c.scrollTrigger.start,c.scrollTrigger.end,0,f,e)),l&&yr(l,t,o,!0);else{yt(r)&&(r=r(p));var ne=(e||"0").split(" "),D,Me,Q,k;J=It(r,p)||Fe,D=Qt(J)||{},(!D||!D.left&&!D.top)&&Nt(J).display==="none"&&(k=J.style.display,J.style.display="block",D=Qt(J),k?J.style.display=k:J.style.removeProperty("display")),Me=vr(ne[0],D[o.d]),Q=vr(ne[1]||"0",t),e=D[o.p]-w[o.p]-C+Me+n-Q,l&&yr(l,Q,o,t-Q<20||l._isStart&&Q>20),t-=t-Q}if(v&&(p[v]=e||-.001,e<0&&(e=0)),i){var Te=e+t,te=i._isStart;m="scroll"+o.d2,yr(i,Te,o,te&&Te>20||!te&&(d?Math.max(Fe[m],Ot[m]):i.parentNode[m])<=Te+1),d&&(w=Qt(l),d&&(i.style[o.op.p]=w[o.op.p]-o.op.m-i._offset+ct))}return c&&J&&(m=Qt(J),c.seek(f),K=Qt(J),c._caScrollDist=m[o.p]-K[o.p],e=e/c._caScrollDist*f),c&&c.seek(P),c?e:Math.round(e)},ai=/(webkit|moz|length|cssText|inset)/i,En=function(e,r,t,o){if(e.parentNode!==r){var n=e.style,i,l;if(r===Fe){e._stOrig=n.cssText,l=Nt(e);for(i in l)!+i&&!ai.test(i)&&l[i]&&typeof n[i]=="string"&&i!=="0"&&(n[i]=l[i]);n.top=t,n.left=o}else n.cssText=e._stOrig;F.core.getCache(e).uncache=1,r.appendChild(e)}},us=function(e,r,t){var o=r,n=o;return function(i){var l=Math.round(e());return l!==o&&l!==n&&Math.abs(l-o)>3&&Math.abs(l-n)>3&&(i=l,t&&t()),n=o,o=Math.round(i),o}},dr=function(e,r,t){var o={};o[r.p]="+="+t,F.set(e,o)},In=function(e,r){var t=ro(e,r),o="_scroll"+r.p2,n=function i(l,p,w,C,d){var f=i.tween,c=p.onComplete,v={};w=w||t();var P=us(t,w,function(){f.kill(),i.tween=0});return d=C&&d||0,C=C||l-w,f&&f.kill(),p[o]=l,p.inherit=!1,p.modifiers=v,v[o]=function(){return P(w+C*f.ratio+d*f.ratio*f.ratio)},p.onUpdate=function(){be.cache++,i.tween&&Kt()},p.onComplete=function(){i.tween=0,c&&c.call(f)},f=i.tween=F.to(e,p),f};return e[o]=t,t.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},ht(e,"wheel",t.wheelHandler),_e.isTouch&&ht(e,"touchmove",t.wheelHandler),n},_e=function(){function s(r,t){xo||s.register(F)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),$r(this),this.init(r,t)}var e=s.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Fo){this.update=this.refresh=this.kill=Wt;return}t=bn(Rt(t)||Ho(t)||t.nodeType?{trigger:t}:t,ur);var n=t,i=n.onUpdate,l=n.toggleClass,p=n.id,w=n.onToggle,C=n.onRefresh,d=n.scrub,f=n.trigger,c=n.pin,v=n.pinSpacing,P=n.invalidateOnRefresh,m=n.anticipatePin,K=n.onScrubComplete,J=n.onSnapComplete,ne=n.once,D=n.snap,Me=n.pinReparent,Q=n.pinSpacer,k=n.containerAnimation,Te=n.fastScrollEnd,te=n.preventOverlaps,g=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Et:ut,Y=!d&&d!==0,y=It(t.scroller||xe),ee=F.core.getCache(y),re=ho(y),ie=("pinType"in t?t.pinType:oo(y,"pinType")||re&&"fixed")==="fixed",Be=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],V=Y&&t.toggleActions.split(" "),Z="markers"in t?t.markers:ur.markers,M=re?0:parseFloat(Nt(y)["border"+g.p2+Io])||0,a=this,S=t.onRefreshInit&&function(){return t.onRefreshInit(a)},W=qs(y,re,g),H=Ks(y,re),oe=0,ve=0,Ce=0,me=ro(y,g),ze,Pe,Ee,Ie,Se,j,le,Xe,Ue,u,ke,Ze,ot,De,x,L,de,O,q,z,B,ce,he,U,E,ue,R,qe,ft,st,it,N,je,Ke,at,A,$,Ge,X;if(a._startClamp=a._endClamp=!1,a._dir=g,m*=45,a.scroller=y,a.scroll=k?k.time.bind(k):me,Ie=me(),a.vars=t,o=o||t.animation,"refreshPriority"in t&&($n=1,t.refreshPriority===-9999&&(qo=a)),ee.tweenScroll=ee.tweenScroll||{top:In(y,ut),left:In(y,Et)},a.tweenTo=ze=ee.tweenScroll[g.p],a.scrubDuration=function(b){je=Ho(b)&&b,je?N?N.duration(b):N=F.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:je,paused:!0,onComplete:function(){return K&&K(a)}}):(N&&N.progress(1).kill(),N=0)},o&&(o.vars.lazy=!1,o._initted&&!a.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),a.animation=o.pause(),o.scrollTrigger=a,a.scrubDuration(d),st=0,p||(p=o.vars.id)),D&&((!io(D)||D.push)&&(D={snapTo:D}),"scrollBehavior"in Fe.style&&F.set(re?[Fe,Ot]:y,{scrollBehavior:"auto"}),be.forEach(function(b){return yt(b)&&b.target===(re?Ve.scrollingElement||Ot:y)&&(b.smooth=!1)}),Ee=yt(D.snapTo)?D.snapTo:D.snapTo==="labels"?ei(o):D.snapTo==="labelsDirectional"?ti(o):D.directional!==!1?function(b,I){return cn(D.snapTo)(b,vt()-ve<500?0:I.direction)}:F.utils.snap(D.snapTo),Ke=D.duration||{min:.1,max:2},Ke=io(Ke)?Zo(Ke.min,Ke.max):Zo(Ke,Ke),at=F.delayedCall(D.delay||je/2||.1,function(){var b=me(),I=vt()-ve<500,h=ze.tween;if((I||Math.abs(a.getVelocity())<10)&&!h&&!Dr&&oe!==b){var G=(b-j)/De,Ae=o&&!Y?o.totalProgress():G,fe=I?0:(Ae-it)/(vt()-No)*1e3||0,Ye=F.utils.clamp(-G,1-G,vo(fe/2)*fe/.185),pt=G+(D.inertia===!1?0:Ye),$e,He,ye=D,tt=ye.onStart,pe=ye.onInterrupt,Qe=ye.onComplete;if($e=Ee(pt,a),Ho($e)||($e=pt),He=Math.max(0,Math.round(j+$e*De)),b<=le&&b>=j&&He!==b){if(h&&!h._initted&&h.data<=vo(He-b))return;D.inertia===!1&&(Ye=$e-G),ze(He,{duration:Ke(vo(Math.max(vo(pt-Ae),vo($e-Ae))*.185/fe/.05||0)),ease:D.ease||"power3",data:vo(He-b),onInterrupt:function(){return at.restart(!0)&&pe&&pe(a)},onComplete:function(){a.update(),oe=me(),o&&!Y&&(N?N.resetTo("totalProgress",$e,o._tTime/o._tDur):o.progress($e)),st=it=o&&!Y?o.totalProgress():a.progress,J&&J(a),Qe&&Qe(a)}},b,Ye*De,He-b-Ye*De),tt&&tt(a,ze.tween)}}else a.isActive&&oe!==b&&at.restart(!0)}).pause()),p&&(qr[p]=a),f=a.trigger=It(f||c!==!0&&c),X=f&&f._gsap&&f._gsap.stRevert,X&&(X=X(a)),c=c===!0?f:It(c),Rt(l)&&(l={targets:f,className:l}),c&&(v===!1||v===Bt||(v=!v&&c.parentNode&&c.parentNode.style&&Nt(c.parentNode).display==="flex"?!1:nt),a.pin=c,Pe=F.core.getCache(c),Pe.spacer?x=Pe.pinState:(Q&&(Q=It(Q),Q&&!Q.nodeType&&(Q=Q.current||Q.nativeElement),Pe.spacerIsNative=!!Q,Q&&(Pe.spacerState=pr(Q))),Pe.spacer=O=Q||Ve.createElement("div"),O.classList.add("pin-spacer"),p&&O.classList.add("pin-spacer-"+p),Pe.pinState=x=pr(c)),t.force3D!==!1&&F.set(c,{force3D:!0}),a.spacer=O=Pe.spacer,ft=Nt(c),U=ft[v+g.os2],z=F.getProperty(c),B=F.quickSetter(c,g.a,ct),Hr(c,O,ft),de=pr(c)),Z){Ze=io(Z)?bn(Z,Tn):Tn,u=fr("scroller-start",p,y,g,Ze,0),ke=fr("scroller-end",p,y,g,Ze,0,u),q=u["offset"+g.op.d2];var ae=It(oo(y,"content")||y);Xe=this.markerStart=fr("start",p,ae,g,Ze,q,0,k),Ue=this.markerEnd=fr("end",p,ae,g,Ze,q,0,k),k&&(Ge=F.quickSetter([Xe,Ue],g.a,ct)),!ie&&!(Vt.length&&oo(y,"fixedMarkers")===!0)&&(Js(re?Fe:y),F.set([u,ke],{force3D:!0}),ue=F.quickSetter(u,g.a,ct),qe=F.quickSetter(ke,g.a,ct))}if(k){var T=k.vars.onUpdate,_=k.vars.onUpdateParams;k.eventCallback("onUpdate",function(){a.update(0,0,1),T&&T.apply(k,_||[])})}if(a.previous=function(){return we[we.indexOf(a)-1]},a.next=function(){return we[we.indexOf(a)+1]},a.revert=function(b,I){if(!I)return a.kill(!0);var h=b!==!1||!a.enabled,G=_t;h!==a.isReverted&&(h&&(A=Math.max(me(),a.scroll.rec||0),Ce=a.progress,$=o&&o.progress()),Xe&&[Xe,Ue,u,ke].forEach(function(Ae){return Ae.style.display=h?"none":"block"}),h&&(_t=a,a.update(h)),c&&(!Me||!a.isActive)&&(h?ni(c,O,x):Hr(c,O,Nt(c),E)),h||a.update(h),_t=G,a.isReverted=h)},a.refresh=function(b,I,h,G){if(!((_t||!a.enabled)&&!I)){if(c&&b&&Ft){ht(s,"scrollEnd",is);return}!Mt&&S&&S(a),_t=a,ze.tween&&!h&&(ze.tween.kill(),ze.tween=0),N&&N.pause(),P&&o&&o.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var Ae=W(),fe=H(),Ye=k?k.duration():Zt(y,g),pt=De<=.01,$e=0,He=G||0,ye=io(h)?h.end:t.end,tt=t.endTrigger||f,pe=io(h)?h.start:t.start||(t.start===0||!f?0:c?"0 0":"0 100%"),Qe=a.pinnedContainer=t.pinnedContainer&&It(t.pinnedContainer,a),Re=f&&Math.max(0,we.indexOf(a))||0,Je=Re,Oe,et,jt,Ht,mt,lt,Ut,Ar,fn,Do,Gt,Ao,or;for(Z&&io(h)&&(Ao=F.getProperty(u,g.p),or=F.getProperty(ke,g.p));Je-- >0;)lt=we[Je],lt.end||lt.refresh(0,1)||(_t=a),Ut=lt.pin,Ut&&(Ut===f||Ut===c||Ut===Qe)&&!lt.isReverted&&(Do||(Do=[]),Do.unshift(lt),lt.revert(!0,!0)),lt!==we[Je]&&(Re--,Je--);for(yt(pe)&&(pe=pe(a)),pe=wn(pe,"start",a),j=Mn(pe,f,Ae,g,me(),Xe,u,a,fe,M,ie,Ye,k,a._startClamp&&"_startClamp")||(c?-.001:0),yt(ye)&&(ye=ye(a)),Rt(ye)&&!ye.indexOf("+=")&&(~ye.indexOf(" ")?ye=(Rt(pe)?pe.split(" ")[0]:"")+ye:($e=vr(ye.substr(2),Ae),ye=Rt(pe)?pe:(k?F.utils.mapRange(0,k.duration(),k.scrollTrigger.start,k.scrollTrigger.end,j):j)+$e,tt=f)),ye=wn(ye,"end",a),le=Math.max(j,Mn(ye||(tt?"100% 0":Ye),tt,Ae,g,me()+$e,Ue,ke,a,fe,M,ie,Ye,k,a._endClamp&&"_endClamp"))||-.001,$e=0,Je=Re;Je--;)lt=we[Je],Ut=lt.pin,Ut&&lt.start-lt._pinPush<=j&&!k&&lt.end>0&&(Oe=lt.end-(a._startClamp?Math.max(0,lt.start):lt.start),(Ut===f&&lt.start-lt._pinPush<j||Ut===Qe)&&isNaN(pe)&&($e+=Oe*(1-lt.progress)),Ut===c&&(He+=Oe));if(j+=$e,le+=$e,a._startClamp&&(a._startClamp+=$e),a._endClamp&&!Mt&&(a._endClamp=le||-.001,le=Math.min(le,Zt(y,g))),De=le-j||(j-=.01)&&.001,pt&&(Ce=F.utils.clamp(0,1,F.utils.normalize(j,le,A))),a._pinPush=He,Xe&&$e&&(Oe={},Oe[g.a]="+="+$e,Qe&&(Oe[g.p]="-="+me()),F.set([Xe,Ue],Oe)),c&&!(Qr&&a.end>=Zt(y,g)))Oe=Nt(c),Ht=g===ut,jt=me(),ce=parseFloat(z(g.a))+He,!Ye&&le>1&&(Gt=(re?Ve.scrollingElement||Ot:y).style,Gt={style:Gt,value:Gt["overflow"+g.a.toUpperCase()]},re&&Nt(Fe)["overflow"+g.a.toUpperCase()]!=="scroll"&&(Gt.style["overflow"+g.a.toUpperCase()]="scroll")),Hr(c,O,Oe),de=pr(c),et=Qt(c,!0),Ar=ie&&ro(y,Ht?Et:ut)(),v?(E=[v+g.os2,De+He+ct],E.t=O,Je=v===nt?Er(c,g)+De+He:0,Je&&(E.push(g.d,Je+ct),O.style.flexBasis!=="auto"&&(O.style.flexBasis=Je+ct)),Mo(E),Qe&&we.forEach(function(Ro){Ro.pin===Qe&&Ro.vars.pinSpacing!==!1&&(Ro._subPinOffset=!0)}),ie&&me(A)):(Je=Er(c,g),Je&&O.style.flexBasis!=="auto"&&(O.style.flexBasis=Je+ct)),ie&&(mt={top:et.top+(Ht?jt-j:Ar)+ct,left:et.left+(Ht?Ar:jt-j)+ct,boxSizing:"border-box",position:"fixed"},mt[uo]=mt["max"+Io]=Math.ceil(et.width)+ct,mt[fo]=mt["max"+ln]=Math.ceil(et.height)+ct,mt[Bt]=mt[Bt+$o]=mt[Bt+Vo]=mt[Bt+Qo]=mt[Bt+jo]="0",mt[nt]=Oe[nt],mt[nt+$o]=Oe[nt+$o],mt[nt+Vo]=Oe[nt+Vo],mt[nt+Qo]=Oe[nt+Qo],mt[nt+jo]=Oe[nt+jo],L=ii(x,mt,Me),Mt&&me(0)),o?(fn=o._initted,Lr(1),o.render(o.duration(),!0,!0),he=z(g.a)-ce+De+He,R=Math.abs(De-he)>1,ie&&R&&L.splice(L.length-2,2),o.render(0,!0,!0),fn||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Lr(0)):he=De,Gt&&(Gt.value?Gt.style["overflow"+g.a.toUpperCase()]=Gt.value:Gt.style.removeProperty("overflow-"+g.a));else if(f&&me()&&!k)for(et=f.parentNode;et&&et!==Fe;)et._pinOffset&&(j-=et._pinOffset,le-=et._pinOffset),et=et.parentNode;Do&&Do.forEach(function(Ro){return Ro.revert(!1,!0)}),a.start=j,a.end=le,Ie=Se=Mt?A:me(),!k&&!Mt&&(Ie<A&&me(A),a.scroll.rec=0),a.revert(!1,!0),ve=vt(),at&&(oe=-1,at.restart(!0)),_t=0,o&&Y&&(o._initted||$)&&o.progress()!==$&&o.progress($||0,!0).render(o.time(),!0,!0),(pt||Ce!==a.progress||k||P||o&&!o._initted)&&(o&&!Y&&o.totalProgress(k&&j<-.001&&!Ce?F.utils.normalize(j,le,0):Ce,!0),a.progress=pt||(Ie-j)/De===Ce?0:Ce),c&&v&&(O._pinOffset=Math.round(a.progress*he)),N&&N.invalidate(),isNaN(Ao)||(Ao-=F.getProperty(u,g.p),or-=F.getProperty(ke,g.p),dr(u,g,Ao),dr(Xe,g,Ao-(G||0)),dr(ke,g,or),dr(Ue,g,or-(G||0))),pt&&!Mt&&a.update(),C&&!Mt&&!ot&&(ot=!0,C(a),ot=!1)}},a.getVelocity=function(){return(me()-Se)/(vt()-No)*1e3||0},a.endAnimation=function(){Oo(a.callbackAnimation),o&&(N?N.progress(1):o.paused()?Y||Oo(o,a.direction<0,1):Oo(o,o.reversed()))},a.labelToScroll=function(b){return o&&o.labels&&(j||a.refresh()||j)+o.labels[b]/o.duration()*De||0},a.getTrailing=function(b){var I=we.indexOf(a),h=a.direction>0?we.slice(0,I).reverse():we.slice(I+1);return(Rt(b)?h.filter(function(G){return G.vars.preventOverlaps===b}):h).filter(function(G){return a.direction>0?G.end<=j:G.start>=le})},a.update=function(b,I,h){if(!(k&&!h&&!b)){var G=Mt===!0?A:a.scroll(),Ae=b?0:(G-j)/De,fe=Ae<0?0:Ae>1?1:Ae||0,Ye=a.progress,pt,$e,He,ye,tt,pe,Qe,Re;if(I&&(Se=Ie,Ie=k?me():G,D&&(it=st,st=o&&!Y?o.totalProgress():fe)),m&&c&&!_t&&!ir&&Ft&&(!fe&&j<G+(G-Se)/(vt()-No)*m?fe=1e-4:fe===1&&le>G+(G-Se)/(vt()-No)*m&&(fe=.9999)),fe!==Ye&&a.enabled){if(pt=a.isActive=!!fe&&fe<1,$e=!!Ye&&Ye<1,pe=pt!==$e,tt=pe||!!fe!=!!Ye,a.direction=fe>Ye?1:-1,a.progress=fe,tt&&!_t&&(He=fe&&!Ye?0:fe===1?1:Ye===1?2:3,Y&&(ye=!pe&&V[He+1]!=="none"&&V[He+1]||V[He],Re=o&&(ye==="complete"||ye==="reset"||ye in o))),te&&(pe||Re)&&(Re||d||!o)&&(yt(te)?te(a):a.getTrailing(te).forEach(function(jt){return jt.endAnimation()})),Y||(N&&!_t&&!ir?(N._dp._time-N._start!==N._time&&N.render(N._dp._time-N._start),N.resetTo?N.resetTo("totalProgress",fe,o._tTime/o._tDur):(N.vars.totalProgress=fe,N.invalidate().restart())):o&&o.totalProgress(fe,!!(_t&&(ve||b)))),c){if(b&&v&&(O.style[v+g.os2]=U),!ie)B(zo(ce+he*fe));else if(tt){if(Qe=!b&&fe>Ye&&le+1>G&&G+1>=Zt(y,g),Me)if(!b&&(pt||Qe)){var Je=Qt(c,!0),Oe=G-j;En(c,Fe,Je.top+(g===ut?Oe:0)+ct,Je.left+(g===ut?0:Oe)+ct)}else En(c,O);Mo(pt||Qe?L:de),R&&fe<1&&pt||B(ce+(fe===1&&!Qe?he:0))}}D&&!ze.tween&&!_t&&!ir&&at.restart(!0),l&&(pe||ne&&fe&&(fe<1||!Br))&&Jo(l.targets).forEach(function(jt){return jt.classList[pt||ne?"add":"remove"](l.className)}),i&&!Y&&!b&&i(a),tt&&!_t?(Y&&(Re&&(ye==="complete"?o.pause().totalProgress(1):ye==="reset"?o.restart(!0).pause():ye==="restart"?o.restart(!0):o[ye]()),i&&i(a)),(pe||!Br)&&(w&&pe&&Fr(a,w),Be[He]&&Fr(a,Be[He]),ne&&(fe===1?a.kill(!1,1):Be[He]=0),pe||(He=fe===1?1:3,Be[He]&&Fr(a,Be[He]))),Te&&!pt&&Math.abs(a.getVelocity())>(Ho(Te)?Te:2500)&&(Oo(a.callbackAnimation),N?N.progress(1):Oo(o,ye==="reverse"?1:!fe,1))):Y&&i&&!_t&&i(a)}if(qe){var et=k?G/k.duration()*(k._caScrollDist||0):G;ue(et+(u._isFlipped?1:0)),qe(et)}Ge&&Ge(-G/k.duration()*(k._caScrollDist||0))}},a.enable=function(b,I){a.enabled||(a.enabled=!0,ht(y,"resize",Uo),re||ht(y,"scroll",yo),S&&ht(s,"refreshInit",S),b!==!1&&(a.progress=Ce=0,Ie=Se=oe=me()),I!==!1&&a.refresh())},a.getTween=function(b){return b&&ze?ze.tween:N},a.setPositions=function(b,I,h,G){if(k){var Ae=k.scrollTrigger,fe=k.duration(),Ye=Ae.end-Ae.start;b=Ae.start+Ye*b/fe,I=Ae.start+Ye*I/fe}a.refresh(!1,!1,{start:vn(b,h&&!!a._startClamp),end:vn(I,h&&!!a._endClamp)},G),a.update()},a.adjustPinSpacing=function(b){if(E&&b){var I=E.indexOf(g.d)+1;E[I]=parseFloat(E[I])+b+ct,E[1]=parseFloat(E[1])+b+ct,Mo(E)}},a.disable=function(b,I){if(a.enabled&&(b!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,I||N&&N.pause(),A=0,Pe&&(Pe.uncache=1),S&&dt(s,"refreshInit",S),at&&(at.pause(),ze.tween&&ze.tween.kill()&&(ze.tween=0)),!re)){for(var h=we.length;h--;)if(we[h].scroller===y&&we[h]!==a)return;dt(y,"resize",Uo),re||dt(y,"scroll",yo)}},a.kill=function(b,I){a.disable(b,I),N&&!I&&N.kill(),p&&delete qr[p];var h=we.indexOf(a);h>=0&&we.splice(h,1),h===St&&xr>0&&St--,h=0,we.forEach(function(G){return G.scroller===a.scroller&&(h=1)}),h||Mt||(a.scroll.rec=0),o&&(o.scrollTrigger=null,b&&o.revert({kill:!1}),I||o.kill()),Xe&&[Xe,Ue,u,ke].forEach(function(G){return G.parentNode&&G.parentNode.removeChild(G)}),qo===a&&(qo=0),c&&(Pe&&(Pe.uncache=1),h=0,we.forEach(function(G){return G.pin===c&&h++}),h||(Pe.spacer=0)),t.onKill&&t.onKill(a)},we.push(a),a.enable(!1,!1),X&&X(a),o&&o.add&&!De){var se=a.update;a.update=function(){a.update=se,be.cache++,j||le||a.refresh()},F.delayedCall(.01,a.update),De=.01,j=le=0}else a.refresh();c&&ri()},s.register=function(t){return xo||(F=t||es(),Jn()&&window.document&&s.enable(),xo=Fo),xo},s.defaults=function(t){if(t)for(var o in t)ur[o]=t[o];return ur},s.disable=function(t,o){Fo=0,we.forEach(function(i){return i[o?"kill":"disable"](t)}),dt(xe,"wheel",yo),dt(Ve,"scroll",yo),clearInterval(sr),dt(Ve,"touchcancel",Wt),dt(Fe,"touchstart",Wt),lr(dt,Ve,"pointerdown,touchstart,mousedown",yn),lr(dt,Ve,"pointerup,touchend,mouseup",xn),Sr.kill(),ar(dt);for(var n=0;n<be.length;n+=3)cr(dt,be[n],be[n+1]),cr(dt,be[n],be[n+2])},s.enable=function(){if(xe=window,Ve=document,Ot=Ve.documentElement,Fe=Ve.body,F&&(Jo=F.utils.toArray,Zo=F.utils.clamp,$r=F.core.context||Wt,Lr=F.core.suppressOverwrites||Wt,rn=xe.history.scrollRestoration||"auto",Kr=xe.pageYOffset||0,F.core.globals("ScrollTrigger",s),Fe)){Fo=1,So=document.createElement("div"),So.style.height="100vh",So.style.position="absolute",cs(),Qs(),rt.register(F),s.isTouch=rt.isTouch,Jt=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),jr=rt.isTouch===1,ht(xe,"wheel",yo),on=[xe,Ve,Ot,Fe],F.matchMedia?(s.matchMedia=function(w){var C=F.matchMedia(),d;for(d in w)C.add(d,w[d]);return C},F.addEventListener("matchMediaInit",function(){return un()}),F.addEventListener("matchMediaRevert",function(){return as()}),F.addEventListener("matchMedia",function(){co(0,1),mo("matchMedia")}),F.matchMedia().add("(orientation: portrait)",function(){return zr(),zr})):console.warn("Requires GSAP 3.11.0 or later"),zr(),ht(Ve,"scroll",yo);var t=Fe.hasAttribute("style"),o=Fe.style,n=o.borderTopStyle,i=F.core.Animation.prototype,l,p;for(i.revert||Object.defineProperty(i,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",l=Qt(Fe),ut.m=Math.round(l.top+ut.sc())||0,Et.m=Math.round(l.left+Et.sc())||0,n?o.borderTopStyle=n:o.removeProperty("border-top-style"),t||(Fe.setAttribute("style",""),Fe.removeAttribute("style")),sr=setInterval(Cn,250),F.delayedCall(.5,function(){return ir=0}),ht(Ve,"touchcancel",Wt),ht(Fe,"touchstart",Wt),lr(ht,Ve,"pointerdown,touchstart,mousedown",yn),lr(ht,Ve,"pointerup,touchend,mouseup",xn),Vr=F.utils.checkPrefix("transform"),br.push(Vr),xo=vt(),Sr=F.delayedCall(.2,co).pause(),bo=[Ve,"visibilitychange",function(){var w=xe.innerWidth,C=xe.innerHeight;Ve.hidden?(mn=w,_n=C):(mn!==w||_n!==C)&&Uo()},Ve,"DOMContentLoaded",co,xe,"load",co,xe,"resize",Uo],ar(ht),we.forEach(function(w){return w.enable(0,1)}),p=0;p<be.length;p+=3)cr(dt,be[p],be[p+1]),cr(dt,be[p],be[p+2])}},s.config=function(t){"limitCallbacks"in t&&(Br=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(sr)||(sr=o)&&setInterval(Cn,o),"ignoreMobileResize"in t&&(jr=s.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(ar(dt)||ar(ht,t.autoRefreshEvents||"none"),Qn=(t.autoRefreshEvents+"").indexOf("resize")===-1)},s.scrollerProxy=function(t,o){var n=It(t),i=be.indexOf(n),l=ho(n);~i&&be.splice(i,l?6:2),o&&(l?Vt.unshift(xe,o,Fe,o,Ot,o):Vt.unshift(n,o))},s.clearMatchMedia=function(t){we.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},s.isInViewport=function(t,o,n){var i=(Rt(t)?It(t):t).getBoundingClientRect(),l=i[n?uo:fo]*o||0;return n?i.right-l>0&&i.left+l<xe.innerWidth:i.bottom-l>0&&i.top+l<xe.innerHeight},s.positionInViewport=function(t,o,n){Rt(t)&&(t=It(t));var i=t.getBoundingClientRect(),l=i[n?uo:fo],p=o==null?l/2:o in Ir?Ir[o]*l:~o.indexOf("%")?parseFloat(o)*l/100:parseFloat(o)||0;return n?(i.left+p)/xe.innerWidth:(i.top+p)/xe.innerHeight},s.killAll=function(t){if(we.slice(0).forEach(function(n){return n.vars.id!=="ScrollSmoother"&&n.kill()}),t!==!0){var o=go.killAll||[];go={},o.forEach(function(n){return n()})}},s}();_e.version="3.12.7";_e.saveStyles=function(s){return s?Jo(s).forEach(function(e){if(e&&e.style){var r=At.indexOf(e);r>=0&&At.splice(r,5),At.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),F.core.getCache(e),$r())}}):At};_e.revert=function(s,e){return un(!s,e)};_e.create=function(s,e){return new _e(s,e)};_e.refresh=function(s){return s?Uo(!0):(xo||_e.register())&&co(!0)};_e.update=function(s){return++be.cache&&Kt(s===!0?2:0)};_e.clearScrollMemory=ls;_e.maxScroll=function(s,e){return Zt(s,e?Et:ut)};_e.getScrollFunc=function(s,e){return ro(It(s),e?Et:ut)};_e.getById=function(s){return qr[s]};_e.getAll=function(){return we.filter(function(s){return s.vars.id!=="ScrollSmoother"})};_e.isScrolling=function(){return!!Ft};_e.snapDirectional=cn;_e.addEventListener=function(s,e){var r=go[s]||(go[s]=[]);~r.indexOf(e)||r.push(e)};_e.removeEventListener=function(s,e){var r=go[s],t=r&&r.indexOf(e);t>=0&&r.splice(t,1)};_e.batch=function(s,e){var r=[],t={},o=e.interval||.016,n=e.batchMax||1e9,i=function(w,C){var d=[],f=[],c=F.delayedCall(o,function(){C(d,f),d=[],f=[]}).pause();return function(v){d.length||c.restart(!0),d.push(v.trigger),f.push(v),n<=d.length&&c.progress(1)}},l;for(l in e)t[l]=l.substr(0,2)==="on"&&yt(e[l])&&l!=="onRefreshInit"?i(l,e[l]):e[l];return yt(n)&&(n=n(),ht(_e,"refresh",function(){return n=e.batchMax()})),Jo(s).forEach(function(p){var w={};for(l in t)w[l]=t[l];w.trigger=p,r.push(_e.create(w))}),r};var Dn=function(e,r,t,o){return r>o?e(o):r<0&&e(0),t>o?(o-r)/(t-r):t<0?r/(r-t):1},Ur=function s(e,r){r===!0?e.style.removeProperty("touch-action"):e.style.touchAction=r===!0?"auto":r?"pan-"+r+(rt.isTouch?" pinch-zoom":""):"none",e===Ot&&s(Fe,r)},hr={auto:1,scroll:1},li=function(e){var r=e.event,t=e.target,o=e.axis,n=(r.changedTouches?r.changedTouches[0]:r).target,i=n._gsap||F.core.getCache(n),l=vt(),p;if(!i._isScrollT||l-i._isScrollT>2e3){for(;n&&n!==Fe&&(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth||!(hr[(p=Nt(n)).overflowY]||hr[p.overflowX]));)n=n.parentNode;i._isScroll=n&&n!==t&&!ho(n)&&(hr[(p=Nt(n)).overflowY]||hr[p.overflowX]),i._isScrollT=l}(i._isScroll||o==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},fs=function(e,r,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:o=o&&li,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&ht(Ve,rt.eventTypes[0],Rn,!1,!0)},onDisable:function(){return dt(Ve,rt.eventTypes[0],Rn,!0)}})},ci=/(input|label|select|textarea)/i,An,Rn=function(e){var r=ci.test(e.target.tagName);(r||An)&&(e._gsapAllow=!0,An=r)},ui=function(e){io(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var r=e,t=r.normalizeScrollX,o=r.momentum,n=r.allowNestedScroll,i=r.onRelease,l,p,w=It(e.target)||Ot,C=F.core.globals().ScrollSmoother,d=C&&C.get(),f=Jt&&(e.content&&It(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),c=ro(w,ut),v=ro(w,Et),P=1,m=(rt.isTouch&&xe.visualViewport?xe.visualViewport.scale*xe.visualViewport.width:xe.outerWidth)/xe.innerWidth,K=0,J=yt(o)?function(){return o(l)}:function(){return o||2.8},ne,D,Me=fs(w,e.type,!0,n),Q=function(){return D=!1},k=Wt,Te=Wt,te=function(){p=Zt(w,ut),Te=Zo(Jt?1:0,p),t&&(k=Zo(0,Zt(w,Et))),ne=po},g=function(){f._gsap.y=zo(parseFloat(f._gsap.y)+c.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",c.offset=c.cacheID=0},Y=function(){if(D){requestAnimationFrame(Q);var Z=zo(l.deltaY/2),M=Te(c.v-Z);if(f&&M!==c.v+c.offset){c.offset=M-c.v;var a=zo((parseFloat(f&&f._gsap.y)||0)-c.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",f._gsap.y=a+"px",c.cacheID=be.cache,Kt()}return!0}c.offset&&g(),D=!0},y,ee,re,ie,Be=function(){te(),y.isActive()&&y.vars.scrollY>p&&(c()>p?y.progress(1)&&c(p):y.resetTo("scrollY",p))};return f&&F.set(f,{y:"+=0"}),e.ignoreCheck=function(V){return Jt&&V.type==="touchmove"&&Y()||P>1.05&&V.type!=="touchstart"||l.isGesturing||V.touches&&V.touches.length>1},e.onPress=function(){D=!1;var V=P;P=zo((xe.visualViewport&&xe.visualViewport.scale||1)/m),y.pause(),V!==P&&Ur(w,P>1.01?!0:t?!1:"x"),ee=v(),re=c(),te(),ne=po},e.onRelease=e.onGestureStart=function(V,Z){if(c.offset&&g(),!Z)ie.restart(!0);else{be.cache++;var M=J(),a,S;t&&(a=v(),S=a+M*.05*-V.velocityX/.227,M*=Dn(v,a,S,Zt(w,Et)),y.vars.scrollX=k(S)),a=c(),S=a+M*.05*-V.velocityY/.227,M*=Dn(c,a,S,Zt(w,ut)),y.vars.scrollY=Te(S),y.invalidate().duration(M).play(.01),(Jt&&y.vars.scrollY>=p||a>=p-1)&&F.to({},{onUpdate:Be,duration:M})}i&&i(V)},e.onWheel=function(){y._ts&&y.pause(),vt()-K>1e3&&(ne=0,K=vt())},e.onChange=function(V,Z,M,a,S){if(po!==ne&&te(),Z&&t&&v(k(a[2]===Z?ee+(V.startX-V.x):v()+Z-a[1])),M){c.offset&&g();var W=S[2]===M,H=W?re+V.startY-V.y:c()+M-S[1],oe=Te(H);W&&H!==oe&&(re+=oe-H),c(oe)}(M||Z)&&Kt()},e.onEnable=function(){Ur(w,t?!1:"x"),_e.addEventListener("refresh",Be),ht(xe,"resize",Be),c.smooth&&(c.target.style.scrollBehavior="auto",c.smooth=v.smooth=!1),Me.enable()},e.onDisable=function(){Ur(w,!0),dt(xe,"resize",Be),_e.removeEventListener("refresh",Be),Me.kill()},e.lockAxis=e.lockAxis!==!1,l=new rt(e),l.iOS=Jt,Jt&&!c()&&c(1),Jt&&F.ticker.add(Wt),ie=l._dc,y=F.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:us(c,c(),function(){return y.pause()})},onUpdate:Kt,onComplete:ie.vars.onComplete}),l};_e.sort=function(s){if(yt(s))return we.sort(s);var e=xe.pageYOffset||0;return _e.getAll().forEach(function(r){return r._sortY=r.trigger?e+r.trigger.getBoundingClientRect().top:r.start+xe.innerHeight}),we.sort(s||function(r,t){return(r.vars.refreshPriority||0)*-1e6+(r.vars.containerAnimation?1e6:r._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};_e.observe=function(s){return new rt(s)};_e.normalizeScroll=function(s){if(typeof s>"u")return Ct;if(s===!0&&Ct)return Ct.enable();if(s===!1){Ct&&Ct.kill(),Ct=s;return}var e=s instanceof rt?s:ui(s);return Ct&&Ct.target===e.target&&Ct.kill(),ho(e.target)&&(Ct=e),e};_e.core={_getVelocityProp:Zr,_inputObserver:fs,_scrollers:be,_proxies:Vt,bridge:{ss:function(){Ft||mo("scrollStart"),Ft=vt()},ref:function(){return _t}}};es()&&F.registerPlugin(_e);var Ko=function(){var s=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(C){C.preventDefault(),t(++s%e.children.length)},!1);function r(C){return e.appendChild(C.dom),C}function t(C){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===C?"block":"none";s=C}var o=(performance||Date).now(),n=o,i=0,l=r(new Ko.Panel("FPS","#0ff","#002")),p=r(new Ko.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var w=r(new Ko.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:r,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){i++;var C=(performance||Date).now();if(p.update(C-o,200),C>=n+1e3&&(l.update(i*1e3/(C-n),100),n=C,i=0,w)){var d=performance.memory;w.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return C},update:function(){o=this.end()},domElement:e,setMode:t}};Ko.Panel=function(s,e,r){var t=1/0,o=0,n=Math.round,i=n(window.devicePixelRatio||1),l=80*i,p=48*i,w=3*i,C=2*i,d=3*i,f=15*i,c=74*i,v=30*i,P=document.createElement("canvas");P.width=l,P.height=p,P.style.cssText="width:80px;height:48px";var m=P.getContext("2d");return m.font="bold "+9*i+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=r,m.fillRect(0,0,l,p),m.fillStyle=e,m.fillText(s,w,C),m.fillRect(d,f,c,v),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(d,f,c,v),{dom:P,update:function(K,J){t=Math.min(t,K),o=Math.max(o,K),m.fillStyle=r,m.globalAlpha=1,m.fillRect(0,0,l,f),m.fillStyle=e,m.fillText(n(K)+" "+s+" ("+n(t)+"-"+n(o)+")",w,C),m.drawImage(P,d+i,f,c-i,v,d,f,c-i,v),m.fillRect(d+c-i,f,i,v),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(d+c-i,f,i,n((1-K/J)*v))}}};const ps={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class tr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const fi=new Ps(-1,1,1,-1,0,1);class pi extends Co{constructor(){super(),this.setAttribute("position",new pn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new pn([0,2,0,0,2,0],2))}}const di=new pi;class ds{constructor(e){this._mesh=new We(di,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,fi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class hi extends tr{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof lo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Yr.clone(e.uniforms),this.material=new lo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ds(this.material)}render(e,r,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class kn extends tr{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,t){const o=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let i,l;this.inverse?(i=0,l=1):(i=1,l=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),n.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),n.buffers.stencil.setClear(l),n.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.color.setMask(!0),n.buffers.depth.setMask(!0),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(o.EQUAL,1,4294967295),n.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),n.buffers.stencil.setLocked(!0)}}class gi extends tr{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class mi{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const t=e.getSize(new kt);this._width=t.width,this._height=t.height,r=new mr(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:_r}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new hi(ps),this.copyPass.material.blending=Ss,this.clock=new Ms}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let t=!1;for(let o=0,n=this.passes.length;o<n;o++){const i=this.passes[o];if(i.enabled!==!1){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),i.needsSwap){if(t){const l=this.renderer.getContext(),p=this.renderer.state.buffers.stencil;p.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),p.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}kn!==void 0&&(i instanceof kn?t=!0:i instanceof gi&&(t=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new kt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class _i extends tr{constructor(e,r,t=null,o=null,n=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Pt}render(e,r,t){const o=e.autoClear;e.autoClear=!1;let n,i;this.overrideMaterial!==null&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(n),this.overrideMaterial!==null&&(this.scene.overrideMaterial=i),e.autoClear=o}}const wi={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Pt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class _o extends tr{constructor(e,r,t,o){super(),this.strength=r!==void 0?r:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new kt(e.x,e.y):new kt(256,256),this.clearColor=new Pt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let n=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);this.renderTargetBright=new mr(n,i,{type:_r}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){const f=new mr(n,i,{type:_r});f.texture.name="UnrealBloomPass.h"+d,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const c=new mr(n,i,{type:_r});c.texture.name="UnrealBloomPass.v"+d,c.texture.generateMipmaps=!1,this.renderTargetsVertical.push(c),n=Math.round(n/2),i=Math.round(i/2)}const l=wi;this.highPassUniforms=Yr.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new lo({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const p=[3,5,7,9,11];n=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(p[d])),this.separableBlurMaterials[d].uniforms.invSize.value=new kt(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const w=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=w,this.bloomTintColors=[new ge(1,1,1),new ge(1,1,1),new ge(1,1,1),new ge(1,1,1),new ge(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const C=ps;this.copyUniforms=Yr.clone(C.uniforms),this.blendMaterial=new lo({uniforms:this.copyUniforms,vertexShader:C.vertexShader,fragmentShader:C.fragmentShader,blending:Xt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Pt,this.oldClearAlpha=1,this.basic=new Tt,this.fsQuad=new ds(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let t=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(t,o);for(let n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(t,o),this.renderTargetsVertical[n].setSize(t,o),this.separableBlurMaterials[n].uniforms.invSize.value=new kt(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,r,t,o,n){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const i=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),n&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let p=0;p<this.nMips;p++)this.fsQuad.material=this.separableBlurMaterials[p],this.separableBlurMaterials[p].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[p].uniforms.direction.value=_o.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[p]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[p].uniforms.colorTexture.value=this.renderTargetsHorizontal[p].texture,this.separableBlurMaterials[p].uniforms.direction.value=_o.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[p]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[p];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,n&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=i}getSeparableBlurMaterial(e){const r=[];for(let t=0;t<e;t++)r.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new lo({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new kt(.5,.5)},direction:{value:new kt(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new lo({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}_o.BlurDirectionX=new kt(1,0);_o.BlurDirectionY=new kt(0,1);class On extends Es{constructor(e,r={}){const t=r.font;if(t===void 0)super();else{const o=t.generateShapes(e,r.size);r.depth===void 0&&(r.depth=50),r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),super(o,r)}this.type="TextGeometry"}}function vi(s,e,r,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:n}=r,i=8,l=24,p=.075;let w,C=[],d=[],f=[],c=[];const v=(m,K,J,ne)=>{const D=new Eo(m,m,m),Me=new Go(D),Q=[new Dt({color:16711680,transparent:!0,opacity:ne.opacity,blending:Xt}),new Dt({color:65280,transparent:!0,opacity:ne.opacity,blending:Xt}),new Dt({color:255,transparent:!0,opacity:ne.opacity,blending:Xt}),new Dt({color:65535,transparent:!0,opacity:ne.opacity,blending:Xt}),new Dt({color:16711935,transparent:!0,opacity:ne.opacity,blending:Xt}),new Dt({color:16776960,transparent:!0,opacity:ne.opacity,blending:Xt})],k=new wt,Te=Me.getAttribute("position").array,te=[];for(let y=0;y<Te.length/3;y+=2)te.push(y,y+1);const g=Array(6).fill(null).map(()=>new Co),Y=Array(6).fill(null).map(()=>[]);for(let y=0;y<te.length/2;y++){const ee=y%6;Y[ee].push(te[y*2],te[y*2+1])}return g.forEach((y,ee)=>{y.setIndex(Y[ee]),y.setAttribute("position",Me.getAttribute("position"));const re=new Yt(y,Q[ee]);k.add(re)}),k.position.z=K,k.rotation.z=J,k};return(()=>{const J=.9/(l-1);for(let te=0;te<l;te++)d[te]=new Dt({transparent:!0,opacity:1-te*J});if(w=new wt,!w){console.error("introGroup failed to initialize");return}for(let te=0;te<l;te++){const g=o-te*i,Y=v(g,0,0,d[te]),y=Y.children.map(ee=>ee.material);c.push(y.map(ee=>({material:ee,originalColor:ee.color.clone()}))),w.add(Y)}w.position.z=n,e.add(w),C.push(w),f=d.map(te=>te.opacity);const ne=Le.timeline({repeat:-1});ne.to(w.rotation,{x:Ne.degToRad(360),duration:12,ease:"none"},0),ne.to(w.rotation,{y:Ne.degToRad(360),duration:10,ease:"none"},0),ne.to(w.rotation,{z:Ne.degToRad(360),duration:14,ease:"none"},0);let D=-1,Me=0;const Q=p*1e3,k=l*Q,Te=te=>{const g=te%k/Q,Y=Math.floor(g)%l;D!==-1&&te-Me>=Q&&(c[D].forEach(re=>{re.material.opacity=f[D],re.material.color.copy(re.originalColor)}),D=-1),D===-1&&Y!==D&&(D=Y,Me=te,c[D].forEach(ee=>{ee.material.opacity=1,ee.material.color.set(1,1,1)})),requestAnimationFrame(Te)};requestAnimationFrame(Te)})(),{introCubes:C}}class yi extends Is{constructor(e){super(e)}load(e,r,t,o){const n=this,i=new Ds(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(l){const p=n.parse(JSON.parse(l));r&&r(p)},t,o)}parse(e){return new xi(e)}}class xi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,r=100){const t=[],o=bi(e,r,this.data);for(let n=0,i=o.length;n<i;n++)t.push(...o[n].toShapes());return t}}function bi(s,e,r){const t=Array.from(s),o=e/r.resolution,n=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,i=[];let l=0,p=0;for(let w=0;w<t.length;w++){const C=t[w];if(C===`
`)l=0,p-=n;else{const d=Ti(C,o,l,p,r);l+=d.offsetX,i.push(d.path)}}return i}function Ti(s,e,r,t,o){const n=o.glyphs[s]||o.glyphs["?"];if(!n){console.error('THREE.Font: character "'+s+'" does not exists in font family '+o.familyName+".");return}const i=new As;let l,p,w,C,d,f,c,v;if(n.o){const P=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let m=0,K=P.length;m<K;)switch(P[m++]){case"m":l=P[m++]*e+r,p=P[m++]*e+t,i.moveTo(l,p);break;case"l":l=P[m++]*e+r,p=P[m++]*e+t,i.lineTo(l,p);break;case"q":w=P[m++]*e+r,C=P[m++]*e+t,d=P[m++]*e+r,f=P[m++]*e+t,i.quadraticCurveTo(d,f,w,C);break;case"b":w=P[m++]*e+r,C=P[m++]*e+t,d=P[m++]*e+r,f=P[m++]*e+t,c=P[m++]*e+r,v=P[m++]*e+t,i.bezierCurveTo(d,f,c,v,w,C);break}}return{offsetX:n.ha*e,path:i}}function Ci(s,e,r,t,o,n,i){const l=Fn(),{CUBE_SIZE:p,CUBE_SPACING:w,FIRST_CUBE_Z:C}=e,d=C-(r.length+1)*w,f=65535,c=16711935,v=Ne.degToRad(15),P=1e3,m=.5,K=65280,J=80,ne=1,D=15,Me=.1,Q="EXPLORE",k=l.isMobile?1:.5,Te=40,te=.125,g=100,Y=8,y=l.isMobile?1.5:2,ee=l.isMobile?2:3.5,re=1;let ie=[];ie.length=0;let Be=null,V=null,Z=!1,M=!1,a=new Rs,S=new kt,W=null,H=null,oe=null,ve=!1,Ce=null;const me=new Map,ze=new Map,Pe=new Map,Ee=(x,L,de,O,q,z)=>{const B=new wt;B.position.z=de,B.rotation.z=O,B.userData.isActive=!1;const ce=new Eo(L,L,L),he=new Go(ce),U=new Dt({color:new Pt(f),transparent:!0,opacity:0}),E=new Yt(he,U);E.geometry.computeBoundingSphere(),B.add(E);let ue="right";const R=L/2,qe=()=>{const Ke=new dn(40,24),at=new Go(Ke),A=new Dt({color:new Pt(f),transparent:!0,opacity:0,visible:!0}),$=new Yt(at,A);$.userData.isPortal=!0,$.userData.isAnimating=!1,$.geometry.computeBoundingSphere();const Ge=new no(80,80),X=new Tt({visible:!1,side:$t}),ae=new We(Ge,X);ae.userData.isPortalHitbox=!0,ae.userData.portal=$,ae.geometry.computeBoundingSphere();const T=new wt,_=new no(ne,D),se=65/2;for(let Re=0;Re<J;Re++){const Je=new Tt({color:new Pt(c),transparent:!0,opacity:0,visible:!1,side:$t}),Oe=new We(_,Je),et=Re/J*Math.PI*2;Oe.position.set(Math.cos(et)*se,Math.sin(et)*se,0),Oe.rotation.z=et+Math.PI/2,Oe.userData.baseOpacity=.01,Oe.userData.index=Re,Oe.geometry.computeBoundingSphere(),T.add(Oe)}const b=2,I=25;for(let Re=1;Re<I;Re++){const Je=new dn(40,24),Oe=new Go(Je),et=Ne.lerp(1,.1,Re/(I-1)),jt=new Dt({color:new Pt(f),transparent:!0,opacity:0}),Ht=new Yt(Oe,jt);Ht.userData.isPortal=!0,Ht.userData.maxOpacity=et,Ht.position.z=-Re*b,Ht.geometry.computeBoundingSphere(),$.add(Ht)}if($.userData.maxOpacity=1,V){const Re=new On(Q,{font:V,size:4,depth:0,curveSegments:12,bevelEnabled:!1});Re.computeBoundingBox(),Re.center();const Je=new Tt({color:16777215,transparent:!0,opacity:0,side:$t}),Oe=new We(Re,Je);Oe.visible=!1,Oe.position.set(0,-50,0),$.add(Oe),$.userData.exploreText=Oe}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const h=new wt,G=new no(12,l.isMobile?1:.5),Ae=new Tt({color:16777215,transparent:!0,opacity:0,side:$t}),fe=new We(G,Ae);fe.rotation.z=Math.PI/4;const Ye=new We(G,Ae);Ye.rotation.z=-Math.PI/4,h.add(fe,Ye);const pt=new no(30,30),$e=new Tt({opacity:0,transparent:!0,side:$t,visible:!0}),He=new We(pt,$e);He.userData.isCloseHitbox=!0,He.geometry.computeBoundingSphere(),He.renderOrder=2,h.add(He);const ye=42,tt=42,pe=-10;h.visible=!1;let Qe;switch(ue){case"left":$.position.set(-R,0,0),$.rotation.y=Math.PI/2,ae.position.set(-R,0,0),ae.rotation.y=Math.PI/2,O>=Ne.degToRad(120)?($.rotation.z=Math.PI,h.position.set(-R+pe,-42,ye),Qe=new ge(-R+pe,-42,ye)):(h.position.set(-R+pe,tt,-42),Qe=new ge(-R+pe,tt,-42)),h.rotation.y=Math.PI/2,T.children.forEach(Re=>Re.position.x+=Me);break;case"top":$.position.set(0,-R,0),$.rotation.x=-Math.PI/2,$.rotation.z=-Math.PI/2,ae.position.set(0,-R,0),ae.rotation.x=Math.PI/2,O>=Ne.degToRad(100)?O>=Ne.degToRad(180)?($.rotation.z=Math.PI/2,h.position.set(-42,-R+pe,-42),Qe=new ge(-42,-R+pe,-42)):(h.position.set(tt,-R+pe,ye),Qe=new ge(tt,-R+pe,ye)):(h.position.set(tt,-R+pe,ye),Qe=new ge(tt,-R+pe,ye)),h.rotation.x=-Math.PI/2,T.children.forEach(Re=>Re.position.y+=Me);break;case"right":$.position.set(R,0,0),$.rotation.y=-Math.PI/2,ae.position.set(R,0,0),ae.rotation.y=-Math.PI/2,O>=Ne.degToRad(120)?($.rotation.z=Math.PI,h.position.set(R+pe,-42,-42),Qe=new ge(R+pe,-42,-42)):(h.position.set(R+pe,tt,ye),Qe=new ge(R+pe,tt,ye)),h.rotation.y=-Math.PI/2,T.children.forEach(Re=>Re.position.x+=Me);break;case"bottom":$.position.set(0,R,0),$.rotation.x=Math.PI/2,$.rotation.z=-Math.PI/2,ae.position.set(0,R,0),ae.rotation.x=Math.PI/2,O>=Ne.degToRad(100)?(h.position.set(ye,R-pe,-42),Qe=new ge(ye,R-pe,-42)):(h.position.set(tt,R-pe,-42),Qe=new ge(tt,R-pe,-42)),h.rotation.x=Math.PI/2,T.children.forEach(Re=>Re.position.y+=Me);break}B.userData.initialCloseGroupPosition=Qe,h.updateMatrixWorld(!0),$.add(T),B.add($),B.add(ae),B.add(h),B.userData.closeButton=h,$.updateMatrixWorld(!0),T.updateMatrixWorld(!0),h.updateMatrixWorld(!0),me.set(B,[]),ze.set(B,0),Pe.set(B,0)},ft=N=>{(N instanceof Yt||N instanceof We)&&N.geometry&&N.geometry.computeBoundingSphere(),B.add(N)};if(q&&n.showKeyarts){switch(["left","top","right","bottom"].includes(z)?z:"left"){case"left":ue="right";break;case"top":ue="bottom";break;case"right":ue="left";break;case"bottom":ue="top";break}const je=i.get(q);if(je){const Ke=new no(L-1,L-1),at=new Tt({map:je,transparent:!0,opacity:0,blending:Xt,side:$t}),A=new We(Ke,at);switch(A.userData.isLoaded=!0,z){case"left":A.position.set(-R,0,0),O>=Ne.degToRad(120)?(A.rotation.y=Math.PI/2,A.rotation.z=-Math.PI):A.rotation.y=Math.PI/2;break;case"top":A.position.set(0,-R,0),A.rotation.x=-Math.PI/2,A.rotation.z=-Math.PI/2;break;case"right":A.position.set(R,0,0),O>=Ne.degToRad(120)?(A.rotation.y=-Math.PI/2,A.rotation.z=-Math.PI):A.rotation.y=-Math.PI/2;break;case"bottom":A.position.set(0,R,0),O>=Ne.degToRad(180)?O>=Ne.degToRad(220)?(A.rotation.x=Math.PI/2,A.rotation.z=Math.PI/2):(A.rotation.x=-Math.PI/2,A.rotation.z=Math.PI/2):(A.rotation.x=Math.PI/2,A.rotation.z=-Math.PI/2);break}A.geometry.computeBoundingSphere(),ft(A),qe()}else console.warn(`Keyart texture not preloaded for ${x.title}: ${q}`),qe()}else qe();B.userData.portalLocation=ue;{const N=(X,ae,T,_)=>{const se=new no(L-1,L-1),b={map:X,transparent:!0,opacity:0,blending:Xt,side:$t,depthWrite:!1};_&&(b.color=_);const I=new Tt(b),h=new We(se,I);h.position.copy(ae),T.x&&(h.rotation.x=T.x),T.y&&(h.rotation.y=T.y),h.userData.isGridPlane=!0,h.geometry.computeBoundingSphere(),ft(h)},je=i.get(t),Ke=i.get(o),at=["left","top","right","bottom"],$=[q&&n.showKeyarts?z||"left":null,ue].filter(Boolean),Ge=at.filter(X=>!$.includes(X));if(je)switch(N(je,new ge(0,0,-L/2-1),{y:0}),N(je,new ge(0,0,L/2+1),{y:0},new Pt(16744448)),Ge[0]){case"left":N(je,new ge(-R,0,0),{y:-Math.PI/2},new Pt(255));break;case"top":N(je,new ge(0,R,0),{x:Math.PI/2},new Pt(255));break;case"right":N(je,new ge(R,0,0),{y:Math.PI/2},new Pt(255));break;case"bottom":N(je,new ge(0,-R,0),{x:-Math.PI/2},new Pt(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(Ke)switch(Ge[1]){case"left":N(Ke,new ge(-R,0,0),{y:-Math.PI/2});break;case"top":N(Ke,new ge(0,R,0),{x:Math.PI/2});break;case"right":N(Ke,new ge(R,0,0),{y:Math.PI/2});break;case"bottom":N(Ke,new ge(0,-R,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}B.children.forEach(N=>{N.updateMatrixWorld(!0),N instanceof wt&&N.children.forEach(je=>{je.updateMatrixWorld(!0)})}),B.updateMatrixWorld(!0);const st=new zn().setFromObject(B),it=new Hn;return st.getBoundingSphere(it),B.boundingSphere=it,B},Ie=new ks,Se=(x,L,de,O,q,z)=>{const B=new On(x,{font:z,size:q,depth:0,curveSegments:12,bevelEnabled:!1});B.computeBoundingBox(),B.center();const ce=new Tt({color:16777215,transparent:!0,opacity:0,side:$t}),he=new We(B,ce);he.position.set(L,de,O);const U=B.boundingBox,E=U.max.x-U.min.x,ue=U.max.y-U.min.y,R=E+8,qe=ue+4,ft=new no(R,qe),st=new Tt({color:0,transparent:!0,opacity:0,side:$t}),it=new We(ft,st);return it.position.set(L,de,O-1),s.add(it),s.add(he),he.userData.backgroundPlane=it,he},j=()=>new Promise(x=>{Be=new yi,Be.load("/fonts/Poppins_Regular.json",L=>{V=L;const de=Array.isArray(r)?r:[];Array.isArray(r)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",r),de.forEach((O,q)=>{const z=C-(q+1)*w,B=(q+1)*v,ce=Ee(O,p,z,B,O.keyart,O.keyartLocation);s.add(ce),ie.push(ce),Se(O.title,0,O.size-15,C+90-(q+1)*w,O.size,L)}),x()},void 0,L=>console.error("Error loading font:",L))}),le=()=>Z?Promise.resolve({projectCubes:ie,updateCubeColors:Ze,loadedFont:V,maxZ:d}):j().then(()=>(Z=!0,{projectCubes:ie,updateCubeColors:Ze,loadedFont:V,maxZ:d})).catch(x=>{throw console.error("Error in loadFontAndText:",x),x}),Xe=x=>{if(x.userData.isAnimating)return;x.userData.isAnimating=!0;const L=x.children.find(B=>B instanceof wt);if(!L)return;const de=L.children,O=de.length,q=Le.timeline({repeat:-1,defaults:{ease:"none"}}),z={value:0};q.to(z,{value:1,duration:1.5,onUpdate:()=>{de.forEach(ce=>{const he=ce.material;if(he.visible){const U=(ce.userData.index/O+z.value)%1,ue=(Math.sin(U*Math.PI*2)+1)/2;he.opacity=.01+(1-.01)*Math.pow(ue,4)}})}}),x.userData.animationTimeline=q},Ue=x=>{if(!x.userData.isAnimating)return;x.userData.isAnimating=!1;const L=x.children.find(de=>de instanceof wt);L&&(x.userData.animationTimeline&&(x.userData.animationTimeline.kill(),delete x.userData.animationTimeline),L.children.forEach(de=>{const O=de.material;O.opacity=0}))},u=(x,L)=>{let de;const O=(Pe.get(x)||0)+1;Pe.set(x,O),O%Y===0?de=new Os(y,ee,12,1):de=new Eo(k,k,k);const q=new Tt({color:16777215,transparent:!0,opacity:0}),z=new We(de,q);z.position.set(0,0,0);const B=L.position.clone(),ce=B.clone().normalize(),he=B.length()+g;if(O%Y===0){const E=z.position.clone().add(ce);z.lookAt(E),z.rotateX(Math.PI/2)}x.add(z),Le.to(q,{opacity:.5,duration:re,ease:"power2.in",overwrite:"auto"});const U=me.get(x)||[];U.push({mesh:z,direction:ce,distanceTraveled:0,totalDistance:he}),me.set(x,U)},ke=x=>{(me.get(x)||[]).forEach(de=>{x.remove(de.mesh),de.mesh.geometry.dispose(),de.mesh.material.dispose()}),me.set(x,[])},Ze=x=>{Ie.setFromProjectionMatrix(x.projectionMatrix.clone().multiply(x.matrixWorldInverse));const L=x.position.z;let de=[];s.traverse(O=>{var q;return O instanceof We&&((q=O.geometry)==null?void 0:q.type)==="TextGeometry"&&de.push(O)}),M||(M=!0),ie.forEach((O,q)=>{const z=O.boundingSphere;if(z){const U=z.clone();if(U.radius*=1.5,!Ie.intersectsSphere(U))return}else console.warn(`Cube ${q} has no boundingSphere`);const B=O.position.z,ce=Math.abs(L-B+90);let he=0;ce<=P&&(he=1-ce/P),O.userData.isActive=he>=m,O.children.forEach(U=>{if(U instanceof Yt&&!U.userData.isPortal&&!U.userData.isPortalHitbox){const E=U.material;if(ce<=P){const ue=Ne.lerp((f>>16&255)/255,(c>>16&255)/255,he),R=Ne.lerp((f>>8&255)/255,(c>>8&255)/255,he),qe=Ne.lerp((f&255)/255,(c&255)/255,he);E.color.set(ue,R,qe),E.opacity=Math.min(1,he*2)}else E.opacity=0}else if(U instanceof Yt&&U.userData.isPortal)M&&(he>.1?U.children.forEach(E=>{E instanceof wt&&E.children.forEach(ue=>{ue instanceof We&&(ue.material.visible=!0,!U.userData.animationStarted&&n.showPortalPulses&&(Xe(U),U.userData.animationStarted=!0))})}):he<=.1&&U.userData.animationStarted&&(U.children.forEach(E=>{E instanceof wt&&E.children.forEach(ue=>{ue instanceof We&&(ue.material.visible=!1)})}),Ue(U),delete U.userData.animationStarted));else if(U instanceof We&&!U.userData.isPortalHitbox&&!U.userData.isCloseHitbox){const E=U.material;if(U.userData.isLoaded||U.userData.isGridPlane)if(ce<=P){const ue=1-ce/P;E.opacity=Math.min(.8,ue*2)}else E.opacity=0}else if(U instanceof wt&&U.userData.closeButton){const E=Math.abs(L-U.position.z);U.children.forEach(ue=>{if(ue instanceof We&&!ue.userData.isCloseHitbox){const R=ue.material;if(E<=P){const qe=1-E/P;R.opacity=Math.min(1,qe*2)}else R.opacity=0}})}})}),de.forEach(O=>{if(!Ie.intersectsObject(O))return;const q=O.material,z=O.userData.backgroundPlane,B=z==null?void 0:z.material,ce=O.position.z,he=Math.abs(L-ce+120);if(he<=P){const U=1-he/P,E=Math.min(1,U*2);q.opacity=E,B&&(B.opacity=E*.8)}else q.opacity=0,B&&(B.opacity=0)})};return{getInitializedData:le,updateCubeColors:Ze,setupInteractivity:(x,L,de,O)=>{Ce=O;let q=null,z=null,B=null,ce=!1,he=!1,U=!1,E=!1;const ue=A=>{ve&&(q=A.touches[0].clientY,z=z??window.scrollY,ce=!0)},R=A=>{if(!ve||!B||!q)return;const Ge=A.touches[0].clientY-q;Ge<-20&&!he?(st(),q=null):Ge>20&&(A.preventDefault(),window.scrollTo(0,z),Le.to(window,{scrollTo:{y:z},duration:0}))},qe=()=>{q=null,ce=!1,U=!0,Le.delayedCall(.5,()=>{U=!1})},ft=A=>{if(ce||he||U){A.preventDefault(),A.stopPropagation(),z!==null&&(window.scrollTo(0,z),Le.to(window,{scrollTo:{y:z},duration:0}));return}if(!ve||!B||!H||!oe)return;let $=0;if(A instanceof WheelEvent?$=A.deltaY:$=window.scrollY-(z||0),A.preventDefault(),A.stopPropagation(),$>0){window.scrollTo(0,z);return}$<0&&st()},st=()=>{const A=B,$=oe?oe.clone():new ge(0,0,d),Ge=(H==null?void 0:H.z)??x.position.z,X=A==null?void 0:A.parent;E=!0;const ae=x.userData.lockedLookAt?x.userData.lockedLookAt.clone():x.getWorldDirection(new ge).multiplyScalar(1e3).add(x.position),T={progress:0};Le.to(x.position,{x:(H==null?void 0:H.x)??x.position.x,y:(H==null?void 0:H.y)??x.position.y,z:Ge,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{if(A&&A.userData.exploreText){const _=A.userData.exploreText;Le.to(_.material,{opacity:0,duration:1,ease:"power2.out",onComplete:()=>{_.visible=!1}})}},onUpdate:()=>{const _=T.progress,se=Ne.lerp(ae.x,$.x,_),b=Ne.lerp(ae.y,$.y,_),I=Ne.lerp(ae.z,$.z,_);x.lookAt(se,b,I),x.updateMatrixWorld(!0)},onComplete:()=>{if(x.lookAt($),ve=!1,B=null,document.body.classList.remove("no-scrollbar"),Ce&&Ce(!1),A&&it(A,!1),X!=null&&X.userData.closeButton){const _=X.userData.closeButton.children.filter(se=>se instanceof We).map(se=>se.material);Le.to(_,{opacity:0,duration:.5,onUpdate:()=>{X.userData.closeButton.visible=!1},onComplete:()=>{X.userData.closeButton.updateMatrixWorld(!0),X.userData.standaloneDebugPlane&&(X.userData.standaloneDebugPlane.visible=!1,X.userData.standaloneDebugPlane.userData.locked=!1,X.userData.standaloneDebugPlane.updateMatrixWorld(!0),console.log("Standalone debug plane hidden on exit, position unchanged:",X.userData.standaloneDebugPlane.getWorldPosition(new ge))),X.userData.lockedPosition=null}})}z=null,H=null,oe=null,x.userData.lockedLookAt=null,E=!1,ie.forEach(_=>{Math.abs(x.position.z-_.position.z+90)<=P&&ze.set(_,0)})}}),Le.to(T,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},it=(A,$=!0)=>{const Ge=[A,...A.children.filter(ae=>ae instanceof Yt&&ae.userData.isPortal)],X=$?25:2;Ge.forEach((ae,T)=>{let _=-T*X;(A.position.y>0&&A.rotation.x===-Math.PI/2||A.position.y<0&&A.rotation.x===Math.PI/2)&&(_=T*X);const se=$?ae.userData.maxOpacity:0;Le.to(ae.position,{z:_,duration:1,ease:"power3.out",delay:.5}),Le.to(ae.material,{opacity:se,duration:1,ease:"power3.out",delay:.5})})},N=A=>{S.x=A.clientX/window.innerWidth*2-1,S.y=-(A.clientY/window.innerHeight)*2+1,a.setFromCamera(S,x),x.userData.lockedLookAt&&(x.lookAt(x.userData.lockedLookAt),x.updateMatrixWorld(!0)),ie.forEach(X=>{X.userData.lockedPosition&&(X.position.equals(X.userData.lockedPosition)||X.position.copy(X.userData.lockedPosition)),X.updateMatrixWorld(!0),X.children.forEach(ae=>ae.updateMatrixWorld(!0))});const $=ie.flatMap(X=>{const ae=[];return X.userData.isActive&&X.children.forEach(T=>{T instanceof We&&T.userData.isPortalHitbox&&ae.push(T)}),ve&&B&&X===B.parent&&X.children.forEach(T=>{T instanceof wt&&T===X.userData.closeButton&&T.children.forEach(_=>{_ instanceof We&&_.userData.isCloseHitbox&&ae.push(_)})}),ae}),Ge=a.intersectObjects($);if(Ge.length>0){const X=Ge[0].object;if(X.userData.isPortalHitbox){const ae=X.userData.portal;if(W!==ae){if(W){const _=W.material;Le.to(_.color,{r:(f>>16&255)/255,g:(f>>8&255)/255,b:(f&255)/255,duration:.5})}W=ae;const T=W.material;Le.to(T.color,{r:(K>>16&255)/255,g:(K>>8&255)/255,b:(K&255)/255,duration:.5})}L.style.cursor="pointer"}else X.userData.isCloseHitbox?L.style.cursor="pointer":L.style.cursor="auto"}else{if(W){const X=W.material;Le.to(X.color,{r:(f>>16&255)/255,g:(f>>8&255)/255,b:(f&255)/255,duration:.5}),W=null}L.style.cursor="auto"}},je=A=>{if(E)return;S.x=A.clientX/window.innerWidth*2-1,S.y=-(A.clientY/window.innerHeight)*2+1,a.setFromCamera(S,x);const $=ie.flatMap(I=>{const h=[];return ve&&B&&I===B.parent&&I.children.forEach(G=>{G instanceof wt&&G===I.userData.closeButton&&G.children.forEach(Ae=>{Ae instanceof We&&Ae.userData.isCloseHitbox&&h.push(Ae)})}),h}),Ge=ie.flatMap(I=>I.userData.isActive?I.children.filter(h=>h instanceof We&&h.userData.isPortalHitbox):[]);let X=a.intersectObjects($);for(const I of X)if(I.object.userData.isCloseHitbox){st();return}if(X=a.intersectObjects(Ge),X.length===0)return;const ae=X[0].object,T=ae.userData.portal,_=ae.parent,se=ie.indexOf(_),b=r[se];if(ve&&T===B){let I=new ge;const h=e.CUBE_SIZE/2;T.position.x===h?I.set(-1,0,0):T.position.x===-h?I.set(1,0,0):T.position.y===h?I.set(0,-1,0):T.position.y===-h&&I.set(0,1,0),I.applyQuaternion(_.getWorldQuaternion(new Ls)).normalize();const Ae=x.position.clone().clone().add(I.clone().multiplyScalar(-675)),fe=I.clone().multiplyScalar(-1e3),Ye=Ae.clone().add(fe);E=!0,Le.to(x.position,{x:Ae.x,y:Ae.y,z:Ae.z,duration:1,ease:"power2.in",onUpdate:()=>x.lookAt(Ye),onStart:()=>{Le.to(de.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{b!=null&&b.slug&&(l.setScrollPosition(window.scrollY),hs.visit(route("project.show",{project:b.slug}),{preserveScroll:!1})),E=!1}})}else if(!ve){H||(H=x.position.clone(),oe=new ge(0,0,d)),Ce&&O(!0,H,oe);const I=T.getWorldPosition(new ge);he=!0,E=!0,z=window.scrollY,Le.to(x.position,{x:0,y:0,z:_.getWorldPosition(new ge).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{ve=!0,B=T,document.body.classList.add("no-scrollbar"),it(T,!0),_.userData.lockedPosition=_.position.clone(),ke(_);const h=T.userData.exploreText;h&&(h.visible=!0,Le.to(h.material,{opacity:1,duration:1,ease:"power2.in"}))},onComplete:()=>{if(_.userData.closeButton){_.userData.initialCloseGroupPosition&&_.userData.closeButton.position.copy(_.userData.initialCloseGroupPosition),_.userData.closeButton.visible=!0,_.userData.closeButton.updateMatrixWorld(!0),_.updateMatrixWorld(!0),_.userData.closeButton.updateMatrixWorld(!0);const h=_.userData.closeButton.children.filter(G=>G instanceof We&&!G.userData.isCloseHitbox).map(G=>G.material);h.length>0&&Le.to(h,{opacity:1,duration:.5,onComplete:()=>{_.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),Le.to({},{duration:2,ease:"power3.out",overwrite:"all",onUpdate:function(){const h=this.progress(),G=x.getWorldDirection(new ge).multiplyScalar(1e3).add(x.position),Ae=Ne.lerp(G.x,I.x,h),fe=Ne.lerp(G.y,I.y,h),Ye=Ne.lerp(G.z,I.z,h);x.lookAt(Ae,fe,Ye)},onComplete:()=>{x.lookAt(I.x,I.y,I.z),x.updateMatrixWorld(!0),he=!1,E=!1,x.userData.lockedLookAt=I.clone()}})}};L.addEventListener("mousemove",N),L.addEventListener("click",je),L.addEventListener("touchstart",ue,{passive:!0}),L.addEventListener("touchmove",R,{passive:!1}),L.addEventListener("touchend",qe,{passive:!0}),window.addEventListener("wheel",ft,{passive:!1}),window.addEventListener("scroll",ft,{passive:!1});const Ke=()=>{me.forEach((A,$)=>{A.forEach(Ge=>{$.remove(Ge.mesh),Ge.mesh.geometry.dispose(),Ge.mesh.material.dispose()})}),me.clear(),ze.clear(),Pe.clear()},at=()=>{L.removeEventListener("mousemove",N),L.removeEventListener("click",je),L.removeEventListener("touchstart",ue),L.removeEventListener("touchmove",R),L.removeEventListener("touchend",qe),window.removeEventListener("wheel",ft),window.removeEventListener("scroll",ft)};return()=>{at(),Ke()}},updateClickHereParticles:(x,L)=>{const de=performance.now()/1e3,O=x.position.z;ie.forEach(q=>{const z=q.position.z;if(Math.abs(O-z+90)<=P&&!ve){const ce=ze.get(q)||0;if(de-ce>=te){const E=q.children.find(ue=>ue instanceof Yt&&ue.userData.isPortal);E&&(u(q,E),ze.set(q,de))}const U=(me.get(q)||[]).filter(E=>{if(E.distanceTraveled+=Te*L,E.mesh.position.copy(E.direction.clone().multiplyScalar(E.distanceTraveled)),(E.totalDistance-E.distanceTraveled)/Te<=re&&!E.isFadingOut){E.isFadingOut=!0;const qe=E.mesh.material;Le.to(qe,{opacity:0,duration:re,ease:"power2.out",overwrite:"auto"})}return E.distanceTraveled>=E.totalDistance?(q.remove(E.mesh),E.mesh.geometry.dispose(),E.mesh.material.dispose(),!1):!0});me.set(q,U)}else ke(q)})}}}function Pi(s,e,r,t){const D=r-1e3,Me=Math.abs(-500-D),Q=Math.ceil(Me/100),k=()=>{const M=new wt;let a=null,S=null;const W=[],H=[],oe=[],ve=[],Ce=[];{const me=new Eo(100,100,100),ze=new Go(me),Pe=32*Q,Ee=new Bs;Ee.copy(ze),Ee.instanceCount=Pe;const Ie=new Dt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),Se=new Float32Array(Pe*3),j=new Float32Array(Pe*3),le=new Float32Array(Pe*3),Xe=32*100,Ue=-3200/2+100/2,u=-500;for(let U=0;U<32;U++){const E=Te(U);for(let ue=0;ue<Q;ue++){const R=U*Q+ue,qe=Ue+U*100,ft=u-ue*100,st=Ne.randFloat(100,300),it=st/100,N=-600+st/2;Se[R*3]=qe,Se[R*3+1]=N,Se[R*3+2]=ft,j[R*3]=1,j[R*3+1]=it,j[R*3+2]=1,le[R*3]=E,le[R*3+1]=E,le[R*3+2]=E}}Ee.setAttribute("instancePosition",new Rr(Se,3)),Ee.setAttribute("instanceScale",new Rr(j,3)),Ee.setAttribute("color",new Rr(le,3)),Ie.onBeforeCompile=U=>{U.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${U.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new Yt(Ee,Ie);const ke=-3200/2,Ze=Xe/2,ot=-600,De=-300,x=D,L=-500;Ee.boundingBox=new zn(new ge(ke,ot,x),new ge(Ze,De,L));const de=(ke+Ze)/2,O=(ot+De)/2,q=(x+L)/2,z=Ze-ke,B=De-ot,ce=L-x,he=Math.sqrt(z*z+B*B+ce*ce)/2;Ee.boundingSphere=new Hn(new ge(de,O,q),he),M.add(a)}{S=new wt;const me=32*100/5,ze=-3200/2;for(let Ee=0;Ee<6;Ee++){let Se=ze+Ee*me,j=-500;const le=[new ge(Se,-450,j)];let Xe=0;for(;j>D;){const Ue=j===-500?Ne.randFloat(300,800):Math.min(Ne.randFloat(300,800),Math.abs(j-D));if(j-=Ue,le.push(new ge(Se,-450,j)),Xe+=Ue,j<=D){le[le.length-1].z=D;break}const u=Math.random()<.5?-1:1,ke=Ne.randFloat(100,300);Se+=u*ke,le.push(new ge(Se,-450,j)),Xe+=ke}H.push({points:le,totalLength:Xe})}const Pe=new Eo(4,4,4);for(let Ee=0;Ee<6;Ee++){const Ie=H[Ee],Se=Ie.totalLength,j=Se/60;for(let le=0;le<60;le++){const Xe=new Tt({color:16711680,fog:!0}),Ue=new We(Pe,Xe),u=le*j;let ke=u;for(let Ze=0;Ze<Ie.points.length-1;Ze++){const ot=Ie.points[Ze],De=Ie.points[Ze+1],x=ot.distanceTo(De);if(ke<=x){const L=ke/x;Ue.position.lerpVectors(ot,De,L);break}ke-=x}W.push(Ue),oe.push(u),ve.push(Ee),Ce.push(1),S.add(Ue)}for(let le=0;le<60;le++){const Xe=new Tt({color:16777215,fog:!0}),Ue=new We(Pe,Xe),u=Se-(le*j+j/2);let ke=Se-u;const Ze=[...Ie.points].reverse();for(let ot=0;ot<Ze.length-1;ot++){const De=Ze[ot],x=Ze[ot+1],L=De.distanceTo(x);if(ke<=L){const de=ke/L;Ue.position.lerpVectors(De,x,de);break}ke-=L}W.push(Ue),oe.push(u),ve.push(Ee),Ce.push(-1),S.add(Ue)}}e.add(S)}return e.add(M),{cityGroup:M,instancedLines:a,particleGroup:S,particles:W,paths:H,particleDistances:oe,particlePaths:ve,particleDirections:Ce}},Te=M=>{if(M<10)return .05+M*.10555555555555556;if(M>=22){const a=31-M,S=(1-.05)/9;return .05+a*S}return 1},{cityGroup:te,instancedLines:g,particleGroup:Y,particles:y,paths:ee,particleDistances:re,particlePaths:ie,particleDirections:Be}=k();return{cityGroup:te,buildingLines:g?[g]:[],updateParticles:M=>{const a=100*M;for(let S=0;S<y.length;S++){const W=Be[S],H=ie[S],oe=ee[H],ve=oe.totalLength;re[S]+=a*W,W===1?(re[S]=re[S]%ve,re[S]<0&&(re[S]+=ve)):re[S]=(re[S]+ve)%ve;const Ce=re[S],me=W===1?oe.points:[...oe.points].reverse();let ze=W===1?Ce:ve-Ce;for(let Pe=0;Pe<me.length-1;Pe++){const Ee=me[Pe],Ie=me[Pe+1],Se=Ee.distanceTo(Ie);if(ze<=Se){const j=ze/Se;y[S].position.lerpVectors(Ee,Ie,j);break}ze-=Se}}},dispose:()=>{g&&(te.remove(g),g.geometry.dispose(),g.material.dispose()),Y&&(e.remove(Y),Y.children.forEach(M=>{M.geometry.dispose(),M.material.dispose()})),e.remove(te)}}}Le.registerPlugin(_e);function Si(s,e,r,t,o,n,i={},l,p){const{CUBE_SPACING:w,FIRST_CUBE_Z:C}=n,d=(t==null?void 0:t.length)||0,f=C-(d+1)*w;let c=!1;const v=Math.abs(f)+(d-1)*w;let P=Le.timeline();return P=Le.timeline({scrollTrigger:{trigger:r.value,start:"top top",end:`+=${v}`,scrub:i.scrub||.5,pin:!0,onUpdate:K=>{if(!c){const J=K.progress,ne=Ne.lerp(0,f,J);e.position.set(0,0,ne),e.lookAt(0,0,f)}o(e)}}}),P.fromTo(e.position,{z:0},{z:f,duration:1,ease:"none"},0),{setReverting:K=>{c=K},timeline:P}}function Mi(s,e,r){const l=r-1e3,p=1e3,w=r,C=150,d=-500,f=r,c=new Co,v=new Float32Array(2e3*3),P=new Float32Array(2e3),m=new Float32Array(2e3);let K=0;for(;K<2e3;){const Q=(Math.random()-.5)*4e3,k=(Math.random()-.5)*4e3,Te=-1e3+Math.random()*(l- -1e3),te=Te>w&&Math.abs(Q)<p&&Math.abs(k)<p,g=Math.abs(Q)<C&&Math.abs(k)<C&&Te>f&&Te<d;if(!te&&!g){const Y=K*3;v[Y]=Q,v[Y+1]=k,v[Y+2]=Te;const y=.1+Math.random()*(.7-.1);P[K]=y,m[K]=y,K++}}c.setAttribute("position",new hn(v,3)),c.setAttribute("opacity",new hn(m,1));const J=new lo({uniforms:{color:{value:new Pt(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),ne=new Ns(c,J);s.add(ne);const D=c.attributes.opacity;for(let Q=0;Q<2e3;Q++)Le.to({opacity:P[Q]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){m[Q]=this.targets()[0].opacity,D.needsUpdate=!0}});return{dispose:()=>{Le.killTweensOf(m),s.remove(ne),c.dispose(),J.dispose()}}}function Ei(s,e){const t=e-1500,o=100,n=2,i=64,l=1e3,p=i*3,w=[4,4.5,5],C=6;let d,f,c,v,P,m;const K=[],J=[[],[],[]],ne=[[],[],[]],D=[[],[],[]];let Me=[0,0,0];const Q=()=>{const g=0-t,Y=[];for(let M=0;M<o;M++){const a=M/(o-1),S=0-a*g,W=a*5*2*Math.PI,H=90*(.8+.2*Math.sin(W*2)),oe=new ge(H*Math.cos(W),H*Math.sin(W),S);(isNaN(oe.x)||isNaN(oe.y)||isNaN(oe.z))&&console.error("NaN in chaserPath points",{t:a,z:S,projectMaxZ:e}),Y.push(oe)}d=new kr(Y);const y=new Co().setFromPoints(d.getPoints(200));v=new Or(y,new Dt({color:16711935,linewidth:2,visible:!1})),s.add(v);const ee=[];for(let M=0;M<o;M++){const a=M/(o-1),S=0-a*g,W=a*3*2*Math.PI,H=60*(.8+.2*Math.sin(W*4)),oe=new ge(H*Math.cos(W),H*Math.sin(W),S);(isNaN(oe.x)||isNaN(oe.y)||isNaN(oe.z))&&console.error("NaN in chaserPath2 points",{t:a,z:S,projectMaxZ:e}),ee.push(oe)}f=new kr(ee);const re=new Co().setFromPoints(f.getPoints(200));P=new Or(re,new Dt({color:65535,linewidth:2,visible:!1})),s.add(P);const ie=[];for(let M=0;M<o;M++){const a=M/(o-1),S=0-a*g,W=a*7*2*Math.PI,H=100,oe=90,ve=.1*Math.sin(W),Ce=new ge(H*(1+ve)*Math.cos(W),oe*(1-ve)*Math.sin(W),S);(isNaN(Ce.x)||isNaN(Ce.y)||isNaN(Ce.z))&&console.error("NaN in chaserPath3 points",{t:a,z:S,projectMaxZ:e}),ie.push(Ce)}c=new kr(ie);const Be=new Co().setFromPoints(c.getPoints(200));m=new Or(Be,new Dt({color:16776960,linewidth:2,visible:!1})),s.add(m);const V=[16711680,65280,255],Z=new Eo(n,n,n);Z.attributes.color&&delete Z.attributes.color;for(let M=0;M<3;M++){const a=new wt;a.opacity=1,a.renderOrder=1,K[M]=a,s.add(a);for(let S=0;S<p;S++){const W=new Tt({color:V[M],transparent:!0,opacity:0,blending:Fs,fog:!0,depthWrite:!1}),H=new We(Z,W);H.renderOrder=1,H.visible=!1,a.add(H),J[M][S]=H,ne[M][S]=0,D[M][S]=!1}}},k=g=>{const Y=[d,f,c][g],y=Y.getLength(),ee=D[g].filter(ie=>ie).length;if(p-ee>=i){let ie=0;for(let Be=0;Be<i;Be++){const V=D[g].findIndex(oe=>!oe);if(V===-1){console.warn(`No available chasers for path ${g}, emitted ${ie}/${i}`);break}const Z=ie/(i-1),M=.05+(1-.05)*Math.pow(Z,3),a=new Tt({color:[16711680,65280,255][g],transparent:!0,opacity:M,blending:Xt,fog:!0,depthWrite:!1});J[g][V].material=a,J[g][V].visible=!0;const S=ie*C;ne[g][V]=S,D[g][V]=!0;const W=S/y,H=Y.getPointAt(W);J[g][V].position.copy(H),ie++}}},Te=g=>{const Y=performance.now()/1e3,y=[d,f,c];for(let ee=0;ee<3;ee++){Y-Me[ee]>=w[ee]&&(k(ee),Me[ee]=Y);const re=y[ee],ie=re.getLength(),Be=l*g;for(let V=0;V<p;V++)if(D[ee][V]){ne[ee][V]+=Be;const Z=ne[ee][V]/ie;if(Z>=1)J[ee][V].visible=!1,D[ee][V]=!1,ne[ee][V]=0;else{const M=re.getPointAt(Z);J[ee][V].position.copy(M)}}}};return Q(),{chaserPath:d,chaserPath2:f,chaserPath3:c,updateChasers:Te,dispose:()=>{s.remove(v),s.remove(P),s.remove(m),v.geometry.dispose(),v.material.dispose(),P.geometry.dispose(),P.material.dispose(),m.geometry.dispose(),m.material.dispose(),K.forEach(g=>{g.children.forEach(Y=>{Y.geometry.dispose(),Y.material.dispose()}),s.remove(g)})}}}const Ii={class:"preloader"},Di={class:"progress-label"},Ai=en({__name:"Preloader",props:{progress:{}},setup(s){return(e,r)=>(Cr(),tn("div",Ii,[ao("div",Di,gs(Math.round(e.progress))+"%",1)]))}}),Ri=Un(Ai,[["__scopeId","data-v-e5eadefa"]]),Ln=250,gr=500,Lo=-500,Gr=-520,Bn=-720,Nn=4e3,ki=en({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(s){Le.registerPlugin(_e);const e=s,r=Fn();r.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent),r.projects=e.projects;const t={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},o=wo(null),n=wo(null),i=wo(!1),l=wo(0),p=wo(!1),w=wo(!0),C=new Map;let d,f,c,v,P,m,K,J=null,ne=null,D=null,Me=null,Q=null,k=[],Te=null,te=null,g=0,Y=null,y;const ee=()=>{const Z=o.value?o.value.getBoundingClientRect().width:window.innerWidth,M=window.innerHeight,a=r.isMobile?.75:1,S=r.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;c.setSize(Z*a,M*a),c.setPixelRatio(S),v.setSize(Z*a,M*a),f.aspect=Z/M,f.updateProjectionMatrix(),c.domElement.style.width=`${Z}px`,c.domElement.style.height=`${M}px`},re=Z=>C.has(Z)?Promise.resolve(C.get(Z)):new Promise((M,a)=>{new Ws().load(Z,W=>{W.encoding=void 0,C.set(Z,W),M(W)},void 0,W=>a(W))}),ie=async()=>{d=new zs,d.background=new Pt(0),d.fog=new Hs(0,700,Nn),f=new Us(75,window.innerWidth/window.innerHeight,1,Nn+6e3),f.position.set(0,0,0),f.lookAt(0,0,1e3),c=new Gs({antialias:!0}),r.isMobile?c.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):c.setPixelRatio(window.devicePixelRatio),c.toneMapping=Ys,c.toneMappingExposure=1,c.outputEncoding=void 0,v=new mi(c);const Z=new _i(d,f);if(v.addPass(Z),r.isMobile?P=new _o(new kt(window.innerWidth,window.innerHeight),1.3,.2,0):P=new _o(new kt(window.innerWidth,window.innerHeight),1.6,.2,0),P.renderToScreen=!0,v.addPass(P),o.value)o.value.appendChild(c.domElement),c.domElement.style.opacity="0";else return;m=new Ko,m.dom.style.position="fixed",m.dom.style.top="0px",m.dom.style.left="0px",m.dom.style.zIndex="1000",document.body.appendChild(m.dom);const a=e.projects.filter(H=>H.keyart).length+2;let S=0;const W=()=>{S++,l.value=S/a*100,S===a&&(i.value=!0)};await re(e.projectGridFile).then(()=>W()).catch(()=>W()),await re(e.projectGridFile2).then(()=>W()).catch(()=>W());for(const H of e.projects)H.keyart?await re(H.keyart).then(()=>W()).catch(()=>W()):W();Y=Ci(d,{CUBE_SIZE:Ln,CUBE_SPACING:gr,FIRST_CUBE_Z:Lo},e.projects,e.projectGridFile,e.projectGridFile2,t,C);try{const H=await Y.getInitializedData();if(y=H.maxZ,y===void 0||isNaN(y))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:oe}=vi(d,d,{CUBE_SIZE:Ln,FIRST_CUBE_Z:Lo},t);if(k=[...oe,...H.projectCubes],Te=H.updateCubeColors,t.showCars){const{cityGroup:ve,updateParticles:Ce,dispose:me}=Pi(d,d,y,t);K=Ce,Q=me}if(t.showStarfield){const{dispose:ve}=Mi(d,f,y);J=ve}if(t.showChasers){const{dispose:ve,updateChasers:Ce}=Ei(d,y);D=ve,Me=Ce}ee()}catch(H){console.error("Error initializing project cubes:",H),y=Lo-(e.projects.length+1)*gr}},Be=(Z=0)=>{if(te=requestAnimationFrame(Be),c&&v){const M=(Z-g)/1e3;g=Z,K(M),Me&&Me(M),Y!=null&&Y.updateClickHereParticles&&Y.updateClickHereParticles(f,M);const a=4e3,S=1e3,W=Math.abs(f.position.z-y);f.far=Math.max(a+S,W),f.updateProjectionMatrix();const H=Bn-Gr;let oe=0;f.position.z>=Gr?oe=0:f.position.z<=Bn?oe=1:oe=(f.position.z-Gr)/H,r.isMobile?P.strength=Ne.lerp(1.3,0,oe):P.strength=Ne.lerp(1.6,.125,oe),v.render()}m.update()};ms(()=>{ie().then(()=>{if(i.value){te=requestAnimationFrame(Be);let Z=null;const M=Y.getInitializedData().then(({projectCubes:S})=>{S.forEach(H=>{H.userData.isActive=!0});const W=Lo-(e.projects.length-1)*gr;f.position.set(0,0,5e3),f.lookAt(0,0,W),f.updateProjectionMatrix(),Te(f),v.render(),k.length&&Te&&(Z=Si(d,f,n,k,Te,{CUBE_SPACING:gr,FIRST_CUBE_Z:Lo},{scrub:r.isMobile?3:1}).setReverting),c&&ne===null&&(ne=Y.setupInteractivity(f,c.domElement,c,H=>{Z&&Z(H)})),window.scrollTo({top:0,behavior:"auto"})}),a=()=>{M.then(()=>{w.value=!1,f.position.set(0,0,5e3),f.updateProjectionMatrix(),Le.to(c.domElement,{opacity:1,duration:.5,ease:"power4.out"});const S={z:5e3};Le.to(S,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{f.position.z=S.z,f.updateProjectionMatrix()},onComplete:()=>{f.position.z=0,p.value=!0}})})};Le.delayedCall(.5,a)}}).catch(Z=>{console.error("Initialization failed:",Z)}),window.addEventListener("resize",V)}),_s(()=>{te!==null&&cancelAnimationFrame(te),ne&&ne(),window.removeEventListener("resize",V),_e.getAll().forEach(Z=>Z.kill()),c.dispose(),v.dispose(),d.clear(),document.body.removeChild(m.dom),J&&J(),D&&D(),Q&&Q()});const V=()=>{ee(),_e.refresh()};return(Z,M)=>(Cr(),tn("section",{ref_key:"wrapper",ref:n,class:"wrapper"},[Bo(ws,{name:"fade"},{default:vs(()=>[w.value?(Cr(),ys(Ri,{key:0,progress:l.value},null,8,["progress"])):xs("",!0)]),_:1}),ao("div",{ref_key:"tunnelWrapper",ref:o,class:"tunnel-wrapper"},null,512)],512))}}),Oi=Un(ki,[["__scopeId","data-v-28c23bfc"]]),Li={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Bi={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Ni={class:"overflow-hidden"},Ui=en({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(s){return(e,r)=>(Cr(),tn(Cs,null,[Bo(bs(Ts),{title:"Welcome"}),ao("div",Li,[ao("nav",Bi,[Bo(Xs)]),ao("div",Ni,[Bo(Oi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),r[0]||(r[0]=ao("div",{class:"flex justify-center items-center"},null,-1)),r[1]||(r[1]=ao("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),Bo(Zs)])],64))}});export{Ui as default};
