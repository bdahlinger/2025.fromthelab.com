import{W as ms,I as en,e as Nn,o as Cr,a as ao,t as _s,d as wo,x as ws,y as vs,b as Bo,w as zn,c as Fn,f as ys,T as xs,u as bs,m as Ts}from"./app-m1j5f54N.js";import{c as We,O as Cs,e as Co,F as fn,j as lo,U as Yr,V as kt,k as mr,H as _r,N as Ps,C as Ss,l as Pt,d as me,b as Xt,m as Tt,E as Ms,L as Dt,G as wt,g as Be,n as Ne,B as Eo,o as Go,f as Yt,p as Es,q as Is,r as Ds,u as Hn,R as As,s as Rs,t as ks,P as no,a as $t,v as Un,w as Gn,x as pn,Q as Os,I as Ls,y as Rr,z as dn,J as Bs,K as kr,T as Or,X as Ns,S as zs,Y as Fs,Z as Hs,W as Us,_ as Gs,$ as Ys,h as Ws,i as Xs}from"./GlobalFooter-ZklO5nfW.js";import{u as Zs,_ as Vs}from"./App.vue_vue_type_script_setup_true_lang-CVxIz1TK.js";import{_ as Yn}from"./_plugin-vue_export-helper-DlAUqK2U.js";function js(s,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function $s(s,e,r){return e&&js(s.prototype,e),s}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gt,wr,Lt,eo,to,Po,Wn,so,Yo,Xn,qt,Ft,Zn,Vn=function(){return gt||typeof window<"u"&&(gt=window.gsap)&&gt.registerPlugin&&gt},jn=1,To=[],xe=[],Vt=[],Wo=Date.now,Wr=function(e,r){return r},Qs=function(){var e=Yo.core,r=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,xe),o.push.apply(o,Vt),xe=t,Vt=o,Wr=function(i,l){return r[i](l)}},oo=function(e,r){return~Vt.indexOf(e)&&Vt[Vt.indexOf(e)+1][r]},Xo=function(e){return!!~Xn.indexOf(e)},bt=function(e,r,t,o,n){return e.addEventListener(r,t,{passive:o!==!1,capture:!!n})},xt=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},rr="scrollLeft",nr="scrollTop",Xr=function(){return qt&&qt.isPressed||xe.cache++},Pr=function(e,r){var t=function o(n){if(n||n===0){jn&&(Lt.history.scrollRestoration="manual");var i=qt&&qt.isPressed;n=o.v=Math.round(n)||(qt&&qt.iOS?1:0),e(n),o.cacheID=xe.cache,i&&Wr("ss",n)}else(r||xe.cache!==o.cacheID||Wr("ref"))&&(o.cacheID=xe.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Et={s:rr,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Pr(function(s){return arguments.length?Lt.scrollTo(s,ut.sc()):Lt.pageXOffset||eo[rr]||to[rr]||Po[rr]||0})},ut={s:nr,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Et,sc:Pr(function(s){return arguments.length?Lt.scrollTo(Et.sc(),s):Lt.pageYOffset||eo[nr]||to[nr]||Po[nr]||0})},It=function(e,r){return(r&&r._ctx&&r._ctx.selector||gt.utils.toArray)(e)[0]||(typeof e=="string"&&gt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},ro=function(e,r){var t=r.s,o=r.sc;Xo(e)&&(e=eo.scrollingElement||to);var n=xe.indexOf(e),i=o===ut.sc?1:2;!~n&&(n=xe.push(e)-1),xe[n+i]||bt(e,"scroll",Xr);var l=xe[n+i],f=l||(xe[n+i]=Pr(oo(e,t),!0)||(Xo(e)?o:Pr(function(v){return arguments.length?e[t]=v:e[t]})));return f.target=e,l||(f.smooth=gt.getProperty(e,"scrollBehavior")==="smooth"),f},Zr=function(e,r,t){var o=e,n=e,i=Wo(),l=i,f=r||50,v=Math.max(500,f*3),M=function(h,C){var w=Wo();C||w-i>f?(n=o,o=h,l=i,i=w):t?o+=h:o=n+(h-n)/(w-l)*(i-l)},g=function(){n=o=t?0:o,l=i=0},p=function(h){var C=l,w=n,X=Wo();return(h||h===0)&&h!==o&&M(h),i===l||X-l>v?0:(o+(t?w:-w))/((t?X:i)-C)*1e3};return{update:M,reset:g,getVelocity:p}},ko=function(e,r){return r&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},hn=function(e){var r=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(r)>=Math.abs(t)?r:t},$n=function(){Yo=gt.core.globals().ScrollTrigger,Yo&&Yo.core&&Qs()},Qn=function(e){return gt=e||Vn(),!wr&&gt&&typeof document<"u"&&document.body&&(Lt=window,eo=document,to=eo.documentElement,Po=eo.body,Xn=[Lt,eo,to,Po],gt.utils.clamp,Zn=gt.core.context||function(){},so="onpointerenter"in Po?"pointer":"mouse",Wn=rt.isTouch=Lt.matchMedia&&Lt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Lt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Ft=rt.eventTypes=("ontouchstart"in to?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in to?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return jn=0},500),$n(),wr=1),wr};Et.op=ut;xe.cache=0;var rt=function(){function s(r){this.init(r)}var e=s.prototype;return e.init=function(t){wr||Qn(gt)||console.warn("Please gsap.registerPlugin(Observer)"),Yo||$n();var o=t.tolerance,n=t.dragMinimum,i=t.type,l=t.target,f=t.lineHeight,v=t.debounce,M=t.preventDefault,g=t.onStop,p=t.onStopDelay,c=t.ignore,h=t.wheelSpeed,C=t.event,w=t.onDragStart,X=t.onDragEnd,ee=t.onDrag,re=t.onPress,I=t.onRelease,Me=t.onRight,K=t.onLeft,k=t.onUp,Te=t.onDown,te=t.onChangeX,m=t.onChangeY,q=t.onChange,y=t.onToggleX,Z=t.onToggleY,oe=t.onHover,ne=t.onHoverEnd,Fe=t.onMove,V=t.ignoreCheck,Ce=t.isNormalizer,b=t.onGestureStart,a=t.onGestureEnd,S=t.onWheel,j=t.onEnable,H=t.onDisable,Y=t.onClick,de=t.scrollSpeed,be=t.capture,ae=t.allowClicks,ke=t.lockAxis,Pe=t.onLockAxis;this.target=l=It(l)||to,this.vars=t,c&&(c=gt.utils.toArray(c)),o=o||1e-9,n=n||0,h=h||1,de=de||1,i=i||"wheel,touch,pointer",v=v!==!1,f||(f=parseFloat(Lt.getComputedStyle(Po).lineHeight)||22);var Ee,Ie,Se,$,le,Xe,Ue,u=this,Oe=0,Ze=0,ot=t.passive||!M&&t.passive!==!1,De=ro(l,Et),x=ro(l,ut),L=De(),he=x(),O=~i.indexOf("touch")&&!~i.indexOf("pointer")&&Ft[0]==="pointerdown",J=Xo(l),F=l.ownerDocument||eo,B=[0,0,0],ce=[0,0,0],ge=0,U=function(){return ge=Wo()},E=function(_,se){return(u.event=_)&&c&&~c.indexOf(_.target)||se&&O&&_.pointerType!=="touch"||V&&V(_,se)},ue=function(){u._vx.reset(),u._vy.reset(),Ie.pause(),g&&g(u)},R=function(){var _=u.deltaX=hn(B),se=u.deltaY=hn(ce),T=Math.abs(_)>=o,D=Math.abs(se)>=o;q&&(T||D)&&q(u,_,se,B,ce),T&&(Me&&u.deltaX>0&&Me(u),K&&u.deltaX<0&&K(u),te&&te(u),y&&u.deltaX<0!=Oe<0&&y(u),Oe=u.deltaX,B[0]=B[1]=B[2]=0),D&&(Te&&u.deltaY>0&&Te(u),k&&u.deltaY<0&&k(u),m&&m(u),Z&&u.deltaY<0!=Ze<0&&Z(u),Ze=u.deltaY,ce[0]=ce[1]=ce[2]=0),($||Se)&&(Fe&&Fe(u),Se&&(w&&Se===1&&w(u),ee&&ee(u),Se=0),$=!1),Xe&&!(Xe=!1)&&Pe&&Pe(u),le&&(S(u),le=!1),Ee=0},qe=function(_,se,T){B[T]+=_,ce[T]+=se,u._vx.update(_),u._vy.update(se),v?Ee||(Ee=requestAnimationFrame(R)):R()},ft=function(_,se){ke&&!Ue&&(u.axis=Ue=Math.abs(_)>Math.abs(se)?"x":"y",Xe=!0),Ue!=="y"&&(B[2]+=_,u._vx.update(_,!0)),Ue!=="x"&&(ce[2]+=se,u._vy.update(se,!0)),v?Ee||(Ee=requestAnimationFrame(R)):R()},st=function(_){if(!E(_,1)){_=ko(_,M);var se=_.clientX,T=_.clientY,D=se-u.x,d=T-u.y,G=u.isDragging;u.x=se,u.y=T,(G||(D||d)&&(Math.abs(u.startX-se)>=n||Math.abs(u.startY-T)>=n))&&(Se=G?2:1,G||(u.isDragging=!0),ft(D,d))}},it=u.onPress=function(P){E(P,1)||P&&P.button||(u.axis=Ue=null,Ie.pause(),u.isPressed=!0,P=ko(P),Oe=Ze=0,u.startX=u.x=P.clientX,u.startY=u.y=P.clientY,u._vx.reset(),u._vy.reset(),bt(Ce?l:F,Ft[1],st,ot,!0),u.deltaX=u.deltaY=0,re&&re(u))},N=u.onRelease=function(P){if(!E(P,1)){xt(Ce?l:F,Ft[1],st,!0);var _=!isNaN(u.y-u.startY),se=u.isDragging,T=se&&(Math.abs(u.x-u.startX)>3||Math.abs(u.y-u.startY)>3),D=ko(P);!T&&_&&(u._vx.reset(),u._vy.reset(),M&&ae&&gt.delayedCall(.08,function(){if(Wo()-ge>300&&!P.defaultPrevented){if(P.target.click)P.target.click();else if(F.createEvent){var d=F.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,Lt,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null),P.target.dispatchEvent(d)}}})),u.isDragging=u.isGesturing=u.isPressed=!1,g&&se&&!Ce&&Ie.restart(!0),Se&&R(),X&&se&&X(u),I&&I(u,T)}},je=function(_){return _.touches&&_.touches.length>1&&(u.isGesturing=!0)&&b(_,u.isDragging)},Ke=function(){return(u.isGesturing=!1)||a(u)},at=function(_){if(!E(_)){var se=De(),T=x();qe((se-L)*de,(T-he)*de,1),L=se,he=T,g&&Ie.restart(!0)}},A=function(_){if(!E(_)){_=ko(_,M),S&&(le=!0);var se=(_.deltaMode===1?f:_.deltaMode===2?Lt.innerHeight:1)*h;qe(_.deltaX*se,_.deltaY*se,0),g&&!Ce&&Ie.restart(!0)}},Q=function(_){if(!E(_)){var se=_.clientX,T=_.clientY,D=se-u.x,d=T-u.y;u.x=se,u.y=T,$=!0,g&&Ie.restart(!0),(D||d)&&ft(D,d)}},Ge=function(_){u.event=_,oe(u)},W=function(_){u.event=_,ne(u)},ie=function(_){return E(_)||ko(_,M)&&Y(u)};Ie=u._dc=gt.delayedCall(p||.25,ue).pause(),u.deltaX=u.deltaY=0,u._vx=Zr(0,50,!0),u._vy=Zr(0,50,!0),u.scrollX=De,u.scrollY=x,u.isDragging=u.isGesturing=u.isPressed=!1,Zn(this),u.enable=function(P){return u.isEnabled||(bt(J?F:l,"scroll",Xr),i.indexOf("scroll")>=0&&bt(J?F:l,"scroll",at,ot,be),i.indexOf("wheel")>=0&&bt(l,"wheel",A,ot,be),(i.indexOf("touch")>=0&&Wn||i.indexOf("pointer")>=0)&&(bt(l,Ft[0],it,ot,be),bt(F,Ft[2],N),bt(F,Ft[3],N),ae&&bt(l,"click",U,!0,!0),Y&&bt(l,"click",ie),b&&bt(F,"gesturestart",je),a&&bt(F,"gestureend",Ke),oe&&bt(l,so+"enter",Ge),ne&&bt(l,so+"leave",W),Fe&&bt(l,so+"move",Q)),u.isEnabled=!0,u.isDragging=u.isGesturing=u.isPressed=$=Se=!1,u._vx.reset(),u._vy.reset(),L=De(),he=x(),P&&P.type&&it(P),j&&j(u)),u},u.disable=function(){u.isEnabled&&(To.filter(function(P){return P!==u&&Xo(P.target)}).length||xt(J?F:l,"scroll",Xr),u.isPressed&&(u._vx.reset(),u._vy.reset(),xt(Ce?l:F,Ft[1],st,!0)),xt(J?F:l,"scroll",at,be),xt(l,"wheel",A,be),xt(l,Ft[0],it,be),xt(F,Ft[2],N),xt(F,Ft[3],N),xt(l,"click",U,!0),xt(l,"click",ie),xt(F,"gesturestart",je),xt(F,"gestureend",Ke),xt(l,so+"enter",Ge),xt(l,so+"leave",W),xt(l,so+"move",Q),u.isEnabled=u.isPressed=u.isDragging=!1,H&&H(u))},u.kill=u.revert=function(){u.disable();var P=To.indexOf(u);P>=0&&To.splice(P,1),qt===u&&(qt=0)},To.push(u),Ce&&Xo(l)&&(qt=u),u.enable(C)},$s(s,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),s}();rt.version="3.12.7";rt.create=function(s){return new rt(s)};rt.register=Qn;rt.getAll=function(){return To.slice()};rt.getById=function(s){return To.filter(function(e){return e.vars.id===s})[0]};Vn()&&gt.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var z,xo,ye,Ve,Ot,ze,tn,Sr,Jo,Zo,No,sr,_t,Dr,Vr,St,gn,mn,bo,qn,Lr,Kn,Ct,jr,Jn,es,Jt,$r,on,So,rn,Mr,Qr,Br,ir=1,vt=Date.now,Nr=vt(),zt=0,zo=0,_n=function(e,r,t){var o=Rt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+r+"Clamp"]=o,o?e.substr(6,e.length-7):e},wn=function(e,r){return r&&(!Rt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},qs=function s(){return zo&&requestAnimationFrame(s)},vn=function(){return Dr=1},yn=function(){return Dr=0},Wt=function(e){return e},Fo=function(e){return Math.round(e*1e5)/1e5||0},ts=function(){return typeof window<"u"},os=function(){return z||ts()&&(z=window.gsap)&&z.registerPlugin&&z},ho=function(e){return!!~tn.indexOf(e)},rs=function(e){return(e==="Height"?rn:ye["inner"+e])||Ot["client"+e]||ze["client"+e]},ns=function(e){return oo(e,"getBoundingClientRect")||(ho(e)?function(){return Tr.width=ye.innerWidth,Tr.height=rn,Tr}:function(){return Qt(e)})},Ks=function(e,r,t){var o=t.d,n=t.d2,i=t.a;return(i=oo(e,"getBoundingClientRect"))?function(){return i()[o]}:function(){return(r?rs(n):e["client"+n])||0}},Js=function(e,r){return!r||~Vt.indexOf(e)?ns(e):function(){return Tr}},Zt=function(e,r){var t=r.s,o=r.d2,n=r.d,i=r.a;return Math.max(0,(t="scroll"+o)&&(i=oo(e,t))?i()-ns(e)()[n]:ho(e)?(Ot[t]||ze[t])-rs(o):e[t]-e["offset"+o])},ar=function(e,r){for(var t=0;t<bo.length;t+=3)(!r||~r.indexOf(bo[t+1]))&&e(bo[t],bo[t+1],bo[t+2])},Rt=function(e){return typeof e=="string"},yt=function(e){return typeof e=="function"},Ho=function(e){return typeof e=="number"},io=function(e){return typeof e=="object"},Oo=function(e,r,t){return e&&e.progress(r?0:1)&&t&&e.pause()},zr=function(e,r){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return r(e)}):r(e);t&&t.totalTime&&(e.callbackAnimation=t)}},vo=Math.abs,ss="left",is="top",nn="right",sn="bottom",uo="width",fo="height",Vo="Right",jo="Left",$o="Top",Qo="Bottom",nt="padding",Bt="margin",Io="Width",an="Height",ct="px",Nt=function(e){return ye.getComputedStyle(e)},ei=function(e){var r=Nt(e).position;e.style.position=r==="absolute"||r==="fixed"?r:"relative"},xn=function(e,r){for(var t in r)t in e||(e[t]=r[t]);return e},Qt=function(e,r){var t=r&&Nt(e)[Vr]!=="matrix(1, 0, 0, 1, 0, 0)"&&z.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Er=function(e,r){var t=r.d2;return e["offset"+t]||e["client"+t]||0},as=function(e){var r=[],t=e.labels,o=e.duration(),n;for(n in t)r.push(t[n]/o);return r},ti=function(e){return function(r){return z.utils.snap(as(e),r)}},ln=function(e){var r=z.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,n){return o-n});return t?function(o,n,i){i===void 0&&(i=.001);var l;if(!n)return r(o);if(n>0){for(o-=i,l=0;l<t.length;l++)if(t[l]>=o)return t[l];return t[l-1]}else for(l=t.length,o+=i;l--;)if(t[l]<=o)return t[l];return t[0]}:function(o,n,i){i===void 0&&(i=.001);var l=r(o);return!n||Math.abs(l-o)<i||l-o<0==n<0?l:r(n<0?o-e:o+e)}},oi=function(e){return function(r,t){return ln(as(e))(r,t.direction)}},lr=function(e,r,t,o){return t.split(",").forEach(function(n){return e(r,n,o)})},ht=function(e,r,t,o,n){return e.addEventListener(r,t,{passive:!o,capture:!!n})},dt=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},cr=function(e,r,t){t=t&&t.wheelHandler,t&&(e(r,"wheel",t),e(r,"touchmove",t))},bn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ur={toggleActions:"play",anticipatePin:0},Ir={top:0,left:0,center:.5,bottom:1,right:1},vr=function(e,r){if(Rt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=r/100),e=e.substr(0,t-1)),e=o+(e in Ir?Ir[e]*r:~e.indexOf("%")?parseFloat(e)*r/100:parseFloat(e)||0)}return e},fr=function(e,r,t,o,n,i,l,f){var v=n.startColor,M=n.endColor,g=n.fontSize,p=n.indent,c=n.fontWeight,h=Ve.createElement("div"),C=ho(t)||oo(t,"pinType")==="fixed",w=e.indexOf("scroller")!==-1,X=C?ze:t,ee=e.indexOf("start")!==-1,re=ee?v:M,I="border-color:"+re+";font-size:"+g+";color:"+re+";font-weight:"+c+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return I+="position:"+((w||f)&&C?"fixed;":"absolute;"),(w||f||!C)&&(I+=(o===ut?nn:sn)+":"+(i+parseFloat(p))+"px;"),l&&(I+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),h._isStart=ee,h.setAttribute("class","gsap-marker-"+e+(r?" marker-"+r:"")),h.style.cssText=I,h.innerText=r||r===0?e+"-"+r:e,X.children[0]?X.insertBefore(h,X.children[0]):X.appendChild(h),h._offset=h["offset"+o.op.d2],yr(h,0,o,ee),h},yr=function(e,r,t,o){var n={display:"block"},i=t[o?"os2":"p2"],l=t[o?"p2":"os2"];e._isFlipped=o,n[t.a+"Percent"]=o?-100:0,n[t.a]=o?"1px":0,n["border"+i+Io]=1,n["border"+l+Io]=0,n[t.p]=r+"px",z.set(e,n)},we=[],qr={},er,Tn=function(){return vt()-zt>34&&(er||(er=requestAnimationFrame(Kt)))},yo=function(){(!Ct||!Ct.isPressed||Ct.startX>ze.clientWidth)&&(xe.cache++,Ct?er||(er=requestAnimationFrame(Kt)):Kt(),zt||mo("scrollStart"),zt=vt())},Fr=function(){es=ye.innerWidth,Jn=ye.innerHeight},Uo=function(e){xe.cache++,(e===!0||!_t&&!Kn&&!Ve.fullscreenElement&&!Ve.webkitFullscreenElement&&(!jr||es!==ye.innerWidth||Math.abs(ye.innerHeight-Jn)>ye.innerHeight*.25))&&Sr.restart(!0)},go={},ri=[],ls=function s(){return dt(_e,"scrollEnd",s)||co(!0)},mo=function(e){return go[e]&&go[e].map(function(r){return r()})||ri},At=[],cs=function(e){for(var r=0;r<At.length;r+=5)(!e||At[r+4]&&At[r+4].query===e)&&(At[r].style.cssText=At[r+1],At[r].getBBox&&At[r].setAttribute("transform",At[r+2]||""),At[r+3].uncache=1)},cn=function(e,r){var t;for(St=0;St<we.length;St++)t=we[St],t&&(!r||t._ctx===r)&&(e?t.kill(1):t.revert(!0,!0));Mr=!0,r&&cs(r),r||mo("revert")},us=function(e,r){xe.cache++,(r||!Mt)&&xe.forEach(function(t){return yt(t)&&t.cacheID++&&(t.rec=0)}),Rt(e)&&(ye.history.scrollRestoration=on=e)},Mt,po=0,Cn,ni=function(){if(Cn!==po){var e=Cn=po;requestAnimationFrame(function(){return e===po&&co(!0)})}},fs=function(){ze.appendChild(So),rn=!Ct&&So.offsetHeight||ye.innerHeight,ze.removeChild(So)},Pn=function(e){return Jo(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(r){return r.style.display=e?"none":"block"})},co=function(e,r){if(Ot=Ve.documentElement,ze=Ve.body,tn=[ye,Ve,Ot,ze],zt&&!e&&!Mr){ht(_e,"scrollEnd",ls);return}fs(),Mt=_e.isRefreshing=!0,xe.forEach(function(o){return yt(o)&&++o.cacheID&&(o.rec=o())});var t=mo("refreshInit");qn&&_e.sort(),r||cn(),xe.forEach(function(o){yt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),we.slice(0).forEach(function(o){return o.refresh()}),Mr=!1,we.forEach(function(o){if(o._subPinOffset&&o.pin){var n=o.vars.horizontal?"offsetWidth":"offsetHeight",i=o.pin[n];o.revert(!0,1),o.adjustPinSpacing(o.pin[n]-i),o.refresh()}}),Qr=1,Pn(!0),we.forEach(function(o){var n=Zt(o.scroller,o._dir),i=o.vars.end==="max"||o._endClamp&&o.end>n,l=o._startClamp&&o.start>=n;(i||l)&&o.setPositions(l?n-1:o.start,i?Math.max(l?n:o.start+1,n):o.end,!0)}),Pn(!1),Qr=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),xe.forEach(function(o){yt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),us(on,1),Sr.pause(),po++,Mt=2,Kt(2),we.forEach(function(o){return yt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Mt=_e.isRefreshing=!1,mo("refresh")},Kr=0,xr=1,qo,Kt=function(e){if(e===2||!Mt&&!Mr){_e.isUpdating=!0,qo&&qo.update(0);var r=we.length,t=vt(),o=t-Nr>=50,n=r&&we[0].scroll();if(xr=Kr>n?-1:1,Mt||(Kr=n),o&&(zt&&!Dr&&t-zt>200&&(zt=0,mo("scrollEnd")),No=Nr,Nr=t),xr<0){for(St=r;St-- >0;)we[St]&&we[St].update(0,o);xr=1}else for(St=0;St<r;St++)we[St]&&we[St].update(0,o);_e.isUpdating=!1}er=0},Jr=[ss,is,sn,nn,Bt+Qo,Bt+Vo,Bt+$o,Bt+jo,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],br=Jr.concat([uo,fo,"boxSizing","max"+Io,"max"+an,"position",Bt,nt,nt+$o,nt+Vo,nt+Qo,nt+jo]),si=function(e,r,t){Mo(t);var o=e._gsap;if(o.spacerIsNative)Mo(o.spacerState);else if(e._gsap.swappedIn){var n=r.parentNode;n&&(n.insertBefore(e,r),n.removeChild(r))}e._gsap.swappedIn=!1},Hr=function(e,r,t,o){if(!e._gsap.swappedIn){for(var n=Jr.length,i=r.style,l=e.style,f;n--;)f=Jr[n],i[f]=t[f];i.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(i.display="inline-block"),l[sn]=l[nn]="auto",i.flexBasis=t.flexBasis||"auto",i.overflow="visible",i.boxSizing="border-box",i[uo]=Er(e,Et)+ct,i[fo]=Er(e,ut)+ct,i[nt]=l[Bt]=l[is]=l[ss]="0",Mo(o),l[uo]=l["max"+Io]=t[uo],l[fo]=l["max"+an]=t[fo],l[nt]=t[nt],e.parentNode!==r&&(e.parentNode.insertBefore(r,e),r.appendChild(e)),e._gsap.swappedIn=!0}},ii=/([A-Z])/g,Mo=function(e){if(e){var r=e.t.style,t=e.length,o=0,n,i;for((e.t._gsap||z.core.getCache(e.t)).uncache=1;o<t;o+=2)i=e[o+1],n=e[o],i?r[n]=i:r[n]&&r.removeProperty(n.replace(ii,"-$1").toLowerCase())}},pr=function(e){for(var r=br.length,t=e.style,o=[],n=0;n<r;n++)o.push(br[n],t[br[n]]);return o.t=e,o},ai=function(e,r,t){for(var o=[],n=e.length,i=t?8:0,l;i<n;i+=2)l=e[i],o.push(l,l in r?r[l]:e[i+1]);return o.t=e.t,o},Tr={left:0,top:0},Sn=function(e,r,t,o,n,i,l,f,v,M,g,p,c,h){yt(e)&&(e=e(f)),Rt(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?vr("0"+e.substr(3),t):0));var C=c?c.time():0,w,X,ee;if(c&&c.seek(0),isNaN(e)||(e=+e),Ho(e))c&&(e=z.utils.mapRange(c.scrollTrigger.start,c.scrollTrigger.end,0,p,e)),l&&yr(l,t,o,!0);else{yt(r)&&(r=r(f));var re=(e||"0").split(" "),I,Me,K,k;ee=It(r,f)||ze,I=Qt(ee)||{},(!I||!I.left&&!I.top)&&Nt(ee).display==="none"&&(k=ee.style.display,ee.style.display="block",I=Qt(ee),k?ee.style.display=k:ee.style.removeProperty("display")),Me=vr(re[0],I[o.d]),K=vr(re[1]||"0",t),e=I[o.p]-v[o.p]-M+Me+n-K,l&&yr(l,K,o,t-K<20||l._isStart&&K>20),t-=t-K}if(h&&(f[h]=e||-.001,e<0&&(e=0)),i){var Te=e+t,te=i._isStart;w="scroll"+o.d2,yr(i,Te,o,te&&Te>20||!te&&(g?Math.max(ze[w],Ot[w]):i.parentNode[w])<=Te+1),g&&(v=Qt(l),g&&(i.style[o.op.p]=v[o.op.p]-o.op.m-i._offset+ct))}return c&&ee&&(w=Qt(ee),c.seek(p),X=Qt(ee),c._caScrollDist=w[o.p]-X[o.p],e=e/c._caScrollDist*p),c&&c.seek(C),c?e:Math.round(e)},li=/(webkit|moz|length|cssText|inset)/i,Mn=function(e,r,t,o){if(e.parentNode!==r){var n=e.style,i,l;if(r===ze){e._stOrig=n.cssText,l=Nt(e);for(i in l)!+i&&!li.test(i)&&l[i]&&typeof n[i]=="string"&&i!=="0"&&(n[i]=l[i]);n.top=t,n.left=o}else n.cssText=e._stOrig;z.core.getCache(e).uncache=1,r.appendChild(e)}},ps=function(e,r,t){var o=r,n=o;return function(i){var l=Math.round(e());return l!==o&&l!==n&&Math.abs(l-o)>3&&Math.abs(l-n)>3&&(i=l,t&&t()),n=o,o=Math.round(i),o}},dr=function(e,r,t){var o={};o[r.p]="+="+t,z.set(e,o)},En=function(e,r){var t=ro(e,r),o="_scroll"+r.p2,n=function i(l,f,v,M,g){var p=i.tween,c=f.onComplete,h={};v=v||t();var C=ps(t,v,function(){p.kill(),i.tween=0});return g=M&&g||0,M=M||l-v,p&&p.kill(),f[o]=l,f.inherit=!1,f.modifiers=h,h[o]=function(){return C(v+M*p.ratio+g*p.ratio*p.ratio)},f.onUpdate=function(){xe.cache++,i.tween&&Kt()},f.onComplete=function(){i.tween=0,c&&c.call(p)},p=i.tween=z.to(e,f),p};return e[o]=t,t.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},ht(e,"wheel",t.wheelHandler),_e.isTouch&&ht(e,"touchmove",t.wheelHandler),n},_e=function(){function s(r,t){xo||s.register(z)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),$r(this),this.init(r,t)}var e=s.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!zo){this.update=this.refresh=this.kill=Wt;return}t=xn(Rt(t)||Ho(t)||t.nodeType?{trigger:t}:t,ur);var n=t,i=n.onUpdate,l=n.toggleClass,f=n.id,v=n.onToggle,M=n.onRefresh,g=n.scrub,p=n.trigger,c=n.pin,h=n.pinSpacing,C=n.invalidateOnRefresh,w=n.anticipatePin,X=n.onScrubComplete,ee=n.onSnapComplete,re=n.once,I=n.snap,Me=n.pinReparent,K=n.pinSpacer,k=n.containerAnimation,Te=n.fastScrollEnd,te=n.preventOverlaps,m=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Et:ut,q=!g&&g!==0,y=It(t.scroller||ye),Z=z.core.getCache(y),oe=ho(y),ne=("pinType"in t?t.pinType:oo(y,"pinType")||oe&&"fixed")==="fixed",Fe=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],V=q&&t.toggleActions.split(" "),Ce="markers"in t?t.markers:ur.markers,b=oe?0:parseFloat(Nt(y)["border"+m.p2+Io])||0,a=this,S=t.onRefreshInit&&function(){return t.onRefreshInit(a)},j=Ks(y,oe,m),H=Js(y,oe),Y=0,de=0,be=0,ae=ro(y,m),ke,Pe,Ee,Ie,Se,$,le,Xe,Ue,u,Oe,Ze,ot,De,x,L,he,O,J,F,B,ce,ge,U,E,ue,R,qe,ft,st,it,N,je,Ke,at,A,Q,Ge,W;if(a._startClamp=a._endClamp=!1,a._dir=m,w*=45,a.scroller=y,a.scroll=k?k.time.bind(k):ae,Ie=ae(),a.vars=t,o=o||t.animation,"refreshPriority"in t&&(qn=1,t.refreshPriority===-9999&&(qo=a)),Z.tweenScroll=Z.tweenScroll||{top:En(y,ut),left:En(y,Et)},a.tweenTo=ke=Z.tweenScroll[m.p],a.scrubDuration=function(T){je=Ho(T)&&T,je?N?N.duration(T):N=z.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:je,paused:!0,onComplete:function(){return X&&X(a)}}):(N&&N.progress(1).kill(),N=0)},o&&(o.vars.lazy=!1,o._initted&&!a.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),a.animation=o.pause(),o.scrollTrigger=a,a.scrubDuration(g),st=0,f||(f=o.vars.id)),I&&((!io(I)||I.push)&&(I={snapTo:I}),"scrollBehavior"in ze.style&&z.set(oe?[ze,Ot]:y,{scrollBehavior:"auto"}),xe.forEach(function(T){return yt(T)&&T.target===(oe?Ve.scrollingElement||Ot:y)&&(T.smooth=!1)}),Ee=yt(I.snapTo)?I.snapTo:I.snapTo==="labels"?ti(o):I.snapTo==="labelsDirectional"?oi(o):I.directional!==!1?function(T,D){return ln(I.snapTo)(T,vt()-de<500?0:D.direction)}:z.utils.snap(I.snapTo),Ke=I.duration||{min:.1,max:2},Ke=io(Ke)?Zo(Ke.min,Ke.max):Zo(Ke,Ke),at=z.delayedCall(I.delay||je/2||.1,function(){var T=ae(),D=vt()-de<500,d=ke.tween;if((D||Math.abs(a.getVelocity())<10)&&!d&&!Dr&&Y!==T){var G=(T-$)/De,Ae=o&&!q?o.totalProgress():G,fe=D?0:(Ae-it)/(vt()-No)*1e3||0,Ye=z.utils.clamp(-G,1-G,vo(fe/2)*fe/.185),pt=G+(I.inertia===!1?0:Ye),$e,He,ve=I,tt=ve.onStart,pe=ve.onInterrupt,Qe=ve.onComplete;if($e=Ee(pt,a),Ho($e)||($e=pt),He=Math.max(0,Math.round($+$e*De)),T<=le&&T>=$&&He!==T){if(d&&!d._initted&&d.data<=vo(He-T))return;I.inertia===!1&&(Ye=$e-G),ke(He,{duration:Ke(vo(Math.max(vo(pt-Ae),vo($e-Ae))*.185/fe/.05||0)),ease:I.ease||"power3",data:vo(He-T),onInterrupt:function(){return at.restart(!0)&&pe&&pe(a)},onComplete:function(){a.update(),Y=ae(),o&&!q&&(N?N.resetTo("totalProgress",$e,o._tTime/o._tDur):o.progress($e)),st=it=o&&!q?o.totalProgress():a.progress,ee&&ee(a),Qe&&Qe(a)}},T,Ye*De,He-T-Ye*De),tt&&tt(a,ke.tween)}}else a.isActive&&Y!==T&&at.restart(!0)}).pause()),f&&(qr[f]=a),p=a.trigger=It(p||c!==!0&&c),W=p&&p._gsap&&p._gsap.stRevert,W&&(W=W(a)),c=c===!0?p:It(c),Rt(l)&&(l={targets:p,className:l}),c&&(h===!1||h===Bt||(h=!h&&c.parentNode&&c.parentNode.style&&Nt(c.parentNode).display==="flex"?!1:nt),a.pin=c,Pe=z.core.getCache(c),Pe.spacer?x=Pe.pinState:(K&&(K=It(K),K&&!K.nodeType&&(K=K.current||K.nativeElement),Pe.spacerIsNative=!!K,K&&(Pe.spacerState=pr(K))),Pe.spacer=O=K||Ve.createElement("div"),O.classList.add("pin-spacer"),f&&O.classList.add("pin-spacer-"+f),Pe.pinState=x=pr(c)),t.force3D!==!1&&z.set(c,{force3D:!0}),a.spacer=O=Pe.spacer,ft=Nt(c),U=ft[h+m.os2],F=z.getProperty(c),B=z.quickSetter(c,m.a,ct),Hr(c,O,ft),he=pr(c)),Ce){Ze=io(Ce)?xn(Ce,bn):bn,u=fr("scroller-start",f,y,m,Ze,0),Oe=fr("scroller-end",f,y,m,Ze,0,u),J=u["offset"+m.op.d2];var ie=It(oo(y,"content")||y);Xe=this.markerStart=fr("start",f,ie,m,Ze,J,0,k),Ue=this.markerEnd=fr("end",f,ie,m,Ze,J,0,k),k&&(Ge=z.quickSetter([Xe,Ue],m.a,ct)),!ne&&!(Vt.length&&oo(y,"fixedMarkers")===!0)&&(ei(oe?ze:y),z.set([u,Oe],{force3D:!0}),ue=z.quickSetter(u,m.a,ct),qe=z.quickSetter(Oe,m.a,ct))}if(k){var P=k.vars.onUpdate,_=k.vars.onUpdateParams;k.eventCallback("onUpdate",function(){a.update(0,0,1),P&&P.apply(k,_||[])})}if(a.previous=function(){return we[we.indexOf(a)-1]},a.next=function(){return we[we.indexOf(a)+1]},a.revert=function(T,D){if(!D)return a.kill(!0);var d=T!==!1||!a.enabled,G=_t;d!==a.isReverted&&(d&&(A=Math.max(ae(),a.scroll.rec||0),be=a.progress,Q=o&&o.progress()),Xe&&[Xe,Ue,u,Oe].forEach(function(Ae){return Ae.style.display=d?"none":"block"}),d&&(_t=a,a.update(d)),c&&(!Me||!a.isActive)&&(d?si(c,O,x):Hr(c,O,Nt(c),E)),d||a.update(d),_t=G,a.isReverted=d)},a.refresh=function(T,D,d,G){if(!((_t||!a.enabled)&&!D)){if(c&&T&&zt){ht(s,"scrollEnd",ls);return}!Mt&&S&&S(a),_t=a,ke.tween&&!d&&(ke.tween.kill(),ke.tween=0),N&&N.pause(),C&&o&&o.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var Ae=j(),fe=H(),Ye=k?k.duration():Zt(y,m),pt=De<=.01,$e=0,He=G||0,ve=io(d)?d.end:t.end,tt=t.endTrigger||p,pe=io(d)?d.start:t.start||(t.start===0||!p?0:c?"0 0":"0 100%"),Qe=a.pinnedContainer=t.pinnedContainer&&It(t.pinnedContainer,a),Re=p&&Math.max(0,we.indexOf(a))||0,Je=Re,Le,et,jt,Ht,mt,lt,Ut,Ar,un,Do,Gt,Ao,or;for(Ce&&io(d)&&(Ao=z.getProperty(u,m.p),or=z.getProperty(Oe,m.p));Je-- >0;)lt=we[Je],lt.end||lt.refresh(0,1)||(_t=a),Ut=lt.pin,Ut&&(Ut===p||Ut===c||Ut===Qe)&&!lt.isReverted&&(Do||(Do=[]),Do.unshift(lt),lt.revert(!0,!0)),lt!==we[Je]&&(Re--,Je--);for(yt(pe)&&(pe=pe(a)),pe=_n(pe,"start",a),$=Sn(pe,p,Ae,m,ae(),Xe,u,a,fe,b,ne,Ye,k,a._startClamp&&"_startClamp")||(c?-.001:0),yt(ve)&&(ve=ve(a)),Rt(ve)&&!ve.indexOf("+=")&&(~ve.indexOf(" ")?ve=(Rt(pe)?pe.split(" ")[0]:"")+ve:($e=vr(ve.substr(2),Ae),ve=Rt(pe)?pe:(k?z.utils.mapRange(0,k.duration(),k.scrollTrigger.start,k.scrollTrigger.end,$):$)+$e,tt=p)),ve=_n(ve,"end",a),le=Math.max($,Sn(ve||(tt?"100% 0":Ye),tt,Ae,m,ae()+$e,Ue,Oe,a,fe,b,ne,Ye,k,a._endClamp&&"_endClamp"))||-.001,$e=0,Je=Re;Je--;)lt=we[Je],Ut=lt.pin,Ut&&lt.start-lt._pinPush<=$&&!k&&lt.end>0&&(Le=lt.end-(a._startClamp?Math.max(0,lt.start):lt.start),(Ut===p&&lt.start-lt._pinPush<$||Ut===Qe)&&isNaN(pe)&&($e+=Le*(1-lt.progress)),Ut===c&&(He+=Le));if($+=$e,le+=$e,a._startClamp&&(a._startClamp+=$e),a._endClamp&&!Mt&&(a._endClamp=le||-.001,le=Math.min(le,Zt(y,m))),De=le-$||($-=.01)&&.001,pt&&(be=z.utils.clamp(0,1,z.utils.normalize($,le,A))),a._pinPush=He,Xe&&$e&&(Le={},Le[m.a]="+="+$e,Qe&&(Le[m.p]="-="+ae()),z.set([Xe,Ue],Le)),c&&!(Qr&&a.end>=Zt(y,m)))Le=Nt(c),Ht=m===ut,jt=ae(),ce=parseFloat(F(m.a))+He,!Ye&&le>1&&(Gt=(oe?Ve.scrollingElement||Ot:y).style,Gt={style:Gt,value:Gt["overflow"+m.a.toUpperCase()]},oe&&Nt(ze)["overflow"+m.a.toUpperCase()]!=="scroll"&&(Gt.style["overflow"+m.a.toUpperCase()]="scroll")),Hr(c,O,Le),he=pr(c),et=Qt(c,!0),Ar=ne&&ro(y,Ht?Et:ut)(),h?(E=[h+m.os2,De+He+ct],E.t=O,Je=h===nt?Er(c,m)+De+He:0,Je&&(E.push(m.d,Je+ct),O.style.flexBasis!=="auto"&&(O.style.flexBasis=Je+ct)),Mo(E),Qe&&we.forEach(function(Ro){Ro.pin===Qe&&Ro.vars.pinSpacing!==!1&&(Ro._subPinOffset=!0)}),ne&&ae(A)):(Je=Er(c,m),Je&&O.style.flexBasis!=="auto"&&(O.style.flexBasis=Je+ct)),ne&&(mt={top:et.top+(Ht?jt-$:Ar)+ct,left:et.left+(Ht?Ar:jt-$)+ct,boxSizing:"border-box",position:"fixed"},mt[uo]=mt["max"+Io]=Math.ceil(et.width)+ct,mt[fo]=mt["max"+an]=Math.ceil(et.height)+ct,mt[Bt]=mt[Bt+$o]=mt[Bt+Vo]=mt[Bt+Qo]=mt[Bt+jo]="0",mt[nt]=Le[nt],mt[nt+$o]=Le[nt+$o],mt[nt+Vo]=Le[nt+Vo],mt[nt+Qo]=Le[nt+Qo],mt[nt+jo]=Le[nt+jo],L=ai(x,mt,Me),Mt&&ae(0)),o?(un=o._initted,Lr(1),o.render(o.duration(),!0,!0),ge=F(m.a)-ce+De+He,R=Math.abs(De-ge)>1,ne&&R&&L.splice(L.length-2,2),o.render(0,!0,!0),un||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Lr(0)):ge=De,Gt&&(Gt.value?Gt.style["overflow"+m.a.toUpperCase()]=Gt.value:Gt.style.removeProperty("overflow-"+m.a));else if(p&&ae()&&!k)for(et=p.parentNode;et&&et!==ze;)et._pinOffset&&($-=et._pinOffset,le-=et._pinOffset),et=et.parentNode;Do&&Do.forEach(function(Ro){return Ro.revert(!1,!0)}),a.start=$,a.end=le,Ie=Se=Mt?A:ae(),!k&&!Mt&&(Ie<A&&ae(A),a.scroll.rec=0),a.revert(!1,!0),de=vt(),at&&(Y=-1,at.restart(!0)),_t=0,o&&q&&(o._initted||Q)&&o.progress()!==Q&&o.progress(Q||0,!0).render(o.time(),!0,!0),(pt||be!==a.progress||k||C||o&&!o._initted)&&(o&&!q&&o.totalProgress(k&&$<-.001&&!be?z.utils.normalize($,le,0):be,!0),a.progress=pt||(Ie-$)/De===be?0:be),c&&h&&(O._pinOffset=Math.round(a.progress*ge)),N&&N.invalidate(),isNaN(Ao)||(Ao-=z.getProperty(u,m.p),or-=z.getProperty(Oe,m.p),dr(u,m,Ao),dr(Xe,m,Ao-(G||0)),dr(Oe,m,or),dr(Ue,m,or-(G||0))),pt&&!Mt&&a.update(),M&&!Mt&&!ot&&(ot=!0,M(a),ot=!1)}},a.getVelocity=function(){return(ae()-Se)/(vt()-No)*1e3||0},a.endAnimation=function(){Oo(a.callbackAnimation),o&&(N?N.progress(1):o.paused()?q||Oo(o,a.direction<0,1):Oo(o,o.reversed()))},a.labelToScroll=function(T){return o&&o.labels&&($||a.refresh()||$)+o.labels[T]/o.duration()*De||0},a.getTrailing=function(T){var D=we.indexOf(a),d=a.direction>0?we.slice(0,D).reverse():we.slice(D+1);return(Rt(T)?d.filter(function(G){return G.vars.preventOverlaps===T}):d).filter(function(G){return a.direction>0?G.end<=$:G.start>=le})},a.update=function(T,D,d){if(!(k&&!d&&!T)){var G=Mt===!0?A:a.scroll(),Ae=T?0:(G-$)/De,fe=Ae<0?0:Ae>1?1:Ae||0,Ye=a.progress,pt,$e,He,ve,tt,pe,Qe,Re;if(D&&(Se=Ie,Ie=k?ae():G,I&&(it=st,st=o&&!q?o.totalProgress():fe)),w&&c&&!_t&&!ir&&zt&&(!fe&&$<G+(G-Se)/(vt()-No)*w?fe=1e-4:fe===1&&le>G+(G-Se)/(vt()-No)*w&&(fe=.9999)),fe!==Ye&&a.enabled){if(pt=a.isActive=!!fe&&fe<1,$e=!!Ye&&Ye<1,pe=pt!==$e,tt=pe||!!fe!=!!Ye,a.direction=fe>Ye?1:-1,a.progress=fe,tt&&!_t&&(He=fe&&!Ye?0:fe===1?1:Ye===1?2:3,q&&(ve=!pe&&V[He+1]!=="none"&&V[He+1]||V[He],Re=o&&(ve==="complete"||ve==="reset"||ve in o))),te&&(pe||Re)&&(Re||g||!o)&&(yt(te)?te(a):a.getTrailing(te).forEach(function(jt){return jt.endAnimation()})),q||(N&&!_t&&!ir?(N._dp._time-N._start!==N._time&&N.render(N._dp._time-N._start),N.resetTo?N.resetTo("totalProgress",fe,o._tTime/o._tDur):(N.vars.totalProgress=fe,N.invalidate().restart())):o&&o.totalProgress(fe,!!(_t&&(de||T)))),c){if(T&&h&&(O.style[h+m.os2]=U),!ne)B(Fo(ce+ge*fe));else if(tt){if(Qe=!T&&fe>Ye&&le+1>G&&G+1>=Zt(y,m),Me)if(!T&&(pt||Qe)){var Je=Qt(c,!0),Le=G-$;Mn(c,ze,Je.top+(m===ut?Le:0)+ct,Je.left+(m===ut?0:Le)+ct)}else Mn(c,O);Mo(pt||Qe?L:he),R&&fe<1&&pt||B(ce+(fe===1&&!Qe?ge:0))}}I&&!ke.tween&&!_t&&!ir&&at.restart(!0),l&&(pe||re&&fe&&(fe<1||!Br))&&Jo(l.targets).forEach(function(jt){return jt.classList[pt||re?"add":"remove"](l.className)}),i&&!q&&!T&&i(a),tt&&!_t?(q&&(Re&&(ve==="complete"?o.pause().totalProgress(1):ve==="reset"?o.restart(!0).pause():ve==="restart"?o.restart(!0):o[ve]()),i&&i(a)),(pe||!Br)&&(v&&pe&&zr(a,v),Fe[He]&&zr(a,Fe[He]),re&&(fe===1?a.kill(!1,1):Fe[He]=0),pe||(He=fe===1?1:3,Fe[He]&&zr(a,Fe[He]))),Te&&!pt&&Math.abs(a.getVelocity())>(Ho(Te)?Te:2500)&&(Oo(a.callbackAnimation),N?N.progress(1):Oo(o,ve==="reverse"?1:!fe,1))):q&&i&&!_t&&i(a)}if(qe){var et=k?G/k.duration()*(k._caScrollDist||0):G;ue(et+(u._isFlipped?1:0)),qe(et)}Ge&&Ge(-G/k.duration()*(k._caScrollDist||0))}},a.enable=function(T,D){a.enabled||(a.enabled=!0,ht(y,"resize",Uo),oe||ht(y,"scroll",yo),S&&ht(s,"refreshInit",S),T!==!1&&(a.progress=be=0,Ie=Se=Y=ae()),D!==!1&&a.refresh())},a.getTween=function(T){return T&&ke?ke.tween:N},a.setPositions=function(T,D,d,G){if(k){var Ae=k.scrollTrigger,fe=k.duration(),Ye=Ae.end-Ae.start;T=Ae.start+Ye*T/fe,D=Ae.start+Ye*D/fe}a.refresh(!1,!1,{start:wn(T,d&&!!a._startClamp),end:wn(D,d&&!!a._endClamp)},G),a.update()},a.adjustPinSpacing=function(T){if(E&&T){var D=E.indexOf(m.d)+1;E[D]=parseFloat(E[D])+T+ct,E[1]=parseFloat(E[1])+T+ct,Mo(E)}},a.disable=function(T,D){if(a.enabled&&(T!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,D||N&&N.pause(),A=0,Pe&&(Pe.uncache=1),S&&dt(s,"refreshInit",S),at&&(at.pause(),ke.tween&&ke.tween.kill()&&(ke.tween=0)),!oe)){for(var d=we.length;d--;)if(we[d].scroller===y&&we[d]!==a)return;dt(y,"resize",Uo),oe||dt(y,"scroll",yo)}},a.kill=function(T,D){a.disable(T,D),N&&!D&&N.kill(),f&&delete qr[f];var d=we.indexOf(a);d>=0&&we.splice(d,1),d===St&&xr>0&&St--,d=0,we.forEach(function(G){return G.scroller===a.scroller&&(d=1)}),d||Mt||(a.scroll.rec=0),o&&(o.scrollTrigger=null,T&&o.revert({kill:!1}),D||o.kill()),Xe&&[Xe,Ue,u,Oe].forEach(function(G){return G.parentNode&&G.parentNode.removeChild(G)}),qo===a&&(qo=0),c&&(Pe&&(Pe.uncache=1),d=0,we.forEach(function(G){return G.pin===c&&d++}),d||(Pe.spacer=0)),t.onKill&&t.onKill(a)},we.push(a),a.enable(!1,!1),W&&W(a),o&&o.add&&!De){var se=a.update;a.update=function(){a.update=se,xe.cache++,$||le||a.refresh()},z.delayedCall(.01,a.update),De=.01,$=le=0}else a.refresh();c&&ni()},s.register=function(t){return xo||(z=t||os(),ts()&&window.document&&s.enable(),xo=zo),xo},s.defaults=function(t){if(t)for(var o in t)ur[o]=t[o];return ur},s.disable=function(t,o){zo=0,we.forEach(function(i){return i[o?"kill":"disable"](t)}),dt(ye,"wheel",yo),dt(Ve,"scroll",yo),clearInterval(sr),dt(Ve,"touchcancel",Wt),dt(ze,"touchstart",Wt),lr(dt,Ve,"pointerdown,touchstart,mousedown",vn),lr(dt,Ve,"pointerup,touchend,mouseup",yn),Sr.kill(),ar(dt);for(var n=0;n<xe.length;n+=3)cr(dt,xe[n],xe[n+1]),cr(dt,xe[n],xe[n+2])},s.enable=function(){if(ye=window,Ve=document,Ot=Ve.documentElement,ze=Ve.body,z&&(Jo=z.utils.toArray,Zo=z.utils.clamp,$r=z.core.context||Wt,Lr=z.core.suppressOverwrites||Wt,on=ye.history.scrollRestoration||"auto",Kr=ye.pageYOffset||0,z.core.globals("ScrollTrigger",s),ze)){zo=1,So=document.createElement("div"),So.style.height="100vh",So.style.position="absolute",fs(),qs(),rt.register(z),s.isTouch=rt.isTouch,Jt=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),jr=rt.isTouch===1,ht(ye,"wheel",yo),tn=[ye,Ve,Ot,ze],z.matchMedia?(s.matchMedia=function(v){var M=z.matchMedia(),g;for(g in v)M.add(g,v[g]);return M},z.addEventListener("matchMediaInit",function(){return cn()}),z.addEventListener("matchMediaRevert",function(){return cs()}),z.addEventListener("matchMedia",function(){co(0,1),mo("matchMedia")}),z.matchMedia().add("(orientation: portrait)",function(){return Fr(),Fr})):console.warn("Requires GSAP 3.11.0 or later"),Fr(),ht(Ve,"scroll",yo);var t=ze.hasAttribute("style"),o=ze.style,n=o.borderTopStyle,i=z.core.Animation.prototype,l,f;for(i.revert||Object.defineProperty(i,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",l=Qt(ze),ut.m=Math.round(l.top+ut.sc())||0,Et.m=Math.round(l.left+Et.sc())||0,n?o.borderTopStyle=n:o.removeProperty("border-top-style"),t||(ze.setAttribute("style",""),ze.removeAttribute("style")),sr=setInterval(Tn,250),z.delayedCall(.5,function(){return ir=0}),ht(Ve,"touchcancel",Wt),ht(ze,"touchstart",Wt),lr(ht,Ve,"pointerdown,touchstart,mousedown",vn),lr(ht,Ve,"pointerup,touchend,mouseup",yn),Vr=z.utils.checkPrefix("transform"),br.push(Vr),xo=vt(),Sr=z.delayedCall(.2,co).pause(),bo=[Ve,"visibilitychange",function(){var v=ye.innerWidth,M=ye.innerHeight;Ve.hidden?(gn=v,mn=M):(gn!==v||mn!==M)&&Uo()},Ve,"DOMContentLoaded",co,ye,"load",co,ye,"resize",Uo],ar(ht),we.forEach(function(v){return v.enable(0,1)}),f=0;f<xe.length;f+=3)cr(dt,xe[f],xe[f+1]),cr(dt,xe[f],xe[f+2])}},s.config=function(t){"limitCallbacks"in t&&(Br=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(sr)||(sr=o)&&setInterval(Tn,o),"ignoreMobileResize"in t&&(jr=s.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(ar(dt)||ar(ht,t.autoRefreshEvents||"none"),Kn=(t.autoRefreshEvents+"").indexOf("resize")===-1)},s.scrollerProxy=function(t,o){var n=It(t),i=xe.indexOf(n),l=ho(n);~i&&xe.splice(i,l?6:2),o&&(l?Vt.unshift(ye,o,ze,o,Ot,o):Vt.unshift(n,o))},s.clearMatchMedia=function(t){we.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},s.isInViewport=function(t,o,n){var i=(Rt(t)?It(t):t).getBoundingClientRect(),l=i[n?uo:fo]*o||0;return n?i.right-l>0&&i.left+l<ye.innerWidth:i.bottom-l>0&&i.top+l<ye.innerHeight},s.positionInViewport=function(t,o,n){Rt(t)&&(t=It(t));var i=t.getBoundingClientRect(),l=i[n?uo:fo],f=o==null?l/2:o in Ir?Ir[o]*l:~o.indexOf("%")?parseFloat(o)*l/100:parseFloat(o)||0;return n?(i.left+f)/ye.innerWidth:(i.top+f)/ye.innerHeight},s.killAll=function(t){if(we.slice(0).forEach(function(n){return n.vars.id!=="ScrollSmoother"&&n.kill()}),t!==!0){var o=go.killAll||[];go={},o.forEach(function(n){return n()})}},s}();_e.version="3.12.7";_e.saveStyles=function(s){return s?Jo(s).forEach(function(e){if(e&&e.style){var r=At.indexOf(e);r>=0&&At.splice(r,5),At.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),z.core.getCache(e),$r())}}):At};_e.revert=function(s,e){return cn(!s,e)};_e.create=function(s,e){return new _e(s,e)};_e.refresh=function(s){return s?Uo(!0):(xo||_e.register())&&co(!0)};_e.update=function(s){return++xe.cache&&Kt(s===!0?2:0)};_e.clearScrollMemory=us;_e.maxScroll=function(s,e){return Zt(s,e?Et:ut)};_e.getScrollFunc=function(s,e){return ro(It(s),e?Et:ut)};_e.getById=function(s){return qr[s]};_e.getAll=function(){return we.filter(function(s){return s.vars.id!=="ScrollSmoother"})};_e.isScrolling=function(){return!!zt};_e.snapDirectional=ln;_e.addEventListener=function(s,e){var r=go[s]||(go[s]=[]);~r.indexOf(e)||r.push(e)};_e.removeEventListener=function(s,e){var r=go[s],t=r&&r.indexOf(e);t>=0&&r.splice(t,1)};_e.batch=function(s,e){var r=[],t={},o=e.interval||.016,n=e.batchMax||1e9,i=function(v,M){var g=[],p=[],c=z.delayedCall(o,function(){M(g,p),g=[],p=[]}).pause();return function(h){g.length||c.restart(!0),g.push(h.trigger),p.push(h),n<=g.length&&c.progress(1)}},l;for(l in e)t[l]=l.substr(0,2)==="on"&&yt(e[l])&&l!=="onRefreshInit"?i(l,e[l]):e[l];return yt(n)&&(n=n(),ht(_e,"refresh",function(){return n=e.batchMax()})),Jo(s).forEach(function(f){var v={};for(l in t)v[l]=t[l];v.trigger=f,r.push(_e.create(v))}),r};var In=function(e,r,t,o){return r>o?e(o):r<0&&e(0),t>o?(o-r)/(t-r):t<0?r/(r-t):1},Ur=function s(e,r){r===!0?e.style.removeProperty("touch-action"):e.style.touchAction=r===!0?"auto":r?"pan-"+r+(rt.isTouch?" pinch-zoom":""):"none",e===Ot&&s(ze,r)},hr={auto:1,scroll:1},ci=function(e){var r=e.event,t=e.target,o=e.axis,n=(r.changedTouches?r.changedTouches[0]:r).target,i=n._gsap||z.core.getCache(n),l=vt(),f;if(!i._isScrollT||l-i._isScrollT>2e3){for(;n&&n!==ze&&(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth||!(hr[(f=Nt(n)).overflowY]||hr[f.overflowX]));)n=n.parentNode;i._isScroll=n&&n!==t&&!ho(n)&&(hr[(f=Nt(n)).overflowY]||hr[f.overflowX]),i._isScrollT=l}(i._isScroll||o==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},ds=function(e,r,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:o=o&&ci,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&ht(Ve,rt.eventTypes[0],An,!1,!0)},onDisable:function(){return dt(Ve,rt.eventTypes[0],An,!0)}})},ui=/(input|label|select|textarea)/i,Dn,An=function(e){var r=ui.test(e.target.tagName);(r||Dn)&&(e._gsapAllow=!0,Dn=r)},fi=function(e){io(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var r=e,t=r.normalizeScrollX,o=r.momentum,n=r.allowNestedScroll,i=r.onRelease,l,f,v=It(e.target)||Ot,M=z.core.globals().ScrollSmoother,g=M&&M.get(),p=Jt&&(e.content&&It(e.content)||g&&e.content!==!1&&!g.smooth()&&g.content()),c=ro(v,ut),h=ro(v,Et),C=1,w=(rt.isTouch&&ye.visualViewport?ye.visualViewport.scale*ye.visualViewport.width:ye.outerWidth)/ye.innerWidth,X=0,ee=yt(o)?function(){return o(l)}:function(){return o||2.8},re,I,Me=ds(v,e.type,!0,n),K=function(){return I=!1},k=Wt,Te=Wt,te=function(){f=Zt(v,ut),Te=Zo(Jt?1:0,f),t&&(k=Zo(0,Zt(v,Et))),re=po},m=function(){p._gsap.y=Fo(parseFloat(p._gsap.y)+c.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",c.offset=c.cacheID=0},q=function(){if(I){requestAnimationFrame(K);var Ce=Fo(l.deltaY/2),b=Te(c.v-Ce);if(p&&b!==c.v+c.offset){c.offset=b-c.v;var a=Fo((parseFloat(p&&p._gsap.y)||0)-c.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",p._gsap.y=a+"px",c.cacheID=xe.cache,Kt()}return!0}c.offset&&m(),I=!0},y,Z,oe,ne,Fe=function(){te(),y.isActive()&&y.vars.scrollY>f&&(c()>f?y.progress(1)&&c(f):y.resetTo("scrollY",f))};return p&&z.set(p,{y:"+=0"}),e.ignoreCheck=function(V){return Jt&&V.type==="touchmove"&&q()||C>1.05&&V.type!=="touchstart"||l.isGesturing||V.touches&&V.touches.length>1},e.onPress=function(){I=!1;var V=C;C=Fo((ye.visualViewport&&ye.visualViewport.scale||1)/w),y.pause(),V!==C&&Ur(v,C>1.01?!0:t?!1:"x"),Z=h(),oe=c(),te(),re=po},e.onRelease=e.onGestureStart=function(V,Ce){if(c.offset&&m(),!Ce)ne.restart(!0);else{xe.cache++;var b=ee(),a,S;t&&(a=h(),S=a+b*.05*-V.velocityX/.227,b*=In(h,a,S,Zt(v,Et)),y.vars.scrollX=k(S)),a=c(),S=a+b*.05*-V.velocityY/.227,b*=In(c,a,S,Zt(v,ut)),y.vars.scrollY=Te(S),y.invalidate().duration(b).play(.01),(Jt&&y.vars.scrollY>=f||a>=f-1)&&z.to({},{onUpdate:Fe,duration:b})}i&&i(V)},e.onWheel=function(){y._ts&&y.pause(),vt()-X>1e3&&(re=0,X=vt())},e.onChange=function(V,Ce,b,a,S){if(po!==re&&te(),Ce&&t&&h(k(a[2]===Ce?Z+(V.startX-V.x):h()+Ce-a[1])),b){c.offset&&m();var j=S[2]===b,H=j?oe+V.startY-V.y:c()+b-S[1],Y=Te(H);j&&H!==Y&&(oe+=Y-H),c(Y)}(b||Ce)&&Kt()},e.onEnable=function(){Ur(v,t?!1:"x"),_e.addEventListener("refresh",Fe),ht(ye,"resize",Fe),c.smooth&&(c.target.style.scrollBehavior="auto",c.smooth=h.smooth=!1),Me.enable()},e.onDisable=function(){Ur(v,!0),dt(ye,"resize",Fe),_e.removeEventListener("refresh",Fe),Me.kill()},e.lockAxis=e.lockAxis!==!1,l=new rt(e),l.iOS=Jt,Jt&&!c()&&c(1),Jt&&z.ticker.add(Wt),ne=l._dc,y=z.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:ps(c,c(),function(){return y.pause()})},onUpdate:Kt,onComplete:ne.vars.onComplete}),l};_e.sort=function(s){if(yt(s))return we.sort(s);var e=ye.pageYOffset||0;return _e.getAll().forEach(function(r){return r._sortY=r.trigger?e+r.trigger.getBoundingClientRect().top:r.start+ye.innerHeight}),we.sort(s||function(r,t){return(r.vars.refreshPriority||0)*-1e6+(r.vars.containerAnimation?1e6:r._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};_e.observe=function(s){return new rt(s)};_e.normalizeScroll=function(s){if(typeof s>"u")return Ct;if(s===!0&&Ct)return Ct.enable();if(s===!1){Ct&&Ct.kill(),Ct=s;return}var e=s instanceof rt?s:fi(s);return Ct&&Ct.target===e.target&&Ct.kill(),ho(e.target)&&(Ct=e),e};_e.core={_getVelocityProp:Zr,_inputObserver:ds,_scrollers:xe,_proxies:Vt,bridge:{ss:function(){zt||mo("scrollStart"),zt=vt()},ref:function(){return _t}}};os()&&z.registerPlugin(_e);var Ko=function(){var s=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(M){M.preventDefault(),t(++s%e.children.length)},!1);function r(M){return e.appendChild(M.dom),M}function t(M){for(var g=0;g<e.children.length;g++)e.children[g].style.display=g===M?"block":"none";s=M}var o=(performance||Date).now(),n=o,i=0,l=r(new Ko.Panel("FPS","#0ff","#002")),f=r(new Ko.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var v=r(new Ko.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:r,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){i++;var M=(performance||Date).now();if(f.update(M-o,200),M>=n+1e3&&(l.update(i*1e3/(M-n),100),n=M,i=0,v)){var g=performance.memory;v.update(g.usedJSHeapSize/1048576,g.jsHeapSizeLimit/1048576)}return M},update:function(){o=this.end()},domElement:e,setMode:t}};Ko.Panel=function(s,e,r){var t=1/0,o=0,n=Math.round,i=n(window.devicePixelRatio||1),l=80*i,f=48*i,v=3*i,M=2*i,g=3*i,p=15*i,c=74*i,h=30*i,C=document.createElement("canvas");C.width=l,C.height=f,C.style.cssText="width:80px;height:48px";var w=C.getContext("2d");return w.font="bold "+9*i+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=r,w.fillRect(0,0,l,f),w.fillStyle=e,w.fillText(s,v,M),w.fillRect(g,p,c,h),w.fillStyle=r,w.globalAlpha=.9,w.fillRect(g,p,c,h),{dom:C,update:function(X,ee){t=Math.min(t,X),o=Math.max(o,X),w.fillStyle=r,w.globalAlpha=1,w.fillRect(0,0,l,p),w.fillStyle=e,w.fillText(n(X)+" "+s+" ("+n(t)+"-"+n(o)+")",v,M),w.drawImage(C,g+i,p,c-i,h,g,p,c-i,h),w.fillRect(g+c-i,p,i,h),w.fillStyle=r,w.globalAlpha=.9,w.fillRect(g+c-i,p,i,n((1-X/ee)*h))}}};const hs={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class tr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const pi=new Cs(-1,1,1,-1,0,1);class di extends Co{constructor(){super(),this.setAttribute("position",new fn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new fn([0,2,0,0,2,0],2))}}const hi=new di;class gs{constructor(e){this._mesh=new We(hi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,pi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class gi extends tr{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof lo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Yr.clone(e.uniforms),this.material=new lo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new gs(this.material)}render(e,r,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Rn extends tr{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,t){const o=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let i,l;this.inverse?(i=0,l=1):(i=1,l=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),n.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),n.buffers.stencil.setClear(l),n.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.color.setMask(!0),n.buffers.depth.setMask(!0),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(o.EQUAL,1,4294967295),n.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),n.buffers.stencil.setLocked(!0)}}class mi extends tr{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class _i{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const t=e.getSize(new kt);this._width=t.width,this._height=t.height,r=new mr(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:_r}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new gi(hs),this.copyPass.material.blending=Ps,this.clock=new Ss}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let t=!1;for(let o=0,n=this.passes.length;o<n;o++){const i=this.passes[o];if(i.enabled!==!1){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),i.needsSwap){if(t){const l=this.renderer.getContext(),f=this.renderer.state.buffers.stencil;f.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),f.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}Rn!==void 0&&(i instanceof Rn?t=!0:i instanceof mi&&(t=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new kt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class wi extends tr{constructor(e,r,t=null,o=null,n=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Pt}render(e,r,t){const o=e.autoClear;e.autoClear=!1;let n,i;this.overrideMaterial!==null&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(n),this.overrideMaterial!==null&&(this.scene.overrideMaterial=i),e.autoClear=o}}const vi={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Pt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class _o extends tr{constructor(e,r,t,o){super(),this.strength=r!==void 0?r:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new kt(e.x,e.y):new kt(256,256),this.clearColor=new Pt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let n=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);this.renderTargetBright=new mr(n,i,{type:_r}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let g=0;g<this.nMips;g++){const p=new mr(n,i,{type:_r});p.texture.name="UnrealBloomPass.h"+g,p.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(p);const c=new mr(n,i,{type:_r});c.texture.name="UnrealBloomPass.v"+g,c.texture.generateMipmaps=!1,this.renderTargetsVertical.push(c),n=Math.round(n/2),i=Math.round(i/2)}const l=vi;this.highPassUniforms=Yr.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new lo({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const f=[3,5,7,9,11];n=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);for(let g=0;g<this.nMips;g++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(f[g])),this.separableBlurMaterials[g].uniforms.invSize.value=new kt(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const v=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=v,this.bloomTintColors=[new me(1,1,1),new me(1,1,1),new me(1,1,1),new me(1,1,1),new me(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const M=hs;this.copyUniforms=Yr.clone(M.uniforms),this.blendMaterial=new lo({uniforms:this.copyUniforms,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,blending:Xt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Pt,this.oldClearAlpha=1,this.basic=new Tt,this.fsQuad=new gs(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let t=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(t,o);for(let n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(t,o),this.renderTargetsVertical[n].setSize(t,o),this.separableBlurMaterials[n].uniforms.invSize.value=new kt(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,r,t,o,n){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const i=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),n&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let f=0;f<this.nMips;f++)this.fsQuad.material=this.separableBlurMaterials[f],this.separableBlurMaterials[f].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[f].uniforms.direction.value=_o.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[f]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[f].uniforms.colorTexture.value=this.renderTargetsHorizontal[f].texture,this.separableBlurMaterials[f].uniforms.direction.value=_o.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[f]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[f];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,n&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=i}getSeparableBlurMaterial(e){const r=[];for(let t=0;t<e;t++)r.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new lo({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new kt(.5,.5)},direction:{value:new kt(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new lo({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}_o.BlurDirectionX=new kt(1,0);_o.BlurDirectionY=new kt(0,1);class kn extends Ms{constructor(e,r={}){const t=r.font;if(t===void 0)super();else{const o=t.generateShapes(e,r.size);r.depth===void 0&&(r.depth=50),r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),super(o,r)}this.type="TextGeometry"}}function yi(s,e,r,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:n}=r,i=8,l=24,f=.075;let v,M=[],g=[],p=[],c=[];const h=(w,X,ee,re)=>{const I=new Eo(w,w,w),Me=new Go(I),K=[new Dt({color:16711680,transparent:!0,opacity:re.opacity,blending:Xt}),new Dt({color:65280,transparent:!0,opacity:re.opacity,blending:Xt}),new Dt({color:255,transparent:!0,opacity:re.opacity,blending:Xt}),new Dt({color:65535,transparent:!0,opacity:re.opacity,blending:Xt}),new Dt({color:16711935,transparent:!0,opacity:re.opacity,blending:Xt}),new Dt({color:16776960,transparent:!0,opacity:re.opacity,blending:Xt})],k=new wt,Te=Me.getAttribute("position").array,te=[];for(let y=0;y<Te.length/3;y+=2)te.push(y,y+1);const m=Array(6).fill(null).map(()=>new Co),q=Array(6).fill(null).map(()=>[]);for(let y=0;y<te.length/2;y++){const Z=y%6;q[Z].push(te[y*2],te[y*2+1])}return m.forEach((y,Z)=>{y.setIndex(q[Z]),y.setAttribute("position",Me.getAttribute("position"));const oe=new Yt(y,K[Z]);k.add(oe)}),k.position.z=X,k.rotation.z=ee,k};return(()=>{const ee=.9/(l-1);for(let te=0;te<l;te++)g[te]=new Dt({transparent:!0,opacity:1-te*ee});if(v=new wt,!v){console.error("introGroup failed to initialize");return}for(let te=0;te<l;te++){const m=o-te*i,q=h(m,0,0,g[te]),y=q.children.map(Z=>Z.material);c.push(y.map(Z=>({material:Z,originalColor:Z.color.clone()}))),v.add(q)}v.position.z=n,e.add(v),M.push(v),p=g.map(te=>te.opacity);const re=Be.timeline({repeat:-1});re.to(v.rotation,{x:Ne.degToRad(360),duration:12,ease:"none"},0),re.to(v.rotation,{y:Ne.degToRad(360),duration:10,ease:"none"},0),re.to(v.rotation,{z:Ne.degToRad(360),duration:14,ease:"none"},0);let I=-1,Me=0;const K=f*1e3,k=l*K,Te=te=>{const m=te%k/K,q=Math.floor(m)%l;I!==-1&&te-Me>=K&&(c[I].forEach(oe=>{oe.material.opacity=p[I],oe.material.color.copy(oe.originalColor)}),I=-1),I===-1&&q!==I&&(I=q,Me=te,c[I].forEach(Z=>{Z.material.opacity=1,Z.material.color.set(1,1,1)})),requestAnimationFrame(Te)};requestAnimationFrame(Te)})(),{introCubes:M}}class xi extends Es{constructor(e){super(e)}load(e,r,t,o){const n=this,i=new Is(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(l){const f=n.parse(JSON.parse(l));r&&r(f)},t,o)}parse(e){return new bi(e)}}class bi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,r=100){const t=[],o=Ti(e,r,this.data);for(let n=0,i=o.length;n<i;n++)t.push(...o[n].toShapes());return t}}function Ti(s,e,r){const t=Array.from(s),o=e/r.resolution,n=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,i=[];let l=0,f=0;for(let v=0;v<t.length;v++){const M=t[v];if(M===`
`)l=0,f-=n;else{const g=Ci(M,o,l,f,r);l+=g.offsetX,i.push(g.path)}}return i}function Ci(s,e,r,t,o){const n=o.glyphs[s]||o.glyphs["?"];if(!n){console.error('THREE.Font: character "'+s+'" does not exists in font family '+o.familyName+".");return}const i=new Ds;let l,f,v,M,g,p,c,h;if(n.o){const C=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let w=0,X=C.length;w<X;)switch(C[w++]){case"m":l=C[w++]*e+r,f=C[w++]*e+t,i.moveTo(l,f);break;case"l":l=C[w++]*e+r,f=C[w++]*e+t,i.lineTo(l,f);break;case"q":v=C[w++]*e+r,M=C[w++]*e+t,g=C[w++]*e+r,p=C[w++]*e+t,i.quadraticCurveTo(g,p,v,M);break;case"b":v=C[w++]*e+r,M=C[w++]*e+t,g=C[w++]*e+r,p=C[w++]*e+t,c=C[w++]*e+r,h=C[w++]*e+t,i.bezierCurveTo(g,p,c,h,v,M);break}}return{offsetX:n.ha*e,path:i}}function Pi(s,e,r,t,o,n,i){const l=Hn(),{CUBE_SIZE:f,CUBE_SPACING:v,FIRST_CUBE_Z:M}=e,g=M-(r.length+1)*v,p=65535,c=16711935,h=Ne.degToRad(15),C=1e3,w=.5,X=65280,ee=80,re=1,I=15,Me=.1,K="EXPLORE",k=l.isMobile?1:.5,Te=40,te=.125,m=100,q=8,y=l.isMobile?1.5:2,Z=l.isMobile?2:3.5,oe=1;let ne=[];ne.length=0;let Fe=null,V=null,Ce=!1,b=!1,a=new As,S=new kt,j=null,H=null,Y=null,de=!1,be=null;const ae=new Map,ke=new Map,Pe=new Map,Ee=(x,L,he,O,J,F)=>{const B=new wt;B.position.z=he,B.rotation.z=O,B.userData.isActive=!1;const ce=new Eo(L,L,L),ge=new Go(ce),U=new Dt({color:new Pt(p),transparent:!0,opacity:0}),E=new Yt(ge,U);E.geometry.computeBoundingSphere(),B.add(E);let ue="right";const R=L/2,qe=()=>{const Ke=new pn(40,24),at=new Go(Ke),A=new Dt({color:new Pt(p),transparent:!0,opacity:0,visible:!0}),Q=new Yt(at,A);Q.userData.isPortal=!0,Q.userData.isAnimating=!1,Q.geometry.computeBoundingSphere();const Ge=new no(80,80),W=new Tt({visible:!1,side:$t}),ie=new We(Ge,W);ie.userData.isPortalHitbox=!0,ie.userData.portal=Q,ie.geometry.computeBoundingSphere();const P=new wt,_=new no(re,I),se=65/2;for(let Re=0;Re<ee;Re++){const Je=new Tt({color:new Pt(c),transparent:!0,opacity:0,visible:!1,side:$t}),Le=new We(_,Je),et=Re/ee*Math.PI*2;Le.position.set(Math.cos(et)*se,Math.sin(et)*se,0),Le.rotation.z=et+Math.PI/2,Le.userData.baseOpacity=.01,Le.userData.index=Re,Le.geometry.computeBoundingSphere(),P.add(Le)}const T=2,D=25;for(let Re=1;Re<D;Re++){const Je=new pn(40,24),Le=new Go(Je),et=Ne.lerp(1,.1,Re/(D-1)),jt=new Dt({color:new Pt(p),transparent:!0,opacity:0}),Ht=new Yt(Le,jt);Ht.userData.isPortal=!0,Ht.userData.maxOpacity=et,Ht.position.z=-Re*T,Ht.geometry.computeBoundingSphere(),Q.add(Ht)}if(Q.userData.maxOpacity=1,V){const Re=new kn(K,{font:V,size:4,depth:0,curveSegments:12,bevelEnabled:!1});Re.computeBoundingBox(),Re.center();const Je=new Tt({color:16777215,transparent:!0,opacity:0,side:$t}),Le=new We(Re,Je);Le.visible=!1,Le.position.set(0,-50,0),Q.add(Le),Q.userData.exploreText=Le}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const d=new wt,G=new no(12,l.isMobile?1:.5),Ae=new Tt({color:16777215,transparent:!0,opacity:0,side:$t}),fe=new We(G,Ae);fe.rotation.z=Math.PI/4;const Ye=new We(G,Ae);Ye.rotation.z=-Math.PI/4,d.add(fe,Ye);const pt=new no(30,30),$e=new Tt({opacity:0,transparent:!0,side:$t,visible:!0}),He=new We(pt,$e);He.userData.isCloseHitbox=!0,He.geometry.computeBoundingSphere(),He.renderOrder=2,d.add(He);const ve=42,tt=42,pe=-10;d.visible=!1;let Qe;switch(ue){case"left":Q.position.set(-R,0,0),Q.rotation.y=Math.PI/2,ie.position.set(-R,0,0),ie.rotation.y=Math.PI/2,O>=Ne.degToRad(120)?(Q.rotation.z=Math.PI,d.position.set(-R+pe,-42,ve),Qe=new me(-R+pe,-42,ve)):(d.position.set(-R+pe,tt,-42),Qe=new me(-R+pe,tt,-42)),d.rotation.y=Math.PI/2,P.children.forEach(Re=>Re.position.x+=Me);break;case"top":Q.position.set(0,-R,0),Q.rotation.x=-Math.PI/2,Q.rotation.z=-Math.PI/2,ie.position.set(0,-R,0),ie.rotation.x=Math.PI/2,O>=Ne.degToRad(100)?O>=Ne.degToRad(180)?(Q.rotation.z=Math.PI/2,d.position.set(-42,-R+pe,-42),Qe=new me(-42,-R+pe,-42)):(d.position.set(tt,-R+pe,ve),Qe=new me(tt,-R+pe,ve)):(d.position.set(tt,-R+pe,ve),Qe=new me(tt,-R+pe,ve)),d.rotation.x=-Math.PI/2,P.children.forEach(Re=>Re.position.y+=Me);break;case"right":Q.position.set(R,0,0),Q.rotation.y=-Math.PI/2,ie.position.set(R,0,0),ie.rotation.y=-Math.PI/2,O>=Ne.degToRad(120)?(Q.rotation.z=Math.PI,d.position.set(R+pe,-42,-42),Qe=new me(R+pe,-42,-42)):(d.position.set(R+pe,tt,ve),Qe=new me(R+pe,tt,ve)),d.rotation.y=-Math.PI/2,P.children.forEach(Re=>Re.position.x+=Me);break;case"bottom":Q.position.set(0,R,0),Q.rotation.x=Math.PI/2,Q.rotation.z=-Math.PI/2,ie.position.set(0,R,0),ie.rotation.x=Math.PI/2,O>=Ne.degToRad(100)?(d.position.set(ve,R-pe,-42),Qe=new me(ve,R-pe,-42)):(d.position.set(tt,R-pe,-42),Qe=new me(tt,R-pe,-42)),d.rotation.x=Math.PI/2,P.children.forEach(Re=>Re.position.y+=Me);break}B.userData.initialCloseGroupPosition=Qe,d.updateMatrixWorld(!0),Q.add(P),B.add(Q),B.add(ie),B.add(d),B.userData.closeButton=d,Q.updateMatrixWorld(!0),P.updateMatrixWorld(!0),d.updateMatrixWorld(!0),ae.set(B,[]),ke.set(B,0),Pe.set(B,0)},ft=N=>{(N instanceof Yt||N instanceof We)&&N.geometry&&N.geometry.computeBoundingSphere(),B.add(N)};if(J&&n.showKeyarts){switch(["left","top","right","bottom"].includes(F)?F:"left"){case"left":ue="right";break;case"top":ue="bottom";break;case"right":ue="left";break;case"bottom":ue="top";break}const je=i.get(J);if(je){const Ke=new no(L-1,L-1),at=new Tt({map:je,transparent:!0,opacity:0,blending:Xt,side:$t}),A=new We(Ke,at);switch(A.userData.isLoaded=!0,F){case"left":A.position.set(-R,0,0),O>=Ne.degToRad(120)?(A.rotation.y=Math.PI/2,A.rotation.z=-Math.PI):A.rotation.y=Math.PI/2;break;case"top":A.position.set(0,-R,0),A.rotation.x=-Math.PI/2,A.rotation.z=-Math.PI/2;break;case"right":A.position.set(R,0,0),O>=Ne.degToRad(120)?(A.rotation.y=-Math.PI/2,A.rotation.z=-Math.PI):A.rotation.y=-Math.PI/2;break;case"bottom":A.position.set(0,R,0),O>=Ne.degToRad(180)?O>=Ne.degToRad(220)?(A.rotation.x=Math.PI/2,A.rotation.z=Math.PI/2):(A.rotation.x=-Math.PI/2,A.rotation.z=Math.PI/2):(A.rotation.x=Math.PI/2,A.rotation.z=-Math.PI/2);break}A.geometry.computeBoundingSphere(),ft(A),qe()}else console.warn(`Keyart texture not preloaded for ${x.title}: ${J}`),qe()}else qe();B.userData.portalLocation=ue;{const N=(W,ie,P,_)=>{const se=new no(L-1,L-1),T={map:W,transparent:!0,opacity:0,blending:Xt,side:$t,depthWrite:!1};_&&(T.color=_);const D=new Tt(T),d=new We(se,D);d.position.copy(ie),P.x&&(d.rotation.x=P.x),P.y&&(d.rotation.y=P.y),d.userData.isGridPlane=!0,d.geometry.computeBoundingSphere(),ft(d)},je=i.get(t),Ke=i.get(o),at=["left","top","right","bottom"],Q=[J&&n.showKeyarts?F||"left":null,ue].filter(Boolean),Ge=at.filter(W=>!Q.includes(W));if(je)switch(N(je,new me(0,0,-L/2-1),{y:0}),N(je,new me(0,0,L/2+1),{y:0},new Pt(16744448)),Ge[0]){case"left":N(je,new me(-R,0,0),{y:-Math.PI/2},new Pt(255));break;case"top":N(je,new me(0,R,0),{x:Math.PI/2},new Pt(255));break;case"right":N(je,new me(R,0,0),{y:Math.PI/2},new Pt(255));break;case"bottom":N(je,new me(0,-R,0),{x:-Math.PI/2},new Pt(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(Ke)switch(Ge[1]){case"left":N(Ke,new me(-R,0,0),{y:-Math.PI/2});break;case"top":N(Ke,new me(0,R,0),{x:Math.PI/2});break;case"right":N(Ke,new me(R,0,0),{y:Math.PI/2});break;case"bottom":N(Ke,new me(0,-R,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}B.children.forEach(N=>{N.updateMatrixWorld(!0),N instanceof wt&&N.children.forEach(je=>{je.updateMatrixWorld(!0)})}),B.updateMatrixWorld(!0);const st=new Un().setFromObject(B),it=new Gn;return st.getBoundingSphere(it),B.boundingSphere=it,B},Ie=new Rs,Se=(x,L,he,O,J,F)=>{const B=new kn(x,{font:F,size:J,depth:0,curveSegments:12,bevelEnabled:!1});B.computeBoundingBox(),B.center();const ce=new Tt({color:16777215,transparent:!0,opacity:0,side:$t}),ge=new We(B,ce);ge.position.set(L,he,O);const U=B.boundingBox,E=U.max.x-U.min.x,ue=U.max.y-U.min.y,R=E+8,qe=ue+4,ft=new no(R,qe),st=new Tt({color:0,transparent:!0,opacity:0,side:$t}),it=new We(ft,st);return it.position.set(L,he,O-1),s.add(it),s.add(ge),ge.userData.backgroundPlane=it,ge},$=()=>new Promise(x=>{Fe=new xi,Fe.load("/fonts/Poppins_Regular.json",L=>{V=L;const he=Array.isArray(r)?r:[];Array.isArray(r)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",r),he.forEach((O,J)=>{const F=M-(J+1)*v,B=(J+1)*h,ce=Ee(O,f,F,B,O.keyart,O.keyartLocation);s.add(ce),ne.push(ce),Se(O.title,0,O.size-15,M+90-(J+1)*v,O.size,L)}),x()},void 0,L=>console.error("Error loading font:",L))}),le=()=>Ce?Promise.resolve({projectCubes:ne,updateCubeColors:Ze,loadedFont:V,maxZ:g}):$().then(()=>(Ce=!0,{projectCubes:ne,updateCubeColors:Ze,loadedFont:V,maxZ:g})).catch(x=>{throw console.error("Error in loadFontAndText:",x),x}),Xe=x=>{if(x.userData.isAnimating)return;x.userData.isAnimating=!0;const L=x.children.find(B=>B instanceof wt);if(!L)return;const he=L.children,O=he.length,J=Be.timeline({repeat:-1,defaults:{ease:"none"}}),F={value:0};J.to(F,{value:1,duration:1.5,onUpdate:()=>{he.forEach(ce=>{const ge=ce.material;if(ge.visible){const U=(ce.userData.index/O+F.value)%1,ue=(Math.sin(U*Math.PI*2)+1)/2;ge.opacity=.01+(1-.01)*Math.pow(ue,4)}})}}),x.userData.animationTimeline=J},Ue=x=>{if(!x.userData.isAnimating)return;x.userData.isAnimating=!1;const L=x.children.find(he=>he instanceof wt);L&&(x.userData.animationTimeline&&(x.userData.animationTimeline.kill(),delete x.userData.animationTimeline),L.children.forEach(he=>{const O=he.material;O.opacity=0}))},u=(x,L)=>{let he;const O=(Pe.get(x)||0)+1;Pe.set(x,O),O%q===0?he=new ks(y,Z,12,1):he=new Eo(k,k,k);const J=new Tt({color:16777215,transparent:!0,opacity:0}),F=new We(he,J);F.position.set(0,0,0);const B=L.position.clone(),ce=B.clone().normalize(),ge=B.length()+m;if(O%q===0){const E=F.position.clone().add(ce);F.lookAt(E),F.rotateX(Math.PI/2)}x.add(F),Be.to(J,{opacity:.5,duration:oe,ease:"power2.in",overwrite:"auto"});const U=ae.get(x)||[];U.push({mesh:F,direction:ce,distanceTraveled:0,totalDistance:ge}),ae.set(x,U)},Oe=x=>{(ae.get(x)||[]).forEach(he=>{x.remove(he.mesh),he.mesh.geometry.dispose(),he.mesh.material.dispose()}),ae.set(x,[])},Ze=x=>{Ie.setFromProjectionMatrix(x.projectionMatrix.clone().multiply(x.matrixWorldInverse));const L=x.position.z;let he=[];s.traverse(O=>{var J;return O instanceof We&&((J=O.geometry)==null?void 0:J.type)==="TextGeometry"&&he.push(O)}),b||(b=!0),ne.forEach((O,J)=>{const F=O.boundingSphere;if(F){const U=F.clone();if(U.radius*=1.5,!Ie.intersectsSphere(U))return}else console.warn(`Cube ${J} has no boundingSphere`);const B=O.position.z,ce=Math.abs(L-B+90);let ge=0;ce<=C&&(ge=1-ce/C),O.userData.isActive=ge>=w,O.children.forEach(U=>{if(U instanceof Yt&&!U.userData.isPortal&&!U.userData.isPortalHitbox){const E=U.material;if(ce<=C){const ue=Ne.lerp((p>>16&255)/255,(c>>16&255)/255,ge),R=Ne.lerp((p>>8&255)/255,(c>>8&255)/255,ge),qe=Ne.lerp((p&255)/255,(c&255)/255,ge);E.color.set(ue,R,qe),E.opacity=Math.min(1,ge*2)}else E.opacity=0}else if(U instanceof Yt&&U.userData.isPortal)b&&(ge>.1?U.children.forEach(E=>{E instanceof wt&&E.children.forEach(ue=>{ue instanceof We&&(ue.material.visible=!0,!U.userData.animationStarted&&n.showPortalPulses&&(Xe(U),U.userData.animationStarted=!0))})}):ge<=.1&&U.userData.animationStarted&&(U.children.forEach(E=>{E instanceof wt&&E.children.forEach(ue=>{ue instanceof We&&(ue.material.visible=!1)})}),Ue(U),delete U.userData.animationStarted));else if(U instanceof We&&!U.userData.isPortalHitbox&&!U.userData.isCloseHitbox){const E=U.material;if(U.userData.isLoaded||U.userData.isGridPlane)if(ce<=C){const ue=1-ce/C;E.opacity=Math.min(.8,ue*2)}else E.opacity=0}else if(U instanceof wt&&U.userData.closeButton){const E=Math.abs(L-U.position.z);U.children.forEach(ue=>{if(ue instanceof We&&!ue.userData.isCloseHitbox){const R=ue.material;if(E<=C){const qe=1-E/C;R.opacity=Math.min(1,qe*2)}else R.opacity=0}})}})}),he.forEach(O=>{if(!Ie.intersectsObject(O))return;const J=O.material,F=O.userData.backgroundPlane,B=F==null?void 0:F.material,ce=O.position.z,ge=Math.abs(L-ce+120);if(ge<=C){const U=1-ge/C,E=Math.min(1,U*2);J.opacity=E,B&&(B.opacity=E*.8)}else J.opacity=0,B&&(B.opacity=0)})};return{getInitializedData:le,updateCubeColors:Ze,setupInteractivity:(x,L,he,O)=>{be=O;let J=null,F=null,B=null,ce=!1,ge=!1,U=!1,E=!1;const ue=A=>{de&&(J=A.touches[0].clientY,F=F??window.scrollY,ce=!0)},R=A=>{if(!de||!B||!J)return;const Ge=A.touches[0].clientY-J;Ge<-20&&!ge?(st(),J=null):Ge>20&&(A.preventDefault(),window.scrollTo(0,F),Be.to(window,{scrollTo:{y:F},duration:0}))},qe=()=>{J=null,ce=!1,U=!0,Be.delayedCall(.5,()=>{U=!1})},ft=A=>{if(ce||ge||U){A.preventDefault(),A.stopPropagation(),F!==null&&(window.scrollTo(0,F),Be.to(window,{scrollTo:{y:F},duration:0}));return}if(!de||!B||!H||!Y)return;let Q=0;if(A instanceof WheelEvent?Q=A.deltaY:Q=window.scrollY-(F||0),A.preventDefault(),A.stopPropagation(),Q>0){window.scrollTo(0,F);return}Q<0&&st()},st=()=>{const A=B,Q=Y?Y.clone():new me(0,0,g),Ge=(H==null?void 0:H.z)??x.position.z,W=A==null?void 0:A.parent;E=!0;const ie=x.userData.lockedLookAt?x.userData.lockedLookAt.clone():x.getWorldDirection(new me).multiplyScalar(1e3).add(x.position),P={progress:0};Be.to(x.position,{x:(H==null?void 0:H.x)??x.position.x,y:(H==null?void 0:H.y)??x.position.y,z:Ge,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{if(A&&A.userData.exploreText){const _=A.userData.exploreText;Be.to(_.material,{opacity:0,duration:1,ease:"power2.out",onComplete:()=>{_.visible=!1}})}},onUpdate:()=>{const _=P.progress,se=Ne.lerp(ie.x,Q.x,_),T=Ne.lerp(ie.y,Q.y,_),D=Ne.lerp(ie.z,Q.z,_);x.lookAt(se,T,D),x.updateMatrixWorld(!0)},onComplete:()=>{if(x.lookAt(Q),de=!1,B=null,document.body.classList.remove("no-scrollbar"),be&&be(!1),A&&it(A,!1),W!=null&&W.userData.closeButton){const _=W.userData.closeButton.children.filter(se=>se instanceof We).map(se=>se.material);Be.to(_,{opacity:0,duration:.5,onUpdate:()=>{W.userData.closeButton.visible=!1},onComplete:()=>{W.userData.closeButton.updateMatrixWorld(!0),W.userData.standaloneDebugPlane&&(W.userData.standaloneDebugPlane.visible=!1,W.userData.standaloneDebugPlane.userData.locked=!1,W.userData.standaloneDebugPlane.updateMatrixWorld(!0),console.log("Standalone debug plane hidden on exit, position unchanged:",W.userData.standaloneDebugPlane.getWorldPosition(new me))),W.userData.lockedPosition=null}})}F=null,H=null,Y=null,x.userData.lockedLookAt=null,E=!1,ne.forEach(_=>{Math.abs(x.position.z-_.position.z+90)<=C&&ke.set(_,0)})}}),Be.to(P,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},it=(A,Q=!0)=>{const Ge=[A,...A.children.filter(ie=>ie instanceof Yt&&ie.userData.isPortal)],W=Q?25:2;Ge.forEach((ie,P)=>{let _=-P*W;(A.position.y>0&&A.rotation.x===-Math.PI/2||A.position.y<0&&A.rotation.x===Math.PI/2)&&(_=P*W);const se=Q?ie.userData.maxOpacity:0;Be.to(ie.position,{z:_,duration:1,ease:"power3.out",delay:.5}),Be.to(ie.material,{opacity:se,duration:1,ease:"power3.out",delay:.5})})},N=A=>{S.x=A.clientX/window.innerWidth*2-1,S.y=-(A.clientY/window.innerHeight)*2+1,a.setFromCamera(S,x),x.userData.lockedLookAt&&(x.lookAt(x.userData.lockedLookAt),x.updateMatrixWorld(!0)),ne.forEach(W=>{W.userData.lockedPosition&&(W.position.equals(W.userData.lockedPosition)||W.position.copy(W.userData.lockedPosition)),W.updateMatrixWorld(!0),W.children.forEach(ie=>ie.updateMatrixWorld(!0))});const Q=ne.flatMap(W=>{const ie=[];return W.userData.isActive&&W.children.forEach(P=>{P instanceof We&&P.userData.isPortalHitbox&&ie.push(P)}),de&&B&&W===B.parent&&W.children.forEach(P=>{P instanceof wt&&P===W.userData.closeButton&&P.children.forEach(_=>{_ instanceof We&&_.userData.isCloseHitbox&&ie.push(_)})}),ie}),Ge=a.intersectObjects(Q);if(Ge.length>0){const W=Ge[0].object;if(W.userData.isPortalHitbox){const ie=W.userData.portal;if(j!==ie){if(j){const _=j.material;Be.to(_.color,{r:(p>>16&255)/255,g:(p>>8&255)/255,b:(p&255)/255,duration:.5})}j=ie;const P=j.material;Be.to(P.color,{r:(X>>16&255)/255,g:(X>>8&255)/255,b:(X&255)/255,duration:.5})}L.style.cursor="pointer"}else W.userData.isCloseHitbox?L.style.cursor="pointer":L.style.cursor="auto"}else{if(j){const W=j.material;Be.to(W.color,{r:(p>>16&255)/255,g:(p>>8&255)/255,b:(p&255)/255,duration:.5}),j=null}L.style.cursor="auto"}},je=A=>{if(E)return;S.x=A.clientX/window.innerWidth*2-1,S.y=-(A.clientY/window.innerHeight)*2+1,a.setFromCamera(S,x);const Q=ne.flatMap(D=>{const d=[];return de&&B&&D===B.parent&&D.children.forEach(G=>{G instanceof wt&&G===D.userData.closeButton&&G.children.forEach(Ae=>{Ae instanceof We&&Ae.userData.isCloseHitbox&&d.push(Ae)})}),d}),Ge=ne.flatMap(D=>D.userData.isActive?D.children.filter(d=>d instanceof We&&d.userData.isPortalHitbox):[]);let W=a.intersectObjects(Q);for(const D of W)if(D.object.userData.isCloseHitbox){st();return}if(W=a.intersectObjects(Ge),W.length===0)return;const ie=W[0].object,P=ie.userData.portal,_=ie.parent,se=ne.indexOf(_),T=r[se];if(de&&P===B){let D=new me;const d=e.CUBE_SIZE/2;P.position.x===d?D.set(-1,0,0):P.position.x===-d?D.set(1,0,0):P.position.y===d?D.set(0,-1,0):P.position.y===-d&&D.set(0,1,0),D.applyQuaternion(_.getWorldQuaternion(new Os)).normalize();const Ae=x.position.clone().clone().add(D.clone().multiplyScalar(-675)),fe=D.clone().multiplyScalar(-1e3),Ye=Ae.clone().add(fe);E=!0,Be.to(x.position,{x:Ae.x,y:Ae.y,z:Ae.z,duration:1,ease:"power2.in",onUpdate:()=>x.lookAt(Ye),onStart:()=>{Be.to(he.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{T!=null&&T.slug&&(l.setScrollPosition(window.scrollY),ms.visit(route("project.show",{project:T.slug}),{preserveScroll:!1})),E=!1}})}else if(!de){H||(H=x.position.clone(),Y=new me(0,0,g)),be&&O(!0,H,Y);const D=P.getWorldPosition(new me);ge=!0,E=!0,F=window.scrollY,Be.to(x.position,{x:0,y:0,z:_.getWorldPosition(new me).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{de=!0,B=P,document.body.classList.add("no-scrollbar"),it(P,!0),_.userData.lockedPosition=_.position.clone(),Oe(_);const d=P.userData.exploreText;d&&(d.visible=!0,Be.to(d.material,{opacity:1,duration:1,ease:"power2.in"}))},onComplete:()=>{if(_.userData.closeButton){_.userData.initialCloseGroupPosition&&_.userData.closeButton.position.copy(_.userData.initialCloseGroupPosition),_.userData.closeButton.visible=!0,_.userData.closeButton.updateMatrixWorld(!0),_.updateMatrixWorld(!0),_.userData.closeButton.updateMatrixWorld(!0);const d=_.userData.closeButton.children.filter(G=>G instanceof We&&!G.userData.isCloseHitbox).map(G=>G.material);d.length>0&&Be.to(d,{opacity:1,duration:.5,onComplete:()=>{_.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),Be.to({},{duration:2,ease:"power3.out",overwrite:"all",onUpdate:function(){const d=this.progress(),G=x.getWorldDirection(new me).multiplyScalar(1e3).add(x.position),Ae=Ne.lerp(G.x,D.x,d),fe=Ne.lerp(G.y,D.y,d),Ye=Ne.lerp(G.z,D.z,d);x.lookAt(Ae,fe,Ye)},onComplete:()=>{x.lookAt(D.x,D.y,D.z),x.updateMatrixWorld(!0),ge=!1,E=!1,x.userData.lockedLookAt=D.clone()}})}};L.addEventListener("mousemove",N),L.addEventListener("click",je),L.addEventListener("touchstart",ue,{passive:!0}),L.addEventListener("touchmove",R,{passive:!1}),L.addEventListener("touchend",qe,{passive:!0}),window.addEventListener("wheel",ft,{passive:!1}),window.addEventListener("scroll",ft,{passive:!1});const Ke=()=>{ae.forEach((A,Q)=>{A.forEach(Ge=>{Q.remove(Ge.mesh),Ge.mesh.geometry.dispose(),Ge.mesh.material.dispose()})}),ae.clear(),ke.clear(),Pe.clear()},at=()=>{L.removeEventListener("mousemove",N),L.removeEventListener("click",je),L.removeEventListener("touchstart",ue),L.removeEventListener("touchmove",R),L.removeEventListener("touchend",qe),window.removeEventListener("wheel",ft),window.removeEventListener("scroll",ft)};return()=>{at(),Ke()}},updateClickHereParticles:(x,L)=>{const he=performance.now()/1e3,O=x.position.z;ne.forEach(J=>{const F=J.position.z;if(Math.abs(O-F+90)<=C&&!de){const ce=ke.get(J)||0;if(he-ce>=te){const E=J.children.find(ue=>ue instanceof Yt&&ue.userData.isPortal);E&&(u(J,E),ke.set(J,he))}const U=(ae.get(J)||[]).filter(E=>{if(E.distanceTraveled+=Te*L,E.mesh.position.copy(E.direction.clone().multiplyScalar(E.distanceTraveled)),(E.totalDistance-E.distanceTraveled)/Te<=oe&&!E.isFadingOut){E.isFadingOut=!0;const qe=E.mesh.material;Be.to(qe,{opacity:0,duration:oe,ease:"power2.out",overwrite:"auto"})}return E.distanceTraveled>=E.totalDistance?(J.remove(E.mesh),E.mesh.geometry.dispose(),E.mesh.material.dispose(),!1):!0});ae.set(J,U)}else Oe(J)})}}}function Si(s,e,r,t){const I=r-1e3,Me=Math.abs(-500-I),K=Math.ceil(Me/100),k=()=>{const b=new wt;let a=null,S=null;const j=[],H=[],Y=[],de=[],be=[];{const ae=new Eo(100,100,100),ke=new Go(ae),Pe=32*K,Ee=new Ls;Ee.copy(ke),Ee.instanceCount=Pe;const Ie=new Dt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),Se=new Float32Array(Pe*3),$=new Float32Array(Pe*3),le=new Float32Array(Pe*3),Xe=32*100,Ue=-3200/2+100/2,u=-500;for(let U=0;U<32;U++){const E=Te(U);for(let ue=0;ue<K;ue++){const R=U*K+ue,qe=Ue+U*100,ft=u-ue*100,st=Ne.randFloat(100,300),it=st/100,N=-600+st/2;Se[R*3]=qe,Se[R*3+1]=N,Se[R*3+2]=ft,$[R*3]=1,$[R*3+1]=it,$[R*3+2]=1,le[R*3]=E,le[R*3+1]=E,le[R*3+2]=E}}Ee.setAttribute("instancePosition",new Rr(Se,3)),Ee.setAttribute("instanceScale",new Rr($,3)),Ee.setAttribute("color",new Rr(le,3)),Ie.onBeforeCompile=U=>{U.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${U.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new Yt(Ee,Ie);const Oe=-3200/2,Ze=Xe/2,ot=-600,De=-300,x=I,L=-500;Ee.boundingBox=new Un(new me(Oe,ot,x),new me(Ze,De,L));const he=(Oe+Ze)/2,O=(ot+De)/2,J=(x+L)/2,F=Ze-Oe,B=De-ot,ce=L-x,ge=Math.sqrt(F*F+B*B+ce*ce)/2;Ee.boundingSphere=new Gn(new me(he,O,J),ge),b.add(a)}{S=new wt;const ae=32*100/5,ke=-3200/2;for(let Ee=0;Ee<6;Ee++){let Se=ke+Ee*ae,$=-500;const le=[new me(Se,-450,$)];let Xe=0;for(;$>I;){const Ue=$===-500?Ne.randFloat(300,800):Math.min(Ne.randFloat(300,800),Math.abs($-I));if($-=Ue,le.push(new me(Se,-450,$)),Xe+=Ue,$<=I){le[le.length-1].z=I;break}const u=Math.random()<.5?-1:1,Oe=Ne.randFloat(100,300);Se+=u*Oe,le.push(new me(Se,-450,$)),Xe+=Oe}H.push({points:le,totalLength:Xe})}const Pe=new Eo(4,4,4);for(let Ee=0;Ee<6;Ee++){const Ie=H[Ee],Se=Ie.totalLength,$=Se/60;for(let le=0;le<60;le++){const Xe=new Tt({color:16711680,fog:!0}),Ue=new We(Pe,Xe),u=le*$;let Oe=u;for(let Ze=0;Ze<Ie.points.length-1;Ze++){const ot=Ie.points[Ze],De=Ie.points[Ze+1],x=ot.distanceTo(De);if(Oe<=x){const L=Oe/x;Ue.position.lerpVectors(ot,De,L);break}Oe-=x}j.push(Ue),Y.push(u),de.push(Ee),be.push(1),S.add(Ue)}for(let le=0;le<60;le++){const Xe=new Tt({color:16777215,fog:!0}),Ue=new We(Pe,Xe),u=Se-(le*$+$/2);let Oe=Se-u;const Ze=[...Ie.points].reverse();for(let ot=0;ot<Ze.length-1;ot++){const De=Ze[ot],x=Ze[ot+1],L=De.distanceTo(x);if(Oe<=L){const he=Oe/L;Ue.position.lerpVectors(De,x,he);break}Oe-=L}j.push(Ue),Y.push(u),de.push(Ee),be.push(-1),S.add(Ue)}}e.add(S)}return e.add(b),{cityGroup:b,instancedLines:a,particleGroup:S,particles:j,paths:H,particleDistances:Y,particlePaths:de,particleDirections:be}},Te=b=>{if(b<10)return .05+b*.10555555555555556;if(b>=22){const a=31-b,S=(1-.05)/9;return .05+a*S}return 1},{cityGroup:te,instancedLines:m,particleGroup:q,particles:y,paths:Z,particleDistances:oe,particlePaths:ne,particleDirections:Fe}=k();return{cityGroup:te,buildingLines:m?[m]:[],updateParticles:b=>{const a=100*b;for(let S=0;S<y.length;S++){const j=Fe[S],H=ne[S],Y=Z[H],de=Y.totalLength;oe[S]+=a*j,j===1?(oe[S]=oe[S]%de,oe[S]<0&&(oe[S]+=de)):oe[S]=(oe[S]+de)%de;const be=oe[S],ae=j===1?Y.points:[...Y.points].reverse();let ke=j===1?be:de-be;for(let Pe=0;Pe<ae.length-1;Pe++){const Ee=ae[Pe],Ie=ae[Pe+1],Se=Ee.distanceTo(Ie);if(ke<=Se){const $=ke/Se;y[S].position.lerpVectors(Ee,Ie,$);break}ke-=Se}}},dispose:()=>{m&&(te.remove(m),m.geometry.dispose(),m.material.dispose()),q&&(e.remove(q),q.children.forEach(b=>{b.geometry.dispose(),b.material.dispose()})),e.remove(te)}}}Be.registerPlugin(_e);function Mi(s,e,r,t,o,n,i={},l,f){const{CUBE_SPACING:v,FIRST_CUBE_Z:M}=n,g=(t==null?void 0:t.length)||0,p=M-(g+1)*v;let c=!1;const h=Math.abs(p)+(g-1)*v;let C=Be.timeline();return C=Be.timeline({scrollTrigger:{trigger:r.value,start:"top top",end:`+=${h}`,scrub:i.scrub||.5,pin:!0,onUpdate:X=>{if(!c){const ee=X.progress,re=Ne.lerp(0,p,ee);e.position.set(0,0,re),e.lookAt(0,0,p)}o(e)}}}),C.fromTo(e.position,{z:0},{z:p,duration:1,ease:"none"},0),{setReverting:X=>{c=X},timeline:C}}function Ei(s,e,r){const l=r-1e3,f=1e3,v=r,M=150,g=-500,p=r,c=new Co,h=new Float32Array(2e3*3),C=new Float32Array(2e3),w=new Float32Array(2e3);let X=0;for(;X<2e3;){const K=(Math.random()-.5)*4e3,k=(Math.random()-.5)*4e3,Te=-1e3+Math.random()*(l- -1e3),te=Te>v&&Math.abs(K)<f&&Math.abs(k)<f,m=Math.abs(K)<M&&Math.abs(k)<M&&Te>p&&Te<g;if(!te&&!m){const q=X*3;h[q]=K,h[q+1]=k,h[q+2]=Te;const y=.1+Math.random()*(.7-.1);C[X]=y,w[X]=y,X++}}c.setAttribute("position",new dn(h,3)),c.setAttribute("opacity",new dn(w,1));const ee=new lo({uniforms:{color:{value:new Pt(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),re=new Bs(c,ee);s.add(re);const I=c.attributes.opacity;for(let K=0;K<2e3;K++)Be.to({opacity:C[K]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){w[K]=this.targets()[0].opacity,I.needsUpdate=!0}});return{dispose:()=>{Be.killTweensOf(w),s.remove(re),c.dispose(),ee.dispose()}}}function Ii(s,e){const t=e-1500,o=100,n=2,i=64,l=1e3,f=i*3,v=[4,4.5,5],M=6;let g,p,c,h,C,w;const X=[],ee=[[],[],[]],re=[[],[],[]],I=[[],[],[]];let Me=[0,0,0];const K=()=>{const m=0-t,q=[];for(let b=0;b<o;b++){const a=b/(o-1),S=0-a*m,j=a*5*2*Math.PI,H=90*(.8+.2*Math.sin(j*2)),Y=new me(H*Math.cos(j),H*Math.sin(j),S);(isNaN(Y.x)||isNaN(Y.y)||isNaN(Y.z))&&console.error("NaN in chaserPath points",{t:a,z:S,projectMaxZ:e}),q.push(Y)}g=new kr(q);const y=new Co().setFromPoints(g.getPoints(200));h=new Or(y,new Dt({color:16711935,linewidth:2,visible:!1})),s.add(h);const Z=[];for(let b=0;b<o;b++){const a=b/(o-1),S=0-a*m,j=a*3*2*Math.PI,H=60*(.8+.2*Math.sin(j*4)),Y=new me(H*Math.cos(j),H*Math.sin(j),S);(isNaN(Y.x)||isNaN(Y.y)||isNaN(Y.z))&&console.error("NaN in chaserPath2 points",{t:a,z:S,projectMaxZ:e}),Z.push(Y)}p=new kr(Z);const oe=new Co().setFromPoints(p.getPoints(200));C=new Or(oe,new Dt({color:65535,linewidth:2,visible:!1})),s.add(C);const ne=[];for(let b=0;b<o;b++){const a=b/(o-1),S=0-a*m,j=a*7*2*Math.PI,H=100,Y=90,de=.1*Math.sin(j),be=new me(H*(1+de)*Math.cos(j),Y*(1-de)*Math.sin(j),S);(isNaN(be.x)||isNaN(be.y)||isNaN(be.z))&&console.error("NaN in chaserPath3 points",{t:a,z:S,projectMaxZ:e}),ne.push(be)}c=new kr(ne);const Fe=new Co().setFromPoints(c.getPoints(200));w=new Or(Fe,new Dt({color:16776960,linewidth:2,visible:!1})),s.add(w);const V=[16711680,65280,255],Ce=new Eo(n,n,n);Ce.attributes.color&&delete Ce.attributes.color;for(let b=0;b<3;b++){const a=new wt;a.opacity=1,a.renderOrder=1,X[b]=a,s.add(a);for(let S=0;S<f;S++){const j=new Tt({color:V[b],transparent:!0,opacity:0,blending:Ns,fog:!0,depthWrite:!1}),H=new We(Ce,j);H.renderOrder=1,H.visible=!1,a.add(H),ee[b][S]=H,re[b][S]=0,I[b][S]=!1}}},k=m=>{const q=[g,p,c][m],y=q.getLength(),Z=I[m].filter(ne=>ne).length;if(f-Z>=i){let ne=0;for(let Fe=0;Fe<i;Fe++){const V=I[m].findIndex(Y=>!Y);if(V===-1){console.warn(`No available chasers for path ${m}, emitted ${ne}/${i}`);break}const Ce=ne/(i-1),b=.05+(1-.05)*Math.pow(Ce,3),a=new Tt({color:[16711680,65280,255][m],transparent:!0,opacity:b,blending:Xt,fog:!0,depthWrite:!1});ee[m][V].material=a,ee[m][V].visible=!0;const S=ne*M;re[m][V]=S,I[m][V]=!0;const j=S/y,H=q.getPointAt(j);ee[m][V].position.copy(H),ne++}}},Te=m=>{const q=performance.now()/1e3,y=[g,p,c];for(let Z=0;Z<3;Z++){q-Me[Z]>=v[Z]&&(k(Z),Me[Z]=q);const oe=y[Z],ne=oe.getLength(),Fe=l*m;for(let V=0;V<f;V++)if(I[Z][V]){re[Z][V]+=Fe;const Ce=re[Z][V]/ne;if(Ce>=1)ee[Z][V].visible=!1,I[Z][V]=!1,re[Z][V]=0;else{const b=oe.getPointAt(Ce);ee[Z][V].position.copy(b)}}}};return K(),{chaserPath:g,chaserPath2:p,chaserPath3:c,updateChasers:Te,dispose:()=>{s.remove(h),s.remove(C),s.remove(w),h.geometry.dispose(),h.material.dispose(),C.geometry.dispose(),C.material.dispose(),w.geometry.dispose(),w.material.dispose(),X.forEach(m=>{m.children.forEach(q=>{q.geometry.dispose(),q.material.dispose()}),s.remove(m)})}}}const Di={class:"preloader"},Ai={class:"progress-label"},Ri=en({__name:"Preloader",props:{progress:{}},setup(s){return(e,r)=>(Cr(),Nn("div",Di,[ao("div",Ai,_s(Math.round(e.progress))+"%",1)]))}}),ki=Yn(Ri,[["__scopeId","data-v-e5eadefa"]]),On=250,gr=500,Lo=-500,Gr=-520,Ln=-720,Bn=4e3,Oi=en({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(s){Be.registerPlugin(_e);const e=s,r=Hn();r.projects=e.projects;const t=Zs(),o={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},n=wo(null),i=wo(null),l=wo(!1),f=wo(0),v=wo(!1),M=wo(!0),g=new Map;let p,c,h,C,w,X,ee,re=null,I=null,Me=null,K=null,k=null,Te=[],te=null,m=null,q=0,y=null,Z;const oe=()=>{const b=n.value?n.value.getBoundingClientRect().width:window.innerWidth,a=window.innerHeight,S=t.isMobile?.75:1,j=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;h.setSize(b*S,a*S),h.setPixelRatio(j),C.setSize(b*S,a*S),c.aspect=b/a,c.updateProjectionMatrix(),h.domElement.style.width=`${b}px`,h.domElement.style.height=`${a}px`},ne=b=>g.has(b)?Promise.resolve(g.get(b)):new Promise((a,S)=>{new Ys().load(b,H=>{H.encoding=void 0,g.set(b,H),a(H)},void 0,H=>S(H))}),Fe=async()=>{p=new zs,p.background=new Pt(0),p.fog=new Fs(0,700,Bn),c=new Hs(75,window.innerWidth/window.innerHeight,1,Bn+6e3),c.position.set(0,0,0),c.lookAt(0,0,1e3),h=new Us({antialias:!0}),t.isMobile?h.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):h.setPixelRatio(window.devicePixelRatio),h.toneMapping=Gs,h.toneMappingExposure=1,h.outputEncoding=void 0,C=new _i(h);const b=new wi(p,c);if(C.addPass(b),t.isMobile?w=new _o(new kt(window.innerWidth,window.innerHeight),1.3,.2,0):w=new _o(new kt(window.innerWidth,window.innerHeight),1.6,.2,0),w.renderToScreen=!0,C.addPass(w),n.value)n.value.appendChild(h.domElement),h.domElement.style.opacity="0";else return;X=new Ko,X.dom.style.position="fixed",X.dom.style.top="0px",X.dom.style.left="0px",X.dom.style.zIndex="1000",document.body.appendChild(X.dom);const S=e.projects.filter(Y=>Y.keyart).length+2;let j=0;const H=()=>{j++,f.value=j/S*100,j===S&&(l.value=!0)};await ne(e.projectGridFile).then(()=>H()).catch(()=>H()),await ne(e.projectGridFile2).then(()=>H()).catch(()=>H());for(const Y of e.projects)Y.keyart?await ne(Y.keyart).then(()=>H()).catch(()=>H()):H();y=Pi(p,{CUBE_SIZE:On,CUBE_SPACING:gr,FIRST_CUBE_Z:Lo},e.projects,e.projectGridFile,e.projectGridFile2,o,g);try{const Y=await y.getInitializedData();if(Z=Y.maxZ,Z===void 0||isNaN(Z))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:de}=yi(p,p,{CUBE_SIZE:On,FIRST_CUBE_Z:Lo},o);if(Te=[...de,...Y.projectCubes],te=Y.updateCubeColors,o.showCars){const{cityGroup:be,updateParticles:ae,dispose:ke}=Si(p,p,Z,o);ee=ae,k=ke}if(o.showStarfield){const{dispose:be}=Ei(p,c,Z);re=be}if(o.showChasers){const{dispose:be,updateChasers:ae}=Ii(p,Z);Me=be,K=ae}oe()}catch(Y){console.error("Error initializing project cubes:",Y),Z=Lo-(e.projects.length+1)*gr}},V=(b=0)=>{if(m=requestAnimationFrame(V),h&&C){const a=(b-q)/1e3;q=b,ee(a),K&&K(a),y!=null&&y.updateClickHereParticles&&y.updateClickHereParticles(c,a);const S=4e3,j=1e3,H=Math.abs(c.position.z-Z);c.far=Math.max(S+j,H),c.updateProjectionMatrix();const Y=Ln-Gr;let de=0;c.position.z>=Gr?de=0:c.position.z<=Ln?de=1:de=(c.position.z-Gr)/Y,t.isMobile?w.strength=Ne.lerp(1.3,0,de):w.strength=Ne.lerp(1.6,.125,de),C.render()}X.update()};ws(()=>{Fe().then(()=>{if(l.value){m=requestAnimationFrame(V);let b=null;const a=y.getInitializedData().then(({projectCubes:j})=>{j.forEach(Y=>{Y.userData.isActive=!0});const H=Lo-(e.projects.length-1)*gr;c.position.set(0,0,5e3),c.lookAt(0,0,H),c.updateProjectionMatrix(),te(c),C.render(),Te.length&&te&&(b=Mi(p,c,i,Te,te,{CUBE_SPACING:gr,FIRST_CUBE_Z:Lo},{scrub:t.isMobile?3:1}).setReverting),h&&I===null&&(I=y.setupInteractivity(c,h.domElement,h,Y=>{b&&b(Y)})),window.scrollTo({top:0,behavior:"auto"})}),S=()=>{a.then(()=>{M.value=!1,c.position.set(0,0,5e3),c.updateProjectionMatrix(),Be.to(h.domElement,{opacity:1,duration:.5,ease:"power4.out"});const j={z:5e3};Be.to(j,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{c.position.z=j.z,c.updateProjectionMatrix()},onComplete:()=>{c.position.z=0,v.value=!0}})})};Be.delayedCall(.5,S)}}).catch(b=>{console.error("Initialization failed:",b)}),window.addEventListener("resize",Ce)}),vs(()=>{m!==null&&cancelAnimationFrame(m),I&&I(),window.removeEventListener("resize",Ce),_e.getAll().forEach(b=>b.kill()),h.dispose(),C.dispose(),p.clear(),document.body.removeChild(X.dom),re&&re(),Me&&Me(),k&&k()});const Ce=()=>{oe(),_e.refresh()};return(b,a)=>(Cr(),Nn("section",{ref_key:"wrapper",ref:i,class:"wrapper"},[Bo(xs,{name:"fade"},{default:zn(()=>[M.value?(Cr(),Fn(ki,{key:0,progress:f.value},null,8,["progress"])):ys("",!0)]),_:1}),ao("div",{ref_key:"tunnelWrapper",ref:n,class:"tunnel-wrapper"},null,512)],512))}}),Li=Yn(Oi,[["__scopeId","data-v-620cb858"]]),Bi={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Ni={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},zi={class:"overflow-hidden"},Yi=en({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(s){return(e,r)=>(Cr(),Fn(Vs,null,{default:zn(()=>[Bo(bs(Ts),{title:"Welcome"}),ao("div",Bi,[ao("nav",Ni,[Bo(Ws)]),ao("div",zi,[Bo(Li,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),r[0]||(r[0]=ao("div",{class:"flex justify-center items-center"},null,-1)),r[1]||(r[1]=ao("div",{class:"flex justify-center items-center"},null,-1)),Bo(Xs)])]),_:1}))}});export{Yi as default};
