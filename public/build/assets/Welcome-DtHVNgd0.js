import{J as is,W as os,I as ji,e as Vi,o as gi,a as Jt,t as ss,d as $t,x as ns,y as as,b as Mr,T as ls,w as cs,c as us,f as fs,u as ps,m as hs,F as ds}from"./app-BIic8dF5.js";import{M as Et,O as gs,B as ms,F as io,S as pr,U as Oi,V as dt,W as ai,H as li,N as _s,C as vs,a as It,b as ht,A as ws,c as Fi,d as ys,e as xs,f as bs,R as Ss,g as Ts,h as Qt,i as lt,j as Sr,k as He,l as Cs,E as Si,m as Ti,n as Ps,o as Ms,p as oo,P as so,D as no,Q as Es,q as Mn,r as En,s as An,t as Rn,u as Dn,v as As,w as Rs,x as Ds,y as ks,z as zs,T as Os,L as Fs,G as Is}from"./GlobalFooter-cdY2cqXu.js";import{_ as Ao}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ro=is("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(s,e){s.isMobile=e}},actions:{setActiveProject(s){this.activeProjectSlug=s},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(s){this.scrollPosition=s,console.log("Scroll position stored:",s)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function Bs(s,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Ls(s,e,i){return e&&Bs(s.prototype,e),s}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ne,ci,pt,Ut,Gt,dr,Do,qt,zr,ko,Bt,St,zo,Oo=function(){return Ne||typeof window<"u"&&(Ne=window.gsap)&&Ne.registerPlugin&&Ne},Fo=1,hr=[],j=[],Dt=[],Or=Date.now,Ii=function(e,i){return i},Hs=function(){var e=zr.core,i=e.bridge||{},t=e._scrollers,r=e._proxies;t.push.apply(t,j),r.push.apply(r,Dt),j=t,Dt=r,Ii=function(n,a){return i[n](a)}},Yt=function(e,i){return~Dt.indexOf(e)&&Dt[Dt.indexOf(e)+1][i]},Fr=function(e){return!!~ko.indexOf(e)},Ke=function(e,i,t,r,o){return e.addEventListener(i,t,{passive:r!==!1,capture:!!o})},qe=function(e,i,t,r){return e.removeEventListener(i,t,!!r)},Zr="scrollLeft",$r="scrollTop",Bi=function(){return Bt&&Bt.isPressed||j.cache++},mi=function(e,i){var t=function r(o){if(o||o===0){Fo&&(pt.history.scrollRestoration="manual");var n=Bt&&Bt.isPressed;o=r.v=Math.round(o)||(Bt&&Bt.iOS?1:0),e(o),r.cacheID=j.cache,n&&Ii("ss",o)}else(i||j.cache!==r.cacheID||Ii("ref"))&&(r.cacheID=j.cache,r.v=e());return r.v+r.offset};return t.offset=0,e&&t},rt={s:Zr,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:mi(function(s){return arguments.length?pt.scrollTo(s,De.sc()):pt.pageXOffset||Ut[Zr]||Gt[Zr]||dr[Zr]||0})},De={s:$r,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:rt,sc:mi(function(s){return arguments.length?pt.scrollTo(rt.sc(),s):pt.pageYOffset||Ut[$r]||Gt[$r]||dr[$r]||0})},st=function(e,i){return(i&&i._ctx&&i._ctx.selector||Ne.utils.toArray)(e)[0]||(typeof e=="string"&&Ne.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Wt=function(e,i){var t=i.s,r=i.sc;Fr(e)&&(e=Ut.scrollingElement||Gt);var o=j.indexOf(e),n=r===De.sc?1:2;!~o&&(o=j.push(e)-1),j[o+n]||Ke(e,"scroll",Bi);var a=j[o+n],f=a||(j[o+n]=mi(Yt(e,t),!0)||(Fr(e)?r:mi(function(m){return arguments.length?e[t]=m:e[t]})));return f.target=e,a||(f.smooth=Ne.getProperty(e,"scrollBehavior")==="smooth"),f},Li=function(e,i,t){var r=e,o=e,n=Or(),a=n,f=i||50,m=Math.max(500,f*3),g=function(d,T){var _=Or();T||_-n>f?(o=r,r=d,a=n,n=_):t?r+=d:r=o+(d-o)/(_-a)*(n-a)},h=function(){o=r=t?0:r,a=n=0},p=function(d){var T=a,_=o,H=Or();return(d||d===0)&&d!==r&&g(d),n===a||H-a>m?0:(r+(t?_:-_))/((t?H:n)-T)*1e3};return{update:g,reset:h,getVelocity:p}},Tr=function(e,i){return i&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},ao=function(e){var i=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(i)>=Math.abs(t)?i:t},Io=function(){zr=Ne.core.globals().ScrollTrigger,zr&&zr.core&&Hs()},Bo=function(e){return Ne=e||Oo(),!ci&&Ne&&typeof document<"u"&&document.body&&(pt=window,Ut=document,Gt=Ut.documentElement,dr=Ut.body,ko=[pt,Ut,Gt,dr],Ne.utils.clamp,zo=Ne.core.context||function(){},qt="onpointerenter"in dr?"pointer":"mouse",Do=Me.isTouch=pt.matchMedia&&pt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in pt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,St=Me.eventTypes=("ontouchstart"in Gt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Gt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Fo=0},500),Io(),ci=1),ci};rt.op=De;j.cache=0;var Me=function(){function s(i){this.init(i)}var e=s.prototype;return e.init=function(t){ci||Bo(Ne)||console.warn("Please gsap.registerPlugin(Observer)"),zr||Io();var r=t.tolerance,o=t.dragMinimum,n=t.type,a=t.target,f=t.lineHeight,m=t.debounce,g=t.preventDefault,h=t.onStop,p=t.onStopDelay,u=t.ignore,d=t.wheelSpeed,T=t.event,_=t.onDragStart,H=t.onDragEnd,J=t.onDrag,we=t.onPress,S=t.onRelease,Ue=t.onRight,ae=t.onLeft,P=t.onUp,ye=t.onDown,de=t.onChangeX,x=t.onChangeY,ee=t.onChange,b=t.onToggleX,ke=t.onToggleY,ce=t.onHover,N=t.onHoverEnd,Q=t.onMove,R=t.ignoreCheck,q=t.isNormalizer,Z=t.onGestureStart,l=t.onGestureEnd,W=t.onWheel,nt=t.onEnable,kt=t.onDisable,D=t.onClick,te=t.scrollSpeed,oe=t.capture,M=t.allowClicks,re=t.lockAxis,ue=t.onLockAxis;this.target=a=st(a)||Gt,this.vars=t,u&&(u=Ne.utils.toArray(u)),r=r||1e-9,o=o||0,d=d||1,te=te||1,n=n||"wheel,touch,pointer",m=m!==!1,f||(f=parseFloat(pt.getComputedStyle(dr).lineHeight)||22);var V,K,F,w,E,se,I,c=this,le=0,ge=0,me=t.passive||!g&&t.passive!==!1,G=Wt(a,rt),he=Wt(a,De),$e=G(),Ge=he(),U=~n.indexOf("touch")&&!~n.indexOf("pointer")&&St[0]==="pointerdown",it=Fr(a),xe=a.ownerDocument||Ut,_e=[0,0,0],ze=[0,0,0],vt=0,Ht=function(){return vt=Or()},Te=function(A,ie){return(c.event=A)&&u&&~u.indexOf(A.target)||ie&&U&&A.pointerType!=="touch"||R&&R(A,ie)},Xt=function(){c._vx.reset(),c._vy.reset(),K.pause(),h&&h(c)},be=function(){var A=c.deltaX=ao(_e),ie=c.deltaY=ao(ze),v=Math.abs(A)>=r,z=Math.abs(ie)>=r;ee&&(v||z)&&ee(c,A,ie,_e,ze),v&&(Ue&&c.deltaX>0&&Ue(c),ae&&c.deltaX<0&&ae(c),de&&de(c),b&&c.deltaX<0!=le<0&&b(c),le=c.deltaX,_e[0]=_e[1]=_e[2]=0),z&&(ye&&c.deltaY>0&&ye(c),P&&c.deltaY<0&&P(c),x&&x(c),ke&&c.deltaY<0!=ge<0&&ke(c),ge=c.deltaY,ze[0]=ze[1]=ze[2]=0),(w||F)&&(Q&&Q(c),F&&(_&&F===1&&_(c),J&&J(c),F=0),w=!1),se&&!(se=!1)&&ue&&ue(c),E&&(W(c),E=!1),V=0},Tt=function(A,ie,v){_e[v]+=A,ze[v]+=ie,c._vx.update(A),c._vy.update(ie),m?V||(V=requestAnimationFrame(be)):be()},Qe=function(A,ie){re&&!I&&(c.axis=I=Math.abs(A)>Math.abs(ie)?"x":"y",se=!0),I!=="y"&&(_e[2]+=A,c._vx.update(A,!0)),I!=="x"&&(ze[2]+=ie,c._vy.update(ie,!0)),m?V||(V=requestAnimationFrame(be)):be()},ot=function(A){if(!Te(A,1)){A=Tr(A,g);var ie=A.clientX,v=A.clientY,z=ie-c.x,C=v-c.y,O=c.isDragging;c.x=ie,c.y=v,(O||(z||C)&&(Math.abs(c.startX-ie)>=o||Math.abs(c.startY-v)>=o))&&(F=O?2:1,O||(c.isDragging=!0),Qe(z,C))}},zt=c.onPress=function(B){Te(B,1)||B&&B.button||(c.axis=I=null,K.pause(),c.isPressed=!0,B=Tr(B),le=ge=0,c.startX=c.x=B.clientX,c.startY=c.y=B.clientY,c._vx.reset(),c._vy.reset(),Ke(q?a:xe,St[1],ot,me,!0),c.deltaX=c.deltaY=0,we&&we(c))},k=c.onRelease=function(B){if(!Te(B,1)){qe(q?a:xe,St[1],ot,!0);var A=!isNaN(c.y-c.startY),ie=c.isDragging,v=ie&&(Math.abs(c.x-c.startX)>3||Math.abs(c.y-c.startY)>3),z=Tr(B);!v&&A&&(c._vx.reset(),c._vy.reset(),g&&M&&Ne.delayedCall(.08,function(){if(Or()-vt>300&&!B.defaultPrevented){if(B.target.click)B.target.click();else if(xe.createEvent){var C=xe.createEvent("MouseEvents");C.initMouseEvent("click",!0,!0,pt,1,z.screenX,z.screenY,z.clientX,z.clientY,!1,!1,!1,!1,0,null),B.target.dispatchEvent(C)}}})),c.isDragging=c.isGesturing=c.isPressed=!1,h&&ie&&!q&&K.restart(!0),F&&be(),H&&ie&&H(c),S&&S(c,v)}},jt=function(A){return A.touches&&A.touches.length>1&&(c.isGesturing=!0)&&Z(A,c.isDragging)},wt=function(){return(c.isGesturing=!1)||l(c)},yt=function(A){if(!Te(A)){var ie=G(),v=he();Tt((ie-$e)*te,(v-Ge)*te,1),$e=ie,Ge=v,h&&K.restart(!0)}},xt=function(A){if(!Te(A)){A=Tr(A,g),W&&(E=!0);var ie=(A.deltaMode===1?f:A.deltaMode===2?pt.innerHeight:1)*d;Tt(A.deltaX*ie,A.deltaY*ie,0),h&&!q&&K.restart(!0)}},Vt=function(A){if(!Te(A)){var ie=A.clientX,v=A.clientY,z=ie-c.x,C=v-c.y;c.x=ie,c.y=v,w=!0,h&&K.restart(!0),(z||C)&&Qe(z,C)}},ar=function(A){c.event=A,ce(c)},Ot=function(A){c.event=A,N(c)},wr=function(A){return Te(A)||Tr(A,g)&&D(c)};K=c._dc=Ne.delayedCall(p||.25,Xt).pause(),c.deltaX=c.deltaY=0,c._vx=Li(0,50,!0),c._vy=Li(0,50,!0),c.scrollX=G,c.scrollY=he,c.isDragging=c.isGesturing=c.isPressed=!1,zo(this),c.enable=function(B){return c.isEnabled||(Ke(it?xe:a,"scroll",Bi),n.indexOf("scroll")>=0&&Ke(it?xe:a,"scroll",yt,me,oe),n.indexOf("wheel")>=0&&Ke(a,"wheel",xt,me,oe),(n.indexOf("touch")>=0&&Do||n.indexOf("pointer")>=0)&&(Ke(a,St[0],zt,me,oe),Ke(xe,St[2],k),Ke(xe,St[3],k),M&&Ke(a,"click",Ht,!0,!0),D&&Ke(a,"click",wr),Z&&Ke(xe,"gesturestart",jt),l&&Ke(xe,"gestureend",wt),ce&&Ke(a,qt+"enter",ar),N&&Ke(a,qt+"leave",Ot),Q&&Ke(a,qt+"move",Vt)),c.isEnabled=!0,c.isDragging=c.isGesturing=c.isPressed=w=F=!1,c._vx.reset(),c._vy.reset(),$e=G(),Ge=he(),B&&B.type&&zt(B),nt&&nt(c)),c},c.disable=function(){c.isEnabled&&(hr.filter(function(B){return B!==c&&Fr(B.target)}).length||qe(it?xe:a,"scroll",Bi),c.isPressed&&(c._vx.reset(),c._vy.reset(),qe(q?a:xe,St[1],ot,!0)),qe(it?xe:a,"scroll",yt,oe),qe(a,"wheel",xt,oe),qe(a,St[0],zt,oe),qe(xe,St[2],k),qe(xe,St[3],k),qe(a,"click",Ht,!0),qe(a,"click",wr),qe(xe,"gesturestart",jt),qe(xe,"gestureend",wt),qe(a,qt+"enter",ar),qe(a,qt+"leave",Ot),qe(a,qt+"move",Vt),c.isEnabled=c.isPressed=c.isDragging=!1,kt&&kt(c))},c.kill=c.revert=function(){c.disable();var B=hr.indexOf(c);B>=0&&hr.splice(B,1),Bt===c&&(Bt=0)},hr.push(c),q&&Fr(a)&&(Bt=c),c.enable(T)},Ls(s,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),s}();Me.version="3.12.7";Me.create=function(s){return new Me(s)};Me.register=Bo;Me.getAll=function(){return hr.slice()};Me.getById=function(s){return hr.filter(function(e){return e.vars.id===s})[0]};Oo()&&Ne.registerPlugin(Me);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var y,ur,X,pe,ft,ne,Zi,_i,Yr,Ir,Er,Qr,je,xi,Hi,et,lo,co,fr,Lo,Ci,Ho,Je,Ni,No,Uo,Nt,Ui,$i,gr,Qi,vi,Gi,Pi,qr=1,Ve=Date.now,Mi=Ve(),_t=0,Ar=0,uo=function(e,i,t){var r=ut(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+i+"Clamp"]=r,r?e.substr(6,e.length-7):e},fo=function(e,i){return i&&(!ut(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Ns=function s(){return Ar&&requestAnimationFrame(s)},po=function(){return xi=1},ho=function(){return xi=0},At=function(e){return e},Rr=function(e){return Math.round(e*1e5)/1e5||0},Go=function(){return typeof window<"u"},Yo=function(){return y||Go()&&(y=window.gsap)&&y.registerPlugin&&y},or=function(e){return!!~Zi.indexOf(e)},Wo=function(e){return(e==="Height"?Qi:X["inner"+e])||ft["client"+e]||ne["client"+e]},Xo=function(e){return Yt(e,"getBoundingClientRect")||(or(e)?function(){return di.width=X.innerWidth,di.height=Qi,di}:function(){return Ft(e)})},Us=function(e,i,t){var r=t.d,o=t.d2,n=t.a;return(n=Yt(e,"getBoundingClientRect"))?function(){return n()[r]}:function(){return(i?Wo(o):e["client"+o])||0}},Gs=function(e,i){return!i||~Dt.indexOf(e)?Xo(e):function(){return di}},Rt=function(e,i){var t=i.s,r=i.d2,o=i.d,n=i.a;return Math.max(0,(t="scroll"+r)&&(n=Yt(e,t))?n()-Xo(e)()[o]:or(e)?(ft[t]||ne[t])-Wo(r):e[t]-e["offset"+r])},Kr=function(e,i){for(var t=0;t<fr.length;t+=3)(!i||~i.indexOf(fr[t+1]))&&e(fr[t],fr[t+1],fr[t+2])},ut=function(e){return typeof e=="string"},Ze=function(e){return typeof e=="function"},Dr=function(e){return typeof e=="number"},Kt=function(e){return typeof e=="object"},Cr=function(e,i,t){return e&&e.progress(i?0:1)&&t&&e.pause()},Ei=function(e,i){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return i(e)}):i(e);t&&t.totalTime&&(e.callbackAnimation=t)}},lr=Math.abs,jo="left",Vo="top",qi="right",Ki="bottom",tr="width",rr="height",Br="Right",Lr="Left",Hr="Top",Nr="Bottom",Ee="padding",gt="margin",_r="Width",Ji="Height",Re="px",mt=function(e){return X.getComputedStyle(e)},Ys=function(e){var i=mt(e).position;e.style.position=i==="absolute"||i==="fixed"?i:"relative"},go=function(e,i){for(var t in i)t in e||(e[t]=i[t]);return e},Ft=function(e,i){var t=i&&mt(e)[Hi]!=="matrix(1, 0, 0, 1, 0, 0)"&&y.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return t&&t.progress(0).kill(),r},wi=function(e,i){var t=i.d2;return e["offset"+t]||e["client"+t]||0},Zo=function(e){var i=[],t=e.labels,r=e.duration(),o;for(o in t)i.push(t[o]/r);return i},Ws=function(e){return function(i){return y.utils.snap(Zo(e),i)}},eo=function(e){var i=y.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(r,o){return r-o});return t?function(r,o,n){n===void 0&&(n=.001);var a;if(!o)return i(r);if(o>0){for(r-=n,a=0;a<t.length;a++)if(t[a]>=r)return t[a];return t[a-1]}else for(a=t.length,r+=n;a--;)if(t[a]<=r)return t[a];return t[0]}:function(r,o,n){n===void 0&&(n=.001);var a=i(r);return!o||Math.abs(a-r)<n||a-r<0==o<0?a:i(o<0?r-e:r+e)}},Xs=function(e){return function(i,t){return eo(Zo(e))(i,t.direction)}},Jr=function(e,i,t,r){return t.split(",").forEach(function(o){return e(i,o,r)})},Ie=function(e,i,t,r,o){return e.addEventListener(i,t,{passive:!r,capture:!!o})},Fe=function(e,i,t,r){return e.removeEventListener(i,t,!!r)},ei=function(e,i,t){t=t&&t.wheelHandler,t&&(e(i,"wheel",t),e(i,"touchmove",t))},mo={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ti={toggleActions:"play",anticipatePin:0},yi={top:0,left:0,center:.5,bottom:1,right:1},ui=function(e,i){if(ut(e)){var t=e.indexOf("="),r=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(r*=i/100),e=e.substr(0,t-1)),e=r+(e in yi?yi[e]*i:~e.indexOf("%")?parseFloat(e)*i/100:parseFloat(e)||0)}return e},ri=function(e,i,t,r,o,n,a,f){var m=o.startColor,g=o.endColor,h=o.fontSize,p=o.indent,u=o.fontWeight,d=pe.createElement("div"),T=or(t)||Yt(t,"pinType")==="fixed",_=e.indexOf("scroller")!==-1,H=T?ne:t,J=e.indexOf("start")!==-1,we=J?m:g,S="border-color:"+we+";font-size:"+h+";color:"+we+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return S+="position:"+((_||f)&&T?"fixed;":"absolute;"),(_||f||!T)&&(S+=(r===De?qi:Ki)+":"+(n+parseFloat(p))+"px;"),a&&(S+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),d._isStart=J,d.setAttribute("class","gsap-marker-"+e+(i?" marker-"+i:"")),d.style.cssText=S,d.innerText=i||i===0?e+"-"+i:e,H.children[0]?H.insertBefore(d,H.children[0]):H.appendChild(d),d._offset=d["offset"+r.op.d2],fi(d,0,r,J),d},fi=function(e,i,t,r){var o={display:"block"},n=t[r?"os2":"p2"],a=t[r?"p2":"os2"];e._isFlipped=r,o[t.a+"Percent"]=r?-100:0,o[t.a]=r?"1px":0,o["border"+n+_r]=1,o["border"+a+_r]=0,o[t.p]=i+"px",y.set(e,o)},Y=[],Yi={},Wr,_o=function(){return Ve()-_t>34&&(Wr||(Wr=requestAnimationFrame(Lt)))},cr=function(){(!Je||!Je.isPressed||Je.startX>ne.clientWidth)&&(j.cache++,Je?Wr||(Wr=requestAnimationFrame(Lt)):Lt(),_t||nr("scrollStart"),_t=Ve())},Ai=function(){Uo=X.innerWidth,No=X.innerHeight},kr=function(e){j.cache++,(e===!0||!je&&!Ho&&!pe.fullscreenElement&&!pe.webkitFullscreenElement&&(!Ni||Uo!==X.innerWidth||Math.abs(X.innerHeight-No)>X.innerHeight*.25))&&_i.restart(!0)},sr={},js=[],$o=function s(){return Fe(L,"scrollEnd",s)||er(!0)},nr=function(e){return sr[e]&&sr[e].map(function(i){return i()})||js},ct=[],Qo=function(e){for(var i=0;i<ct.length;i+=5)(!e||ct[i+4]&&ct[i+4].query===e)&&(ct[i].style.cssText=ct[i+1],ct[i].getBBox&&ct[i].setAttribute("transform",ct[i+2]||""),ct[i+3].uncache=1)},to=function(e,i){var t;for(et=0;et<Y.length;et++)t=Y[et],t&&(!i||t._ctx===i)&&(e?t.kill(1):t.revert(!0,!0));vi=!0,i&&Qo(i),i||nr("revert")},qo=function(e,i){j.cache++,(i||!tt)&&j.forEach(function(t){return Ze(t)&&t.cacheID++&&(t.rec=0)}),ut(e)&&(X.history.scrollRestoration=$i=e)},tt,ir=0,vo,Vs=function(){if(vo!==ir){var e=vo=ir;requestAnimationFrame(function(){return e===ir&&er(!0)})}},Ko=function(){ne.appendChild(gr),Qi=!Je&&gr.offsetHeight||X.innerHeight,ne.removeChild(gr)},wo=function(e){return Yr(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(i){return i.style.display=e?"none":"block"})},er=function(e,i){if(ft=pe.documentElement,ne=pe.body,Zi=[X,pe,ft,ne],_t&&!e&&!vi){Ie(L,"scrollEnd",$o);return}Ko(),tt=L.isRefreshing=!0,j.forEach(function(r){return Ze(r)&&++r.cacheID&&(r.rec=r())});var t=nr("refreshInit");Lo&&L.sort(),i||to(),j.forEach(function(r){Ze(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),Y.slice(0).forEach(function(r){return r.refresh()}),vi=!1,Y.forEach(function(r){if(r._subPinOffset&&r.pin){var o=r.vars.horizontal?"offsetWidth":"offsetHeight",n=r.pin[o];r.revert(!0,1),r.adjustPinSpacing(r.pin[o]-n),r.refresh()}}),Gi=1,wo(!0),Y.forEach(function(r){var o=Rt(r.scroller,r._dir),n=r.vars.end==="max"||r._endClamp&&r.end>o,a=r._startClamp&&r.start>=o;(n||a)&&r.setPositions(a?o-1:r.start,n?Math.max(a?o:r.start+1,o):r.end,!0)}),wo(!1),Gi=0,t.forEach(function(r){return r&&r.render&&r.render(-1)}),j.forEach(function(r){Ze(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),qo($i,1),_i.pause(),ir++,tt=2,Lt(2),Y.forEach(function(r){return Ze(r.vars.onRefresh)&&r.vars.onRefresh(r)}),tt=L.isRefreshing=!1,nr("refresh")},Wi=0,pi=1,Ur,Lt=function(e){if(e===2||!tt&&!vi){L.isUpdating=!0,Ur&&Ur.update(0);var i=Y.length,t=Ve(),r=t-Mi>=50,o=i&&Y[0].scroll();if(pi=Wi>o?-1:1,tt||(Wi=o),r&&(_t&&!xi&&t-_t>200&&(_t=0,nr("scrollEnd")),Er=Mi,Mi=t),pi<0){for(et=i;et-- >0;)Y[et]&&Y[et].update(0,r);pi=1}else for(et=0;et<i;et++)Y[et]&&Y[et].update(0,r);L.isUpdating=!1}Wr=0},Xi=[jo,Vo,Ki,qi,gt+Nr,gt+Br,gt+Hr,gt+Lr,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],hi=Xi.concat([tr,rr,"boxSizing","max"+_r,"max"+Ji,"position",gt,Ee,Ee+Hr,Ee+Br,Ee+Nr,Ee+Lr]),Zs=function(e,i,t){mr(t);var r=e._gsap;if(r.spacerIsNative)mr(r.spacerState);else if(e._gsap.swappedIn){var o=i.parentNode;o&&(o.insertBefore(e,i),o.removeChild(i))}e._gsap.swappedIn=!1},Ri=function(e,i,t,r){if(!e._gsap.swappedIn){for(var o=Xi.length,n=i.style,a=e.style,f;o--;)f=Xi[o],n[f]=t[f];n.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(n.display="inline-block"),a[Ki]=a[qi]="auto",n.flexBasis=t.flexBasis||"auto",n.overflow="visible",n.boxSizing="border-box",n[tr]=wi(e,rt)+Re,n[rr]=wi(e,De)+Re,n[Ee]=a[gt]=a[Vo]=a[jo]="0",mr(r),a[tr]=a["max"+_r]=t[tr],a[rr]=a["max"+Ji]=t[rr],a[Ee]=t[Ee],e.parentNode!==i&&(e.parentNode.insertBefore(i,e),i.appendChild(e)),e._gsap.swappedIn=!0}},$s=/([A-Z])/g,mr=function(e){if(e){var i=e.t.style,t=e.length,r=0,o,n;for((e.t._gsap||y.core.getCache(e.t)).uncache=1;r<t;r+=2)n=e[r+1],o=e[r],n?i[o]=n:i[o]&&i.removeProperty(o.replace($s,"-$1").toLowerCase())}},ii=function(e){for(var i=hi.length,t=e.style,r=[],o=0;o<i;o++)r.push(hi[o],t[hi[o]]);return r.t=e,r},Qs=function(e,i,t){for(var r=[],o=e.length,n=t?8:0,a;n<o;n+=2)a=e[n],r.push(a,a in i?i[a]:e[n+1]);return r.t=e.t,r},di={left:0,top:0},yo=function(e,i,t,r,o,n,a,f,m,g,h,p,u,d){Ze(e)&&(e=e(f)),ut(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?ui("0"+e.substr(3),t):0));var T=u?u.time():0,_,H,J;if(u&&u.seek(0),isNaN(e)||(e=+e),Dr(e))u&&(e=y.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,p,e)),a&&fi(a,t,r,!0);else{Ze(i)&&(i=i(f));var we=(e||"0").split(" "),S,Ue,ae,P;J=st(i,f)||ne,S=Ft(J)||{},(!S||!S.left&&!S.top)&&mt(J).display==="none"&&(P=J.style.display,J.style.display="block",S=Ft(J),P?J.style.display=P:J.style.removeProperty("display")),Ue=ui(we[0],S[r.d]),ae=ui(we[1]||"0",t),e=S[r.p]-m[r.p]-g+Ue+o-ae,a&&fi(a,ae,r,t-ae<20||a._isStart&&ae>20),t-=t-ae}if(d&&(f[d]=e||-.001,e<0&&(e=0)),n){var ye=e+t,de=n._isStart;_="scroll"+r.d2,fi(n,ye,r,de&&ye>20||!de&&(h?Math.max(ne[_],ft[_]):n.parentNode[_])<=ye+1),h&&(m=Ft(a),h&&(n.style[r.op.p]=m[r.op.p]-r.op.m-n._offset+Re))}return u&&J&&(_=Ft(J),u.seek(p),H=Ft(J),u._caScrollDist=_[r.p]-H[r.p],e=e/u._caScrollDist*p),u&&u.seek(T),u?e:Math.round(e)},qs=/(webkit|moz|length|cssText|inset)/i,xo=function(e,i,t,r){if(e.parentNode!==i){var o=e.style,n,a;if(i===ne){e._stOrig=o.cssText,a=mt(e);for(n in a)!+n&&!qs.test(n)&&a[n]&&typeof o[n]=="string"&&n!=="0"&&(o[n]=a[n]);o.top=t,o.left=r}else o.cssText=e._stOrig;y.core.getCache(e).uncache=1,i.appendChild(e)}},Jo=function(e,i,t){var r=i,o=r;return function(n){var a=Math.round(e());return a!==r&&a!==o&&Math.abs(a-r)>3&&Math.abs(a-o)>3&&(n=a,t&&t()),o=r,r=Math.round(n),r}},oi=function(e,i,t){var r={};r[i.p]="+="+t,y.set(e,r)},bo=function(e,i){var t=Wt(e,i),r="_scroll"+i.p2,o=function n(a,f,m,g,h){var p=n.tween,u=f.onComplete,d={};m=m||t();var T=Jo(t,m,function(){p.kill(),n.tween=0});return h=g&&h||0,g=g||a-m,p&&p.kill(),f[r]=a,f.inherit=!1,f.modifiers=d,d[r]=function(){return T(m+g*p.ratio+h*p.ratio*p.ratio)},f.onUpdate=function(){j.cache++,n.tween&&Lt()},f.onComplete=function(){n.tween=0,u&&u.call(p)},p=n.tween=y.to(e,f),p};return e[r]=t,t.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},Ie(e,"wheel",t.wheelHandler),L.isTouch&&Ie(e,"touchmove",t.wheelHandler),o},L=function(){function s(i,t){ur||s.register(y)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Ui(this),this.init(i,t)}var e=s.prototype;return e.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Ar){this.update=this.refresh=this.kill=At;return}t=go(ut(t)||Dr(t)||t.nodeType?{trigger:t}:t,ti);var o=t,n=o.onUpdate,a=o.toggleClass,f=o.id,m=o.onToggle,g=o.onRefresh,h=o.scrub,p=o.trigger,u=o.pin,d=o.pinSpacing,T=o.invalidateOnRefresh,_=o.anticipatePin,H=o.onScrubComplete,J=o.onSnapComplete,we=o.once,S=o.snap,Ue=o.pinReparent,ae=o.pinSpacer,P=o.containerAnimation,ye=o.fastScrollEnd,de=o.preventOverlaps,x=t.horizontal||t.containerAnimation&&t.horizontal!==!1?rt:De,ee=!h&&h!==0,b=st(t.scroller||X),ke=y.core.getCache(b),ce=or(b),N=("pinType"in t?t.pinType:Yt(b,"pinType")||ce&&"fixed")==="fixed",Q=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],R=ee&&t.toggleActions.split(" "),q="markers"in t?t.markers:ti.markers,Z=ce?0:parseFloat(mt(b)["border"+x.p2+_r])||0,l=this,W=t.onRefreshInit&&function(){return t.onRefreshInit(l)},nt=Us(b,ce,x),kt=Gs(b,ce),D=0,te=0,oe=0,M=Wt(b,x),re,ue,V,K,F,w,E,se,I,c,le,ge,me,G,he,$e,Ge,U,it,xe,_e,ze,vt,Ht,Te,Xt,be,Tt,Qe,ot,zt,k,jt,wt,yt,xt,Vt,ar,Ot;if(l._startClamp=l._endClamp=!1,l._dir=x,_*=45,l.scroller=b,l.scroll=P?P.time.bind(P):M,K=M(),l.vars=t,r=r||t.animation,"refreshPriority"in t&&(Lo=1,t.refreshPriority===-9999&&(Ur=l)),ke.tweenScroll=ke.tweenScroll||{top:bo(b,De),left:bo(b,rt)},l.tweenTo=re=ke.tweenScroll[x.p],l.scrubDuration=function(v){jt=Dr(v)&&v,jt?k?k.duration(v):k=y.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:jt,paused:!0,onComplete:function(){return H&&H(l)}}):(k&&k.progress(1).kill(),k=0)},r&&(r.vars.lazy=!1,r._initted&&!l.isReverted||r.vars.immediateRender!==!1&&t.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),l.animation=r.pause(),r.scrollTrigger=l,l.scrubDuration(h),ot=0,f||(f=r.vars.id)),S&&((!Kt(S)||S.push)&&(S={snapTo:S}),"scrollBehavior"in ne.style&&y.set(ce?[ne,ft]:b,{scrollBehavior:"auto"}),j.forEach(function(v){return Ze(v)&&v.target===(ce?pe.scrollingElement||ft:b)&&(v.smooth=!1)}),V=Ze(S.snapTo)?S.snapTo:S.snapTo==="labels"?Ws(r):S.snapTo==="labelsDirectional"?Xs(r):S.directional!==!1?function(v,z){return eo(S.snapTo)(v,Ve()-te<500?0:z.direction)}:y.utils.snap(S.snapTo),wt=S.duration||{min:.1,max:2},wt=Kt(wt)?Ir(wt.min,wt.max):Ir(wt,wt),yt=y.delayedCall(S.delay||jt/2||.1,function(){var v=M(),z=Ve()-te<500,C=re.tween;if((z||Math.abs(l.getVelocity())<10)&&!C&&!xi&&D!==v){var O=(v-w)/G,Oe=r&&!ee?r.totalProgress():O,$=z?0:(Oe-zt)/(Ve()-Er)*1e3||0,Pe=y.utils.clamp(-O,1-O,lr($/2)*$/.185),Ye=O+(S.inertia===!1?0:Pe),Ce,ve,fe=S,bt=fe.onStart,Se=fe.onInterrupt,at=fe.onComplete;if(Ce=V(Ye,l),Dr(Ce)||(Ce=Ye),ve=Math.max(0,Math.round(w+Ce*G)),v<=E&&v>=w&&ve!==v){if(C&&!C._initted&&C.data<=lr(ve-v))return;S.inertia===!1&&(Pe=Ce-O),re(ve,{duration:wt(lr(Math.max(lr(Ye-Oe),lr(Ce-Oe))*.185/$/.05||0)),ease:S.ease||"power3",data:lr(ve-v),onInterrupt:function(){return yt.restart(!0)&&Se&&Se(l)},onComplete:function(){l.update(),D=M(),r&&!ee&&(k?k.resetTo("totalProgress",Ce,r._tTime/r._tDur):r.progress(Ce)),ot=zt=r&&!ee?r.totalProgress():l.progress,J&&J(l),at&&at(l)}},v,Pe*G,ve-v-Pe*G),bt&&bt(l,re.tween)}}else l.isActive&&D!==v&&yt.restart(!0)}).pause()),f&&(Yi[f]=l),p=l.trigger=st(p||u!==!0&&u),Ot=p&&p._gsap&&p._gsap.stRevert,Ot&&(Ot=Ot(l)),u=u===!0?p:st(u),ut(a)&&(a={targets:p,className:a}),u&&(d===!1||d===gt||(d=!d&&u.parentNode&&u.parentNode.style&&mt(u.parentNode).display==="flex"?!1:Ee),l.pin=u,ue=y.core.getCache(u),ue.spacer?he=ue.pinState:(ae&&(ae=st(ae),ae&&!ae.nodeType&&(ae=ae.current||ae.nativeElement),ue.spacerIsNative=!!ae,ae&&(ue.spacerState=ii(ae))),ue.spacer=U=ae||pe.createElement("div"),U.classList.add("pin-spacer"),f&&U.classList.add("pin-spacer-"+f),ue.pinState=he=ii(u)),t.force3D!==!1&&y.set(u,{force3D:!0}),l.spacer=U=ue.spacer,Qe=mt(u),Ht=Qe[d+x.os2],xe=y.getProperty(u),_e=y.quickSetter(u,x.a,Re),Ri(u,U,Qe),Ge=ii(u)),q){ge=Kt(q)?go(q,mo):mo,c=ri("scroller-start",f,b,x,ge,0),le=ri("scroller-end",f,b,x,ge,0,c),it=c["offset"+x.op.d2];var wr=st(Yt(b,"content")||b);se=this.markerStart=ri("start",f,wr,x,ge,it,0,P),I=this.markerEnd=ri("end",f,wr,x,ge,it,0,P),P&&(ar=y.quickSetter([se,I],x.a,Re)),!N&&!(Dt.length&&Yt(b,"fixedMarkers")===!0)&&(Ys(ce?ne:b),y.set([c,le],{force3D:!0}),Xt=y.quickSetter(c,x.a,Re),Tt=y.quickSetter(le,x.a,Re))}if(P){var B=P.vars.onUpdate,A=P.vars.onUpdateParams;P.eventCallback("onUpdate",function(){l.update(0,0,1),B&&B.apply(P,A||[])})}if(l.previous=function(){return Y[Y.indexOf(l)-1]},l.next=function(){return Y[Y.indexOf(l)+1]},l.revert=function(v,z){if(!z)return l.kill(!0);var C=v!==!1||!l.enabled,O=je;C!==l.isReverted&&(C&&(xt=Math.max(M(),l.scroll.rec||0),oe=l.progress,Vt=r&&r.progress()),se&&[se,I,c,le].forEach(function(Oe){return Oe.style.display=C?"none":"block"}),C&&(je=l,l.update(C)),u&&(!Ue||!l.isActive)&&(C?Zs(u,U,he):Ri(u,U,mt(u),Te)),C||l.update(C),je=O,l.isReverted=C)},l.refresh=function(v,z,C,O){if(!((je||!l.enabled)&&!z)){if(u&&v&&_t){Ie(s,"scrollEnd",$o);return}!tt&&W&&W(l),je=l,re.tween&&!C&&(re.tween.kill(),re.tween=0),k&&k.pause(),T&&r&&r.revert({kill:!1}).invalidate(),l.isReverted||l.revert(!0,!0),l._subPinOffset=!1;var Oe=nt(),$=kt(),Pe=P?P.duration():Rt(b,x),Ye=G<=.01,Ce=0,ve=O||0,fe=Kt(C)?C.end:t.end,bt=t.endTrigger||p,Se=Kt(C)?C.start:t.start||(t.start===0||!p?0:u?"0 0":"0 100%"),at=l.pinnedContainer=t.pinnedContainer&&st(t.pinnedContainer,l),Ct=p&&Math.max(0,Y.indexOf(l))||0,Be=Ct,Le,We,Zt,jr,Xe,Ae,Pt,bi,ro,yr,Mt,xr,Vr;for(q&&Kt(C)&&(xr=y.getProperty(c,x.p),Vr=y.getProperty(le,x.p));Be-- >0;)Ae=Y[Be],Ae.end||Ae.refresh(0,1)||(je=l),Pt=Ae.pin,Pt&&(Pt===p||Pt===u||Pt===at)&&!Ae.isReverted&&(yr||(yr=[]),yr.unshift(Ae),Ae.revert(!0,!0)),Ae!==Y[Be]&&(Ct--,Be--);for(Ze(Se)&&(Se=Se(l)),Se=uo(Se,"start",l),w=yo(Se,p,Oe,x,M(),se,c,l,$,Z,N,Pe,P,l._startClamp&&"_startClamp")||(u?-.001:0),Ze(fe)&&(fe=fe(l)),ut(fe)&&!fe.indexOf("+=")&&(~fe.indexOf(" ")?fe=(ut(Se)?Se.split(" ")[0]:"")+fe:(Ce=ui(fe.substr(2),Oe),fe=ut(Se)?Se:(P?y.utils.mapRange(0,P.duration(),P.scrollTrigger.start,P.scrollTrigger.end,w):w)+Ce,bt=p)),fe=uo(fe,"end",l),E=Math.max(w,yo(fe||(bt?"100% 0":Pe),bt,Oe,x,M()+Ce,I,le,l,$,Z,N,Pe,P,l._endClamp&&"_endClamp"))||-.001,Ce=0,Be=Ct;Be--;)Ae=Y[Be],Pt=Ae.pin,Pt&&Ae.start-Ae._pinPush<=w&&!P&&Ae.end>0&&(Le=Ae.end-(l._startClamp?Math.max(0,Ae.start):Ae.start),(Pt===p&&Ae.start-Ae._pinPush<w||Pt===at)&&isNaN(Se)&&(Ce+=Le*(1-Ae.progress)),Pt===u&&(ve+=Le));if(w+=Ce,E+=Ce,l._startClamp&&(l._startClamp+=Ce),l._endClamp&&!tt&&(l._endClamp=E||-.001,E=Math.min(E,Rt(b,x))),G=E-w||(w-=.01)&&.001,Ye&&(oe=y.utils.clamp(0,1,y.utils.normalize(w,E,xt))),l._pinPush=ve,se&&Ce&&(Le={},Le[x.a]="+="+Ce,at&&(Le[x.p]="-="+M()),y.set([se,I],Le)),u&&!(Gi&&l.end>=Rt(b,x)))Le=mt(u),jr=x===De,Zt=M(),ze=parseFloat(xe(x.a))+ve,!Pe&&E>1&&(Mt=(ce?pe.scrollingElement||ft:b).style,Mt={style:Mt,value:Mt["overflow"+x.a.toUpperCase()]},ce&&mt(ne)["overflow"+x.a.toUpperCase()]!=="scroll"&&(Mt.style["overflow"+x.a.toUpperCase()]="scroll")),Ri(u,U,Le),Ge=ii(u),We=Ft(u,!0),bi=N&&Wt(b,jr?rt:De)(),d?(Te=[d+x.os2,G+ve+Re],Te.t=U,Be=d===Ee?wi(u,x)+G+ve:0,Be&&(Te.push(x.d,Be+Re),U.style.flexBasis!=="auto"&&(U.style.flexBasis=Be+Re)),mr(Te),at&&Y.forEach(function(br){br.pin===at&&br.vars.pinSpacing!==!1&&(br._subPinOffset=!0)}),N&&M(xt)):(Be=wi(u,x),Be&&U.style.flexBasis!=="auto"&&(U.style.flexBasis=Be+Re)),N&&(Xe={top:We.top+(jr?Zt-w:bi)+Re,left:We.left+(jr?bi:Zt-w)+Re,boxSizing:"border-box",position:"fixed"},Xe[tr]=Xe["max"+_r]=Math.ceil(We.width)+Re,Xe[rr]=Xe["max"+Ji]=Math.ceil(We.height)+Re,Xe[gt]=Xe[gt+Hr]=Xe[gt+Br]=Xe[gt+Nr]=Xe[gt+Lr]="0",Xe[Ee]=Le[Ee],Xe[Ee+Hr]=Le[Ee+Hr],Xe[Ee+Br]=Le[Ee+Br],Xe[Ee+Nr]=Le[Ee+Nr],Xe[Ee+Lr]=Le[Ee+Lr],$e=Qs(he,Xe,Ue),tt&&M(0)),r?(ro=r._initted,Ci(1),r.render(r.duration(),!0,!0),vt=xe(x.a)-ze+G+ve,be=Math.abs(G-vt)>1,N&&be&&$e.splice($e.length-2,2),r.render(0,!0,!0),ro||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),Ci(0)):vt=G,Mt&&(Mt.value?Mt.style["overflow"+x.a.toUpperCase()]=Mt.value:Mt.style.removeProperty("overflow-"+x.a));else if(p&&M()&&!P)for(We=p.parentNode;We&&We!==ne;)We._pinOffset&&(w-=We._pinOffset,E-=We._pinOffset),We=We.parentNode;yr&&yr.forEach(function(br){return br.revert(!1,!0)}),l.start=w,l.end=E,K=F=tt?xt:M(),!P&&!tt&&(K<xt&&M(xt),l.scroll.rec=0),l.revert(!1,!0),te=Ve(),yt&&(D=-1,yt.restart(!0)),je=0,r&&ee&&(r._initted||Vt)&&r.progress()!==Vt&&r.progress(Vt||0,!0).render(r.time(),!0,!0),(Ye||oe!==l.progress||P||T||r&&!r._initted)&&(r&&!ee&&r.totalProgress(P&&w<-.001&&!oe?y.utils.normalize(w,E,0):oe,!0),l.progress=Ye||(K-w)/G===oe?0:oe),u&&d&&(U._pinOffset=Math.round(l.progress*vt)),k&&k.invalidate(),isNaN(xr)||(xr-=y.getProperty(c,x.p),Vr-=y.getProperty(le,x.p),oi(c,x,xr),oi(se,x,xr-(O||0)),oi(le,x,Vr),oi(I,x,Vr-(O||0))),Ye&&!tt&&l.update(),g&&!tt&&!me&&(me=!0,g(l),me=!1)}},l.getVelocity=function(){return(M()-F)/(Ve()-Er)*1e3||0},l.endAnimation=function(){Cr(l.callbackAnimation),r&&(k?k.progress(1):r.paused()?ee||Cr(r,l.direction<0,1):Cr(r,r.reversed()))},l.labelToScroll=function(v){return r&&r.labels&&(w||l.refresh()||w)+r.labels[v]/r.duration()*G||0},l.getTrailing=function(v){var z=Y.indexOf(l),C=l.direction>0?Y.slice(0,z).reverse():Y.slice(z+1);return(ut(v)?C.filter(function(O){return O.vars.preventOverlaps===v}):C).filter(function(O){return l.direction>0?O.end<=w:O.start>=E})},l.update=function(v,z,C){if(!(P&&!C&&!v)){var O=tt===!0?xt:l.scroll(),Oe=v?0:(O-w)/G,$=Oe<0?0:Oe>1?1:Oe||0,Pe=l.progress,Ye,Ce,ve,fe,bt,Se,at,Ct;if(z&&(F=K,K=P?M():O,S&&(zt=ot,ot=r&&!ee?r.totalProgress():$)),_&&u&&!je&&!qr&&_t&&(!$&&w<O+(O-F)/(Ve()-Er)*_?$=1e-4:$===1&&E>O+(O-F)/(Ve()-Er)*_&&($=.9999)),$!==Pe&&l.enabled){if(Ye=l.isActive=!!$&&$<1,Ce=!!Pe&&Pe<1,Se=Ye!==Ce,bt=Se||!!$!=!!Pe,l.direction=$>Pe?1:-1,l.progress=$,bt&&!je&&(ve=$&&!Pe?0:$===1?1:Pe===1?2:3,ee&&(fe=!Se&&R[ve+1]!=="none"&&R[ve+1]||R[ve],Ct=r&&(fe==="complete"||fe==="reset"||fe in r))),de&&(Se||Ct)&&(Ct||h||!r)&&(Ze(de)?de(l):l.getTrailing(de).forEach(function(Zt){return Zt.endAnimation()})),ee||(k&&!je&&!qr?(k._dp._time-k._start!==k._time&&k.render(k._dp._time-k._start),k.resetTo?k.resetTo("totalProgress",$,r._tTime/r._tDur):(k.vars.totalProgress=$,k.invalidate().restart())):r&&r.totalProgress($,!!(je&&(te||v)))),u){if(v&&d&&(U.style[d+x.os2]=Ht),!N)_e(Rr(ze+vt*$));else if(bt){if(at=!v&&$>Pe&&E+1>O&&O+1>=Rt(b,x),Ue)if(!v&&(Ye||at)){var Be=Ft(u,!0),Le=O-w;xo(u,ne,Be.top+(x===De?Le:0)+Re,Be.left+(x===De?0:Le)+Re)}else xo(u,U);mr(Ye||at?$e:Ge),be&&$<1&&Ye||_e(ze+($===1&&!at?vt:0))}}S&&!re.tween&&!je&&!qr&&yt.restart(!0),a&&(Se||we&&$&&($<1||!Pi))&&Yr(a.targets).forEach(function(Zt){return Zt.classList[Ye||we?"add":"remove"](a.className)}),n&&!ee&&!v&&n(l),bt&&!je?(ee&&(Ct&&(fe==="complete"?r.pause().totalProgress(1):fe==="reset"?r.restart(!0).pause():fe==="restart"?r.restart(!0):r[fe]()),n&&n(l)),(Se||!Pi)&&(m&&Se&&Ei(l,m),Q[ve]&&Ei(l,Q[ve]),we&&($===1?l.kill(!1,1):Q[ve]=0),Se||(ve=$===1?1:3,Q[ve]&&Ei(l,Q[ve]))),ye&&!Ye&&Math.abs(l.getVelocity())>(Dr(ye)?ye:2500)&&(Cr(l.callbackAnimation),k?k.progress(1):Cr(r,fe==="reverse"?1:!$,1))):ee&&n&&!je&&n(l)}if(Tt){var We=P?O/P.duration()*(P._caScrollDist||0):O;Xt(We+(c._isFlipped?1:0)),Tt(We)}ar&&ar(-O/P.duration()*(P._caScrollDist||0))}},l.enable=function(v,z){l.enabled||(l.enabled=!0,Ie(b,"resize",kr),ce||Ie(b,"scroll",cr),W&&Ie(s,"refreshInit",W),v!==!1&&(l.progress=oe=0,K=F=D=M()),z!==!1&&l.refresh())},l.getTween=function(v){return v&&re?re.tween:k},l.setPositions=function(v,z,C,O){if(P){var Oe=P.scrollTrigger,$=P.duration(),Pe=Oe.end-Oe.start;v=Oe.start+Pe*v/$,z=Oe.start+Pe*z/$}l.refresh(!1,!1,{start:fo(v,C&&!!l._startClamp),end:fo(z,C&&!!l._endClamp)},O),l.update()},l.adjustPinSpacing=function(v){if(Te&&v){var z=Te.indexOf(x.d)+1;Te[z]=parseFloat(Te[z])+v+Re,Te[1]=parseFloat(Te[1])+v+Re,mr(Te)}},l.disable=function(v,z){if(l.enabled&&(v!==!1&&l.revert(!0,!0),l.enabled=l.isActive=!1,z||k&&k.pause(),xt=0,ue&&(ue.uncache=1),W&&Fe(s,"refreshInit",W),yt&&(yt.pause(),re.tween&&re.tween.kill()&&(re.tween=0)),!ce)){for(var C=Y.length;C--;)if(Y[C].scroller===b&&Y[C]!==l)return;Fe(b,"resize",kr),ce||Fe(b,"scroll",cr)}},l.kill=function(v,z){l.disable(v,z),k&&!z&&k.kill(),f&&delete Yi[f];var C=Y.indexOf(l);C>=0&&Y.splice(C,1),C===et&&pi>0&&et--,C=0,Y.forEach(function(O){return O.scroller===l.scroller&&(C=1)}),C||tt||(l.scroll.rec=0),r&&(r.scrollTrigger=null,v&&r.revert({kill:!1}),z||r.kill()),se&&[se,I,c,le].forEach(function(O){return O.parentNode&&O.parentNode.removeChild(O)}),Ur===l&&(Ur=0),u&&(ue&&(ue.uncache=1),C=0,Y.forEach(function(O){return O.pin===u&&C++}),C||(ue.spacer=0)),t.onKill&&t.onKill(l)},Y.push(l),l.enable(!1,!1),Ot&&Ot(l),r&&r.add&&!G){var ie=l.update;l.update=function(){l.update=ie,j.cache++,w||E||l.refresh()},y.delayedCall(.01,l.update),G=.01,w=E=0}else l.refresh();u&&Vs()},s.register=function(t){return ur||(y=t||Yo(),Go()&&window.document&&s.enable(),ur=Ar),ur},s.defaults=function(t){if(t)for(var r in t)ti[r]=t[r];return ti},s.disable=function(t,r){Ar=0,Y.forEach(function(n){return n[r?"kill":"disable"](t)}),Fe(X,"wheel",cr),Fe(pe,"scroll",cr),clearInterval(Qr),Fe(pe,"touchcancel",At),Fe(ne,"touchstart",At),Jr(Fe,pe,"pointerdown,touchstart,mousedown",po),Jr(Fe,pe,"pointerup,touchend,mouseup",ho),_i.kill(),Kr(Fe);for(var o=0;o<j.length;o+=3)ei(Fe,j[o],j[o+1]),ei(Fe,j[o],j[o+2])},s.enable=function(){if(X=window,pe=document,ft=pe.documentElement,ne=pe.body,y&&(Yr=y.utils.toArray,Ir=y.utils.clamp,Ui=y.core.context||At,Ci=y.core.suppressOverwrites||At,$i=X.history.scrollRestoration||"auto",Wi=X.pageYOffset||0,y.core.globals("ScrollTrigger",s),ne)){Ar=1,gr=document.createElement("div"),gr.style.height="100vh",gr.style.position="absolute",Ko(),Ns(),Me.register(y),s.isTouch=Me.isTouch,Nt=Me.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Ni=Me.isTouch===1,Ie(X,"wheel",cr),Zi=[X,pe,ft,ne],y.matchMedia?(s.matchMedia=function(m){var g=y.matchMedia(),h;for(h in m)g.add(h,m[h]);return g},y.addEventListener("matchMediaInit",function(){return to()}),y.addEventListener("matchMediaRevert",function(){return Qo()}),y.addEventListener("matchMedia",function(){er(0,1),nr("matchMedia")}),y.matchMedia().add("(orientation: portrait)",function(){return Ai(),Ai})):console.warn("Requires GSAP 3.11.0 or later"),Ai(),Ie(pe,"scroll",cr);var t=ne.hasAttribute("style"),r=ne.style,o=r.borderTopStyle,n=y.core.Animation.prototype,a,f;for(n.revert||Object.defineProperty(n,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",a=Ft(ne),De.m=Math.round(a.top+De.sc())||0,rt.m=Math.round(a.left+rt.sc())||0,o?r.borderTopStyle=o:r.removeProperty("border-top-style"),t||(ne.setAttribute("style",""),ne.removeAttribute("style")),Qr=setInterval(_o,250),y.delayedCall(.5,function(){return qr=0}),Ie(pe,"touchcancel",At),Ie(ne,"touchstart",At),Jr(Ie,pe,"pointerdown,touchstart,mousedown",po),Jr(Ie,pe,"pointerup,touchend,mouseup",ho),Hi=y.utils.checkPrefix("transform"),hi.push(Hi),ur=Ve(),_i=y.delayedCall(.2,er).pause(),fr=[pe,"visibilitychange",function(){var m=X.innerWidth,g=X.innerHeight;pe.hidden?(lo=m,co=g):(lo!==m||co!==g)&&kr()},pe,"DOMContentLoaded",er,X,"load",er,X,"resize",kr],Kr(Ie),Y.forEach(function(m){return m.enable(0,1)}),f=0;f<j.length;f+=3)ei(Fe,j[f],j[f+1]),ei(Fe,j[f],j[f+2])}},s.config=function(t){"limitCallbacks"in t&&(Pi=!!t.limitCallbacks);var r=t.syncInterval;r&&clearInterval(Qr)||(Qr=r)&&setInterval(_o,r),"ignoreMobileResize"in t&&(Ni=s.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Kr(Fe)||Kr(Ie,t.autoRefreshEvents||"none"),Ho=(t.autoRefreshEvents+"").indexOf("resize")===-1)},s.scrollerProxy=function(t,r){var o=st(t),n=j.indexOf(o),a=or(o);~n&&j.splice(n,a?6:2),r&&(a?Dt.unshift(X,r,ne,r,ft,r):Dt.unshift(o,r))},s.clearMatchMedia=function(t){Y.forEach(function(r){return r._ctx&&r._ctx.query===t&&r._ctx.kill(!0,!0)})},s.isInViewport=function(t,r,o){var n=(ut(t)?st(t):t).getBoundingClientRect(),a=n[o?tr:rr]*r||0;return o?n.right-a>0&&n.left+a<X.innerWidth:n.bottom-a>0&&n.top+a<X.innerHeight},s.positionInViewport=function(t,r,o){ut(t)&&(t=st(t));var n=t.getBoundingClientRect(),a=n[o?tr:rr],f=r==null?a/2:r in yi?yi[r]*a:~r.indexOf("%")?parseFloat(r)*a/100:parseFloat(r)||0;return o?(n.left+f)/X.innerWidth:(n.top+f)/X.innerHeight},s.killAll=function(t){if(Y.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),t!==!0){var r=sr.killAll||[];sr={},r.forEach(function(o){return o()})}},s}();L.version="3.12.7";L.saveStyles=function(s){return s?Yr(s).forEach(function(e){if(e&&e.style){var i=ct.indexOf(e);i>=0&&ct.splice(i,5),ct.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),y.core.getCache(e),Ui())}}):ct};L.revert=function(s,e){return to(!s,e)};L.create=function(s,e){return new L(s,e)};L.refresh=function(s){return s?kr(!0):(ur||L.register())&&er(!0)};L.update=function(s){return++j.cache&&Lt(s===!0?2:0)};L.clearScrollMemory=qo;L.maxScroll=function(s,e){return Rt(s,e?rt:De)};L.getScrollFunc=function(s,e){return Wt(st(s),e?rt:De)};L.getById=function(s){return Yi[s]};L.getAll=function(){return Y.filter(function(s){return s.vars.id!=="ScrollSmoother"})};L.isScrolling=function(){return!!_t};L.snapDirectional=eo;L.addEventListener=function(s,e){var i=sr[s]||(sr[s]=[]);~i.indexOf(e)||i.push(e)};L.removeEventListener=function(s,e){var i=sr[s],t=i&&i.indexOf(e);t>=0&&i.splice(t,1)};L.batch=function(s,e){var i=[],t={},r=e.interval||.016,o=e.batchMax||1e9,n=function(m,g){var h=[],p=[],u=y.delayedCall(r,function(){g(h,p),h=[],p=[]}).pause();return function(d){h.length||u.restart(!0),h.push(d.trigger),p.push(d),o<=h.length&&u.progress(1)}},a;for(a in e)t[a]=a.substr(0,2)==="on"&&Ze(e[a])&&a!=="onRefreshInit"?n(a,e[a]):e[a];return Ze(o)&&(o=o(),Ie(L,"refresh",function(){return o=e.batchMax()})),Yr(s).forEach(function(f){var m={};for(a in t)m[a]=t[a];m.trigger=f,i.push(L.create(m))}),i};var So=function(e,i,t,r){return i>r?e(r):i<0&&e(0),t>r?(r-i)/(t-i):t<0?i/(i-t):1},Di=function s(e,i){i===!0?e.style.removeProperty("touch-action"):e.style.touchAction=i===!0?"auto":i?"pan-"+i+(Me.isTouch?" pinch-zoom":""):"none",e===ft&&s(ne,i)},si={auto:1,scroll:1},Ks=function(e){var i=e.event,t=e.target,r=e.axis,o=(i.changedTouches?i.changedTouches[0]:i).target,n=o._gsap||y.core.getCache(o),a=Ve(),f;if(!n._isScrollT||a-n._isScrollT>2e3){for(;o&&o!==ne&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(si[(f=mt(o)).overflowY]||si[f.overflowX]));)o=o.parentNode;n._isScroll=o&&o!==t&&!or(o)&&(si[(f=mt(o)).overflowY]||si[f.overflowX]),n._isScrollT=a}(n._isScroll||r==="x")&&(i.stopPropagation(),i._gsapAllow=!0)},es=function(e,i,t,r){return Me.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:i,onWheel:r=r&&Ks,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return t&&Ie(pe,Me.eventTypes[0],Co,!1,!0)},onDisable:function(){return Fe(pe,Me.eventTypes[0],Co,!0)}})},Js=/(input|label|select|textarea)/i,To,Co=function(e){var i=Js.test(e.target.tagName);(i||To)&&(e._gsapAllow=!0,To=i)},en=function(e){Kt(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var i=e,t=i.normalizeScrollX,r=i.momentum,o=i.allowNestedScroll,n=i.onRelease,a,f,m=st(e.target)||ft,g=y.core.globals().ScrollSmoother,h=g&&g.get(),p=Nt&&(e.content&&st(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),u=Wt(m,De),d=Wt(m,rt),T=1,_=(Me.isTouch&&X.visualViewport?X.visualViewport.scale*X.visualViewport.width:X.outerWidth)/X.innerWidth,H=0,J=Ze(r)?function(){return r(a)}:function(){return r||2.8},we,S,Ue=es(m,e.type,!0,o),ae=function(){return S=!1},P=At,ye=At,de=function(){f=Rt(m,De),ye=Ir(Nt?1:0,f),t&&(P=Ir(0,Rt(m,rt))),we=ir},x=function(){p._gsap.y=Rr(parseFloat(p._gsap.y)+u.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",u.offset=u.cacheID=0},ee=function(){if(S){requestAnimationFrame(ae);var q=Rr(a.deltaY/2),Z=ye(u.v-q);if(p&&Z!==u.v+u.offset){u.offset=Z-u.v;var l=Rr((parseFloat(p&&p._gsap.y)||0)-u.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+l+", 0, 1)",p._gsap.y=l+"px",u.cacheID=j.cache,Lt()}return!0}u.offset&&x(),S=!0},b,ke,ce,N,Q=function(){de(),b.isActive()&&b.vars.scrollY>f&&(u()>f?b.progress(1)&&u(f):b.resetTo("scrollY",f))};return p&&y.set(p,{y:"+=0"}),e.ignoreCheck=function(R){return Nt&&R.type==="touchmove"&&ee()||T>1.05&&R.type!=="touchstart"||a.isGesturing||R.touches&&R.touches.length>1},e.onPress=function(){S=!1;var R=T;T=Rr((X.visualViewport&&X.visualViewport.scale||1)/_),b.pause(),R!==T&&Di(m,T>1.01?!0:t?!1:"x"),ke=d(),ce=u(),de(),we=ir},e.onRelease=e.onGestureStart=function(R,q){if(u.offset&&x(),!q)N.restart(!0);else{j.cache++;var Z=J(),l,W;t&&(l=d(),W=l+Z*.05*-R.velocityX/.227,Z*=So(d,l,W,Rt(m,rt)),b.vars.scrollX=P(W)),l=u(),W=l+Z*.05*-R.velocityY/.227,Z*=So(u,l,W,Rt(m,De)),b.vars.scrollY=ye(W),b.invalidate().duration(Z).play(.01),(Nt&&b.vars.scrollY>=f||l>=f-1)&&y.to({},{onUpdate:Q,duration:Z})}n&&n(R)},e.onWheel=function(){b._ts&&b.pause(),Ve()-H>1e3&&(we=0,H=Ve())},e.onChange=function(R,q,Z,l,W){if(ir!==we&&de(),q&&t&&d(P(l[2]===q?ke+(R.startX-R.x):d()+q-l[1])),Z){u.offset&&x();var nt=W[2]===Z,kt=nt?ce+R.startY-R.y:u()+Z-W[1],D=ye(kt);nt&&kt!==D&&(ce+=D-kt),u(D)}(Z||q)&&Lt()},e.onEnable=function(){Di(m,t?!1:"x"),L.addEventListener("refresh",Q),Ie(X,"resize",Q),u.smooth&&(u.target.style.scrollBehavior="auto",u.smooth=d.smooth=!1),Ue.enable()},e.onDisable=function(){Di(m,!0),Fe(X,"resize",Q),L.removeEventListener("refresh",Q),Ue.kill()},e.lockAxis=e.lockAxis!==!1,a=new Me(e),a.iOS=Nt,Nt&&!u()&&u(1),Nt&&y.ticker.add(At),N=a._dc,b=y.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Jo(u,u(),function(){return b.pause()})},onUpdate:Lt,onComplete:N.vars.onComplete}),a};L.sort=function(s){if(Ze(s))return Y.sort(s);var e=X.pageYOffset||0;return L.getAll().forEach(function(i){return i._sortY=i.trigger?e+i.trigger.getBoundingClientRect().top:i.start+X.innerHeight}),Y.sort(s||function(i,t){return(i.vars.refreshPriority||0)*-1e6+(i.vars.containerAnimation?1e6:i._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};L.observe=function(s){return new Me(s)};L.normalizeScroll=function(s){if(typeof s>"u")return Je;if(s===!0&&Je)return Je.enable();if(s===!1){Je&&Je.kill(),Je=s;return}var e=s instanceof Me?s:en(s);return Je&&Je.target===e.target&&Je.kill(),or(e.target)&&(Je=e),e};L.core={_getVelocityProp:Li,_inputObserver:es,_scrollers:j,_proxies:Dt,bridge:{ss:function(){_t||nr("scrollStart"),_t=Ve()},ref:function(){return je}}};Yo()&&y.registerPlugin(L);var Gr=function(){var s=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(g){g.preventDefault(),t(++s%e.children.length)},!1);function i(g){return e.appendChild(g.dom),g}function t(g){for(var h=0;h<e.children.length;h++)e.children[h].style.display=h===g?"block":"none";s=g}var r=(performance||Date).now(),o=r,n=0,a=i(new Gr.Panel("FPS","#0ff","#002")),f=i(new Gr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var m=i(new Gr.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:i,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){n++;var g=(performance||Date).now();if(f.update(g-r,200),g>=o+1e3&&(a.update(n*1e3/(g-o),100),o=g,n=0,m)){var h=performance.memory;m.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return g},update:function(){r=this.end()},domElement:e,setMode:t}};Gr.Panel=function(s,e,i){var t=1/0,r=0,o=Math.round,n=o(window.devicePixelRatio||1),a=80*n,f=48*n,m=3*n,g=2*n,h=3*n,p=15*n,u=74*n,d=30*n,T=document.createElement("canvas");T.width=a,T.height=f,T.style.cssText="width:80px;height:48px";var _=T.getContext("2d");return _.font="bold "+9*n+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=i,_.fillRect(0,0,a,f),_.fillStyle=e,_.fillText(s,m,g),_.fillRect(h,p,u,d),_.fillStyle=i,_.globalAlpha=.9,_.fillRect(h,p,u,d),{dom:T,update:function(H,J){t=Math.min(t,H),r=Math.max(r,H),_.fillStyle=i,_.globalAlpha=1,_.fillRect(0,0,a,p),_.fillStyle=e,_.fillText(o(H)+" "+s+" ("+o(t)+"-"+o(r)+")",m,g),_.drawImage(T,h+n,p,u-n,d,h,p,u-n,d),_.fillRect(h+u-n,p,n,d),_.fillStyle=i,_.globalAlpha=.9,_.fillRect(h+u-n,p,n,o((1-H/J)*d))}}};const ts={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Xr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const tn=new gs(-1,1,1,-1,0,1);class rn extends ms{constructor(){super(),this.setAttribute("position",new io([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new io([0,2,0,0,2,0],2))}}const on=new rn;class rs{constructor(e){this._mesh=new Et(on,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,tn)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class sn extends Xr{constructor(e,i){super(),this.textureID=i!==void 0?i:"tDiffuse",e instanceof pr?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Oi.clone(e.uniforms),this.material=new pr({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new rs(this.material)}render(e,i,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Po extends Xr{constructor(e,i){super(),this.scene=e,this.camera=i,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,i,t){const r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let n,a;this.inverse?(n=0,a=1):(n=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,n,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}}class nn extends Xr{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class an{constructor(e,i){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),i===void 0){const t=e.getSize(new dt);this._width=t.width,this._height=t.height,i=new ai(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:li}),i.texture.name="EffectComposer.rt1"}else this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new sn(ts),this.copyPass.material.blending=_s,this.clock=new vs}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,i){this.passes.splice(i,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const i=this.passes.indexOf(e);i!==-1&&this.passes.splice(i,1)}isLastEnabledPass(e){for(let i=e+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const i=this.renderer.getRenderTarget();let t=!1;for(let r=0,o=this.passes.length;r<o;r++){const n=this.passes[r];if(n.enabled!==!1){if(n.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),n.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),n.needsSwap){if(t){const a=this.renderer.getContext(),f=this.renderer.state.buffers.stencil;f.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),f.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}Po!==void 0&&(n instanceof Po?t=!0:n instanceof nn&&(t=!1))}}this.renderer.setRenderTarget(i)}reset(e){if(e===void 0){const i=this.renderer.getSize(new dt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,i){this._width=e,this._height=i;const t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class ln extends Xr{constructor(e,i,t=null,r=null,o=null){super(),this.scene=e,this.camera=i,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new It}render(e,i,t){const r=e.autoClear;e.autoClear=!1;let o,n;this.overrideMaterial!==null&&(n=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=n),e.autoClear=r}}const cn={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new It(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class vr extends Xr{constructor(e,i,t,r){super(),this.strength=i!==void 0?i:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new dt(e.x,e.y):new dt(256,256),this.clearColor=new It(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),n=Math.round(this.resolution.y/2);this.renderTargetBright=new ai(o,n,{type:li}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let h=0;h<this.nMips;h++){const p=new ai(o,n,{type:li});p.texture.name="UnrealBloomPass.h"+h,p.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(p);const u=new ai(o,n,{type:li});u.texture.name="UnrealBloomPass.v"+h,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),o=Math.round(o/2),n=Math.round(n/2)}const a=cn;this.highPassUniforms=Oi.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new pr({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];const f=[3,5,7,9,11];o=Math.round(this.resolution.x/2),n=Math.round(this.resolution.y/2);for(let h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(f[h])),this.separableBlurMaterials[h].uniforms.invSize.value=new dt(1/o,1/n),o=Math.round(o/2),n=Math.round(n/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=i,this.compositeMaterial.uniforms.bloomRadius.value=.1;const m=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=m,this.bloomTintColors=[new ht(1,1,1),new ht(1,1,1),new ht(1,1,1),new ht(1,1,1),new ht(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const g=ts;this.copyUniforms=Oi.clone(g.uniforms),this.blendMaterial=new pr({uniforms:this.copyUniforms,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,blending:ws,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new It,this.oldClearAlpha=1,this.basic=new Fi,this.fsQuad=new rs(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,i){let t=Math.round(e/2),r=Math.round(i/2);this.renderTargetBright.setSize(t,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(t,r),this.renderTargetsVertical[o].setSize(t,r),this.separableBlurMaterials[o].uniforms.invSize.value=new dt(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,i,t,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const n=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let f=0;f<this.nMips;f++)this.fsQuad.material=this.separableBlurMaterials[f],this.separableBlurMaterials[f].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[f].uniforms.direction.value=vr.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[f]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[f].uniforms.colorTexture.value=this.renderTargetsHorizontal[f].texture,this.separableBlurMaterials[f].uniforms.direction.value=vr.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[f]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[f];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=n}getSeparableBlurMaterial(e){const i=[];for(let t=0;t<e;t++)i.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new pr({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new dt(.5,.5)},direction:{value:new dt(.5,.5)},gaussianCoefficients:{value:i}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new pr({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}vr.BlurDirectionX=new dt(1,0);vr.BlurDirectionY=new dt(0,1);function un(s,e,i,t){return{introCubes:[]}}class fn extends ys{constructor(e){super(e)}load(e,i,t,r){const o=this,n=new xs(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,function(a){const f=o.parse(JSON.parse(a));i&&i(f)},t,r)}parse(e){return new pn(e)}}class pn{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,i=100){const t=[],r=hn(e,i,this.data);for(let o=0,n=r.length;o<n;o++)t.push(...r[o].toShapes());return t}}function hn(s,e,i){const t=Array.from(s),r=e/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,n=[];let a=0,f=0;for(let m=0;m<t.length;m++){const g=t[m];if(g===`
`)a=0,f-=o;else{const h=dn(g,r,a,f,i);a+=h.offsetX,n.push(h.path)}}return n}function dn(s,e,i,t,r){const o=r.glyphs[s]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+s+'" does not exists in font family '+r.familyName+".");return}const n=new bs;let a,f,m,g,h,p,u,d;if(o.o){const T=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let _=0,H=T.length;_<H;)switch(T[_++]){case"m":a=T[_++]*e+i,f=T[_++]*e+t,n.moveTo(a,f);break;case"l":a=T[_++]*e+i,f=T[_++]*e+t,n.lineTo(a,f);break;case"q":m=T[_++]*e+i,g=T[_++]*e+t,h=T[_++]*e+i,p=T[_++]*e+t,n.quadraticCurveTo(h,p,m,g);break;case"b":m=T[_++]*e+i,g=T[_++]*e+t,h=T[_++]*e+i,p=T[_++]*e+t,u=T[_++]*e+i,d=T[_++]*e+t,n.bezierCurveTo(h,p,u,d,m,g);break}}return{offsetX:o.ha*e,path:n}}function Mo(s,e,i,t,r,o){const{CUBE_SIZE:n,CUBE_SPACING:a,FIRST_CUBE_Z:f}=e,m=f-(i.length+1)*a,g=65535,h=16711935,p=16711680,u=lt.degToRad(15),d=1e3,T=.5,_=80,H=1,J=15,we=.1;let S=[],Ue=null,ae=null,P=!1,ye=!1,de=new Ss,x=new dt,ee=null,b=null,ke=null,ce=!1,N=null;const Q=Ro(),R=(D,te,oe,M,re,ue)=>{const V=new Sr;V.position.z=oe,V.rotation.z=M,V.userData.isActive=!1;const K=new Cs(te,te,te),F=new Si(K),w=new Ti({color:new It(g),transparent:!0,opacity:0}),E=new Qt(F,w);E.geometry.computeBoundingSphere(),V.add(E);let se="right";const I=te/2;(()=>{const he=new oo(40,24),$e=new Si(he),Ge=new Ti({color:new It(g),transparent:!0,opacity:0,visible:!0}),U=new Qt($e,Ge);U.userData.isPortal=!0,U.userData.isAnimating=!1,U.geometry.computeBoundingSphere();const it=new so(120,120),xe=new Fi({visible:!1,side:no}),_e=new Et(it,xe);_e.userData.isPortalHitbox=!0,_e.userData.portal=U,_e.geometry.computeBoundingSphere();const ze=new Sr,vt=new so(H,J),Ht=65/2;for(let be=0;be<_;be++){const Tt=new Fi({color:new It(h),transparent:!0,opacity:0,visible:!1,side:no}),Qe=new Et(vt,Tt),ot=be/_*Math.PI*2;Qe.position.set(Math.cos(ot)*Ht,Math.sin(ot)*Ht,0),Qe.rotation.z=ot+Math.PI/2,Qe.userData.baseOpacity=.01,Qe.userData.index=be,Qe.geometry.computeBoundingSphere(),ze.add(Qe)}const Te=2,Xt=25;for(let be=1;be<Xt;be++){const Tt=new oo(40,24),Qe=new Si(Tt),ot=lt.lerp(1,.1,be/(Xt-1)),zt=new Ti({color:new It(g),transparent:!0,opacity:0}),k=new Qt(Qe,zt);k.userData.isPortal=!0,k.userData.maxOpacity=ot,k.position.z=-be*Te,k.geometry.computeBoundingSphere(),U.add(k)}switch(U.userData.maxOpacity=1,se){case"left":case"right":ze.children.forEach(be=>be.position.x+=we);break;case"top":case"bottom":ze.children.forEach(be=>be.position.y+=we);break}switch(U.add(ze),V.add(U),V.add(_e),U.updateMatrixWorld(!0),ze.updateMatrixWorld(!0),se){case"left":U.position.set(-I,0,0),U.rotation.y=Math.PI/2,_e.position.set(-I,0,0),_e.rotation.y=Math.PI/2;break;case"top":U.position.set(0,I,0),U.rotation.x=-Math.PI/2,_e.position.set(0,I,0),_e.rotation.x=Math.PI/2;break;case"right":U.position.set(I,0,0),U.rotation.y=-Math.PI/2,_e.position.set(I,0,0),_e.rotation.y=-Math.PI/2;break;case"bottom":U.position.set(0,-I,0),U.rotation.x=Math.PI/2,_e.position.set(0,-I,0),_e.rotation.x=Math.PI/2;break}})(),V.children.forEach(me=>{(me instanceof Qt||me instanceof Et)&&me.geometry&&!me.geometry.boundingSphere&&me.geometry.computeBoundingSphere()}),V.updateMatrixWorld(!0);const le=new Ps().setFromObject(V),ge=new Ms;return le.getBoundingSphere(ge),V.boundingSphere=ge,V},q=()=>new Promise(D=>{Ue=new fn,Ue.load("/fonts/Poppins_Regular.json",te=>{ae=te;const oe=Array.isArray(i)?i:[];Array.isArray(i)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",i),oe.forEach((M,re)=>{const ue=f-(re+1)*a,V=(re+1)*u,K=R(M,n,ue,V,M.keyart,M.keyartLocation);s.add(K),S.push(K)}),D()},void 0,te=>console.error("Error loading font:",te))}),Z=()=>P?Promise.resolve({projectCubes:S,updateCubeColors:nt,loadedFont:ae,maxZ:m}):q().then(()=>(P=!0,{projectCubes:S,updateCubeColors:nt,loadedFont:ae,maxZ:m})).catch(D=>{throw console.error("Error in loadFontAndText:",D),D}),l=D=>{if(!D.userData.isAnimating)return;D.userData.isAnimating=!1;const te=D.children.find(oe=>oe instanceof Sr);te&&(D.userData.animationTimeline&&(D.userData.animationTimeline.kill(),delete D.userData.animationTimeline),te.children.forEach(oe=>{const M=oe.material;M.opacity=0}))},W=new Ts,nt=D=>{W.setFromProjectionMatrix(D.projectionMatrix.clone().multiply(D.matrixWorldInverse));const te=D.position.z;let oe=[];s.traverse(M=>{M instanceof Et&&M.geometry&&M.geometry.type==="TextGeometry"&&oe.push(M)}),ye||(ye=!0),S.forEach((M,re)=>{if(!M.geometry&&!M.children.length){console.warn(`Cube ${re} has no geometry or children`,M);return}try{if(!W.intersectsObject(M))return}catch(F){console.error(`Error with cube ${re}`,M,F);return}const ue=M.position.z,V=Math.abs(te-ue);let K=0;V<=d&&(K=1-V/d),M.userData.isActive=K>=T,M.children.forEach(F=>{if(F instanceof Qt&&!F.userData.isPortal&&!F.userData.isPortalHitbox){const w=F.material;if(V<=d){const E=lt.lerp((g>>16&255)/255,(h>>16&255)/255,K),se=lt.lerp((g>>8&255)/255,(h>>8&255)/255,K),I=lt.lerp((g&255)/255,(h&255)/255,K);w.color.set(E,se,I),w.opacity=Math.min(1,K*2)}else w.opacity=0}else if(F instanceof Qt&&F.userData.isPortal)ye&&(K>.1?F.children.forEach(w=>{w instanceof Sr&&w.children.forEach(E=>{E instanceof Et&&(E.material.visible=!0,!F.userData.animationStarted&&o.showPortalPulses)})}):K<=.1&&F.userData.animationStarted&&(F.children.forEach(w=>{w instanceof Sr&&w.children.forEach(E=>{E instanceof Et&&(E.material.visible=!1)})}),l(F),delete F.userData.animationStarted));else if(F instanceof Et&&!F.userData.isPortalHitbox){const w=F.material;if(V<=d){const E=1-V/d;w.opacity=Math.min(.8,E*2)}else w.opacity=0}})}),oe.forEach(M=>{const re=M.material,ue=M.userData.backgroundPlane,V=ue==null?void 0:ue.material,K=M.position.z,F=Math.abs(te-K+120);if(F<=d){const w=1-F/d,E=Math.min(1,w*2);re.opacity=E,V&&(V.opacity=E*.8)}else re.opacity=0,V&&(V.opacity=0)})};return{getInitializedData:Z,updateCubeColors:nt,setupInteractivity:(D,te,oe)=>{N=oe;let M=null,re=null;const ue=(w,E=!0)=>{const se=[w,...w.children.filter(c=>c instanceof Qt&&c.userData.isPortal)],I=E?25:2;se.forEach((c,le)=>{let ge=-le*I;(w.position.y>0&&w.rotation.x===-Math.PI/2||w.position.y<0&&w.rotation.x===Math.PI/2)&&(ge=le*I);const me=E?c.userData.maxOpacity:0;He.to(c.position,{z:ge,duration:1,ease:"power3.out",delay:.5}),He.to(c.material,{opacity:me,duration:1,ease:"power3.out",delay:.5})})},V=w=>{x.x=w.clientX/window.innerWidth*2-1,x.y=-(w.clientY/window.innerHeight)*2+1,de.setFromCamera(x,D);const E=S.flatMap(I=>I.userData.isActive?I.children.filter(c=>c instanceof Et&&c.userData.isPortalHitbox):[]),se=de.intersectObjects(E);if(se.length>0){const c=se[0].object.userData.portal;if(ee!==c){if(ee){const ge=ee.material;He.to(ge.color,{r:(g>>16&255)/255,g:(g>>8&255)/255,b:(g&255)/255,duration:.5})}ee=c;const le=ee.material;He.to(le.color,{r:(p>>16&255)/255,g:(p>>8&255)/255,b:(p&255)/255,duration:.5})}te.style.cursor="pointer"}else{if(ee){const I=ee.material;He.to(I.color,{r:(g>>16&255)/255,g:(g>>8&255)/255,b:(g&255)/255,duration:.5}),ee=null}te.style.cursor="auto"}},K=w=>{x.x=w.clientX/window.innerWidth*2-1,x.y=-(w.clientY/window.innerHeight)*2+1,de.setFromCamera(x,D);const E=S.flatMap(G=>G.userData.isActive?G.children.filter(he=>he instanceof Et&&he.userData.isPortalHitbox):[]),se=de.intersectObjects(E);if(se.length===0)return;const I=se[0].object,c=I.userData.portal,le=I.parent,ge=S.indexOf(le),me=i[ge];if(ce&&c===re){c.getWorldPosition(new ht);let G=new ht;const he=e.CUBE_SIZE/2;c.position.x===he?G.set(-1,0,0):c.position.x===-he?G.set(1,0,0):c.position.y===he?G.set(0,-1,0):c.position.y===-he&&G.set(0,1,0),G.applyQuaternion(le.getWorldQuaternion(new Es)).normalize();const Ge=D.position.clone().clone().add(G.clone().multiplyScalar(-675)),U=G.clone().multiplyScalar(-1e3),it=Ge.clone().add(U);He.to(D.position,{x:Ge.x,y:Ge.y,z:Ge.z,duration:1,ease:"power2.in",onUpdate:()=>D.lookAt(it),onComplete:()=>{me!=null&&me.slug&&(Q.setScrollPosition(window.scrollY),os.visit(route("project.show",{project:me.slug}),{preserveScroll:!1}))}})}else if(!ce){b||(b=D.position.clone(),ke=new ht(0,0,m)),N&&oe(!0,b,ke);const G=c.getWorldPosition(new ht);He.to(D.position,{x:0,y:0,z:le.getWorldPosition(new ht).z,duration:2,ease:"power3.out"}),He.to({},{duration:2,ease:"power3.out",onUpdate:function(){const he=this.progress(),$e=D.getWorldDirection(new ht).multiplyScalar(1e3).add(D.position),Ge=lt.lerp($e.x,G.x,he),U=lt.lerp($e.y,G.y,he),it=lt.lerp($e.z,G.z,he);D.lookAt(Ge,U,it)},onStart:()=>{ce=!0,M=window.scrollY,document.body.classList.add("no-scrollbar"),re=c,ue(c,!0)}})}},F=w=>{if(!ce||!re||!b||!ke)return;let E=0;if(w instanceof WheelEvent?E=w.deltaY:E=window.scrollY-(M||0),w.preventDefault(),w.stopPropagation(),E>0){window.scrollTo(0,M);return}if(E<0){const se=re,I=ke.clone(),c=b.z;He.to(D.position,{x:b.x,y:b.y,z:c,duration:1,ease:"power3.out"}),He.to({},{duration:1,ease:"power3.out",onUpdate:function(){const le=this.progress(),ge=D.getWorldDirection(new ht).multiplyScalar(1e3).add(D.position),me=lt.lerp(ge.x,I.x,le),G=lt.lerp(ge.y,I.y,le),he=lt.lerp(ge.z,I.z,le);D.lookAt(me,G,he)},onComplete:()=>{D.lookAt(I),ce=!1,re=null,document.body.classList.remove("no-scrollbar"),N&&oe(!1),ue(se,!1),M=null,b=null,ke=null}})}};return te.addEventListener("mousemove",V),te.addEventListener("click",K),window.addEventListener("wheel",F,{passive:!1}),window.addEventListener("scroll",F,{passive:!1}),()=>{te.removeEventListener("mousemove",V),te.removeEventListener("click",K),window.removeEventListener("wheel",F),window.removeEventListener("scroll",F)}}}}He.registerPlugin(L);function gn(s,e,i,t,r,o,n={},a,f){L.config({syncTouch:!0});const{CUBE_SPACING:m,FIRST_CUBE_Z:g}=o,h=(t==null?void 0:t.length)||0,p=g-(h+1)*m;let u=!1;const d=Math.abs(p)+(h-1)*m,T=He.timeline();return He.timeline({scrollTrigger:{trigger:i.value,start:"top top",end:`+=${d}`,scrub:n.scrub||.5,pin:!0,onUpdate:J=>{if(!u){const we=J.progress,S=lt.lerp(0,p,we);e.position.set(0,0,S),e.lookAt(0,0,p)}r(e)}}}).fromTo(e.position,{z:0},{z:p,duration:1,ease:"none"}),{setReverting:H=>{u=H},timeline:T}}const mn={class:"preloader"},_n={class:"progress-label"},vn=ji({__name:"Preloader",props:{progress:{}},setup(s){return(e,i)=>(gi(),Vi("div",mn,[Jt("div",_n,ss(Math.round(e.progress))+"%",1)]))}}),wn=Ao(vn,[["__scopeId","data-v-e5eadefa"]]),ki=250,ni=500,Pr=-500,zi=-520,Eo=-720,yn=ji({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(s){He.registerPlugin(L);const e=Ro();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const i=s,t={showChasers:!1,showStarfield:!1,showCars:!1,showBuildings:!1,showPortalPulses:!1,showKeyarts:!1,showProjectGrids:!1,showProjectTitles:!1,showScrollTrigger:!0,showIntroCubes:!1},r=$t(null),o=$t(null),n=$t(!1),a=$t(0),f=$t(!1),m=$t(!0),g=new Map;$t(null);let h,p,u,d,T,_,H,J,we=null,S=null,Ue=null,ae=null,P=null,ye=[],de=null;const x=()=>{const N=r.value?r.value.getBoundingClientRect().width:window.innerWidth,Q=window.innerHeight,R=e.isMobile?.75:1;u.setSize(N*R,Q*R),d.setSize(N*R,Q*R),p.aspect=N/Q,p.far=6e4,p.updateProjectionMatrix(),u.domElement.style.width=`${N}px`,u.domElement.style.height=`${Q}px`},ee=N=>g.has(N)?Promise.resolve(g.get(N)):new Promise((Q,R)=>{new Os().load(N,Z=>{Z.encoding=void 0,g.set(N,Z),Q(Z)},void 0,Z=>R(Z))}),b=async()=>{h=new As,h.background=new It(0),h.fog=new Rs(0,700,4e3),p=new Ds(75,window.innerWidth/window.innerHeight,1,6e4),p.position.set(0,0,0),p.lookAt(0,0,1e3),u=new ks({antialias:!0}),e.isMobile?u.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):u.setPixelRatio(window.devicePixelRatio),u.toneMapping=zs,u.toneMappingExposure=1,u.outputEncoding=void 0,d=new an(u);const N=new ln(h,p);if(d.addPass(N),T=new vr(new dt(window.innerWidth,window.innerHeight),6,.4,0),T.renderToScreen=!0,e.isMobile||d.addPass(T),r.value)r.value.appendChild(u.domElement),u.domElement.style.opacity="0";else return;H=new Gr,H.dom.style.position="fixed",H.dom.style.top="0px",H.dom.style.left="0px",H.dom.style.zIndex="1000",document.body.appendChild(H.dom);const Q=i.projects.length+2+1;let R=0;const q=()=>{R++,a.value=R/Q*100,R===Q&&(n.value=!0)};await ee(i.projectGridFile).then(()=>q()).catch(()=>q()),await ee(i.projectGridFile2).then(()=>q()).catch(()=>q());for(const W of i.projects)W.keyart?await ee(W.keyart).then(()=>q()).catch(()=>q()):q();const Z=Mo(h,{CUBE_SIZE:ki,CUBE_SPACING:ni,FIRST_CUBE_Z:Pr},i.projects,i.projectGridFile,i.projectGridFile2,t);let l=-8500;try{const W=await Z.getInitializedData();l=W.maxZ!==void 0&&!isNaN(W.maxZ)?W.maxZ:-8500,q();const{introCubes:nt}=un(h,h,{CUBE_SIZE:ki,FIRST_CUBE_Z:Pr},t);ye=[...nt,...W.projectCubes],de=W.updateCubeColors,t.showCars,t.showStarfield,t.showChasers,x()}catch(W){console.error("Error initializing project cubes:",W)}},ke=(N=0)=>{if(_=requestAnimationFrame(ke),u&&d){if(!e.isMobile){const Q=Eo-zi;let R=0;p.position.z>=zi?R=0:p.position.z<=Eo?R=1:R=(p.position.z-zi)/Q,T.strength=lt.lerp(1,.125,R)}d.render()}H.update()};ns(()=>{console.log("start."),b().then(()=>{if(n.value){_=requestAnimationFrame(ke);const N=Mo(h,{CUBE_SIZE:ki,CUBE_SPACING:ni,FIRST_CUBE_Z:Pr},i.projects,i.projectGridFile,i.projectGridFile2,t);let Q=null;const R=N.getInitializedData().then(({projectCubes:Z})=>{Z.forEach(W=>{W.userData.isActive=!0});const l=Pr-(i.projects.length-1)*ni;p.position.set(0,0,5e3),p.lookAt(0,0,l),p.updateProjectionMatrix(),de(p),d.render(),ye.length&&de&&(Q=gn(h,p,o,ye,de,{CUBE_SPACING:ni,FIRST_CUBE_Z:Pr},{scrub:e.isMobile?3:1}).setReverting),u&&S===null&&(S=N.setupInteractivity(p,u.domElement,W=>{Q&&Q(W)})),window.scrollTo({top:0,behavior:"auto"})}),q=()=>{R.then(()=>{m.value=!1,p.position.set(0,0,5e3),p.updateProjectionMatrix(),He.to(u.domElement,{opacity:1,duration:.5,ease:"power4.out"});const Z={z:5e3};He.to(Z,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{p.position.z=Z.z,p.updateProjectionMatrix()},onComplete:()=>{p.position.z=0,f.value=!0}})})};He.delayedCall(.1,q)}}).catch(N=>{console.error("Initialization failed:",N)}),window.addEventListener("resize",ce)}),as(()=>{_&&cancelAnimationFrame(_),S&&S(),window.removeEventListener("resize",ce),L.getAll().forEach(N=>N.kill()),u.dispose(),d.dispose(),h.clear(),document.body.removeChild(H.dom),P&&P()});const ce=()=>{x(),L.refresh()};return(N,Q)=>(gi(),Vi("section",{ref_key:"wrapper",ref:o,class:"wrapper"},[Mr(ls,{name:"fade"},{default:cs(()=>[m.value?(gi(),us(wn,{key:0,progress:a.value},null,8,["progress"])):fs("",!0)]),_:1}),Jt("div",{ref_key:"tunnelWrapper",ref:r,class:"tunnel-wrapper"},null,512)],512))}}),xn=Ao(yn,[["__scopeId","data-v-48f61742"]]),bn={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Sn={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Tn={class:"overflow-hidden"},zn=ji({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(s){return(e,i)=>(gi(),Vi(ds,null,[Mr(ps(hs),{title:"Welcome"}),Jt("div",bn,[Jt("nav",Sn,[Mr(Fs)]),Jt("div",Tn,[Mr(xn,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),i[0]||(i[0]=Jt("div",{class:"flex justify-center items-center"},null,-1)),i[1]||(i[1]=Jt("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),Mr(Is)])],64))}});export{zn as default};
