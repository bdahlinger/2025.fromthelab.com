import{I as Lr,d as sn,D as Es,x as Wo,y as Xo,e as Nr,o as nr,J as Is,W as As,a as un,t as ks,b as an,T as Rs,w as Ds,c as Os,f as Ls,u as Ns,m as Bs,F as Fs}from"./app-LXhKfiY4.js";import{M as je,O as jo,B as Br,F as Wn,C as wt,V as ye,W as wr,H as vr,U as Kr,S as fn,a as He,A as At,b as _t,N as zs,c as Us,d as Vo,e as Zo,f as An,P as jt,E as Gs,g as qo,h as Qo,i as bn,j as Hs,k as Ys,l as Ws,m as Ur,n as Xs,o as Qt,p as kt,q as js,D as Gt,r as Bt,s as Ve,t as Ge,u as Xn,v as Kt,R as Vs,T as Tn,w as xo,Q as Zs,I as qs,x as Gr,y as Qs,z as $s,J as bo,K as Ks,X as Js,Y as ei,Z as ti,L as ni,G as ri}from"./GlobalFooter-gdB3YMj2.js";import{_ as $o}from"./_plugin-vue_export-helper-DlAUqK2U.js";class sr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const oi=new jo(-1,1,1,-1,0,1);class si extends Br{constructor(){super(),this.setAttribute("position",new Wn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Wn([0,2,0,0,2,0],2))}}const ii=new si;class Ko{constructor(e){this._mesh=new je(ii,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,oi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const Jo={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`},ai={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new wt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class mn extends sr{constructor(e,r,t,n){super(),this.strength=r!==void 0?r:1,this.radius=t,this.threshold=n,this.resolution=e!==void 0?new ye(e.x,e.y):new ye(256,256),this.clearColor=new wt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new wr(o,l,{type:vr}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let C=0;C<this.nMips;C++){const P=new wr(o,l,{type:vr});P.texture.name="UnrealBloomPass.h"+C,P.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(P);const _=new wr(o,l,{type:vr});_.texture.name="UnrealBloomPass.v"+C,_.texture.generateMipmaps=!1,this.renderTargetsVertical.push(_),o=Math.round(o/2),l=Math.round(l/2)}const u=ai;this.highPassUniforms=Kr.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new fn({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.separableBlurMaterials=[];const w=[3,5,7,9,11];o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let C=0;C<this.nMips;C++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(w[C])),this.separableBlurMaterials[C].uniforms.invSize.value=new ye(1/o,1/l),o=Math.round(o/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const b=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=b,this.bloomTintColors=[new He(1,1,1),new He(1,1,1),new He(1,1,1),new He(1,1,1),new He(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const M=Jo;this.copyUniforms=Kr.clone(M.uniforms),this.blendMaterial=new fn({uniforms:this.copyUniforms,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,blending:At,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new wt,this.oldClearAlpha=1,this.basic=new _t,this.fsQuad=new Ko(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let t=Math.round(e/2),n=Math.round(r/2);this.renderTargetBright.setSize(t,n);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(t,n),this.renderTargetsVertical[o].setSize(t,n),this.separableBlurMaterials[o].uniforms.invSize.value=new ye(1/t,1/n),t=Math.round(t/2),n=Math.round(n/2)}render(e,r,t,n,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let u=this.renderTargetBright;for(let w=0;w<this.nMips;w++)this.fsQuad.material=this.separableBlurMaterials[w],this.separableBlurMaterials[w].uniforms.colorTexture.value=u.texture,this.separableBlurMaterials[w].uniforms.direction.value=mn.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[w]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[w].uniforms.colorTexture.value=this.renderTargetsHorizontal[w].texture,this.separableBlurMaterials[w].uniforms.direction.value=mn.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[w]),e.clear(),this.fsQuad.render(e),u=this.renderTargetsVertical[w];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeparableBlurMaterial(e){const r=[];for(let t=0;t<e;t++)r.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new fn({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new ye(.5,.5)},direction:{value:new ye(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new fn({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}mn.BlurDirectionX=new ye(1,0);mn.BlurDirectionY=new ye(0,1);class li extends sr{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof fn?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Kr.clone(e.uniforms),this.material=new fn({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Ko(this.material)}render(e,r,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class wo extends sr{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,t){const n=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let l,u;this.inverse?(l=0,u=1):(l=1,u=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),o.buffers.stencil.setFunc(n.ALWAYS,l,4294967295),o.buffers.stencil.setClear(u),o.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(n.EQUAL,1,4294967295),o.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),o.buffers.stencil.setLocked(!0)}}class ci extends sr{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class es{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const t=e.getSize(new ye);this._width=t.width,this._height=t.height,r=new wr(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:vr}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new li(Jo),this.copyPass.material.blending=zs,this.clock=new Us}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let t=!1;for(let n=0,o=this.passes.length;n<o;n++){const l=this.passes[n];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),l.needsSwap){if(t){const u=this.renderer.getContext(),w=this.renderer.state.buffers.stencil;w.setFunc(u.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),w.setFunc(u.EQUAL,1,4294967295)}this.swapBuffers()}wo!==void 0&&(l instanceof wo?t=!0:l instanceof ci&&(t=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new ye);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const t=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(t,n),this.renderTarget2.setSize(t,n);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(t,n)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class ts extends sr{constructor(e,r,t=null,n=null,o=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=t,this.clearColor=n,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new wt}render(e,r,t){const n=e.autoClear;e.autoClear=!1;let o,l;this.overrideMaterial!==null&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=l),e.autoClear=n}}const on=.01,vo=45/3,ui=3,Hr=45,To=Lr({__name:"CubeStrip",props:{particleWidth:{},particleHeight:{}},setup(f){const e=f,r=sn(null);let t,n,o=null,l=null,u=null,w=[];const b=Es({particleCount:400,particleWidth:e.particleWidth??20,particleHeight:e.particleHeight??20,minSpeed:2,maxSpeed:5,speedRandomness:.5,positionZRandomness:.5,rotationRandomness:.5,rotateParticles:!1,useSquares:!0,emitterDepth:100,bloomStrength:1.1,bloomRadius:0,showControls:!1}),M=Hr/2+10;function C(m){const G=on*b.particleWidth,Q=on*b.particleHeight,L=b.useSquares?new jt(G,Q):new An(G,Q,G),I=Math.floor(Math.random()*3);let H;switch(I){case 0:H=new wt(1,0,0);break;case 1:H=new wt(0,1,0);break;case 2:H=new wt(0,0,1);break;default:H=new wt(1,0,0)}const Y=new _t({color:H,transparent:!0,opacity:.7}),N=new je(L,Y),W=Hr+M*2;N.position.set(-45-M+m/(b.particleCount-1)*W,0,on*(Math.random()-.5)*b.positionZRandomness*b.emitterDepth);const V=on*(Math.random()*(b.maxSpeed-b.minSpeed)+b.minSpeed);return N.speed=V+on*(Math.random()-.5)*b.speedRandomness,N.rotationSpeed=new He(Math.PI/2,Math.PI/2,Math.PI/2).multiplyScalar(Math.random()*b.rotationRandomness+.5),N}function P(){t=new Vo;const m=ui*1.5,G=m*vo;n=new jo(-67.5/2,G/2,m/2,-4.5/2,.1,1e3),n.position.z=150,o=new Zo({antialias:!0}),o.setPixelRatio(window.devicePixelRatio),o.domElement&&(o.domElement.style.width="100%",o.domElement.style.height="auto");const Q=new ts(t,n);u=new mn(new ye(window.innerWidth,window.innerHeight),b.bloomStrength,b.bloomRadius,.1),l=new es(o),l.addPass(Q),l.addPass(u),z(),r.value&&r.value.appendChild(o.domElement),_(),E()}function _(){w.forEach(m=>t.remove(m)),w=[];for(let m=0;m<b.particleCount;m++){const G=C(m);w.push(G),t.add(G)}}function z(){if(!o||!l||!u)return;const m=window.innerWidth,G=m/vo;o.setSize(m,G),l.setSize(m,G),u.setSize(m,G),o.domElement&&(o.domElement.style.width="100%",o.domElement.style.height="auto")}function E(){requestAnimationFrame(E),w.forEach(m=>{m.position.x+=m.speed,!b.useSquares&&b.rotateParticles&&(m.rotation.x+=m.rotationSpeed.x*.016,m.rotation.y+=m.rotationSpeed.y*.016,m.rotation.z+=m.rotationSpeed.z*.016),m.position.x>Hr/2+M&&(w.indexOf(m),m.position.x=-45-M-on*(m.geometry instanceof An,m.geometry.parameters.width),m.position.y=0,m.position.z=on*(Math.random()-.5)*b.positionZRandomness*b.emitterDepth)}),l&&l.render()}return Wo(()=>{P(),window.addEventListener("resize",z)}),Xo(()=>{window.removeEventListener("resize",z),o==null||o.dispose()}),(m,G)=>(nr(),Nr("div",{ref_key:"container",ref:r,class:"relative w-full before:absolute before:inset-x-0 before:top-0 before:h-[2vw] before:bg-gradient-to-b before:from-black before:to-transparent after:absolute after:inset-x-0 after:bottom-0 after:h-[2vw] after:bg-gradient-to-t after:from-black after:to-transparent"},null,512))}}),ns=Is("tunnel",{state:()=>({activeProjectSlug:null,scrollPosition:0}),actions:{setActiveProject(f){this.activeProjectSlug=f},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(f){this.scrollPosition=f,console.log("Scroll position stored:",f)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function fi(f,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(f,t.key,t)}}function di(f,e,r){return e&&fi(f.prototype,e),f}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var at,Tr,It,Jt,en,Mn,rs,ln,jn,os,Zt,Nt,ss,is=function(){return at||typeof window<"u"&&(at=window.gsap)&&at.registerPlugin&&at},as=1,Pn=[],ve=[],Wt=[],Vn=Date.now,Jr=function(e,r){return r},pi=function(){var e=jn.core,r=e.bridge||{},t=e._scrollers,n=e._proxies;t.push.apply(t,ve),n.push.apply(n,Wt),ve=t,Wt=n,Jr=function(l,u){return r[l](u)}},tn=function(e,r){return~Wt.indexOf(e)&&Wt[Wt.indexOf(e)+1][r]},Zn=function(e){return!!~os.indexOf(e)},mt=function(e,r,t,n,o){return e.addEventListener(r,t,{passive:n!==!1,capture:!!o})},gt=function(e,r,t,n){return e.removeEventListener(r,t,!!n)},lr="scrollLeft",cr="scrollTop",eo=function(){return Zt&&Zt.isPressed||ve.cache++},Ir=function(e,r){var t=function n(o){if(o||o===0){as&&(It.history.scrollRestoration="manual");var l=Zt&&Zt.isPressed;o=n.v=Math.round(o)||(Zt&&Zt.iOS?1:0),e(o),n.cacheID=ve.cache,l&&Jr("ss",o)}else(r||ve.cache!==n.cacheID||Jr("ref"))&&(n.cacheID=ve.cache,n.v=e());return n.v+n.offset};return t.offset=0,e&&t},vt={s:lr,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Ir(function(f){return arguments.length?It.scrollTo(f,et.sc()):It.pageXOffset||Jt[lr]||en[lr]||Mn[lr]||0})},et={s:cr,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:vt,sc:Ir(function(f){return arguments.length?It.scrollTo(vt.sc(),f):It.pageYOffset||Jt[cr]||en[cr]||Mn[cr]||0})},Tt=function(e,r){return(r&&r._ctx&&r._ctx.selector||at.utils.toArray)(e)[0]||(typeof e=="string"&&at.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},nn=function(e,r){var t=r.s,n=r.sc;Zn(e)&&(e=Jt.scrollingElement||en);var o=ve.indexOf(e),l=n===et.sc?1:2;!~o&&(o=ve.push(e)-1),ve[o+l]||mt(e,"scroll",eo);var u=ve[o+l],w=u||(ve[o+l]=Ir(tn(e,t),!0)||(Zn(e)?n:Ir(function(b){return arguments.length?e[t]=b:e[t]})));return w.target=e,u||(w.smooth=at.getProperty(e,"scrollBehavior")==="smooth"),w},to=function(e,r,t){var n=e,o=e,l=Vn(),u=l,w=r||50,b=Math.max(500,w*3),M=function(z,E){var m=Vn();E||m-l>w?(o=n,n=z,u=l,l=m):t?n+=z:n=o+(z-o)/(m-u)*(l-u)},C=function(){o=n=t?0:n,u=l=0},P=function(z){var E=u,m=o,G=Vn();return(z||z===0)&&z!==n&&M(z),l===u||G-u>b?0:(n+(t?m:-m))/((t?G:l)-E)*1e3};return{update:M,reset:C,getVelocity:P}},Nn=function(e,r){return r&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},So=function(e){var r=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(r)>=Math.abs(t)?r:t},ls=function(){jn=at.core.globals().ScrollTrigger,jn&&jn.core&&pi()},cs=function(e){return at=e||is(),!Tr&&at&&typeof document<"u"&&document.body&&(It=window,Jt=document,en=Jt.documentElement,Mn=Jt.body,os=[It,Jt,en,Mn],at.utils.clamp,ss=at.core.context||function(){},ln="onpointerenter"in Mn?"pointer":"mouse",rs=qe.isTouch=It.matchMedia&&It.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in It||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Nt=qe.eventTypes=("ontouchstart"in en?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in en?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return as=0},500),ls(),Tr=1),Tr};vt.op=et;ve.cache=0;var qe=function(){function f(r){this.init(r)}var e=f.prototype;return e.init=function(t){Tr||cs(at)||console.warn("Please gsap.registerPlugin(Observer)"),jn||ls();var n=t.tolerance,o=t.dragMinimum,l=t.type,u=t.target,w=t.lineHeight,b=t.debounce,M=t.preventDefault,C=t.onStop,P=t.onStopDelay,_=t.ignore,z=t.wheelSpeed,E=t.event,m=t.onDragStart,G=t.onDragEnd,Q=t.onDrag,L=t.onPress,I=t.onRelease,H=t.onRight,Y=t.onLeft,N=t.onUp,W=t.onDown,V=t.onChangeX,O=t.onChangeY,te=t.onChange,k=t.onToggleX,Z=t.onToggleY,q=t.onHover,ne=t.onHoverEnd,j=t.onMove,U=t.ignoreCheck,T=t.isNormalizer,ee=t.onGestureStart,p=t.onGestureEnd,ce=t.onWheel,Ee=t.onEnable,Ye=t.onDisable,h=t.onClick,c=t.scrollSpeed,i=t.capture,s=t.allowClicks,x=t.lockAxis,A=t.onLockAxis;this.target=u=Tt(u)||en,this.vars=t,_&&(_=at.utils.toArray(_)),n=n||1e-9,o=o||0,z=z||1,c=c||1,l=l||"wheel,touch,pointer",b=b!==!1,w||(w=parseFloat(It.getComputedStyle(Mn).lineHeight)||22);var y,R,F,D,v,S,B,d=this,g=0,a=0,X=t.passive||!M&&t.passive!==!1,K=nn(u,vt),Ce=nn(u,et),ge=K(),me=Ce(),Te=~l.indexOf("touch")&&!~l.indexOf("pointer")&&Nt[0]==="pointerdown",ae=Zn(u),fe=u.ownerDocument||Jt,Me=[0,0,0],re=[0,0,0],xe=0,ue=function(){return xe=Vn()},Se=function(ie,Ie){return(d.event=ie)&&_&&~_.indexOf(ie.target)||Ie&&Te&&ie.pointerType!=="touch"||U&&U(ie,Ie)},We=function(){d._vx.reset(),d._vy.reset(),R.pause(),C&&C(d)},le=function(){var ie=d.deltaX=So(Me),Ie=d.deltaY=So(re),$=Math.abs(ie)>=n,de=Math.abs(Ie)>=n;te&&($||de)&&te(d,ie,Ie,Me,re),$&&(H&&d.deltaX>0&&H(d),Y&&d.deltaX<0&&Y(d),V&&V(d),k&&d.deltaX<0!=g<0&&k(d),g=d.deltaX,Me[0]=Me[1]=Me[2]=0),de&&(W&&d.deltaY>0&&W(d),N&&d.deltaY<0&&N(d),O&&O(d),Z&&d.deltaY<0!=a<0&&Z(d),a=d.deltaY,re[0]=re[1]=re[2]=0),(D||F)&&(j&&j(d),F&&(m&&F===1&&m(d),Q&&Q(d),F=0),D=!1),S&&!(S=!1)&&A&&A(d),v&&(ce(d),v=!1),y=0},Re=function(ie,Ie,$){Me[$]+=ie,re[$]+=Ie,d._vx.update(ie),d._vy.update(Ie),b?y||(y=requestAnimationFrame(le)):le()},tt=function(ie,Ie){x&&!B&&(d.axis=B=Math.abs(ie)>Math.abs(Ie)?"x":"y",S=!0),B!=="y"&&(Me[2]+=ie,d._vx.update(ie,!0)),B!=="x"&&(re[2]+=Ie,d._vy.update(Ie,!0)),b?y||(y=requestAnimationFrame(le)):le()},Le=function(ie){if(!Se(ie,1)){ie=Nn(ie,M);var Ie=ie.clientX,$=ie.clientY,de=Ie-d.x,se=$-d.y,pe=d.isDragging;d.x=Ie,d.y=$,(pe||(de||se)&&(Math.abs(d.startX-Ie)>=o||Math.abs(d.startY-$)>=o))&&(F=pe?2:1,pe||(d.isDragging=!0),tt(de,se))}},$e=d.onPress=function(he){Se(he,1)||he&&he.button||(d.axis=B=null,R.pause(),d.isPressed=!0,he=Nn(he),g=a=0,d.startX=d.x=he.clientX,d.startY=d.y=he.clientY,d._vx.reset(),d._vy.reset(),mt(T?u:fe,Nt[1],Le,X,!0),d.deltaX=d.deltaY=0,L&&L(d))},oe=d.onRelease=function(he){if(!Se(he,1)){gt(T?u:fe,Nt[1],Le,!0);var ie=!isNaN(d.y-d.startY),Ie=d.isDragging,$=Ie&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),de=Nn(he);!$&&ie&&(d._vx.reset(),d._vy.reset(),M&&s&&at.delayedCall(.08,function(){if(Vn()-xe>300&&!he.defaultPrevented){if(he.target.click)he.target.click();else if(fe.createEvent){var se=fe.createEvent("MouseEvents");se.initMouseEvent("click",!0,!0,It,1,de.screenX,de.screenY,de.clientX,de.clientY,!1,!1,!1,!1,0,null),he.target.dispatchEvent(se)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,C&&Ie&&!T&&R.restart(!0),F&&le(),G&&Ie&&G(d),I&&I(d,$)}},Ae=function(ie){return ie.touches&&ie.touches.length>1&&(d.isGesturing=!0)&&ee(ie,d.isDragging)},ze=function(){return(d.isGesturing=!1)||p(d)},Ne=function(ie){if(!Se(ie)){var Ie=K(),$=Ce();Re((Ie-ge)*c,($-me)*c,1),ge=Ie,me=$,C&&R.restart(!0)}},Be=function(ie){if(!Se(ie)){ie=Nn(ie,M),ce&&(v=!0);var Ie=(ie.deltaMode===1?w:ie.deltaMode===2?It.innerHeight:1)*z;Re(ie.deltaX*Ie,ie.deltaY*Ie,0),C&&!T&&R.restart(!0)}},ht=function(ie){if(!Se(ie)){var Ie=ie.clientX,$=ie.clientY,de=Ie-d.x,se=$-d.y;d.x=Ie,d.y=$,D=!0,C&&R.restart(!0),(de||se)&&tt(de,se)}},St=function(ie){d.event=ie,q(d)},Xt=function(ie){d.event=ie,ne(d)},Rn=function(ie){return Se(ie)||Nn(ie,M)&&h(d)};R=d._dc=at.delayedCall(P||.25,We).pause(),d.deltaX=d.deltaY=0,d._vx=to(0,50,!0),d._vy=to(0,50,!0),d.scrollX=K,d.scrollY=Ce,d.isDragging=d.isGesturing=d.isPressed=!1,ss(this),d.enable=function(he){return d.isEnabled||(mt(ae?fe:u,"scroll",eo),l.indexOf("scroll")>=0&&mt(ae?fe:u,"scroll",Ne,X,i),l.indexOf("wheel")>=0&&mt(u,"wheel",Be,X,i),(l.indexOf("touch")>=0&&rs||l.indexOf("pointer")>=0)&&(mt(u,Nt[0],$e,X,i),mt(fe,Nt[2],oe),mt(fe,Nt[3],oe),s&&mt(u,"click",ue,!0,!0),h&&mt(u,"click",Rn),ee&&mt(fe,"gesturestart",Ae),p&&mt(fe,"gestureend",ze),q&&mt(u,ln+"enter",St),ne&&mt(u,ln+"leave",Xt),j&&mt(u,ln+"move",ht)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=D=F=!1,d._vx.reset(),d._vy.reset(),ge=K(),me=Ce(),he&&he.type&&$e(he),Ee&&Ee(d)),d},d.disable=function(){d.isEnabled&&(Pn.filter(function(he){return he!==d&&Zn(he.target)}).length||gt(ae?fe:u,"scroll",eo),d.isPressed&&(d._vx.reset(),d._vy.reset(),gt(T?u:fe,Nt[1],Le,!0)),gt(ae?fe:u,"scroll",Ne,i),gt(u,"wheel",Be,i),gt(u,Nt[0],$e,i),gt(fe,Nt[2],oe),gt(fe,Nt[3],oe),gt(u,"click",ue,!0),gt(u,"click",Rn),gt(fe,"gesturestart",Ae),gt(fe,"gestureend",ze),gt(u,ln+"enter",St),gt(u,ln+"leave",Xt),gt(u,ln+"move",ht),d.isEnabled=d.isPressed=d.isDragging=!1,Ye&&Ye(d))},d.kill=d.revert=function(){d.disable();var he=Pn.indexOf(d);he>=0&&Pn.splice(he,1),Zt===d&&(Zt=0)},Pn.push(d),T&&Zn(u)&&(Zt=d),d.enable(E)},di(f,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),f}();qe.version="3.12.7";qe.create=function(f){return new qe(f)};qe.register=cs;qe.getAll=function(){return Pn.slice()};qe.getById=function(f){return Pn.filter(function(e){return e.vars.id===f})[0]};is()&&at.registerPlugin(qe);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var J,Sn,we,Oe,Et,ke,co,Ar,rr,qn,zn,ur,ft,Fr,no,xt,Co,Po,Cn,us,Yr,fs,yt,ro,ds,ps,$t,oo,uo,En,fo,kr,so,Wr,fr=1,dt=Date.now,Xr=dt(),Ot=0,Un=0,Mo=function(e,r,t){var n=Mt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+r+"Clamp"]=n,n?e.substr(6,e.length-7):e},Eo=function(e,r){return r&&(!Mt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},hi=function f(){return Un&&requestAnimationFrame(f)},Io=function(){return Fr=1},Ao=function(){return Fr=0},Ht=function(e){return e},Gn=function(e){return Math.round(e*1e5)/1e5||0},hs=function(){return typeof window<"u"},gs=function(){return J||hs()&&(J=window.gsap)&&J.registerPlugin&&J},yn=function(e){return!!~co.indexOf(e)},ms=function(e){return(e==="Height"?fo:we["inner"+e])||Et["client"+e]||ke["client"+e]},ys=function(e){return tn(e,"getBoundingClientRect")||(yn(e)?function(){return Er.width=we.innerWidth,Er.height=fo,Er}:function(){return Vt(e)})},gi=function(e,r,t){var n=t.d,o=t.d2,l=t.a;return(l=tn(e,"getBoundingClientRect"))?function(){return l()[n]}:function(){return(r?ms(o):e["client"+o])||0}},mi=function(e,r){return!r||~Wt.indexOf(e)?ys(e):function(){return Er}},Yt=function(e,r){var t=r.s,n=r.d2,o=r.d,l=r.a;return Math.max(0,(t="scroll"+n)&&(l=tn(e,t))?l()-ys(e)()[o]:yn(e)?(Et[t]||ke[t])-ms(n):e[t]-e["offset"+n])},dr=function(e,r){for(var t=0;t<Cn.length;t+=3)(!r||~r.indexOf(Cn[t+1]))&&e(Cn[t],Cn[t+1],Cn[t+2])},Mt=function(e){return typeof e=="string"},pt=function(e){return typeof e=="function"},Hn=function(e){return typeof e=="number"},cn=function(e){return typeof e=="object"},Bn=function(e,r,t){return e&&e.progress(r?0:1)&&t&&e.pause()},jr=function(e,r){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return r(e)}):r(e);t&&t.totalTime&&(e.callbackAnimation=t)}},wn=Math.abs,_s="left",xs="top",po="right",ho="bottom",pn="width",hn="height",Qn="Right",$n="Left",Kn="Top",Jn="Bottom",Qe="padding",Rt="margin",kn="Width",go="Height",Je="px",Dt=function(e){return we.getComputedStyle(e)},yi=function(e){var r=Dt(e).position;e.style.position=r==="absolute"||r==="fixed"?r:"relative"},ko=function(e,r){for(var t in r)t in e||(e[t]=r[t]);return e},Vt=function(e,r){var t=r&&Dt(e)[no]!=="matrix(1, 0, 0, 1, 0, 0)"&&J.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return t&&t.progress(0).kill(),n},Rr=function(e,r){var t=r.d2;return e["offset"+t]||e["client"+t]||0},bs=function(e){var r=[],t=e.labels,n=e.duration(),o;for(o in t)r.push(t[o]/n);return r},_i=function(e){return function(r){return J.utils.snap(bs(e),r)}},mo=function(e){var r=J.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(n,o){return n-o});return t?function(n,o,l){l===void 0&&(l=.001);var u;if(!o)return r(n);if(o>0){for(n-=l,u=0;u<t.length;u++)if(t[u]>=n)return t[u];return t[u-1]}else for(u=t.length,n+=l;u--;)if(t[u]<=n)return t[u];return t[0]}:function(n,o,l){l===void 0&&(l=.001);var u=r(n);return!o||Math.abs(u-n)<l||u-n<0==o<0?u:r(o<0?n-e:n+e)}},xi=function(e){return function(r,t){return mo(bs(e))(r,t.direction)}},pr=function(e,r,t,n){return t.split(",").forEach(function(o){return e(r,o,n)})},ot=function(e,r,t,n,o){return e.addEventListener(r,t,{passive:!n,capture:!!o})},rt=function(e,r,t,n){return e.removeEventListener(r,t,!!n)},hr=function(e,r,t){t=t&&t.wheelHandler,t&&(e(r,"wheel",t),e(r,"touchmove",t))},Ro={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},gr={toggleActions:"play",anticipatePin:0},Dr={top:0,left:0,center:.5,bottom:1,right:1},Sr=function(e,r){if(Mt(e)){var t=e.indexOf("="),n=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(n*=r/100),e=e.substr(0,t-1)),e=n+(e in Dr?Dr[e]*r:~e.indexOf("%")?parseFloat(e)*r/100:parseFloat(e)||0)}return e},mr=function(e,r,t,n,o,l,u,w){var b=o.startColor,M=o.endColor,C=o.fontSize,P=o.indent,_=o.fontWeight,z=Oe.createElement("div"),E=yn(t)||tn(t,"pinType")==="fixed",m=e.indexOf("scroller")!==-1,G=E?ke:t,Q=e.indexOf("start")!==-1,L=Q?b:M,I="border-color:"+L+";font-size:"+C+";color:"+L+";font-weight:"+_+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return I+="position:"+((m||w)&&E?"fixed;":"absolute;"),(m||w||!E)&&(I+=(n===et?po:ho)+":"+(l+parseFloat(P))+"px;"),u&&(I+="box-sizing:border-box;text-align:left;width:"+u.offsetWidth+"px;"),z._isStart=Q,z.setAttribute("class","gsap-marker-"+e+(r?" marker-"+r:"")),z.style.cssText=I,z.innerText=r||r===0?e+"-"+r:e,G.children[0]?G.insertBefore(z,G.children[0]):G.appendChild(z),z._offset=z["offset"+n.op.d2],Cr(z,0,n,Q),z},Cr=function(e,r,t,n){var o={display:"block"},l=t[n?"os2":"p2"],u=t[n?"p2":"os2"];e._isFlipped=n,o[t.a+"Percent"]=n?-100:0,o[t.a]=n?"1px":0,o["border"+l+kn]=1,o["border"+u+kn]=0,o[t.p]=r+"px",J.set(e,o)},be=[],io={},or,Do=function(){return dt()-Ot>34&&(or||(or=requestAnimationFrame(qt)))},vn=function(){(!yt||!yt.isPressed||yt.startX>ke.clientWidth)&&(ve.cache++,yt?or||(or=requestAnimationFrame(qt)):qt(),Ot||xn("scrollStart"),Ot=dt())},Vr=function(){ps=we.innerWidth,ds=we.innerHeight},Yn=function(e){ve.cache++,(e===!0||!ft&&!fs&&!Oe.fullscreenElement&&!Oe.webkitFullscreenElement&&(!ro||ps!==we.innerWidth||Math.abs(we.innerHeight-ds)>we.innerHeight*.25))&&Ar.restart(!0)},_n={},bi=[],ws=function f(){return rt(_e,"scrollEnd",f)||dn(!0)},xn=function(e){return _n[e]&&_n[e].map(function(r){return r()})||bi},Pt=[],vs=function(e){for(var r=0;r<Pt.length;r+=5)(!e||Pt[r+4]&&Pt[r+4].query===e)&&(Pt[r].style.cssText=Pt[r+1],Pt[r].getBBox&&Pt[r].setAttribute("transform",Pt[r+2]||""),Pt[r+3].uncache=1)},yo=function(e,r){var t;for(xt=0;xt<be.length;xt++)t=be[xt],t&&(!r||t._ctx===r)&&(e?t.kill(1):t.revert(!0,!0));kr=!0,r&&vs(r),r||xn("revert")},Ts=function(e,r){ve.cache++,(r||!bt)&&ve.forEach(function(t){return pt(t)&&t.cacheID++&&(t.rec=0)}),Mt(e)&&(we.history.scrollRestoration=uo=e)},bt,gn=0,Oo,wi=function(){if(Oo!==gn){var e=Oo=gn;requestAnimationFrame(function(){return e===gn&&dn(!0)})}},Ss=function(){ke.appendChild(En),fo=!yt&&En.offsetHeight||we.innerHeight,ke.removeChild(En)},Lo=function(e){return rr(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(r){return r.style.display=e?"none":"block"})},dn=function(e,r){if(Et=Oe.documentElement,ke=Oe.body,co=[we,Oe,Et,ke],Ot&&!e&&!kr){ot(_e,"scrollEnd",ws);return}Ss(),bt=_e.isRefreshing=!0,ve.forEach(function(n){return pt(n)&&++n.cacheID&&(n.rec=n())});var t=xn("refreshInit");us&&_e.sort(),r||yo(),ve.forEach(function(n){pt(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),be.slice(0).forEach(function(n){return n.refresh()}),kr=!1,be.forEach(function(n){if(n._subPinOffset&&n.pin){var o=n.vars.horizontal?"offsetWidth":"offsetHeight",l=n.pin[o];n.revert(!0,1),n.adjustPinSpacing(n.pin[o]-l),n.refresh()}}),so=1,Lo(!0),be.forEach(function(n){var o=Yt(n.scroller,n._dir),l=n.vars.end==="max"||n._endClamp&&n.end>o,u=n._startClamp&&n.start>=o;(l||u)&&n.setPositions(u?o-1:n.start,l?Math.max(u?o:n.start+1,o):n.end,!0)}),Lo(!1),so=0,t.forEach(function(n){return n&&n.render&&n.render(-1)}),ve.forEach(function(n){pt(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),Ts(uo,1),Ar.pause(),gn++,bt=2,qt(2),be.forEach(function(n){return pt(n.vars.onRefresh)&&n.vars.onRefresh(n)}),bt=_e.isRefreshing=!1,xn("refresh")},ao=0,Pr=1,er,qt=function(e){if(e===2||!bt&&!kr){_e.isUpdating=!0,er&&er.update(0);var r=be.length,t=dt(),n=t-Xr>=50,o=r&&be[0].scroll();if(Pr=ao>o?-1:1,bt||(ao=o),n&&(Ot&&!Fr&&t-Ot>200&&(Ot=0,xn("scrollEnd")),zn=Xr,Xr=t),Pr<0){for(xt=r;xt-- >0;)be[xt]&&be[xt].update(0,n);Pr=1}else for(xt=0;xt<r;xt++)be[xt]&&be[xt].update(0,n);_e.isUpdating=!1}or=0},lo=[_s,xs,ho,po,Rt+Jn,Rt+Qn,Rt+Kn,Rt+$n,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Mr=lo.concat([pn,hn,"boxSizing","max"+kn,"max"+go,"position",Rt,Qe,Qe+Kn,Qe+Qn,Qe+Jn,Qe+$n]),vi=function(e,r,t){In(t);var n=e._gsap;if(n.spacerIsNative)In(n.spacerState);else if(e._gsap.swappedIn){var o=r.parentNode;o&&(o.insertBefore(e,r),o.removeChild(r))}e._gsap.swappedIn=!1},Zr=function(e,r,t,n){if(!e._gsap.swappedIn){for(var o=lo.length,l=r.style,u=e.style,w;o--;)w=lo[o],l[w]=t[w];l.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(l.display="inline-block"),u[ho]=u[po]="auto",l.flexBasis=t.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[pn]=Rr(e,vt)+Je,l[hn]=Rr(e,et)+Je,l[Qe]=u[Rt]=u[xs]=u[_s]="0",In(n),u[pn]=u["max"+kn]=t[pn],u[hn]=u["max"+go]=t[hn],u[Qe]=t[Qe],e.parentNode!==r&&(e.parentNode.insertBefore(r,e),r.appendChild(e)),e._gsap.swappedIn=!0}},Ti=/([A-Z])/g,In=function(e){if(e){var r=e.t.style,t=e.length,n=0,o,l;for((e.t._gsap||J.core.getCache(e.t)).uncache=1;n<t;n+=2)l=e[n+1],o=e[n],l?r[o]=l:r[o]&&r.removeProperty(o.replace(Ti,"-$1").toLowerCase())}},yr=function(e){for(var r=Mr.length,t=e.style,n=[],o=0;o<r;o++)n.push(Mr[o],t[Mr[o]]);return n.t=e,n},Si=function(e,r,t){for(var n=[],o=e.length,l=t?8:0,u;l<o;l+=2)u=e[l],n.push(u,u in r?r[u]:e[l+1]);return n.t=e.t,n},Er={left:0,top:0},No=function(e,r,t,n,o,l,u,w,b,M,C,P,_,z){pt(e)&&(e=e(w)),Mt(e)&&e.substr(0,3)==="max"&&(e=P+(e.charAt(4)==="="?Sr("0"+e.substr(3),t):0));var E=_?_.time():0,m,G,Q;if(_&&_.seek(0),isNaN(e)||(e=+e),Hn(e))_&&(e=J.utils.mapRange(_.scrollTrigger.start,_.scrollTrigger.end,0,P,e)),u&&Cr(u,t,n,!0);else{pt(r)&&(r=r(w));var L=(e||"0").split(" "),I,H,Y,N;Q=Tt(r,w)||ke,I=Vt(Q)||{},(!I||!I.left&&!I.top)&&Dt(Q).display==="none"&&(N=Q.style.display,Q.style.display="block",I=Vt(Q),N?Q.style.display=N:Q.style.removeProperty("display")),H=Sr(L[0],I[n.d]),Y=Sr(L[1]||"0",t),e=I[n.p]-b[n.p]-M+H+o-Y,u&&Cr(u,Y,n,t-Y<20||u._isStart&&Y>20),t-=t-Y}if(z&&(w[z]=e||-.001,e<0&&(e=0)),l){var W=e+t,V=l._isStart;m="scroll"+n.d2,Cr(l,W,n,V&&W>20||!V&&(C?Math.max(ke[m],Et[m]):l.parentNode[m])<=W+1),C&&(b=Vt(u),C&&(l.style[n.op.p]=b[n.op.p]-n.op.m-l._offset+Je))}return _&&Q&&(m=Vt(Q),_.seek(P),G=Vt(Q),_._caScrollDist=m[n.p]-G[n.p],e=e/_._caScrollDist*P),_&&_.seek(E),_?e:Math.round(e)},Ci=/(webkit|moz|length|cssText|inset)/i,Bo=function(e,r,t,n){if(e.parentNode!==r){var o=e.style,l,u;if(r===ke){e._stOrig=o.cssText,u=Dt(e);for(l in u)!+l&&!Ci.test(l)&&u[l]&&typeof o[l]=="string"&&l!=="0"&&(o[l]=u[l]);o.top=t,o.left=n}else o.cssText=e._stOrig;J.core.getCache(e).uncache=1,r.appendChild(e)}},Cs=function(e,r,t){var n=r,o=n;return function(l){var u=Math.round(e());return u!==n&&u!==o&&Math.abs(u-n)>3&&Math.abs(u-o)>3&&(l=u,t&&t()),o=n,n=Math.round(l),n}},_r=function(e,r,t){var n={};n[r.p]="+="+t,J.set(e,n)},Fo=function(e,r){var t=nn(e,r),n="_scroll"+r.p2,o=function l(u,w,b,M,C){var P=l.tween,_=w.onComplete,z={};b=b||t();var E=Cs(t,b,function(){P.kill(),l.tween=0});return C=M&&C||0,M=M||u-b,P&&P.kill(),w[n]=u,w.inherit=!1,w.modifiers=z,z[n]=function(){return E(b+M*P.ratio+C*P.ratio*P.ratio)},w.onUpdate=function(){ve.cache++,l.tween&&qt()},w.onComplete=function(){l.tween=0,_&&_.call(P)},P=l.tween=J.to(e,w),P};return e[n]=t,t.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},ot(e,"wheel",t.wheelHandler),_e.isTouch&&ot(e,"touchmove",t.wheelHandler),o},_e=function(){function f(r,t){Sn||f.register(J)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),oo(this),this.init(r,t)}var e=f.prototype;return e.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Un){this.update=this.refresh=this.kill=Ht;return}t=ko(Mt(t)||Hn(t)||t.nodeType?{trigger:t}:t,gr);var o=t,l=o.onUpdate,u=o.toggleClass,w=o.id,b=o.onToggle,M=o.onRefresh,C=o.scrub,P=o.trigger,_=o.pin,z=o.pinSpacing,E=o.invalidateOnRefresh,m=o.anticipatePin,G=o.onScrubComplete,Q=o.onSnapComplete,L=o.once,I=o.snap,H=o.pinReparent,Y=o.pinSpacer,N=o.containerAnimation,W=o.fastScrollEnd,V=o.preventOverlaps,O=t.horizontal||t.containerAnimation&&t.horizontal!==!1?vt:et,te=!C&&C!==0,k=Tt(t.scroller||we),Z=J.core.getCache(k),q=yn(k),ne=("pinType"in t?t.pinType:tn(k,"pinType")||q&&"fixed")==="fixed",j=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],U=te&&t.toggleActions.split(" "),T="markers"in t?t.markers:gr.markers,ee=q?0:parseFloat(Dt(k)["border"+O.p2+kn])||0,p=this,ce=t.onRefreshInit&&function(){return t.onRefreshInit(p)},Ee=gi(k,q,O),Ye=mi(k,q),h=0,c=0,i=0,s=nn(k,O),x,A,y,R,F,D,v,S,B,d,g,a,X,K,Ce,ge,me,Te,ae,fe,Me,re,xe,ue,Se,We,le,Re,tt,Le,$e,oe,Ae,ze,Ne,Be,ht,St,Xt;if(p._startClamp=p._endClamp=!1,p._dir=O,m*=45,p.scroller=k,p.scroll=N?N.time.bind(N):s,R=s(),p.vars=t,n=n||t.animation,"refreshPriority"in t&&(us=1,t.refreshPriority===-9999&&(er=p)),Z.tweenScroll=Z.tweenScroll||{top:Fo(k,et),left:Fo(k,vt)},p.tweenTo=x=Z.tweenScroll[O.p],p.scrubDuration=function($){Ae=Hn($)&&$,Ae?oe?oe.duration($):oe=J.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Ae,paused:!0,onComplete:function(){return G&&G(p)}}):(oe&&oe.progress(1).kill(),oe=0)},n&&(n.vars.lazy=!1,n._initted&&!p.isReverted||n.vars.immediateRender!==!1&&t.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),p.animation=n.pause(),n.scrollTrigger=p,p.scrubDuration(C),Le=0,w||(w=n.vars.id)),I&&((!cn(I)||I.push)&&(I={snapTo:I}),"scrollBehavior"in ke.style&&J.set(q?[ke,Et]:k,{scrollBehavior:"auto"}),ve.forEach(function($){return pt($)&&$.target===(q?Oe.scrollingElement||Et:k)&&($.smooth=!1)}),y=pt(I.snapTo)?I.snapTo:I.snapTo==="labels"?_i(n):I.snapTo==="labelsDirectional"?xi(n):I.directional!==!1?function($,de){return mo(I.snapTo)($,dt()-c<500?0:de.direction)}:J.utils.snap(I.snapTo),ze=I.duration||{min:.1,max:2},ze=cn(ze)?qn(ze.min,ze.max):qn(ze,ze),Ne=J.delayedCall(I.delay||Ae/2||.1,function(){var $=s(),de=dt()-c<500,se=x.tween;if((de||Math.abs(p.getVelocity())<10)&&!se&&!Fr&&h!==$){var pe=($-D)/K,nt=n&&!te?n.totalProgress():pe,Pe=de?0:(nt-$e)/(dt()-zn)*1e3||0,Ze=J.utils.clamp(-pe,1-pe,wn(Pe/2)*Pe/.185),lt=pe+(I.inertia===!1?0:Ze),Xe,Fe,De=I,Lt=De.onStart,Ue=De.onInterrupt,Ct=De.onComplete;if(Xe=y(lt,p),Hn(Xe)||(Xe=lt),Fe=Math.max(0,Math.round(D+Xe*K)),$<=v&&$>=D&&Fe!==$){if(se&&!se._initted&&se.data<=wn(Fe-$))return;I.inertia===!1&&(Ze=Xe-pe),x(Fe,{duration:ze(wn(Math.max(wn(lt-nt),wn(Xe-nt))*.185/Pe/.05||0)),ease:I.ease||"power3",data:wn(Fe-$),onInterrupt:function(){return Ne.restart(!0)&&Ue&&Ue(p)},onComplete:function(){p.update(),h=s(),n&&!te&&(oe?oe.resetTo("totalProgress",Xe,n._tTime/n._tDur):n.progress(Xe)),Le=$e=n&&!te?n.totalProgress():p.progress,Q&&Q(p),Ct&&Ct(p)}},$,Ze*K,Fe-$-Ze*K),Lt&&Lt(p,x.tween)}}else p.isActive&&h!==$&&Ne.restart(!0)}).pause()),w&&(io[w]=p),P=p.trigger=Tt(P||_!==!0&&_),Xt=P&&P._gsap&&P._gsap.stRevert,Xt&&(Xt=Xt(p)),_=_===!0?P:Tt(_),Mt(u)&&(u={targets:P,className:u}),_&&(z===!1||z===Rt||(z=!z&&_.parentNode&&_.parentNode.style&&Dt(_.parentNode).display==="flex"?!1:Qe),p.pin=_,A=J.core.getCache(_),A.spacer?Ce=A.pinState:(Y&&(Y=Tt(Y),Y&&!Y.nodeType&&(Y=Y.current||Y.nativeElement),A.spacerIsNative=!!Y,Y&&(A.spacerState=yr(Y))),A.spacer=Te=Y||Oe.createElement("div"),Te.classList.add("pin-spacer"),w&&Te.classList.add("pin-spacer-"+w),A.pinState=Ce=yr(_)),t.force3D!==!1&&J.set(_,{force3D:!0}),p.spacer=Te=A.spacer,tt=Dt(_),ue=tt[z+O.os2],fe=J.getProperty(_),Me=J.quickSetter(_,O.a,Je),Zr(_,Te,tt),me=yr(_)),T){a=cn(T)?ko(T,Ro):Ro,d=mr("scroller-start",w,k,O,a,0),g=mr("scroller-end",w,k,O,a,0,d),ae=d["offset"+O.op.d2];var Rn=Tt(tn(k,"content")||k);S=this.markerStart=mr("start",w,Rn,O,a,ae,0,N),B=this.markerEnd=mr("end",w,Rn,O,a,ae,0,N),N&&(St=J.quickSetter([S,B],O.a,Je)),!ne&&!(Wt.length&&tn(k,"fixedMarkers")===!0)&&(yi(q?ke:k),J.set([d,g],{force3D:!0}),We=J.quickSetter(d,O.a,Je),Re=J.quickSetter(g,O.a,Je))}if(N){var he=N.vars.onUpdate,ie=N.vars.onUpdateParams;N.eventCallback("onUpdate",function(){p.update(0,0,1),he&&he.apply(N,ie||[])})}if(p.previous=function(){return be[be.indexOf(p)-1]},p.next=function(){return be[be.indexOf(p)+1]},p.revert=function($,de){if(!de)return p.kill(!0);var se=$!==!1||!p.enabled,pe=ft;se!==p.isReverted&&(se&&(Be=Math.max(s(),p.scroll.rec||0),i=p.progress,ht=n&&n.progress()),S&&[S,B,d,g].forEach(function(nt){return nt.style.display=se?"none":"block"}),se&&(ft=p,p.update(se)),_&&(!H||!p.isActive)&&(se?vi(_,Te,Ce):Zr(_,Te,Dt(_),Se)),se||p.update(se),ft=pe,p.isReverted=se)},p.refresh=function($,de,se,pe){if(!((ft||!p.enabled)&&!de)){if(_&&$&&Ot){ot(f,"scrollEnd",ws);return}!bt&&ce&&ce(p),ft=p,x.tween&&!se&&(x.tween.kill(),x.tween=0),oe&&oe.pause(),E&&n&&n.revert({kill:!1}).invalidate(),p.isReverted||p.revert(!0,!0),p._subPinOffset=!1;var nt=Ee(),Pe=Ye(),Ze=N?N.duration():Yt(k,O),lt=K<=.01,Xe=0,Fe=pe||0,De=cn(se)?se.end:t.end,Lt=t.endTrigger||P,Ue=cn(se)?se.start:t.start||(t.start===0||!P?0:_?"0 0":"0 100%"),Ct=p.pinnedContainer=t.pinnedContainer&&Tt(t.pinnedContainer,p),Ft=P&&Math.max(0,be.indexOf(p))||0,st=Ft,it,ct,rn,ir,ut,Ke,zt,zr,_o,Dn,Ut,On,ar;for(T&&cn(se)&&(On=J.getProperty(d,O.p),ar=J.getProperty(g,O.p));st-- >0;)Ke=be[st],Ke.end||Ke.refresh(0,1)||(ft=p),zt=Ke.pin,zt&&(zt===P||zt===_||zt===Ct)&&!Ke.isReverted&&(Dn||(Dn=[]),Dn.unshift(Ke),Ke.revert(!0,!0)),Ke!==be[st]&&(Ft--,st--);for(pt(Ue)&&(Ue=Ue(p)),Ue=Mo(Ue,"start",p),D=No(Ue,P,nt,O,s(),S,d,p,Pe,ee,ne,Ze,N,p._startClamp&&"_startClamp")||(_?-.001:0),pt(De)&&(De=De(p)),Mt(De)&&!De.indexOf("+=")&&(~De.indexOf(" ")?De=(Mt(Ue)?Ue.split(" ")[0]:"")+De:(Xe=Sr(De.substr(2),nt),De=Mt(Ue)?Ue:(N?J.utils.mapRange(0,N.duration(),N.scrollTrigger.start,N.scrollTrigger.end,D):D)+Xe,Lt=P)),De=Mo(De,"end",p),v=Math.max(D,No(De||(Lt?"100% 0":Ze),Lt,nt,O,s()+Xe,B,g,p,Pe,ee,ne,Ze,N,p._endClamp&&"_endClamp"))||-.001,Xe=0,st=Ft;st--;)Ke=be[st],zt=Ke.pin,zt&&Ke.start-Ke._pinPush<=D&&!N&&Ke.end>0&&(it=Ke.end-(p._startClamp?Math.max(0,Ke.start):Ke.start),(zt===P&&Ke.start-Ke._pinPush<D||zt===Ct)&&isNaN(Ue)&&(Xe+=it*(1-Ke.progress)),zt===_&&(Fe+=it));if(D+=Xe,v+=Xe,p._startClamp&&(p._startClamp+=Xe),p._endClamp&&!bt&&(p._endClamp=v||-.001,v=Math.min(v,Yt(k,O))),K=v-D||(D-=.01)&&.001,lt&&(i=J.utils.clamp(0,1,J.utils.normalize(D,v,Be))),p._pinPush=Fe,S&&Xe&&(it={},it[O.a]="+="+Xe,Ct&&(it[O.p]="-="+s()),J.set([S,B],it)),_&&!(so&&p.end>=Yt(k,O)))it=Dt(_),ir=O===et,rn=s(),re=parseFloat(fe(O.a))+Fe,!Ze&&v>1&&(Ut=(q?Oe.scrollingElement||Et:k).style,Ut={style:Ut,value:Ut["overflow"+O.a.toUpperCase()]},q&&Dt(ke)["overflow"+O.a.toUpperCase()]!=="scroll"&&(Ut.style["overflow"+O.a.toUpperCase()]="scroll")),Zr(_,Te,it),me=yr(_),ct=Vt(_,!0),zr=ne&&nn(k,ir?vt:et)(),z?(Se=[z+O.os2,K+Fe+Je],Se.t=Te,st=z===Qe?Rr(_,O)+K+Fe:0,st&&(Se.push(O.d,st+Je),Te.style.flexBasis!=="auto"&&(Te.style.flexBasis=st+Je)),In(Se),Ct&&be.forEach(function(Ln){Ln.pin===Ct&&Ln.vars.pinSpacing!==!1&&(Ln._subPinOffset=!0)}),ne&&s(Be)):(st=Rr(_,O),st&&Te.style.flexBasis!=="auto"&&(Te.style.flexBasis=st+Je)),ne&&(ut={top:ct.top+(ir?rn-D:zr)+Je,left:ct.left+(ir?zr:rn-D)+Je,boxSizing:"border-box",position:"fixed"},ut[pn]=ut["max"+kn]=Math.ceil(ct.width)+Je,ut[hn]=ut["max"+go]=Math.ceil(ct.height)+Je,ut[Rt]=ut[Rt+Kn]=ut[Rt+Qn]=ut[Rt+Jn]=ut[Rt+$n]="0",ut[Qe]=it[Qe],ut[Qe+Kn]=it[Qe+Kn],ut[Qe+Qn]=it[Qe+Qn],ut[Qe+Jn]=it[Qe+Jn],ut[Qe+$n]=it[Qe+$n],ge=Si(Ce,ut,H),bt&&s(0)),n?(_o=n._initted,Yr(1),n.render(n.duration(),!0,!0),xe=fe(O.a)-re+K+Fe,le=Math.abs(K-xe)>1,ne&&le&&ge.splice(ge.length-2,2),n.render(0,!0,!0),_o||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),Yr(0)):xe=K,Ut&&(Ut.value?Ut.style["overflow"+O.a.toUpperCase()]=Ut.value:Ut.style.removeProperty("overflow-"+O.a));else if(P&&s()&&!N)for(ct=P.parentNode;ct&&ct!==ke;)ct._pinOffset&&(D-=ct._pinOffset,v-=ct._pinOffset),ct=ct.parentNode;Dn&&Dn.forEach(function(Ln){return Ln.revert(!1,!0)}),p.start=D,p.end=v,R=F=bt?Be:s(),!N&&!bt&&(R<Be&&s(Be),p.scroll.rec=0),p.revert(!1,!0),c=dt(),Ne&&(h=-1,Ne.restart(!0)),ft=0,n&&te&&(n._initted||ht)&&n.progress()!==ht&&n.progress(ht||0,!0).render(n.time(),!0,!0),(lt||i!==p.progress||N||E||n&&!n._initted)&&(n&&!te&&n.totalProgress(N&&D<-.001&&!i?J.utils.normalize(D,v,0):i,!0),p.progress=lt||(R-D)/K===i?0:i),_&&z&&(Te._pinOffset=Math.round(p.progress*xe)),oe&&oe.invalidate(),isNaN(On)||(On-=J.getProperty(d,O.p),ar-=J.getProperty(g,O.p),_r(d,O,On),_r(S,O,On-(pe||0)),_r(g,O,ar),_r(B,O,ar-(pe||0))),lt&&!bt&&p.update(),M&&!bt&&!X&&(X=!0,M(p),X=!1)}},p.getVelocity=function(){return(s()-F)/(dt()-zn)*1e3||0},p.endAnimation=function(){Bn(p.callbackAnimation),n&&(oe?oe.progress(1):n.paused()?te||Bn(n,p.direction<0,1):Bn(n,n.reversed()))},p.labelToScroll=function($){return n&&n.labels&&(D||p.refresh()||D)+n.labels[$]/n.duration()*K||0},p.getTrailing=function($){var de=be.indexOf(p),se=p.direction>0?be.slice(0,de).reverse():be.slice(de+1);return(Mt($)?se.filter(function(pe){return pe.vars.preventOverlaps===$}):se).filter(function(pe){return p.direction>0?pe.end<=D:pe.start>=v})},p.update=function($,de,se){if(!(N&&!se&&!$)){var pe=bt===!0?Be:p.scroll(),nt=$?0:(pe-D)/K,Pe=nt<0?0:nt>1?1:nt||0,Ze=p.progress,lt,Xe,Fe,De,Lt,Ue,Ct,Ft;if(de&&(F=R,R=N?s():pe,I&&($e=Le,Le=n&&!te?n.totalProgress():Pe)),m&&_&&!ft&&!fr&&Ot&&(!Pe&&D<pe+(pe-F)/(dt()-zn)*m?Pe=1e-4:Pe===1&&v>pe+(pe-F)/(dt()-zn)*m&&(Pe=.9999)),Pe!==Ze&&p.enabled){if(lt=p.isActive=!!Pe&&Pe<1,Xe=!!Ze&&Ze<1,Ue=lt!==Xe,Lt=Ue||!!Pe!=!!Ze,p.direction=Pe>Ze?1:-1,p.progress=Pe,Lt&&!ft&&(Fe=Pe&&!Ze?0:Pe===1?1:Ze===1?2:3,te&&(De=!Ue&&U[Fe+1]!=="none"&&U[Fe+1]||U[Fe],Ft=n&&(De==="complete"||De==="reset"||De in n))),V&&(Ue||Ft)&&(Ft||C||!n)&&(pt(V)?V(p):p.getTrailing(V).forEach(function(rn){return rn.endAnimation()})),te||(oe&&!ft&&!fr?(oe._dp._time-oe._start!==oe._time&&oe.render(oe._dp._time-oe._start),oe.resetTo?oe.resetTo("totalProgress",Pe,n._tTime/n._tDur):(oe.vars.totalProgress=Pe,oe.invalidate().restart())):n&&n.totalProgress(Pe,!!(ft&&(c||$)))),_){if($&&z&&(Te.style[z+O.os2]=ue),!ne)Me(Gn(re+xe*Pe));else if(Lt){if(Ct=!$&&Pe>Ze&&v+1>pe&&pe+1>=Yt(k,O),H)if(!$&&(lt||Ct)){var st=Vt(_,!0),it=pe-D;Bo(_,ke,st.top+(O===et?it:0)+Je,st.left+(O===et?0:it)+Je)}else Bo(_,Te);In(lt||Ct?ge:me),le&&Pe<1&&lt||Me(re+(Pe===1&&!Ct?xe:0))}}I&&!x.tween&&!ft&&!fr&&Ne.restart(!0),u&&(Ue||L&&Pe&&(Pe<1||!Wr))&&rr(u.targets).forEach(function(rn){return rn.classList[lt||L?"add":"remove"](u.className)}),l&&!te&&!$&&l(p),Lt&&!ft?(te&&(Ft&&(De==="complete"?n.pause().totalProgress(1):De==="reset"?n.restart(!0).pause():De==="restart"?n.restart(!0):n[De]()),l&&l(p)),(Ue||!Wr)&&(b&&Ue&&jr(p,b),j[Fe]&&jr(p,j[Fe]),L&&(Pe===1?p.kill(!1,1):j[Fe]=0),Ue||(Fe=Pe===1?1:3,j[Fe]&&jr(p,j[Fe]))),W&&!lt&&Math.abs(p.getVelocity())>(Hn(W)?W:2500)&&(Bn(p.callbackAnimation),oe?oe.progress(1):Bn(n,De==="reverse"?1:!Pe,1))):te&&l&&!ft&&l(p)}if(Re){var ct=N?pe/N.duration()*(N._caScrollDist||0):pe;We(ct+(d._isFlipped?1:0)),Re(ct)}St&&St(-pe/N.duration()*(N._caScrollDist||0))}},p.enable=function($,de){p.enabled||(p.enabled=!0,ot(k,"resize",Yn),q||ot(k,"scroll",vn),ce&&ot(f,"refreshInit",ce),$!==!1&&(p.progress=i=0,R=F=h=s()),de!==!1&&p.refresh())},p.getTween=function($){return $&&x?x.tween:oe},p.setPositions=function($,de,se,pe){if(N){var nt=N.scrollTrigger,Pe=N.duration(),Ze=nt.end-nt.start;$=nt.start+Ze*$/Pe,de=nt.start+Ze*de/Pe}p.refresh(!1,!1,{start:Eo($,se&&!!p._startClamp),end:Eo(de,se&&!!p._endClamp)},pe),p.update()},p.adjustPinSpacing=function($){if(Se&&$){var de=Se.indexOf(O.d)+1;Se[de]=parseFloat(Se[de])+$+Je,Se[1]=parseFloat(Se[1])+$+Je,In(Se)}},p.disable=function($,de){if(p.enabled&&($!==!1&&p.revert(!0,!0),p.enabled=p.isActive=!1,de||oe&&oe.pause(),Be=0,A&&(A.uncache=1),ce&&rt(f,"refreshInit",ce),Ne&&(Ne.pause(),x.tween&&x.tween.kill()&&(x.tween=0)),!q)){for(var se=be.length;se--;)if(be[se].scroller===k&&be[se]!==p)return;rt(k,"resize",Yn),q||rt(k,"scroll",vn)}},p.kill=function($,de){p.disable($,de),oe&&!de&&oe.kill(),w&&delete io[w];var se=be.indexOf(p);se>=0&&be.splice(se,1),se===xt&&Pr>0&&xt--,se=0,be.forEach(function(pe){return pe.scroller===p.scroller&&(se=1)}),se||bt||(p.scroll.rec=0),n&&(n.scrollTrigger=null,$&&n.revert({kill:!1}),de||n.kill()),S&&[S,B,d,g].forEach(function(pe){return pe.parentNode&&pe.parentNode.removeChild(pe)}),er===p&&(er=0),_&&(A&&(A.uncache=1),se=0,be.forEach(function(pe){return pe.pin===_&&se++}),se||(A.spacer=0)),t.onKill&&t.onKill(p)},be.push(p),p.enable(!1,!1),Xt&&Xt(p),n&&n.add&&!K){var Ie=p.update;p.update=function(){p.update=Ie,ve.cache++,D||v||p.refresh()},J.delayedCall(.01,p.update),K=.01,D=v=0}else p.refresh();_&&wi()},f.register=function(t){return Sn||(J=t||gs(),hs()&&window.document&&f.enable(),Sn=Un),Sn},f.defaults=function(t){if(t)for(var n in t)gr[n]=t[n];return gr},f.disable=function(t,n){Un=0,be.forEach(function(l){return l[n?"kill":"disable"](t)}),rt(we,"wheel",vn),rt(Oe,"scroll",vn),clearInterval(ur),rt(Oe,"touchcancel",Ht),rt(ke,"touchstart",Ht),pr(rt,Oe,"pointerdown,touchstart,mousedown",Io),pr(rt,Oe,"pointerup,touchend,mouseup",Ao),Ar.kill(),dr(rt);for(var o=0;o<ve.length;o+=3)hr(rt,ve[o],ve[o+1]),hr(rt,ve[o],ve[o+2])},f.enable=function(){if(we=window,Oe=document,Et=Oe.documentElement,ke=Oe.body,J&&(rr=J.utils.toArray,qn=J.utils.clamp,oo=J.core.context||Ht,Yr=J.core.suppressOverwrites||Ht,uo=we.history.scrollRestoration||"auto",ao=we.pageYOffset||0,J.core.globals("ScrollTrigger",f),ke)){Un=1,En=document.createElement("div"),En.style.height="100vh",En.style.position="absolute",Ss(),hi(),qe.register(J),f.isTouch=qe.isTouch,$t=qe.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),ro=qe.isTouch===1,ot(we,"wheel",vn),co=[we,Oe,Et,ke],J.matchMedia?(f.matchMedia=function(b){var M=J.matchMedia(),C;for(C in b)M.add(C,b[C]);return M},J.addEventListener("matchMediaInit",function(){return yo()}),J.addEventListener("matchMediaRevert",function(){return vs()}),J.addEventListener("matchMedia",function(){dn(0,1),xn("matchMedia")}),J.matchMedia().add("(orientation: portrait)",function(){return Vr(),Vr})):console.warn("Requires GSAP 3.11.0 or later"),Vr(),ot(Oe,"scroll",vn);var t=ke.hasAttribute("style"),n=ke.style,o=n.borderTopStyle,l=J.core.Animation.prototype,u,w;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),n.borderTopStyle="solid",u=Vt(ke),et.m=Math.round(u.top+et.sc())||0,vt.m=Math.round(u.left+vt.sc())||0,o?n.borderTopStyle=o:n.removeProperty("border-top-style"),t||(ke.setAttribute("style",""),ke.removeAttribute("style")),ur=setInterval(Do,250),J.delayedCall(.5,function(){return fr=0}),ot(Oe,"touchcancel",Ht),ot(ke,"touchstart",Ht),pr(ot,Oe,"pointerdown,touchstart,mousedown",Io),pr(ot,Oe,"pointerup,touchend,mouseup",Ao),no=J.utils.checkPrefix("transform"),Mr.push(no),Sn=dt(),Ar=J.delayedCall(.2,dn).pause(),Cn=[Oe,"visibilitychange",function(){var b=we.innerWidth,M=we.innerHeight;Oe.hidden?(Co=b,Po=M):(Co!==b||Po!==M)&&Yn()},Oe,"DOMContentLoaded",dn,we,"load",dn,we,"resize",Yn],dr(ot),be.forEach(function(b){return b.enable(0,1)}),w=0;w<ve.length;w+=3)hr(rt,ve[w],ve[w+1]),hr(rt,ve[w],ve[w+2])}},f.config=function(t){"limitCallbacks"in t&&(Wr=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval(ur)||(ur=n)&&setInterval(Do,n),"ignoreMobileResize"in t&&(ro=f.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(dr(rt)||dr(ot,t.autoRefreshEvents||"none"),fs=(t.autoRefreshEvents+"").indexOf("resize")===-1)},f.scrollerProxy=function(t,n){var o=Tt(t),l=ve.indexOf(o),u=yn(o);~l&&ve.splice(l,u?6:2),n&&(u?Wt.unshift(we,n,ke,n,Et,n):Wt.unshift(o,n))},f.clearMatchMedia=function(t){be.forEach(function(n){return n._ctx&&n._ctx.query===t&&n._ctx.kill(!0,!0)})},f.isInViewport=function(t,n,o){var l=(Mt(t)?Tt(t):t).getBoundingClientRect(),u=l[o?pn:hn]*n||0;return o?l.right-u>0&&l.left+u<we.innerWidth:l.bottom-u>0&&l.top+u<we.innerHeight},f.positionInViewport=function(t,n,o){Mt(t)&&(t=Tt(t));var l=t.getBoundingClientRect(),u=l[o?pn:hn],w=n==null?u/2:n in Dr?Dr[n]*u:~n.indexOf("%")?parseFloat(n)*u/100:parseFloat(n)||0;return o?(l.left+w)/we.innerWidth:(l.top+w)/we.innerHeight},f.killAll=function(t){if(be.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),t!==!0){var n=_n.killAll||[];_n={},n.forEach(function(o){return o()})}},f}();_e.version="3.12.7";_e.saveStyles=function(f){return f?rr(f).forEach(function(e){if(e&&e.style){var r=Pt.indexOf(e);r>=0&&Pt.splice(r,5),Pt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),J.core.getCache(e),oo())}}):Pt};_e.revert=function(f,e){return yo(!f,e)};_e.create=function(f,e){return new _e(f,e)};_e.refresh=function(f){return f?Yn(!0):(Sn||_e.register())&&dn(!0)};_e.update=function(f){return++ve.cache&&qt(f===!0?2:0)};_e.clearScrollMemory=Ts;_e.maxScroll=function(f,e){return Yt(f,e?vt:et)};_e.getScrollFunc=function(f,e){return nn(Tt(f),e?vt:et)};_e.getById=function(f){return io[f]};_e.getAll=function(){return be.filter(function(f){return f.vars.id!=="ScrollSmoother"})};_e.isScrolling=function(){return!!Ot};_e.snapDirectional=mo;_e.addEventListener=function(f,e){var r=_n[f]||(_n[f]=[]);~r.indexOf(e)||r.push(e)};_e.removeEventListener=function(f,e){var r=_n[f],t=r&&r.indexOf(e);t>=0&&r.splice(t,1)};_e.batch=function(f,e){var r=[],t={},n=e.interval||.016,o=e.batchMax||1e9,l=function(b,M){var C=[],P=[],_=J.delayedCall(n,function(){M(C,P),C=[],P=[]}).pause();return function(z){C.length||_.restart(!0),C.push(z.trigger),P.push(z),o<=C.length&&_.progress(1)}},u;for(u in e)t[u]=u.substr(0,2)==="on"&&pt(e[u])&&u!=="onRefreshInit"?l(u,e[u]):e[u];return pt(o)&&(o=o(),ot(_e,"refresh",function(){return o=e.batchMax()})),rr(f).forEach(function(w){var b={};for(u in t)b[u]=t[u];b.trigger=w,r.push(_e.create(b))}),r};var zo=function(e,r,t,n){return r>n?e(n):r<0&&e(0),t>n?(n-r)/(t-r):t<0?r/(r-t):1},qr=function f(e,r){r===!0?e.style.removeProperty("touch-action"):e.style.touchAction=r===!0?"auto":r?"pan-"+r+(qe.isTouch?" pinch-zoom":""):"none",e===Et&&f(ke,r)},xr={auto:1,scroll:1},Pi=function(e){var r=e.event,t=e.target,n=e.axis,o=(r.changedTouches?r.changedTouches[0]:r).target,l=o._gsap||J.core.getCache(o),u=dt(),w;if(!l._isScrollT||u-l._isScrollT>2e3){for(;o&&o!==ke&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(xr[(w=Dt(o)).overflowY]||xr[w.overflowX]));)o=o.parentNode;l._isScroll=o&&o!==t&&!yn(o)&&(xr[(w=Dt(o)).overflowY]||xr[w.overflowX]),l._isScrollT=u}(l._isScroll||n==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},Ps=function(e,r,t,n){return qe.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:n=n&&Pi,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return t&&ot(Oe,qe.eventTypes[0],Go,!1,!0)},onDisable:function(){return rt(Oe,qe.eventTypes[0],Go,!0)}})},Mi=/(input|label|select|textarea)/i,Uo,Go=function(e){var r=Mi.test(e.target.tagName);(r||Uo)&&(e._gsapAllow=!0,Uo=r)},Ei=function(e){cn(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var r=e,t=r.normalizeScrollX,n=r.momentum,o=r.allowNestedScroll,l=r.onRelease,u,w,b=Tt(e.target)||Et,M=J.core.globals().ScrollSmoother,C=M&&M.get(),P=$t&&(e.content&&Tt(e.content)||C&&e.content!==!1&&!C.smooth()&&C.content()),_=nn(b,et),z=nn(b,vt),E=1,m=(qe.isTouch&&we.visualViewport?we.visualViewport.scale*we.visualViewport.width:we.outerWidth)/we.innerWidth,G=0,Q=pt(n)?function(){return n(u)}:function(){return n||2.8},L,I,H=Ps(b,e.type,!0,o),Y=function(){return I=!1},N=Ht,W=Ht,V=function(){w=Yt(b,et),W=qn($t?1:0,w),t&&(N=qn(0,Yt(b,vt))),L=gn},O=function(){P._gsap.y=Gn(parseFloat(P._gsap.y)+_.offset)+"px",P.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(P._gsap.y)+", 0, 1)",_.offset=_.cacheID=0},te=function(){if(I){requestAnimationFrame(Y);var T=Gn(u.deltaY/2),ee=W(_.v-T);if(P&&ee!==_.v+_.offset){_.offset=ee-_.v;var p=Gn((parseFloat(P&&P._gsap.y)||0)-_.offset);P.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+p+", 0, 1)",P._gsap.y=p+"px",_.cacheID=ve.cache,qt()}return!0}_.offset&&O(),I=!0},k,Z,q,ne,j=function(){V(),k.isActive()&&k.vars.scrollY>w&&(_()>w?k.progress(1)&&_(w):k.resetTo("scrollY",w))};return P&&J.set(P,{y:"+=0"}),e.ignoreCheck=function(U){return $t&&U.type==="touchmove"&&te()||E>1.05&&U.type!=="touchstart"||u.isGesturing||U.touches&&U.touches.length>1},e.onPress=function(){I=!1;var U=E;E=Gn((we.visualViewport&&we.visualViewport.scale||1)/m),k.pause(),U!==E&&qr(b,E>1.01?!0:t?!1:"x"),Z=z(),q=_(),V(),L=gn},e.onRelease=e.onGestureStart=function(U,T){if(_.offset&&O(),!T)ne.restart(!0);else{ve.cache++;var ee=Q(),p,ce;t&&(p=z(),ce=p+ee*.05*-U.velocityX/.227,ee*=zo(z,p,ce,Yt(b,vt)),k.vars.scrollX=N(ce)),p=_(),ce=p+ee*.05*-U.velocityY/.227,ee*=zo(_,p,ce,Yt(b,et)),k.vars.scrollY=W(ce),k.invalidate().duration(ee).play(.01),($t&&k.vars.scrollY>=w||p>=w-1)&&J.to({},{onUpdate:j,duration:ee})}l&&l(U)},e.onWheel=function(){k._ts&&k.pause(),dt()-G>1e3&&(L=0,G=dt())},e.onChange=function(U,T,ee,p,ce){if(gn!==L&&V(),T&&t&&z(N(p[2]===T?Z+(U.startX-U.x):z()+T-p[1])),ee){_.offset&&O();var Ee=ce[2]===ee,Ye=Ee?q+U.startY-U.y:_()+ee-ce[1],h=W(Ye);Ee&&Ye!==h&&(q+=h-Ye),_(h)}(ee||T)&&qt()},e.onEnable=function(){qr(b,t?!1:"x"),_e.addEventListener("refresh",j),ot(we,"resize",j),_.smooth&&(_.target.style.scrollBehavior="auto",_.smooth=z.smooth=!1),H.enable()},e.onDisable=function(){qr(b,!0),rt(we,"resize",j),_e.removeEventListener("refresh",j),H.kill()},e.lockAxis=e.lockAxis!==!1,u=new qe(e),u.iOS=$t,$t&&!_()&&_(1),$t&&J.ticker.add(Ht),ne=u._dc,k=J.to(u,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Cs(_,_(),function(){return k.pause()})},onUpdate:qt,onComplete:ne.vars.onComplete}),u};_e.sort=function(f){if(pt(f))return be.sort(f);var e=we.pageYOffset||0;return _e.getAll().forEach(function(r){return r._sortY=r.trigger?e+r.trigger.getBoundingClientRect().top:r.start+we.innerHeight}),be.sort(f||function(r,t){return(r.vars.refreshPriority||0)*-1e6+(r.vars.containerAnimation?1e6:r._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};_e.observe=function(f){return new qe(f)};_e.normalizeScroll=function(f){if(typeof f>"u")return yt;if(f===!0&&yt)return yt.enable();if(f===!1){yt&&yt.kill(),yt=f;return}var e=f instanceof qe?f:Ei(f);return yt&&yt.target===e.target&&yt.kill(),yn(e.target)&&(yt=e),e};_e.core={_getVelocityProp:to,_inputObserver:Ps,_scrollers:ve,_proxies:Wt,bridge:{ss:function(){Ot||xn("scrollStart"),Ot=dt()},ref:function(){return ft}}};gs()&&J.registerPlugin(_e);var tr=function(){var f=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(M){M.preventDefault(),t(++f%e.children.length)},!1);function r(M){return e.appendChild(M.dom),M}function t(M){for(var C=0;C<e.children.length;C++)e.children[C].style.display=C===M?"block":"none";f=M}var n=(performance||Date).now(),o=n,l=0,u=r(new tr.Panel("FPS","#0ff","#002")),w=r(new tr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var b=r(new tr.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:r,showPanel:t,begin:function(){n=(performance||Date).now()},end:function(){l++;var M=(performance||Date).now();if(w.update(M-n,200),M>=o+1e3&&(u.update(l*1e3/(M-o),100),o=M,l=0,b)){var C=performance.memory;b.update(C.usedJSHeapSize/1048576,C.jsHeapSizeLimit/1048576)}return M},update:function(){n=this.end()},domElement:e,setMode:t}};tr.Panel=function(f,e,r){var t=1/0,n=0,o=Math.round,l=o(window.devicePixelRatio||1),u=80*l,w=48*l,b=3*l,M=2*l,C=3*l,P=15*l,_=74*l,z=30*l,E=document.createElement("canvas");E.width=u,E.height=w,E.style.cssText="width:80px;height:48px";var m=E.getContext("2d");return m.font="bold "+9*l+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=r,m.fillRect(0,0,u,w),m.fillStyle=e,m.fillText(f,b,M),m.fillRect(C,P,_,z),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(C,P,_,z),{dom:E,update:function(G,Q){t=Math.min(t,G),n=Math.max(n,G),m.fillStyle=r,m.globalAlpha=1,m.fillRect(0,0,u,P),m.fillStyle=e,m.fillText(o(G)+" "+f+" ("+o(t)+"-"+o(n)+")",b,M),m.drawImage(E,C+l,P,_-l,z,C,P,_-l,z),m.fillRect(C+_-l,P,l,z),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(C+_-l,P,l,o((1-G/Q)*z))}}};class Ms extends Gs{constructor(e,r={}){const t=r.font;if(t===void 0)super();else{const n=t.generateShapes(e,r.size);r.depth===void 0&&(r.depth=50),r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),super(n,r)}this.type="TextGeometry"}}const Ii=Xs;class Or extends qo{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,r,t,n){const o=this,l=new Qo(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{r(o.parse(u))}catch(w){n?n(w):console.error(w),o.manager.itemError(e)}},t,n)}parse(e){const r=this;function t(h,c){if(h.nodeType!==1)return;const i=I(h);let s=!1,x=null;switch(h.nodeName){case"svg":c=z(h,c);break;case"style":o(h);break;case"g":c=z(h,c);break;case"path":c=z(h,c),h.hasAttribute("d")&&(x=n(h));break;case"rect":c=z(h,c),x=w(h);break;case"polygon":c=z(h,c),x=b(h);break;case"polyline":c=z(h,c),x=M(h);break;case"circle":c=z(h,c),x=C(h);break;case"ellipse":c=z(h,c),x=P(h);break;case"line":c=z(h,c),x=_(h);break;case"defs":s=!0;break;case"use":c=z(h,c);const R=(h.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),F=h.viewportElement.getElementById(R);F?t(F,c):console.warn("SVGLoader: 'use node' references non-existent node id: "+R);break}x&&(c.fill!==void 0&&c.fill!=="none"&&x.color.setStyle(c.fill,Ii),Y(x,ce),k.push(x),x.userData={node:h,style:c});const A=h.childNodes;for(let y=0;y<A.length;y++){const R=A[y];s&&R.nodeName!=="style"&&R.nodeName!=="defs"||t(R,c)}i&&(q.pop(),q.length>0?ce.copy(q[q.length-1]):ce.identity())}function n(h){const c=new Qt,i=new ye,s=new ye,x=new ye;let A=!0,y=!1;const R=h.getAttribute("d");if(R===""||R==="none")return null;const F=R.match(/[a-df-z][^a-df-z]*/ig);for(let D=0,v=F.length;D<v;D++){const S=F[D],B=S.charAt(0),d=S.slice(1).trim();A===!0&&(y=!0,A=!1);let g;switch(B){case"M":g=m(d);for(let a=0,X=g.length;a<X;a+=2)i.x=g[a+0],i.y=g[a+1],s.x=i.x,s.y=i.y,a===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),a===0&&x.copy(i);break;case"H":g=m(d);for(let a=0,X=g.length;a<X;a++)i.x=g[a],s.x=i.x,s.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&x.copy(i);break;case"V":g=m(d);for(let a=0,X=g.length;a<X;a++)i.y=g[a],s.x=i.x,s.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&x.copy(i);break;case"L":g=m(d);for(let a=0,X=g.length;a<X;a+=2)i.x=g[a+0],i.y=g[a+1],s.x=i.x,s.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&x.copy(i);break;case"C":g=m(d);for(let a=0,X=g.length;a<X;a+=6)c.bezierCurveTo(g[a+0],g[a+1],g[a+2],g[a+3],g[a+4],g[a+5]),s.x=g[a+2],s.y=g[a+3],i.x=g[a+4],i.y=g[a+5],a===0&&y===!0&&x.copy(i);break;case"S":g=m(d);for(let a=0,X=g.length;a<X;a+=4)c.bezierCurveTo(E(i.x,s.x),E(i.y,s.y),g[a+0],g[a+1],g[a+2],g[a+3]),s.x=g[a+0],s.y=g[a+1],i.x=g[a+2],i.y=g[a+3],a===0&&y===!0&&x.copy(i);break;case"Q":g=m(d);for(let a=0,X=g.length;a<X;a+=4)c.quadraticCurveTo(g[a+0],g[a+1],g[a+2],g[a+3]),s.x=g[a+0],s.y=g[a+1],i.x=g[a+2],i.y=g[a+3],a===0&&y===!0&&x.copy(i);break;case"T":g=m(d);for(let a=0,X=g.length;a<X;a+=2){const K=E(i.x,s.x),Ce=E(i.y,s.y);c.quadraticCurveTo(K,Ce,g[a+0],g[a+1]),s.x=K,s.y=Ce,i.x=g[a+0],i.y=g[a+1],a===0&&y===!0&&x.copy(i)}break;case"A":g=m(d,[3,4],7);for(let a=0,X=g.length;a<X;a+=7){if(g[a+5]==i.x&&g[a+6]==i.y)continue;const K=i.clone();i.x=g[a+5],i.y=g[a+6],s.x=i.x,s.y=i.y,l(c,g[a],g[a+1],g[a+2],g[a+3],g[a+4],K,i),a===0&&y===!0&&x.copy(i)}break;case"m":g=m(d);for(let a=0,X=g.length;a<X;a+=2)i.x+=g[a+0],i.y+=g[a+1],s.x=i.x,s.y=i.y,a===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),a===0&&x.copy(i);break;case"h":g=m(d);for(let a=0,X=g.length;a<X;a++)i.x+=g[a],s.x=i.x,s.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&x.copy(i);break;case"v":g=m(d);for(let a=0,X=g.length;a<X;a++)i.y+=g[a],s.x=i.x,s.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&x.copy(i);break;case"l":g=m(d);for(let a=0,X=g.length;a<X;a+=2)i.x+=g[a+0],i.y+=g[a+1],s.x=i.x,s.y=i.y,c.lineTo(i.x,i.y),a===0&&y===!0&&x.copy(i);break;case"c":g=m(d);for(let a=0,X=g.length;a<X;a+=6)c.bezierCurveTo(i.x+g[a+0],i.y+g[a+1],i.x+g[a+2],i.y+g[a+3],i.x+g[a+4],i.y+g[a+5]),s.x=i.x+g[a+2],s.y=i.y+g[a+3],i.x+=g[a+4],i.y+=g[a+5],a===0&&y===!0&&x.copy(i);break;case"s":g=m(d);for(let a=0,X=g.length;a<X;a+=4)c.bezierCurveTo(E(i.x,s.x),E(i.y,s.y),i.x+g[a+0],i.y+g[a+1],i.x+g[a+2],i.y+g[a+3]),s.x=i.x+g[a+0],s.y=i.y+g[a+1],i.x+=g[a+2],i.y+=g[a+3],a===0&&y===!0&&x.copy(i);break;case"q":g=m(d);for(let a=0,X=g.length;a<X;a+=4)c.quadraticCurveTo(i.x+g[a+0],i.y+g[a+1],i.x+g[a+2],i.y+g[a+3]),s.x=i.x+g[a+0],s.y=i.y+g[a+1],i.x+=g[a+2],i.y+=g[a+3],a===0&&y===!0&&x.copy(i);break;case"t":g=m(d);for(let a=0,X=g.length;a<X;a+=2){const K=E(i.x,s.x),Ce=E(i.y,s.y);c.quadraticCurveTo(K,Ce,i.x+g[a+0],i.y+g[a+1]),s.x=K,s.y=Ce,i.x=i.x+g[a+0],i.y=i.y+g[a+1],a===0&&y===!0&&x.copy(i)}break;case"a":g=m(d,[3,4],7);for(let a=0,X=g.length;a<X;a+=7){if(g[a+5]==0&&g[a+6]==0)continue;const K=i.clone();i.x+=g[a+5],i.y+=g[a+6],s.x=i.x,s.y=i.y,l(c,g[a],g[a+1],g[a+2],g[a+3],g[a+4],K,i),a===0&&y===!0&&x.copy(i)}break;case"Z":case"z":c.currentPath.autoClose=!0,c.currentPath.curves.length>0&&(i.copy(x),c.currentPath.currentPoint.copy(i),A=!0);break;default:console.warn(S)}y=!1}return c}function o(h){if(!(!h.sheet||!h.sheet.cssRules||!h.sheet.cssRules.length))for(let c=0;c<h.sheet.cssRules.length;c++){const i=h.sheet.cssRules[c];if(i.type!==1)continue;const s=i.selectorText.split(/,/gm).filter(Boolean).map(x=>x.trim());for(let x=0;x<s.length;x++){const A=Object.fromEntries(Object.entries(i.style).filter(([,y])=>y!==""));Z[s[x]]=Object.assign(Z[s[x]]||{},A)}}}function l(h,c,i,s,x,A,y,R){if(c==0||i==0){h.lineTo(R.x,R.y);return}s=s*Math.PI/180,c=Math.abs(c),i=Math.abs(i);const F=(y.x-R.x)/2,D=(y.y-R.y)/2,v=Math.cos(s)*F+Math.sin(s)*D,S=-Math.sin(s)*F+Math.cos(s)*D;let B=c*c,d=i*i;const g=v*v,a=S*S,X=g/B+a/d;if(X>1){const xe=Math.sqrt(X);c=xe*c,i=xe*i,B=c*c,d=i*i}const K=B*a+d*g,Ce=(B*d-K)/K;let ge=Math.sqrt(Math.max(0,Ce));x===A&&(ge=-ge);const me=ge*c*S/i,Te=-ge*i*v/c,ae=Math.cos(s)*me-Math.sin(s)*Te+(y.x+R.x)/2,fe=Math.sin(s)*me+Math.cos(s)*Te+(y.y+R.y)/2,Me=u(1,0,(v-me)/c,(S-Te)/i),re=u((v-me)/c,(S-Te)/i,(-v-me)/c,(-S-Te)/i)%(Math.PI*2);h.currentPath.absellipse(ae,fe,c,i,Me,Me+re,A===0,s)}function u(h,c,i,s){const x=h*i+c*s,A=Math.sqrt(h*h+c*c)*Math.sqrt(i*i+s*s);let y=Math.acos(Math.max(-1,Math.min(1,x/A)));return h*s-c*i<0&&(y=-y),y}function w(h){const c=L(h.getAttribute("x")||0),i=L(h.getAttribute("y")||0),s=L(h.getAttribute("rx")||h.getAttribute("ry")||0),x=L(h.getAttribute("ry")||h.getAttribute("rx")||0),A=L(h.getAttribute("width")),y=L(h.getAttribute("height")),R=1-.551915024494,F=new Qt;return F.moveTo(c+s,i),F.lineTo(c+A-s,i),(s!==0||x!==0)&&F.bezierCurveTo(c+A-s*R,i,c+A,i+x*R,c+A,i+x),F.lineTo(c+A,i+y-x),(s!==0||x!==0)&&F.bezierCurveTo(c+A,i+y-x*R,c+A-s*R,i+y,c+A-s,i+y),F.lineTo(c+s,i+y),(s!==0||x!==0)&&F.bezierCurveTo(c+s*R,i+y,c,i+y-x*R,c,i+y-x),F.lineTo(c,i+x),(s!==0||x!==0)&&F.bezierCurveTo(c,i+x*R,c+s*R,i,c+s,i),F}function b(h){function c(A,y,R){const F=L(y),D=L(R);x===0?s.moveTo(F,D):s.lineTo(F,D),x++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,s=new Qt;let x=0;return h.getAttribute("points").replace(i,c),s.currentPath.autoClose=!0,s}function M(h){function c(A,y,R){const F=L(y),D=L(R);x===0?s.moveTo(F,D):s.lineTo(F,D),x++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,s=new Qt;let x=0;return h.getAttribute("points").replace(i,c),s.currentPath.autoClose=!1,s}function C(h){const c=L(h.getAttribute("cx")||0),i=L(h.getAttribute("cy")||0),s=L(h.getAttribute("r")||0),x=new Ur;x.absarc(c,i,s,0,Math.PI*2);const A=new Qt;return A.subPaths.push(x),A}function P(h){const c=L(h.getAttribute("cx")||0),i=L(h.getAttribute("cy")||0),s=L(h.getAttribute("rx")||0),x=L(h.getAttribute("ry")||0),A=new Ur;A.absellipse(c,i,s,x,0,Math.PI*2);const y=new Qt;return y.subPaths.push(A),y}function _(h){const c=L(h.getAttribute("x1")||0),i=L(h.getAttribute("y1")||0),s=L(h.getAttribute("x2")||0),x=L(h.getAttribute("y2")||0),A=new Qt;return A.moveTo(c,i),A.lineTo(s,x),A.currentPath.autoClose=!1,A}function z(h,c){c=Object.assign({},c);let i={};if(h.hasAttribute("class")){const y=h.getAttribute("class").split(/\s/).filter(Boolean).map(R=>R.trim());for(let R=0;R<y.length;R++)i=Object.assign(i,Z["."+y[R]])}h.hasAttribute("id")&&(i=Object.assign(i,Z["#"+h.getAttribute("id")]));function s(y,R,F){F===void 0&&(F=function(v){return v.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),v}),h.hasAttribute(y)&&(c[R]=F(h.getAttribute(y))),i[y]&&(c[R]=F(i[y])),h.style&&h.style[y]!==""&&(c[R]=F(h.style[y]))}function x(y){return Math.max(0,Math.min(1,L(y)))}function A(y){return Math.max(0,L(y))}return s("fill","fill"),s("fill-opacity","fillOpacity",x),s("fill-rule","fillRule"),s("opacity","opacity",x),s("stroke","stroke"),s("stroke-opacity","strokeOpacity",x),s("stroke-width","strokeWidth",A),s("stroke-linejoin","strokeLineJoin"),s("stroke-linecap","strokeLineCap"),s("stroke-miterlimit","strokeMiterLimit",A),s("visibility","visibility"),c}function E(h,c){return h-(c-h)}function m(h,c,i){if(typeof h!="string")throw new TypeError("Invalid input: "+typeof h);const s={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},x=0,A=1,y=2,R=3;let F=x,D=!0,v="",S="";const B=[];function d(K,Ce,ge){const me=new SyntaxError('Unexpected character "'+K+'" at index '+Ce+".");throw me.partial=ge,me}function g(){v!==""&&(S===""?B.push(Number(v)):B.push(Number(v)*Math.pow(10,Number(S)))),v="",S=""}let a;const X=h.length;for(let K=0;K<X;K++){if(a=h[K],Array.isArray(c)&&c.includes(B.length%i)&&s.FLAGS.test(a)){F=A,v=a,g();continue}if(F===x){if(s.WHITESPACE.test(a))continue;if(s.DIGIT.test(a)||s.SIGN.test(a)){F=A,v=a;continue}if(s.POINT.test(a)){F=y,v=a;continue}s.COMMA.test(a)&&(D&&d(a,K,B),D=!0)}if(F===A){if(s.DIGIT.test(a)){v+=a;continue}if(s.POINT.test(a)){v+=a,F=y;continue}if(s.EXP.test(a)){F=R;continue}s.SIGN.test(a)&&v.length===1&&s.SIGN.test(v[0])&&d(a,K,B)}if(F===y){if(s.DIGIT.test(a)){v+=a;continue}if(s.EXP.test(a)){F=R;continue}s.POINT.test(a)&&v[v.length-1]==="."&&d(a,K,B)}if(F===R){if(s.DIGIT.test(a)){S+=a;continue}if(s.SIGN.test(a)){if(S===""){S+=a;continue}S.length===1&&s.SIGN.test(S)&&d(a,K,B)}}s.WHITESPACE.test(a)?(g(),F=x,D=!1):s.COMMA.test(a)?(g(),F=x,D=!0):s.SIGN.test(a)?(g(),F=A,v=a):s.POINT.test(a)?(g(),F=y,v=a):d(a,K,B)}return g(),B}const G=["mm","cm","in","pt","pc","px"],Q={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function L(h){let c="px";if(typeof h=="string"||h instanceof String)for(let s=0,x=G.length;s<x;s++){const A=G[s];if(h.endsWith(A)){c=A,h=h.substring(0,h.length-A.length);break}}let i;return c==="px"&&r.defaultUnit!=="px"?i=Q.in[r.defaultUnit]/r.defaultDPI:(i=Q[c][r.defaultUnit],i<0&&(i=Q[c].in*r.defaultDPI)),i*parseFloat(h)}function I(h){if(!(h.hasAttribute("transform")||h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))))return null;const c=H(h);return q.length>0&&c.premultiply(q[q.length-1]),ce.copy(c),q.push(c),c}function H(h){const c=new bn,i=ne;if(h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))){const s=L(h.getAttribute("x")),x=L(h.getAttribute("y"));c.translate(s,x)}if(h.hasAttribute("transform")){const s=h.getAttribute("transform").split(")");for(let x=s.length-1;x>=0;x--){const A=s[x].trim();if(A==="")continue;const y=A.indexOf("("),R=A.length;if(y>0&&y<R){const F=A.slice(0,y),D=m(A.slice(y+1));switch(i.identity(),F){case"translate":if(D.length>=1){const v=D[0];let S=0;D.length>=2&&(S=D[1]),i.translate(v,S)}break;case"rotate":if(D.length>=1){let v=0,S=0,B=0;v=D[0]*Math.PI/180,D.length>=3&&(S=D[1],B=D[2]),j.makeTranslation(-S,-B),U.makeRotation(v),T.multiplyMatrices(U,j),j.makeTranslation(S,B),i.multiplyMatrices(j,T)}break;case"scale":if(D.length>=1){const v=D[0];let S=v;D.length>=2&&(S=D[1]),i.scale(v,S)}break;case"skewX":D.length===1&&i.set(1,Math.tan(D[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":D.length===1&&i.set(1,0,0,Math.tan(D[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":D.length===6&&i.set(D[0],D[2],D[4],D[1],D[3],D[5],0,0,1);break}}c.premultiply(i)}}return c}function Y(h,c){function i(y){p.set(y.x,y.y,1).applyMatrix3(c),y.set(p.x,p.y)}function s(y){const R=y.xRadius,F=y.yRadius,D=Math.cos(y.aRotation),v=Math.sin(y.aRotation),S=new He(R*D,R*v,0),B=new He(-F*v,F*D,0),d=S.applyMatrix3(c),g=B.applyMatrix3(c),a=ne.set(d.x,g.x,0,d.y,g.y,0,0,0,1),X=j.copy(a).invert(),ge=U.copy(X).transpose().multiply(X).elements,me=te(ge[0],ge[1],ge[4]),Te=Math.sqrt(me.rt1),ae=Math.sqrt(me.rt2);if(y.xRadius=1/Te,y.yRadius=1/ae,y.aRotation=Math.atan2(me.sn,me.cs),!((y.aEndAngle-y.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const Me=j.set(Te,0,0,0,ae,0,0,0,1),re=U.set(me.cs,me.sn,0,-me.sn,me.cs,0,0,0,1),xe=Me.multiply(re).multiply(a),ue=Se=>{const{x:We,y:le}=new He(Math.cos(Se),Math.sin(Se),0).applyMatrix3(xe);return Math.atan2(le,We)};y.aStartAngle=ue(y.aStartAngle),y.aEndAngle=ue(y.aEndAngle),N(c)&&(y.aClockwise=!y.aClockwise)}}function x(y){const R=V(c),F=O(c);y.xRadius*=R,y.yRadius*=F;const D=R>Number.EPSILON?Math.atan2(c.elements[1],c.elements[0]):Math.atan2(-c.elements[3],c.elements[4]);y.aRotation+=D,N(c)&&(y.aStartAngle*=-1,y.aEndAngle*=-1,y.aClockwise=!y.aClockwise)}const A=h.subPaths;for(let y=0,R=A.length;y<R;y++){const D=A[y].curves;for(let v=0;v<D.length;v++){const S=D[v];S.isLineCurve?(i(S.v1),i(S.v2)):S.isCubicBezierCurve?(i(S.v0),i(S.v1),i(S.v2),i(S.v3)):S.isQuadraticBezierCurve?(i(S.v0),i(S.v1),i(S.v2)):S.isEllipseCurve&&(ee.set(S.aX,S.aY),i(ee),S.aX=ee.x,S.aY=ee.y,W(c)?s(S):x(S))}}}function N(h){const c=h.elements;return c[0]*c[4]-c[1]*c[3]<0}function W(h){const c=h.elements,i=c[0]*c[3]+c[1]*c[4];if(i===0)return!1;const s=V(h),x=O(h);return Math.abs(i/(s*x))>Number.EPSILON}function V(h){const c=h.elements;return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function O(h){const c=h.elements;return Math.sqrt(c[3]*c[3]+c[4]*c[4])}function te(h,c,i){let s,x,A,y,R;const F=h+i,D=h-i,v=Math.sqrt(D*D+4*c*c);return F>0?(s=.5*(F+v),R=1/s,x=h*R*i-c*R*c):F<0?x=.5*(F-v):(s=.5*v,x=-.5*v),D>0?A=D+v:A=D-v,Math.abs(A)>2*Math.abs(c)?(R=-2*c/A,y=1/Math.sqrt(1+R*R),A=R*y):Math.abs(c)===0?(A=1,y=0):(R=-.5*A/c,A=1/Math.sqrt(1+R*R),y=R*A),D>0&&(R=A,A=-y,y=R),{rt1:s,rt2:x,cs:A,sn:y}}const k=[],Z={},q=[],ne=new bn,j=new bn,U=new bn,T=new bn,ee=new ye,p=new He,ce=new bn,Ee=new DOMParser().parseFromString(e,"image/svg+xml");return t(Ee.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:k,xml:Ee.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},n={loc:t.ORIGIN,t:0};function o(E,m,G,Q){const L=E.x,I=m.x,H=G.x,Y=Q.x,N=E.y,W=m.y,V=G.y,O=Q.y,te=(Y-H)*(N-V)-(O-V)*(L-H),k=(I-L)*(N-V)-(W-N)*(L-H),Z=(O-V)*(I-L)-(Y-H)*(W-N),q=te/Z,ne=k/Z;if(Z===0&&te!==0||q<=0||q>=1||ne<0||ne>1)return null;if(te===0&&Z===0){for(let j=0;j<2;j++)if(l(j===0?G:Q,E,m),n.loc==t.ORIGIN){const U=j===0?G:Q;return{x:U.x,y:U.y,t:n.t}}else if(n.loc==t.BETWEEN){const U=+(L+n.t*(I-L)).toPrecision(10),T=+(N+n.t*(W-N)).toPrecision(10);return{x:U,y:T,t:n.t}}return null}else{for(let T=0;T<2;T++)if(l(T===0?G:Q,E,m),n.loc==t.ORIGIN){const ee=T===0?G:Q;return{x:ee.x,y:ee.y,t:n.t}}const j=+(L+q*(I-L)).toPrecision(10),U=+(N+q*(W-N)).toPrecision(10);return{x:j,y:U,t:q}}}function l(E,m,G){const Q=G.x-m.x,L=G.y-m.y,I=E.x-m.x,H=E.y-m.y,Y=Q*H-I*L;if(E.x===m.x&&E.y===m.y){n.loc=t.ORIGIN,n.t=0;return}if(E.x===G.x&&E.y===G.y){n.loc=t.DESTINATION,n.t=1;return}if(Y<-Number.EPSILON){n.loc=t.LEFT;return}if(Y>Number.EPSILON){n.loc=t.RIGHT;return}if(Q*I<0||L*H<0){n.loc=t.BEHIND;return}if(Math.sqrt(Q*Q+L*L)<Math.sqrt(I*I+H*H)){n.loc=t.BEYOND;return}let N;Q!==0?N=I/Q:N=H/L,n.loc=t.BETWEEN,n.t=N}function u(E,m){const G=[],Q=[];for(let L=1;L<E.length;L++){const I=E[L-1],H=E[L];for(let Y=1;Y<m.length;Y++){const N=m[Y-1],W=m[Y],V=o(I,H,N,W);V!==null&&G.find(O=>O.t<=V.t+Number.EPSILON&&O.t>=V.t-Number.EPSILON)===void 0&&(G.push(V),Q.push(new ye(V.x,V.y)))}}return Q}function w(E,m,G){const Q=new ye;m.getCenter(Q);const L=[];return G.forEach(I=>{I.boundingBox.containsPoint(Q)&&u(E,I.points).forEach(Y=>{L.push({identifier:I.identifier,isCW:I.isCW,point:Y})})}),L.sort((I,H)=>I.point.x-H.point.x),L}function b(E,m,G,Q,L){(L==null||L==="")&&(L="nonzero");const I=new ye;E.boundingBox.getCenter(I);const H=[new ye(G,I.y),new ye(Q,I.y)],Y=w(H,E.boundingBox,m);Y.sort((k,Z)=>k.point.x-Z.point.x);const N=[],W=[];Y.forEach(k=>{k.identifier===E.identifier?N.push(k):W.push(k)});const V=N[0].point.x,O=[];let te=0;for(;te<W.length&&W[te].point.x<V;)O.length>0&&O[O.length-1]===W[te].identifier?O.pop():O.push(W[te].identifier),te++;if(O.push(E.identifier),L==="evenodd"){const k=O.length%2===0,Z=O[O.length-2];return{identifier:E.identifier,isHole:k,for:Z}}else if(L==="nonzero"){let k=!0,Z=null,q=null;for(let ne=0;ne<O.length;ne++){const j=O[ne];k?(q=m[j].isCW,k=!1,Z=j):q!==m[j].isCW&&(q=m[j].isCW,k=!0)}return{identifier:E.identifier,isHole:k,for:Z}}else console.warn('fill-rule: "'+L+'" is currently not implemented.')}let M=999999999,C=-999999999,P=e.subPaths.map(E=>{const m=E.getPoints();let G=-999999999,Q=999999999,L=-999999999,I=999999999;for(let H=0;H<m.length;H++){const Y=m[H];Y.y>G&&(G=Y.y),Y.y<Q&&(Q=Y.y),Y.x>L&&(L=Y.x),Y.x<I&&(I=Y.x)}return C<=L&&(C=L+1),M>=I&&(M=I-1),{curves:E.curves,points:m,isCW:Ys.isClockWise(m),identifier:-1,boundingBox:new Hs(new ye(I,Q),new ye(L,G))}});P=P.filter(E=>E.points.length>1);for(let E=0;E<P.length;E++)P[E].identifier=E;const _=P.map(E=>b(E,P,M,C,e.userData?e.userData.style.fillRule:void 0)),z=[];return P.forEach(E=>{if(!_[E.identifier].isHole){const G=new Ws;G.curves=E.curves,_.filter(L=>L.isHole&&L.for===E.identifier).forEach(L=>{const I=P[L.identifier],H=new Ur;H.curves=I.curves,G.holes.push(H)}),z.push(G)}}),z}static getStrokeStyle(e,r,t,n,o){return e=e!==void 0?e:1,r=r!==void 0?r:"#000",t=t!==void 0?t:"miter",n=n!==void 0?n:"butt",o=o!==void 0?o:4,{strokeColor:r,strokeWidth:e,strokeLineJoin:t,strokeLineCap:n,strokeMiterLimit:o}}static pointsToStroke(e,r,t,n){const o=[],l=[],u=[];if(Or.pointsToStrokeWithBuffers(e,r,t,n,o,l,u)===0)return null;const w=new Br;return w.setAttribute("position",new Wn(o,3)),w.setAttribute("normal",new Wn(l,3)),w.setAttribute("uv",new Wn(u,2)),w}static pointsToStrokeWithBuffers(e,r,t,n,o,l,u,w){const b=new ye,M=new ye,C=new ye,P=new ye,_=new ye,z=new ye,E=new ye,m=new ye,G=new ye,Q=new ye,L=new ye,I=new ye,H=new ye,Y=new ye,N=new ye,W=new ye,V=new ye;t=t!==void 0?t:12,n=n!==void 0?n:.001,w=w!==void 0?w:0,e=D(e);const O=e.length;if(O<2)return 0;const te=e[0].equals(e[O-1]);let k,Z=e[0],q;const ne=r.strokeWidth/2,j=1/(O-1);let U=0,T,ee,p,ce,Ee=!1,Ye=0,h=w*3,c=w*2;i(e[0],e[1],b).multiplyScalar(ne),m.copy(e[0]).sub(b),G.copy(e[0]).add(b),Q.copy(m),L.copy(G);for(let v=1;v<O;v++){k=e[v],v===O-1?te?q=e[1]:q=void 0:q=e[v+1];const S=b;if(i(Z,k,S),C.copy(S).multiplyScalar(ne),I.copy(k).sub(C),H.copy(k).add(C),T=U+j,ee=!1,q!==void 0){i(k,q,M),C.copy(M).multiplyScalar(ne),Y.copy(k).sub(C),N.copy(k).add(C),p=!0,C.subVectors(q,Z),S.dot(C)<0&&(p=!1),v===1&&(Ee=p),C.subVectors(q,k),C.normalize();const B=Math.abs(S.dot(C));if(B>Number.EPSILON){const d=ne/B;C.multiplyScalar(-d),P.subVectors(k,Z),_.copy(P).setLength(d).add(C),W.copy(_).negate();const g=_.length(),a=P.length();P.divideScalar(a),z.subVectors(q,k);const X=z.length();switch(z.divideScalar(X),P.dot(W)<a&&z.dot(W)<X&&(ee=!0),V.copy(_).add(k),W.add(k),ce=!1,ee?p?(N.copy(W),H.copy(W)):(Y.copy(W),I.copy(W)):A(),r.strokeLineJoin){case"bevel":y(p,ee,T);break;case"round":R(p,ee),p?x(k,I,Y,T,0):x(k,N,H,T,1);break;case"miter":case"miter-clip":default:const K=ne*r.strokeMiterLimit/g;if(K<1)if(r.strokeLineJoin!=="miter-clip"){y(p,ee,T);break}else R(p,ee),p?(z.subVectors(V,I).multiplyScalar(K).add(I),E.subVectors(V,Y).multiplyScalar(K).add(Y),s(I,T,0),s(z,T,0),s(k,T,.5),s(k,T,.5),s(z,T,0),s(E,T,0),s(k,T,.5),s(E,T,0),s(Y,T,0)):(z.subVectors(V,H).multiplyScalar(K).add(H),E.subVectors(V,N).multiplyScalar(K).add(N),s(H,T,1),s(z,T,1),s(k,T,.5),s(k,T,.5),s(z,T,1),s(E,T,1),s(k,T,.5),s(E,T,1),s(N,T,1));else ee?(p?(s(G,U,1),s(m,U,0),s(V,T,0),s(G,U,1),s(V,T,0),s(W,T,1)):(s(G,U,1),s(m,U,0),s(V,T,1),s(m,U,0),s(W,T,0),s(V,T,1)),p?Y.copy(V):N.copy(V)):p?(s(I,T,0),s(V,T,0),s(k,T,.5),s(k,T,.5),s(V,T,0),s(Y,T,0)):(s(H,T,1),s(V,T,1),s(k,T,.5),s(k,T,.5),s(V,T,1),s(N,T,1)),ce=!0;break}}else A()}else A();!te&&v===O-1&&F(e[0],Q,L,p,!0,U),U=T,Z=k,m.copy(Y),G.copy(N)}if(!te)F(k,I,H,p,!1,T);else if(ee&&o){let v=V,S=W;Ee!==p&&(v=W,S=V),p?(ce||Ee)&&(S.toArray(o,0*3),S.toArray(o,3*3),ce&&v.toArray(o,1*3)):(ce||!Ee)&&(S.toArray(o,1*3),S.toArray(o,3*3),ce&&v.toArray(o,0*3))}return Ye;function i(v,S,B){return B.subVectors(S,v),B.set(-B.y,B.x).normalize()}function s(v,S,B){o&&(o[h]=v.x,o[h+1]=v.y,o[h+2]=0,l&&(l[h]=0,l[h+1]=0,l[h+2]=1),h+=3,u&&(u[c]=S,u[c+1]=B,c+=2)),Ye+=3}function x(v,S,B,d,g){b.copy(S).sub(v).normalize(),M.copy(B).sub(v).normalize();let a=Math.PI;const X=b.dot(M);Math.abs(X)<1&&(a=Math.abs(Math.acos(X))),a/=t,C.copy(S);for(let K=0,Ce=t-1;K<Ce;K++)P.copy(C).rotateAround(v,a),s(C,d,g),s(P,d,g),s(v,d,.5),C.copy(P);s(P,d,g),s(B,d,g),s(v,d,.5)}function A(){s(G,U,1),s(m,U,0),s(I,T,0),s(G,U,1),s(I,T,0),s(H,T,1)}function y(v,S,B){S?v?(s(G,U,1),s(m,U,0),s(I,T,0),s(G,U,1),s(I,T,0),s(W,T,1),s(I,B,0),s(Y,B,0),s(W,B,.5)):(s(G,U,1),s(m,U,0),s(H,T,1),s(m,U,0),s(W,T,0),s(H,T,1),s(H,B,1),s(W,B,0),s(N,B,1)):v?(s(I,B,0),s(Y,B,0),s(k,B,.5)):(s(H,B,1),s(N,B,0),s(k,B,.5))}function R(v,S){S&&(v?(s(G,U,1),s(m,U,0),s(I,T,0),s(G,U,1),s(I,T,0),s(W,T,1),s(I,U,0),s(k,T,.5),s(W,T,1),s(k,T,.5),s(Y,U,0),s(W,T,1)):(s(G,U,1),s(m,U,0),s(H,T,1),s(m,U,0),s(W,T,0),s(H,T,1),s(H,U,1),s(W,T,0),s(k,T,.5),s(k,T,.5),s(W,T,0),s(N,U,1)))}function F(v,S,B,d,g,a){switch(r.strokeLineCap){case"round":g?x(v,B,S,a,.5):x(v,S,B,a,.5);break;case"square":if(g)b.subVectors(S,v),M.set(b.y,-b.x),C.addVectors(b,M).add(v),P.subVectors(M,b).add(v),d?(C.toArray(o,1*3),P.toArray(o,0*3),P.toArray(o,3*3)):(C.toArray(o,1*3),u[3*2+1]===1?P.toArray(o,3*3):C.toArray(o,3*3),P.toArray(o,0*3));else{b.subVectors(B,v),M.set(b.y,-b.x),C.addVectors(b,M).add(v),P.subVectors(M,b).add(v);const X=o.length;d?(C.toArray(o,X-1*3),P.toArray(o,X-2*3),P.toArray(o,X-4*3)):(P.toArray(o,X-2*3),C.toArray(o,X-1*3),P.toArray(o,X-4*3))}break}}function D(v){let S=!1;for(let d=1,g=v.length-1;d<g;d++)if(v[d].distanceTo(v[d+1])<n){S=!0;break}if(!S)return v;const B=[];B.push(v[0]);for(let d=1,g=v.length-1;d<g;d++)v[d].distanceTo(v[d+1])>=n&&B.push(v[d]);return B.push(v[v.length-1]),B}}}function Ai(f,e,r,t){const{CUBE_SIZE:n,FIRST_CUBE_Z:o}=t,l=8,u=24,w=.075,b=200;let M,C=[],P=[],_=[],z=[];const E=(I,H,Y,N)=>{const W=new An(I,I,I),V=new Xn(W),O=[new Bt({color:16711680,transparent:!0,opacity:N.opacity,blending:At}),new Bt({color:65280,transparent:!0,opacity:N.opacity,blending:At}),new Bt({color:255,transparent:!0,opacity:N.opacity,blending:At}),new Bt({color:65535,transparent:!0,opacity:N.opacity,blending:At}),new Bt({color:16711935,transparent:!0,opacity:N.opacity,blending:At}),new Bt({color:16776960,transparent:!0,opacity:N.opacity,blending:At})],te=new kt,k=V.getAttribute("position").array,Z=[];for(let j=0;j<k.length/3;j+=2)Z.push(j,j+1);const q=Array(6).fill(null).map(()=>new Br),ne=Array(6).fill(null).map(()=>[]);for(let j=0;j<Z.length/2;j++){const U=j%6;ne[U].push(Z[j*2],Z[j*2+1])}return q.forEach((j,U)=>{j.setIndex(ne[U]),j.setAttribute("position",V.getAttribute("position"));const T=new Kt(j,O[U]);te.add(T)}),te.position.z=H,te.rotation.z=Y,te};return(()=>{const Y=.9/(u-1);for(let Z=0;Z<u;Z++)P[Z]=new Bt({transparent:!0,opacity:1-Z*Y});if(M=new kt,!M){console.error("introGroup failed to initialize");return}for(let Z=0;Z<u;Z++){const q=n-Z*l,ne=E(q,0,0,P[Z]),j=ne.children.map(U=>U.material);z.push(j.map(U=>({material:U,originalColor:U.color.clone()}))),M.add(ne)}M.position.z=o,e.add(M),C.push(M),_=P.map(Z=>Z.opacity);const N=Ve.timeline({repeat:-1});N.to(M.rotation,{x:Ge.degToRad(360),duration:12,ease:"none"},0),N.to(M.rotation,{y:Ge.degToRad(360),duration:10,ease:"none"},0),N.to(M.rotation,{z:Ge.degToRad(360),duration:14,ease:"none"},0);let W=-1,V=0;const O=w*1e3,te=u*O,k=Z=>{const q=Z%te/O,ne=Math.floor(q)%u;W!==-1&&Z-V>=O&&(z[W].forEach(T=>{T.material.opacity=_[W],T.material.color.copy(T.originalColor)}),W=-1),W===-1&&ne!==W&&(W=ne,V=Z,z[W].forEach(U=>{U.material.opacity=1,U.material.color.set(1,1,1)})),requestAnimationFrame(k)};requestAnimationFrame(k)})(),r.then(I=>{if(I){const H=G(I);f.add(H)}}),{introCubes:C};function G(I){const H=new kt,Y=Q(I);Y.position.set(0,-36,0),H.add(Y),L(W=>{H.add(W),Ve.fromTo(Y.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const V=W.children.find(O=>O instanceof je&&O!==W.children[0]);if(V){const O=V.position.y;Ve.to(V.position,{y:O+3,duration:1,ease:"easeOut",onComplete:()=>{V.position.y=O},repeat:-1})}}),H.position.x=0,H.position.y=-240;const N=o-u*l;return H.position.z=N+b,H}function Q(I){const H=new Ms("SCROLL TO CONTINUE",{font:I,size:8,depth:0,curveSegments:12,bevelEnabled:!1});H.computeBoundingBox(),H.center();const Y=new _t({color:16777215,transparent:!0,opacity:1});return new je(H,Y)}function L(I){new Or().load("/3D/mouse.svg",Y=>{const N=Y.paths;let W=null,V=null,O=new kt;if(N.forEach((te,k)=>{Or.createShapes(te).forEach(q=>{const ne=new js(q);ne.computeBoundingBox();const j=new _t({color:16777215,transparent:!0,opacity:1,side:Gt}),U=new je(ne,j);U.scale.set(.05,.05,1),k===0?W=U:k===1&&(V=U)})}),W&&V){O.add(W),O.add(V);const k=(W.geometry.boundingBox.max.x-W.geometry.boundingBox.min.x)*W.scale.x/2;O.position.x=-k,O.rotation.x=Math.PI,I(O)}})}}class ki extends qo{constructor(e){super(e)}load(e,r,t,n){const o=this,l=new Qo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){const w=o.parse(JSON.parse(u));r&&r(w)},t,n)}parse(e){return new Ri(e)}}class Ri{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,r=100){const t=[],n=Di(e,r,this.data);for(let o=0,l=n.length;o<l;o++)t.push(...n[o].toShapes());return t}}function Di(f,e,r){const t=Array.from(f),n=e/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n,l=[];let u=0,w=0;for(let b=0;b<t.length;b++){const M=t[b];if(M===`
`)u=0,w-=o;else{const C=Oi(M,n,u,w,r);u+=C.offsetX,l.push(C.path)}}return l}function Oi(f,e,r,t,n){const o=n.glyphs[f]||n.glyphs["?"];if(!o){console.error('THREE.Font: character "'+f+'" does not exists in font family '+n.familyName+".");return}const l=new Qt;let u,w,b,M,C,P,_,z;if(o.o){const E=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let m=0,G=E.length;m<G;)switch(E[m++]){case"m":u=E[m++]*e+r,w=E[m++]*e+t,l.moveTo(u,w);break;case"l":u=E[m++]*e+r,w=E[m++]*e+t,l.lineTo(u,w);break;case"q":b=E[m++]*e+r,M=E[m++]*e+t,C=E[m++]*e+r,P=E[m++]*e+t,l.quadraticCurveTo(C,P,b,M);break;case"b":b=E[m++]*e+r,M=E[m++]*e+t,C=E[m++]*e+r,P=E[m++]*e+t,_=E[m++]*e+r,z=E[m++]*e+t,l.bezierCurveTo(C,P,_,z,b,M);break}}return{offsetX:o.ha*e,path:l}}function Ho(f,e,r,t,n){const{CUBE_SIZE:o,CUBE_SPACING:l,FIRST_CUBE_Z:u}=e,w=u-(r.length+1)*l,b=65535,M=16711935,C=16711680,P=Ge.degToRad(15),_=1e3,z=.5,E=80,m=1,G=15,Q=.1;let L=[],I=null,H=null,Y=!1,N=!1,W=new Vs,V=new ye,O=null,te=null,k=null,Z=!1,q=null;const ne=ns(),j=(h,c,i,s,x,A)=>{const y=new kt;y.position.z=i,y.rotation.z=s,y.userData.isActive=!1;const R=new An(c,c,c),F=new Xn(R),D=new Bt({color:new wt(b),transparent:!0,opacity:0}),v=new Kt(F,D);y.add(v);let S="right";const B=c/2;if(x)switch(["left","top","right","bottom"].includes(A)?A:"left"){case"left":S="right";break;case"top":S="bottom";break;case"right":S="left";break;case"bottom":S="top";break}const d=()=>{const Me=new xo(40,24),re=new Xn(Me),xe=new Bt({color:new wt(b),transparent:!0,opacity:0,visible:!0}),ue=new Kt(re,xe);ue.userData.isPortal=!0,ue.userData.isAnimating=!1;const Se=new jt(120,120),We=new _t({visible:!1,side:Gt}),le=new je(Se,We);le.userData.isPortalHitbox=!0,le.userData.portal=ue;const Re=new kt,tt=new jt(m,G),Le=65/2;for(let Ae=0;Ae<E;Ae++){const ze=new _t({color:new wt(M),transparent:!0,opacity:0,visible:!1,side:Gt}),Ne=new je(tt,ze),Be=Ae/E*Math.PI*2;Ne.position.set(Math.cos(Be)*Le,Math.sin(Be)*Le,0),Ne.rotation.z=Be+Math.PI/2,Ne.userData.baseOpacity=.01,Ne.userData.index=Ae,Re.add(Ne)}const $e=2,oe=25;for(let Ae=1;Ae<oe;Ae++){const ze=new xo(40,24),Ne=new Xn(ze),Be=Ge.lerp(1,.1,Ae/(oe-1)),ht=new Bt({color:new wt(b),transparent:!0,opacity:0}),St=new Kt(Ne,ht);St.userData.isPortal=!0,St.userData.maxOpacity=Be,St.position.z=-Ae*$e,ue.add(St)}switch(ue.userData.maxOpacity=1,S){case"left":case"right":Re.children.forEach(Ae=>Ae.position.x+=Q);break;case"top":case"bottom":Re.children.forEach(Ae=>Ae.position.y+=Q);break}switch(ue.add(Re),y.add(ue),y.add(le),ue.updateMatrixWorld(!0),Re.updateMatrixWorld(!0),S){case"left":ue.position.set(-B,0,0),ue.rotation.y=Math.PI/2,le.position.set(-B,0,0),le.rotation.y=Math.PI/2;break;case"top":ue.position.set(0,B,0),ue.rotation.x=-Math.PI/2,le.position.set(0,B,0),le.rotation.x=Math.PI/2;break;case"right":ue.position.set(B,0,0),ue.rotation.y=-Math.PI/2,le.position.set(B,0,0),le.rotation.y=-Math.PI/2;break;case"bottom":ue.position.set(0,-B,0),ue.rotation.x=Math.PI/2,le.position.set(0,-B,0),le.rotation.x=Math.PI/2;break}};x?new Tn().load(x,fe=>{fe.encoding=void 0;const Me=new jt(c-1,c-1),re=new _t({map:fe,transparent:!0,opacity:0,blending:At,side:Gt}),xe=new je(Me,re);switch(A){case"left":xe.position.set(-B,0,0),s>=Ge.degToRad(120)?(xe.rotation.y=Math.PI/2,xe.rotation.z=-Math.PI):xe.rotation.y=Math.PI/2;break;case"top":xe.position.set(0,B,0),xe.rotation.x=Math.PI/2,xe.rotation.z=-Math.PI/2;break;case"right":xe.position.set(B,0,0),s>=Ge.degToRad(120)?(xe.rotation.y=-Math.PI/2,xe.rotation.z=-Math.PI):xe.rotation.y=-Math.PI/2;break;case"bottom":xe.position.set(0,-B,0),s>=Ge.degToRad(120)?(xe.rotation.x=-Math.PI/2,xe.rotation.z=Math.PI/2):(xe.rotation.x=-Math.PI/2,xe.rotation.z=-Math.PI/2);break}y.add(xe),d()},void 0,fe=>{d()}):d(),new Tn().load(t,ae=>{ae.encoding=void 0;const fe=new jt(c-1,c-1),Me=new _t({map:ae,transparent:!0,opacity:0,blending:At,side:Gt,depthWrite:!1}),re=new je(fe,Me);re.position.set(0,0,-c/2-1),re.rotation.y=0,re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile:",ae)}),new Tn().load(t,ae=>{ae.encoding=void 0;const fe=new jt(c-1,c-1),Me=new _t({map:ae,transparent:!0,opacity:0,blending:At,side:Gt,depthWrite:!1,color:new wt(16744448)}),re=new je(fe,Me);re.position.set(0,0,c/2+1),re.rotation.y=0,re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile:",ae)});const X=["left","top","right","bottom"],Ce=[x?A||"left":null,S].filter(Boolean),ge=X.filter(ae=>!Ce.includes(ae));return new Tn().load(t,ae=>{ae.encoding=void 0;const fe=new jt(c-1,c-1),Me=new _t({map:ae,transparent:!0,opacity:0,blending:At,side:Gt,depthWrite:!1,color:new wt(255)}),re=new je(fe,Me);switch(ge[0]){case"left":re.position.set(-B,0,0),re.rotation.y=-Math.PI/2;break;case"top":re.position.set(0,B,0),re.rotation.x=Math.PI/2;break;case"right":re.position.set(B,0,0),re.rotation.y=Math.PI/2;break;case"bottom":re.position.set(0,-B,0),re.rotation.x=-Math.PI/2;break}re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile:",ae)}),new Tn().load(n,ae=>{ae.encoding=void 0;const fe=new jt(c-1,c-1),Me=new _t({map:ae,transparent:!0,opacity:0,blending:At,side:Gt,depthWrite:!1}),re=new je(fe,Me);switch(ge[1]){case"left":re.position.set(-B,0,0),re.rotation.y=-Math.PI/2;break;case"top":re.position.set(0,B,0),re.rotation.x=Math.PI/2;break;case"right":re.position.set(B,0,0),re.rotation.y=Math.PI/2;break;case"bottom":re.position.set(0,-B,0),re.rotation.x=-Math.PI/2;break}re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile2:",ae)}),y},U=(h,c,i,s,x,A)=>{const y=new Ms(h,{font:A,size:x,depth:0,curveSegments:12,bevelEnabled:!1});y.computeBoundingBox(),y.center();const R=new _t({color:16777215,transparent:!0,opacity:0,side:Gt}),F=new je(y,R);F.position.set(c,i,s);const D=y.boundingBox,v=D.max.x-D.min.x,S=D.max.y-D.min.y,B=v+8,d=S+4,g=new jt(B,d),a=new _t({color:0,transparent:!0,opacity:0,side:Gt}),X=new je(g,a);return X.position.set(c,i,s-1),f.add(X),f.add(F),F.userData.backgroundPlane=X,F},T=()=>new Promise(h=>{I=new ki,I.load("/fonts/Poppins_Regular.json",c=>{H=c;const i=Array.isArray(r)?r:[];Array.isArray(r)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",r),i.forEach((s,x)=>{const A=u-(x+1)*l,y=(x+1)*P,R=j(s,o,A,y,s.keyart,s.keyartLocation);f.add(R),L.push(R),U(s.title,0,s.size-15,u+90-(x+1)*l,s.size,c)}),h()},void 0,c=>console.error("Error loading font:",c))}),ee=()=>Y?Promise.resolve({projectCubes:L,updateCubeColors:Ee,loadedFont:H,maxZ:w}):T().then(()=>(Y=!0,{projectCubes:L,updateCubeColors:Ee,loadedFont:H,maxZ:w})).catch(h=>{throw console.error("Error in loadFontAndText:",h),h}),p=h=>{if(h.userData.isAnimating)return;h.userData.isAnimating=!0;const c=h.children.find(y=>y instanceof kt);if(!c)return;const i=c.children,s=i.length,x=Ve.timeline({repeat:-1,defaults:{ease:"none"}}),A={value:0};x.to(A,{value:1,duration:1.5,onUpdate:()=>{i.forEach(R=>{const F=R.material;if(F.visible){const D=(R.userData.index/s+A.value)%1,S=(Math.sin(D*Math.PI*2)+1)/2,B=.01+(1-.01)*Math.pow(S,4);F.opacity=B}})}}),h.userData.animationTimeline=x},ce=h=>{if(!h.userData.isAnimating)return;h.userData.isAnimating=!1;const c=h.children.find(i=>i instanceof kt);c&&(h.userData.animationTimeline&&(h.userData.animationTimeline.kill(),delete h.userData.animationTimeline),c.children.forEach(i=>{const s=i.material;s.opacity=0}))},Ee=h=>{const c=h.position.z;let i=[];f.traverse(s=>{s instanceof je&&s.geometry&&s.geometry.type==="TextGeometry"&&i.push(s)}),N||(N=!0),L.forEach(s=>{const x=s.position.z,A=Math.abs(c-x);let y=0;A<=_&&(y=1-A/_),s.userData.isActive=y>=z,s.children.forEach(R=>{if(R instanceof Kt&&!R.userData.isPortal&&!R.userData.isPortalHitbox){const F=R.material;if(A<=_){const D=Ge.lerp((b>>16&255)/255,(M>>16&255)/255,y),v=Ge.lerp((b>>8&255)/255,(M>>8&255)/255,y),S=Ge.lerp((b&255)/255,(M&255)/255,y);F.color.set(D,v,S),F.opacity=Math.min(1,y*2)}else F.opacity=0}else if(R instanceof Kt&&R.userData.isPortal)N&&(y>.1?R.children.forEach(F=>{F instanceof kt&&F.children.forEach(D=>{D instanceof je&&(D.material.visible=!0,R.userData.animationStarted||(p(R),R.userData.animationStarted=!0))})}):y<=.1&&R.userData.animationStarted&&(R.children.forEach(F=>{F instanceof kt&&F.children.forEach(D=>{D instanceof je&&(D.material.visible=!1)})}),ce(R),delete R.userData.animationStarted));else if(R instanceof je&&!R.userData.isPortalHitbox){const F=R.material;if(A<=_){const D=1-A/_;F.opacity=Math.min(.8,D*2)}else F.opacity=0}})}),i.forEach(s=>{const x=s.material,A=s.userData.backgroundPlane,y=A==null?void 0:A.material,R=s.position.z,F=Math.abs(c-R+120);if(F<=_){const D=1-F/_,v=Math.min(1,D*2);x.opacity=v,y&&(y.opacity=v*.8)}else x.opacity=0,y&&(y.opacity=0)})};return{getInitializedData:ee,updateCubeColors:Ee,setupInteractivity:(h,c,i,s,x)=>{q=i;let A=null,y=null;const R=(S,B=!0)=>{const d=[S,...S.children.filter(a=>a instanceof Kt&&a.userData.isPortal)],g=B?25:2;d.forEach((a,X)=>{let K=-X*g;(S.position.y>0&&S.rotation.x===-Math.PI/2||S.position.y<0&&S.rotation.x===Math.PI/2)&&(K=X*g);const Ce=B?a.userData.maxOpacity:0;Ve.to(a.position,{z:K,duration:1,ease:"power3.out",delay:.5}),Ve.to(a.material,{opacity:Ce,duration:1,ease:"power3.out",delay:.5})})},F=S=>{V.x=S.clientX/window.innerWidth*2-1,V.y=-(S.clientY/window.innerHeight)*2+1,W.setFromCamera(V,h);const B=L.flatMap(g=>g.userData.isActive?g.children.filter(a=>a instanceof je&&a.userData.isPortalHitbox):[]),d=W.intersectObjects(B);if(d.length>0){const a=d[0].object.userData.portal;if(O!==a){if(O){const K=O.material;Ve.to(K.color,{r:(b>>16&255)/255,g:(b>>8&255)/255,b:(b&255)/255,duration:.5})}O=a;const X=O.material;Ve.to(X.color,{r:(C>>16&255)/255,g:(C>>8&255)/255,b:(C&255)/255,duration:.5})}c.style.cursor="pointer"}else{if(O){const g=O.material;Ve.to(g.color,{r:(b>>16&255)/255,g:(b>>8&255)/255,b:(b&255)/255,duration:.5}),O=null}c.style.cursor="auto"}},D=S=>{V.x=S.clientX/window.innerWidth*2-1,V.y=-(S.clientY/window.innerHeight)*2+1,W.setFromCamera(V,h);const B=L.flatMap(ge=>ge.userData.isActive?ge.children.filter(me=>me instanceof je&&me.userData.isPortalHitbox):[]),d=W.intersectObjects(B);if(d.length===0)return;const g=d[0].object,a=g.userData.portal,X=g.parent,K=L.indexOf(X),Ce=r[K];if(Z&&a===y){a.getWorldPosition(new He);let ge=new He;const me=e.CUBE_SIZE/2;a.position.x===me?ge.set(-1,0,0):a.position.x===-me?ge.set(1,0,0):a.position.y===me?ge.set(0,-1,0):a.position.y===-me&&ge.set(0,1,0),ge.applyQuaternion(X.getWorldQuaternion(new Zs)).normalize();const ae=h.position.clone().clone().add(ge.clone().multiplyScalar(-675)),fe=ge.clone().multiplyScalar(-1e3),Me=ae.clone().add(fe);Ve.to(h.position,{x:ae.x,y:ae.y,z:ae.z,duration:1,ease:"power2.in",onUpdate:()=>h.lookAt(Me),onComplete:()=>{Ce!=null&&Ce.slug&&(ne.setScrollPosition(window.scrollY),As.visit(route("project.show",{project:Ce.slug}),{preserveScroll:!1}))}})}else if(!Z){te||(te=h.position.clone(),k=new He(0,0,w)),q&&q(!0,te,k);const ge=a.getWorldPosition(new He);x&&x.disable(!1),Ve.to(h.position,{x:0,y:0,z:X.getWorldPosition(new He).z,duration:2,ease:"power3.out"}),Ve.to({},{duration:2,ease:"power3.out",onUpdate:function(){const me=this.progress(),Te=h.getWorldDirection(new He).multiplyScalar(1e3).add(h.position),ae=Ge.lerp(Te.x,ge.x,me),fe=Ge.lerp(Te.y,ge.y,me),Me=Ge.lerp(Te.z,ge.z,me);h.lookAt(ae,fe,Me)},onStart:()=>{Z=!0,A=window.scrollY,document.body.classList.add("no-scrollbar"),y=a,R(a,!0)}})}},v=S=>{if(!Z||!y||!te||!k)return;let B=0;if(S instanceof WheelEvent?B=S.deltaY:B=window.scrollY-(A||0),B>0){S.preventDefault(),window.scrollTo(0,A);return}if(B<0){S.preventDefault();const d=y,g=k.clone();Ve.to(h.position,{x:te.x,y:te.y,z:te.z,duration:1,ease:"power3.out"}),Ve.to({},{duration:1,ease:"power3.out",onUpdate:function(){const a=this.progress(),X=h.getWorldDirection(new He).multiplyScalar(1e3).add(h.position),K=Ge.lerp(X.x,g.x,a),Ce=Ge.lerp(X.y,g.y,a),ge=Ge.lerp(X.z,g.z,a);h.lookAt(K,Ce,ge)},onComplete:()=>{Z=!1,y=null,A=null,document.body.classList.remove("no-scrollbar"),q&&i(!1),x&&x.enable(),R(d,!1),te=null,k=null}})}};return c.addEventListener("mousemove",F),c.addEventListener("click",D),window.addEventListener("wheel",v,{passive:!1}),window.addEventListener("scroll",v,{passive:!1}),()=>{c.removeEventListener("mousemove",F),c.removeEventListener("click",D),window.removeEventListener("wheel",v),window.removeEventListener("scroll",v)}}}}function Li(f,e,r){const L=r-1e3,I=Math.abs(-500-L),H=Math.ceil(I/100),Y=()=>{const j=new kt;let U;const T=new kt,ee=[],p=[],ce=[],Ee=[],Ye=[],h=new An(100,100,100),c=new Xn(h),i=32*H,s=new qs;s.copy(c),s.instanceCount=i;const x=new Bt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),A=new Float32Array(i*3),y=new Float32Array(i*3),R=new Float32Array(i*3),F=32*100,D=-3200/2+100/2,v=-500;for(let ue=0;ue<32;ue++){const Se=N(ue);for(let We=0;We<H;We++){const le=ue*H+We,Re=D+ue*100,tt=v-We*100,Le=Ge.randFloat(100,300),$e=Le/100,oe=-600+Le/2;A[le*3]=Re,A[le*3+1]=oe,A[le*3+2]=tt,y[le*3]=1,y[le*3+1]=$e,y[le*3+2]=1,R[le*3]=Se,R[le*3+1]=Se,R[le*3+2]=Se}}s.setAttribute("instancePosition",new Gr(A,3)),s.setAttribute("instanceScale",new Gr(y,3)),s.setAttribute("color",new Gr(R,3)),x.onBeforeCompile=ue=>{ue.vertexShader=`
                attribute vec3 instancePosition;
                attribute vec3 instanceScale;
                ${ue.vertexShader}
            `.replace("#include <begin_vertex>",`#include <begin_vertex>
                transformed *= instanceScale;
                transformed += instancePosition;`)},U=new Kt(s,x);const S=-3200/2,B=F/2,d=-600,g=-300,a=L,X=-500;s.boundingBox=new Qs(new He(S,d,a),new He(B,g,X));const K=(S+B)/2,Ce=(d+g)/2,ge=(a+X)/2,me=B-S,Te=g-d,ae=X-a,fe=Math.sqrt(me*me+Te*Te+ae*ae)/2;s.boundingSphere=new $s(new He(K,Ce,ge),fe),j.add(U),e.add(j);const Me=F/5,re=-3200/2;for(let ue=0;ue<6;ue++){let We=re+ue*Me,le=-500;const Re=[new He(We,-450,le)];let tt=0;for(;le>L;){const Le=le===-500?Ge.randFloat(300,800):Math.min(Ge.randFloat(300,800),Math.abs(le-L));if(le-=Le,Re.push(new He(We,-450,le)),tt+=Le,le<=L){Re[Re.length-1].z=L;break}const $e=Math.random()<.5?-1:1,oe=Ge.randFloat(100,300);We+=$e*oe,Re.push(new He(We,-450,le)),tt+=oe}p.push({points:Re,totalLength:tt})}const xe=new An(4,4,4);for(let ue=0;ue<6;ue++){const Se=p[ue],We=Se.totalLength,le=We/60;for(let Re=0;Re<60;Re++){const tt=new _t({color:16711680,fog:!0}),Le=new je(xe,tt),$e=Re*le;let oe=$e;for(let Ae=0;Ae<Se.points.length-1;Ae++){const ze=Se.points[Ae],Ne=Se.points[Ae+1],Be=ze.distanceTo(Ne);if(oe<=Be){const ht=oe/Be;Le.position.lerpVectors(ze,Ne,ht);break}oe-=Be}ee.push(Le),ce.push($e),Ee.push(ue),Ye.push(1),T.add(Le)}for(let Re=0;Re<60;Re++){const tt=new _t({color:16777215,fog:!0}),Le=new je(xe,tt),$e=We-(Re*le+le/2);let oe=We-$e;const Ae=[...Se.points].reverse();for(let ze=0;ze<Ae.length-1;ze++){const Ne=Ae[ze],Be=Ae[ze+1],ht=Ne.distanceTo(Be);if(oe<=ht){const St=oe/ht;Le.position.lerpVectors(Ne,Be,St);break}oe-=ht}ee.push(Le),ce.push($e),Ee.push(ue),Ye.push(-1),T.add(Le)}}return e.add(T),{cityGroup:j,instancedLines:U,particles:ee,paths:p,particleDistances:ce,particlePaths:Ee,particleDirections:Ye}},N=j=>{if(j<10)return .05+j*.10555555555555556;if(j>=22){const U=31-j,T=(1-.05)/9;return .05+U*T}return 1},{cityGroup:W,instancedLines:V,particles:O,paths:te,particleDistances:k,particlePaths:Z,particleDirections:q}=Y();return{cityGroup:W,buildingLines:[V],updateParticles:j=>{const U=100*j;for(let T=0;T<O.length;T++){const ee=q[T],p=Z[T],ce=te[p],Ee=ce.totalLength;k[T]+=U*ee,ee===1?(k[T]=k[T]%Ee,k[T]<0&&(k[T]+=Ee)):k[T]=(k[T]+Ee)%Ee;const Ye=k[T],h=ee===1?ce.points:[...ce.points].reverse();let c=ee===1?Ye:Ee-Ye;for(let i=0;i<h.length-1;i++){const s=h[i],x=h[i+1],A=s.distanceTo(x);if(c<=A){const y=c/A;O[T].position.lerpVectors(s,x,y);break}c-=A}}}}}Ve.registerPlugin(_e);function Ni(f,e,r,t,n,o){const{CUBE_SPACING:l,FIRST_CUBE_Z:u}=o,w=(t==null?void 0:t.length)||0,b=u-(w+1)*l;let M=!1;const C=Math.abs(b)+(w-1)*l,P=Ve.timeline({scrollTrigger:{trigger:r.value,start:"top top",end:`+=${C}`,scrub:1,pin:!0,onUpdate:z=>{if(!M){const E=z.progress,m=Ge.lerp(0,b,E);e.position.set(0,0,m),e.lookAt(0,0,b)}n(e)}}});return P.fromTo(e.position,{z:0},{z:b,duration:1,ease:"none"}),{setReverting:z=>{M=z},timeline:P}}function Bi(f,e,r){const l=r-1e3,u=1e3,w=r,b=150,M=-500,C=r,P=new Br,_=new Float32Array(2e3*3),z=new Float32Array(2e3),E=new Float32Array(2e3);let m=0;for(;m<2e3;){const I=(Math.random()-.5)*4e3,H=(Math.random()-.5)*4e3,Y=-1e3+Math.random()*(l- -1e3),N=Y>w&&Math.abs(I)<u&&Math.abs(H)<u,W=Math.abs(I)<b&&Math.abs(H)<b&&Y>C&&Y<M;if(!N&&!W){const V=m*3;_[V]=I,_[V+1]=H,_[V+2]=Y;const O=.1+Math.random()*(.7-.1);z[m]=O,E[m]=O,m++}}P.setAttribute("position",new bo(_,3)),P.setAttribute("opacity",new bo(E,1));const G=new fn({}),Q=new Ks(P,G);f.add(Q),P.attributes.opacity;for(let I=0;I<2e3;I++)Ve.to({opacity:z[I]},{});return{dispose:()=>{Ve.killTweensOf(E),f.remove(Q),P.dispose(),G.dispose()}}}function Fi(f,e){return{chaserPath:void 0,chaserPath2:void 0,chaserPath3:void 0,updateChasers:u=>{},dispose:()=>{}}}const zi={class:"preloader"},Ui={class:"progress-label"},Gi=Lr({__name:"Preloader",props:{progress:{}},setup(f){return(e,r)=>(nr(),Nr("div",zi,[un("div",Ui,ks(Math.round(e.progress))+"%",1)]))}}),Hi=$o(Gi,[["__scopeId","data-v-e5eadefa"]]),Qr=250,br=500,Fn=-500,$r=-520,Yo=-720,Yi=Lr({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(f){Ve.registerPlugin(_e),ns();const e=f,r=sn(null),t=sn(null),n=sn(!1),o=sn(0),l=sn(!1),u=sn(!0),w=new Map;let b,M,C,P,_,z,E,m,G=0,Q=null,L=null,I=null,H=null,Y=[],N=null;const W=()=>{const Z=r.value?r.value.getBoundingClientRect().width:window.innerWidth,q=window.innerHeight;C.setSize(Z,q),P.setSize(Z,q),M.aspect=Z/q,M.far=6e4,M.updateProjectionMatrix()},V=Z=>w.has(Z)?Promise.resolve(w.get(Z)):new Promise((q,ne)=>{new Tn().load(Z,U=>{U.encoding=void 0,w.set(Z,U),q(U)},void 0,U=>ne(U))}),O=async()=>{b=new Vo,b.background=new wt(0),b.fog=new Js(0,700,4e3),M=new ei(75,window.innerWidth/window.innerHeight,1,6e4),M.position.set(0,0,0),M.lookAt(0,0,1e3),C=new Zo({antialias:!0}),C.setPixelRatio(window.devicePixelRatio),C.toneMapping=ti,C.toneMappingExposure=1,C.outputEncoding=void 0,P=new es(C);const Z=new ts(b,M);if(P.addPass(Z),_=new mn(new ye(window.innerWidth,window.innerHeight),6,.4,0),_.renderToScreen=!0,P.addPass(_),r.value)r.value.appendChild(C.domElement),C.domElement.style.opacity="0";else return;E=new tr,E.dom.style.position="fixed",E.dom.style.top="0px",E.dom.style.left="0px",E.dom.style.zIndex="1000",document.body.appendChild(E.dom);const q=e.projects.length+2+1;let ne=0;const j=()=>{ne++,o.value=ne/q*100,ne===q&&(n.value=!0)};await V(e.projectGridFile).then(()=>j()).catch(()=>j()),await V(e.projectGridFile2).then(()=>j()).catch(()=>j());for(const ee of e.projects)ee.keyart?await V(ee.keyart).then(()=>j()).catch(()=>j()):j();const U=Ho(b,{CUBE_SIZE:Qr,CUBE_SPACING:br,FIRST_CUBE_Z:Fn},e.projects,e.projectGridFile,e.projectGridFile2);let T=-8500;try{const ee=await U.getInitializedData();T=ee.maxZ!==void 0&&!isNaN(ee.maxZ)?ee.maxZ:-8500,j();const{introCubes:p}=Ai(b,b,Promise.resolve(ee.loadedFont),{CUBE_SIZE:Qr,FIRST_CUBE_Z:Fn});Y=[...p,...ee.projectCubes],N=ee.updateCubeColors;const{cityGroup:ce,updateParticles:Ee}=Li(b,b,T);m=Ee;const{dispose:Ye}=Bi(b,M,T);Q=Ye;const{dispose:h,updateChasers:c}=Fi(b,T);I=h,H=c,W()}catch(ee){console.error("Error initializing project cubes:",ee)}},te=(Z=0)=>{if(z=requestAnimationFrame(te),C&&P){const q=(Z-G)/1e3;G=Z,m(q),H==null||H(q);const ne=Yo-$r;let j=0;M.position.z>=$r?j=0:M.position.z<=Yo?j=1:j=(M.position.z-$r)/ne,_.strength=Ge.lerp(1,.125,j),l.value&&(N(M),_e.update()),P.render()}E.update()};Wo(()=>{O().then(()=>{if(n.value){z=requestAnimationFrame(te);const Z=Ho(b,{CUBE_SIZE:Qr,CUBE_SPACING:br,FIRST_CUBE_Z:Fn},e.projects,e.projectGridFile,e.projectGridFile2);let q=null,ne=null;const j=Z.getInitializedData().then(({projectCubes:T})=>{T.forEach(p=>{p.userData.isActive=!0});const ee=Fn-(e.projects.length-1)*br;if(M.position.set(0,0,5e3),M.lookAt(0,0,ee),M.updateProjectionMatrix(),N(M),P.render(),Y.length&&N){const{setReverting:p,timeline:ce}=Ni(b,M,t,Y,N,{CUBE_SPACING:br,FIRST_CUBE_Z:Fn});ne=p,q=ce}C&&L===null&&(L=Z.setupInteractivity(M,C.domElement,(p,ce,Ee)=>{ne&&ne(p)}),q==null||q.scrollTrigger),window.scrollTo({top:0,behavior:"auto"})}),U=()=>{j.then(()=>{u.value=!1,M.position.set(0,0,5e3),M.updateProjectionMatrix(),Ve.to(C.domElement,{opacity:1,duration:.5,ease:"power4.out"});const T={z:5e3};Ve.to(T,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{M.position.z=T.z,M.updateProjectionMatrix()},onComplete:()=>{M.position.z=0,l.value=!0}})})};Ve.delayedCall(.1,U)}}).catch(Z=>{console.error("Initialization failed:",Z)}),window.addEventListener("resize",k)}),Xo(()=>{L&&L(),window.removeEventListener("resize",k),cancelAnimationFrame(z),_e.getAll().forEach(Z=>Z.kill()),C.dispose(),P.dispose(),b.clear(),document.body.removeChild(E.dom),Q&&Q(),I&&I()});const k=()=>{W(),_e.refresh()};return(Z,q)=>(nr(),Nr("section",{ref_key:"wrapper",ref:t,class:"wrapper"},[an(Rs,{name:"fade"},{default:Ds(()=>[u.value?(nr(),Os(Hi,{key:0,progress:o.value},null,8,["progress"])):Ls("",!0)]),_:1}),un("div",{ref_key:"tunnelWrapper",ref:r,class:"tunnel-wrapper"},null,512)],512))}}),Wi=$o(Yi,[["__scopeId","data-v-09b560c9"]]),Xi={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},ji={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Vi={class:"overflow-hidden"},Zi={class:"flex justify-center items-center"},qi={class:"flex justify-center items-center -mt-24 mix-blend-screen"},Ji=Lr({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(f){return(e,r)=>(nr(),Nr(Fs,null,[an(Ns(Bs),{title:"Welcome"}),un("div",Xi,[un("nav",ji,[an(ni)]),un("div",Vi,[an(Wi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),un("div",Zi,[an(To,{"particle-width":20,"particle-height":20})]),un("div",qi,[an(To,{"particle-width":15,"particle-height":160})]),an(ri)])],64))}});export{Ji as default};
