import{J as hi,W as di,I as eo,e as to,o as Tn,a as nr,t as gi,d as Jt,x as mi,y as yi,b as Rr,T as xi,w as bi,c as _i,f as wi,u as vi,m as Ti,F as Si}from"./app-B8EUXHrP.js";import{M as ht,O as Ci,B as ro,F as zr,S as yr,U as Gn,V as pe,W as dn,H as gn,N as Pi,C as Mi,a as Ht,b as et,A as er,c as qr,E as Ei,d as Lo,e as zo,f as pr,g as Ai,h as ki,i as Ri,P as In,j as Ii,k as Wt,l as Bt,m as Di,D as Wn,n as Rt,o as Le,p as Ke,q as Bo,r as mn,s as jt,R as Oi,t as Ni,u as Li,v as zi,w as po,x as ho,Q as Bi,y as Bs,z as Fs,I as Hs,J as Us,K as Gs,T as Fi,X as Hi,Y as Ui,Z as Gi,_ as Wi,$ as ji,L as Yi,G as Vi}from"./GlobalFooter-nKJ5GGcx.js";import{_ as Fo}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ho=hi("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(p,e){p.isMobile=e}},actions:{setActiveProject(p){this.activeProjectSlug=p},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(p){this.scrollPosition=p,console.log("Scroll position stored:",p)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function Xi(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function qi(p,e,n){return e&&Xi(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ve,yn,yt,Vt,Xt,br,Uo,tr,Br,Go,Ut,Pt,Wo,jo=function(){return Ve||typeof window<"u"&&(Ve=window.gsap)&&Ve.registerPlugin&&Ve},Yo=1,xr=[],me=[],Ot=[],Fr=Date.now,jn=function(e,n){return n},Zi=function(){var e=Br.core,n=e.bridge||{},t=e._scrollers,r=e._proxies;t.push.apply(t,me),r.push.apply(r,Ot),me=t,Ot=r,jn=function(l,u){return n[l](u)}},qt=function(e,n){return~Ot.indexOf(e)&&Ot[Ot.indexOf(e)+1][n]},Hr=function(e){return!!~Go.indexOf(e)},ot=function(e,n,t,r,o){return e.addEventListener(n,t,{passive:r!==!1,capture:!!o})},nt=function(e,n,t,r){return e.removeEventListener(n,t,!!r)},en="scrollLeft",tn="scrollTop",Yn=function(){return Ut&&Ut.isPressed||me.cache++},Sn=function(e,n){var t=function r(o){if(o||o===0){Yo&&(yt.history.scrollRestoration="manual");var l=Ut&&Ut.isPressed;o=r.v=Math.round(o)||(Ut&&Ut.iOS?1:0),e(o),r.cacheID=me.cache,l&&jn("ss",o)}else(n||me.cache!==r.cacheID||jn("ref"))&&(r.cacheID=me.cache,r.v=e());return r.v+r.offset};return t.offset=0,e&&t},lt={s:en,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Sn(function(p){return arguments.length?yt.scrollTo(p,He.sc()):yt.pageXOffset||Vt[en]||Xt[en]||br[en]||0})},He={s:tn,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:lt,sc:Sn(function(p){return arguments.length?yt.scrollTo(lt.sc(),p):yt.pageYOffset||Vt[tn]||Xt[tn]||br[tn]||0})},ut=function(e,n){return(n&&n._ctx&&n._ctx.selector||Ve.utils.toArray)(e)[0]||(typeof e=="string"&&Ve.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Zt=function(e,n){var t=n.s,r=n.sc;Hr(e)&&(e=Vt.scrollingElement||Xt);var o=me.indexOf(e),l=r===He.sc?1:2;!~o&&(o=me.push(e)-1),me[o+l]||ot(e,"scroll",Yn);var u=me[o+l],v=u||(me[o+l]=Sn(qt(e,t),!0)||(Hr(e)?r:Sn(function(F){return arguments.length?e[t]=F:e[t]})));return v.target=e,u||(v.smooth=Ve.getProperty(e,"scrollBehavior")==="smooth"),v},Vn=function(e,n,t){var r=e,o=e,l=Fr(),u=l,v=n||50,F=Math.max(500,v*3),I=function(R,E){var b=Fr();E||b-l>v?(o=r,r=R,u=l,l=b):t?r+=R:r=o+(R-o)/(b-u)*(l-u)},S=function(){o=r=t?0:r,u=l=0},_=function(R){var E=u,b=o,U=Fr();return(R||R===0)&&R!==r&&I(R),l===u||U-u>F?0:(r+(t?b:-b))/((t?U:l)-E)*1e3};return{update:I,reset:S,getVelocity:_}},Er=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},go=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},Vo=function(){Br=Ve.core.globals().ScrollTrigger,Br&&Br.core&&Zi()},Xo=function(e){return Ve=e||jo(),!yn&&Ve&&typeof document<"u"&&document.body&&(yt=window,Vt=document,Xt=Vt.documentElement,br=Vt.body,Go=[yt,Vt,Xt,br],Ve.utils.clamp,Wo=Ve.core.context||function(){},tr="onpointerenter"in br?"pointer":"mouse",Uo=Oe.isTouch=yt.matchMedia&&yt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in yt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Pt=Oe.eventTypes=("ontouchstart"in Xt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Xt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Yo=0},500),Vo(),yn=1),yn};lt.op=He;me.cache=0;var Oe=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){yn||Xo(Ve)||console.warn("Please gsap.registerPlugin(Observer)"),Br||Vo();var r=t.tolerance,o=t.dragMinimum,l=t.type,u=t.target,v=t.lineHeight,F=t.debounce,I=t.preventDefault,S=t.onStop,_=t.onStopDelay,y=t.ignore,R=t.wheelSpeed,E=t.event,b=t.onDragStart,U=t.onDragEnd,$=t.onDrag,H=t.onPress,C=t.onRelease,Y=t.onRight,W=t.onLeft,z=t.onUp,G=t.onDown,X=t.onChangeX,k=t.onChangeY,te=t.onChange,P=t.onToggleX,ee=t.onToggleY,J=t.onHover,Q=t.onHoverEnd,V=t.onMove,D=t.ignoreCheck,M=t.isNormalizer,re=t.onGestureStart,h=t.onGestureEnd,oe=t.onWheel,Ie=t.onEnable,ft=t.onDisable,g=t.onClick,f=t.scrollSpeed,s=t.capture,i=t.allowClicks,w=t.lockAxis,L=t.onLockAxis;this.target=u=ut(u)||Xt,this.vars=t,y&&(y=Ve.utils.toArray(y)),r=r||1e-9,o=o||0,R=R||1,f=f||1,l=l||"wheel,touch,pointer",F=F!==!1,v||(v=parseFloat(yt.getComputedStyle(br).lineHeight)||22);var m,O,N,T,x,A,B,c=this,d=0,a=0,j=t.passive||!I&&t.passive!==!1,q=Zt(u,lt),de=Zt(u,He),Te=q(),xe=de(),ie=~l.indexOf("touch")&&!~l.indexOf("pointer")&&Pt[0]==="pointerdown",ze=Hr(u),Se=u.ownerDocument||Vt,we=[0,0,0],ke=[0,0,0],Xe=0,wt=function(){return Xe=Fr()},Pe=function(se,be){return(c.event=se)&&y&&~y.indexOf(se.target)||be&&ie&&se.pointerType!=="touch"||D&&D(se,be)},Nt=function(){c._vx.reset(),c._vy.reset(),O.pause(),S&&S(c)},Me=function(){var se=c.deltaX=go(we),be=c.deltaY=go(ke),Z=Math.abs(se)>=r,le=Math.abs(be)>=r;te&&(Z||le)&&te(c,se,be,we,ke),Z&&(Y&&c.deltaX>0&&Y(c),W&&c.deltaX<0&&W(c),X&&X(c),P&&c.deltaX<0!=d<0&&P(c),d=c.deltaX,we[0]=we[1]=we[2]=0),le&&(G&&c.deltaY>0&&G(c),z&&c.deltaY<0&&z(c),k&&k(c),ee&&c.deltaY<0!=a<0&&ee(c),a=c.deltaY,ke[0]=ke[1]=ke[2]=0),(T||N)&&(V&&V(c),N&&(b&&N===1&&b(c),$&&$(c),N=0),T=!1),A&&!(A=!1)&&L&&L(c),x&&(oe(c),x=!1),m=0},Mt=function(se,be,Z){we[Z]+=se,ke[Z]+=be,c._vx.update(se),c._vy.update(be),F?m||(m=requestAnimationFrame(Me)):Me()},rt=function(se,be){w&&!B&&(c.axis=B=Math.abs(se)>Math.abs(be)?"x":"y",A=!0),B!=="y"&&(we[2]+=se,c._vx.update(se,!0)),B!=="x"&&(ke[2]+=be,c._vy.update(be,!0)),F?m||(m=requestAnimationFrame(Me)):Me()},ct=function(se){if(!Pe(se,1)){se=Er(se,I);var be=se.clientX,Z=se.clientY,le=be-c.x,ne=Z-c.y,ce=c.isDragging;c.x=be,c.y=Z,(ce||(le||ne)&&(Math.abs(c.startX-be)>=o||Math.abs(c.startY-Z)>=o))&&(N=ce?2:1,ce||(c.isDragging=!0),rt(le,ne))}},Lt=c.onPress=function(ue){Pe(ue,1)||ue&&ue.button||(c.axis=B=null,O.pause(),c.isPressed=!0,ue=Er(ue),d=a=0,c.startX=c.x=ue.clientX,c.startY=c.y=ue.clientY,c._vx.reset(),c._vy.reset(),ot(M?u:Se,Pt[1],ct,j,!0),c.deltaX=c.deltaY=0,H&&H(c))},ae=c.onRelease=function(ue){if(!Pe(ue,1)){nt(M?u:Se,Pt[1],ct,!0);var se=!isNaN(c.y-c.startY),be=c.isDragging,Z=be&&(Math.abs(c.x-c.startX)>3||Math.abs(c.y-c.startY)>3),le=Er(ue);!Z&&se&&(c._vx.reset(),c._vy.reset(),I&&i&&Ve.delayedCall(.08,function(){if(Fr()-Xe>300&&!ue.defaultPrevented){if(ue.target.click)ue.target.click();else if(Se.createEvent){var ne=Se.createEvent("MouseEvents");ne.initMouseEvent("click",!0,!0,yt,1,le.screenX,le.screenY,le.clientX,le.clientY,!1,!1,!1,!1,0,null),ue.target.dispatchEvent(ne)}}})),c.isDragging=c.isGesturing=c.isPressed=!1,S&&be&&!M&&O.restart(!0),N&&Me(),U&&be&&U(c),C&&C(c,Z)}},Qt=function(se){return se.touches&&se.touches.length>1&&(c.isGesturing=!0)&&re(se,c.isDragging)},vt=function(){return(c.isGesturing=!1)||h(c)},Tt=function(se){if(!Pe(se)){var be=q(),Z=de();Mt((be-Te)*f,(Z-xe)*f,1),Te=be,xe=Z,S&&O.restart(!0)}},St=function(se){if(!Pe(se)){se=Er(se,I),oe&&(x=!0);var be=(se.deltaMode===1?v:se.deltaMode===2?yt.innerHeight:1)*R;Mt(se.deltaX*be,se.deltaY*be,0),S&&!M&&O.restart(!0)}},$t=function(se){if(!Pe(se)){var be=se.clientX,Z=se.clientY,le=be-c.x,ne=Z-c.y;c.x=be,c.y=Z,T=!0,S&&O.restart(!0),(le||ne)&&rt(le,ne)}},fr=function(se){c.event=se,J(c)},zt=function(se){c.event=se,Q(c)},Sr=function(se){return Pe(se)||Er(se,I)&&g(c)};O=c._dc=Ve.delayedCall(_||.25,Nt).pause(),c.deltaX=c.deltaY=0,c._vx=Vn(0,50,!0),c._vy=Vn(0,50,!0),c.scrollX=q,c.scrollY=de,c.isDragging=c.isGesturing=c.isPressed=!1,Wo(this),c.enable=function(ue){return c.isEnabled||(ot(ze?Se:u,"scroll",Yn),l.indexOf("scroll")>=0&&ot(ze?Se:u,"scroll",Tt,j,s),l.indexOf("wheel")>=0&&ot(u,"wheel",St,j,s),(l.indexOf("touch")>=0&&Uo||l.indexOf("pointer")>=0)&&(ot(u,Pt[0],Lt,j,s),ot(Se,Pt[2],ae),ot(Se,Pt[3],ae),i&&ot(u,"click",wt,!0,!0),g&&ot(u,"click",Sr),re&&ot(Se,"gesturestart",Qt),h&&ot(Se,"gestureend",vt),J&&ot(u,tr+"enter",fr),Q&&ot(u,tr+"leave",zt),V&&ot(u,tr+"move",$t)),c.isEnabled=!0,c.isDragging=c.isGesturing=c.isPressed=T=N=!1,c._vx.reset(),c._vy.reset(),Te=q(),xe=de(),ue&&ue.type&&Lt(ue),Ie&&Ie(c)),c},c.disable=function(){c.isEnabled&&(xr.filter(function(ue){return ue!==c&&Hr(ue.target)}).length||nt(ze?Se:u,"scroll",Yn),c.isPressed&&(c._vx.reset(),c._vy.reset(),nt(M?u:Se,Pt[1],ct,!0)),nt(ze?Se:u,"scroll",Tt,s),nt(u,"wheel",St,s),nt(u,Pt[0],Lt,s),nt(Se,Pt[2],ae),nt(Se,Pt[3],ae),nt(u,"click",wt,!0),nt(u,"click",Sr),nt(Se,"gesturestart",Qt),nt(Se,"gestureend",vt),nt(u,tr+"enter",fr),nt(u,tr+"leave",zt),nt(u,tr+"move",$t),c.isEnabled=c.isPressed=c.isDragging=!1,ft&&ft(c))},c.kill=c.revert=function(){c.disable();var ue=xr.indexOf(c);ue>=0&&xr.splice(ue,1),Ut===c&&(Ut=0)},xr.push(c),M&&Hr(u)&&(Ut=c),c.enable(E)},qi(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();Oe.version="3.12.7";Oe.create=function(p){return new Oe(p)};Oe.register=Xo;Oe.getAll=function(){return xr.slice()};Oe.getById=function(p){return xr.filter(function(e){return e.vars.id===p})[0]};jo()&&Ve.registerPlugin(Oe);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var K,gr,ge,Ce,mt,_e,no,Cn,Zr,Ur,Ir,rn,$e,kn,Xn,st,mo,yo,mr,qo,Dn,Zo,it,qn,Qo,$o,Yt,Zn,oo,_r,io,Pn,Qn,On,nn=1,Je=Date.now,Nn=Je(),_t=0,Dr=0,xo=function(e,n,t){var r=gt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=r,r?e.substr(6,e.length-7):e},bo=function(e,n){return n&&(!gt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Qi=function p(){return Dr&&requestAnimationFrame(p)},_o=function(){return kn=1},wo=function(){return kn=0},It=function(e){return e},Or=function(e){return Math.round(e*1e5)/1e5||0},Ko=function(){return typeof window<"u"},Jo=function(){return K||Ko()&&(K=window.gsap)&&K.registerPlugin&&K},lr=function(e){return!!~no.indexOf(e)},ei=function(e){return(e==="Height"?io:ge["inner"+e])||mt["client"+e]||_e["client"+e]},ti=function(e){return qt(e,"getBoundingClientRect")||(lr(e)?function(){return vn.width=ge.innerWidth,vn.height=io,vn}:function(){return Ft(e)})},$i=function(e,n,t){var r=t.d,o=t.d2,l=t.a;return(l=qt(e,"getBoundingClientRect"))?function(){return l()[r]}:function(){return(n?ei(o):e["client"+o])||0}},Ki=function(e,n){return!n||~Ot.indexOf(e)?ti(e):function(){return vn}},Dt=function(e,n){var t=n.s,r=n.d2,o=n.d,l=n.a;return Math.max(0,(t="scroll"+r)&&(l=qt(e,t))?l()-ti(e)()[o]:lr(e)?(mt[t]||_e[t])-ei(r):e[t]-e["offset"+r])},on=function(e,n){for(var t=0;t<mr.length;t+=3)(!n||~n.indexOf(mr[t+1]))&&e(mr[t],mr[t+1],mr[t+2])},gt=function(e){return typeof e=="string"},tt=function(e){return typeof e=="function"},Nr=function(e){return typeof e=="number"},rr=function(e){return typeof e=="object"},Ar=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},Ln=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},hr=Math.abs,ri="left",ni="top",so="right",ao="bottom",ir="width",sr="height",Gr="Right",Wr="Left",jr="Top",Yr="Bottom",Ne="padding",xt="margin",vr="Width",lo="Height",Fe="px",bt=function(e){return ge.getComputedStyle(e)},Ji=function(e){var n=bt(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},vo=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},Ft=function(e,n){var t=n&&bt(e)[Xn]!=="matrix(1, 0, 0, 1, 0, 0)"&&K.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return t&&t.progress(0).kill(),r},Mn=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},oi=function(e){var n=[],t=e.labels,r=e.duration(),o;for(o in t)n.push(t[o]/r);return n},es=function(e){return function(n){return K.utils.snap(oi(e),n)}},co=function(e){var n=K.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(r,o){return r-o});return t?function(r,o,l){l===void 0&&(l=.001);var u;if(!o)return n(r);if(o>0){for(r-=l,u=0;u<t.length;u++)if(t[u]>=r)return t[u];return t[u-1]}else for(u=t.length,r+=l;u--;)if(t[u]<=r)return t[u];return t[0]}:function(r,o,l){l===void 0&&(l=.001);var u=n(r);return!o||Math.abs(u-r)<l||u-r<0==o<0?u:n(o<0?r-e:r+e)}},ts=function(e){return function(n,t){return co(oi(e))(n,t.direction)}},sn=function(e,n,t,r){return t.split(",").forEach(function(o){return e(n,o,r)})},We=function(e,n,t,r,o){return e.addEventListener(n,t,{passive:!r,capture:!!o})},Ge=function(e,n,t,r){return e.removeEventListener(n,t,!!r)},an=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},To={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ln={toggleActions:"play",anticipatePin:0},En={top:0,left:0,center:.5,bottom:1,right:1},xn=function(e,n){if(gt(e)){var t=e.indexOf("="),r=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(r*=n/100),e=e.substr(0,t-1)),e=r+(e in En?En[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},cn=function(e,n,t,r,o,l,u,v){var F=o.startColor,I=o.endColor,S=o.fontSize,_=o.indent,y=o.fontWeight,R=Ce.createElement("div"),E=lr(t)||qt(t,"pinType")==="fixed",b=e.indexOf("scroller")!==-1,U=E?_e:t,$=e.indexOf("start")!==-1,H=$?F:I,C="border-color:"+H+";font-size:"+S+";color:"+H+";font-weight:"+y+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return C+="position:"+((b||v)&&E?"fixed;":"absolute;"),(b||v||!E)&&(C+=(r===He?so:ao)+":"+(l+parseFloat(_))+"px;"),u&&(C+="box-sizing:border-box;text-align:left;width:"+u.offsetWidth+"px;"),R._isStart=$,R.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),R.style.cssText=C,R.innerText=n||n===0?e+"-"+n:e,U.children[0]?U.insertBefore(R,U.children[0]):U.appendChild(R),R._offset=R["offset"+r.op.d2],bn(R,0,r,$),R},bn=function(e,n,t,r){var o={display:"block"},l=t[r?"os2":"p2"],u=t[r?"p2":"os2"];e._isFlipped=r,o[t.a+"Percent"]=r?-100:0,o[t.a]=r?"1px":0,o["border"+l+vr]=1,o["border"+u+vr]=0,o[t.p]=n+"px",K.set(e,o)},he=[],$n={},Qr,So=function(){return Je()-_t>34&&(Qr||(Qr=requestAnimationFrame(Gt)))},dr=function(){(!it||!it.isPressed||it.startX>_e.clientWidth)&&(me.cache++,it?Qr||(Qr=requestAnimationFrame(Gt)):Gt(),_t||ur("scrollStart"),_t=Je())},zn=function(){$o=ge.innerWidth,Qo=ge.innerHeight},Lr=function(e){me.cache++,(e===!0||!$e&&!Zo&&!Ce.fullscreenElement&&!Ce.webkitFullscreenElement&&(!qn||$o!==ge.innerWidth||Math.abs(ge.innerHeight-Qo)>ge.innerHeight*.25))&&Cn.restart(!0)},cr={},rs=[],ii=function p(){return Ge(fe,"scrollEnd",p)||or(!0)},ur=function(e){return cr[e]&&cr[e].map(function(n){return n()})||rs},dt=[],si=function(e){for(var n=0;n<dt.length;n+=5)(!e||dt[n+4]&&dt[n+4].query===e)&&(dt[n].style.cssText=dt[n+1],dt[n].getBBox&&dt[n].setAttribute("transform",dt[n+2]||""),dt[n+3].uncache=1)},uo=function(e,n){var t;for(st=0;st<he.length;st++)t=he[st],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));Pn=!0,n&&si(n),n||ur("revert")},ai=function(e,n){me.cache++,(n||!at)&&me.forEach(function(t){return tt(t)&&t.cacheID++&&(t.rec=0)}),gt(e)&&(ge.history.scrollRestoration=oo=e)},at,ar=0,Co,ns=function(){if(Co!==ar){var e=Co=ar;requestAnimationFrame(function(){return e===ar&&or(!0)})}},li=function(){_e.appendChild(_r),io=!it&&_r.offsetHeight||ge.innerHeight,_e.removeChild(_r)},Po=function(e){return Zr(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},or=function(e,n){if(mt=Ce.documentElement,_e=Ce.body,no=[ge,Ce,mt,_e],_t&&!e&&!Pn){We(fe,"scrollEnd",ii);return}li(),at=fe.isRefreshing=!0,me.forEach(function(r){return tt(r)&&++r.cacheID&&(r.rec=r())});var t=ur("refreshInit");qo&&fe.sort(),n||uo(),me.forEach(function(r){tt(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),he.slice(0).forEach(function(r){return r.refresh()}),Pn=!1,he.forEach(function(r){if(r._subPinOffset&&r.pin){var o=r.vars.horizontal?"offsetWidth":"offsetHeight",l=r.pin[o];r.revert(!0,1),r.adjustPinSpacing(r.pin[o]-l),r.refresh()}}),Qn=1,Po(!0),he.forEach(function(r){var o=Dt(r.scroller,r._dir),l=r.vars.end==="max"||r._endClamp&&r.end>o,u=r._startClamp&&r.start>=o;(l||u)&&r.setPositions(u?o-1:r.start,l?Math.max(u?o:r.start+1,o):r.end,!0)}),Po(!1),Qn=0,t.forEach(function(r){return r&&r.render&&r.render(-1)}),me.forEach(function(r){tt(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),ai(oo,1),Cn.pause(),ar++,at=2,Gt(2),he.forEach(function(r){return tt(r.vars.onRefresh)&&r.vars.onRefresh(r)}),at=fe.isRefreshing=!1,ur("refresh")},Kn=0,_n=1,Vr,Gt=function(e){if(e===2||!at&&!Pn){fe.isUpdating=!0,Vr&&Vr.update(0);var n=he.length,t=Je(),r=t-Nn>=50,o=n&&he[0].scroll();if(_n=Kn>o?-1:1,at||(Kn=o),r&&(_t&&!kn&&t-_t>200&&(_t=0,ur("scrollEnd")),Ir=Nn,Nn=t),_n<0){for(st=n;st-- >0;)he[st]&&he[st].update(0,r);_n=1}else for(st=0;st<n;st++)he[st]&&he[st].update(0,r);fe.isUpdating=!1}Qr=0},Jn=[ri,ni,ao,so,xt+Yr,xt+Gr,xt+jr,xt+Wr,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],wn=Jn.concat([ir,sr,"boxSizing","max"+vr,"max"+lo,"position",xt,Ne,Ne+jr,Ne+Gr,Ne+Yr,Ne+Wr]),os=function(e,n,t){wr(t);var r=e._gsap;if(r.spacerIsNative)wr(r.spacerState);else if(e._gsap.swappedIn){var o=n.parentNode;o&&(o.insertBefore(e,n),o.removeChild(n))}e._gsap.swappedIn=!1},Bn=function(e,n,t,r){if(!e._gsap.swappedIn){for(var o=Jn.length,l=n.style,u=e.style,v;o--;)v=Jn[o],l[v]=t[v];l.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(l.display="inline-block"),u[ao]=u[so]="auto",l.flexBasis=t.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[ir]=Mn(e,lt)+Fe,l[sr]=Mn(e,He)+Fe,l[Ne]=u[xt]=u[ni]=u[ri]="0",wr(r),u[ir]=u["max"+vr]=t[ir],u[sr]=u["max"+lo]=t[sr],u[Ne]=t[Ne],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},is=/([A-Z])/g,wr=function(e){if(e){var n=e.t.style,t=e.length,r=0,o,l;for((e.t._gsap||K.core.getCache(e.t)).uncache=1;r<t;r+=2)l=e[r+1],o=e[r],l?n[o]=l:n[o]&&n.removeProperty(o.replace(is,"-$1").toLowerCase())}},un=function(e){for(var n=wn.length,t=e.style,r=[],o=0;o<n;o++)r.push(wn[o],t[wn[o]]);return r.t=e,r},ss=function(e,n,t){for(var r=[],o=e.length,l=t?8:0,u;l<o;l+=2)u=e[l],r.push(u,u in n?n[u]:e[l+1]);return r.t=e.t,r},vn={left:0,top:0},Mo=function(e,n,t,r,o,l,u,v,F,I,S,_,y,R){tt(e)&&(e=e(v)),gt(e)&&e.substr(0,3)==="max"&&(e=_+(e.charAt(4)==="="?xn("0"+e.substr(3),t):0));var E=y?y.time():0,b,U,$;if(y&&y.seek(0),isNaN(e)||(e=+e),Nr(e))y&&(e=K.utils.mapRange(y.scrollTrigger.start,y.scrollTrigger.end,0,_,e)),u&&bn(u,t,r,!0);else{tt(n)&&(n=n(v));var H=(e||"0").split(" "),C,Y,W,z;$=ut(n,v)||_e,C=Ft($)||{},(!C||!C.left&&!C.top)&&bt($).display==="none"&&(z=$.style.display,$.style.display="block",C=Ft($),z?$.style.display=z:$.style.removeProperty("display")),Y=xn(H[0],C[r.d]),W=xn(H[1]||"0",t),e=C[r.p]-F[r.p]-I+Y+o-W,u&&bn(u,W,r,t-W<20||u._isStart&&W>20),t-=t-W}if(R&&(v[R]=e||-.001,e<0&&(e=0)),l){var G=e+t,X=l._isStart;b="scroll"+r.d2,bn(l,G,r,X&&G>20||!X&&(S?Math.max(_e[b],mt[b]):l.parentNode[b])<=G+1),S&&(F=Ft(u),S&&(l.style[r.op.p]=F[r.op.p]-r.op.m-l._offset+Fe))}return y&&$&&(b=Ft($),y.seek(_),U=Ft($),y._caScrollDist=b[r.p]-U[r.p],e=e/y._caScrollDist*_),y&&y.seek(E),y?e:Math.round(e)},as=/(webkit|moz|length|cssText|inset)/i,Eo=function(e,n,t,r){if(e.parentNode!==n){var o=e.style,l,u;if(n===_e){e._stOrig=o.cssText,u=bt(e);for(l in u)!+l&&!as.test(l)&&u[l]&&typeof o[l]=="string"&&l!=="0"&&(o[l]=u[l]);o.top=t,o.left=r}else o.cssText=e._stOrig;K.core.getCache(e).uncache=1,n.appendChild(e)}},ci=function(e,n,t){var r=n,o=r;return function(l){var u=Math.round(e());return u!==r&&u!==o&&Math.abs(u-r)>3&&Math.abs(u-o)>3&&(l=u,t&&t()),o=r,r=Math.round(l),r}},fn=function(e,n,t){var r={};r[n.p]="+="+t,K.set(e,r)},Ao=function(e,n){var t=Zt(e,n),r="_scroll"+n.p2,o=function l(u,v,F,I,S){var _=l.tween,y=v.onComplete,R={};F=F||t();var E=ci(t,F,function(){_.kill(),l.tween=0});return S=I&&S||0,I=I||u-F,_&&_.kill(),v[r]=u,v.inherit=!1,v.modifiers=R,R[r]=function(){return E(F+I*_.ratio+S*_.ratio*_.ratio)},v.onUpdate=function(){me.cache++,l.tween&&Gt()},v.onComplete=function(){l.tween=0,y&&y.call(_)},_=l.tween=K.to(e,v),_};return e[r]=t,t.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},We(e,"wheel",t.wheelHandler),fe.isTouch&&We(e,"touchmove",t.wheelHandler),o},fe=function(){function p(n,t){gr||p.register(K)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Zn(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Dr){this.update=this.refresh=this.kill=It;return}t=vo(gt(t)||Nr(t)||t.nodeType?{trigger:t}:t,ln);var o=t,l=o.onUpdate,u=o.toggleClass,v=o.id,F=o.onToggle,I=o.onRefresh,S=o.scrub,_=o.trigger,y=o.pin,R=o.pinSpacing,E=o.invalidateOnRefresh,b=o.anticipatePin,U=o.onScrubComplete,$=o.onSnapComplete,H=o.once,C=o.snap,Y=o.pinReparent,W=o.pinSpacer,z=o.containerAnimation,G=o.fastScrollEnd,X=o.preventOverlaps,k=t.horizontal||t.containerAnimation&&t.horizontal!==!1?lt:He,te=!S&&S!==0,P=ut(t.scroller||ge),ee=K.core.getCache(P),J=lr(P),Q=("pinType"in t?t.pinType:qt(P,"pinType")||J&&"fixed")==="fixed",V=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],D=te&&t.toggleActions.split(" "),M="markers"in t?t.markers:ln.markers,re=J?0:parseFloat(bt(P)["border"+k.p2+vr])||0,h=this,oe=t.onRefreshInit&&function(){return t.onRefreshInit(h)},Ie=$i(P,J,k),ft=Ki(P,J),g=0,f=0,s=0,i=Zt(P,k),w,L,m,O,N,T,x,A,B,c,d,a,j,q,de,Te,xe,ie,ze,Se,we,ke,Xe,wt,Pe,Nt,Me,Mt,rt,ct,Lt,ae,Qt,vt,Tt,St,$t,fr,zt;if(h._startClamp=h._endClamp=!1,h._dir=k,b*=45,h.scroller=P,h.scroll=z?z.time.bind(z):i,O=i(),h.vars=t,r=r||t.animation,"refreshPriority"in t&&(qo=1,t.refreshPriority===-9999&&(Vr=h)),ee.tweenScroll=ee.tweenScroll||{top:Ao(P,He),left:Ao(P,lt)},h.tweenTo=w=ee.tweenScroll[k.p],h.scrubDuration=function(Z){Qt=Nr(Z)&&Z,Qt?ae?ae.duration(Z):ae=K.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Qt,paused:!0,onComplete:function(){return U&&U(h)}}):(ae&&ae.progress(1).kill(),ae=0)},r&&(r.vars.lazy=!1,r._initted&&!h.isReverted||r.vars.immediateRender!==!1&&t.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),h.animation=r.pause(),r.scrollTrigger=h,h.scrubDuration(S),ct=0,v||(v=r.vars.id)),C&&((!rr(C)||C.push)&&(C={snapTo:C}),"scrollBehavior"in _e.style&&K.set(J?[_e,mt]:P,{scrollBehavior:"auto"}),me.forEach(function(Z){return tt(Z)&&Z.target===(J?Ce.scrollingElement||mt:P)&&(Z.smooth=!1)}),m=tt(C.snapTo)?C.snapTo:C.snapTo==="labels"?es(r):C.snapTo==="labelsDirectional"?ts(r):C.directional!==!1?function(Z,le){return co(C.snapTo)(Z,Je()-f<500?0:le.direction)}:K.utils.snap(C.snapTo),vt=C.duration||{min:.1,max:2},vt=rr(vt)?Ur(vt.min,vt.max):Ur(vt,vt),Tt=K.delayedCall(C.delay||Qt/2||.1,function(){var Z=i(),le=Je()-f<500,ne=w.tween;if((le||Math.abs(h.getVelocity())<10)&&!ne&&!kn&&g!==Z){var ce=(Z-T)/q,Ue=r&&!te?r.totalProgress():ce,ye=le?0:(Ue-Lt)/(Je()-Ir)*1e3||0,De=K.utils.clamp(-ce,1-ce,hr(ye/2)*ye/.185),qe=ce+(C.inertia===!1?0:De),Re,Ee,ve=C,Ct=ve.onStart,Ae=ve.onInterrupt,pt=ve.onComplete;if(Re=m(qe,h),Nr(Re)||(Re=qe),Ee=Math.max(0,Math.round(T+Re*q)),Z<=x&&Z>=T&&Ee!==Z){if(ne&&!ne._initted&&ne.data<=hr(Ee-Z))return;C.inertia===!1&&(De=Re-ce),w(Ee,{duration:vt(hr(Math.max(hr(qe-Ue),hr(Re-Ue))*.185/ye/.05||0)),ease:C.ease||"power3",data:hr(Ee-Z),onInterrupt:function(){return Tt.restart(!0)&&Ae&&Ae(h)},onComplete:function(){h.update(),g=i(),r&&!te&&(ae?ae.resetTo("totalProgress",Re,r._tTime/r._tDur):r.progress(Re)),ct=Lt=r&&!te?r.totalProgress():h.progress,$&&$(h),pt&&pt(h)}},Z,De*q,Ee-Z-De*q),Ct&&Ct(h,w.tween)}}else h.isActive&&g!==Z&&Tt.restart(!0)}).pause()),v&&($n[v]=h),_=h.trigger=ut(_||y!==!0&&y),zt=_&&_._gsap&&_._gsap.stRevert,zt&&(zt=zt(h)),y=y===!0?_:ut(y),gt(u)&&(u={targets:_,className:u}),y&&(R===!1||R===xt||(R=!R&&y.parentNode&&y.parentNode.style&&bt(y.parentNode).display==="flex"?!1:Ne),h.pin=y,L=K.core.getCache(y),L.spacer?de=L.pinState:(W&&(W=ut(W),W&&!W.nodeType&&(W=W.current||W.nativeElement),L.spacerIsNative=!!W,W&&(L.spacerState=un(W))),L.spacer=ie=W||Ce.createElement("div"),ie.classList.add("pin-spacer"),v&&ie.classList.add("pin-spacer-"+v),L.pinState=de=un(y)),t.force3D!==!1&&K.set(y,{force3D:!0}),h.spacer=ie=L.spacer,rt=bt(y),wt=rt[R+k.os2],Se=K.getProperty(y),we=K.quickSetter(y,k.a,Fe),Bn(y,ie,rt),xe=un(y)),M){a=rr(M)?vo(M,To):To,c=cn("scroller-start",v,P,k,a,0),d=cn("scroller-end",v,P,k,a,0,c),ze=c["offset"+k.op.d2];var Sr=ut(qt(P,"content")||P);A=this.markerStart=cn("start",v,Sr,k,a,ze,0,z),B=this.markerEnd=cn("end",v,Sr,k,a,ze,0,z),z&&(fr=K.quickSetter([A,B],k.a,Fe)),!Q&&!(Ot.length&&qt(P,"fixedMarkers")===!0)&&(Ji(J?_e:P),K.set([c,d],{force3D:!0}),Nt=K.quickSetter(c,k.a,Fe),Mt=K.quickSetter(d,k.a,Fe))}if(z){var ue=z.vars.onUpdate,se=z.vars.onUpdateParams;z.eventCallback("onUpdate",function(){h.update(0,0,1),ue&&ue.apply(z,se||[])})}if(h.previous=function(){return he[he.indexOf(h)-1]},h.next=function(){return he[he.indexOf(h)+1]},h.revert=function(Z,le){if(!le)return h.kill(!0);var ne=Z!==!1||!h.enabled,ce=$e;ne!==h.isReverted&&(ne&&(St=Math.max(i(),h.scroll.rec||0),s=h.progress,$t=r&&r.progress()),A&&[A,B,c,d].forEach(function(Ue){return Ue.style.display=ne?"none":"block"}),ne&&($e=h,h.update(ne)),y&&(!Y||!h.isActive)&&(ne?os(y,ie,de):Bn(y,ie,bt(y),Pe)),ne||h.update(ne),$e=ce,h.isReverted=ne)},h.refresh=function(Z,le,ne,ce){if(!(($e||!h.enabled)&&!le)){if(y&&Z&&_t){We(p,"scrollEnd",ii);return}!at&&oe&&oe(h),$e=h,w.tween&&!ne&&(w.tween.kill(),w.tween=0),ae&&ae.pause(),E&&r&&r.revert({kill:!1}).invalidate(),h.isReverted||h.revert(!0,!0),h._subPinOffset=!1;var Ue=Ie(),ye=ft(),De=z?z.duration():Dt(P,k),qe=q<=.01,Re=0,Ee=ce||0,ve=rr(ne)?ne.end:t.end,Ct=t.endTrigger||_,Ae=rr(ne)?ne.start:t.start||(t.start===0||!_?0:y?"0 0":"0 100%"),pt=h.pinnedContainer=t.pinnedContainer&&ut(t.pinnedContainer,h),Et=_&&Math.max(0,he.indexOf(h))||0,je=Et,Ye,Ze,Kt,Kr,Qe,Be,At,Rn,fo,Cr,kt,Pr,Jr;for(M&&rr(ne)&&(Pr=K.getProperty(c,k.p),Jr=K.getProperty(d,k.p));je-- >0;)Be=he[je],Be.end||Be.refresh(0,1)||($e=h),At=Be.pin,At&&(At===_||At===y||At===pt)&&!Be.isReverted&&(Cr||(Cr=[]),Cr.unshift(Be),Be.revert(!0,!0)),Be!==he[je]&&(Et--,je--);for(tt(Ae)&&(Ae=Ae(h)),Ae=xo(Ae,"start",h),T=Mo(Ae,_,Ue,k,i(),A,c,h,ye,re,Q,De,z,h._startClamp&&"_startClamp")||(y?-.001:0),tt(ve)&&(ve=ve(h)),gt(ve)&&!ve.indexOf("+=")&&(~ve.indexOf(" ")?ve=(gt(Ae)?Ae.split(" ")[0]:"")+ve:(Re=xn(ve.substr(2),Ue),ve=gt(Ae)?Ae:(z?K.utils.mapRange(0,z.duration(),z.scrollTrigger.start,z.scrollTrigger.end,T):T)+Re,Ct=_)),ve=xo(ve,"end",h),x=Math.max(T,Mo(ve||(Ct?"100% 0":De),Ct,Ue,k,i()+Re,B,d,h,ye,re,Q,De,z,h._endClamp&&"_endClamp"))||-.001,Re=0,je=Et;je--;)Be=he[je],At=Be.pin,At&&Be.start-Be._pinPush<=T&&!z&&Be.end>0&&(Ye=Be.end-(h._startClamp?Math.max(0,Be.start):Be.start),(At===_&&Be.start-Be._pinPush<T||At===pt)&&isNaN(Ae)&&(Re+=Ye*(1-Be.progress)),At===y&&(Ee+=Ye));if(T+=Re,x+=Re,h._startClamp&&(h._startClamp+=Re),h._endClamp&&!at&&(h._endClamp=x||-.001,x=Math.min(x,Dt(P,k))),q=x-T||(T-=.01)&&.001,qe&&(s=K.utils.clamp(0,1,K.utils.normalize(T,x,St))),h._pinPush=Ee,A&&Re&&(Ye={},Ye[k.a]="+="+Re,pt&&(Ye[k.p]="-="+i()),K.set([A,B],Ye)),y&&!(Qn&&h.end>=Dt(P,k)))Ye=bt(y),Kr=k===He,Kt=i(),ke=parseFloat(Se(k.a))+Ee,!De&&x>1&&(kt=(J?Ce.scrollingElement||mt:P).style,kt={style:kt,value:kt["overflow"+k.a.toUpperCase()]},J&&bt(_e)["overflow"+k.a.toUpperCase()]!=="scroll"&&(kt.style["overflow"+k.a.toUpperCase()]="scroll")),Bn(y,ie,Ye),xe=un(y),Ze=Ft(y,!0),Rn=Q&&Zt(P,Kr?lt:He)(),R?(Pe=[R+k.os2,q+Ee+Fe],Pe.t=ie,je=R===Ne?Mn(y,k)+q+Ee:0,je&&(Pe.push(k.d,je+Fe),ie.style.flexBasis!=="auto"&&(ie.style.flexBasis=je+Fe)),wr(Pe),pt&&he.forEach(function(Mr){Mr.pin===pt&&Mr.vars.pinSpacing!==!1&&(Mr._subPinOffset=!0)}),Q&&i(St)):(je=Mn(y,k),je&&ie.style.flexBasis!=="auto"&&(ie.style.flexBasis=je+Fe)),Q&&(Qe={top:Ze.top+(Kr?Kt-T:Rn)+Fe,left:Ze.left+(Kr?Rn:Kt-T)+Fe,boxSizing:"border-box",position:"fixed"},Qe[ir]=Qe["max"+vr]=Math.ceil(Ze.width)+Fe,Qe[sr]=Qe["max"+lo]=Math.ceil(Ze.height)+Fe,Qe[xt]=Qe[xt+jr]=Qe[xt+Gr]=Qe[xt+Yr]=Qe[xt+Wr]="0",Qe[Ne]=Ye[Ne],Qe[Ne+jr]=Ye[Ne+jr],Qe[Ne+Gr]=Ye[Ne+Gr],Qe[Ne+Yr]=Ye[Ne+Yr],Qe[Ne+Wr]=Ye[Ne+Wr],Te=ss(de,Qe,Y),at&&i(0)),r?(fo=r._initted,Dn(1),r.render(r.duration(),!0,!0),Xe=Se(k.a)-ke+q+Ee,Me=Math.abs(q-Xe)>1,Q&&Me&&Te.splice(Te.length-2,2),r.render(0,!0,!0),fo||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),Dn(0)):Xe=q,kt&&(kt.value?kt.style["overflow"+k.a.toUpperCase()]=kt.value:kt.style.removeProperty("overflow-"+k.a));else if(_&&i()&&!z)for(Ze=_.parentNode;Ze&&Ze!==_e;)Ze._pinOffset&&(T-=Ze._pinOffset,x-=Ze._pinOffset),Ze=Ze.parentNode;Cr&&Cr.forEach(function(Mr){return Mr.revert(!1,!0)}),h.start=T,h.end=x,O=N=at?St:i(),!z&&!at&&(O<St&&i(St),h.scroll.rec=0),h.revert(!1,!0),f=Je(),Tt&&(g=-1,Tt.restart(!0)),$e=0,r&&te&&(r._initted||$t)&&r.progress()!==$t&&r.progress($t||0,!0).render(r.time(),!0,!0),(qe||s!==h.progress||z||E||r&&!r._initted)&&(r&&!te&&r.totalProgress(z&&T<-.001&&!s?K.utils.normalize(T,x,0):s,!0),h.progress=qe||(O-T)/q===s?0:s),y&&R&&(ie._pinOffset=Math.round(h.progress*Xe)),ae&&ae.invalidate(),isNaN(Pr)||(Pr-=K.getProperty(c,k.p),Jr-=K.getProperty(d,k.p),fn(c,k,Pr),fn(A,k,Pr-(ce||0)),fn(d,k,Jr),fn(B,k,Jr-(ce||0))),qe&&!at&&h.update(),I&&!at&&!j&&(j=!0,I(h),j=!1)}},h.getVelocity=function(){return(i()-N)/(Je()-Ir)*1e3||0},h.endAnimation=function(){Ar(h.callbackAnimation),r&&(ae?ae.progress(1):r.paused()?te||Ar(r,h.direction<0,1):Ar(r,r.reversed()))},h.labelToScroll=function(Z){return r&&r.labels&&(T||h.refresh()||T)+r.labels[Z]/r.duration()*q||0},h.getTrailing=function(Z){var le=he.indexOf(h),ne=h.direction>0?he.slice(0,le).reverse():he.slice(le+1);return(gt(Z)?ne.filter(function(ce){return ce.vars.preventOverlaps===Z}):ne).filter(function(ce){return h.direction>0?ce.end<=T:ce.start>=x})},h.update=function(Z,le,ne){if(!(z&&!ne&&!Z)){var ce=at===!0?St:h.scroll(),Ue=Z?0:(ce-T)/q,ye=Ue<0?0:Ue>1?1:Ue||0,De=h.progress,qe,Re,Ee,ve,Ct,Ae,pt,Et;if(le&&(N=O,O=z?i():ce,C&&(Lt=ct,ct=r&&!te?r.totalProgress():ye)),b&&y&&!$e&&!nn&&_t&&(!ye&&T<ce+(ce-N)/(Je()-Ir)*b?ye=1e-4:ye===1&&x>ce+(ce-N)/(Je()-Ir)*b&&(ye=.9999)),ye!==De&&h.enabled){if(qe=h.isActive=!!ye&&ye<1,Re=!!De&&De<1,Ae=qe!==Re,Ct=Ae||!!ye!=!!De,h.direction=ye>De?1:-1,h.progress=ye,Ct&&!$e&&(Ee=ye&&!De?0:ye===1?1:De===1?2:3,te&&(ve=!Ae&&D[Ee+1]!=="none"&&D[Ee+1]||D[Ee],Et=r&&(ve==="complete"||ve==="reset"||ve in r))),X&&(Ae||Et)&&(Et||S||!r)&&(tt(X)?X(h):h.getTrailing(X).forEach(function(Kt){return Kt.endAnimation()})),te||(ae&&!$e&&!nn?(ae._dp._time-ae._start!==ae._time&&ae.render(ae._dp._time-ae._start),ae.resetTo?ae.resetTo("totalProgress",ye,r._tTime/r._tDur):(ae.vars.totalProgress=ye,ae.invalidate().restart())):r&&r.totalProgress(ye,!!($e&&(f||Z)))),y){if(Z&&R&&(ie.style[R+k.os2]=wt),!Q)we(Or(ke+Xe*ye));else if(Ct){if(pt=!Z&&ye>De&&x+1>ce&&ce+1>=Dt(P,k),Y)if(!Z&&(qe||pt)){var je=Ft(y,!0),Ye=ce-T;Eo(y,_e,je.top+(k===He?Ye:0)+Fe,je.left+(k===He?0:Ye)+Fe)}else Eo(y,ie);wr(qe||pt?Te:xe),Me&&ye<1&&qe||we(ke+(ye===1&&!pt?Xe:0))}}C&&!w.tween&&!$e&&!nn&&Tt.restart(!0),u&&(Ae||H&&ye&&(ye<1||!On))&&Zr(u.targets).forEach(function(Kt){return Kt.classList[qe||H?"add":"remove"](u.className)}),l&&!te&&!Z&&l(h),Ct&&!$e?(te&&(Et&&(ve==="complete"?r.pause().totalProgress(1):ve==="reset"?r.restart(!0).pause():ve==="restart"?r.restart(!0):r[ve]()),l&&l(h)),(Ae||!On)&&(F&&Ae&&Ln(h,F),V[Ee]&&Ln(h,V[Ee]),H&&(ye===1?h.kill(!1,1):V[Ee]=0),Ae||(Ee=ye===1?1:3,V[Ee]&&Ln(h,V[Ee]))),G&&!qe&&Math.abs(h.getVelocity())>(Nr(G)?G:2500)&&(Ar(h.callbackAnimation),ae?ae.progress(1):Ar(r,ve==="reverse"?1:!ye,1))):te&&l&&!$e&&l(h)}if(Mt){var Ze=z?ce/z.duration()*(z._caScrollDist||0):ce;Nt(Ze+(c._isFlipped?1:0)),Mt(Ze)}fr&&fr(-ce/z.duration()*(z._caScrollDist||0))}},h.enable=function(Z,le){h.enabled||(h.enabled=!0,We(P,"resize",Lr),J||We(P,"scroll",dr),oe&&We(p,"refreshInit",oe),Z!==!1&&(h.progress=s=0,O=N=g=i()),le!==!1&&h.refresh())},h.getTween=function(Z){return Z&&w?w.tween:ae},h.setPositions=function(Z,le,ne,ce){if(z){var Ue=z.scrollTrigger,ye=z.duration(),De=Ue.end-Ue.start;Z=Ue.start+De*Z/ye,le=Ue.start+De*le/ye}h.refresh(!1,!1,{start:bo(Z,ne&&!!h._startClamp),end:bo(le,ne&&!!h._endClamp)},ce),h.update()},h.adjustPinSpacing=function(Z){if(Pe&&Z){var le=Pe.indexOf(k.d)+1;Pe[le]=parseFloat(Pe[le])+Z+Fe,Pe[1]=parseFloat(Pe[1])+Z+Fe,wr(Pe)}},h.disable=function(Z,le){if(h.enabled&&(Z!==!1&&h.revert(!0,!0),h.enabled=h.isActive=!1,le||ae&&ae.pause(),St=0,L&&(L.uncache=1),oe&&Ge(p,"refreshInit",oe),Tt&&(Tt.pause(),w.tween&&w.tween.kill()&&(w.tween=0)),!J)){for(var ne=he.length;ne--;)if(he[ne].scroller===P&&he[ne]!==h)return;Ge(P,"resize",Lr),J||Ge(P,"scroll",dr)}},h.kill=function(Z,le){h.disable(Z,le),ae&&!le&&ae.kill(),v&&delete $n[v];var ne=he.indexOf(h);ne>=0&&he.splice(ne,1),ne===st&&_n>0&&st--,ne=0,he.forEach(function(ce){return ce.scroller===h.scroller&&(ne=1)}),ne||at||(h.scroll.rec=0),r&&(r.scrollTrigger=null,Z&&r.revert({kill:!1}),le||r.kill()),A&&[A,B,c,d].forEach(function(ce){return ce.parentNode&&ce.parentNode.removeChild(ce)}),Vr===h&&(Vr=0),y&&(L&&(L.uncache=1),ne=0,he.forEach(function(ce){return ce.pin===y&&ne++}),ne||(L.spacer=0)),t.onKill&&t.onKill(h)},he.push(h),h.enable(!1,!1),zt&&zt(h),r&&r.add&&!q){var be=h.update;h.update=function(){h.update=be,me.cache++,T||x||h.refresh()},K.delayedCall(.01,h.update),q=.01,T=x=0}else h.refresh();y&&ns()},p.register=function(t){return gr||(K=t||Jo(),Ko()&&window.document&&p.enable(),gr=Dr),gr},p.defaults=function(t){if(t)for(var r in t)ln[r]=t[r];return ln},p.disable=function(t,r){Dr=0,he.forEach(function(l){return l[r?"kill":"disable"](t)}),Ge(ge,"wheel",dr),Ge(Ce,"scroll",dr),clearInterval(rn),Ge(Ce,"touchcancel",It),Ge(_e,"touchstart",It),sn(Ge,Ce,"pointerdown,touchstart,mousedown",_o),sn(Ge,Ce,"pointerup,touchend,mouseup",wo),Cn.kill(),on(Ge);for(var o=0;o<me.length;o+=3)an(Ge,me[o],me[o+1]),an(Ge,me[o],me[o+2])},p.enable=function(){if(ge=window,Ce=document,mt=Ce.documentElement,_e=Ce.body,K&&(Zr=K.utils.toArray,Ur=K.utils.clamp,Zn=K.core.context||It,Dn=K.core.suppressOverwrites||It,oo=ge.history.scrollRestoration||"auto",Kn=ge.pageYOffset||0,K.core.globals("ScrollTrigger",p),_e)){Dr=1,_r=document.createElement("div"),_r.style.height="100vh",_r.style.position="absolute",li(),Qi(),Oe.register(K),p.isTouch=Oe.isTouch,Yt=Oe.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),qn=Oe.isTouch===1,We(ge,"wheel",dr),no=[ge,Ce,mt,_e],K.matchMedia?(p.matchMedia=function(F){var I=K.matchMedia(),S;for(S in F)I.add(S,F[S]);return I},K.addEventListener("matchMediaInit",function(){return uo()}),K.addEventListener("matchMediaRevert",function(){return si()}),K.addEventListener("matchMedia",function(){or(0,1),ur("matchMedia")}),K.matchMedia().add("(orientation: portrait)",function(){return zn(),zn})):console.warn("Requires GSAP 3.11.0 or later"),zn(),We(Ce,"scroll",dr);var t=_e.hasAttribute("style"),r=_e.style,o=r.borderTopStyle,l=K.core.Animation.prototype,u,v;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",u=Ft(_e),He.m=Math.round(u.top+He.sc())||0,lt.m=Math.round(u.left+lt.sc())||0,o?r.borderTopStyle=o:r.removeProperty("border-top-style"),t||(_e.setAttribute("style",""),_e.removeAttribute("style")),rn=setInterval(So,250),K.delayedCall(.5,function(){return nn=0}),We(Ce,"touchcancel",It),We(_e,"touchstart",It),sn(We,Ce,"pointerdown,touchstart,mousedown",_o),sn(We,Ce,"pointerup,touchend,mouseup",wo),Xn=K.utils.checkPrefix("transform"),wn.push(Xn),gr=Je(),Cn=K.delayedCall(.2,or).pause(),mr=[Ce,"visibilitychange",function(){var F=ge.innerWidth,I=ge.innerHeight;Ce.hidden?(mo=F,yo=I):(mo!==F||yo!==I)&&Lr()},Ce,"DOMContentLoaded",or,ge,"load",or,ge,"resize",Lr],on(We),he.forEach(function(F){return F.enable(0,1)}),v=0;v<me.length;v+=3)an(Ge,me[v],me[v+1]),an(Ge,me[v],me[v+2])}},p.config=function(t){"limitCallbacks"in t&&(On=!!t.limitCallbacks);var r=t.syncInterval;r&&clearInterval(rn)||(rn=r)&&setInterval(So,r),"ignoreMobileResize"in t&&(qn=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(on(Ge)||on(We,t.autoRefreshEvents||"none"),Zo=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,r){var o=ut(t),l=me.indexOf(o),u=lr(o);~l&&me.splice(l,u?6:2),r&&(u?Ot.unshift(ge,r,_e,r,mt,r):Ot.unshift(o,r))},p.clearMatchMedia=function(t){he.forEach(function(r){return r._ctx&&r._ctx.query===t&&r._ctx.kill(!0,!0)})},p.isInViewport=function(t,r,o){var l=(gt(t)?ut(t):t).getBoundingClientRect(),u=l[o?ir:sr]*r||0;return o?l.right-u>0&&l.left+u<ge.innerWidth:l.bottom-u>0&&l.top+u<ge.innerHeight},p.positionInViewport=function(t,r,o){gt(t)&&(t=ut(t));var l=t.getBoundingClientRect(),u=l[o?ir:sr],v=r==null?u/2:r in En?En[r]*u:~r.indexOf("%")?parseFloat(r)*u/100:parseFloat(r)||0;return o?(l.left+v)/ge.innerWidth:(l.top+v)/ge.innerHeight},p.killAll=function(t){if(he.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),t!==!0){var r=cr.killAll||[];cr={},r.forEach(function(o){return o()})}},p}();fe.version="3.12.7";fe.saveStyles=function(p){return p?Zr(p).forEach(function(e){if(e&&e.style){var n=dt.indexOf(e);n>=0&&dt.splice(n,5),dt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),K.core.getCache(e),Zn())}}):dt};fe.revert=function(p,e){return uo(!p,e)};fe.create=function(p,e){return new fe(p,e)};fe.refresh=function(p){return p?Lr(!0):(gr||fe.register())&&or(!0)};fe.update=function(p){return++me.cache&&Gt(p===!0?2:0)};fe.clearScrollMemory=ai;fe.maxScroll=function(p,e){return Dt(p,e?lt:He)};fe.getScrollFunc=function(p,e){return Zt(ut(p),e?lt:He)};fe.getById=function(p){return $n[p]};fe.getAll=function(){return he.filter(function(p){return p.vars.id!=="ScrollSmoother"})};fe.isScrolling=function(){return!!_t};fe.snapDirectional=co;fe.addEventListener=function(p,e){var n=cr[p]||(cr[p]=[]);~n.indexOf(e)||n.push(e)};fe.removeEventListener=function(p,e){var n=cr[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};fe.batch=function(p,e){var n=[],t={},r=e.interval||.016,o=e.batchMax||1e9,l=function(F,I){var S=[],_=[],y=K.delayedCall(r,function(){I(S,_),S=[],_=[]}).pause();return function(R){S.length||y.restart(!0),S.push(R.trigger),_.push(R),o<=S.length&&y.progress(1)}},u;for(u in e)t[u]=u.substr(0,2)==="on"&&tt(e[u])&&u!=="onRefreshInit"?l(u,e[u]):e[u];return tt(o)&&(o=o(),We(fe,"refresh",function(){return o=e.batchMax()})),Zr(p).forEach(function(v){var F={};for(u in t)F[u]=t[u];F.trigger=v,n.push(fe.create(F))}),n};var ko=function(e,n,t,r){return n>r?e(r):n<0&&e(0),t>r?(r-n)/(t-n):t<0?n/(n-t):1},Fn=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(Oe.isTouch?" pinch-zoom":""):"none",e===mt&&p(_e,n)},pn={auto:1,scroll:1},ls=function(e){var n=e.event,t=e.target,r=e.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,l=o._gsap||K.core.getCache(o),u=Je(),v;if(!l._isScrollT||u-l._isScrollT>2e3){for(;o&&o!==_e&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(pn[(v=bt(o)).overflowY]||pn[v.overflowX]));)o=o.parentNode;l._isScroll=o&&o!==t&&!lr(o)&&(pn[(v=bt(o)).overflowY]||pn[v.overflowX]),l._isScrollT=u}(l._isScroll||r==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},ui=function(e,n,t,r){return Oe.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:r=r&&ls,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return t&&We(Ce,Oe.eventTypes[0],Io,!1,!0)},onDisable:function(){return Ge(Ce,Oe.eventTypes[0],Io,!0)}})},cs=/(input|label|select|textarea)/i,Ro,Io=function(e){var n=cs.test(e.target.tagName);(n||Ro)&&(e._gsapAllow=!0,Ro=n)},us=function(e){rr(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,r=n.momentum,o=n.allowNestedScroll,l=n.onRelease,u,v,F=ut(e.target)||mt,I=K.core.globals().ScrollSmoother,S=I&&I.get(),_=Yt&&(e.content&&ut(e.content)||S&&e.content!==!1&&!S.smooth()&&S.content()),y=Zt(F,He),R=Zt(F,lt),E=1,b=(Oe.isTouch&&ge.visualViewport?ge.visualViewport.scale*ge.visualViewport.width:ge.outerWidth)/ge.innerWidth,U=0,$=tt(r)?function(){return r(u)}:function(){return r||2.8},H,C,Y=ui(F,e.type,!0,o),W=function(){return C=!1},z=It,G=It,X=function(){v=Dt(F,He),G=Ur(Yt?1:0,v),t&&(z=Ur(0,Dt(F,lt))),H=ar},k=function(){_._gsap.y=Or(parseFloat(_._gsap.y)+y.offset)+"px",_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(_._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},te=function(){if(C){requestAnimationFrame(W);var M=Or(u.deltaY/2),re=G(y.v-M);if(_&&re!==y.v+y.offset){y.offset=re-y.v;var h=Or((parseFloat(_&&_._gsap.y)||0)-y.offset);_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+h+", 0, 1)",_._gsap.y=h+"px",y.cacheID=me.cache,Gt()}return!0}y.offset&&k(),C=!0},P,ee,J,Q,V=function(){X(),P.isActive()&&P.vars.scrollY>v&&(y()>v?P.progress(1)&&y(v):P.resetTo("scrollY",v))};return _&&K.set(_,{y:"+=0"}),e.ignoreCheck=function(D){return Yt&&D.type==="touchmove"&&te()||E>1.05&&D.type!=="touchstart"||u.isGesturing||D.touches&&D.touches.length>1},e.onPress=function(){C=!1;var D=E;E=Or((ge.visualViewport&&ge.visualViewport.scale||1)/b),P.pause(),D!==E&&Fn(F,E>1.01?!0:t?!1:"x"),ee=R(),J=y(),X(),H=ar},e.onRelease=e.onGestureStart=function(D,M){if(y.offset&&k(),!M)Q.restart(!0);else{me.cache++;var re=$(),h,oe;t&&(h=R(),oe=h+re*.05*-D.velocityX/.227,re*=ko(R,h,oe,Dt(F,lt)),P.vars.scrollX=z(oe)),h=y(),oe=h+re*.05*-D.velocityY/.227,re*=ko(y,h,oe,Dt(F,He)),P.vars.scrollY=G(oe),P.invalidate().duration(re).play(.01),(Yt&&P.vars.scrollY>=v||h>=v-1)&&K.to({},{onUpdate:V,duration:re})}l&&l(D)},e.onWheel=function(){P._ts&&P.pause(),Je()-U>1e3&&(H=0,U=Je())},e.onChange=function(D,M,re,h,oe){if(ar!==H&&X(),M&&t&&R(z(h[2]===M?ee+(D.startX-D.x):R()+M-h[1])),re){y.offset&&k();var Ie=oe[2]===re,ft=Ie?J+D.startY-D.y:y()+re-oe[1],g=G(ft);Ie&&ft!==g&&(J+=g-ft),y(g)}(re||M)&&Gt()},e.onEnable=function(){Fn(F,t?!1:"x"),fe.addEventListener("refresh",V),We(ge,"resize",V),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=R.smooth=!1),Y.enable()},e.onDisable=function(){Fn(F,!0),Ge(ge,"resize",V),fe.removeEventListener("refresh",V),Y.kill()},e.lockAxis=e.lockAxis!==!1,u=new Oe(e),u.iOS=Yt,Yt&&!y()&&y(1),Yt&&K.ticker.add(It),Q=u._dc,P=K.to(u,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:ci(y,y(),function(){return P.pause()})},onUpdate:Gt,onComplete:Q.vars.onComplete}),u};fe.sort=function(p){if(tt(p))return he.sort(p);var e=ge.pageYOffset||0;return fe.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+ge.innerHeight}),he.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};fe.observe=function(p){return new Oe(p)};fe.normalizeScroll=function(p){if(typeof p>"u")return it;if(p===!0&&it)return it.enable();if(p===!1){it&&it.kill(),it=p;return}var e=p instanceof Oe?p:us(p);return it&&it.target===e.target&&it.kill(),lr(e.target)&&(it=e),e};fe.core={_getVelocityProp:Vn,_inputObserver:ui,_scrollers:me,_proxies:Ot,bridge:{ss:function(){_t||ur("scrollStart"),_t=Je()},ref:function(){return $e}}};Jo()&&K.registerPlugin(fe);var Xr=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(I){I.preventDefault(),t(++p%e.children.length)},!1);function n(I){return e.appendChild(I.dom),I}function t(I){for(var S=0;S<e.children.length;S++)e.children[S].style.display=S===I?"block":"none";p=I}var r=(performance||Date).now(),o=r,l=0,u=n(new Xr.Panel("FPS","#0ff","#002")),v=n(new Xr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var F=n(new Xr.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){l++;var I=(performance||Date).now();if(v.update(I-r,200),I>=o+1e3&&(u.update(l*1e3/(I-o),100),o=I,l=0,F)){var S=performance.memory;F.update(S.usedJSHeapSize/1048576,S.jsHeapSizeLimit/1048576)}return I},update:function(){r=this.end()},domElement:e,setMode:t}};Xr.Panel=function(p,e,n){var t=1/0,r=0,o=Math.round,l=o(window.devicePixelRatio||1),u=80*l,v=48*l,F=3*l,I=2*l,S=3*l,_=15*l,y=74*l,R=30*l,E=document.createElement("canvas");E.width=u,E.height=v,E.style.cssText="width:80px;height:48px";var b=E.getContext("2d");return b.font="bold "+9*l+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=n,b.fillRect(0,0,u,v),b.fillStyle=e,b.fillText(p,F,I),b.fillRect(S,_,y,R),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(S,_,y,R),{dom:E,update:function(U,$){t=Math.min(t,U),r=Math.max(r,U),b.fillStyle=n,b.globalAlpha=1,b.fillRect(0,0,u,_),b.fillStyle=e,b.fillText(o(U)+" "+p+" ("+o(t)+"-"+o(r)+")",F,I),b.drawImage(E,S+l,_,y-l,R,S,_,y-l,R),b.fillRect(S+y-l,_,l,R),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(S+y-l,_,l,o((1-U/$)*R))}}};const fi={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class $r{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const fs=new Ci(-1,1,1,-1,0,1);class ps extends ro{constructor(){super(),this.setAttribute("position",new zr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new zr([0,2,0,0,2,0],2))}}const hs=new ps;class pi{constructor(e){this._mesh=new ht(hs,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,fs)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ds extends $r{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof yr?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Gn.clone(e.uniforms),this.material=new yr({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new pi(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Do extends $r{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let l,u;this.inverse?(l=0,u=1):(l=1,u=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,l,4294967295),o.buffers.stencil.setClear(u),o.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}}class gs extends $r{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class ms{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new pe);this._width=t.width,this._height=t.height,n=new dn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:gn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ds(fi),this.copyPass.material.blending=Pi,this.clock=new Mi}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let r=0,o=this.passes.length;r<o;r++){const l=this.passes[r];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),l.needsSwap){if(t){const u=this.renderer.getContext(),v=this.renderer.state.buffers.stencil;v.setFunc(u.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),v.setFunc(u.EQUAL,1,4294967295)}this.swapBuffers()}Do!==void 0&&(l instanceof Do?t=!0:l instanceof gs&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new pe);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class ys extends $r{constructor(e,n,t=null,r=null,o=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ht}render(e,n,t){const r=e.autoClear;e.autoClear=!1;let o,l;this.overrideMaterial!==null&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=l),e.autoClear=r}}const xs={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ht(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Tr extends $r{constructor(e,n,t,r){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new pe(e.x,e.y):new pe(256,256),this.clearColor=new Ht(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new dn(o,l,{type:gn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let S=0;S<this.nMips;S++){const _=new dn(o,l,{type:gn});_.texture.name="UnrealBloomPass.h"+S,_.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(_);const y=new dn(o,l,{type:gn});y.texture.name="UnrealBloomPass.v"+S,y.texture.generateMipmaps=!1,this.renderTargetsVertical.push(y),o=Math.round(o/2),l=Math.round(l/2)}const u=xs;this.highPassUniforms=Gn.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new yr({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.separableBlurMaterials=[];const v=[3,5,7,9,11];o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let S=0;S<this.nMips;S++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(v[S])),this.separableBlurMaterials[S].uniforms.invSize.value=new pe(1/o,1/l),o=Math.round(o/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const F=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=F,this.bloomTintColors=[new et(1,1,1),new et(1,1,1),new et(1,1,1),new et(1,1,1),new et(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const I=fi;this.copyUniforms=Gn.clone(I.uniforms),this.blendMaterial=new yr({uniforms:this.copyUniforms,vertexShader:I.vertexShader,fragmentShader:I.fragmentShader,blending:er,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ht,this.oldClearAlpha=1,this.basic=new qr,this.fsQuad=new pi(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),r=Math.round(n/2);this.renderTargetBright.setSize(t,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(t,r),this.renderTargetsVertical[o].setSize(t,r),this.separableBlurMaterials[o].uniforms.invSize.value=new pe(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,n,t,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let u=this.renderTargetBright;for(let v=0;v<this.nMips;v++)this.fsQuad.material=this.separableBlurMaterials[v],this.separableBlurMaterials[v].uniforms.colorTexture.value=u.texture,this.separableBlurMaterials[v].uniforms.direction.value=Tr.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[v]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[v].uniforms.colorTexture.value=this.renderTargetsHorizontal[v].texture,this.separableBlurMaterials[v].uniforms.direction.value=Tr.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[v]),e.clear(),this.fsQuad.render(e),u=this.renderTargetsVertical[v];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new yr({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new pe(.5,.5)},direction:{value:new pe(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new yr({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Tr.BlurDirectionX=new pe(1,0);Tr.BlurDirectionY=new pe(0,1);class bs extends Ei{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const r=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(r,n)}this.type="TextGeometry"}}const _s=Ii;class An extends Lo{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,r){const o=this,l=new zo(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{n(o.parse(u))}catch(v){r?r(v):console.error(v),o.manager.itemError(e)}},t,r)}parse(e){const n=this;function t(g,f){if(g.nodeType!==1)return;const s=C(g);let i=!1,w=null;switch(g.nodeName){case"svg":f=R(g,f);break;case"style":o(g);break;case"g":f=R(g,f);break;case"path":f=R(g,f),g.hasAttribute("d")&&(w=r(g));break;case"rect":f=R(g,f),w=v(g);break;case"polygon":f=R(g,f),w=F(g);break;case"polyline":f=R(g,f),w=I(g);break;case"circle":f=R(g,f),w=S(g);break;case"ellipse":f=R(g,f),w=_(g);break;case"line":f=R(g,f),w=y(g);break;case"defs":i=!0;break;case"use":f=R(g,f);const O=(g.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),N=g.viewportElement.getElementById(O);N?t(N,f):console.warn("SVGLoader: 'use node' references non-existent node id: "+O);break}w&&(f.fill!==void 0&&f.fill!=="none"&&w.color.setStyle(f.fill,_s),W(w,oe),P.push(w),w.userData={node:g,style:f});const L=g.childNodes;for(let m=0;m<L.length;m++){const O=L[m];i&&O.nodeName!=="style"&&O.nodeName!=="defs"||t(O,f)}s&&(J.pop(),J.length>0?oe.copy(J[J.length-1]):oe.identity())}function r(g){const f=new Wt,s=new pe,i=new pe,w=new pe;let L=!0,m=!1;const O=g.getAttribute("d");if(O===""||O==="none")return null;const N=O.match(/[a-df-z][^a-df-z]*/ig);for(let T=0,x=N.length;T<x;T++){const A=N[T],B=A.charAt(0),c=A.slice(1).trim();L===!0&&(m=!0,L=!1);let d;switch(B){case"M":d=b(c);for(let a=0,j=d.length;a<j;a+=2)s.x=d[a+0],s.y=d[a+1],i.x=s.x,i.y=s.y,a===0?f.moveTo(s.x,s.y):f.lineTo(s.x,s.y),a===0&&w.copy(s);break;case"H":d=b(c);for(let a=0,j=d.length;a<j;a++)s.x=d[a],i.x=s.x,i.y=s.y,f.lineTo(s.x,s.y),a===0&&m===!0&&w.copy(s);break;case"V":d=b(c);for(let a=0,j=d.length;a<j;a++)s.y=d[a],i.x=s.x,i.y=s.y,f.lineTo(s.x,s.y),a===0&&m===!0&&w.copy(s);break;case"L":d=b(c);for(let a=0,j=d.length;a<j;a+=2)s.x=d[a+0],s.y=d[a+1],i.x=s.x,i.y=s.y,f.lineTo(s.x,s.y),a===0&&m===!0&&w.copy(s);break;case"C":d=b(c);for(let a=0,j=d.length;a<j;a+=6)f.bezierCurveTo(d[a+0],d[a+1],d[a+2],d[a+3],d[a+4],d[a+5]),i.x=d[a+2],i.y=d[a+3],s.x=d[a+4],s.y=d[a+5],a===0&&m===!0&&w.copy(s);break;case"S":d=b(c);for(let a=0,j=d.length;a<j;a+=4)f.bezierCurveTo(E(s.x,i.x),E(s.y,i.y),d[a+0],d[a+1],d[a+2],d[a+3]),i.x=d[a+0],i.y=d[a+1],s.x=d[a+2],s.y=d[a+3],a===0&&m===!0&&w.copy(s);break;case"Q":d=b(c);for(let a=0,j=d.length;a<j;a+=4)f.quadraticCurveTo(d[a+0],d[a+1],d[a+2],d[a+3]),i.x=d[a+0],i.y=d[a+1],s.x=d[a+2],s.y=d[a+3],a===0&&m===!0&&w.copy(s);break;case"T":d=b(c);for(let a=0,j=d.length;a<j;a+=2){const q=E(s.x,i.x),de=E(s.y,i.y);f.quadraticCurveTo(q,de,d[a+0],d[a+1]),i.x=q,i.y=de,s.x=d[a+0],s.y=d[a+1],a===0&&m===!0&&w.copy(s)}break;case"A":d=b(c,[3,4],7);for(let a=0,j=d.length;a<j;a+=7){if(d[a+5]==s.x&&d[a+6]==s.y)continue;const q=s.clone();s.x=d[a+5],s.y=d[a+6],i.x=s.x,i.y=s.y,l(f,d[a],d[a+1],d[a+2],d[a+3],d[a+4],q,s),a===0&&m===!0&&w.copy(s)}break;case"m":d=b(c);for(let a=0,j=d.length;a<j;a+=2)s.x+=d[a+0],s.y+=d[a+1],i.x=s.x,i.y=s.y,a===0?f.moveTo(s.x,s.y):f.lineTo(s.x,s.y),a===0&&w.copy(s);break;case"h":d=b(c);for(let a=0,j=d.length;a<j;a++)s.x+=d[a],i.x=s.x,i.y=s.y,f.lineTo(s.x,s.y),a===0&&m===!0&&w.copy(s);break;case"v":d=b(c);for(let a=0,j=d.length;a<j;a++)s.y+=d[a],i.x=s.x,i.y=s.y,f.lineTo(s.x,s.y),a===0&&m===!0&&w.copy(s);break;case"l":d=b(c);for(let a=0,j=d.length;a<j;a+=2)s.x+=d[a+0],s.y+=d[a+1],i.x=s.x,i.y=s.y,f.lineTo(s.x,s.y),a===0&&m===!0&&w.copy(s);break;case"c":d=b(c);for(let a=0,j=d.length;a<j;a+=6)f.bezierCurveTo(s.x+d[a+0],s.y+d[a+1],s.x+d[a+2],s.y+d[a+3],s.x+d[a+4],s.y+d[a+5]),i.x=s.x+d[a+2],i.y=s.y+d[a+3],s.x+=d[a+4],s.y+=d[a+5],a===0&&m===!0&&w.copy(s);break;case"s":d=b(c);for(let a=0,j=d.length;a<j;a+=4)f.bezierCurveTo(E(s.x,i.x),E(s.y,i.y),s.x+d[a+0],s.y+d[a+1],s.x+d[a+2],s.y+d[a+3]),i.x=s.x+d[a+0],i.y=s.y+d[a+1],s.x+=d[a+2],s.y+=d[a+3],a===0&&m===!0&&w.copy(s);break;case"q":d=b(c);for(let a=0,j=d.length;a<j;a+=4)f.quadraticCurveTo(s.x+d[a+0],s.y+d[a+1],s.x+d[a+2],s.y+d[a+3]),i.x=s.x+d[a+0],i.y=s.y+d[a+1],s.x+=d[a+2],s.y+=d[a+3],a===0&&m===!0&&w.copy(s);break;case"t":d=b(c);for(let a=0,j=d.length;a<j;a+=2){const q=E(s.x,i.x),de=E(s.y,i.y);f.quadraticCurveTo(q,de,s.x+d[a+0],s.y+d[a+1]),i.x=q,i.y=de,s.x=s.x+d[a+0],s.y=s.y+d[a+1],a===0&&m===!0&&w.copy(s)}break;case"a":d=b(c,[3,4],7);for(let a=0,j=d.length;a<j;a+=7){if(d[a+5]==0&&d[a+6]==0)continue;const q=s.clone();s.x+=d[a+5],s.y+=d[a+6],i.x=s.x,i.y=s.y,l(f,d[a],d[a+1],d[a+2],d[a+3],d[a+4],q,s),a===0&&m===!0&&w.copy(s)}break;case"Z":case"z":f.currentPath.autoClose=!0,f.currentPath.curves.length>0&&(s.copy(w),f.currentPath.currentPoint.copy(s),L=!0);break;default:console.warn(A)}m=!1}return f}function o(g){if(!(!g.sheet||!g.sheet.cssRules||!g.sheet.cssRules.length))for(let f=0;f<g.sheet.cssRules.length;f++){const s=g.sheet.cssRules[f];if(s.type!==1)continue;const i=s.selectorText.split(/,/gm).filter(Boolean).map(w=>w.trim());for(let w=0;w<i.length;w++){const L=Object.fromEntries(Object.entries(s.style).filter(([,m])=>m!==""));ee[i[w]]=Object.assign(ee[i[w]]||{},L)}}}function l(g,f,s,i,w,L,m,O){if(f==0||s==0){g.lineTo(O.x,O.y);return}i=i*Math.PI/180,f=Math.abs(f),s=Math.abs(s);const N=(m.x-O.x)/2,T=(m.y-O.y)/2,x=Math.cos(i)*N+Math.sin(i)*T,A=-Math.sin(i)*N+Math.cos(i)*T;let B=f*f,c=s*s;const d=x*x,a=A*A,j=d/B+a/c;if(j>1){const Xe=Math.sqrt(j);f=Xe*f,s=Xe*s,B=f*f,c=s*s}const q=B*a+c*d,de=(B*c-q)/q;let Te=Math.sqrt(Math.max(0,de));w===L&&(Te=-Te);const xe=Te*f*A/s,ie=-Te*s*x/f,ze=Math.cos(i)*xe-Math.sin(i)*ie+(m.x+O.x)/2,Se=Math.sin(i)*xe+Math.cos(i)*ie+(m.y+O.y)/2,we=u(1,0,(x-xe)/f,(A-ie)/s),ke=u((x-xe)/f,(A-ie)/s,(-x-xe)/f,(-A-ie)/s)%(Math.PI*2);g.currentPath.absellipse(ze,Se,f,s,we,we+ke,L===0,i)}function u(g,f,s,i){const w=g*s+f*i,L=Math.sqrt(g*g+f*f)*Math.sqrt(s*s+i*i);let m=Math.acos(Math.max(-1,Math.min(1,w/L)));return g*i-f*s<0&&(m=-m),m}function v(g){const f=H(g.getAttribute("x")||0),s=H(g.getAttribute("y")||0),i=H(g.getAttribute("rx")||g.getAttribute("ry")||0),w=H(g.getAttribute("ry")||g.getAttribute("rx")||0),L=H(g.getAttribute("width")),m=H(g.getAttribute("height")),O=1-.551915024494,N=new Wt;return N.moveTo(f+i,s),N.lineTo(f+L-i,s),(i!==0||w!==0)&&N.bezierCurveTo(f+L-i*O,s,f+L,s+w*O,f+L,s+w),N.lineTo(f+L,s+m-w),(i!==0||w!==0)&&N.bezierCurveTo(f+L,s+m-w*O,f+L-i*O,s+m,f+L-i,s+m),N.lineTo(f+i,s+m),(i!==0||w!==0)&&N.bezierCurveTo(f+i*O,s+m,f,s+m-w*O,f,s+m-w),N.lineTo(f,s+w),(i!==0||w!==0)&&N.bezierCurveTo(f,s+w*O,f+i*O,s,f+i,s),N}function F(g){function f(L,m,O){const N=H(m),T=H(O);w===0?i.moveTo(N,T):i.lineTo(N,T),w++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new Wt;let w=0;return g.getAttribute("points").replace(s,f),i.currentPath.autoClose=!0,i}function I(g){function f(L,m,O){const N=H(m),T=H(O);w===0?i.moveTo(N,T):i.lineTo(N,T),w++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new Wt;let w=0;return g.getAttribute("points").replace(s,f),i.currentPath.autoClose=!1,i}function S(g){const f=H(g.getAttribute("cx")||0),s=H(g.getAttribute("cy")||0),i=H(g.getAttribute("r")||0),w=new In;w.absarc(f,s,i,0,Math.PI*2);const L=new Wt;return L.subPaths.push(w),L}function _(g){const f=H(g.getAttribute("cx")||0),s=H(g.getAttribute("cy")||0),i=H(g.getAttribute("rx")||0),w=H(g.getAttribute("ry")||0),L=new In;L.absellipse(f,s,i,w,0,Math.PI*2);const m=new Wt;return m.subPaths.push(L),m}function y(g){const f=H(g.getAttribute("x1")||0),s=H(g.getAttribute("y1")||0),i=H(g.getAttribute("x2")||0),w=H(g.getAttribute("y2")||0),L=new Wt;return L.moveTo(f,s),L.lineTo(i,w),L.currentPath.autoClose=!1,L}function R(g,f){f=Object.assign({},f);let s={};if(g.hasAttribute("class")){const m=g.getAttribute("class").split(/\s/).filter(Boolean).map(O=>O.trim());for(let O=0;O<m.length;O++)s=Object.assign(s,ee["."+m[O]])}g.hasAttribute("id")&&(s=Object.assign(s,ee["#"+g.getAttribute("id")]));function i(m,O,N){N===void 0&&(N=function(x){return x.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),x}),g.hasAttribute(m)&&(f[O]=N(g.getAttribute(m))),s[m]&&(f[O]=N(s[m])),g.style&&g.style[m]!==""&&(f[O]=N(g.style[m]))}function w(m){return Math.max(0,Math.min(1,H(m)))}function L(m){return Math.max(0,H(m))}return i("fill","fill"),i("fill-opacity","fillOpacity",w),i("fill-rule","fillRule"),i("opacity","opacity",w),i("stroke","stroke"),i("stroke-opacity","strokeOpacity",w),i("stroke-width","strokeWidth",L),i("stroke-linejoin","strokeLineJoin"),i("stroke-linecap","strokeLineCap"),i("stroke-miterlimit","strokeMiterLimit",L),i("visibility","visibility"),f}function E(g,f){return g-(f-g)}function b(g,f,s){if(typeof g!="string")throw new TypeError("Invalid input: "+typeof g);const i={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},w=0,L=1,m=2,O=3;let N=w,T=!0,x="",A="";const B=[];function c(q,de,Te){const xe=new SyntaxError('Unexpected character "'+q+'" at index '+de+".");throw xe.partial=Te,xe}function d(){x!==""&&(A===""?B.push(Number(x)):B.push(Number(x)*Math.pow(10,Number(A)))),x="",A=""}let a;const j=g.length;for(let q=0;q<j;q++){if(a=g[q],Array.isArray(f)&&f.includes(B.length%s)&&i.FLAGS.test(a)){N=L,x=a,d();continue}if(N===w){if(i.WHITESPACE.test(a))continue;if(i.DIGIT.test(a)||i.SIGN.test(a)){N=L,x=a;continue}if(i.POINT.test(a)){N=m,x=a;continue}i.COMMA.test(a)&&(T&&c(a,q,B),T=!0)}if(N===L){if(i.DIGIT.test(a)){x+=a;continue}if(i.POINT.test(a)){x+=a,N=m;continue}if(i.EXP.test(a)){N=O;continue}i.SIGN.test(a)&&x.length===1&&i.SIGN.test(x[0])&&c(a,q,B)}if(N===m){if(i.DIGIT.test(a)){x+=a;continue}if(i.EXP.test(a)){N=O;continue}i.POINT.test(a)&&x[x.length-1]==="."&&c(a,q,B)}if(N===O){if(i.DIGIT.test(a)){A+=a;continue}if(i.SIGN.test(a)){if(A===""){A+=a;continue}A.length===1&&i.SIGN.test(A)&&c(a,q,B)}}i.WHITESPACE.test(a)?(d(),N=w,T=!1):i.COMMA.test(a)?(d(),N=w,T=!0):i.SIGN.test(a)?(d(),N=L,x=a):i.POINT.test(a)?(d(),N=m,x=a):c(a,q,B)}return d(),B}const U=["mm","cm","in","pt","pc","px"],$={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function H(g){let f="px";if(typeof g=="string"||g instanceof String)for(let i=0,w=U.length;i<w;i++){const L=U[i];if(g.endsWith(L)){f=L,g=g.substring(0,g.length-L.length);break}}let s;return f==="px"&&n.defaultUnit!=="px"?s=$.in[n.defaultUnit]/n.defaultDPI:(s=$[f][n.defaultUnit],s<0&&(s=$[f].in*n.defaultDPI)),s*parseFloat(g)}function C(g){if(!(g.hasAttribute("transform")||g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))))return null;const f=Y(g);return J.length>0&&f.premultiply(J[J.length-1]),oe.copy(f),J.push(f),f}function Y(g){const f=new pr,s=Q;if(g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))){const i=H(g.getAttribute("x")),w=H(g.getAttribute("y"));f.translate(i,w)}if(g.hasAttribute("transform")){const i=g.getAttribute("transform").split(")");for(let w=i.length-1;w>=0;w--){const L=i[w].trim();if(L==="")continue;const m=L.indexOf("("),O=L.length;if(m>0&&m<O){const N=L.slice(0,m),T=b(L.slice(m+1));switch(s.identity(),N){case"translate":if(T.length>=1){const x=T[0];let A=0;T.length>=2&&(A=T[1]),s.translate(x,A)}break;case"rotate":if(T.length>=1){let x=0,A=0,B=0;x=T[0]*Math.PI/180,T.length>=3&&(A=T[1],B=T[2]),V.makeTranslation(-A,-B),D.makeRotation(x),M.multiplyMatrices(D,V),V.makeTranslation(A,B),s.multiplyMatrices(V,M)}break;case"scale":if(T.length>=1){const x=T[0];let A=x;T.length>=2&&(A=T[1]),s.scale(x,A)}break;case"skewX":T.length===1&&s.set(1,Math.tan(T[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":T.length===1&&s.set(1,0,0,Math.tan(T[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":T.length===6&&s.set(T[0],T[2],T[4],T[1],T[3],T[5],0,0,1);break}}f.premultiply(s)}}return f}function W(g,f){function s(m){h.set(m.x,m.y,1).applyMatrix3(f),m.set(h.x,h.y)}function i(m){const O=m.xRadius,N=m.yRadius,T=Math.cos(m.aRotation),x=Math.sin(m.aRotation),A=new et(O*T,O*x,0),B=new et(-N*x,N*T,0),c=A.applyMatrix3(f),d=B.applyMatrix3(f),a=Q.set(c.x,d.x,0,c.y,d.y,0,0,0,1),j=V.copy(a).invert(),Te=D.copy(j).transpose().multiply(j).elements,xe=te(Te[0],Te[1],Te[4]),ie=Math.sqrt(xe.rt1),ze=Math.sqrt(xe.rt2);if(m.xRadius=1/ie,m.yRadius=1/ze,m.aRotation=Math.atan2(xe.sn,xe.cs),!((m.aEndAngle-m.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const we=V.set(ie,0,0,0,ze,0,0,0,1),ke=D.set(xe.cs,xe.sn,0,-xe.sn,xe.cs,0,0,0,1),Xe=we.multiply(ke).multiply(a),wt=Pe=>{const{x:Nt,y:Me}=new et(Math.cos(Pe),Math.sin(Pe),0).applyMatrix3(Xe);return Math.atan2(Me,Nt)};m.aStartAngle=wt(m.aStartAngle),m.aEndAngle=wt(m.aEndAngle),z(f)&&(m.aClockwise=!m.aClockwise)}}function w(m){const O=X(f),N=k(f);m.xRadius*=O,m.yRadius*=N;const T=O>Number.EPSILON?Math.atan2(f.elements[1],f.elements[0]):Math.atan2(-f.elements[3],f.elements[4]);m.aRotation+=T,z(f)&&(m.aStartAngle*=-1,m.aEndAngle*=-1,m.aClockwise=!m.aClockwise)}const L=g.subPaths;for(let m=0,O=L.length;m<O;m++){const T=L[m].curves;for(let x=0;x<T.length;x++){const A=T[x];A.isLineCurve?(s(A.v1),s(A.v2)):A.isCubicBezierCurve?(s(A.v0),s(A.v1),s(A.v2),s(A.v3)):A.isQuadraticBezierCurve?(s(A.v0),s(A.v1),s(A.v2)):A.isEllipseCurve&&(re.set(A.aX,A.aY),s(re),A.aX=re.x,A.aY=re.y,G(f)?i(A):w(A))}}}function z(g){const f=g.elements;return f[0]*f[4]-f[1]*f[3]<0}function G(g){const f=g.elements,s=f[0]*f[3]+f[1]*f[4];if(s===0)return!1;const i=X(g),w=k(g);return Math.abs(s/(i*w))>Number.EPSILON}function X(g){const f=g.elements;return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function k(g){const f=g.elements;return Math.sqrt(f[3]*f[3]+f[4]*f[4])}function te(g,f,s){let i,w,L,m,O;const N=g+s,T=g-s,x=Math.sqrt(T*T+4*f*f);return N>0?(i=.5*(N+x),O=1/i,w=g*O*s-f*O*f):N<0?w=.5*(N-x):(i=.5*x,w=-.5*x),T>0?L=T+x:L=T-x,Math.abs(L)>2*Math.abs(f)?(O=-2*f/L,m=1/Math.sqrt(1+O*O),L=O*m):Math.abs(f)===0?(L=1,m=0):(O=-.5*L/f,L=1/Math.sqrt(1+O*O),m=O*L),T>0&&(O=L,L=-m,m=O),{rt1:i,rt2:w,cs:L,sn:m}}const P=[],ee={},J=[],Q=new pr,V=new pr,D=new pr,M=new pr,re=new pe,h=new et,oe=new pr,Ie=new DOMParser().parseFromString(e,"image/svg+xml");return t(Ie.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:P,xml:Ie.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:t.ORIGIN,t:0};function o(E,b,U,$){const H=E.x,C=b.x,Y=U.x,W=$.x,z=E.y,G=b.y,X=U.y,k=$.y,te=(W-Y)*(z-X)-(k-X)*(H-Y),P=(C-H)*(z-X)-(G-z)*(H-Y),ee=(k-X)*(C-H)-(W-Y)*(G-z),J=te/ee,Q=P/ee;if(ee===0&&te!==0||J<=0||J>=1||Q<0||Q>1)return null;if(te===0&&ee===0){for(let V=0;V<2;V++)if(l(V===0?U:$,E,b),r.loc==t.ORIGIN){const D=V===0?U:$;return{x:D.x,y:D.y,t:r.t}}else if(r.loc==t.BETWEEN){const D=+(H+r.t*(C-H)).toPrecision(10),M=+(z+r.t*(G-z)).toPrecision(10);return{x:D,y:M,t:r.t}}return null}else{for(let M=0;M<2;M++)if(l(M===0?U:$,E,b),r.loc==t.ORIGIN){const re=M===0?U:$;return{x:re.x,y:re.y,t:r.t}}const V=+(H+J*(C-H)).toPrecision(10),D=+(z+J*(G-z)).toPrecision(10);return{x:V,y:D,t:J}}}function l(E,b,U){const $=U.x-b.x,H=U.y-b.y,C=E.x-b.x,Y=E.y-b.y,W=$*Y-C*H;if(E.x===b.x&&E.y===b.y){r.loc=t.ORIGIN,r.t=0;return}if(E.x===U.x&&E.y===U.y){r.loc=t.DESTINATION,r.t=1;return}if(W<-Number.EPSILON){r.loc=t.LEFT;return}if(W>Number.EPSILON){r.loc=t.RIGHT;return}if($*C<0||H*Y<0){r.loc=t.BEHIND;return}if(Math.sqrt($*$+H*H)<Math.sqrt(C*C+Y*Y)){r.loc=t.BEYOND;return}let z;$!==0?z=C/$:z=Y/H,r.loc=t.BETWEEN,r.t=z}function u(E,b){const U=[],$=[];for(let H=1;H<E.length;H++){const C=E[H-1],Y=E[H];for(let W=1;W<b.length;W++){const z=b[W-1],G=b[W],X=o(C,Y,z,G);X!==null&&U.find(k=>k.t<=X.t+Number.EPSILON&&k.t>=X.t-Number.EPSILON)===void 0&&(U.push(X),$.push(new pe(X.x,X.y)))}}return $}function v(E,b,U){const $=new pe;b.getCenter($);const H=[];return U.forEach(C=>{C.boundingBox.containsPoint($)&&u(E,C.points).forEach(W=>{H.push({identifier:C.identifier,isCW:C.isCW,point:W})})}),H.sort((C,Y)=>C.point.x-Y.point.x),H}function F(E,b,U,$,H){(H==null||H==="")&&(H="nonzero");const C=new pe;E.boundingBox.getCenter(C);const Y=[new pe(U,C.y),new pe($,C.y)],W=v(Y,E.boundingBox,b);W.sort((P,ee)=>P.point.x-ee.point.x);const z=[],G=[];W.forEach(P=>{P.identifier===E.identifier?z.push(P):G.push(P)});const X=z[0].point.x,k=[];let te=0;for(;te<G.length&&G[te].point.x<X;)k.length>0&&k[k.length-1]===G[te].identifier?k.pop():k.push(G[te].identifier),te++;if(k.push(E.identifier),H==="evenodd"){const P=k.length%2===0,ee=k[k.length-2];return{identifier:E.identifier,isHole:P,for:ee}}else if(H==="nonzero"){let P=!0,ee=null,J=null;for(let Q=0;Q<k.length;Q++){const V=k[Q];P?(J=b[V].isCW,P=!1,ee=V):J!==b[V].isCW&&(J=b[V].isCW,P=!0)}return{identifier:E.identifier,isHole:P,for:ee}}else console.warn('fill-rule: "'+H+'" is currently not implemented.')}let I=999999999,S=-999999999,_=e.subPaths.map(E=>{const b=E.getPoints();let U=-999999999,$=999999999,H=-999999999,C=999999999;for(let Y=0;Y<b.length;Y++){const W=b[Y];W.y>U&&(U=W.y),W.y<$&&($=W.y),W.x>H&&(H=W.x),W.x<C&&(C=W.x)}return S<=H&&(S=H+1),I>=C&&(I=C-1),{curves:E.curves,points:b,isCW:ki.isClockWise(b),identifier:-1,boundingBox:new Ai(new pe(C,$),new pe(H,U))}});_=_.filter(E=>E.points.length>1);for(let E=0;E<_.length;E++)_[E].identifier=E;const y=_.map(E=>F(E,_,I,S,e.userData?e.userData.style.fillRule:void 0)),R=[];return _.forEach(E=>{if(!y[E.identifier].isHole){const U=new Ri;U.curves=E.curves,y.filter(H=>H.isHole&&H.for===E.identifier).forEach(H=>{const C=_[H.identifier],Y=new In;Y.curves=C.curves,U.holes.push(Y)}),R.push(U)}}),R}static getStrokeStyle(e,n,t,r,o){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",r=r!==void 0?r:"butt",o=o!==void 0?o:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:r,strokeMiterLimit:o}}static pointsToStroke(e,n,t,r){const o=[],l=[],u=[];if(An.pointsToStrokeWithBuffers(e,n,t,r,o,l,u)===0)return null;const v=new ro;return v.setAttribute("position",new zr(o,3)),v.setAttribute("normal",new zr(l,3)),v.setAttribute("uv",new zr(u,2)),v}static pointsToStrokeWithBuffers(e,n,t,r,o,l,u,v){const F=new pe,I=new pe,S=new pe,_=new pe,y=new pe,R=new pe,E=new pe,b=new pe,U=new pe,$=new pe,H=new pe,C=new pe,Y=new pe,W=new pe,z=new pe,G=new pe,X=new pe;t=t!==void 0?t:12,r=r!==void 0?r:.001,v=v!==void 0?v:0,e=T(e);const k=e.length;if(k<2)return 0;const te=e[0].equals(e[k-1]);let P,ee=e[0],J;const Q=n.strokeWidth/2,V=1/(k-1);let D=0,M,re,h,oe,Ie=!1,ft=0,g=v*3,f=v*2;s(e[0],e[1],F).multiplyScalar(Q),b.copy(e[0]).sub(F),U.copy(e[0]).add(F),$.copy(b),H.copy(U);for(let x=1;x<k;x++){P=e[x],x===k-1?te?J=e[1]:J=void 0:J=e[x+1];const A=F;if(s(ee,P,A),S.copy(A).multiplyScalar(Q),C.copy(P).sub(S),Y.copy(P).add(S),M=D+V,re=!1,J!==void 0){s(P,J,I),S.copy(I).multiplyScalar(Q),W.copy(P).sub(S),z.copy(P).add(S),h=!0,S.subVectors(J,ee),A.dot(S)<0&&(h=!1),x===1&&(Ie=h),S.subVectors(J,P),S.normalize();const B=Math.abs(A.dot(S));if(B>Number.EPSILON){const c=Q/B;S.multiplyScalar(-c),_.subVectors(P,ee),y.copy(_).setLength(c).add(S),G.copy(y).negate();const d=y.length(),a=_.length();_.divideScalar(a),R.subVectors(J,P);const j=R.length();switch(R.divideScalar(j),_.dot(G)<a&&R.dot(G)<j&&(re=!0),X.copy(y).add(P),G.add(P),oe=!1,re?h?(z.copy(G),Y.copy(G)):(W.copy(G),C.copy(G)):L(),n.strokeLineJoin){case"bevel":m(h,re,M);break;case"round":O(h,re),h?w(P,C,W,M,0):w(P,z,Y,M,1);break;case"miter":case"miter-clip":default:const q=Q*n.strokeMiterLimit/d;if(q<1)if(n.strokeLineJoin!=="miter-clip"){m(h,re,M);break}else O(h,re),h?(R.subVectors(X,C).multiplyScalar(q).add(C),E.subVectors(X,W).multiplyScalar(q).add(W),i(C,M,0),i(R,M,0),i(P,M,.5),i(P,M,.5),i(R,M,0),i(E,M,0),i(P,M,.5),i(E,M,0),i(W,M,0)):(R.subVectors(X,Y).multiplyScalar(q).add(Y),E.subVectors(X,z).multiplyScalar(q).add(z),i(Y,M,1),i(R,M,1),i(P,M,.5),i(P,M,.5),i(R,M,1),i(E,M,1),i(P,M,.5),i(E,M,1),i(z,M,1));else re?(h?(i(U,D,1),i(b,D,0),i(X,M,0),i(U,D,1),i(X,M,0),i(G,M,1)):(i(U,D,1),i(b,D,0),i(X,M,1),i(b,D,0),i(G,M,0),i(X,M,1)),h?W.copy(X):z.copy(X)):h?(i(C,M,0),i(X,M,0),i(P,M,.5),i(P,M,.5),i(X,M,0),i(W,M,0)):(i(Y,M,1),i(X,M,1),i(P,M,.5),i(P,M,.5),i(X,M,1),i(z,M,1)),oe=!0;break}}else L()}else L();!te&&x===k-1&&N(e[0],$,H,h,!0,D),D=M,ee=P,b.copy(W),U.copy(z)}if(!te)N(P,C,Y,h,!1,M);else if(re&&o){let x=X,A=G;Ie!==h&&(x=G,A=X),h?(oe||Ie)&&(A.toArray(o,0*3),A.toArray(o,3*3),oe&&x.toArray(o,1*3)):(oe||!Ie)&&(A.toArray(o,1*3),A.toArray(o,3*3),oe&&x.toArray(o,0*3))}return ft;function s(x,A,B){return B.subVectors(A,x),B.set(-B.y,B.x).normalize()}function i(x,A,B){o&&(o[g]=x.x,o[g+1]=x.y,o[g+2]=0,l&&(l[g]=0,l[g+1]=0,l[g+2]=1),g+=3,u&&(u[f]=A,u[f+1]=B,f+=2)),ft+=3}function w(x,A,B,c,d){F.copy(A).sub(x).normalize(),I.copy(B).sub(x).normalize();let a=Math.PI;const j=F.dot(I);Math.abs(j)<1&&(a=Math.abs(Math.acos(j))),a/=t,S.copy(A);for(let q=0,de=t-1;q<de;q++)_.copy(S).rotateAround(x,a),i(S,c,d),i(_,c,d),i(x,c,.5),S.copy(_);i(_,c,d),i(B,c,d),i(x,c,.5)}function L(){i(U,D,1),i(b,D,0),i(C,M,0),i(U,D,1),i(C,M,0),i(Y,M,1)}function m(x,A,B){A?x?(i(U,D,1),i(b,D,0),i(C,M,0),i(U,D,1),i(C,M,0),i(G,M,1),i(C,B,0),i(W,B,0),i(G,B,.5)):(i(U,D,1),i(b,D,0),i(Y,M,1),i(b,D,0),i(G,M,0),i(Y,M,1),i(Y,B,1),i(G,B,0),i(z,B,1)):x?(i(C,B,0),i(W,B,0),i(P,B,.5)):(i(Y,B,1),i(z,B,0),i(P,B,.5))}function O(x,A){A&&(x?(i(U,D,1),i(b,D,0),i(C,M,0),i(U,D,1),i(C,M,0),i(G,M,1),i(C,D,0),i(P,M,.5),i(G,M,1),i(P,M,.5),i(W,D,0),i(G,M,1)):(i(U,D,1),i(b,D,0),i(Y,M,1),i(b,D,0),i(G,M,0),i(Y,M,1),i(Y,D,1),i(G,M,0),i(P,M,.5),i(P,M,.5),i(G,M,0),i(z,D,1)))}function N(x,A,B,c,d,a){switch(n.strokeLineCap){case"round":d?w(x,B,A,a,.5):w(x,A,B,a,.5);break;case"square":if(d)F.subVectors(A,x),I.set(F.y,-F.x),S.addVectors(F,I).add(x),_.subVectors(I,F).add(x),c?(S.toArray(o,1*3),_.toArray(o,0*3),_.toArray(o,3*3)):(S.toArray(o,1*3),u[3*2+1]===1?_.toArray(o,3*3):S.toArray(o,3*3),_.toArray(o,0*3));else{F.subVectors(B,x),I.set(F.y,-F.x),S.addVectors(F,I).add(x),_.subVectors(I,F).add(x);const j=o.length;c?(S.toArray(o,j-1*3),_.toArray(o,j-2*3),_.toArray(o,j-4*3)):(_.toArray(o,j-2*3),S.toArray(o,j-1*3),_.toArray(o,j-4*3))}break}}function T(x){let A=!1;for(let c=1,d=x.length-1;c<d;c++)if(x[c].distanceTo(x[c+1])<r){A=!0;break}if(!A)return x;const B=[];B.push(x[0]);for(let c=1,d=x.length-1;c<d;c++)x[c].distanceTo(x[c+1])>=r&&B.push(x[c]);return B.push(x[x.length-1]),B}}}function ws(p,e,n,t){const{CUBE_SIZE:r,FIRST_CUBE_Z:o}=t,l=8,u=24,v=.075,F=200;let I,S=[],_=[],y=[],R=[];const E=(C,Y,W,z)=>{const G=new Bo(C,C,C),X=new mn(G),k=[new Rt({color:16711680,transparent:!0,opacity:z.opacity,blending:er}),new Rt({color:65280,transparent:!0,opacity:z.opacity,blending:er}),new Rt({color:255,transparent:!0,opacity:z.opacity,blending:er}),new Rt({color:65535,transparent:!0,opacity:z.opacity,blending:er}),new Rt({color:16711935,transparent:!0,opacity:z.opacity,blending:er}),new Rt({color:16776960,transparent:!0,opacity:z.opacity,blending:er})],te=new Bt,P=X.getAttribute("position").array,ee=[];for(let V=0;V<P.length/3;V+=2)ee.push(V,V+1);const J=Array(6).fill(null).map(()=>new ro),Q=Array(6).fill(null).map(()=>[]);for(let V=0;V<ee.length/2;V++){const D=V%6;Q[D].push(ee[V*2],ee[V*2+1])}return J.forEach((V,D)=>{V.setIndex(Q[D]),V.setAttribute("position",X.getAttribute("position"));const M=new jt(V,k[D]);te.add(M)}),te.position.z=Y,te.rotation.z=W,te};return(()=>{const W=.9/(u-1);for(let ee=0;ee<u;ee++)_[ee]=new Rt({transparent:!0,opacity:1-ee*W});if(I=new Bt,!I){console.error("introGroup failed to initialize");return}for(let ee=0;ee<u;ee++){const J=r-ee*l,Q=E(J,0,0,_[ee]),V=Q.children.map(D=>D.material);R.push(V.map(D=>({material:D,originalColor:D.color.clone()}))),I.add(Q)}I.position.z=o,e.add(I),S.push(I),y=_.map(ee=>ee.opacity);const z=Le.timeline({repeat:-1});z.to(I.rotation,{x:Ke.degToRad(360),duration:12,ease:"none"},0),z.to(I.rotation,{y:Ke.degToRad(360),duration:10,ease:"none"},0),z.to(I.rotation,{z:Ke.degToRad(360),duration:14,ease:"none"},0);let G=-1,X=0;const k=v*1e3,te=u*k,P=ee=>{const J=ee%te/k,Q=Math.floor(J)%u;G!==-1&&ee-X>=k&&(R[G].forEach(M=>{M.material.opacity=y[G],M.material.color.copy(M.originalColor)}),G=-1),G===-1&&Q!==G&&(G=Q,X=ee,R[G].forEach(D=>{D.material.opacity=1,D.material.color.set(1,1,1)})),requestAnimationFrame(P)};requestAnimationFrame(P)})(),n.then(C=>{if(C){const Y=U(C);p.add(Y)}}),{introCubes:S};function U(C){const Y=new Bt,W=$(C);W.position.set(0,-36,0),Y.add(W),H(G=>{Y.add(G),Le.fromTo(W.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const X=G.children.find(k=>k instanceof ht&&k!==G.children[0]);if(X){const k=X.position.y;Le.to(X.position,{y:k+3,duration:1,ease:"easeOut",onComplete:()=>{X.position.y=k},repeat:-1})}}),Y.position.x=0,Y.position.y=-240;const z=o-u*l;return Y.position.z=z+F,Y}function $(C){const Y=new bs("SCROLL TO CONTINUE",{font:C,size:8,depth:0,curveSegments:12,bevelEnabled:!1});Y.computeBoundingBox(),Y.center();const W=new qr({color:16777215,transparent:!0,opacity:1});return new ht(Y,W)}function H(C){new An().load("/3D/mouse.svg",W=>{const z=W.paths;let G=null,X=null,k=new Bt;if(z.forEach((te,P)=>{An.createShapes(te).forEach(J=>{const Q=new Di(J);Q.computeBoundingBox();const V=new qr({color:16777215,transparent:!0,opacity:1,side:Wn}),D=new ht(Q,V);D.scale.set(.05,.05,1),P===0?G=D:P===1&&(X=D)})}),G&&X){k.add(G),k.add(X);const P=(G.geometry.boundingBox.max.x-G.geometry.boundingBox.min.x)*G.scale.x/2;k.position.x=-P,k.rotation.x=Math.PI,C(k)}})}}class vs extends Lo{constructor(e){super(e)}load(e,n,t,r){const o=this,l=new zo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){const v=o.parse(JSON.parse(u));n&&n(v)},t,r)}parse(e){return new Ts(e)}}class Ts{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],r=Ss(e,n,this.data);for(let o=0,l=r.length;o<l;o++)t.push(...r[o].toShapes());return t}}function Ss(p,e,n){const t=Array.from(p),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,l=[];let u=0,v=0;for(let F=0;F<t.length;F++){const I=t[F];if(I===`
`)u=0,v-=o;else{const S=Cs(I,r,u,v,n);u+=S.offsetX,l.push(S.path)}}return l}function Cs(p,e,n,t,r){const o=r.glyphs[p]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+p+'" does not exists in font family '+r.familyName+".");return}const l=new Wt;let u,v,F,I,S,_,y,R;if(o.o){const E=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let b=0,U=E.length;b<U;)switch(E[b++]){case"m":u=E[b++]*e+n,v=E[b++]*e+t,l.moveTo(u,v);break;case"l":u=E[b++]*e+n,v=E[b++]*e+t,l.lineTo(u,v);break;case"q":F=E[b++]*e+n,I=E[b++]*e+t,S=E[b++]*e+n,_=E[b++]*e+t,l.quadraticCurveTo(S,_,F,I);break;case"b":F=E[b++]*e+n,I=E[b++]*e+t,S=E[b++]*e+n,_=E[b++]*e+t,y=E[b++]*e+n,R=E[b++]*e+t,l.bezierCurveTo(S,_,y,R,F,I);break}}return{offsetX:o.ha*e,path:l}}function Oo(p,e,n,t,r,o){const{CUBE_SIZE:l,CUBE_SPACING:u,FIRST_CUBE_Z:v}=e,F=v-(n.length+1)*u,I=65535,S=16711935,_=16711680,y=Ke.degToRad(15),R=1e3,E=.5,b=80,U=1,$=15,H=.1;let C=[],Y=null,W=null,z=!1,G=!1,X=new Oi,k=new pe,te=null,P=null,ee=null,J=!1,Q=null;const V=Ho(),D=(g,f,s,i,w,L)=>{const m=new Bt;m.position.z=s,m.rotation.z=i,m.userData.isActive=!1;const O=new Bo(f,f,f),N=new mn(O),T=new Rt({color:new Ht(I),transparent:!0,opacity:0}),x=new jt(N,T);x.geometry.computeBoundingSphere(),m.add(x);let A="right";const B=f/2;(()=>{const de=new po(40,24),Te=new mn(de),xe=new Rt({color:new Ht(I),transparent:!0,opacity:0,visible:!0}),ie=new jt(Te,xe);ie.userData.isPortal=!0,ie.userData.isAnimating=!1,ie.geometry.computeBoundingSphere();const ze=new ho(120,120),Se=new qr({visible:!1,side:Wn}),we=new ht(ze,Se);we.userData.isPortalHitbox=!0,we.userData.portal=ie,we.geometry.computeBoundingSphere();const ke=new Bt,Xe=new ho(U,$),wt=65/2;for(let Me=0;Me<b;Me++){const Mt=new qr({color:new Ht(S),transparent:!0,opacity:0,visible:!1,side:Wn}),rt=new ht(Xe,Mt),ct=Me/b*Math.PI*2;rt.position.set(Math.cos(ct)*wt,Math.sin(ct)*wt,0),rt.rotation.z=ct+Math.PI/2,rt.userData.baseOpacity=.01,rt.userData.index=Me,rt.geometry.computeBoundingSphere(),ke.add(rt)}const Pe=2,Nt=25;for(let Me=1;Me<Nt;Me++){const Mt=new po(40,24),rt=new mn(Mt),ct=Ke.lerp(1,.1,Me/(Nt-1)),Lt=new Rt({color:new Ht(I),transparent:!0,opacity:0}),ae=new jt(rt,Lt);ae.userData.isPortal=!0,ae.userData.maxOpacity=ct,ae.position.z=-Me*Pe,ae.geometry.computeBoundingSphere(),ie.add(ae)}switch(ie.userData.maxOpacity=1,A){case"left":case"right":ke.children.forEach(Me=>Me.position.x+=H);break;case"top":case"bottom":ke.children.forEach(Me=>Me.position.y+=H);break}switch(ie.add(ke),m.add(ie),m.add(we),ie.updateMatrixWorld(!0),ke.updateMatrixWorld(!0),A){case"left":ie.position.set(-B,0,0),ie.rotation.y=Math.PI/2,we.position.set(-B,0,0),we.rotation.y=Math.PI/2;break;case"top":ie.position.set(0,B,0),ie.rotation.x=-Math.PI/2,we.position.set(0,B,0),we.rotation.x=Math.PI/2;break;case"right":ie.position.set(B,0,0),ie.rotation.y=-Math.PI/2,we.position.set(B,0,0),we.rotation.y=-Math.PI/2;break;case"bottom":ie.position.set(0,-B,0),ie.rotation.x=Math.PI/2,we.position.set(0,-B,0),we.rotation.x=Math.PI/2;break}})(),m.children.forEach(j=>{(j instanceof jt||j instanceof ht)&&j.geometry&&!j.geometry.boundingSphere&&j.geometry.computeBoundingSphere()}),m.updateMatrixWorld(!0);const d=new Li().setFromObject(m),a=new zi;return d.getBoundingSphere(a),m.boundingSphere=a,m},M=()=>new Promise(g=>{Y=new vs,Y.load("/fonts/Poppins_Regular.json",f=>{W=f;const s=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n),s.forEach((i,w)=>{const L=v-(w+1)*u,m=(w+1)*y,O=D(i,l,L,m,i.keyart,i.keyartLocation);p.add(O),C.push(O)}),g()},void 0,f=>console.error("Error loading font:",f))}),re=()=>z?Promise.resolve({projectCubes:C,updateCubeColors:Ie,loadedFont:W,maxZ:F}):M().then(()=>(z=!0,{projectCubes:C,updateCubeColors:Ie,loadedFont:W,maxZ:F})).catch(g=>{throw console.error("Error in loadFontAndText:",g),g}),h=g=>{if(!g.userData.isAnimating)return;g.userData.isAnimating=!1;const f=g.children.find(s=>s instanceof Bt);f&&(g.userData.animationTimeline&&(g.userData.animationTimeline.kill(),delete g.userData.animationTimeline),f.children.forEach(s=>{const i=s.material;i.opacity=0}))},oe=new Ni,Ie=g=>{oe.setFromProjectionMatrix(g.projectionMatrix.clone().multiply(g.matrixWorldInverse));const f=g.position.z;let s=[];p.traverse(i=>{i instanceof ht&&i.geometry&&i.geometry.type==="TextGeometry"&&s.push(i)}),G||(G=!0),C.forEach((i,w)=>{if(!i.geometry&&!i.children.length){console.warn(`Cube ${w} has no geometry or children`,i);return}try{if(!oe.intersectsObject(i))return}catch(N){console.error(`Error with cube ${w}`,i,N);return}const L=i.position.z,m=Math.abs(f-L);let O=0;m<=R&&(O=1-m/R),i.userData.isActive=O>=E,i.children.forEach(N=>{if(N instanceof jt&&!N.userData.isPortal&&!N.userData.isPortalHitbox){const T=N.material;if(m<=R){const x=Ke.lerp((I>>16&255)/255,(S>>16&255)/255,O),A=Ke.lerp((I>>8&255)/255,(S>>8&255)/255,O),B=Ke.lerp((I&255)/255,(S&255)/255,O);T.color.set(x,A,B),T.opacity=Math.min(1,O*2)}else T.opacity=0}else if(N instanceof jt&&N.userData.isPortal)G&&(O>.1?N.children.forEach(T=>{T instanceof Bt&&T.children.forEach(x=>{x instanceof ht&&(x.material.visible=!0,!N.userData.animationStarted&&o.showPortalPulses)})}):O<=.1&&N.userData.animationStarted&&(N.children.forEach(T=>{T instanceof Bt&&T.children.forEach(x=>{x instanceof ht&&(x.material.visible=!1)})}),h(N),delete N.userData.animationStarted));else if(N instanceof ht&&!N.userData.isPortalHitbox){const T=N.material;if(m<=R){const x=1-m/R;T.opacity=Math.min(.8,x*2)}else T.opacity=0}})}),s.forEach(i=>{const w=i.material,L=i.userData.backgroundPlane,m=L==null?void 0:L.material,O=i.position.z,N=Math.abs(f-O+120);if(N<=R){const T=1-N/R,x=Math.min(1,T*2);w.opacity=x,m&&(m.opacity=x*.8)}else w.opacity=0,m&&(m.opacity=0)})};return{getInitializedData:re,updateCubeColors:Ie,setupInteractivity:(g,f,s)=>{Q=s;let i=null,w=null;const L=(T,x=!0)=>{const A=[T,...T.children.filter(c=>c instanceof jt&&c.userData.isPortal)],B=x?25:2;A.forEach((c,d)=>{let a=-d*B;(T.position.y>0&&T.rotation.x===-Math.PI/2||T.position.y<0&&T.rotation.x===Math.PI/2)&&(a=d*B);const j=x?c.userData.maxOpacity:0;Le.to(c.position,{z:a,duration:1,ease:"power3.out",delay:.5}),Le.to(c.material,{opacity:j,duration:1,ease:"power3.out",delay:.5})})},m=T=>{k.x=T.clientX/window.innerWidth*2-1,k.y=-(T.clientY/window.innerHeight)*2+1,X.setFromCamera(k,g);const x=C.flatMap(B=>B.userData.isActive?B.children.filter(c=>c instanceof ht&&c.userData.isPortalHitbox):[]),A=X.intersectObjects(x);if(A.length>0){const c=A[0].object.userData.portal;if(te!==c){if(te){const a=te.material;Le.to(a.color,{r:(I>>16&255)/255,g:(I>>8&255)/255,b:(I&255)/255,duration:.5})}te=c;const d=te.material;Le.to(d.color,{r:(_>>16&255)/255,g:(_>>8&255)/255,b:(_&255)/255,duration:.5})}f.style.cursor="pointer"}else{if(te){const B=te.material;Le.to(B.color,{r:(I>>16&255)/255,g:(I>>8&255)/255,b:(I&255)/255,duration:.5}),te=null}f.style.cursor="auto"}},O=T=>{k.x=T.clientX/window.innerWidth*2-1,k.y=-(T.clientY/window.innerHeight)*2+1,X.setFromCamera(k,g);const x=C.flatMap(q=>q.userData.isActive?q.children.filter(de=>de instanceof ht&&de.userData.isPortalHitbox):[]),A=X.intersectObjects(x);if(A.length===0)return;const B=A[0].object,c=B.userData.portal,d=B.parent,a=C.indexOf(d),j=n[a];if(J&&c===w){c.getWorldPosition(new et);let q=new et;const de=e.CUBE_SIZE/2;c.position.x===de?q.set(-1,0,0):c.position.x===-de?q.set(1,0,0):c.position.y===de?q.set(0,-1,0):c.position.y===-de&&q.set(0,1,0),q.applyQuaternion(d.getWorldQuaternion(new Bi)).normalize();const xe=g.position.clone().clone().add(q.clone().multiplyScalar(-675)),ie=q.clone().multiplyScalar(-1e3),ze=xe.clone().add(ie);Le.to(g.position,{x:xe.x,y:xe.y,z:xe.z,duration:1,ease:"power2.in",onUpdate:()=>g.lookAt(ze),onComplete:()=>{j!=null&&j.slug&&(V.setScrollPosition(window.scrollY),di.visit(route("project.show",{project:j.slug}),{preserveScroll:!1}))}})}else if(!J){P||(P=g.position.clone(),ee=new et(0,0,F)),Q&&s(!0,P,ee);const q=c.getWorldPosition(new et);Le.to(g.position,{x:0,y:0,z:d.getWorldPosition(new et).z,duration:2,ease:"power3.out"}),Le.to({},{duration:2,ease:"power3.out",onUpdate:function(){const de=this.progress(),Te=g.getWorldDirection(new et).multiplyScalar(1e3).add(g.position),xe=Ke.lerp(Te.x,q.x,de),ie=Ke.lerp(Te.y,q.y,de),ze=Ke.lerp(Te.z,q.z,de);g.lookAt(xe,ie,ze)},onStart:()=>{J=!0,i=window.scrollY,document.body.classList.add("no-scrollbar"),w=c,L(c,!0)}})}},N=T=>{if(!J||!w||!P||!ee)return;let x=0;if(T instanceof WheelEvent?x=T.deltaY:x=window.scrollY-(i||0),T.preventDefault(),T.stopPropagation(),x>0){window.scrollTo(0,i);return}if(x<0){const A=w,B=ee.clone(),c=P.z;Le.to(g.position,{x:P.x,y:P.y,z:c,duration:1,ease:"power3.out"}),Le.to({},{duration:1,ease:"power3.out",onUpdate:function(){const d=this.progress(),a=g.getWorldDirection(new et).multiplyScalar(1e3).add(g.position),j=Ke.lerp(a.x,B.x,d),q=Ke.lerp(a.y,B.y,d),de=Ke.lerp(a.z,B.z,d);g.lookAt(j,q,de)},onComplete:()=>{g.lookAt(B),J=!1,w=null,document.body.classList.remove("no-scrollbar"),Q&&s(!1),L(A,!1),i=null,P=null,ee=null}})}};return f.addEventListener("mousemove",m),f.addEventListener("click",O),window.addEventListener("wheel",N,{passive:!1}),window.addEventListener("scroll",N,{passive:!1}),()=>{f.removeEventListener("mousemove",m),f.removeEventListener("click",O),window.removeEventListener("wheel",N),window.removeEventListener("scroll",N)}}}}Le.registerPlugin(fe);function Ps(p,e,n,t,r,o,l={},u,v){fe.config({syncTouch:!0});const{CUBE_SPACING:F,FIRST_CUBE_Z:I}=o,S=(t==null?void 0:t.length)||0,_=I-(S+1)*F;let y=!1;const R=Math.abs(_)+(S-1)*F,E=Le.timeline();return Le.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${R}`,scrub:l.scrub||.5,pin:!0,onUpdate:$=>{if(!y){const H=$.progress,C=Ke.lerp(0,_,H);e.position.set(0,0,C),e.lookAt(0,0,_)}r(e)}}}).fromTo(e.position,{z:0},{z:_,duration:1,ease:"none"}),{setReverting:U=>{y=U},timeline:E}}const Ms={class:"preloader"},Es={class:"progress-label"},As=eo({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>(Tn(),to("div",Ms,[nr("div",Es,gi(Math.round(e.progress))+"%",1)]))}}),ks=Fo(As,[["__scopeId","data-v-e5eadefa"]]),Hn=250,hn=500,kr=-500,Un=-520,No=-720,Rs=eo({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){Le.registerPlugin(fe);const e=Ho();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const n=p,t={showChasers:!1,showStarfield:!1,showCars:!1,showBuildings:!1,showPortalPulses:!1,showKeyarts:!1,showProjectGrids:!1,showProjectTitles:!1,showScrollTrigger:!0},r=Jt(null),o=Jt(null),l=Jt(!1),u=Jt(0),v=Jt(!1),F=Jt(!0),I=new Map;Jt(null);let S,_,y,R,E,b,U,$,H=null,C=null,Y=null,W=null,z=null,G=[],X=null;const k=()=>{const Q=r.value?r.value.getBoundingClientRect().width:window.innerWidth,V=window.innerHeight,D=e.isMobile?.75:1;y.setSize(Q*D,V*D),R.setSize(Q*D,V*D),_.aspect=Q/V,_.far=6e4,_.updateProjectionMatrix(),y.domElement.style.width=`${Q}px`,y.domElement.style.height=`${V}px`},te=Q=>I.has(Q)?Promise.resolve(I.get(Q)):new Promise((V,D)=>{new ji().load(Q,re=>{re.encoding=void 0,I.set(Q,re),V(re)},void 0,re=>D(re))}),P=async()=>{S=new Fi,S.background=new Ht(0),S.fog=new Hi(0,700,4e3),_=new Ui(75,window.innerWidth/window.innerHeight,1,6e4),_.position.set(0,0,0),_.lookAt(0,0,1e3),y=new Gi({antialias:!0}),e.isMobile?y.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):y.setPixelRatio(window.devicePixelRatio),y.toneMapping=Wi,y.toneMappingExposure=1,y.outputEncoding=void 0,R=new ms(y);const Q=new ys(S,_);if(R.addPass(Q),E=new Tr(new pe(window.innerWidth,window.innerHeight),6,.4,0),E.renderToScreen=!0,e.isMobile||R.addPass(E),r.value)r.value.appendChild(y.domElement),y.domElement.style.opacity="0";else return;U=new Xr,U.dom.style.position="fixed",U.dom.style.top="0px",U.dom.style.left="0px",U.dom.style.zIndex="1000",document.body.appendChild(U.dom);const V=n.projects.length+2+1;let D=0;const M=()=>{D++,u.value=D/V*100,D===V&&(l.value=!0)};await te(n.projectGridFile).then(()=>M()).catch(()=>M()),await te(n.projectGridFile2).then(()=>M()).catch(()=>M());for(const oe of n.projects)oe.keyart?await te(oe.keyart).then(()=>M()).catch(()=>M()):M();const re=Oo(S,{CUBE_SIZE:Hn,CUBE_SPACING:hn,FIRST_CUBE_Z:kr},n.projects,n.projectGridFile,n.projectGridFile2,t);let h=-8500;try{const oe=await re.getInitializedData();h=oe.maxZ!==void 0&&!isNaN(oe.maxZ)?oe.maxZ:-8500,M();const{introCubes:Ie}=ws(S,S,Promise.resolve(oe.loadedFont),{CUBE_SIZE:Hn,FIRST_CUBE_Z:kr});G=[...Ie,...oe.projectCubes],X=oe.updateCubeColors,t.showCars,t.showStarfield,t.showChasers,k()}catch(oe){console.error("Error initializing project cubes:",oe)}},ee=(Q=0)=>{if(b=requestAnimationFrame(ee),y&&R){if(!e.isMobile){const V=No-Un;let D=0;_.position.z>=Un?D=0:_.position.z<=No?D=1:D=(_.position.z-Un)/V,E.strength=Ke.lerp(1,.125,D)}v.value&&fe.update(),R.render()}U.update()};mi(()=>{P().then(()=>{if(l.value){b=requestAnimationFrame(ee);const Q=Oo(S,{CUBE_SIZE:Hn,CUBE_SPACING:hn,FIRST_CUBE_Z:kr},n.projects,n.projectGridFile,n.projectGridFile2,t);let V=null;const D=Q.getInitializedData().then(({projectCubes:re})=>{re.forEach(oe=>{oe.userData.isActive=!0});const h=kr-(n.projects.length-1)*hn;_.position.set(0,0,5e3),_.lookAt(0,0,h),_.updateProjectionMatrix(),X(_),R.render(),G.length&&X&&(V=Ps(S,_,o,G,X,{CUBE_SPACING:hn,FIRST_CUBE_Z:kr},{scrub:e.isMobile?3:1}).setReverting),y&&C===null&&(C=Q.setupInteractivity(_,y.domElement,oe=>{V&&V(oe)})),window.scrollTo({top:0,behavior:"auto"})}),M=()=>{D.then(()=>{F.value=!1,_.position.set(0,0,5e3),_.updateProjectionMatrix(),Le.to(y.domElement,{opacity:1,duration:.5,ease:"power4.out"});const re={z:5e3};Le.to(re,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{_.position.z=re.z,_.updateProjectionMatrix()},onComplete:()=>{_.position.z=0,v.value=!0}})})};Le.delayedCall(.1,M)}}).catch(Q=>{console.error("Initialization failed:",Q)}),window.addEventListener("resize",J)}),yi(()=>{b&&cancelAnimationFrame(b),C&&C(),window.removeEventListener("resize",J),fe.getAll().forEach(Q=>Q.kill()),y.dispose(),R.dispose(),S.clear(),document.body.removeChild(U.dom),z&&z()});const J=()=>{k(),fe.refresh()};return(Q,V)=>(Tn(),to("section",{ref_key:"wrapper",ref:o,class:"wrapper"},[Rr(xi,{name:"fade"},{default:bi(()=>[F.value?(Tn(),_i(ks,{key:0,progress:u.value},null,8,["progress"])):wi("",!0)]),_:1}),nr("div",{ref_key:"tunnelWrapper",ref:r,class:"tunnel-wrapper"},null,512)],512))}}),Is=Fo(Rs,[["__scopeId","data-v-faa95e51"]]),Ds={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Os={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Ns={class:"overflow-hidden"},js=eo({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(p){return(e,n)=>(Tn(),to(Si,null,[Rr(vi(Ti),{title:"Welcome"}),nr("div",Ds,[nr("nav",Os,[Rr(Yi)]),nr("div",Ns,[Rr(Is,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),n[0]||(n[0]=nr("div",{class:"flex justify-center items-center"},null,-1)),n[1]||(n[1]=nr("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),Rr(Vi)])],64))}});export{js as default};
