import{W as Nr,d as oo,I as ds,e as uo,o as $t,a as Lt,t as $s,x as Hr,y as Fr,b as Yo,w as Qs,c as Ks,f as Gr,T as Ur,j as vs,u as Wr,m as Yr,F as Ts,h as Ms,n as Cs,g as Vr}from"./app-DA6hO6Ic.js";import{c as Ye,O as Xr,f as ho,F as $o,k as _o,U as os,V as Oe,l as Sn,H as En,N as jr,C as qr,m as At,e as Xe,b as Kt,n as lt,E as Zr,o as Js,p as er,q as ko,r as $r,s as Qr,t as Kr,P as Yn,v as Jr,w as lo,G as Ft,x as ei,a as Yt,L as zt,g as ze,y as Ke,B as Ho,z as Qo,h as gt,u as tr,R as ti,I as oi,J as ni,K as ao,Q as or,T as nr,X as Ps,Y as si,Z as ri,_ as Vn,$ as Ss,a0 as ii,a1 as Xn,a2 as jn,a3 as ai,S as li,a4 as ci,a5 as ui,W as fi,a6 as pi,a7 as di,d as dn,i as hi,j as gi}from"./GlobalFooter-CcMqSWsT.js";import{u as fn,_ as mi}from"./App.vue_vue_type_script_setup_true_lang-rqGP-chr.js";import{_ as sr}from"./_plugin-vue_export-helper-DlAUqK2U.js";function yi(f,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(f,t.key,t)}}function xi(f,e,n){return e&&yi(f.prototype,e),f}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var wt,An,Ut,fo,po,Bo,rr,wo,Ko,ir,so,qt,ar,lr=function(){return wt||typeof window<"u"&&(wt=window.gsap)&&wt.registerPlugin&&wt},cr=1,Lo=[],Ue=[],eo=[],Jo=Date.now,ns=function(e,n){return n},wi=function(){var e=Ko.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,Ue),o.push.apply(o,eo),Ue=t,eo=o,ns=function(a,c){return n[a](c)}},go=function(e,n){return~eo.indexOf(e)&&eo[eo.indexOf(e)+1][n]},en=function(e){return!!~ir.indexOf(e)},St=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Pt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},hn="scrollLeft",gn="scrollTop",ss=function(){return so&&so.isPressed||Ue.cache++},Bn=function(e,n){var t=function o(s){if(s||s===0){cr&&(Ut.history.scrollRestoration="manual");var a=so&&so.isPressed;s=o.v=Math.round(s)||(so&&so.iOS?1:0),e(s),o.cacheID=Ue.cache,a&&ns("ss",s)}else(n||Ue.cache!==o.cacheID||ns("ref"))&&(o.cacheID=Ue.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Rt={s:hn,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Bn(function(f){return arguments.length?Ut.scrollTo(f,dt.sc()):Ut.pageXOffset||fo[hn]||po[hn]||Bo[hn]||0})},dt={s:gn,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Rt,sc:Bn(function(f){return arguments.length?Ut.scrollTo(Rt.sc(),f):Ut.pageYOffset||fo[gn]||po[gn]||Bo[gn]||0})},Bt=function(e,n){return(n&&n._ctx&&n._ctx.selector||wt.utils.toArray)(e)[0]||(typeof e=="string"&&wt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},mo=function(e,n){var t=n.s,o=n.sc;en(e)&&(e=fo.scrollingElement||po);var s=Ue.indexOf(e),a=o===dt.sc?1:2;!~s&&(s=Ue.push(e)-1),Ue[s+a]||St(e,"scroll",ss);var c=Ue[s+a],b=c||(Ue[s+a]=Bn(go(e,t),!0)||(en(e)?o:Bn(function(I){return arguments.length?e[t]=I:e[t]})));return b.target=e,c||(b.smooth=wt.getProperty(e,"scrollBehavior")==="smooth"),b},rs=function(e,n,t){var o=e,s=e,a=Jo(),c=a,b=n||50,I=Math.max(500,b*3),N=function(v,C){var w=Jo();C||w-a>b?(s=o,o=v,c=a,a=w):t?o+=v:o=s+(v-s)/(w-c)*(a-c)},k=function(){s=o=t?0:o,c=a=0},M=function(v){var C=c,w=s,H=Jo();return(v||v===0)&&v!==o&&N(v),a===c||H-c>I?0:(o+(t?w:-w))/((t?H:a)-C)*1e3};return{update:N,reset:k,getVelocity:M}},Go=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Es=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},ur=function(){Ko=wt.core.globals().ScrollTrigger,Ko&&Ko.core&&wi()},fr=function(e){return wt=e||lr(),!An&&wt&&typeof document<"u"&&document.body&&(Ut=window,fo=document,po=fo.documentElement,Bo=fo.body,ir=[Ut,fo,po,Bo],wt.utils.clamp,ar=wt.core.context||function(){},wo="onpointerenter"in Bo?"pointer":"mouse",rr=rt.isTouch=Ut.matchMedia&&Ut.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ut||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,qt=rt.eventTypes=("ontouchstart"in po?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in po?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return cr=0},500),ur(),An=1),An};Rt.op=dt;Ue.cache=0;var rt=function(){function f(n){this.init(n)}var e=f.prototype;return e.init=function(t){An||fr(wt)||console.warn("Please gsap.registerPlugin(Observer)"),Ko||ur();var o=t.tolerance,s=t.dragMinimum,a=t.type,c=t.target,b=t.lineHeight,I=t.debounce,N=t.preventDefault,k=t.onStop,M=t.onStopDelay,g=t.ignore,v=t.wheelSpeed,C=t.event,w=t.onDragStart,H=t.onDragEnd,$=t.onDrag,z=t.onPress,S=t.onRelease,V=t.onRight,q=t.onLeft,D=t.onUp,X=t.onDown,Q=t.onChangeX,P=t.onChangeY,ie=t.onChange,E=t.onToggleX,Y=t.onToggleY,fe=t.onHover,se=t.onHoverEnd,oe=t.onMove,B=t.ignoreCheck,L=t.isNormalizer,ae=t.onGestureStart,u=t.onGestureEnd,ge=t.onWheel,me=t.onEnable,Pe=t.onDisable,h=t.onClick,p=t.scrollSpeed,i=t.capture,r=t.allowClicks,x=t.lockAxis,T=t.onLockAxis;this.target=c=Bt(c)||po,this.vars=t,g&&(g=wt.utils.toArray(g)),o=o||1e-9,s=s||0,v=v||1,p=p||1,a=a||"wheel,touch,pointer",I=I!==!1,b||(b=parseFloat(Ut.getComputedStyle(Bo).lineHeight)||22);var y,A,U,R,_,O,Z,d=this,m=0,l=0,J=t.passive||!N&&t.passive!==!1,ue=mo(c,Rt),je=mo(c,dt),Ze=ue(),Fe=je(),Ve=~a.indexOf("touch")&&!~a.indexOf("pointer")&&qt[0]==="pointerdown",xt=en(c),Je=c.ownerDocument||fo,tt=[0,0,0],it=[0,0,0],W=0,ye=function(){return W=Jo()},j=function(pe,Ae){return(d.event=pe)&&g&&~g.indexOf(pe.target)||Ae&&Ve&&pe.pointerType!=="touch"||B&&B(pe,Ae)},Se=function(){d._vx.reset(),d._vy.reset(),A.pause(),k&&k(d)},xe=function(){var pe=d.deltaX=Es(tt),Ae=d.deltaY=Es(it),K=Math.abs(pe)>=o,ce=Math.abs(Ae)>=o;ie&&(K||ce)&&ie(d,pe,Ae,tt,it),K&&(V&&d.deltaX>0&&V(d),q&&d.deltaX<0&&q(d),Q&&Q(d),E&&d.deltaX<0!=m<0&&E(d),m=d.deltaX,tt[0]=tt[1]=tt[2]=0),ce&&(X&&d.deltaY>0&&X(d),D&&d.deltaY<0&&D(d),P&&P(d),Y&&d.deltaY<0!=l<0&&Y(d),l=d.deltaY,it[0]=it[1]=it[2]=0),(R||U)&&(oe&&oe(d),U&&(w&&U===1&&w(d),$&&$(d),U=0),R=!1),O&&!(O=!1)&&T&&T(d),_&&(ge(d),_=!1),y=0},be=function(pe,Ae,K){tt[K]+=pe,it[K]+=Ae,d._vx.update(pe),d._vy.update(Ae),I?y||(y=requestAnimationFrame(xe)):xe()},ke=function(pe,Ae){x&&!Z&&(d.axis=Z=Math.abs(pe)>Math.abs(Ae)?"x":"y",O=!0),Z!=="y"&&(tt[2]+=pe,d._vx.update(pe,!0)),Z!=="x"&&(it[2]+=Ae,d._vy.update(Ae,!0)),I?y||(y=requestAnimationFrame(xe)):xe()},te=function(pe){if(!j(pe,1)){pe=Go(pe,N);var Ae=pe.clientX,K=pe.clientY,ce=Ae-d.x,G=K-d.y,F=d.isDragging;d.x=Ae,d.y=K,(F||(ce||G)&&(Math.abs(d.startX-Ae)>=s||Math.abs(d.startY-K)>=s))&&(U=F?2:1,F||(d.isDragging=!0),ke(ce,G))}},_e=d.onPress=function(ee){j(ee,1)||ee&&ee.button||(d.axis=Z=null,A.pause(),d.isPressed=!0,ee=Go(ee),m=l=0,d.startX=d.x=ee.clientX,d.startY=d.y=ee.clientY,d._vx.reset(),d._vy.reset(),St(L?c:Je,qt[1],te,J,!0),d.deltaX=d.deltaY=0,z&&z(d))},le=d.onRelease=function(ee){if(!j(ee,1)){Pt(L?c:Je,qt[1],te,!0);var pe=!isNaN(d.y-d.startY),Ae=d.isDragging,K=Ae&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),ce=Go(ee);!K&&pe&&(d._vx.reset(),d._vy.reset(),N&&r&&wt.delayedCall(.08,function(){if(Jo()-W>300&&!ee.defaultPrevented){if(ee.target.click)ee.target.click();else if(Je.createEvent){var G=Je.createEvent("MouseEvents");G.initMouseEvent("click",!0,!0,Ut,1,ce.screenX,ce.screenY,ce.clientX,ce.clientY,!1,!1,!1,!1,0,null),ee.target.dispatchEvent(G)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,k&&Ae&&!L&&A.restart(!0),U&&xe(),H&&Ae&&H(d),S&&S(d,K)}},Te=function(pe){return pe.touches&&pe.touches.length>1&&(d.isGesturing=!0)&&ae(pe,d.isDragging)},We=function(){return(d.isGesturing=!1)||u(d)},$e=function(pe){if(!j(pe)){var Ae=ue(),K=je();be((Ae-Ze)*p,(K-Fe)*p,1),Ze=Ae,Fe=K,k&&A.restart(!0)}},Ne=function(pe){if(!j(pe)){pe=Go(pe,N),ge&&(_=!0);var Ae=(pe.deltaMode===1?b:pe.deltaMode===2?Ut.innerHeight:1)*v;be(pe.deltaX*Ae,pe.deltaY*Ae,0),k&&!L&&A.restart(!0)}},bt=function(pe){if(!j(pe)){var Ae=pe.clientX,K=pe.clientY,ce=Ae-d.x,G=K-d.y;d.x=Ae,d.y=K,R=!0,k&&A.restart(!0),(ce||G)&&ke(ce,G)}},_t=function(pe){d.event=pe,fe(d)},ht=function(pe){d.event=pe,se(d)},It=function(pe){return j(pe)||Go(pe,N)&&h(d)};A=d._dc=wt.delayedCall(M||.25,Se).pause(),d.deltaX=d.deltaY=0,d._vx=rs(0,50,!0),d._vy=rs(0,50,!0),d.scrollX=ue,d.scrollY=je,d.isDragging=d.isGesturing=d.isPressed=!1,ar(this),d.enable=function(ee){return d.isEnabled||(St(xt?Je:c,"scroll",ss),a.indexOf("scroll")>=0&&St(xt?Je:c,"scroll",$e,J,i),a.indexOf("wheel")>=0&&St(c,"wheel",Ne,J,i),(a.indexOf("touch")>=0&&rr||a.indexOf("pointer")>=0)&&(St(c,qt[0],_e,J,i),St(Je,qt[2],le),St(Je,qt[3],le),r&&St(c,"click",ye,!0,!0),h&&St(c,"click",It),ae&&St(Je,"gesturestart",Te),u&&St(Je,"gestureend",We),fe&&St(c,wo+"enter",_t),se&&St(c,wo+"leave",ht),oe&&St(c,wo+"move",bt)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=R=U=!1,d._vx.reset(),d._vy.reset(),Ze=ue(),Fe=je(),ee&&ee.type&&_e(ee),me&&me(d)),d},d.disable=function(){d.isEnabled&&(Lo.filter(function(ee){return ee!==d&&en(ee.target)}).length||Pt(xt?Je:c,"scroll",ss),d.isPressed&&(d._vx.reset(),d._vy.reset(),Pt(L?c:Je,qt[1],te,!0)),Pt(xt?Je:c,"scroll",$e,i),Pt(c,"wheel",Ne,i),Pt(c,qt[0],_e,i),Pt(Je,qt[2],le),Pt(Je,qt[3],le),Pt(c,"click",ye,!0),Pt(c,"click",It),Pt(Je,"gesturestart",Te),Pt(Je,"gestureend",We),Pt(c,wo+"enter",_t),Pt(c,wo+"leave",ht),Pt(c,wo+"move",bt),d.isEnabled=d.isPressed=d.isDragging=!1,Pe&&Pe(d))},d.kill=d.revert=function(){d.disable();var ee=Lo.indexOf(d);ee>=0&&Lo.splice(ee,1),so===d&&(so=0)},Lo.push(d),L&&en(c)&&(so=d),d.enable(C)},xi(f,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),f}();rt.version="3.12.7";rt.create=function(f){return new rt(f)};rt.register=fr;rt.getAll=function(){return Lo.slice()};rt.getById=function(f){return Lo.filter(function(e){return e.vars.id===f})[0]};lr()&&wt.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var he,Io,Ge,et,Gt,Qe,hs,zn,cn,tn,Vo,mn,Tt,Un,is,kt,As,ks,Oo,pr,qn,dr,Et,as,hr,gr,co,ls,gs,zo,ms,Nn,cs,Zn,yn=1,Mt=Date.now,$n=Mt(),jt=0,Xo=0,Ds=function(e,n,t){var o=Ht(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Rs=function(e,n){return n&&(!Ht(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},bi=function f(){return Xo&&requestAnimationFrame(f)},Is=function(){return Un=1},Os=function(){return Un=0},Qt=function(e){return e},jo=function(e){return Math.round(e*1e5)/1e5||0},mr=function(){return typeof window<"u"},yr=function(){return he||mr()&&(he=window.gsap)&&he.registerPlugin&&he},Po=function(e){return!!~hs.indexOf(e)},xr=function(e){return(e==="Height"?ms:Ge["inner"+e])||Gt["client"+e]||Qe["client"+e]},wr=function(e){return go(e,"getBoundingClientRect")||(Po(e)?function(){return On.width=Ge.innerWidth,On.height=ms,On}:function(){return no(e)})},_i=function(e,n,t){var o=t.d,s=t.d2,a=t.a;return(a=go(e,"getBoundingClientRect"))?function(){return a()[o]}:function(){return(n?xr(s):e["client"+s])||0}},vi=function(e,n){return!n||~eo.indexOf(e)?wr(e):function(){return On}},Jt=function(e,n){var t=n.s,o=n.d2,s=n.d,a=n.a;return Math.max(0,(t="scroll"+o)&&(a=go(e,t))?a()-wr(e)()[s]:Po(e)?(Gt[t]||Qe[t])-xr(o):e[t]-e["offset"+o])},xn=function(e,n){for(var t=0;t<Oo.length;t+=3)(!n||~n.indexOf(Oo[t+1]))&&e(Oo[t],Oo[t+1],Oo[t+2])},Ht=function(e){return typeof e=="string"},Ct=function(e){return typeof e=="function"},qo=function(e){return typeof e=="number"},bo=function(e){return typeof e=="object"},Uo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},Qn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},Do=Math.abs,br="left",_r="top",ys="right",xs="bottom",To="width",Mo="height",on="Right",nn="Left",sn="Top",rn="Bottom",ct="padding",Vt="margin",Fo="Width",ws="Height",pt="px",Xt=function(e){return Ge.getComputedStyle(e)},Ti=function(e){var n=Xt(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Ls=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},no=function(e,n){var t=n&&Xt(e)[is]!=="matrix(1, 0, 0, 1, 0, 0)"&&he.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Hn=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},vr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},Mi=function(e){return function(n){return he.utils.snap(vr(e),n)}},bs=function(e){var n=he.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,a){a===void 0&&(a=.001);var c;if(!s)return n(o);if(s>0){for(o-=a,c=0;c<t.length;c++)if(t[c]>=o)return t[c];return t[c-1]}else for(c=t.length,o+=a;c--;)if(t[c]<=o)return t[c];return t[0]}:function(o,s,a){a===void 0&&(a=.001);var c=n(o);return!s||Math.abs(c-o)<a||c-o<0==s<0?c:n(s<0?o-e:o+e)}},Ci=function(e){return function(n,t){return bs(vr(e))(n,t.direction)}},wn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},yt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},mt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},bn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Bs={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_n={toggleActions:"play",anticipatePin:0},Fn={top:0,left:0,center:.5,bottom:1,right:1},kn=function(e,n){if(Ht(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Fn?Fn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},vn=function(e,n,t,o,s,a,c,b){var I=s.startColor,N=s.endColor,k=s.fontSize,M=s.indent,g=s.fontWeight,v=et.createElement("div"),C=Po(t)||go(t,"pinType")==="fixed",w=e.indexOf("scroller")!==-1,H=C?Qe:t,$=e.indexOf("start")!==-1,z=$?I:N,S="border-color:"+z+";font-size:"+k+";color:"+z+";font-weight:"+g+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return S+="position:"+((w||b)&&C?"fixed;":"absolute;"),(w||b||!C)&&(S+=(o===dt?ys:xs)+":"+(a+parseFloat(M))+"px;"),c&&(S+="box-sizing:border-box;text-align:left;width:"+c.offsetWidth+"px;"),v._isStart=$,v.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),v.style.cssText=S,v.innerText=n||n===0?e+"-"+n:e,H.children[0]?H.insertBefore(v,H.children[0]):H.appendChild(v),v._offset=v["offset"+o.op.d2],Dn(v,0,o,$),v},Dn=function(e,n,t,o){var s={display:"block"},a=t[o?"os2":"p2"],c=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+a+Fo]=1,s["border"+c+Fo]=0,s[t.p]=n+"px",he.set(e,s)},He=[],us={},un,zs=function(){return Mt()-jt>34&&(un||(un=requestAnimationFrame(ro)))},Ro=function(){(!Et||!Et.isPressed||Et.startX>Qe.clientWidth)&&(Ue.cache++,Et?un||(un=requestAnimationFrame(ro)):ro(),jt||Eo("scrollStart"),jt=Mt())},Kn=function(){gr=Ge.innerWidth,hr=Ge.innerHeight},Zo=function(e){Ue.cache++,(e===!0||!Tt&&!dr&&!et.fullscreenElement&&!et.webkitFullscreenElement&&(!as||gr!==Ge.innerWidth||Math.abs(Ge.innerHeight-hr)>Ge.innerHeight*.25))&&zn.restart(!0)},So={},Pi=[],Tr=function f(){return mt(Ie,"scrollEnd",f)||vo(!0)},Eo=function(e){return So[e]&&So[e].map(function(n){return n()})||Pi},Nt=[],Mr=function(e){for(var n=0;n<Nt.length;n+=5)(!e||Nt[n+4]&&Nt[n+4].query===e)&&(Nt[n].style.cssText=Nt[n+1],Nt[n].getBBox&&Nt[n].setAttribute("transform",Nt[n+2]||""),Nt[n+3].uncache=1)},_s=function(e,n){var t;for(kt=0;kt<He.length;kt++)t=He[kt],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));Nn=!0,n&&Mr(n),n||Eo("revert")},Cr=function(e,n){Ue.cache++,(n||!Dt)&&Ue.forEach(function(t){return Ct(t)&&t.cacheID++&&(t.rec=0)}),Ht(e)&&(Ge.history.scrollRestoration=gs=e)},Dt,Co=0,Ns,Si=function(){if(Ns!==Co){var e=Ns=Co;requestAnimationFrame(function(){return e===Co&&vo(!0)})}},Pr=function(){Qe.appendChild(zo),ms=!Et&&zo.offsetHeight||Ge.innerHeight,Qe.removeChild(zo)},Hs=function(e){return cn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},vo=function(e,n){if(Gt=et.documentElement,Qe=et.body,hs=[Ge,et,Gt,Qe],jt&&!e&&!Nn){yt(Ie,"scrollEnd",Tr);return}Pr(),Dt=Ie.isRefreshing=!0,Ue.forEach(function(o){return Ct(o)&&++o.cacheID&&(o.rec=o())});var t=Eo("refreshInit");pr&&Ie.sort(),n||_s(),Ue.forEach(function(o){Ct(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),He.slice(0).forEach(function(o){return o.refresh()}),Nn=!1,He.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",a=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-a),o.refresh()}}),cs=1,Hs(!0),He.forEach(function(o){var s=Jt(o.scroller,o._dir),a=o.vars.end==="max"||o._endClamp&&o.end>s,c=o._startClamp&&o.start>=s;(a||c)&&o.setPositions(c?s-1:o.start,a?Math.max(c?s:o.start+1,s):o.end,!0)}),Hs(!1),cs=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),Ue.forEach(function(o){Ct(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),Cr(gs,1),zn.pause(),Co++,Dt=2,ro(2),He.forEach(function(o){return Ct(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Dt=Ie.isRefreshing=!1,Eo("refresh")},fs=0,Rn=1,an,ro=function(e){if(e===2||!Dt&&!Nn){Ie.isUpdating=!0,an&&an.update(0);var n=He.length,t=Mt(),o=t-$n>=50,s=n&&He[0].scroll();if(Rn=fs>s?-1:1,Dt||(fs=s),o&&(jt&&!Un&&t-jt>200&&(jt=0,Eo("scrollEnd")),Vo=$n,$n=t),Rn<0){for(kt=n;kt-- >0;)He[kt]&&He[kt].update(0,o);Rn=1}else for(kt=0;kt<n;kt++)He[kt]&&He[kt].update(0,o);Ie.isUpdating=!1}un=0},ps=[br,_r,xs,ys,Vt+rn,Vt+on,Vt+sn,Vt+nn,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],In=ps.concat([To,Mo,"boxSizing","max"+Fo,"max"+ws,"position",Vt,ct,ct+sn,ct+on,ct+rn,ct+nn]),Ei=function(e,n,t){No(t);var o=e._gsap;if(o.spacerIsNative)No(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},Jn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=ps.length,a=n.style,c=e.style,b;s--;)b=ps[s],a[b]=t[b];a.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(a.display="inline-block"),c[xs]=c[ys]="auto",a.flexBasis=t.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[To]=Hn(e,Rt)+pt,a[Mo]=Hn(e,dt)+pt,a[ct]=c[Vt]=c[_r]=c[br]="0",No(o),c[To]=c["max"+Fo]=t[To],c[Mo]=c["max"+ws]=t[Mo],c[ct]=t[ct],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},Ai=/([A-Z])/g,No=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,a;for((e.t._gsap||he.core.getCache(e.t)).uncache=1;o<t;o+=2)a=e[o+1],s=e[o],a?n[s]=a:n[s]&&n.removeProperty(s.replace(Ai,"-$1").toLowerCase())}},Tn=function(e){for(var n=In.length,t=e.style,o=[],s=0;s<n;s++)o.push(In[s],t[In[s]]);return o.t=e,o},ki=function(e,n,t){for(var o=[],s=e.length,a=t?8:0,c;a<s;a+=2)c=e[a],o.push(c,c in n?n[c]:e[a+1]);return o.t=e.t,o},On={left:0,top:0},Fs=function(e,n,t,o,s,a,c,b,I,N,k,M,g,v){Ct(e)&&(e=e(b)),Ht(e)&&e.substr(0,3)==="max"&&(e=M+(e.charAt(4)==="="?kn("0"+e.substr(3),t):0));var C=g?g.time():0,w,H,$;if(g&&g.seek(0),isNaN(e)||(e=+e),qo(e))g&&(e=he.utils.mapRange(g.scrollTrigger.start,g.scrollTrigger.end,0,M,e)),c&&Dn(c,t,o,!0);else{Ct(n)&&(n=n(b));var z=(e||"0").split(" "),S,V,q,D;$=Bt(n,b)||Qe,S=no($)||{},(!S||!S.left&&!S.top)&&Xt($).display==="none"&&(D=$.style.display,$.style.display="block",S=no($),D?$.style.display=D:$.style.removeProperty("display")),V=kn(z[0],S[o.d]),q=kn(z[1]||"0",t),e=S[o.p]-I[o.p]-N+V+s-q,c&&Dn(c,q,o,t-q<20||c._isStart&&q>20),t-=t-q}if(v&&(b[v]=e||-.001,e<0&&(e=0)),a){var X=e+t,Q=a._isStart;w="scroll"+o.d2,Dn(a,X,o,Q&&X>20||!Q&&(k?Math.max(Qe[w],Gt[w]):a.parentNode[w])<=X+1),k&&(I=no(c),k&&(a.style[o.op.p]=I[o.op.p]-o.op.m-a._offset+pt))}return g&&$&&(w=no($),g.seek(M),H=no($),g._caScrollDist=w[o.p]-H[o.p],e=e/g._caScrollDist*M),g&&g.seek(C),g?e:Math.round(e)},Di=/(webkit|moz|length|cssText|inset)/i,Gs=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,a,c;if(n===Qe){e._stOrig=s.cssText,c=Xt(e);for(a in c)!+a&&!Di.test(a)&&c[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=c[a]);s.top=t,s.left=o}else s.cssText=e._stOrig;he.core.getCache(e).uncache=1,n.appendChild(e)}},Sr=function(e,n,t){var o=n,s=o;return function(a){var c=Math.round(e());return c!==o&&c!==s&&Math.abs(c-o)>3&&Math.abs(c-s)>3&&(a=c,t&&t()),s=o,o=Math.round(a),o}},Mn=function(e,n,t){var o={};o[n.p]="+="+t,he.set(e,o)},Us=function(e,n){var t=mo(e,n),o="_scroll"+n.p2,s=function a(c,b,I,N,k){var M=a.tween,g=b.onComplete,v={};I=I||t();var C=Sr(t,I,function(){M.kill(),a.tween=0});return k=N&&k||0,N=N||c-I,M&&M.kill(),b[o]=c,b.inherit=!1,b.modifiers=v,v[o]=function(){return C(I+N*M.ratio+k*M.ratio*M.ratio)},b.onUpdate=function(){Ue.cache++,a.tween&&ro()},b.onComplete=function(){a.tween=0,g&&g.call(M)},M=a.tween=he.to(e,b),M};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},yt(e,"wheel",t.wheelHandler),Ie.isTouch&&yt(e,"touchmove",t.wheelHandler),s},Ie=function(){function f(n,t){Io||f.register(he)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ls(this),this.init(n,t)}var e=f.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Xo){this.update=this.refresh=this.kill=Qt;return}t=Ls(Ht(t)||qo(t)||t.nodeType?{trigger:t}:t,_n);var s=t,a=s.onUpdate,c=s.toggleClass,b=s.id,I=s.onToggle,N=s.onRefresh,k=s.scrub,M=s.trigger,g=s.pin,v=s.pinSpacing,C=s.invalidateOnRefresh,w=s.anticipatePin,H=s.onScrubComplete,$=s.onSnapComplete,z=s.once,S=s.snap,V=s.pinReparent,q=s.pinSpacer,D=s.containerAnimation,X=s.fastScrollEnd,Q=s.preventOverlaps,P=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Rt:dt,ie=!k&&k!==0,E=Bt(t.scroller||Ge),Y=he.core.getCache(E),fe=Po(E),se=("pinType"in t?t.pinType:go(E,"pinType")||fe&&"fixed")==="fixed",oe=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],B=ie&&t.toggleActions.split(" "),L="markers"in t?t.markers:_n.markers,ae=fe?0:parseFloat(Xt(E)["border"+P.p2+Fo])||0,u=this,ge=t.onRefreshInit&&function(){return t.onRefreshInit(u)},me=_i(E,fe,P),Pe=vi(E,fe),h=0,p=0,i=0,r=mo(E,P),x,T,y,A,U,R,_,O,Z,d,m,l,J,ue,je,Ze,Fe,Ve,xt,Je,tt,it,W,ye,j,Se,xe,be,ke,te,_e,le,Te,We,$e,Ne,bt,_t,ht;if(u._startClamp=u._endClamp=!1,u._dir=P,w*=45,u.scroller=E,u.scroll=D?D.time.bind(D):r,A=r(),u.vars=t,o=o||t.animation,"refreshPriority"in t&&(pr=1,t.refreshPriority===-9999&&(an=u)),Y.tweenScroll=Y.tweenScroll||{top:Us(E,dt),left:Us(E,Rt)},u.tweenTo=x=Y.tweenScroll[P.p],u.scrubDuration=function(K){Te=qo(K)&&K,Te?le?le.duration(K):le=he.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Te,paused:!0,onComplete:function(){return H&&H(u)}}):(le&&le.progress(1).kill(),le=0)},o&&(o.vars.lazy=!1,o._initted&&!u.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),u.animation=o.pause(),o.scrollTrigger=u,u.scrubDuration(k),te=0,b||(b=o.vars.id)),S&&((!bo(S)||S.push)&&(S={snapTo:S}),"scrollBehavior"in Qe.style&&he.set(fe?[Qe,Gt]:E,{scrollBehavior:"auto"}),Ue.forEach(function(K){return Ct(K)&&K.target===(fe?et.scrollingElement||Gt:E)&&(K.smooth=!1)}),y=Ct(S.snapTo)?S.snapTo:S.snapTo==="labels"?Mi(o):S.snapTo==="labelsDirectional"?Ci(o):S.directional!==!1?function(K,ce){return bs(S.snapTo)(K,Mt()-p<500?0:ce.direction)}:he.utils.snap(S.snapTo),We=S.duration||{min:.1,max:2},We=bo(We)?tn(We.min,We.max):tn(We,We),$e=he.delayedCall(S.delay||Te/2||.1,function(){var K=r(),ce=Mt()-p<500,G=x.tween;if((ce||Math.abs(u.getVelocity())<10)&&!G&&!Un&&h!==K){var F=(K-R)/ue,De=o&&!ie?o.totalProgress():F,ne=ce?0:(De-_e)/(Mt()-Vo)*1e3||0,Me=he.utils.clamp(-F,1-F,Do(ne/2)*ne/.185),re=F+(S.inertia===!1?0:Me),ve,de,Ee=S,Ce=Ee.onStart,we=Ee.onInterrupt,Re=Ee.onComplete;if(ve=y(re,u),qo(ve)||(ve=re),de=Math.max(0,Math.round(R+ve*ue)),K<=_&&K>=R&&de!==K){if(G&&!G._initted&&G.data<=Do(de-K))return;S.inertia===!1&&(Me=ve-F),x(de,{duration:We(Do(Math.max(Do(re-De),Do(ve-De))*.185/ne/.05||0)),ease:S.ease||"power3",data:Do(de-K),onInterrupt:function(){return $e.restart(!0)&&we&&we(u)},onComplete:function(){u.update(),h=r(),o&&!ie&&(le?le.resetTo("totalProgress",ve,o._tTime/o._tDur):o.progress(ve)),te=_e=o&&!ie?o.totalProgress():u.progress,$&&$(u),Re&&Re(u)}},K,Me*ue,de-K-Me*ue),Ce&&Ce(u,x.tween)}}else u.isActive&&h!==K&&$e.restart(!0)}).pause()),b&&(us[b]=u),M=u.trigger=Bt(M||g!==!0&&g),ht=M&&M._gsap&&M._gsap.stRevert,ht&&(ht=ht(u)),g=g===!0?M:Bt(g),Ht(c)&&(c={targets:M,className:c}),g&&(v===!1||v===Vt||(v=!v&&g.parentNode&&g.parentNode.style&&Xt(g.parentNode).display==="flex"?!1:ct),u.pin=g,T=he.core.getCache(g),T.spacer?je=T.pinState:(q&&(q=Bt(q),q&&!q.nodeType&&(q=q.current||q.nativeElement),T.spacerIsNative=!!q,q&&(T.spacerState=Tn(q))),T.spacer=Ve=q||et.createElement("div"),Ve.classList.add("pin-spacer"),b&&Ve.classList.add("pin-spacer-"+b),T.pinState=je=Tn(g)),t.force3D!==!1&&he.set(g,{force3D:!0}),u.spacer=Ve=T.spacer,ke=Xt(g),ye=ke[v+P.os2],Je=he.getProperty(g),tt=he.quickSetter(g,P.a,pt),Jn(g,Ve,ke),Fe=Tn(g)),L){l=bo(L)?Ls(L,Bs):Bs,d=vn("scroller-start",b,E,P,l,0),m=vn("scroller-end",b,E,P,l,0,d),xt=d["offset"+P.op.d2];var It=Bt(go(E,"content")||E);O=this.markerStart=vn("start",b,It,P,l,xt,0,D),Z=this.markerEnd=vn("end",b,It,P,l,xt,0,D),D&&(_t=he.quickSetter([O,Z],P.a,pt)),!se&&!(eo.length&&go(E,"fixedMarkers")===!0)&&(Ti(fe?Qe:E),he.set([d,m],{force3D:!0}),Se=he.quickSetter(d,P.a,pt),be=he.quickSetter(m,P.a,pt))}if(D){var ee=D.vars.onUpdate,pe=D.vars.onUpdateParams;D.eventCallback("onUpdate",function(){u.update(0,0,1),ee&&ee.apply(D,pe||[])})}if(u.previous=function(){return He[He.indexOf(u)-1]},u.next=function(){return He[He.indexOf(u)+1]},u.revert=function(K,ce){if(!ce)return u.kill(!0);var G=K!==!1||!u.enabled,F=Tt;G!==u.isReverted&&(G&&(Ne=Math.max(r(),u.scroll.rec||0),i=u.progress,bt=o&&o.progress()),O&&[O,Z,d,m].forEach(function(De){return De.style.display=G?"none":"block"}),G&&(Tt=u,u.update(G)),g&&(!V||!u.isActive)&&(G?Ei(g,Ve,je):Jn(g,Ve,Xt(g),j)),G||u.update(G),Tt=F,u.isReverted=G)},u.refresh=function(K,ce,G,F){if(!((Tt||!u.enabled)&&!ce)){if(g&&K&&jt){yt(f,"scrollEnd",Tr);return}!Dt&&ge&&ge(u),Tt=u,x.tween&&!G&&(x.tween.kill(),x.tween=0),le&&le.pause(),C&&o&&o.revert({kill:!1}).invalidate(),u.isReverted||u.revert(!0,!0),u._subPinOffset=!1;var De=me(),ne=Pe(),Me=D?D.duration():Jt(E,P),re=ue<=.01,ve=0,de=F||0,Ee=bo(G)?G.end:t.end,Ce=t.endTrigger||M,we=bo(G)?G.start:t.start||(t.start===0||!M?0:g?"0 0":"0 100%"),Re=u.pinnedContainer=t.pinnedContainer&&Bt(t.pinnedContainer,u),qe=M&&Math.max(0,He.indexOf(u))||0,Le=qe,Be,ut,Zt,yo,ft,nt,Wt,io,ot,Ot,st,at,to;for(L&&bo(G)&&(at=he.getProperty(d,P.p),to=he.getProperty(m,P.p));Le-- >0;)nt=He[Le],nt.end||nt.refresh(0,1)||(Tt=u),Wt=nt.pin,Wt&&(Wt===M||Wt===g||Wt===Re)&&!nt.isReverted&&(Ot||(Ot=[]),Ot.unshift(nt),nt.revert(!0,!0)),nt!==He[Le]&&(qe--,Le--);for(Ct(we)&&(we=we(u)),we=Ds(we,"start",u),R=Fs(we,M,De,P,r(),O,d,u,ne,ae,se,Me,D,u._startClamp&&"_startClamp")||(g?-.001:0),Ct(Ee)&&(Ee=Ee(u)),Ht(Ee)&&!Ee.indexOf("+=")&&(~Ee.indexOf(" ")?Ee=(Ht(we)?we.split(" ")[0]:"")+Ee:(ve=kn(Ee.substr(2),De),Ee=Ht(we)?we:(D?he.utils.mapRange(0,D.duration(),D.scrollTrigger.start,D.scrollTrigger.end,R):R)+ve,Ce=M)),Ee=Ds(Ee,"end",u),_=Math.max(R,Fs(Ee||(Ce?"100% 0":Me),Ce,De,P,r()+ve,Z,m,u,ne,ae,se,Me,D,u._endClamp&&"_endClamp"))||-.001,ve=0,Le=qe;Le--;)nt=He[Le],Wt=nt.pin,Wt&&nt.start-nt._pinPush<=R&&!D&&nt.end>0&&(Be=nt.end-(u._startClamp?Math.max(0,nt.start):nt.start),(Wt===M&&nt.start-nt._pinPush<R||Wt===Re)&&isNaN(we)&&(ve+=Be*(1-nt.progress)),Wt===g&&(de+=Be));if(R+=ve,_+=ve,u._startClamp&&(u._startClamp+=ve),u._endClamp&&!Dt&&(u._endClamp=_||-.001,_=Math.min(_,Jt(E,P))),ue=_-R||(R-=.01)&&.001,re&&(i=he.utils.clamp(0,1,he.utils.normalize(R,_,Ne))),u._pinPush=de,O&&ve&&(Be={},Be[P.a]="+="+ve,Re&&(Be[P.p]="-="+r()),he.set([O,Z],Be)),g&&!(cs&&u.end>=Jt(E,P)))Be=Xt(g),yo=P===dt,Zt=r(),it=parseFloat(Je(P.a))+de,!Me&&_>1&&(st=(fe?et.scrollingElement||Gt:E).style,st={style:st,value:st["overflow"+P.a.toUpperCase()]},fe&&Xt(Qe)["overflow"+P.a.toUpperCase()]!=="scroll"&&(st.style["overflow"+P.a.toUpperCase()]="scroll")),Jn(g,Ve,Be),Fe=Tn(g),ut=no(g,!0),io=se&&mo(E,yo?Rt:dt)(),v?(j=[v+P.os2,ue+de+pt],j.t=Ve,Le=v===ct?Hn(g,P)+ue+de:0,Le&&(j.push(P.d,Le+pt),Ve.style.flexBasis!=="auto"&&(Ve.style.flexBasis=Le+pt)),No(j),Re&&He.forEach(function(vt){vt.pin===Re&&vt.vars.pinSpacing!==!1&&(vt._subPinOffset=!0)}),se&&r(Ne)):(Le=Hn(g,P),Le&&Ve.style.flexBasis!=="auto"&&(Ve.style.flexBasis=Le+pt)),se&&(ft={top:ut.top+(yo?Zt-R:io)+pt,left:ut.left+(yo?io:Zt-R)+pt,boxSizing:"border-box",position:"fixed"},ft[To]=ft["max"+Fo]=Math.ceil(ut.width)+pt,ft[Mo]=ft["max"+ws]=Math.ceil(ut.height)+pt,ft[Vt]=ft[Vt+sn]=ft[Vt+on]=ft[Vt+rn]=ft[Vt+nn]="0",ft[ct]=Be[ct],ft[ct+sn]=Be[ct+sn],ft[ct+on]=Be[ct+on],ft[ct+rn]=Be[ct+rn],ft[ct+nn]=Be[ct+nn],Ze=ki(je,ft,V),Dt&&r(0)),o?(ot=o._initted,qn(1),o.render(o.duration(),!0,!0),W=Je(P.a)-it+ue+de,xe=Math.abs(ue-W)>1,se&&xe&&Ze.splice(Ze.length-2,2),o.render(0,!0,!0),ot||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),qn(0)):W=ue,st&&(st.value?st.style["overflow"+P.a.toUpperCase()]=st.value:st.style.removeProperty("overflow-"+P.a));else if(M&&r()&&!D)for(ut=M.parentNode;ut&&ut!==Qe;)ut._pinOffset&&(R-=ut._pinOffset,_-=ut._pinOffset),ut=ut.parentNode;Ot&&Ot.forEach(function(vt){return vt.revert(!1,!0)}),u.start=R,u.end=_,A=U=Dt?Ne:r(),!D&&!Dt&&(A<Ne&&r(Ne),u.scroll.rec=0),u.revert(!1,!0),p=Mt(),$e&&(h=-1,$e.restart(!0)),Tt=0,o&&ie&&(o._initted||bt)&&o.progress()!==bt&&o.progress(bt||0,!0).render(o.time(),!0,!0),(re||i!==u.progress||D||C||o&&!o._initted)&&(o&&!ie&&o.totalProgress(D&&R<-.001&&!i?he.utils.normalize(R,_,0):i,!0),u.progress=re||(A-R)/ue===i?0:i),g&&v&&(Ve._pinOffset=Math.round(u.progress*W)),le&&le.invalidate(),isNaN(at)||(at-=he.getProperty(d,P.p),to-=he.getProperty(m,P.p),Mn(d,P,at),Mn(O,P,at-(F||0)),Mn(m,P,to),Mn(Z,P,to-(F||0))),re&&!Dt&&u.update(),N&&!Dt&&!J&&(J=!0,N(u),J=!1)}},u.getVelocity=function(){return(r()-U)/(Mt()-Vo)*1e3||0},u.endAnimation=function(){Uo(u.callbackAnimation),o&&(le?le.progress(1):o.paused()?ie||Uo(o,u.direction<0,1):Uo(o,o.reversed()))},u.labelToScroll=function(K){return o&&o.labels&&(R||u.refresh()||R)+o.labels[K]/o.duration()*ue||0},u.getTrailing=function(K){var ce=He.indexOf(u),G=u.direction>0?He.slice(0,ce).reverse():He.slice(ce+1);return(Ht(K)?G.filter(function(F){return F.vars.preventOverlaps===K}):G).filter(function(F){return u.direction>0?F.end<=R:F.start>=_})},u.update=function(K,ce,G){if(!(D&&!G&&!K)){var F=Dt===!0?Ne:u.scroll(),De=K?0:(F-R)/ue,ne=De<0?0:De>1?1:De||0,Me=u.progress,re,ve,de,Ee,Ce,we,Re,qe;if(ce&&(U=A,A=D?r():F,S&&(_e=te,te=o&&!ie?o.totalProgress():ne)),w&&g&&!Tt&&!yn&&jt&&(!ne&&R<F+(F-U)/(Mt()-Vo)*w?ne=1e-4:ne===1&&_>F+(F-U)/(Mt()-Vo)*w&&(ne=.9999)),ne!==Me&&u.enabled){if(re=u.isActive=!!ne&&ne<1,ve=!!Me&&Me<1,we=re!==ve,Ce=we||!!ne!=!!Me,u.direction=ne>Me?1:-1,u.progress=ne,Ce&&!Tt&&(de=ne&&!Me?0:ne===1?1:Me===1?2:3,ie&&(Ee=!we&&B[de+1]!=="none"&&B[de+1]||B[de],qe=o&&(Ee==="complete"||Ee==="reset"||Ee in o))),Q&&(we||qe)&&(qe||k||!o)&&(Ct(Q)?Q(u):u.getTrailing(Q).forEach(function(Zt){return Zt.endAnimation()})),ie||(le&&!Tt&&!yn?(le._dp._time-le._start!==le._time&&le.render(le._dp._time-le._start),le.resetTo?le.resetTo("totalProgress",ne,o._tTime/o._tDur):(le.vars.totalProgress=ne,le.invalidate().restart())):o&&o.totalProgress(ne,!!(Tt&&(p||K)))),g){if(K&&v&&(Ve.style[v+P.os2]=ye),!se)tt(jo(it+W*ne));else if(Ce){if(Re=!K&&ne>Me&&_+1>F&&F+1>=Jt(E,P),V)if(!K&&(re||Re)){var Le=no(g,!0),Be=F-R;Gs(g,Qe,Le.top+(P===dt?Be:0)+pt,Le.left+(P===dt?0:Be)+pt)}else Gs(g,Ve);No(re||Re?Ze:Fe),xe&&ne<1&&re||tt(it+(ne===1&&!Re?W:0))}}S&&!x.tween&&!Tt&&!yn&&$e.restart(!0),c&&(we||z&&ne&&(ne<1||!Zn))&&cn(c.targets).forEach(function(Zt){return Zt.classList[re||z?"add":"remove"](c.className)}),a&&!ie&&!K&&a(u),Ce&&!Tt?(ie&&(qe&&(Ee==="complete"?o.pause().totalProgress(1):Ee==="reset"?o.restart(!0).pause():Ee==="restart"?o.restart(!0):o[Ee]()),a&&a(u)),(we||!Zn)&&(I&&we&&Qn(u,I),oe[de]&&Qn(u,oe[de]),z&&(ne===1?u.kill(!1,1):oe[de]=0),we||(de=ne===1?1:3,oe[de]&&Qn(u,oe[de]))),X&&!re&&Math.abs(u.getVelocity())>(qo(X)?X:2500)&&(Uo(u.callbackAnimation),le?le.progress(1):Uo(o,Ee==="reverse"?1:!ne,1))):ie&&a&&!Tt&&a(u)}if(be){var ut=D?F/D.duration()*(D._caScrollDist||0):F;Se(ut+(d._isFlipped?1:0)),be(ut)}_t&&_t(-F/D.duration()*(D._caScrollDist||0))}},u.enable=function(K,ce){u.enabled||(u.enabled=!0,yt(E,"resize",Zo),fe||yt(E,"scroll",Ro),ge&&yt(f,"refreshInit",ge),K!==!1&&(u.progress=i=0,A=U=h=r()),ce!==!1&&u.refresh())},u.getTween=function(K){return K&&x?x.tween:le},u.setPositions=function(K,ce,G,F){if(D){var De=D.scrollTrigger,ne=D.duration(),Me=De.end-De.start;K=De.start+Me*K/ne,ce=De.start+Me*ce/ne}u.refresh(!1,!1,{start:Rs(K,G&&!!u._startClamp),end:Rs(ce,G&&!!u._endClamp)},F),u.update()},u.adjustPinSpacing=function(K){if(j&&K){var ce=j.indexOf(P.d)+1;j[ce]=parseFloat(j[ce])+K+pt,j[1]=parseFloat(j[1])+K+pt,No(j)}},u.disable=function(K,ce){if(u.enabled&&(K!==!1&&u.revert(!0,!0),u.enabled=u.isActive=!1,ce||le&&le.pause(),Ne=0,T&&(T.uncache=1),ge&&mt(f,"refreshInit",ge),$e&&($e.pause(),x.tween&&x.tween.kill()&&(x.tween=0)),!fe)){for(var G=He.length;G--;)if(He[G].scroller===E&&He[G]!==u)return;mt(E,"resize",Zo),fe||mt(E,"scroll",Ro)}},u.kill=function(K,ce){u.disable(K,ce),le&&!ce&&le.kill(),b&&delete us[b];var G=He.indexOf(u);G>=0&&He.splice(G,1),G===kt&&Rn>0&&kt--,G=0,He.forEach(function(F){return F.scroller===u.scroller&&(G=1)}),G||Dt||(u.scroll.rec=0),o&&(o.scrollTrigger=null,K&&o.revert({kill:!1}),ce||o.kill()),O&&[O,Z,d,m].forEach(function(F){return F.parentNode&&F.parentNode.removeChild(F)}),an===u&&(an=0),g&&(T&&(T.uncache=1),G=0,He.forEach(function(F){return F.pin===g&&G++}),G||(T.spacer=0)),t.onKill&&t.onKill(u)},He.push(u),u.enable(!1,!1),ht&&ht(u),o&&o.add&&!ue){var Ae=u.update;u.update=function(){u.update=Ae,Ue.cache++,R||_||u.refresh()},he.delayedCall(.01,u.update),ue=.01,R=_=0}else u.refresh();g&&Si()},f.register=function(t){return Io||(he=t||yr(),mr()&&window.document&&f.enable(),Io=Xo),Io},f.defaults=function(t){if(t)for(var o in t)_n[o]=t[o];return _n},f.disable=function(t,o){Xo=0,He.forEach(function(a){return a[o?"kill":"disable"](t)}),mt(Ge,"wheel",Ro),mt(et,"scroll",Ro),clearInterval(mn),mt(et,"touchcancel",Qt),mt(Qe,"touchstart",Qt),wn(mt,et,"pointerdown,touchstart,mousedown",Is),wn(mt,et,"pointerup,touchend,mouseup",Os),zn.kill(),xn(mt);for(var s=0;s<Ue.length;s+=3)bn(mt,Ue[s],Ue[s+1]),bn(mt,Ue[s],Ue[s+2])},f.enable=function(){if(Ge=window,et=document,Gt=et.documentElement,Qe=et.body,he&&(cn=he.utils.toArray,tn=he.utils.clamp,ls=he.core.context||Qt,qn=he.core.suppressOverwrites||Qt,gs=Ge.history.scrollRestoration||"auto",fs=Ge.pageYOffset||0,he.core.globals("ScrollTrigger",f),Qe)){Xo=1,zo=document.createElement("div"),zo.style.height="100vh",zo.style.position="absolute",Pr(),bi(),rt.register(he),f.isTouch=rt.isTouch,co=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),as=rt.isTouch===1,yt(Ge,"wheel",Ro),hs=[Ge,et,Gt,Qe],he.matchMedia?(f.matchMedia=function(I){var N=he.matchMedia(),k;for(k in I)N.add(k,I[k]);return N},he.addEventListener("matchMediaInit",function(){return _s()}),he.addEventListener("matchMediaRevert",function(){return Mr()}),he.addEventListener("matchMedia",function(){vo(0,1),Eo("matchMedia")}),he.matchMedia().add("(orientation: portrait)",function(){return Kn(),Kn})):console.warn("Requires GSAP 3.11.0 or later"),Kn(),yt(et,"scroll",Ro);var t=Qe.hasAttribute("style"),o=Qe.style,s=o.borderTopStyle,a=he.core.Animation.prototype,c,b;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",c=no(Qe),dt.m=Math.round(c.top+dt.sc())||0,Rt.m=Math.round(c.left+Rt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(Qe.setAttribute("style",""),Qe.removeAttribute("style")),mn=setInterval(zs,250),he.delayedCall(.5,function(){return yn=0}),yt(et,"touchcancel",Qt),yt(Qe,"touchstart",Qt),wn(yt,et,"pointerdown,touchstart,mousedown",Is),wn(yt,et,"pointerup,touchend,mouseup",Os),is=he.utils.checkPrefix("transform"),In.push(is),Io=Mt(),zn=he.delayedCall(.2,vo).pause(),Oo=[et,"visibilitychange",function(){var I=Ge.innerWidth,N=Ge.innerHeight;et.hidden?(As=I,ks=N):(As!==I||ks!==N)&&Zo()},et,"DOMContentLoaded",vo,Ge,"load",vo,Ge,"resize",Zo],xn(yt),He.forEach(function(I){return I.enable(0,1)}),b=0;b<Ue.length;b+=3)bn(mt,Ue[b],Ue[b+1]),bn(mt,Ue[b],Ue[b+2])}},f.config=function(t){"limitCallbacks"in t&&(Zn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(mn)||(mn=o)&&setInterval(zs,o),"ignoreMobileResize"in t&&(as=f.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(xn(mt)||xn(yt,t.autoRefreshEvents||"none"),dr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},f.scrollerProxy=function(t,o){var s=Bt(t),a=Ue.indexOf(s),c=Po(s);~a&&Ue.splice(a,c?6:2),o&&(c?eo.unshift(Ge,o,Qe,o,Gt,o):eo.unshift(s,o))},f.clearMatchMedia=function(t){He.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},f.isInViewport=function(t,o,s){var a=(Ht(t)?Bt(t):t).getBoundingClientRect(),c=a[s?To:Mo]*o||0;return s?a.right-c>0&&a.left+c<Ge.innerWidth:a.bottom-c>0&&a.top+c<Ge.innerHeight},f.positionInViewport=function(t,o,s){Ht(t)&&(t=Bt(t));var a=t.getBoundingClientRect(),c=a[s?To:Mo],b=o==null?c/2:o in Fn?Fn[o]*c:~o.indexOf("%")?parseFloat(o)*c/100:parseFloat(o)||0;return s?(a.left+b)/Ge.innerWidth:(a.top+b)/Ge.innerHeight},f.killAll=function(t){if(He.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=So.killAll||[];So={},o.forEach(function(s){return s()})}},f}();Ie.version="3.12.7";Ie.saveStyles=function(f){return f?cn(f).forEach(function(e){if(e&&e.style){var n=Nt.indexOf(e);n>=0&&Nt.splice(n,5),Nt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),he.core.getCache(e),ls())}}):Nt};Ie.revert=function(f,e){return _s(!f,e)};Ie.create=function(f,e){return new Ie(f,e)};Ie.refresh=function(f){return f?Zo(!0):(Io||Ie.register())&&vo(!0)};Ie.update=function(f){return++Ue.cache&&ro(f===!0?2:0)};Ie.clearScrollMemory=Cr;Ie.maxScroll=function(f,e){return Jt(f,e?Rt:dt)};Ie.getScrollFunc=function(f,e){return mo(Bt(f),e?Rt:dt)};Ie.getById=function(f){return us[f]};Ie.getAll=function(){return He.filter(function(f){return f.vars.id!=="ScrollSmoother"})};Ie.isScrolling=function(){return!!jt};Ie.snapDirectional=bs;Ie.addEventListener=function(f,e){var n=So[f]||(So[f]=[]);~n.indexOf(e)||n.push(e)};Ie.removeEventListener=function(f,e){var n=So[f],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Ie.batch=function(f,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,a=function(I,N){var k=[],M=[],g=he.delayedCall(o,function(){N(k,M),k=[],M=[]}).pause();return function(v){k.length||g.restart(!0),k.push(v.trigger),M.push(v),s<=k.length&&g.progress(1)}},c;for(c in e)t[c]=c.substr(0,2)==="on"&&Ct(e[c])&&c!=="onRefreshInit"?a(c,e[c]):e[c];return Ct(s)&&(s=s(),yt(Ie,"refresh",function(){return s=e.batchMax()})),cn(f).forEach(function(b){var I={};for(c in t)I[c]=t[c];I.trigger=b,n.push(Ie.create(I))}),n};var Ws=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},es=function f(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(rt.isTouch?" pinch-zoom":""):"none",e===Gt&&f(Qe,n)},Cn={auto:1,scroll:1},Ri=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,a=s._gsap||he.core.getCache(s),c=Mt(),b;if(!a._isScrollT||c-a._isScrollT>2e3){for(;s&&s!==Qe&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Cn[(b=Xt(s)).overflowY]||Cn[b.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==t&&!Po(s)&&(Cn[(b=Xt(s)).overflowY]||Cn[b.overflowX]),a._isScrollT=c}(a._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},Er=function(e,n,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&Ri,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&yt(et,rt.eventTypes[0],Vs,!1,!0)},onDisable:function(){return mt(et,rt.eventTypes[0],Vs,!0)}})},Ii=/(input|label|select|textarea)/i,Ys,Vs=function(e){var n=Ii.test(e.target.tagName);(n||Ys)&&(e._gsapAllow=!0,Ys=n)},Oi=function(e){bo(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,a=n.onRelease,c,b,I=Bt(e.target)||Gt,N=he.core.globals().ScrollSmoother,k=N&&N.get(),M=co&&(e.content&&Bt(e.content)||k&&e.content!==!1&&!k.smooth()&&k.content()),g=mo(I,dt),v=mo(I,Rt),C=1,w=(rt.isTouch&&Ge.visualViewport?Ge.visualViewport.scale*Ge.visualViewport.width:Ge.outerWidth)/Ge.innerWidth,H=0,$=Ct(o)?function(){return o(c)}:function(){return o||2.8},z,S,V=Er(I,e.type,!0,s),q=function(){return S=!1},D=Qt,X=Qt,Q=function(){b=Jt(I,dt),X=tn(co?1:0,b),t&&(D=tn(0,Jt(I,Rt))),z=Co},P=function(){M._gsap.y=jo(parseFloat(M._gsap.y)+g.offset)+"px",M.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(M._gsap.y)+", 0, 1)",g.offset=g.cacheID=0},ie=function(){if(S){requestAnimationFrame(q);var L=jo(c.deltaY/2),ae=X(g.v-L);if(M&&ae!==g.v+g.offset){g.offset=ae-g.v;var u=jo((parseFloat(M&&M._gsap.y)||0)-g.offset);M.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+u+", 0, 1)",M._gsap.y=u+"px",g.cacheID=Ue.cache,ro()}return!0}g.offset&&P(),S=!0},E,Y,fe,se,oe=function(){Q(),E.isActive()&&E.vars.scrollY>b&&(g()>b?E.progress(1)&&g(b):E.resetTo("scrollY",b))};return M&&he.set(M,{y:"+=0"}),e.ignoreCheck=function(B){return co&&B.type==="touchmove"&&ie()||C>1.05&&B.type!=="touchstart"||c.isGesturing||B.touches&&B.touches.length>1},e.onPress=function(){S=!1;var B=C;C=jo((Ge.visualViewport&&Ge.visualViewport.scale||1)/w),E.pause(),B!==C&&es(I,C>1.01?!0:t?!1:"x"),Y=v(),fe=g(),Q(),z=Co},e.onRelease=e.onGestureStart=function(B,L){if(g.offset&&P(),!L)se.restart(!0);else{Ue.cache++;var ae=$(),u,ge;t&&(u=v(),ge=u+ae*.05*-B.velocityX/.227,ae*=Ws(v,u,ge,Jt(I,Rt)),E.vars.scrollX=D(ge)),u=g(),ge=u+ae*.05*-B.velocityY/.227,ae*=Ws(g,u,ge,Jt(I,dt)),E.vars.scrollY=X(ge),E.invalidate().duration(ae).play(.01),(co&&E.vars.scrollY>=b||u>=b-1)&&he.to({},{onUpdate:oe,duration:ae})}a&&a(B)},e.onWheel=function(){E._ts&&E.pause(),Mt()-H>1e3&&(z=0,H=Mt())},e.onChange=function(B,L,ae,u,ge){if(Co!==z&&Q(),L&&t&&v(D(u[2]===L?Y+(B.startX-B.x):v()+L-u[1])),ae){g.offset&&P();var me=ge[2]===ae,Pe=me?fe+B.startY-B.y:g()+ae-ge[1],h=X(Pe);me&&Pe!==h&&(fe+=h-Pe),g(h)}(ae||L)&&ro()},e.onEnable=function(){es(I,t?!1:"x"),Ie.addEventListener("refresh",oe),yt(Ge,"resize",oe),g.smooth&&(g.target.style.scrollBehavior="auto",g.smooth=v.smooth=!1),V.enable()},e.onDisable=function(){es(I,!0),mt(Ge,"resize",oe),Ie.removeEventListener("refresh",oe),V.kill()},e.lockAxis=e.lockAxis!==!1,c=new rt(e),c.iOS=co,co&&!g()&&g(1),co&&he.ticker.add(Qt),se=c._dc,E=he.to(c,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Sr(g,g(),function(){return E.pause()})},onUpdate:ro,onComplete:se.vars.onComplete}),c};Ie.sort=function(f){if(Ct(f))return He.sort(f);var e=Ge.pageYOffset||0;return Ie.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+Ge.innerHeight}),He.sort(f||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Ie.observe=function(f){return new rt(f)};Ie.normalizeScroll=function(f){if(typeof f>"u")return Et;if(f===!0&&Et)return Et.enable();if(f===!1){Et&&Et.kill(),Et=f;return}var e=f instanceof rt?f:Oi(f);return Et&&Et.target===e.target&&Et.kill(),Po(e.target)&&(Et=e),e};Ie.core={_getVelocityProp:rs,_inputObserver:Er,_scrollers:Ue,_proxies:eo,bridge:{ss:function(){jt||Eo("scrollStart"),jt=Mt()},ref:function(){return Tt}}};yr()&&he.registerPlugin(Ie);var ln=function(){var f=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(N){N.preventDefault(),t(++f%e.children.length)},!1);function n(N){return e.appendChild(N.dom),N}function t(N){for(var k=0;k<e.children.length;k++)e.children[k].style.display=k===N?"block":"none";f=N}var o=(performance||Date).now(),s=o,a=0,c=n(new ln.Panel("FPS","#0ff","#002")),b=n(new ln.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var I=n(new ln.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){a++;var N=(performance||Date).now();if(b.update(N-o,200),N>=s+1e3&&(c.update(a*1e3/(N-s),100),s=N,a=0,I)){var k=performance.memory;I.update(k.usedJSHeapSize/1048576,k.jsHeapSizeLimit/1048576)}return N},update:function(){o=this.end()},domElement:e,setMode:t}};ln.Panel=function(f,e,n){var t=1/0,o=0,s=Math.round,a=s(window.devicePixelRatio||1),c=80*a,b=48*a,I=3*a,N=2*a,k=3*a,M=15*a,g=74*a,v=30*a,C=document.createElement("canvas");C.width=c,C.height=b,C.style.cssText="width:80px;height:48px";var w=C.getContext("2d");return w.font="bold "+9*a+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=n,w.fillRect(0,0,c,b),w.fillStyle=e,w.fillText(f,I,N),w.fillRect(k,M,g,v),w.fillStyle=n,w.globalAlpha=.9,w.fillRect(k,M,g,v),{dom:C,update:function(H,$){t=Math.min(t,H),o=Math.max(o,H),w.fillStyle=n,w.globalAlpha=1,w.fillRect(0,0,c,M),w.fillStyle=e,w.fillText(s(H)+" "+f+" ("+s(t)+"-"+s(o)+")",I,N),w.drawImage(C,k+a,M,g-a,v,k,M,g-a,v),w.fillRect(k+g-a,M,a,v),w.fillStyle=n,w.globalAlpha=.9,w.fillRect(k+g-a,M,a,s((1-H/$)*v))}}};const Ar={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class pn{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Li=new Xr(-1,1,1,-1,0,1);class Bi extends ho{constructor(){super(),this.setAttribute("position",new $o([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new $o([0,2,0,0,2,0],2))}}const zi=new Bi;class kr{constructor(e){this._mesh=new Ye(zi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Li)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ni extends pn{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof _o?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=os.clone(e.uniforms),this.material=new _o({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new kr(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Xs extends pn{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,c;this.inverse?(a=0,c=1):(a=1,c=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,a,4294967295),s.buffers.stencil.setClear(c),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Hi extends pn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Fi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new Oe);this._width=t.width,this._height=t.height,n=new Sn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:En}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ni(Ar),this.copyPass.material.blending=jr,this.clock=new qr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const a=this.passes[o];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),a.needsSwap){if(t){const c=this.renderer.getContext(),b=this.renderer.state.buffers.stencil;b.setFunc(c.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),b.setFunc(c.EQUAL,1,4294967295)}this.swapBuffers()}Xs!==void 0&&(a instanceof Xs?t=!0:a instanceof Hi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Oe);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Gi extends pn{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new At}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=o}}const Ui={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new At(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Ao extends pn{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new Oe(e.x,e.y):new Oe(256,256),this.clearColor=new At(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Sn(s,a,{type:En}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let k=0;k<this.nMips;k++){const M=new Sn(s,a,{type:En});M.texture.name="UnrealBloomPass.h"+k,M.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(M);const g=new Sn(s,a,{type:En});g.texture.name="UnrealBloomPass.v"+k,g.texture.generateMipmaps=!1,this.renderTargetsVertical.push(g),s=Math.round(s/2),a=Math.round(a/2)}const c=Ui;this.highPassUniforms=os.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new _o({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}),this.separableBlurMaterials=[];const b=[3,5,7,9,11];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let k=0;k<this.nMips;k++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(b[k])),this.separableBlurMaterials[k].uniforms.invSize.value=new Oe(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const I=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=I,this.bloomTintColors=[new Xe(1,1,1),new Xe(1,1,1),new Xe(1,1,1),new Xe(1,1,1),new Xe(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const N=Ar;this.copyUniforms=os.clone(N.uniforms),this.blendMaterial=new _o({uniforms:this.copyUniforms,vertexShader:N.vertexShader,fragmentShader:N.fragmentShader,blending:Kt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new At,this.oldClearAlpha=1,this.basic=new lt,this.fsQuad=new kr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new Oe(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let c=this.renderTargetBright;for(let b=0;b<this.nMips;b++)this.fsQuad.material=this.separableBlurMaterials[b],this.separableBlurMaterials[b].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[b].uniforms.direction.value=Ao.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[b]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[b].uniforms.colorTexture.value=this.renderTargetsHorizontal[b].texture,this.separableBlurMaterials[b].uniforms.direction.value=Ao.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[b]),e.clear(),this.fsQuad.render(e),c=this.renderTargetsVertical[b];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new _o({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Oe(.5,.5)},direction:{value:new Oe(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new _o({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Ao.BlurDirectionX=new Oe(1,0);Ao.BlurDirectionY=new Oe(0,1);class Ln extends Zr{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Wi=Jr;class Gn extends Js{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,a=new er(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(c){try{n(s.parse(c))}catch(b){o?o(b):console.error(b),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(h,p){if(h.nodeType!==1)return;const i=S(h);let r=!1,x=null;switch(h.nodeName){case"svg":p=v(h,p);break;case"style":s(h);break;case"g":p=v(h,p);break;case"path":p=v(h,p),h.hasAttribute("d")&&(x=o(h));break;case"rect":p=v(h,p),x=b(h);break;case"polygon":p=v(h,p),x=I(h);break;case"polyline":p=v(h,p),x=N(h);break;case"circle":p=v(h,p),x=k(h);break;case"ellipse":p=v(h,p),x=M(h);break;case"line":p=v(h,p),x=g(h);break;case"defs":r=!0;break;case"use":p=v(h,p);const A=(h.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),U=h.viewportElement.getElementById(A);U?t(U,p):console.warn("SVGLoader: 'use node' references non-existent node id: "+A);break}x&&(p.fill!==void 0&&p.fill!=="none"&&x.color.setStyle(p.fill,Wi),q(x,ge),E.push(x),x.userData={node:h,style:p});const T=h.childNodes;for(let y=0;y<T.length;y++){const A=T[y];r&&A.nodeName!=="style"&&A.nodeName!=="defs"||t(A,p)}i&&(fe.pop(),fe.length>0?ge.copy(fe[fe.length-1]):ge.identity())}function o(h){const p=new lo,i=new Oe,r=new Oe,x=new Oe;let T=!0,y=!1;const A=h.getAttribute("d");if(A===""||A==="none")return null;const U=A.match(/[a-df-z][^a-df-z]*/ig);for(let R=0,_=U.length;R<_;R++){const O=U[R],Z=O.charAt(0),d=O.slice(1).trim();T===!0&&(y=!0,T=!1);let m;switch(Z){case"M":m=w(d);for(let l=0,J=m.length;l<J;l+=2)i.x=m[l+0],i.y=m[l+1],r.x=i.x,r.y=i.y,l===0?p.moveTo(i.x,i.y):p.lineTo(i.x,i.y),l===0&&x.copy(i);break;case"H":m=w(d);for(let l=0,J=m.length;l<J;l++)i.x=m[l],r.x=i.x,r.y=i.y,p.lineTo(i.x,i.y),l===0&&y===!0&&x.copy(i);break;case"V":m=w(d);for(let l=0,J=m.length;l<J;l++)i.y=m[l],r.x=i.x,r.y=i.y,p.lineTo(i.x,i.y),l===0&&y===!0&&x.copy(i);break;case"L":m=w(d);for(let l=0,J=m.length;l<J;l+=2)i.x=m[l+0],i.y=m[l+1],r.x=i.x,r.y=i.y,p.lineTo(i.x,i.y),l===0&&y===!0&&x.copy(i);break;case"C":m=w(d);for(let l=0,J=m.length;l<J;l+=6)p.bezierCurveTo(m[l+0],m[l+1],m[l+2],m[l+3],m[l+4],m[l+5]),r.x=m[l+2],r.y=m[l+3],i.x=m[l+4],i.y=m[l+5],l===0&&y===!0&&x.copy(i);break;case"S":m=w(d);for(let l=0,J=m.length;l<J;l+=4)p.bezierCurveTo(C(i.x,r.x),C(i.y,r.y),m[l+0],m[l+1],m[l+2],m[l+3]),r.x=m[l+0],r.y=m[l+1],i.x=m[l+2],i.y=m[l+3],l===0&&y===!0&&x.copy(i);break;case"Q":m=w(d);for(let l=0,J=m.length;l<J;l+=4)p.quadraticCurveTo(m[l+0],m[l+1],m[l+2],m[l+3]),r.x=m[l+0],r.y=m[l+1],i.x=m[l+2],i.y=m[l+3],l===0&&y===!0&&x.copy(i);break;case"T":m=w(d);for(let l=0,J=m.length;l<J;l+=2){const ue=C(i.x,r.x),je=C(i.y,r.y);p.quadraticCurveTo(ue,je,m[l+0],m[l+1]),r.x=ue,r.y=je,i.x=m[l+0],i.y=m[l+1],l===0&&y===!0&&x.copy(i)}break;case"A":m=w(d,[3,4],7);for(let l=0,J=m.length;l<J;l+=7){if(m[l+5]==i.x&&m[l+6]==i.y)continue;const ue=i.clone();i.x=m[l+5],i.y=m[l+6],r.x=i.x,r.y=i.y,a(p,m[l],m[l+1],m[l+2],m[l+3],m[l+4],ue,i),l===0&&y===!0&&x.copy(i)}break;case"m":m=w(d);for(let l=0,J=m.length;l<J;l+=2)i.x+=m[l+0],i.y+=m[l+1],r.x=i.x,r.y=i.y,l===0?p.moveTo(i.x,i.y):p.lineTo(i.x,i.y),l===0&&x.copy(i);break;case"h":m=w(d);for(let l=0,J=m.length;l<J;l++)i.x+=m[l],r.x=i.x,r.y=i.y,p.lineTo(i.x,i.y),l===0&&y===!0&&x.copy(i);break;case"v":m=w(d);for(let l=0,J=m.length;l<J;l++)i.y+=m[l],r.x=i.x,r.y=i.y,p.lineTo(i.x,i.y),l===0&&y===!0&&x.copy(i);break;case"l":m=w(d);for(let l=0,J=m.length;l<J;l+=2)i.x+=m[l+0],i.y+=m[l+1],r.x=i.x,r.y=i.y,p.lineTo(i.x,i.y),l===0&&y===!0&&x.copy(i);break;case"c":m=w(d);for(let l=0,J=m.length;l<J;l+=6)p.bezierCurveTo(i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3],i.x+m[l+4],i.y+m[l+5]),r.x=i.x+m[l+2],r.y=i.y+m[l+3],i.x+=m[l+4],i.y+=m[l+5],l===0&&y===!0&&x.copy(i);break;case"s":m=w(d);for(let l=0,J=m.length;l<J;l+=4)p.bezierCurveTo(C(i.x,r.x),C(i.y,r.y),i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3]),r.x=i.x+m[l+0],r.y=i.y+m[l+1],i.x+=m[l+2],i.y+=m[l+3],l===0&&y===!0&&x.copy(i);break;case"q":m=w(d);for(let l=0,J=m.length;l<J;l+=4)p.quadraticCurveTo(i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3]),r.x=i.x+m[l+0],r.y=i.y+m[l+1],i.x+=m[l+2],i.y+=m[l+3],l===0&&y===!0&&x.copy(i);break;case"t":m=w(d);for(let l=0,J=m.length;l<J;l+=2){const ue=C(i.x,r.x),je=C(i.y,r.y);p.quadraticCurveTo(ue,je,i.x+m[l+0],i.y+m[l+1]),r.x=ue,r.y=je,i.x=i.x+m[l+0],i.y=i.y+m[l+1],l===0&&y===!0&&x.copy(i)}break;case"a":m=w(d,[3,4],7);for(let l=0,J=m.length;l<J;l+=7){if(m[l+5]==0&&m[l+6]==0)continue;const ue=i.clone();i.x+=m[l+5],i.y+=m[l+6],r.x=i.x,r.y=i.y,a(p,m[l],m[l+1],m[l+2],m[l+3],m[l+4],ue,i),l===0&&y===!0&&x.copy(i)}break;case"Z":case"z":p.currentPath.autoClose=!0,p.currentPath.curves.length>0&&(i.copy(x),p.currentPath.currentPoint.copy(i),T=!0);break;default:console.warn(O)}y=!1}return p}function s(h){if(!(!h.sheet||!h.sheet.cssRules||!h.sheet.cssRules.length))for(let p=0;p<h.sheet.cssRules.length;p++){const i=h.sheet.cssRules[p];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(x=>x.trim());for(let x=0;x<r.length;x++){const T=Object.fromEntries(Object.entries(i.style).filter(([,y])=>y!==""));Y[r[x]]=Object.assign(Y[r[x]]||{},T)}}}function a(h,p,i,r,x,T,y,A){if(p==0||i==0){h.lineTo(A.x,A.y);return}r=r*Math.PI/180,p=Math.abs(p),i=Math.abs(i);const U=(y.x-A.x)/2,R=(y.y-A.y)/2,_=Math.cos(r)*U+Math.sin(r)*R,O=-Math.sin(r)*U+Math.cos(r)*R;let Z=p*p,d=i*i;const m=_*_,l=O*O,J=m/Z+l/d;if(J>1){const W=Math.sqrt(J);p=W*p,i=W*i,Z=p*p,d=i*i}const ue=Z*l+d*m,je=(Z*d-ue)/ue;let Ze=Math.sqrt(Math.max(0,je));x===T&&(Ze=-Ze);const Fe=Ze*p*O/i,Ve=-Ze*i*_/p,xt=Math.cos(r)*Fe-Math.sin(r)*Ve+(y.x+A.x)/2,Je=Math.sin(r)*Fe+Math.cos(r)*Ve+(y.y+A.y)/2,tt=c(1,0,(_-Fe)/p,(O-Ve)/i),it=c((_-Fe)/p,(O-Ve)/i,(-_-Fe)/p,(-O-Ve)/i)%(Math.PI*2);h.currentPath.absellipse(xt,Je,p,i,tt,tt+it,T===0,r)}function c(h,p,i,r){const x=h*i+p*r,T=Math.sqrt(h*h+p*p)*Math.sqrt(i*i+r*r);let y=Math.acos(Math.max(-1,Math.min(1,x/T)));return h*r-p*i<0&&(y=-y),y}function b(h){const p=z(h.getAttribute("x")||0),i=z(h.getAttribute("y")||0),r=z(h.getAttribute("rx")||h.getAttribute("ry")||0),x=z(h.getAttribute("ry")||h.getAttribute("rx")||0),T=z(h.getAttribute("width")),y=z(h.getAttribute("height")),A=1-.551915024494,U=new lo;return U.moveTo(p+r,i),U.lineTo(p+T-r,i),(r!==0||x!==0)&&U.bezierCurveTo(p+T-r*A,i,p+T,i+x*A,p+T,i+x),U.lineTo(p+T,i+y-x),(r!==0||x!==0)&&U.bezierCurveTo(p+T,i+y-x*A,p+T-r*A,i+y,p+T-r,i+y),U.lineTo(p+r,i+y),(r!==0||x!==0)&&U.bezierCurveTo(p+r*A,i+y,p,i+y-x*A,p,i+y-x),U.lineTo(p,i+x),(r!==0||x!==0)&&U.bezierCurveTo(p,i+x*A,p+r*A,i,p+r,i),U}function I(h){function p(T,y,A){const U=z(y),R=z(A);x===0?r.moveTo(U,R):r.lineTo(U,R),x++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new lo;let x=0;return h.getAttribute("points").replace(i,p),r.currentPath.autoClose=!0,r}function N(h){function p(T,y,A){const U=z(y),R=z(A);x===0?r.moveTo(U,R):r.lineTo(U,R),x++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new lo;let x=0;return h.getAttribute("points").replace(i,p),r.currentPath.autoClose=!1,r}function k(h){const p=z(h.getAttribute("cx")||0),i=z(h.getAttribute("cy")||0),r=z(h.getAttribute("r")||0),x=new Yn;x.absarc(p,i,r,0,Math.PI*2);const T=new lo;return T.subPaths.push(x),T}function M(h){const p=z(h.getAttribute("cx")||0),i=z(h.getAttribute("cy")||0),r=z(h.getAttribute("rx")||0),x=z(h.getAttribute("ry")||0),T=new Yn;T.absellipse(p,i,r,x,0,Math.PI*2);const y=new lo;return y.subPaths.push(T),y}function g(h){const p=z(h.getAttribute("x1")||0),i=z(h.getAttribute("y1")||0),r=z(h.getAttribute("x2")||0),x=z(h.getAttribute("y2")||0),T=new lo;return T.moveTo(p,i),T.lineTo(r,x),T.currentPath.autoClose=!1,T}function v(h,p){p=Object.assign({},p);let i={};if(h.hasAttribute("class")){const y=h.getAttribute("class").split(/\s/).filter(Boolean).map(A=>A.trim());for(let A=0;A<y.length;A++)i=Object.assign(i,Y["."+y[A]])}h.hasAttribute("id")&&(i=Object.assign(i,Y["#"+h.getAttribute("id")]));function r(y,A,U){U===void 0&&(U=function(_){return _.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),_}),h.hasAttribute(y)&&(p[A]=U(h.getAttribute(y))),i[y]&&(p[A]=U(i[y])),h.style&&h.style[y]!==""&&(p[A]=U(h.style[y]))}function x(y){return Math.max(0,Math.min(1,z(y)))}function T(y){return Math.max(0,z(y))}return r("fill","fill"),r("fill-opacity","fillOpacity",x),r("fill-rule","fillRule"),r("opacity","opacity",x),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",x),r("stroke-width","strokeWidth",T),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",T),r("visibility","visibility"),p}function C(h,p){return h-(p-h)}function w(h,p,i){if(typeof h!="string")throw new TypeError("Invalid input: "+typeof h);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},x=0,T=1,y=2,A=3;let U=x,R=!0,_="",O="";const Z=[];function d(ue,je,Ze){const Fe=new SyntaxError('Unexpected character "'+ue+'" at index '+je+".");throw Fe.partial=Ze,Fe}function m(){_!==""&&(O===""?Z.push(Number(_)):Z.push(Number(_)*Math.pow(10,Number(O)))),_="",O=""}let l;const J=h.length;for(let ue=0;ue<J;ue++){if(l=h[ue],Array.isArray(p)&&p.includes(Z.length%i)&&r.FLAGS.test(l)){U=T,_=l,m();continue}if(U===x){if(r.WHITESPACE.test(l))continue;if(r.DIGIT.test(l)||r.SIGN.test(l)){U=T,_=l;continue}if(r.POINT.test(l)){U=y,_=l;continue}r.COMMA.test(l)&&(R&&d(l,ue,Z),R=!0)}if(U===T){if(r.DIGIT.test(l)){_+=l;continue}if(r.POINT.test(l)){_+=l,U=y;continue}if(r.EXP.test(l)){U=A;continue}r.SIGN.test(l)&&_.length===1&&r.SIGN.test(_[0])&&d(l,ue,Z)}if(U===y){if(r.DIGIT.test(l)){_+=l;continue}if(r.EXP.test(l)){U=A;continue}r.POINT.test(l)&&_[_.length-1]==="."&&d(l,ue,Z)}if(U===A){if(r.DIGIT.test(l)){O+=l;continue}if(r.SIGN.test(l)){if(O===""){O+=l;continue}O.length===1&&r.SIGN.test(O)&&d(l,ue,Z)}}r.WHITESPACE.test(l)?(m(),U=x,R=!1):r.COMMA.test(l)?(m(),U=x,R=!0):r.SIGN.test(l)?(m(),U=T,_=l):r.POINT.test(l)?(m(),U=y,_=l):d(l,ue,Z)}return m(),Z}const H=["mm","cm","in","pt","pc","px"],$={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function z(h){let p="px";if(typeof h=="string"||h instanceof String)for(let r=0,x=H.length;r<x;r++){const T=H[r];if(h.endsWith(T)){p=T,h=h.substring(0,h.length-T.length);break}}let i;return p==="px"&&n.defaultUnit!=="px"?i=$.in[n.defaultUnit]/n.defaultDPI:(i=$[p][n.defaultUnit],i<0&&(i=$[p].in*n.defaultDPI)),i*parseFloat(h)}function S(h){if(!(h.hasAttribute("transform")||h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))))return null;const p=V(h);return fe.length>0&&p.premultiply(fe[fe.length-1]),ge.copy(p),fe.push(p),p}function V(h){const p=new ko,i=se;if(h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))){const r=z(h.getAttribute("x")),x=z(h.getAttribute("y"));p.translate(r,x)}if(h.hasAttribute("transform")){const r=h.getAttribute("transform").split(")");for(let x=r.length-1;x>=0;x--){const T=r[x].trim();if(T==="")continue;const y=T.indexOf("("),A=T.length;if(y>0&&y<A){const U=T.slice(0,y),R=w(T.slice(y+1));switch(i.identity(),U){case"translate":if(R.length>=1){const _=R[0];let O=0;R.length>=2&&(O=R[1]),i.translate(_,O)}break;case"rotate":if(R.length>=1){let _=0,O=0,Z=0;_=R[0]*Math.PI/180,R.length>=3&&(O=R[1],Z=R[2]),oe.makeTranslation(-O,-Z),B.makeRotation(_),L.multiplyMatrices(B,oe),oe.makeTranslation(O,Z),i.multiplyMatrices(oe,L)}break;case"scale":if(R.length>=1){const _=R[0];let O=_;R.length>=2&&(O=R[1]),i.scale(_,O)}break;case"skewX":R.length===1&&i.set(1,Math.tan(R[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":R.length===1&&i.set(1,0,0,Math.tan(R[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":R.length===6&&i.set(R[0],R[2],R[4],R[1],R[3],R[5],0,0,1);break}}p.premultiply(i)}}return p}function q(h,p){function i(y){u.set(y.x,y.y,1).applyMatrix3(p),y.set(u.x,u.y)}function r(y){const A=y.xRadius,U=y.yRadius,R=Math.cos(y.aRotation),_=Math.sin(y.aRotation),O=new Xe(A*R,A*_,0),Z=new Xe(-U*_,U*R,0),d=O.applyMatrix3(p),m=Z.applyMatrix3(p),l=se.set(d.x,m.x,0,d.y,m.y,0,0,0,1),J=oe.copy(l).invert(),Ze=B.copy(J).transpose().multiply(J).elements,Fe=ie(Ze[0],Ze[1],Ze[4]),Ve=Math.sqrt(Fe.rt1),xt=Math.sqrt(Fe.rt2);if(y.xRadius=1/Ve,y.yRadius=1/xt,y.aRotation=Math.atan2(Fe.sn,Fe.cs),!((y.aEndAngle-y.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const tt=oe.set(Ve,0,0,0,xt,0,0,0,1),it=B.set(Fe.cs,Fe.sn,0,-Fe.sn,Fe.cs,0,0,0,1),W=tt.multiply(it).multiply(l),ye=j=>{const{x:Se,y:xe}=new Xe(Math.cos(j),Math.sin(j),0).applyMatrix3(W);return Math.atan2(xe,Se)};y.aStartAngle=ye(y.aStartAngle),y.aEndAngle=ye(y.aEndAngle),D(p)&&(y.aClockwise=!y.aClockwise)}}function x(y){const A=Q(p),U=P(p);y.xRadius*=A,y.yRadius*=U;const R=A>Number.EPSILON?Math.atan2(p.elements[1],p.elements[0]):Math.atan2(-p.elements[3],p.elements[4]);y.aRotation+=R,D(p)&&(y.aStartAngle*=-1,y.aEndAngle*=-1,y.aClockwise=!y.aClockwise)}const T=h.subPaths;for(let y=0,A=T.length;y<A;y++){const R=T[y].curves;for(let _=0;_<R.length;_++){const O=R[_];O.isLineCurve?(i(O.v1),i(O.v2)):O.isCubicBezierCurve?(i(O.v0),i(O.v1),i(O.v2),i(O.v3)):O.isQuadraticBezierCurve?(i(O.v0),i(O.v1),i(O.v2)):O.isEllipseCurve&&(ae.set(O.aX,O.aY),i(ae),O.aX=ae.x,O.aY=ae.y,X(p)?r(O):x(O))}}}function D(h){const p=h.elements;return p[0]*p[4]-p[1]*p[3]<0}function X(h){const p=h.elements,i=p[0]*p[3]+p[1]*p[4];if(i===0)return!1;const r=Q(h),x=P(h);return Math.abs(i/(r*x))>Number.EPSILON}function Q(h){const p=h.elements;return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function P(h){const p=h.elements;return Math.sqrt(p[3]*p[3]+p[4]*p[4])}function ie(h,p,i){let r,x,T,y,A;const U=h+i,R=h-i,_=Math.sqrt(R*R+4*p*p);return U>0?(r=.5*(U+_),A=1/r,x=h*A*i-p*A*p):U<0?x=.5*(U-_):(r=.5*_,x=-.5*_),R>0?T=R+_:T=R-_,Math.abs(T)>2*Math.abs(p)?(A=-2*p/T,y=1/Math.sqrt(1+A*A),T=A*y):Math.abs(p)===0?(T=1,y=0):(A=-.5*T/p,T=1/Math.sqrt(1+A*A),y=A*T),R>0&&(A=T,T=-y,y=A),{rt1:r,rt2:x,cs:T,sn:y}}const E=[],Y={},fe=[],se=new ko,oe=new ko,B=new ko,L=new ko,ae=new Oe,u=new Xe,ge=new ko,me=new DOMParser().parseFromString(e,"image/svg+xml");return t(me.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:E,xml:me.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(C,w,H,$){const z=C.x,S=w.x,V=H.x,q=$.x,D=C.y,X=w.y,Q=H.y,P=$.y,ie=(q-V)*(D-Q)-(P-Q)*(z-V),E=(S-z)*(D-Q)-(X-D)*(z-V),Y=(P-Q)*(S-z)-(q-V)*(X-D),fe=ie/Y,se=E/Y;if(Y===0&&ie!==0||fe<=0||fe>=1||se<0||se>1)return null;if(ie===0&&Y===0){for(let oe=0;oe<2;oe++)if(a(oe===0?H:$,C,w),o.loc==t.ORIGIN){const B=oe===0?H:$;return{x:B.x,y:B.y,t:o.t}}else if(o.loc==t.BETWEEN){const B=+(z+o.t*(S-z)).toPrecision(10),L=+(D+o.t*(X-D)).toPrecision(10);return{x:B,y:L,t:o.t}}return null}else{for(let L=0;L<2;L++)if(a(L===0?H:$,C,w),o.loc==t.ORIGIN){const ae=L===0?H:$;return{x:ae.x,y:ae.y,t:o.t}}const oe=+(z+fe*(S-z)).toPrecision(10),B=+(D+fe*(X-D)).toPrecision(10);return{x:oe,y:B,t:fe}}}function a(C,w,H){const $=H.x-w.x,z=H.y-w.y,S=C.x-w.x,V=C.y-w.y,q=$*V-S*z;if(C.x===w.x&&C.y===w.y){o.loc=t.ORIGIN,o.t=0;return}if(C.x===H.x&&C.y===H.y){o.loc=t.DESTINATION,o.t=1;return}if(q<-Number.EPSILON){o.loc=t.LEFT;return}if(q>Number.EPSILON){o.loc=t.RIGHT;return}if($*S<0||z*V<0){o.loc=t.BEHIND;return}if(Math.sqrt($*$+z*z)<Math.sqrt(S*S+V*V)){o.loc=t.BEYOND;return}let D;$!==0?D=S/$:D=V/z,o.loc=t.BETWEEN,o.t=D}function c(C,w){const H=[],$=[];for(let z=1;z<C.length;z++){const S=C[z-1],V=C[z];for(let q=1;q<w.length;q++){const D=w[q-1],X=w[q],Q=s(S,V,D,X);Q!==null&&H.find(P=>P.t<=Q.t+Number.EPSILON&&P.t>=Q.t-Number.EPSILON)===void 0&&(H.push(Q),$.push(new Oe(Q.x,Q.y)))}}return $}function b(C,w,H){const $=new Oe;w.getCenter($);const z=[];return H.forEach(S=>{S.boundingBox.containsPoint($)&&c(C,S.points).forEach(q=>{z.push({identifier:S.identifier,isCW:S.isCW,point:q})})}),z.sort((S,V)=>S.point.x-V.point.x),z}function I(C,w,H,$,z){(z==null||z==="")&&(z="nonzero");const S=new Oe;C.boundingBox.getCenter(S);const V=[new Oe(H,S.y),new Oe($,S.y)],q=b(V,C.boundingBox,w);q.sort((E,Y)=>E.point.x-Y.point.x);const D=[],X=[];q.forEach(E=>{E.identifier===C.identifier?D.push(E):X.push(E)});const Q=D[0].point.x,P=[];let ie=0;for(;ie<X.length&&X[ie].point.x<Q;)P.length>0&&P[P.length-1]===X[ie].identifier?P.pop():P.push(X[ie].identifier),ie++;if(P.push(C.identifier),z==="evenodd"){const E=P.length%2===0,Y=P[P.length-2];return{identifier:C.identifier,isHole:E,for:Y}}else if(z==="nonzero"){let E=!0,Y=null,fe=null;for(let se=0;se<P.length;se++){const oe=P[se];E?(fe=w[oe].isCW,E=!1,Y=oe):fe!==w[oe].isCW&&(fe=w[oe].isCW,E=!0)}return{identifier:C.identifier,isHole:E,for:Y}}else console.warn('fill-rule: "'+z+'" is currently not implemented.')}let N=999999999,k=-999999999,M=e.subPaths.map(C=>{const w=C.getPoints();let H=-999999999,$=999999999,z=-999999999,S=999999999;for(let V=0;V<w.length;V++){const q=w[V];q.y>H&&(H=q.y),q.y<$&&($=q.y),q.x>z&&(z=q.x),q.x<S&&(S=q.x)}return k<=z&&(k=z+1),N>=S&&(N=S-1),{curves:C.curves,points:w,isCW:Qr.isClockWise(w),identifier:-1,boundingBox:new $r(new Oe(S,$),new Oe(z,H))}});M=M.filter(C=>C.points.length>1);for(let C=0;C<M.length;C++)M[C].identifier=C;const g=M.map(C=>I(C,M,N,k,e.userData?e.userData.style.fillRule:void 0)),v=[];return M.forEach(C=>{if(!g[C.identifier].isHole){const H=new Kr;H.curves=C.curves,g.filter(z=>z.isHole&&z.for===C.identifier).forEach(z=>{const S=M[z.identifier],V=new Yn;V.curves=S.curves,H.holes.push(V)}),v.push(H)}}),v}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],a=[],c=[];if(Gn.pointsToStrokeWithBuffers(e,n,t,o,s,a,c)===0)return null;const b=new ho;return b.setAttribute("position",new $o(s,3)),b.setAttribute("normal",new $o(a,3)),b.setAttribute("uv",new $o(c,2)),b}static pointsToStrokeWithBuffers(e,n,t,o,s,a,c,b){const I=new Oe,N=new Oe,k=new Oe,M=new Oe,g=new Oe,v=new Oe,C=new Oe,w=new Oe,H=new Oe,$=new Oe,z=new Oe,S=new Oe,V=new Oe,q=new Oe,D=new Oe,X=new Oe,Q=new Oe;t=t!==void 0?t:12,o=o!==void 0?o:.001,b=b!==void 0?b:0,e=R(e);const P=e.length;if(P<2)return 0;const ie=e[0].equals(e[P-1]);let E,Y=e[0],fe;const se=n.strokeWidth/2,oe=1/(P-1);let B=0,L,ae,u,ge,me=!1,Pe=0,h=b*3,p=b*2;i(e[0],e[1],I).multiplyScalar(se),w.copy(e[0]).sub(I),H.copy(e[0]).add(I),$.copy(w),z.copy(H);for(let _=1;_<P;_++){E=e[_],_===P-1?ie?fe=e[1]:fe=void 0:fe=e[_+1];const O=I;if(i(Y,E,O),k.copy(O).multiplyScalar(se),S.copy(E).sub(k),V.copy(E).add(k),L=B+oe,ae=!1,fe!==void 0){i(E,fe,N),k.copy(N).multiplyScalar(se),q.copy(E).sub(k),D.copy(E).add(k),u=!0,k.subVectors(fe,Y),O.dot(k)<0&&(u=!1),_===1&&(me=u),k.subVectors(fe,E),k.normalize();const Z=Math.abs(O.dot(k));if(Z>Number.EPSILON){const d=se/Z;k.multiplyScalar(-d),M.subVectors(E,Y),g.copy(M).setLength(d).add(k),X.copy(g).negate();const m=g.length(),l=M.length();M.divideScalar(l),v.subVectors(fe,E);const J=v.length();switch(v.divideScalar(J),M.dot(X)<l&&v.dot(X)<J&&(ae=!0),Q.copy(g).add(E),X.add(E),ge=!1,ae?u?(D.copy(X),V.copy(X)):(q.copy(X),S.copy(X)):T(),n.strokeLineJoin){case"bevel":y(u,ae,L);break;case"round":A(u,ae),u?x(E,S,q,L,0):x(E,D,V,L,1);break;case"miter":case"miter-clip":default:const ue=se*n.strokeMiterLimit/m;if(ue<1)if(n.strokeLineJoin!=="miter-clip"){y(u,ae,L);break}else A(u,ae),u?(v.subVectors(Q,S).multiplyScalar(ue).add(S),C.subVectors(Q,q).multiplyScalar(ue).add(q),r(S,L,0),r(v,L,0),r(E,L,.5),r(E,L,.5),r(v,L,0),r(C,L,0),r(E,L,.5),r(C,L,0),r(q,L,0)):(v.subVectors(Q,V).multiplyScalar(ue).add(V),C.subVectors(Q,D).multiplyScalar(ue).add(D),r(V,L,1),r(v,L,1),r(E,L,.5),r(E,L,.5),r(v,L,1),r(C,L,1),r(E,L,.5),r(C,L,1),r(D,L,1));else ae?(u?(r(H,B,1),r(w,B,0),r(Q,L,0),r(H,B,1),r(Q,L,0),r(X,L,1)):(r(H,B,1),r(w,B,0),r(Q,L,1),r(w,B,0),r(X,L,0),r(Q,L,1)),u?q.copy(Q):D.copy(Q)):u?(r(S,L,0),r(Q,L,0),r(E,L,.5),r(E,L,.5),r(Q,L,0),r(q,L,0)):(r(V,L,1),r(Q,L,1),r(E,L,.5),r(E,L,.5),r(Q,L,1),r(D,L,1)),ge=!0;break}}else T()}else T();!ie&&_===P-1&&U(e[0],$,z,u,!0,B),B=L,Y=E,w.copy(q),H.copy(D)}if(!ie)U(E,S,V,u,!1,L);else if(ae&&s){let _=Q,O=X;me!==u&&(_=X,O=Q),u?(ge||me)&&(O.toArray(s,0*3),O.toArray(s,3*3),ge&&_.toArray(s,1*3)):(ge||!me)&&(O.toArray(s,1*3),O.toArray(s,3*3),ge&&_.toArray(s,0*3))}return Pe;function i(_,O,Z){return Z.subVectors(O,_),Z.set(-Z.y,Z.x).normalize()}function r(_,O,Z){s&&(s[h]=_.x,s[h+1]=_.y,s[h+2]=0,a&&(a[h]=0,a[h+1]=0,a[h+2]=1),h+=3,c&&(c[p]=O,c[p+1]=Z,p+=2)),Pe+=3}function x(_,O,Z,d,m){I.copy(O).sub(_).normalize(),N.copy(Z).sub(_).normalize();let l=Math.PI;const J=I.dot(N);Math.abs(J)<1&&(l=Math.abs(Math.acos(J))),l/=t,k.copy(O);for(let ue=0,je=t-1;ue<je;ue++)M.copy(k).rotateAround(_,l),r(k,d,m),r(M,d,m),r(_,d,.5),k.copy(M);r(M,d,m),r(Z,d,m),r(_,d,.5)}function T(){r(H,B,1),r(w,B,0),r(S,L,0),r(H,B,1),r(S,L,0),r(V,L,1)}function y(_,O,Z){O?_?(r(H,B,1),r(w,B,0),r(S,L,0),r(H,B,1),r(S,L,0),r(X,L,1),r(S,Z,0),r(q,Z,0),r(X,Z,.5)):(r(H,B,1),r(w,B,0),r(V,L,1),r(w,B,0),r(X,L,0),r(V,L,1),r(V,Z,1),r(X,Z,0),r(D,Z,1)):_?(r(S,Z,0),r(q,Z,0),r(E,Z,.5)):(r(V,Z,1),r(D,Z,0),r(E,Z,.5))}function A(_,O){O&&(_?(r(H,B,1),r(w,B,0),r(S,L,0),r(H,B,1),r(S,L,0),r(X,L,1),r(S,B,0),r(E,L,.5),r(X,L,1),r(E,L,.5),r(q,B,0),r(X,L,1)):(r(H,B,1),r(w,B,0),r(V,L,1),r(w,B,0),r(X,L,0),r(V,L,1),r(V,B,1),r(X,L,0),r(E,L,.5),r(E,L,.5),r(X,L,0),r(D,B,1)))}function U(_,O,Z,d,m,l){switch(n.strokeLineCap){case"round":m?x(_,Z,O,l,.5):x(_,O,Z,l,.5);break;case"square":if(m)I.subVectors(O,_),N.set(I.y,-I.x),k.addVectors(I,N).add(_),M.subVectors(N,I).add(_),d?(k.toArray(s,1*3),M.toArray(s,0*3),M.toArray(s,3*3)):(k.toArray(s,1*3),c[3*2+1]===1?M.toArray(s,3*3):k.toArray(s,3*3),M.toArray(s,0*3));else{I.subVectors(Z,_),N.set(I.y,-I.x),k.addVectors(I,N).add(_),M.subVectors(N,I).add(_);const J=s.length;d?(k.toArray(s,J-1*3),M.toArray(s,J-2*3),M.toArray(s,J-4*3)):(M.toArray(s,J-2*3),k.toArray(s,J-1*3),M.toArray(s,J-4*3))}break}}function R(_){let O=!1;for(let d=1,m=_.length-1;d<m;d++)if(_[d].distanceTo(_[d+1])<o){O=!0;break}if(!O)return _;const Z=[];Z.push(_[0]);for(let d=1,m=_.length-1;d<m;d++)_[d].distanceTo(_[d+1])>=o&&Z.push(_[d]);return Z.push(_[_.length-1]),Z}}}function Yi(f,e,n,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=n,a=8,c=24,b=.075,I=200;let N,k=[],M=[],g=[],v=[];const C=(S,V,q,D)=>{const X=new Ho(S,S,S),Q=new Qo(X),P=[new zt({color:16711680,transparent:!0,opacity:D.opacity,blending:Kt}),new zt({color:65280,transparent:!0,opacity:D.opacity,blending:Kt}),new zt({color:255,transparent:!0,opacity:D.opacity,blending:Kt}),new zt({color:65535,transparent:!0,opacity:D.opacity,blending:Kt}),new zt({color:16711935,transparent:!0,opacity:D.opacity,blending:Kt}),new zt({color:16776960,transparent:!0,opacity:D.opacity,blending:Kt})],ie=new Ft,E=Q.getAttribute("position").array,Y=[];for(let oe=0;oe<E.length/3;oe+=2)Y.push(oe,oe+1);const fe=Array(6).fill(null).map(()=>new ho),se=Array(6).fill(null).map(()=>[]);for(let oe=0;oe<Y.length/2;oe++){const B=oe%6;se[B].push(Y[oe*2],Y[oe*2+1])}return fe.forEach((oe,B)=>{oe.setIndex(se[B]),oe.setAttribute("position",Q.getAttribute("position"));const L=new gt(oe,P[B]);ie.add(L)}),ie.position.z=V,ie.rotation.z=q,ie};if((()=>{const q=.9/(c-1);for(let Y=0;Y<c;Y++)M[Y]=new zt({transparent:!0,opacity:1-Y*q});if(N=new Ft,!N){console.error("introGroup failed to initialize");return}for(let Y=0;Y<c;Y++){const fe=o-Y*a,se=C(fe,0,0,M[Y]),oe=se.children.map(B=>B.material);v.push(oe.map(B=>({material:B,originalColor:B.color.clone()}))),N.add(se)}N.position.z=s,f.add(N),k.push(N),g=M.map(Y=>Y.opacity);const D=ze.timeline({repeat:-1});D.to(N.rotation,{x:Ke.degToRad(360),duration:12,ease:"none"},0),D.to(N.rotation,{y:Ke.degToRad(360),duration:10,ease:"none"},0),D.to(N.rotation,{z:Ke.degToRad(360),duration:14,ease:"none"},0);let X=-1,Q=0;const P=b*1e3,ie=c*P,E=Y=>{const fe=Y%ie/P,se=Math.floor(fe)%c;X!==-1&&Y-Q>=P&&(v[X].forEach(L=>{L.material.opacity=g[X],L.material.color.copy(L.originalColor)}),X=-1),X===-1&&se!==X&&(X=se,Q=Y,v[X].forEach(B=>{B.material.opacity=1,B.material.color.set(1,1,1)})),requestAnimationFrame(E)};requestAnimationFrame(E)})(),e.value){const S=H(e.value);f.add(S)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:k};function H(S){const V=new Ft,q=$(S);q.position.set(0,-36,0),V.add(q),z(X=>{V.add(X),ze.fromTo(q.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const Q=X.children.find(P=>P instanceof Ye&&P!==X.children[0]);if(Q){const P=Q.position.y;ze.to(Q.position,{y:P+3,duration:1,ease:"easeOut",onComplete:()=>{Q.position.y=P},repeat:-1})}}),V.position.x=0,V.position.y=-240;const D=s-c*a;return V.position.z=D+I,V}function $(S){const V=new Ln("SCROLL TO CONTINUE",{font:S,size:8,depth:0,curveSegments:12,bevelEnabled:!1});V.computeBoundingBox(),V.center();const q=new lt({color:16777215,transparent:!0,opacity:1});return new Ye(V,q)}function z(S){new Gn().load("/3D/mouse.svg",q=>{const D=q.paths;let X=null,Q=null,P=new Ft;if(D.forEach((ie,E)=>{Gn.createShapes(ie).forEach(fe=>{const se=new ei(fe);se.computeBoundingBox();const oe=new lt({color:16777215,transparent:!0,opacity:1,side:Yt}),B=new Ye(se,oe);B.scale.set(.05,.05,1),E===0?X=B:E===1&&(Q=B)})}),X&&Q){P.add(X),P.add(Q);const E=(X.geometry.boundingBox.max.x-X.geometry.boundingBox.min.x)*X.scale.x/2;P.position.x=-E,P.rotation.x=Math.PI,S(P)}})}}function Vi(f,e,n,t,o,s,a,c){const b=fn(),I=tr(),{CUBE_SIZE:N,CUBE_SPACING:k,FIRST_CUBE_Z:M}=e,g=M-(n.length+1)*k,v=65535,C=16711935,w=(v>>16&255)/255,H=(v>>8&255)/255,$=(v&255)/255,z=(C>>16&255)/255,S=(C>>8&255)/255,V=(C&255)/255,q=Ke.degToRad(15),D=1e3,X=.5,Q=65280,P=80,ie=1,E=15,Y=.1,fe="ENTER TO LEARN MORE",se=I.isMobile?1:.5,oe=40,B=.125,L=100,ae=8,u=I.isMobile?1.5:2,ge=I.isMobile?2:3.5,me=1;let Pe=[];Pe.length=0;let h=[],p=!1,i=new ti,r=new Oe,x=null,T=null,y=null,A=!1,U=null;const R=new Map,_=new Map,O=new Map,Z=(W,ye,j,Se,xe,be,ke)=>{const te=new Ft;te.name="group",te.position.z=j,te.rotation.z=Se,te.userData.isActive=!1,te.userData.cubeIndex=ke;const _e=new Ho(ye,ye,ye),le=new Qo(_e),Te=new zt({color:new At(v),transparent:!0,opacity:0}),We=new gt(le,Te);We.geometry.computeBoundingSphere(),te.add(We);let $e="right";const Ne=ye/2,bt=()=>{const ee=b.isMobile?2:1,pe=25*ee,Ae=40*ee,K=new Ps(Ae,75),ce=new Qo(K),G=new zt({color:new At(v),transparent:!0,opacity:0,visible:!0}),F=new gt(ce,G);F.name="portal",F.userData.isPortal=!0,F.userData.isAnimating=!1,F.geometry.computeBoundingSphere();const De=80*ee,ne=new ao(De,De),Me=new lt({visible:!1,side:Yt}),re=new Ye(ne,Me);re.userData.isPortalHitbox=!0,re.userData.portal=F,re.geometry.computeBoundingSphere();const ve=new Ft,de=ie*ee,Ee=E*ee,Ce=new ao(de,Ee),we=(pe+Ae)/2;for(let ot=0;ot<P;ot++){const Ot=new lt({color:new At(C),transparent:!0,opacity:0,visible:!1,side:Yt}),st=new Ye(Ce,Ot),at=ot/P*Math.PI*2;st.position.set(Math.cos(at)*we,Math.sin(at)*we,0),st.rotation.z=at+Math.PI/2,st.userData.baseOpacity=.01,st.userData.index=ot,st.geometry.computeBoundingSphere(),ve.add(st)}F.userData.pulsesGroup=ve;const Re=2*ee,qe=25;for(let ot=1;ot<qe;ot++){const Ot=new Ps(Ae,75),st=new Qo(Ot),at=Ke.lerp(.125,.1,ot/(qe-1)),to=new zt({color:new At(v),transparent:!0,opacity:0}),vt=new gt(st,to);vt.userData.isPortal=!0,vt.userData.maxOpacity=at,vt.position.z=-ot*Re,vt.geometry.computeBoundingSphere(),F.add(vt)}F.userData.maxOpacity=.125;let Le=null;if(c.value){const ot=3*ee,Ot=new Ln(fe,{font:c.value,size:ot,depth:0,curveSegments:12,bevelEnabled:!1});Ot.computeBoundingBox(),Ot.center();const st=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),at=new Ye(Ot,st);at.visible=!1,at.userData.isVisible=!1,at.userData.isExploreText=!0,at.userData.skipTextMeshes=!0;const to=-45*ee;at.position.set(0,to,0),at.name="textMesh",F.add(at),F.userData.exploreText=at;const vt=Ot.boundingBox,Dr=(vt.max.x-vt.min.x+10)*ee,Rr=(vt.max.y-vt.min.y+10)*ee,Ir=new ao(Dr,Rr),Or=new lt({transparent:!0,opacity:0,side:Yt,visible:!1});Le=new Ye(Ir,Or),Le.position.set(0,to,0),Le.userData.isExploreTextHitbox=!0,Le.userData.portal=F,Le.geometry.computeBoundingSphere(),Le.name="textHitbox",F.add(Le),F.userData.exploreTextHitbox=Le;const Lr=5,Wn=new Ln(W.title,{font:c.value,size:Lr,depth:0,curveSegments:12,bevelEnabled:!1});Wn.computeBoundingBox(),Wn.center();const Br=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),xo=new Ye(Wn,Br);xo.visible=!1,xo.userData.isVisible=!1,xo.userData.isTitleText=!0,xo.userData.skipTextMeshes=!0;const zr=b.isMobile?b.orientation==="portrait"?100:106:60;xo.position.set(0,zr,0),F.add(xo),F.userData.titleText=xo}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const Be=new Ft;Be.name="closeGroup",Be.position.set(b.isMobile?Ae-10:Ae,Ae,2);const ut=new ao(12,I.isMobile?1:.5),Zt=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),yo=new Ye(ut,Zt);yo.rotation.z=Math.PI/4;const ft=new Ye(ut,Zt);ft.rotation.z=-Math.PI/4,Be.add(yo,ft);const nt=new ao(15*ee,15*ee),Wt=new lt({side:Yt,visible:!1}),io=new Ye(nt,Wt);switch(io.userData.isCloseHitbox=!0,io.geometry.computeBoundingSphere(),io.renderOrder=2,Be.add(io),$e){case"left":F.position.set(-Ne,0,0),F.rotation.y=Math.PI/2,re.position.set(-Ne,0,0),re.rotation.y=Math.PI/2,Se>=Ke.degToRad(120)&&(F.rotation.z=Math.PI),ve.children.forEach(ot=>ot.position.x+=Y);break;case"top":F.position.set(0,-Ne,0),F.rotation.x=-Math.PI/2,F.rotation.z=-Math.PI/2,re.position.set(0,-Ne,0),re.rotation.x=Math.PI/2,Se>=Ke.degToRad(100)&&Se>=Ke.degToRad(180)&&(F.rotation.z=Math.PI/2),ve.children.forEach(ot=>ot.position.y+=Y);break;case"right":F.position.set(Ne,0,0),F.rotation.y=-Math.PI/2,re.position.set(Ne,0,0),re.rotation.y=-Math.PI/2,Se>=Ke.degToRad(120)&&(F.rotation.z=Math.PI),ve.children.forEach(ot=>ot.position.x+=Y);break;case"bottom":F.position.set(0,Ne,0),F.rotation.x=Math.PI/2,F.rotation.z=-Math.PI/2,re.position.set(0,Ne,0),re.rotation.x=Math.PI/2,ve.children.forEach(ot=>ot.position.y+=Y);break}F.add(Be),F.userData.closeButton=Be,Be.updateMatrixWorld(!0),F.add(ve),te.add(F),te.add(re),te.userData.closeButton=Be,F.updateMatrixWorld(!0),ve.updateMatrixWorld(!0),Be.updateMatrixWorld(!0),R.set(te,[]),_.set(te,0),O.set(te,0)},_t=ee=>{(ee instanceof gt||ee instanceof Ye)&&ee.geometry&&ee.geometry.computeBoundingSphere(),te.add(ee)};if(xe&&s.showKeyarts){switch(["left","top","right","bottom"].includes(be)?be:"left"){case"left":$e="right";break;case"top":$e="bottom";break;case"right":$e="left";break;case"bottom":$e="top";break}const pe=a.get(xe);if(pe){const Ae=new ao(ye-1,ye-1),K=new lt({map:pe,transparent:!0,opacity:0,blending:Kt,side:Yt}),ce=new Ye(Ae,K);switch(ce.userData.isLoaded=!0,be){case"left":ce.position.set(-Ne,0,0),Se>=Ke.degToRad(120)?(ce.rotation.y=Math.PI/2,ce.rotation.z=-Math.PI):ce.rotation.y=Math.PI/2;break;case"top":ce.position.set(0,-Ne,0),ce.rotation.x=-Math.PI/2,ce.rotation.z=-Math.PI/2;break;case"right":ce.position.set(Ne,0,0),Se>=Ke.degToRad(120)?(ce.rotation.y=-Math.PI/2,ce.rotation.z=-Math.PI):ce.rotation.y=-Math.PI/2;break;case"bottom":ce.position.set(0,Ne,0),Se>=Ke.degToRad(180)?Se>=Ke.degToRad(220)?(ce.rotation.x=Math.PI/2,ce.rotation.z=Math.PI/2):(ce.rotation.x=-Math.PI/2,ce.rotation.z=Math.PI/2):(ce.rotation.x=Math.PI/2,ce.rotation.z=-Math.PI/2);break}ce.geometry.computeBoundingSphere(),_t(ce),bt()}else console.warn(`Keyart texture not preloaded for ${W.title}: ${xe}`),bt()}else bt();te.userData.portalLocation=$e;{const ee=(De,ne,Me,re)=>{const ve=new ao(ye-1,ye-1),de={map:De,transparent:!0,opacity:0,blending:Kt,side:Yt,depthWrite:!1};re&&(de.color=re);const Ee=new lt(de),Ce=new Ye(ve,Ee);Ce.position.copy(ne),Me.x&&(Ce.rotation.x=Me.x),Me.y&&(Ce.rotation.y=Me.y),Ce.userData.isGridPlane=!0,Ce.geometry.computeBoundingSphere(),_t(Ce)},pe=a.get(t),Ae=a.get(o),K=["left","top","right","bottom"],G=[xe&&s.showKeyarts?be||"left":null,$e].filter(Boolean),F=K.filter(De=>!G.includes(De));if(pe)switch(ee(pe,new Xe(0,0,-ye/2-1),{y:0}),ee(pe,new Xe(0,0,ye/2+1),{y:0},new At(16744448)),F[0]){case"left":ee(pe,new Xe(-Ne,0,0),{y:-Math.PI/2},new At(255));break;case"top":ee(pe,new Xe(0,Ne,0),{x:Math.PI/2},new At(255));break;case"right":ee(pe,new Xe(Ne,0,0),{y:Math.PI/2},new At(255));break;case"bottom":ee(pe,new Xe(0,-Ne,0),{x:-Math.PI/2},new At(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(Ae)switch(F[1]){case"left":ee(Ae,new Xe(-Ne,0,0),{y:-Math.PI/2});break;case"top":ee(Ae,new Xe(0,Ne,0),{x:Math.PI/2});break;case"right":ee(Ae,new Xe(Ne,0,0),{y:Math.PI/2});break;case"bottom":ee(Ae,new Xe(0,-Ne,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}te.children.forEach(ee=>{ee.updateMatrixWorld(!0),ee instanceof Ft&&ee.children.forEach(pe=>{pe.updateMatrixWorld(!0)})}),te.updateMatrixWorld(!0);const ht=new or().setFromObject(te),It=new nr;return ht.getBoundingSphere(It),te.boundingSphere=It,te},d=new oi,m=(W,ye,j,Se,xe)=>{if(!c.value){console.warn("Font not available; skipping text creation for:",W);const ht=new ho,It=new lt({visible:!1});return new Ye(ht,It)}const be=new Ln(W,{font:c.value,size:xe,depth:0,curveSegments:12,bevelEnabled:!1});be.computeBoundingBox(),be.center();const ke=new lt({color:16777215,transparent:!0,opacity:0,side:Yt}),te=new Ye(be,ke);te.position.set(ye,j,Se);const _e=be.boundingBox,le=_e.max.x-_e.min.x,Te=_e.max.y-_e.min.y,We=le+8,$e=Te+4,Ne=new ao(We,$e),bt=new lt({color:0,transparent:!0,opacity:0,side:Yt}),_t=new Ye(Ne,bt);return _t.position.set(ye,j,Se-1),f.add(_t),f.add(te),te.userData.backgroundPlane=_t,te},l=()=>{const W=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let ye=0;W.forEach((j,Se)=>{const xe=M-(Se+1)*k,be=(Se+1)*q,ke=Z(j,N,xe,be,j.keyart,j.keyartLocation,ye);f.add(ke),Pe.push(ke),ye++,m(j.title,0,j.size-15,M+90-(Se+1)*k,j.size)}),f.traverse(j=>{var Se;j instanceof Ye&&((Se=j.geometry)==null?void 0:Se.type)==="TextGeometry"&&!j.userData.skipTextMeshes&&h.push(j)})},J=()=>p?Promise.resolve({projectCubes:Pe,updateCubeColors:Ve,maxZ:g}):(l(),p=!0,Promise.resolve({projectCubes:Pe,updateCubeColors:Ve,maxZ:g})),ue=W=>{if(W.userData.isAnimating)return;W.userData.isAnimating=!0;const ye=W.userData.pulsesGroup;if(!ye){console.warn("Pulses group not found in portal.userData");return}const j=ye.children,Se=j.length,xe=ze.timeline({repeat:-1,defaults:{ease:"none"}}),be={value:0};xe.to(be,{value:1,duration:1.5,onUpdate:()=>{j.forEach(te=>{const _e=te.material;if(_e.visible){const le=(te.userData.index/Se+be.value)%1,We=(Math.sin(le*Math.PI*2)+1)/2;_e.opacity=.01+(1-.01)*Math.pow(We,4)}})}}),W.userData.animationTimeline=xe},je=W=>{if(!W.userData.isAnimating)return;W.userData.isAnimating=!1;const ye=W.userData.pulsesGroup;if(!ye){console.warn("Pulses group not found in portal.userData");return}W.userData.animationTimeline&&(W.userData.animationTimeline.kill(),delete W.userData.animationTimeline),ye.children.forEach(j=>{const Se=j.material;Se.opacity=0})},Ze=(W,ye)=>{let j;const Se=(O.get(W)||0)+1;O.set(W,Se),Se%ae===0?j=new ni(u,ge,12,1):j=new Ho(se,se,se);const xe=new lt({color:16777215,transparent:!0,opacity:0}),be=new Ye(j,xe);be.position.set(0,0,0);const ke=ye.position.clone(),te=ke.clone().normalize(),_e=ke.length()+L;if(Se%ae===0){const Te=be.position.clone().add(te);be.lookAt(Te),be.rotateX(Math.PI/2)}W.add(be),ze.to(xe,{opacity:.5,duration:me,ease:"power2.in",overwrite:"auto"});const le=R.get(W)||[];le.push({mesh:be,direction:te,distanceTraveled:0,totalDistance:_e}),R.set(W,le)},Fe=W=>{(R.get(W)||[]).forEach(j=>{W.remove(j.mesh),j.mesh.geometry.dispose(),j.mesh.material.dispose()}),R.set(W,[])},Ve=W=>{d.setFromProjectionMatrix(W.projectionMatrix.clone().multiply(W.matrixWorldInverse));const ye=W.position.z;Pe.forEach((j,Se)=>{const xe=j.boundingSphere;if(xe){const _e=xe.clone();if(_e.radius*=1.5,!d.intersectsSphere(_e))return}else console.warn(`Cube ${Se} has no boundingSphere`);const be=j.position.z,ke=Math.abs(ye-be);let te=0;ke<=D&&(te=1-ke/D),j.userData.isActive=te>=X,j.children.forEach(_e=>{if(_e instanceof gt&&!_e.userData.isPortal&&!_e.userData.isPortalHitbox){const le=_e.material;if(ke<=D){const Te=Ke.lerp(w,z,te),We=Ke.lerp(H,S,te),$e=Ke.lerp($,V,te);le.color.set(Te,We,$e),le.opacity=Math.min(1,te*2)}else le.opacity=0}else if(_e instanceof gt&&_e.userData.isPortal){_e.children.forEach(Te=>{if(Te instanceof Ye&&Te.userData.isExploreText){const We=Te.material;if(Te===_e.userData.titleText&&A)return;if(ke<=D){const $e=1-ke/D;We.opacity=Math.min(1,$e*2),Te.visible=!0}else We.opacity=0,Te.visible=!1}});const le=_e.userData.pulsesGroup;te>.1?le&&le.children.forEach(Te=>{Te instanceof Ye&&(Te.material.visible=!0,!_e.userData.animationStarted&&s.showPortalPulses&&(ue(_e),_e.userData.animationStarted=!0))}):te<=.1&&_e.userData.animationStarted&&(le&&le.children.forEach(Te=>{Te instanceof Ye&&(Te.material.visible=!1)}),je(_e),delete _e.userData.animationStarted)}else if(_e instanceof Ye&&!_e.userData.isPortalHitbox&&!_e.userData.isCloseHitbox){const le=_e.material;if(_e.userData.isLoaded||_e.userData.isGridPlane)if(ke<=D){const Te=1-ke/D;le.opacity=Math.min(.8,Te*2),_e.visible=!0}else le.opacity=0,_e.visible=!1}})}),h.forEach(j=>{if(!d.intersectsObject(j))return;const Se=j.material,xe=j.userData.backgroundPlane,be=xe==null?void 0:xe.material,ke=j.position.z,te=Math.abs(ye-ke+120);if(A){Se.opacity=0,be&&(be.opacity=0);return}if(te<=D){const _e=1-te/D,le=Math.min(1,_e*2);Se.opacity=le,be&&(be.opacity=le*.8)}else Se.opacity=0,be&&(be.opacity=0)})},xt=(W,ye)=>{const j=performance.now()/1e3,Se=W.position.z;Pe.forEach(xe=>{const be=xe.position.z;if(Math.abs(Se-be+90)<=D&&!A){const te=_.get(xe)||0;if(j-te>=B){const Te=xe.children.find(We=>We instanceof gt&&We.userData.isPortal);Te&&(Ze(xe,Te),_.set(xe,j))}const le=(R.get(xe)||[]).filter(Te=>{if(Te.distanceTraveled+=oe*ye,Te.mesh.position.copy(Te.direction.clone().multiplyScalar(Te.distanceTraveled)),(Te.totalDistance-Te.distanceTraveled)/oe<=me&&!Te.isFadingOut){Te.isFadingOut=!0;const Ne=Te.mesh.material;ze.to(Ne,{opacity:0,duration:me,ease:"power2.out",overwrite:"auto"})}return Te.distanceTraveled>=Te.totalDistance?(xe.remove(Te.mesh),Te.mesh.geometry.dispose(),Te.mesh.material.dispose(),!1):!0});R.set(xe,le)}else Fe(xe)})},Je=W=>{const ye=[W,...W.children.filter(xe=>xe instanceof gt&&xe.userData.isPortal)],j=2,Se=.1;ye.forEach((xe,be)=>{const ke=xe.material;ke.opacity=xe.userData.maxOpacity;const te=ze.timeline({repeat:-1,delay:be*Se});te.to(ke,{opacity:0,duration:j/2,ease:"power2.inOut"}).to(ke,{opacity:xe.userData.maxOpacity,duration:j/2,ease:"power2.inOut"}),xe.userData.marqueeTimeline=te})},tt=W=>{const ye=[W,...W.children.filter(j=>j instanceof gt&&j.userData.isPortal)];ye.forEach(j=>{j.userData.marqueeTimeline&&(j.userData.marqueeTimeline.kill(),delete j.userData.marqueeTimeline)}),W.userData.ringExpandTimeline&&(W.userData.ringExpandTimeline.kill(),delete W.userData.ringExpandTimeline),ye.forEach((j,Se)=>{const xe=j.material;ze.killTweensOf(j.position),ze.killTweensOf(xe),j.position.z=-Se*2,xe.opacity=0})};return{getInitializedData:J,updateCubeColors:Ve,setupInteractivity:(W,ye,j,Se,xe)=>{U=Se;let be=null,ke=null,te=null,_e=!1,le=!1,Te=!1,We=!1,$e=!1;const Ne=G=>{A&&(be=G.touches[0].clientY,ke=ke??window.scrollY,_e=!0)},bt=G=>{if(!A||!te||!be||We)return;const De=G.touches[0].clientY-be;b.isMobile&&De<-50&&!le&&(G.cancelable&&G.preventDefault(),It(),be=null)},_t=G=>{be=null,_e=!1,Te=!0,ze.delayedCall(.5,()=>{Te=!1})},ht=G=>{if(_e||le||Te||We){G.preventDefault(),G.stopPropagation(),ke!==null&&(window.scrollTo(0,ke),ze.to(window,{scrollTo:{y:ke},duration:0}));return}if(!A||!te||!T||!y)return;if(b.isMobile){G.preventDefault(),G.stopPropagation();return}let F=0;if(G instanceof WheelEvent?F=G.deltaY:F=window.scrollY-(ke||0),G.preventDefault(),G.stopPropagation(),F>0){window.scrollTo(0,ke);return}F<0&&It()},It=()=>{const G=te,F=y?y.clone():new Xe(0,0,g),De=(T==null?void 0:T.z)??W.position.z,ne=G==null?void 0:G.parent,Me=G?Pe.indexOf(ne):-1;if(We=!0,G){tt(G);const de=G.userData.titleText;if(de){const Ee=de.material;ze.to(Ee,{opacity:0,duration:.5,ease:"power2.out",onComplete:()=>{de.visible=!1}})}if(G.userData.closeButton){const Ee=G.userData.closeButton,Ce=Ee.children.filter(we=>we instanceof Ye&&!we.userData.isCloseHitbox).map(we=>we.material);Ce.length>0&&ze.to(Ce,{opacity:0,duration:.5,ease:"power2.out",onComplete:()=>{Ee.visible=!1}})}}ze.to(W.position,{x:(T==null?void 0:T.x)??W.position.x,y:(T==null?void 0:T.y)??W.position.y,z:De,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const de=h[Me];if(Me!==-1&&de){const Ee=de.material,Ce=de.userData.backgroundPlane,we=Math.abs(W.position.z-de.position.z+120),Re=we<=D?Math.min(1,(1-we/D)*2):0;ze.to(Ee,{opacity:Re,duration:.5,ease:"power2.in"}),Ce&&ze.to(Ce.material,{opacity:Re*.8,duration:.5,ease:"power2.in"})}},onUpdate:()=>{const de=ve.progress,Ee=Ke.lerp(re.x,F.x,de),Ce=Ke.lerp(re.y,F.y,de),we=Ke.lerp(re.z,F.z,de);W.lookAt(Ee,Ce,we),W.updateMatrixWorld(!0)},onComplete:()=>{W.lookAt(F),A=!1,te=null,document.body.classList.remove("no-scrollbar"),b.isMobile&&(document.body.style.overflow=""),U&&U(!1),ke=null,T=null,y=null,W.userData.lockedLookAt=null,We=!1,Pe.forEach(de=>{Math.abs(W.position.z-de.position.z+90)<=D&&_.set(de,0)})}});const re=W.userData.lockedLookAt?W.userData.lockedLookAt.clone():W.getWorldDirection(new Xe).multiplyScalar(1e3).add(W.position),ve={progress:0};ze.to(ve,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},ee=(G,F=!0)=>{const De=[G,...G.children.filter(re=>re instanceof gt&&re.userData.isPortal)],ne=F?25:2,Me=ze.timeline({onComplete:()=>{F&&De[0]===G&&Je(G)}});De.forEach((re,ve)=>{let de=-ve*ne;(G.position.y>0&&G.rotation.x===-Math.PI/2||G.position.y<0&&G.rotation.x===Math.PI/2)&&(de=ve*ne);const Ee=F?re.userData.maxOpacity:0;Me.to(re.position,{z:de,duration:1,ease:"power3.out",delay:.5},0),Me.to(re.material,{opacity:Ee,duration:1,ease:"power3.out",delay:.5},0)}),G.userData.ringExpandTimeline=Me},pe=G=>{r.x=G.clientX/window.innerWidth*2-1,r.y=-(G.clientY/window.innerHeight)*2+1,i.setFromCamera(r,W),W.userData.lockedLookAt&&(W.lookAt(W.userData.lockedLookAt),W.updateMatrixWorld(!0)),Pe.forEach(ne=>{ne.userData.lockedPosition&&(ne.position.equals(ne.userData.lockedPosition)||ne.position.copy(ne.userData.lockedPosition)),ne.updateMatrixWorld(!0),ne.children.forEach(Me=>Me.updateMatrixWorld(!0))});const F=Pe.flatMap(ne=>{const Me=[];return!A&&ne.userData.isActive&&ne.children.forEach(re=>{re instanceof Ye&&(re.userData.isPortalHitbox||re.userData.isExploreTextHitbox)&&Me.push(re)}),A&&te&&ne===te.parent&&ne.children.forEach(re=>{if(re instanceof Ye&&re.userData.isPortalHitbox&&Me.push(re),re instanceof gt&&re.userData.isPortal){const ve=re;ve.children.forEach(de=>{de instanceof Ye&&de.userData.isExploreTextHitbox&&Me.push(de),de instanceof Ft&&de===ve.userData.closeButton&&de.children.forEach(Ee=>{Ee instanceof Ye&&Ee.userData.isCloseHitbox&&Me.push(Ee)})})}}),Me}),De=i.intersectObjects(F);if(De.length>0){const ne=De[0].object;if(ne.userData.isPortalHitbox||ne.userData.isExploreTextHitbox){const Me=ne.userData.portal;x!==Me&&(x&&[x,...x.children.filter(de=>de instanceof gt&&de.userData.isPortal)].forEach(de=>{const Ee=de.material;ze.to(Ee.color,{r:(v>>16&255)/255,g:(v>>8&255)/255,b:(v&255)/255,duration:.5})}),x=Me,[x,...x.children.filter(ve=>ve instanceof gt&&ve.userData.isPortal)].forEach(ve=>{const de=ve.material;ze.to(de.color,{r:(Q>>16&255)/255,g:(Q>>8&255)/255,b:(Q&255)/255,duration:.5})})),ye.style.cursor="pointer"}else if(ne.userData.isCloseHitbox&&A){if(!$e){$e=!0;const Me=ne.parent;ze.to(Me.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"})}ye.style.cursor="pointer"}}else{if(x&&([x,...x.children.filter(Me=>Me instanceof gt&&Me.userData.isPortal)].forEach(Me=>{const re=Me.material;ze.to(re.color,{r:(v>>16&255)/255,g:(v>>8&255)/255,b:(v&255)/255,duration:.5})}),x=null),A&&te&&$e){const ne=te.userData.closeButton;ne&&($e=!1,ze.to(ne.rotation,{z:0,duration:.3,ease:"power2.inOut"}))}ye.style.cursor="auto"}},Ae=G=>{if(We)return;r.x=G.clientX/window.innerWidth*2-1,r.y=-(G.clientY/window.innerHeight)*2+1,i.setFromCamera(r,W);const F=Pe.flatMap(Ce=>{const we=[];return A&&te&&Ce===te.parent&&Ce.children.forEach(Re=>{if(Re instanceof gt&&Re.userData.isPortal){const qe=Re;qe.children.forEach(Le=>{Le instanceof Ft&&Le===qe.userData.closeButton&&Le.children.forEach(Be=>{Be instanceof Ye&&Be.userData.isCloseHitbox&&we.push(Be)})})}}),we}),De=Pe.flatMap(Ce=>{const we=[];return!A&&Ce.userData.isActive&&Ce.children.forEach(Re=>{Re instanceof Ye&&(Re.userData.isPortalHitbox||Re.userData.isExploreTextHitbox)&&we.push(Re)}),A&&te&&Ce===te.parent&&Ce.children.forEach(Re=>{Re instanceof Ye&&Re.userData.isPortalHitbox&&we.push(Re),Re instanceof gt&&Re.userData.isPortal&&Re.children.forEach(qe=>{qe instanceof Ye&&qe.userData.isExploreTextHitbox&&we.push(qe)})}),we});let ne=i.intersectObjects(F);for(const Ce of ne)if(Ce.object.userData.isCloseHitbox){It();return}if(ne=i.intersectObjects(De),ne.length===0)return;const re=ne[0].object.userData.portal,ve=re.parent,de=Pe.indexOf(ve),Ee=n[de];if(A&&re===te){let Ce=new Xe;const we=e.CUBE_SIZE/2;re.position.x===we?Ce.set(-1,0,0):re.position.x===-we?Ce.set(1,0,0):re.position.y===we?Ce.set(0,-1,0):re.position.y===-we&&Ce.set(0,1,0),Ce.applyQuaternion(ve.getWorldQuaternion(new si)).normalize();const qe=W.position.clone().clone().add(Ce.clone().multiplyScalar(-675)),Le=Ce.clone().multiplyScalar(-1e3),Be=qe.clone().add(Le);We=!0,ze.to(W.position,{x:qe.x,y:qe.y,z:qe.z,duration:1,ease:"power2.in",onUpdate:()=>W.lookAt(Be),onStart:()=>{ze.to(j.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{Ee!=null&&Ee.slug&&(I.setScrollPosition(window.scrollY),Nr.visit(route("project.show",{project:Ee.slug}),{preserveScroll:!1})),We=!1}})}else if(!A){T||(T=W.position.clone(),y=new Xe(0,0,g)),U&&Se(!0,T,y);const Ce=re.getWorldPosition(new Xe);le=!0,We=!0,ke=window.scrollY,ze.to(W.position,{x:0,y:0,z:ve.getWorldPosition(new Xe).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{A=!0,te=re,document.body.classList.add("no-scrollbar"),b.isMobile&&(document.body.style.overflow="hidden"),ve.userData.lockedPosition=ve.position.clone(),Fe(ve);const we=h[de];if(we){const qe=we.material,Le=we.userData.backgroundPlane;ze.to(qe,{opacity:0,duration:.5,ease:"power2.out"}),Le&&ze.to(Le.material,{opacity:0,duration:.5,ease:"power2.out"})}const Re=re.userData.titleText;if(Re){Re.visible=!0;const qe=Re.material;ze.to(qe,{opacity:1,duration:1,ease:"power2.in",delay:.5})}if(re.userData.closeButton){const qe=re.userData.closeButton;qe.visible=!0;const Le=qe.children.filter(Be=>Be instanceof Ye&&!Be.userData.isCloseHitbox).map(Be=>Be.material);Le.length>0&&ze.to(Le,{opacity:1,duration:.5,ease:"power2.in",delay:.5})}},onComplete:()=>{ee(re,!0),le=!1,We=!1,W.userData.lockedLookAt=Ce.clone()}}),ze.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const we=this.progress(),Re=W.getWorldDirection(new Xe).multiplyScalar(1e3).add(W.position),qe=Ke.lerp(Re.x,Ce.x,we),Le=Ke.lerp(Re.y,Ce.y,we),Be=Ke.lerp(Re.z,Ce.z,we);W.lookAt(qe,Le,Be)},onComplete:()=>{W.lookAt(Ce.x,Ce.y,Ce.z),W.updateMatrixWorld(!0)}})}};ye.addEventListener("mousemove",pe),ye.addEventListener("click",Ae),ye.addEventListener("touchstart",Ne,{passive:!1}),ye.addEventListener("touchmove",bt,{passive:!1}),ye.addEventListener("touchend",_t,{passive:!0}),window.addEventListener("wheel",ht,{passive:!1}),window.addEventListener("scroll",ht,{passive:!1});const K=()=>{R.forEach((G,F)=>{G.forEach(De=>{F.remove(De.mesh),De.mesh.geometry.dispose(),De.mesh.material.dispose()})}),R.clear(),_.clear(),O.clear()},ce=()=>{ye.removeEventListener("mousemove",pe),ye.removeEventListener("click",Ae),ye.removeEventListener("touchstart",Ne),ye.removeEventListener("touchmove",bt),ye.removeEventListener("touchend",_t),window.removeEventListener("wheel",ht),window.removeEventListener("scroll",ht),te&&tt(te),b.isMobile&&(document.body.style.overflow="")};return()=>{ce(),K()}},updateClickHereParticles:xt}}function Xi(f,e,n,t){const o=fn(),s=100,a=100,c=300,b=3355443,I=o.isMobile?24:32,N=-600,k=-500,M=500,g=o.isMobile?5:10,v=.05,C=1,w=o.isMobile?6:4,H=o.isMobile?4:6,$=100,z=-450,S=60,V=n-M,q=Math.abs(k-V),D=Math.ceil(q/s),X=()=>{const u=new Ft;let ge=null,me=null;const Pe=[],h=[],p=[],i=[],r=[];{const x=new Ho(s,s,s),T=new Qo(x),y=I*D,A=new ri;A.copy(T),A.instanceCount=y;const U=new zt({color:b,transparent:!0,fog:!0,vertexColors:!0}),R=new Float32Array(y*3),_=new Float32Array(y*3),O=new Float32Array(y*3),Z=I*s,d=-Z/2+s/2,m=k;for(let j=0;j<I;j++){const Se=Q(j);for(let xe=0;xe<D;xe++){const be=j*D+xe,ke=d+j*s,te=m-xe*s,_e=Ke.randFloat(a,c),le=_e/s,Te=N+_e/2;R[be*3]=ke,R[be*3+1]=Te,R[be*3+2]=te,_[be*3]=1,_[be*3+1]=le,_[be*3+2]=1,O[be*3]=Se,O[be*3+1]=Se,O[be*3+2]=Se}}A.setAttribute("instancePosition",new Vn(R,3)),A.setAttribute("instanceScale",new Vn(_,3)),A.setAttribute("color",new Vn(O,3)),U.onBeforeCompile=j=>{j.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${j.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},ge=new gt(A,U);const l=-Z/2,J=Z/2,ue=N,je=N+c,Ze=V,Fe=k;A.boundingBox=new or(new Xe(l,ue,Ze),new Xe(J,je,Fe));const Ve=(l+J)/2,xt=(ue+je)/2,Je=(Ze+Fe)/2,tt=J-l,it=je-ue,W=Fe-Ze,ye=Math.sqrt(tt*tt+it*it+W*W)/2;A.boundingSphere=new nr(new Xe(Ve,xt,Je),ye),u.add(ge)}{me=new Ft;const x=I*s/(H-1),T=-(I*s)/2;for(let A=0;A<H;A++){let R=T+A*x,_=k;const O=[new Xe(R,z,_)];let Z=0;for(;_>V;){const d=_===k?Ke.randFloat(300,800):Math.min(Ke.randFloat(300,800),Math.abs(_-V));if(_-=d,O.push(new Xe(R,z,_)),Z+=d,_<=V){O[O.length-1].z=V;break}const m=Math.random()<.5?-1:1,l=Ke.randFloat(100,300);R+=m*l,O.push(new Xe(R,z,_)),Z+=l}h.push({points:O,totalLength:Z})}const y=new Ho(w,w,w);for(let A=0;A<H;A++){const U=h[A],R=U.totalLength,_=R/S;for(let O=0;O<S;O++){const Z=new lt({color:16711680,fog:!0}),d=new Ye(y,Z),m=O*_;let l=m;for(let J=0;J<U.points.length-1;J++){const ue=U.points[J],je=U.points[J+1],Ze=ue.distanceTo(je);if(l<=Ze){const Fe=l/Ze;d.position.lerpVectors(ue,je,Fe);break}l-=Ze}Pe.push(d),p.push(m),i.push(A),r.push(1),me.add(d)}for(let O=0;O<S;O++){const Z=new lt({color:16777215,fog:!0}),d=new Ye(y,Z),m=R-(O*_+_/2);let l=R-m;const J=[...U.points].reverse();for(let ue=0;ue<J.length-1;ue++){const je=J[ue],Ze=J[ue+1],Fe=je.distanceTo(Ze);if(l<=Fe){const Ve=l/Fe;d.position.lerpVectors(je,Ze,Ve);break}l-=Fe}Pe.push(d),p.push(m),i.push(A),r.push(-1),me.add(d)}}e.add(me)}return e.add(u),{cityGroup:u,instancedLines:ge,particleGroup:me,particles:Pe,paths:h,particleDistances:p,particlePaths:i,particleDirections:r}},Q=u=>{if(u<g){const ge=(C-v)/(g-1);return v+u*ge}else if(u>=I-g){const ge=I-1-u,me=(C-v)/(g-1);return v+ge*me}return C},{cityGroup:P,instancedLines:ie,particleGroup:E,particles:Y,paths:fe,particleDistances:se,particlePaths:oe,particleDirections:B}=X();return{cityGroup:P,buildingLines:ie?[ie]:[],updateParticles:u=>{const ge=$*u;for(let me=0;me<Y.length;me++){const Pe=B[me],h=oe[me],p=fe[h],i=p.totalLength;se[me]+=ge*Pe,Pe===1?(se[me]=se[me]%i,se[me]<0&&(se[me]+=i)):se[me]=(se[me]+i)%i;const r=se[me],x=Pe===1?p.points:[...p.points].reverse();let T=Pe===1?r:i-r;for(let y=0;y<x.length-1;y++){const A=x[y],U=x[y+1],R=A.distanceTo(U);if(T<=R){const _=T/R;Y[me].position.lerpVectors(A,U,_);break}T-=R}}},dispose:()=>{ie&&(P.remove(ie),ie.geometry.dispose(),ie.material.dispose()),E&&(e.remove(E),E.children.forEach(u=>{u.geometry.dispose(),u.material.dispose()})),e.remove(P)}}}ze.registerPlugin(Ie);function ji(f,e,n,t,o,s,a={},c,b){const I=fn(),{CUBE_SPACING:N,FIRST_CUBE_Z:k}=s,M=(t==null?void 0:t.length)||0,g=k-(M+1)*N;let v=!1,C=!1;const w=I.isMobile?(Math.abs(g)+(M-1)*N)*.7:Math.abs(g)+(M-1)*N;let H=ze.timeline();Ie.config({ignoreMobileResize:!0});{let S=0;const V=16;H=ze.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${w}`,scrub:a.scrub,pin:!0,onUpdate:q=>{const D=performance.now();if(D-S>=V){if(!v){const X=q.progress,Q=Ke.lerp(0,g,X);e.position.set(0,0,Q),e.lookAt(0,0,g)}o(e),S=D}b&&b.update()},onRefresh:()=>{e.updateProjectionMatrix()}}}),H.fromTo(e.position,{z:0},{z:g,duration:1,ease:"none"},0)}return{setReverting:S=>{v=S},timeline:H,isScrollTriggerActive:()=>C}}function qi(f,e,n){const t=fn(),o=t.isMobile?25:20,s=t.isMobile?1e3:2e3,a=4e3,c=-1e3,b=n-1e3,I=1e3,N=n,k=150,M=-500,g=n,v=new ho,C=new Float32Array(s*3),w=new Float32Array(s),H=new Float32Array(s);let $=0;for(;$<s;){const D=(Math.random()-.5)*a,X=(Math.random()-.5)*a,Q=c+Math.random()*(b-c),P=Q>N&&Math.abs(D)<I&&Math.abs(X)<I,ie=Math.abs(D)<k&&Math.abs(X)<k&&Q>g&&Q<M;if(!P&&!ie){const E=$*3;C[E]=D,C[E+1]=X,C[E+2]=Q;const Y=.1+Math.random()*(.7-.1);w[$]=Y,H[$]=Y,$++}}v.setAttribute("position",new Ss(C,3)),v.setAttribute("opacity",new Ss(H,1));const z=new _o({uniforms:{color:{value:new At(1,1,1)},size:{value:o}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),S=new ii(v,z);f.add(S);const V=v.attributes.opacity;for(let D=0;D<s;D++)ze.to({opacity:w[D]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){H[D]=this.targets()[0].opacity,V.needsUpdate=!0}});return{dispose:()=>{ze.killTweensOf(H),f.remove(S),v.dispose(),z.dispose()}}}function Zi(f,e){const t=e-1500,o=100,s=2,a=64,c=1e3,b=a*3,I=[4,4.5,5],N=6;let k,M,g,v,C,w;const H=[],$=[[],[],[]],z=[[],[],[]],S=[[],[],[]];let V=[0,0,0];const q=()=>{const P=0-t,ie=[];for(let ae=0;ae<o;ae++){const u=ae/(o-1),ge=0-u*P,me=u*5*2*Math.PI,Pe=90*(.8+.2*Math.sin(me*2)),h=new Xe(Pe*Math.cos(me),Pe*Math.sin(me),ge);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath points",{t:u,z:ge,projectMaxZ:e}),ie.push(h)}k=new Xn(ie);const E=new ho().setFromPoints(k.getPoints(200));v=new jn(E,new zt({color:16711935,linewidth:2,visible:!1})),f.add(v);const Y=[];for(let ae=0;ae<o;ae++){const u=ae/(o-1),ge=0-u*P,me=u*3*2*Math.PI,Pe=60*(.8+.2*Math.sin(me*4)),h=new Xe(Pe*Math.cos(me),Pe*Math.sin(me),ge);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath2 points",{t:u,z:ge,projectMaxZ:e}),Y.push(h)}M=new Xn(Y);const fe=new ho().setFromPoints(M.getPoints(200));C=new jn(fe,new zt({color:65535,linewidth:2,visible:!1})),f.add(C);const se=[];for(let ae=0;ae<o;ae++){const u=ae/(o-1),ge=0-u*P,me=u*7*2*Math.PI,Pe=100,h=90,p=.1*Math.sin(me),i=new Xe(Pe*(1+p)*Math.cos(me),h*(1-p)*Math.sin(me),ge);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:u,z:ge,projectMaxZ:e}),se.push(i)}g=new Xn(se);const oe=new ho().setFromPoints(g.getPoints(200));w=new jn(oe,new zt({color:16776960,linewidth:2,visible:!1})),f.add(w);const B=[16711680,65280,255],L=new Ho(s,s,s);L.attributes.color&&delete L.attributes.color;for(let ae=0;ae<3;ae++){const u=new Ft;u.opacity=1,u.renderOrder=1,H[ae]=u,f.add(u);for(let ge=0;ge<b;ge++){const me=new lt({color:B[ae],transparent:!0,opacity:0,blending:ai,fog:!0,depthWrite:!1}),Pe=new Ye(L,me);Pe.renderOrder=1,Pe.visible=!1,u.add(Pe),$[ae][ge]=Pe,z[ae][ge]=0,S[ae][ge]=!1}}},D=P=>{const ie=[k,M,g][P],E=ie.getLength(),Y=S[P].filter(se=>se).length;if(b-Y>=a){let se=0;for(let oe=0;oe<a;oe++){const B=S[P].findIndex(h=>!h);if(B===-1){console.warn(`No available chasers for path ${P}, emitted ${se}/${a}`);break}const L=se/(a-1),ae=.05+(1-.05)*Math.pow(L,3),u=new lt({color:[16711680,65280,255][P],transparent:!0,opacity:ae,blending:Kt,fog:!0,depthWrite:!1});$[P][B].material=u,$[P][B].visible=!0;const ge=se*N;z[P][B]=ge,S[P][B]=!0;const me=ge/E,Pe=ie.getPointAt(me);$[P][B].position.copy(Pe),se++}}},X=P=>{const ie=performance.now()/1e3,E=[k,M,g];for(let Y=0;Y<3;Y++){ie-V[Y]>=I[Y]&&(D(Y),V[Y]=ie);const fe=E[Y],se=fe.getLength(),oe=c*P;for(let B=0;B<b;B++)if(S[Y][B]){z[Y][B]+=oe;const L=z[Y][B]/se;if(L>=1)$[Y][B].visible=!1,S[Y][B]=!1,z[Y][B]=0;else{const ae=fe.getPointAt(L);$[Y][B].position.copy(ae)}}}};return q(),{chaserPath:k,chaserPath2:M,chaserPath3:g,updateChasers:X,dispose:()=>{f.remove(v),f.remove(C),f.remove(w),v.geometry.dispose(),v.material.dispose(),C.geometry.dispose(),C.material.dispose(),w.geometry.dispose(),w.material.dispose(),H.forEach(P=>{P.children.forEach(ie=>{ie.geometry.dispose(),ie.material.dispose()}),f.remove(P)})}}}class $i extends Js{constructor(e){super(e)}load(e,n,t,o){const s=this,a=new er(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){const b=s.parse(JSON.parse(c));n&&n(b)},t,o)}parse(e){return new Qi(e)}}class Qi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=Ki(e,n,this.data);for(let s=0,a=o.length;s<a;s++)t.push(...o[s].toShapes());return t}}function Ki(f,e,n){const t=Array.from(f),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,a=[];let c=0,b=0;for(let I=0;I<t.length;I++){const N=t[I];if(N===`
`)c=0,b-=s;else{const k=Ji(N,o,c,b,n);c+=k.offsetX,a.push(k.path)}}return a}function Ji(f,e,n,t,o){const s=o.glyphs[f]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+f+'" does not exists in font family '+o.familyName+".");return}const a=new lo;let c,b,I,N,k,M,g,v;if(s.o){const C=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let w=0,H=C.length;w<H;)switch(C[w++]){case"m":c=C[w++]*e+n,b=C[w++]*e+t,a.moveTo(c,b);break;case"l":c=C[w++]*e+n,b=C[w++]*e+t,a.lineTo(c,b);break;case"q":I=C[w++]*e+n,N=C[w++]*e+t,k=C[w++]*e+n,M=C[w++]*e+t,a.quadraticCurveTo(k,M,I,N);break;case"b":I=C[w++]*e+n,N=C[w++]*e+t,k=C[w++]*e+n,M=C[w++]*e+t,g=C[w++]*e+n,v=C[w++]*e+t,a.bezierCurveTo(k,M,g,v,I,N);break}}return{offsetX:s.ha*e,path:a}}function ea(f="/fonts/Poppins_Regular.json"){const e=oo(null),n=oo(0),t=oo(!1),o=()=>new Promise((a,c)=>{new $i().load(f,I=>{e.value=I,n.value=100,t.value=!0,a(I)},I=>{I.lengthComputable&&(n.value=I.loaded/I.total*100)},I=>{n.value=100,t.value=!0,c(I)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const ta={class:"preloader"},oa={class:"progress-label"},na=ds({__name:"Preloader",props:{progress:{}},setup(f){return(e,n)=>($t(),uo("div",ta,[Lt("div",oa,$s(Math.round(e.progress))+"%",1)]))}}),sa=sr(na,[["__scopeId","data-v-e5eadefa"]]),js=250,Pn=500,Wo=-500,ts=-520,qs=-720,Zs=4e3,ra=ds({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(f){ze.registerPlugin(Ie);const e=f,n=tr();n.projects=e.projects;const t=fn(),o={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},s=oo(null),a=oo(null),c=oo(!1),b=oo(0),I=oo(!1),N=oo(!0),k=new Map;let M,g,v,C,w,H,$,z=null,S=null,V=null,q=null,D=null,X=[],Q=null,P=null,ie=0,E=null,Y,fe=null,se=null,oe=null;const B=ea("/fonts/Poppins_Regular.json"),L=()=>{const h=s.value?s.value.getBoundingClientRect().width:window.innerWidth,p=window.innerHeight,i=t.isMobile?.75:1,r=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;v.setSize(h*i,p*i),v.setPixelRatio(r),C.setSize(h*i,p*i),g.aspect=h/p,g.updateProjectionMatrix(),v.domElement.style.width=`${h}px`,v.domElement.style.height=`${p}px`},ae=h=>k.has(h)?Promise.resolve(k.get(h)):new Promise((p,i)=>{new di().load(h,x=>{x.encoding=void 0,k.set(h,x),p(x)},void 0,x=>i(x))}),u=async()=>{M=new li,M.background=new At(0),M.fog=new ci(0,700,Zs),g=new ui(t.isMobile?t.orientation==="landscape"?90:120:75,window.innerWidth/window.innerHeight,1,Zs+6e3),g.position.set(0,0,0),g.lookAt(0,0,1e3),v=new fi({antialias:!0}),t.isMobile?v.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):v.setPixelRatio(window.devicePixelRatio),v.toneMapping=pi,v.toneMappingExposure=1,v.outputEncoding=void 0,C=new Fi(v);const h=new Gi(M,g);if(C.addPass(h),t.isMobile?w=new Ao(new Oe(window.innerWidth,window.innerHeight),1,.1,0):w=new Ao(new Oe(window.innerWidth,window.innerHeight),1.6,.2,0),w.renderToScreen=!0,C.addPass(w),s.value)s.value.appendChild(v.domElement),v.domElement.style.opacity="0";else return;H=new ln,H.dom.style.position="fixed",H.dom.style.top="0px",H.dom.style.left="0px",H.dom.style.zIndex="1000",document.body.appendChild(H.dom);const i=e.projects.filter(T=>T.keyart).length+2+1;let r=0;const x=()=>{r++;const T=r/i*100,y=B.loadingProgress.value;b.value=(T+y/i)/(1+1/i),r===i&&B.isLoaded.value&&(c.value=!0)};await B.initialize().then(()=>{x()}).catch(T=>{console.error("Font initialization failed:",T),x()}),await ae(e.projectGridFile).then(()=>x()).catch(()=>x()),await ae(e.projectGridFile2).then(()=>x()).catch(()=>x());for(const T of e.projects)T.keyart?await ae(T.keyart).then(()=>x()).catch(()=>x()):x();E=Vi(M,{CUBE_SIZE:js,CUBE_SPACING:Pn,FIRST_CUBE_Z:Wo},e.projects,e.projectGridFile,e.projectGridFile2,o,k,B.font);try{if(await E.getInitializedData().then(({maxZ:T,updateCubeColors:y,projectCubes:A})=>{if(Y=T,Y===void 0||isNaN(Y))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:U}=Yi(M,B.font,{CUBE_SIZE:js,FIRST_CUBE_Z:Wo},o);X=[...U,...A],Q=y}),o.showCars){const{cityGroup:T,updateParticles:y,dispose:A}=Xi(M,M,Y,o);$=y,D=A}if(o.showStarfield){const{dispose:T}=qi(M,g,Y);z=T}if(o.showChasers){const{dispose:T,updateChasers:y}=Zi(M,Y);V=T,q=y}L()}catch(T){console.error("Error initializing project cubes:",T),Y=Wo-(e.projects.length+1)*Pn}},ge=(h=0)=>{if(P=requestAnimationFrame(ge),v&&C){const p=(h-ie)/1e3;ie=h,$(p),q&&q(p),E!=null&&E.updateClickHereParticles&&E.updateClickHereParticles(g,p);const i=4e3,r=1e3,x=Math.abs(g.position.z-Y);g.far=Math.max(i+r,x),g.updateProjectionMatrix();const T=qs-ts;let y=0;g.position.z>=ts?y=0:g.position.z<=qs?y=1:y=(g.position.z-ts)/T,t.isMobile?w.strength=Ke.lerp(1.3,0,y):w.strength=Ke.lerp(1.6,.125,y),C.render()}H.update()},me=()=>{console.log("handleResize()"),L(),Ie.refresh()},Pe=()=>{if(t.isMobile){const h=t.orientation;console.log("Resize: orientation",h,"lastOrientation",se),h!==se&&(se=h,oe&&clearTimeout(oe),oe=setTimeout(()=>{me(),oe=null},500))}else me()};return Hr(()=>{u().then(()=>{if(c.value){P=requestAnimationFrame(ge);let h=null;const p=E.getInitializedData().then(({projectCubes:r})=>{r.forEach(T=>{T.userData.isActive=!0});const x=Wo-(e.projects.length-1)*Pn;if(g.position.set(0,0,5e3),g.lookAt(0,0,x),g.updateProjectionMatrix(),Q(g),C.render(),Ie.getAll().forEach(T=>T.kill()),X.length&&Q){const T=ji(M,g,a,X,Q,{CUBE_SPACING:Pn,FIRST_CUBE_Z:Wo},{scrub:t.isMobile?.5:1},o,H);h=T.setReverting,fe=T.isScrollTriggerActive}v&&S===null&&(S=E.setupInteractivity(g,v.domElement,v,T=>{h&&h(T)},fe)),window.scrollTo({top:0,behavior:"auto"})}),i=()=>{p.then(()=>{N.value=!1,g.position.set(0,0,5e3),g.updateProjectionMatrix(),ze.to(v.domElement,{opacity:1,duration:.5,ease:"power4.out"});const r={z:5e3};ze.to(r,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{g.position.z=r.z,g.updateProjectionMatrix()},onComplete:()=>{g.position.z=0,I.value=!0}})})};ze.delayedCall(.5,i)}}).catch(h=>{console.error("Initialization failed:",h)}),window.addEventListener("resize",Pe)}),Fr(()=>{P!==null&&cancelAnimationFrame(P),S&&S(),window.removeEventListener("resize",Pe),Ie.getAll().forEach(h=>h.kill()),v.dispose(),C.dispose(),M.clear(),document.body.removeChild(H.dom),z&&z(),V&&V(),D&&D()}),(h,p)=>($t(),uo("section",{ref_key:"wrapper",ref:a,class:"wrapper"},[Yo(Ur,{name:"fade"},{default:Qs(()=>[N.value?($t(),Ks(sa,{key:0,progress:b.value},null,8,["progress"])):Gr("",!0)]),_:1}),Lt("div",{ref_key:"tunnelWrapper",ref:s,class:"tunnel-wrapper"},null,512)],512))}}),ia=sr(ra,[["__scopeId","data-v-fa6db7be"]]),aa={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},la={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},ca={class:"overflow-hidden"},ua={class:"mt-16 px-4 md:px-16"},fa={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},pa=["innerHTML"],da={class:"flex justify-center items-center gap-8 text-xs text-white/80 uppercase mt-12"},xa=ds({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{},archived:{}},setup(f){const e=f,n=vs(()=>[...e.archived].sort((s,a)=>s.title.localeCompare(a.title))),t=vs(()=>Object.values(dn.Enums.Classification)),o=s=>{switch(s){case dn.Enums.Classification.ENTERTAINMENT:return"fill-red-400";case dn.Enums.Classification.ECOMMERCE:return"fill-green-500";case dn.Enums.Classification.OTHER:return"fill-white";default:return"fill-white-500"}};return(s,a)=>($t(),Ks(mi,null,{default:Qs(()=>[Yo(Wr(Yr),{title:"Welcome"}),Lt("div",aa,[Lt("nav",la,[Yo(hi)]),Lt("div",ca,[Yo(ia,{projects:s.projects,"project-grid-file":s.projectGridFile,"project-grid-file2":s.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file2"])]),Lt("div",ua,[a[2]||(a[2]=Lt("h2",{class:"mb-4 text-white"},"OTHER WEB PROJECTS",-1)),Lt("ul",fa,[($t(!0),uo(Ts,null,Ms(n.value,(c,b)=>($t(),uo("li",{class:"text-xs text-white/80 flex items-center gap-2",key:b},[($t(),uo("svg",{class:Cs(["size-1.5 md:size-[.375vw] 3xl:size-[.375rem]",o(c.classification)]),viewBox:"0 0 6 6","aria-hidden":"true"},a[0]||(a[0]=[Lt("circle",{cx:"3",cy:"3",r:"3"},null,-1)]),2)),Lt("span",{innerHTML:c.title},null,8,pa)]))),128))]),Lt("ul",da,[($t(!0),uo(Ts,null,Ms(t.value,c=>($t(),uo("li",{class:"flex items-center gap-2",key:c},[($t(),uo("svg",{class:Cs(["size-3",o(c)]),viewBox:"0 0 6 6","aria-hidden":"true"},a[1]||(a[1]=[Lt("circle",{cx:"3",cy:"3",r:"3"},null,-1)]),2)),Vr(" "+$s(c),1)]))),128))])]),a[3]||(a[3]=Lt("div",{class:"flex justify-center items-center"},null,-1)),a[4]||(a[4]=Lt("div",{class:"flex justify-center items-center"},null,-1)),Yo(gi)])]),_:1}))}});export{xa as default};
