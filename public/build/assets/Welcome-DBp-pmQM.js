import{I as On,d as jt,D as Ci,x as Uo,y as Go,e as Nn,o as $r,J as Pi,W as Mi,a as sr,t as Ei,b as rr,T as Ai,w as ki,c as Ri,f as Ii,u as Di,m as Oi,F as Ni}from"./app-Pr0Lrqz5.js";import{M as tt,O as Wo,B as so,F as Hr,C as wt,V as ce,W as yn,H as xn,U as Zn,S as _r,a as Ze,A as nr,b as qt,N as zi,c as Li,d as jo,e as Yo,f as Mn,P as bn,E as Bi,g as Vo,h as Xo,i as mr,j as Fi,k as Hi,l as Ui,m as Bn,n as Gi,o as Yt,p as Ft,q as Wi,D as Or,r as Ot,s as Fe,t as rt,u as wn,v as Vt,R as ji,w as Yi,x as Vi,y as Xi,z as yo,Q as qi,I as Vs,J as Xs,K as qs,T as Zs,X as Qs,Y as Zi,Z as Qi,_ as $i,$ as Ki,L as Ji,G as es}from"./GlobalFooter-D62s3G4f.js";import{_ as qo}from"./_plugin-vue_export-helper-DlAUqK2U.js";class en{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const ts=new Wo(-1,1,1,-1,0,1);class rs extends so{constructor(){super(),this.setAttribute("position",new Hr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Hr([0,2,0,0,2,0],2))}}const ns=new rs;class Zo{constructor(e){this._mesh=new tt(ns,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ts)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const Qo={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`},os={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new wt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class fr extends en{constructor(e,n,t,r){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new ce(e.x,e.y):new ce(256,256),this.clearColor=new wt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new yn(o,l,{type:xn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let T=0;T<this.nMips;T++){const v=new yn(o,l,{type:xn});v.texture.name="UnrealBloomPass.h"+T,v.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(v);const y=new yn(o,l,{type:xn});y.texture.name="UnrealBloomPass.v"+T,y.texture.generateMipmaps=!1,this.renderTargetsVertical.push(y),o=Math.round(o/2),l=Math.round(l/2)}const f=os;this.highPassUniforms=Zn.clone(f.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new _r({uniforms:this.highPassUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),this.separableBlurMaterials=[];const _=[3,5,7,9,11];o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let T=0;T<this.nMips;T++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(_[T])),this.separableBlurMaterials[T].uniforms.invSize.value=new ce(1/o,1/l),o=Math.round(o/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const R=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=R,this.bloomTintColors=[new Ze(1,1,1),new Ze(1,1,1),new Ze(1,1,1),new Ze(1,1,1),new Ze(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const I=Qo;this.copyUniforms=Zn.clone(I.uniforms),this.blendMaterial=new _r({uniforms:this.copyUniforms,vertexShader:I.vertexShader,fragmentShader:I.fragmentShader,blending:nr,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new wt,this.oldClearAlpha=1,this.basic=new qt,this.fsQuad=new Zo(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),r=Math.round(n/2);this.renderTargetBright.setSize(t,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(t,r),this.renderTargetsVertical[o].setSize(t,r),this.separableBlurMaterials[o].uniforms.invSize.value=new ce(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,n,t,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let f=this.renderTargetBright;for(let _=0;_<this.nMips;_++)this.fsQuad.material=this.separableBlurMaterials[_],this.separableBlurMaterials[_].uniforms.colorTexture.value=f.texture,this.separableBlurMaterials[_].uniforms.direction.value=fr.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[_]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[_].uniforms.colorTexture.value=this.renderTargetsHorizontal[_].texture,this.separableBlurMaterials[_].uniforms.direction.value=fr.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[_]),e.clear(),this.fsQuad.render(e),f=this.renderTargetsVertical[_];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new _r({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new ce(.5,.5)},direction:{value:new ce(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new _r({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}fr.BlurDirectionX=new ce(1,0);fr.BlurDirectionY=new ce(0,1);class is extends en{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof _r?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Zn.clone(e.uniforms),this.material=new _r({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Zo(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class xo extends en{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let l,f;this.inverse?(l=0,f=1):(l=1,f=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,l,4294967295),o.buffers.stencil.setClear(f),o.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}}class ss extends en{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class $o{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new ce);this._width=t.width,this._height=t.height,n=new yn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:xn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new is(Qo),this.copyPass.material.blending=zi,this.clock=new Li}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let r=0,o=this.passes.length;r<o;r++){const l=this.passes[r];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),l.needsSwap){if(t){const f=this.renderer.getContext(),_=this.renderer.state.buffers.stencil;_.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),_.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}xo!==void 0&&(l instanceof xo?t=!0:l instanceof ss&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new ce);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Ko extends en{constructor(e,n,t=null,r=null,o=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new wt}render(e,n,t){const r=e.autoClear;e.autoClear=!1;let o,l;this.overrideMaterial!==null&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=l),e.autoClear=r}}const tr=.01,bo=45/3,as=3,Fn=45,wo=On({__name:"CubeStrip",props:{particleWidth:{},particleHeight:{}},setup(p){const e=p,n=jt(null);let t,r,o=null,l=null,f=null,_=[];const R=Ci({particleCount:400,particleWidth:e.particleWidth??20,particleHeight:e.particleHeight??20,minSpeed:2,maxSpeed:5,speedRandomness:.5,positionZRandomness:.5,rotationRandomness:.5,rotateParticles:!1,useSquares:!0,emitterDepth:100,bloomStrength:1.1,bloomRadius:0,showControls:!1}),I=Fn/2+10;function T(g){const B=tr*R.particleWidth,Q=tr*R.particleHeight,H=R.useSquares?new bn(B,Q):new Mn(B,Q,B),M=Math.floor(Math.random()*3);let W;switch(M){case 0:W=new wt(1,0,0);break;case 1:W=new wt(0,1,0);break;case 2:W=new wt(0,0,1);break;default:W=new wt(1,0,0)}const j=new qt({color:W,transparent:!0,opacity:.7}),z=new tt(H,j),G=Fn+I*2;z.position.set(-45-I+g/(R.particleCount-1)*G,0,tr*(Math.random()-.5)*R.positionZRandomness*R.emitterDepth);const X=tr*(Math.random()*(R.maxSpeed-R.minSpeed)+R.minSpeed);return z.speed=X+tr*(Math.random()-.5)*R.speedRandomness,z.rotationSpeed=new Ze(Math.PI/2,Math.PI/2,Math.PI/2).multiplyScalar(Math.random()*R.rotationRandomness+.5),z}function v(){t=new jo;const g=as*1.5,B=g*bo;r=new Wo(-67.5/2,B/2,g/2,-4.5/2,.1,1e3),r.position.z=150,o=new Yo({antialias:!0}),o.setPixelRatio(window.devicePixelRatio),o.domElement&&(o.domElement.style.width="100%",o.domElement.style.height="auto");const Q=new Ko(t,r);f=new fr(new ce(window.innerWidth,window.innerHeight),R.bloomStrength,R.bloomRadius,.1),l=new $o(o),l.addPass(Q),l.addPass(f),D(),n.value&&n.value.appendChild(o.domElement),y(),A()}function y(){_.forEach(g=>t.remove(g)),_=[];for(let g=0;g<R.particleCount;g++){const B=T(g);_.push(B),t.add(B)}}function D(){if(!o||!l||!f)return;const g=window.innerWidth,B=g/bo;o.setSize(g,B),l.setSize(g,B),f.setSize(g,B),o.domElement&&(o.domElement.style.width="100%",o.domElement.style.height="auto")}function A(){requestAnimationFrame(A),_.forEach(g=>{g.position.x+=g.speed,!R.useSquares&&R.rotateParticles&&(g.rotation.x+=g.rotationSpeed.x*.016,g.rotation.y+=g.rotationSpeed.y*.016,g.rotation.z+=g.rotationSpeed.z*.016),g.position.x>Fn/2+I&&(_.indexOf(g),g.position.x=-45-I-tr*(g.geometry instanceof Mn,g.geometry.parameters.width),g.position.y=0,g.position.z=tr*(Math.random()-.5)*R.positionZRandomness*R.emitterDepth)}),l&&l.render()}return Uo(()=>{v(),window.addEventListener("resize",D)}),Go(()=>{window.removeEventListener("resize",D),o==null||o.dispose()}),(g,B)=>($r(),Nn("div",{ref_key:"container",ref:n,class:"relative w-full before:absolute before:inset-x-0 before:top-0 before:h-[2vw] before:bg-gradient-to-b before:from-black before:to-transparent after:absolute after:inset-x-0 after:bottom-0 after:h-[2vw] after:bg-gradient-to-t after:from-black after:to-transparent"},null,512))}}),Jo=Pi("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(p,e){p.isMobile=e}},actions:{setActiveProject(p){this.activeProjectSlug=p},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(p){this.scrollPosition=p,console.log("Scroll position stored:",p)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function ls(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function cs(p,e,n){return e&&ls(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Qe,_n,bt,Zt,Qt,Sr,ei,or,Ur,ti,Ut,Et,ri,ni=function(){return Qe||typeof window<"u"&&(Qe=window.gsap)&&Qe.registerPlugin&&Qe},oi=1,vr=[],de=[],Lt=[],Gr=Date.now,Qn=function(e,n){return n},us=function(){var e=Ur.core,n=e.bridge||{},t=e._scrollers,r=e._proxies;t.push.apply(t,de),r.push.apply(r,Lt),de=t,Lt=r,Qn=function(l,f){return n[l](f)}},$t=function(e,n){return~Lt.indexOf(e)&&Lt[Lt.indexOf(e)+1][n]},Wr=function(e){return!!~ti.indexOf(e)},st=function(e,n,t,r,o){return e.addEventListener(n,t,{passive:r!==!1,capture:!!o})},it=function(e,n,t,r){return e.removeEventListener(n,t,!!r)},nn="scrollLeft",on="scrollTop",$n=function(){return Ut&&Ut.isPressed||de.cache++},En=function(e,n){var t=function r(o){if(o||o===0){oi&&(bt.history.scrollRestoration="manual");var l=Ut&&Ut.isPressed;o=r.v=Math.round(o)||(Ut&&Ut.iOS?1:0),e(o),r.cacheID=de.cache,l&&Qn("ss",o)}else(n||de.cache!==r.cacheID||Qn("ref"))&&(r.cacheID=de.cache,r.v=e());return r.v+r.offset};return t.offset=0,e&&t},ut={s:nn,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:En(function(p){return arguments.length?bt.scrollTo(p,He.sc()):bt.pageXOffset||Zt[nn]||Qt[nn]||Sr[nn]||0})},He={s:on,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:ut,sc:En(function(p){return arguments.length?bt.scrollTo(ut.sc(),p):bt.pageYOffset||Zt[on]||Qt[on]||Sr[on]||0})},pt=function(e,n){return(n&&n._ctx&&n._ctx.selector||Qe.utils.toArray)(e)[0]||(typeof e=="string"&&Qe.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Kt=function(e,n){var t=n.s,r=n.sc;Wr(e)&&(e=Zt.scrollingElement||Qt);var o=de.indexOf(e),l=r===He.sc?1:2;!~o&&(o=de.push(e)-1),de[o+l]||st(e,"scroll",$n);var f=de[o+l],_=f||(de[o+l]=En($t(e,t),!0)||(Wr(e)?r:En(function(R){return arguments.length?e[t]=R:e[t]})));return _.target=e,f||(_.smooth=Qe.getProperty(e,"scrollBehavior")==="smooth"),_},Kn=function(e,n,t){var r=e,o=e,l=Gr(),f=l,_=n||50,R=Math.max(500,_*3),I=function(D,A){var g=Gr();A||g-l>_?(o=r,r=D,f=l,l=g):t?r+=D:r=o+(D-o)/(g-f)*(l-f)},T=function(){o=r=t?0:r,f=l=0},v=function(D){var A=f,g=o,B=Gr();return(D||D===0)&&D!==r&&I(D),l===f||B-f>R?0:(r+(t?g:-g))/((t?B:l)-A)*1e3};return{update:I,reset:T,getVelocity:v}},Rr=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},_o=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},ii=function(){Ur=Qe.core.globals().ScrollTrigger,Ur&&Ur.core&&us()},si=function(e){return Qe=e||ni(),!_n&&Qe&&typeof document<"u"&&document.body&&(bt=window,Zt=document,Qt=Zt.documentElement,Sr=Zt.body,ti=[bt,Zt,Qt,Sr],Qe.utils.clamp,ri=Qe.core.context||function(){},or="onpointerenter"in Sr?"pointer":"mouse",ei=De.isTouch=bt.matchMedia&&bt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in bt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Et=De.eventTypes=("ontouchstart"in Qt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Qt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return oi=0},500),ii(),_n=1),_n};ut.op=He;de.cache=0;var De=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){_n||si(Qe)||console.warn("Please gsap.registerPlugin(Observer)"),Ur||ii();var r=t.tolerance,o=t.dragMinimum,l=t.type,f=t.target,_=t.lineHeight,R=t.debounce,I=t.preventDefault,T=t.onStop,v=t.onStopDelay,y=t.ignore,D=t.wheelSpeed,A=t.event,g=t.onDragStart,B=t.onDragEnd,Q=t.onDrag,H=t.onPress,M=t.onRelease,W=t.onRight,j=t.onLeft,z=t.onUp,G=t.onDown,X=t.onChangeX,O=t.onChangeY,ee=t.onChange,k=t.onToggleX,J=t.onToggleY,K=t.onHover,ne=t.onHoverEnd,V=t.onMove,L=t.ignoreCheck,P=t.isNormalizer,te=t.onGestureStart,h=t.onGestureEnd,ge=t.onWheel,ye=t.onEnable,Ue=t.onDisable,b=t.onClick,c=t.scrollSpeed,s=t.capture,i=t.allowClicks,x=t.lockAxis,N=t.onLockAxis;this.target=f=pt(f)||Qt,this.vars=t,y&&(y=Qe.utils.toArray(y)),r=r||1e-9,o=o||0,D=D||1,c=c||1,l=l||"wheel,touch,pointer",R=R!==!1,_||(_=parseFloat(bt.getComputedStyle(Sr).lineHeight)||22);var w,E,F,S,m,C,U,u=this,d=0,a=0,Y=t.passive||!I&&t.passive!==!1,q=Kt(f,ut),ue=Kt(f,He),xe=q(),_e=ue(),me=~l.indexOf("touch")&&!~l.indexOf("pointer")&&Et[0]==="pointerdown",be=Wr(f),Se=f.ownerDocument||Zt,Ge=[0,0,0],Ce=[0,0,0],Oe=0,At=function(){return Oe=Gr()},Me=function(oe,ve){return(u.event=oe)&&y&&~y.indexOf(oe.target)||ve&&me&&oe.pointerType!=="touch"||L&&L(oe,ve)},Wt=function(){u._vx.reset(),u._vy.reset(),E.pause(),T&&T(u)},ft=function(){var oe=u.deltaX=_o(Ge),ve=u.deltaY=_o(Ce),Z=Math.abs(oe)>=r,ie=Math.abs(ve)>=r;ee&&(Z||ie)&&ee(u,oe,ve,Ge,Ce),Z&&(W&&u.deltaX>0&&W(u),j&&u.deltaX<0&&j(u),X&&X(u),k&&u.deltaX<0!=d<0&&k(u),d=u.deltaX,Ge[0]=Ge[1]=Ge[2]=0),ie&&(G&&u.deltaY>0&&G(u),z&&u.deltaY<0&&z(u),O&&O(u),J&&u.deltaY<0!=a<0&&J(u),a=u.deltaY,Ce[0]=Ce[1]=Ce[2]=0),(S||F)&&(V&&V(u),F&&(g&&F===1&&g(u),Q&&Q(u),F=0),S=!1),C&&!(C=!1)&&N&&N(u),m&&(ge(u),m=!1),w=0},Ne=function(oe,ve,Z){Ge[Z]+=oe,Ce[Z]+=ve,u._vx.update(oe),u._vy.update(ve),R?w||(w=requestAnimationFrame(ft)):ft()},kt=function(oe,ve){x&&!U&&(u.axis=U=Math.abs(oe)>Math.abs(ve)?"x":"y",C=!0),U!=="y"&&(Ge[2]+=oe,u._vx.update(oe,!0)),U!=="x"&&(Ce[2]+=ve,u._vy.update(ve,!0)),R?w||(w=requestAnimationFrame(ft)):ft()},Ve=function(oe){if(!Me(oe,1)){oe=Rr(oe,I);var ve=oe.clientX,Z=oe.clientY,ie=ve-u.x,re=Z-u.y,se=u.isDragging;u.x=ve,u.y=Z,(se||(ie||re)&&(Math.abs(u.startX-ve)>=o||Math.abs(u.startY-Z)>=o))&&(F=se?2:1,se||(u.isDragging=!0),kt(ie,re))}},ht=u.onPress=function(ae){Me(ae,1)||ae&&ae.button||(u.axis=U=null,E.pause(),u.isPressed=!0,ae=Rr(ae),d=a=0,u.startX=u.x=ae.clientX,u.startY=u.y=ae.clientY,u._vx.reset(),u._vy.reset(),st(P?f:Se,Et[1],Ve,Y,!0),u.deltaX=u.deltaY=0,H&&H(u))},fe=u.onRelease=function(ae){if(!Me(ae,1)){it(P?f:Se,Et[1],Ve,!0);var oe=!isNaN(u.y-u.startY),ve=u.isDragging,Z=ve&&(Math.abs(u.x-u.startX)>3||Math.abs(u.y-u.startY)>3),ie=Rr(ae);!Z&&oe&&(u._vx.reset(),u._vy.reset(),I&&i&&Qe.delayedCall(.08,function(){if(Gr()-Oe>300&&!ae.defaultPrevented){if(ae.target.click)ae.target.click();else if(Se.createEvent){var re=Se.createEvent("MouseEvents");re.initMouseEvent("click",!0,!0,bt,1,ie.screenX,ie.screenY,ie.clientX,ie.clientY,!1,!1,!1,!1,0,null),ae.target.dispatchEvent(re)}}})),u.isDragging=u.isGesturing=u.isPressed=!1,T&&ve&&!P&&E.restart(!0),F&&ft(),B&&ve&&B(u),M&&M(u,Z)}},dt=function(oe){return oe.touches&&oe.touches.length>1&&(u.isGesturing=!0)&&te(oe,u.isDragging)},Tt=function(){return(u.isGesturing=!1)||h(u)},Ct=function(oe){if(!Me(oe)){var ve=q(),Z=ue();Ne((ve-xe)*c,(Z-_e)*c,1),xe=ve,_e=Z,T&&E.restart(!0)}},Pt=function(oe){if(!Me(oe)){oe=Rr(oe,I),ge&&(m=!0);var ve=(oe.deltaMode===1?_:oe.deltaMode===2?bt.innerHeight:1)*D;Ne(oe.deltaX*ve,oe.deltaY*ve,0),T&&!P&&E.restart(!0)}},Jt=function(oe){if(!Me(oe)){var ve=oe.clientX,Z=oe.clientY,ie=ve-u.x,re=Z-u.y;u.x=ve,u.y=Z,S=!0,T&&E.restart(!0),(ie||re)&&kt(ie,re)}},gr=function(oe){u.event=oe,K(u)},Bt=function(oe){u.event=oe,ne(u)},Mr=function(oe){return Me(oe)||Rr(oe,I)&&b(u)};E=u._dc=Qe.delayedCall(v||.25,Wt).pause(),u.deltaX=u.deltaY=0,u._vx=Kn(0,50,!0),u._vy=Kn(0,50,!0),u.scrollX=q,u.scrollY=ue,u.isDragging=u.isGesturing=u.isPressed=!1,ri(this),u.enable=function(ae){return u.isEnabled||(st(be?Se:f,"scroll",$n),l.indexOf("scroll")>=0&&st(be?Se:f,"scroll",Ct,Y,s),l.indexOf("wheel")>=0&&st(f,"wheel",Pt,Y,s),(l.indexOf("touch")>=0&&ei||l.indexOf("pointer")>=0)&&(st(f,Et[0],ht,Y,s),st(Se,Et[2],fe),st(Se,Et[3],fe),i&&st(f,"click",At,!0,!0),b&&st(f,"click",Mr),te&&st(Se,"gesturestart",dt),h&&st(Se,"gestureend",Tt),K&&st(f,or+"enter",gr),ne&&st(f,or+"leave",Bt),V&&st(f,or+"move",Jt)),u.isEnabled=!0,u.isDragging=u.isGesturing=u.isPressed=S=F=!1,u._vx.reset(),u._vy.reset(),xe=q(),_e=ue(),ae&&ae.type&&ht(ae),ye&&ye(u)),u},u.disable=function(){u.isEnabled&&(vr.filter(function(ae){return ae!==u&&Wr(ae.target)}).length||it(be?Se:f,"scroll",$n),u.isPressed&&(u._vx.reset(),u._vy.reset(),it(P?f:Se,Et[1],Ve,!0)),it(be?Se:f,"scroll",Ct,s),it(f,"wheel",Pt,s),it(f,Et[0],ht,s),it(Se,Et[2],fe),it(Se,Et[3],fe),it(f,"click",At,!0),it(f,"click",Mr),it(Se,"gesturestart",dt),it(Se,"gestureend",Tt),it(f,or+"enter",gr),it(f,or+"leave",Bt),it(f,or+"move",Jt),u.isEnabled=u.isPressed=u.isDragging=!1,Ue&&Ue(u))},u.kill=u.revert=function(){u.disable();var ae=vr.indexOf(u);ae>=0&&vr.splice(ae,1),Ut===u&&(Ut=0)},vr.push(u),P&&Wr(f)&&(Ut=u),u.enable(A)},cs(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();De.version="3.12.7";De.create=function(p){return new De(p)};De.register=si;De.getAll=function(){return vr.slice()};De.getById=function(p){return vr.filter(function(e){return e.vars.id===p})[0]};ni()&&Qe.registerPlugin(De);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var $,br,he,Ee,xt,Te,ao,An,Kr,jr,Nr,sn,et,zn,Jn,lt,vo,So,wr,ai,Hn,li,at,eo,ci,ui,Xt,to,lo,Tr,co,kn,ro,Un,an=1,nt=Date.now,Gn=nt(),St=0,zr=0,To=function(e,n,t){var r=yt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=r,r?e.substr(6,e.length-7):e},Co=function(e,n){return n&&(!yt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},fs=function p(){return zr&&requestAnimationFrame(p)},Po=function(){return zn=1},Mo=function(){return zn=0},Nt=function(e){return e},Lr=function(e){return Math.round(e*1e5)/1e5||0},fi=function(){return typeof window<"u"},pi=function(){return $||fi()&&($=window.gsap)&&$.registerPlugin&&$},pr=function(e){return!!~ao.indexOf(e)},hi=function(e){return(e==="Height"?co:he["inner"+e])||xt["client"+e]||Te["client"+e]},di=function(e){return $t(e,"getBoundingClientRect")||(pr(e)?function(){return Pn.width=he.innerWidth,Pn.height=co,Pn}:function(){return Ht(e)})},ps=function(e,n,t){var r=t.d,o=t.d2,l=t.a;return(l=$t(e,"getBoundingClientRect"))?function(){return l()[r]}:function(){return(n?hi(o):e["client"+o])||0}},hs=function(e,n){return!n||~Lt.indexOf(e)?di(e):function(){return Pn}},zt=function(e,n){var t=n.s,r=n.d2,o=n.d,l=n.a;return Math.max(0,(t="scroll"+r)&&(l=$t(e,t))?l()-di(e)()[o]:pr(e)?(xt[t]||Te[t])-hi(r):e[t]-e["offset"+r])},ln=function(e,n){for(var t=0;t<wr.length;t+=3)(!n||~n.indexOf(wr[t+1]))&&e(wr[t],wr[t+1],wr[t+2])},yt=function(e){return typeof e=="string"},ot=function(e){return typeof e=="function"},Br=function(e){return typeof e=="number"},ir=function(e){return typeof e=="object"},Ir=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},Wn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},yr=Math.abs,gi="left",mi="top",uo="right",fo="bottom",lr="width",cr="height",Yr="Right",Vr="Left",Xr="Top",qr="Bottom",ze="padding",_t="margin",Pr="Width",po="Height",Be="px",vt=function(e){return he.getComputedStyle(e)},ds=function(e){var n=vt(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Eo=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},Ht=function(e,n){var t=n&&vt(e)[Jn]!=="matrix(1, 0, 0, 1, 0, 0)"&&$.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return t&&t.progress(0).kill(),r},Rn=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},yi=function(e){var n=[],t=e.labels,r=e.duration(),o;for(o in t)n.push(t[o]/r);return n},gs=function(e){return function(n){return $.utils.snap(yi(e),n)}},ho=function(e){var n=$.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(r,o){return r-o});return t?function(r,o,l){l===void 0&&(l=.001);var f;if(!o)return n(r);if(o>0){for(r-=l,f=0;f<t.length;f++)if(t[f]>=r)return t[f];return t[f-1]}else for(f=t.length,r+=l;f--;)if(t[f]<=r)return t[f];return t[0]}:function(r,o,l){l===void 0&&(l=.001);var f=n(r);return!o||Math.abs(f-r)<l||f-r<0==o<0?f:n(o<0?r-e:r+e)}},ms=function(e){return function(n,t){return ho(yi(e))(n,t.direction)}},cn=function(e,n,t,r){return t.split(",").forEach(function(o){return e(n,o,r)})},Ye=function(e,n,t,r,o){return e.addEventListener(n,t,{passive:!r,capture:!!o})},je=function(e,n,t,r){return e.removeEventListener(n,t,!!r)},un=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Ao={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},fn={toggleActions:"play",anticipatePin:0},In={top:0,left:0,center:.5,bottom:1,right:1},vn=function(e,n){if(yt(e)){var t=e.indexOf("="),r=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(r*=n/100),e=e.substr(0,t-1)),e=r+(e in In?In[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},pn=function(e,n,t,r,o,l,f,_){var R=o.startColor,I=o.endColor,T=o.fontSize,v=o.indent,y=o.fontWeight,D=Ee.createElement("div"),A=pr(t)||$t(t,"pinType")==="fixed",g=e.indexOf("scroller")!==-1,B=A?Te:t,Q=e.indexOf("start")!==-1,H=Q?R:I,M="border-color:"+H+";font-size:"+T+";color:"+H+";font-weight:"+y+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return M+="position:"+((g||_)&&A?"fixed;":"absolute;"),(g||_||!A)&&(M+=(r===He?uo:fo)+":"+(l+parseFloat(v))+"px;"),f&&(M+="box-sizing:border-box;text-align:left;width:"+f.offsetWidth+"px;"),D._isStart=Q,D.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),D.style.cssText=M,D.innerText=n||n===0?e+"-"+n:e,B.children[0]?B.insertBefore(D,B.children[0]):B.appendChild(D),D._offset=D["offset"+r.op.d2],Sn(D,0,r,Q),D},Sn=function(e,n,t,r){var o={display:"block"},l=t[r?"os2":"p2"],f=t[r?"p2":"os2"];e._isFlipped=r,o[t.a+"Percent"]=r?-100:0,o[t.a]=r?"1px":0,o["border"+l+Pr]=1,o["border"+f+Pr]=0,o[t.p]=n+"px",$.set(e,o)},pe=[],no={},Jr,ko=function(){return nt()-St>34&&(Jr||(Jr=requestAnimationFrame(Gt)))},xr=function(){(!at||!at.isPressed||at.startX>Te.clientWidth)&&(de.cache++,at?Jr||(Jr=requestAnimationFrame(Gt)):Gt(),St||dr("scrollStart"),St=nt())},jn=function(){ui=he.innerWidth,ci=he.innerHeight},Fr=function(e){de.cache++,(e===!0||!et&&!li&&!Ee.fullscreenElement&&!Ee.webkitFullscreenElement&&(!eo||ui!==he.innerWidth||Math.abs(he.innerHeight-ci)>he.innerHeight*.25))&&An.restart(!0)},hr={},ys=[],xi=function p(){return je(le,"scrollEnd",p)||ar(!0)},dr=function(e){return hr[e]&&hr[e].map(function(n){return n()})||ys},mt=[],bi=function(e){for(var n=0;n<mt.length;n+=5)(!e||mt[n+4]&&mt[n+4].query===e)&&(mt[n].style.cssText=mt[n+1],mt[n].getBBox&&mt[n].setAttribute("transform",mt[n+2]||""),mt[n+3].uncache=1)},go=function(e,n){var t;for(lt=0;lt<pe.length;lt++)t=pe[lt],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));kn=!0,n&&bi(n),n||dr("revert")},wi=function(e,n){de.cache++,(n||!ct)&&de.forEach(function(t){return ot(t)&&t.cacheID++&&(t.rec=0)}),yt(e)&&(he.history.scrollRestoration=lo=e)},ct,ur=0,Ro,xs=function(){if(Ro!==ur){var e=Ro=ur;requestAnimationFrame(function(){return e===ur&&ar(!0)})}},_i=function(){Te.appendChild(Tr),co=!at&&Tr.offsetHeight||he.innerHeight,Te.removeChild(Tr)},Io=function(e){return Kr(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},ar=function(e,n){if(xt=Ee.documentElement,Te=Ee.body,ao=[he,Ee,xt,Te],St&&!e&&!kn){Ye(le,"scrollEnd",xi);return}_i(),ct=le.isRefreshing=!0,de.forEach(function(r){return ot(r)&&++r.cacheID&&(r.rec=r())});var t=dr("refreshInit");ai&&le.sort(),n||go(),de.forEach(function(r){ot(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),pe.slice(0).forEach(function(r){return r.refresh()}),kn=!1,pe.forEach(function(r){if(r._subPinOffset&&r.pin){var o=r.vars.horizontal?"offsetWidth":"offsetHeight",l=r.pin[o];r.revert(!0,1),r.adjustPinSpacing(r.pin[o]-l),r.refresh()}}),ro=1,Io(!0),pe.forEach(function(r){var o=zt(r.scroller,r._dir),l=r.vars.end==="max"||r._endClamp&&r.end>o,f=r._startClamp&&r.start>=o;(l||f)&&r.setPositions(f?o-1:r.start,l?Math.max(f?o:r.start+1,o):r.end,!0)}),Io(!1),ro=0,t.forEach(function(r){return r&&r.render&&r.render(-1)}),de.forEach(function(r){ot(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),wi(lo,1),An.pause(),ur++,ct=2,Gt(2),pe.forEach(function(r){return ot(r.vars.onRefresh)&&r.vars.onRefresh(r)}),ct=le.isRefreshing=!1,dr("refresh")},oo=0,Tn=1,Zr,Gt=function(e){if(e===2||!ct&&!kn){le.isUpdating=!0,Zr&&Zr.update(0);var n=pe.length,t=nt(),r=t-Gn>=50,o=n&&pe[0].scroll();if(Tn=oo>o?-1:1,ct||(oo=o),r&&(St&&!zn&&t-St>200&&(St=0,dr("scrollEnd")),Nr=Gn,Gn=t),Tn<0){for(lt=n;lt-- >0;)pe[lt]&&pe[lt].update(0,r);Tn=1}else for(lt=0;lt<n;lt++)pe[lt]&&pe[lt].update(0,r);le.isUpdating=!1}Jr=0},io=[gi,mi,fo,uo,_t+qr,_t+Yr,_t+Xr,_t+Vr,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Cn=io.concat([lr,cr,"boxSizing","max"+Pr,"max"+po,"position",_t,ze,ze+Xr,ze+Yr,ze+qr,ze+Vr]),bs=function(e,n,t){Cr(t);var r=e._gsap;if(r.spacerIsNative)Cr(r.spacerState);else if(e._gsap.swappedIn){var o=n.parentNode;o&&(o.insertBefore(e,n),o.removeChild(n))}e._gsap.swappedIn=!1},Yn=function(e,n,t,r){if(!e._gsap.swappedIn){for(var o=io.length,l=n.style,f=e.style,_;o--;)_=io[o],l[_]=t[_];l.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(l.display="inline-block"),f[fo]=f[uo]="auto",l.flexBasis=t.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[lr]=Rn(e,ut)+Be,l[cr]=Rn(e,He)+Be,l[ze]=f[_t]=f[mi]=f[gi]="0",Cr(r),f[lr]=f["max"+Pr]=t[lr],f[cr]=f["max"+po]=t[cr],f[ze]=t[ze],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},ws=/([A-Z])/g,Cr=function(e){if(e){var n=e.t.style,t=e.length,r=0,o,l;for((e.t._gsap||$.core.getCache(e.t)).uncache=1;r<t;r+=2)l=e[r+1],o=e[r],l?n[o]=l:n[o]&&n.removeProperty(o.replace(ws,"-$1").toLowerCase())}},hn=function(e){for(var n=Cn.length,t=e.style,r=[],o=0;o<n;o++)r.push(Cn[o],t[Cn[o]]);return r.t=e,r},_s=function(e,n,t){for(var r=[],o=e.length,l=t?8:0,f;l<o;l+=2)f=e[l],r.push(f,f in n?n[f]:e[l+1]);return r.t=e.t,r},Pn={left:0,top:0},Do=function(e,n,t,r,o,l,f,_,R,I,T,v,y,D){ot(e)&&(e=e(_)),yt(e)&&e.substr(0,3)==="max"&&(e=v+(e.charAt(4)==="="?vn("0"+e.substr(3),t):0));var A=y?y.time():0,g,B,Q;if(y&&y.seek(0),isNaN(e)||(e=+e),Br(e))y&&(e=$.utils.mapRange(y.scrollTrigger.start,y.scrollTrigger.end,0,v,e)),f&&Sn(f,t,r,!0);else{ot(n)&&(n=n(_));var H=(e||"0").split(" "),M,W,j,z;Q=pt(n,_)||Te,M=Ht(Q)||{},(!M||!M.left&&!M.top)&&vt(Q).display==="none"&&(z=Q.style.display,Q.style.display="block",M=Ht(Q),z?Q.style.display=z:Q.style.removeProperty("display")),W=vn(H[0],M[r.d]),j=vn(H[1]||"0",t),e=M[r.p]-R[r.p]-I+W+o-j,f&&Sn(f,j,r,t-j<20||f._isStart&&j>20),t-=t-j}if(D&&(_[D]=e||-.001,e<0&&(e=0)),l){var G=e+t,X=l._isStart;g="scroll"+r.d2,Sn(l,G,r,X&&G>20||!X&&(T?Math.max(Te[g],xt[g]):l.parentNode[g])<=G+1),T&&(R=Ht(f),T&&(l.style[r.op.p]=R[r.op.p]-r.op.m-l._offset+Be))}return y&&Q&&(g=Ht(Q),y.seek(v),B=Ht(Q),y._caScrollDist=g[r.p]-B[r.p],e=e/y._caScrollDist*v),y&&y.seek(A),y?e:Math.round(e)},vs=/(webkit|moz|length|cssText|inset)/i,Oo=function(e,n,t,r){if(e.parentNode!==n){var o=e.style,l,f;if(n===Te){e._stOrig=o.cssText,f=vt(e);for(l in f)!+l&&!vs.test(l)&&f[l]&&typeof o[l]=="string"&&l!=="0"&&(o[l]=f[l]);o.top=t,o.left=r}else o.cssText=e._stOrig;$.core.getCache(e).uncache=1,n.appendChild(e)}},vi=function(e,n,t){var r=n,o=r;return function(l){var f=Math.round(e());return f!==r&&f!==o&&Math.abs(f-r)>3&&Math.abs(f-o)>3&&(l=f,t&&t()),o=r,r=Math.round(l),r}},dn=function(e,n,t){var r={};r[n.p]="+="+t,$.set(e,r)},No=function(e,n){var t=Kt(e,n),r="_scroll"+n.p2,o=function l(f,_,R,I,T){var v=l.tween,y=_.onComplete,D={};R=R||t();var A=vi(t,R,function(){v.kill(),l.tween=0});return T=I&&T||0,I=I||f-R,v&&v.kill(),_[r]=f,_.inherit=!1,_.modifiers=D,D[r]=function(){return A(R+I*v.ratio+T*v.ratio*v.ratio)},_.onUpdate=function(){de.cache++,l.tween&&Gt()},_.onComplete=function(){l.tween=0,y&&y.call(v)},v=l.tween=$.to(e,_),v};return e[r]=t,t.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},Ye(e,"wheel",t.wheelHandler),le.isTouch&&Ye(e,"touchmove",t.wheelHandler),o},le=function(){function p(n,t){br||p.register($)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),to(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!zr){this.update=this.refresh=this.kill=Nt;return}t=Eo(yt(t)||Br(t)||t.nodeType?{trigger:t}:t,fn);var o=t,l=o.onUpdate,f=o.toggleClass,_=o.id,R=o.onToggle,I=o.onRefresh,T=o.scrub,v=o.trigger,y=o.pin,D=o.pinSpacing,A=o.invalidateOnRefresh,g=o.anticipatePin,B=o.onScrubComplete,Q=o.onSnapComplete,H=o.once,M=o.snap,W=o.pinReparent,j=o.pinSpacer,z=o.containerAnimation,G=o.fastScrollEnd,X=o.preventOverlaps,O=t.horizontal||t.containerAnimation&&t.horizontal!==!1?ut:He,ee=!T&&T!==0,k=pt(t.scroller||he),J=$.core.getCache(k),K=pr(k),ne=("pinType"in t?t.pinType:$t(k,"pinType")||K&&"fixed")==="fixed",V=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],L=ee&&t.toggleActions.split(" "),P="markers"in t?t.markers:fn.markers,te=K?0:parseFloat(vt(k)["border"+O.p2+Pr])||0,h=this,ge=t.onRefreshInit&&function(){return t.onRefreshInit(h)},ye=ps(k,K,O),Ue=hs(k,K),b=0,c=0,s=0,i=Kt(k,O),x,N,w,E,F,S,m,C,U,u,d,a,Y,q,ue,xe,_e,me,be,Se,Ge,Ce,Oe,At,Me,Wt,ft,Ne,kt,Ve,ht,fe,dt,Tt,Ct,Pt,Jt,gr,Bt;if(h._startClamp=h._endClamp=!1,h._dir=O,g*=45,h.scroller=k,h.scroll=z?z.time.bind(z):i,E=i(),h.vars=t,r=r||t.animation,"refreshPriority"in t&&(ai=1,t.refreshPriority===-9999&&(Zr=h)),J.tweenScroll=J.tweenScroll||{top:No(k,He),left:No(k,ut)},h.tweenTo=x=J.tweenScroll[O.p],h.scrubDuration=function(Z){dt=Br(Z)&&Z,dt?fe?fe.duration(Z):fe=$.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:dt,paused:!0,onComplete:function(){return B&&B(h)}}):(fe&&fe.progress(1).kill(),fe=0)},r&&(r.vars.lazy=!1,r._initted&&!h.isReverted||r.vars.immediateRender!==!1&&t.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),h.animation=r.pause(),r.scrollTrigger=h,h.scrubDuration(T),Ve=0,_||(_=r.vars.id)),M&&((!ir(M)||M.push)&&(M={snapTo:M}),"scrollBehavior"in Te.style&&$.set(K?[Te,xt]:k,{scrollBehavior:"auto"}),de.forEach(function(Z){return ot(Z)&&Z.target===(K?Ee.scrollingElement||xt:k)&&(Z.smooth=!1)}),w=ot(M.snapTo)?M.snapTo:M.snapTo==="labels"?gs(r):M.snapTo==="labelsDirectional"?ms(r):M.directional!==!1?function(Z,ie){return ho(M.snapTo)(Z,nt()-c<500?0:ie.direction)}:$.utils.snap(M.snapTo),Tt=M.duration||{min:.1,max:2},Tt=ir(Tt)?jr(Tt.min,Tt.max):jr(Tt,Tt),Ct=$.delayedCall(M.delay||dt/2||.1,function(){var Z=i(),ie=nt()-c<500,re=x.tween;if((ie||Math.abs(h.getVelocity())<10)&&!re&&!zn&&b!==Z){var se=(Z-S)/q,We=r&&!ee?r.totalProgress():se,we=ie?0:(We-ht)/(nt()-Nr)*1e3||0,Ie=$.utils.clamp(-se,1-se,yr(we/2)*we/.185),$e=se+(M.inertia===!1?0:Ie),Re,Ae,Pe=M,Mt=Pe.onStart,ke=Pe.onInterrupt,gt=Pe.onComplete;if(Re=w($e,h),Br(Re)||(Re=$e),Ae=Math.max(0,Math.round(S+Re*q)),Z<=m&&Z>=S&&Ae!==Z){if(re&&!re._initted&&re.data<=yr(Ae-Z))return;M.inertia===!1&&(Ie=Re-se),x(Ae,{duration:Tt(yr(Math.max(yr($e-We),yr(Re-We))*.185/we/.05||0)),ease:M.ease||"power3",data:yr(Ae-Z),onInterrupt:function(){return Ct.restart(!0)&&ke&&ke(h)},onComplete:function(){h.update(),b=i(),r&&!ee&&(fe?fe.resetTo("totalProgress",Re,r._tTime/r._tDur):r.progress(Re)),Ve=ht=r&&!ee?r.totalProgress():h.progress,Q&&Q(h),gt&&gt(h)}},Z,Ie*q,Ae-Z-Ie*q),Mt&&Mt(h,x.tween)}}else h.isActive&&b!==Z&&Ct.restart(!0)}).pause()),_&&(no[_]=h),v=h.trigger=pt(v||y!==!0&&y),Bt=v&&v._gsap&&v._gsap.stRevert,Bt&&(Bt=Bt(h)),y=y===!0?v:pt(y),yt(f)&&(f={targets:v,className:f}),y&&(D===!1||D===_t||(D=!D&&y.parentNode&&y.parentNode.style&&vt(y.parentNode).display==="flex"?!1:ze),h.pin=y,N=$.core.getCache(y),N.spacer?ue=N.pinState:(j&&(j=pt(j),j&&!j.nodeType&&(j=j.current||j.nativeElement),N.spacerIsNative=!!j,j&&(N.spacerState=hn(j))),N.spacer=me=j||Ee.createElement("div"),me.classList.add("pin-spacer"),_&&me.classList.add("pin-spacer-"+_),N.pinState=ue=hn(y)),t.force3D!==!1&&$.set(y,{force3D:!0}),h.spacer=me=N.spacer,kt=vt(y),At=kt[D+O.os2],Se=$.getProperty(y),Ge=$.quickSetter(y,O.a,Be),Yn(y,me,kt),_e=hn(y)),P){a=ir(P)?Eo(P,Ao):Ao,u=pn("scroller-start",_,k,O,a,0),d=pn("scroller-end",_,k,O,a,0,u),be=u["offset"+O.op.d2];var Mr=pt($t(k,"content")||k);C=this.markerStart=pn("start",_,Mr,O,a,be,0,z),U=this.markerEnd=pn("end",_,Mr,O,a,be,0,z),z&&(gr=$.quickSetter([C,U],O.a,Be)),!ne&&!(Lt.length&&$t(k,"fixedMarkers")===!0)&&(ds(K?Te:k),$.set([u,d],{force3D:!0}),Wt=$.quickSetter(u,O.a,Be),Ne=$.quickSetter(d,O.a,Be))}if(z){var ae=z.vars.onUpdate,oe=z.vars.onUpdateParams;z.eventCallback("onUpdate",function(){h.update(0,0,1),ae&&ae.apply(z,oe||[])})}if(h.previous=function(){return pe[pe.indexOf(h)-1]},h.next=function(){return pe[pe.indexOf(h)+1]},h.revert=function(Z,ie){if(!ie)return h.kill(!0);var re=Z!==!1||!h.enabled,se=et;re!==h.isReverted&&(re&&(Pt=Math.max(i(),h.scroll.rec||0),s=h.progress,Jt=r&&r.progress()),C&&[C,U,u,d].forEach(function(We){return We.style.display=re?"none":"block"}),re&&(et=h,h.update(re)),y&&(!W||!h.isActive)&&(re?bs(y,me,ue):Yn(y,me,vt(y),Me)),re||h.update(re),et=se,h.isReverted=re)},h.refresh=function(Z,ie,re,se){if(!((et||!h.enabled)&&!ie)){if(y&&Z&&St){Ye(p,"scrollEnd",xi);return}!ct&&ge&&ge(h),et=h,x.tween&&!re&&(x.tween.kill(),x.tween=0),fe&&fe.pause(),A&&r&&r.revert({kill:!1}).invalidate(),h.isReverted||h.revert(!0,!0),h._subPinOffset=!1;var We=ye(),we=Ue(),Ie=z?z.duration():zt(k,O),$e=q<=.01,Re=0,Ae=se||0,Pe=ir(re)?re.end:t.end,Mt=t.endTrigger||v,ke=ir(re)?re.start:t.start||(t.start===0||!v?0:y?"0 0":"0 100%"),gt=h.pinnedContainer=t.pinnedContainer&&pt(t.pinnedContainer,h),Rt=v&&Math.max(0,pe.indexOf(h))||0,Xe=Rt,qe,Ke,er,tn,Je,Le,It,Ln,mo,Er,Dt,Ar,rn;for(P&&ir(re)&&(Ar=$.getProperty(u,O.p),rn=$.getProperty(d,O.p));Xe-- >0;)Le=pe[Xe],Le.end||Le.refresh(0,1)||(et=h),It=Le.pin,It&&(It===v||It===y||It===gt)&&!Le.isReverted&&(Er||(Er=[]),Er.unshift(Le),Le.revert(!0,!0)),Le!==pe[Xe]&&(Rt--,Xe--);for(ot(ke)&&(ke=ke(h)),ke=To(ke,"start",h),S=Do(ke,v,We,O,i(),C,u,h,we,te,ne,Ie,z,h._startClamp&&"_startClamp")||(y?-.001:0),ot(Pe)&&(Pe=Pe(h)),yt(Pe)&&!Pe.indexOf("+=")&&(~Pe.indexOf(" ")?Pe=(yt(ke)?ke.split(" ")[0]:"")+Pe:(Re=vn(Pe.substr(2),We),Pe=yt(ke)?ke:(z?$.utils.mapRange(0,z.duration(),z.scrollTrigger.start,z.scrollTrigger.end,S):S)+Re,Mt=v)),Pe=To(Pe,"end",h),m=Math.max(S,Do(Pe||(Mt?"100% 0":Ie),Mt,We,O,i()+Re,U,d,h,we,te,ne,Ie,z,h._endClamp&&"_endClamp"))||-.001,Re=0,Xe=Rt;Xe--;)Le=pe[Xe],It=Le.pin,It&&Le.start-Le._pinPush<=S&&!z&&Le.end>0&&(qe=Le.end-(h._startClamp?Math.max(0,Le.start):Le.start),(It===v&&Le.start-Le._pinPush<S||It===gt)&&isNaN(ke)&&(Re+=qe*(1-Le.progress)),It===y&&(Ae+=qe));if(S+=Re,m+=Re,h._startClamp&&(h._startClamp+=Re),h._endClamp&&!ct&&(h._endClamp=m||-.001,m=Math.min(m,zt(k,O))),q=m-S||(S-=.01)&&.001,$e&&(s=$.utils.clamp(0,1,$.utils.normalize(S,m,Pt))),h._pinPush=Ae,C&&Re&&(qe={},qe[O.a]="+="+Re,gt&&(qe[O.p]="-="+i()),$.set([C,U],qe)),y&&!(ro&&h.end>=zt(k,O)))qe=vt(y),tn=O===He,er=i(),Ce=parseFloat(Se(O.a))+Ae,!Ie&&m>1&&(Dt=(K?Ee.scrollingElement||xt:k).style,Dt={style:Dt,value:Dt["overflow"+O.a.toUpperCase()]},K&&vt(Te)["overflow"+O.a.toUpperCase()]!=="scroll"&&(Dt.style["overflow"+O.a.toUpperCase()]="scroll")),Yn(y,me,qe),_e=hn(y),Ke=Ht(y,!0),Ln=ne&&Kt(k,tn?ut:He)(),D?(Me=[D+O.os2,q+Ae+Be],Me.t=me,Xe=D===ze?Rn(y,O)+q+Ae:0,Xe&&(Me.push(O.d,Xe+Be),me.style.flexBasis!=="auto"&&(me.style.flexBasis=Xe+Be)),Cr(Me),gt&&pe.forEach(function(kr){kr.pin===gt&&kr.vars.pinSpacing!==!1&&(kr._subPinOffset=!0)}),ne&&i(Pt)):(Xe=Rn(y,O),Xe&&me.style.flexBasis!=="auto"&&(me.style.flexBasis=Xe+Be)),ne&&(Je={top:Ke.top+(tn?er-S:Ln)+Be,left:Ke.left+(tn?Ln:er-S)+Be,boxSizing:"border-box",position:"fixed"},Je[lr]=Je["max"+Pr]=Math.ceil(Ke.width)+Be,Je[cr]=Je["max"+po]=Math.ceil(Ke.height)+Be,Je[_t]=Je[_t+Xr]=Je[_t+Yr]=Je[_t+qr]=Je[_t+Vr]="0",Je[ze]=qe[ze],Je[ze+Xr]=qe[ze+Xr],Je[ze+Yr]=qe[ze+Yr],Je[ze+qr]=qe[ze+qr],Je[ze+Vr]=qe[ze+Vr],xe=_s(ue,Je,W),ct&&i(0)),r?(mo=r._initted,Hn(1),r.render(r.duration(),!0,!0),Oe=Se(O.a)-Ce+q+Ae,ft=Math.abs(q-Oe)>1,ne&&ft&&xe.splice(xe.length-2,2),r.render(0,!0,!0),mo||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),Hn(0)):Oe=q,Dt&&(Dt.value?Dt.style["overflow"+O.a.toUpperCase()]=Dt.value:Dt.style.removeProperty("overflow-"+O.a));else if(v&&i()&&!z)for(Ke=v.parentNode;Ke&&Ke!==Te;)Ke._pinOffset&&(S-=Ke._pinOffset,m-=Ke._pinOffset),Ke=Ke.parentNode;Er&&Er.forEach(function(kr){return kr.revert(!1,!0)}),h.start=S,h.end=m,E=F=ct?Pt:i(),!z&&!ct&&(E<Pt&&i(Pt),h.scroll.rec=0),h.revert(!1,!0),c=nt(),Ct&&(b=-1,Ct.restart(!0)),et=0,r&&ee&&(r._initted||Jt)&&r.progress()!==Jt&&r.progress(Jt||0,!0).render(r.time(),!0,!0),($e||s!==h.progress||z||A||r&&!r._initted)&&(r&&!ee&&r.totalProgress(z&&S<-.001&&!s?$.utils.normalize(S,m,0):s,!0),h.progress=$e||(E-S)/q===s?0:s),y&&D&&(me._pinOffset=Math.round(h.progress*Oe)),fe&&fe.invalidate(),isNaN(Ar)||(Ar-=$.getProperty(u,O.p),rn-=$.getProperty(d,O.p),dn(u,O,Ar),dn(C,O,Ar-(se||0)),dn(d,O,rn),dn(U,O,rn-(se||0))),$e&&!ct&&h.update(),I&&!ct&&!Y&&(Y=!0,I(h),Y=!1)}},h.getVelocity=function(){return(i()-F)/(nt()-Nr)*1e3||0},h.endAnimation=function(){Ir(h.callbackAnimation),r&&(fe?fe.progress(1):r.paused()?ee||Ir(r,h.direction<0,1):Ir(r,r.reversed()))},h.labelToScroll=function(Z){return r&&r.labels&&(S||h.refresh()||S)+r.labels[Z]/r.duration()*q||0},h.getTrailing=function(Z){var ie=pe.indexOf(h),re=h.direction>0?pe.slice(0,ie).reverse():pe.slice(ie+1);return(yt(Z)?re.filter(function(se){return se.vars.preventOverlaps===Z}):re).filter(function(se){return h.direction>0?se.end<=S:se.start>=m})},h.update=function(Z,ie,re){if(!(z&&!re&&!Z)){var se=ct===!0?Pt:h.scroll(),We=Z?0:(se-S)/q,we=We<0?0:We>1?1:We||0,Ie=h.progress,$e,Re,Ae,Pe,Mt,ke,gt,Rt;if(ie&&(F=E,E=z?i():se,M&&(ht=Ve,Ve=r&&!ee?r.totalProgress():we)),g&&y&&!et&&!an&&St&&(!we&&S<se+(se-F)/(nt()-Nr)*g?we=1e-4:we===1&&m>se+(se-F)/(nt()-Nr)*g&&(we=.9999)),we!==Ie&&h.enabled){if($e=h.isActive=!!we&&we<1,Re=!!Ie&&Ie<1,ke=$e!==Re,Mt=ke||!!we!=!!Ie,h.direction=we>Ie?1:-1,h.progress=we,Mt&&!et&&(Ae=we&&!Ie?0:we===1?1:Ie===1?2:3,ee&&(Pe=!ke&&L[Ae+1]!=="none"&&L[Ae+1]||L[Ae],Rt=r&&(Pe==="complete"||Pe==="reset"||Pe in r))),X&&(ke||Rt)&&(Rt||T||!r)&&(ot(X)?X(h):h.getTrailing(X).forEach(function(er){return er.endAnimation()})),ee||(fe&&!et&&!an?(fe._dp._time-fe._start!==fe._time&&fe.render(fe._dp._time-fe._start),fe.resetTo?fe.resetTo("totalProgress",we,r._tTime/r._tDur):(fe.vars.totalProgress=we,fe.invalidate().restart())):r&&r.totalProgress(we,!!(et&&(c||Z)))),y){if(Z&&D&&(me.style[D+O.os2]=At),!ne)Ge(Lr(Ce+Oe*we));else if(Mt){if(gt=!Z&&we>Ie&&m+1>se&&se+1>=zt(k,O),W)if(!Z&&($e||gt)){var Xe=Ht(y,!0),qe=se-S;Oo(y,Te,Xe.top+(O===He?qe:0)+Be,Xe.left+(O===He?0:qe)+Be)}else Oo(y,me);Cr($e||gt?xe:_e),ft&&we<1&&$e||Ge(Ce+(we===1&&!gt?Oe:0))}}M&&!x.tween&&!et&&!an&&Ct.restart(!0),f&&(ke||H&&we&&(we<1||!Un))&&Kr(f.targets).forEach(function(er){return er.classList[$e||H?"add":"remove"](f.className)}),l&&!ee&&!Z&&l(h),Mt&&!et?(ee&&(Rt&&(Pe==="complete"?r.pause().totalProgress(1):Pe==="reset"?r.restart(!0).pause():Pe==="restart"?r.restart(!0):r[Pe]()),l&&l(h)),(ke||!Un)&&(R&&ke&&Wn(h,R),V[Ae]&&Wn(h,V[Ae]),H&&(we===1?h.kill(!1,1):V[Ae]=0),ke||(Ae=we===1?1:3,V[Ae]&&Wn(h,V[Ae]))),G&&!$e&&Math.abs(h.getVelocity())>(Br(G)?G:2500)&&(Ir(h.callbackAnimation),fe?fe.progress(1):Ir(r,Pe==="reverse"?1:!we,1))):ee&&l&&!et&&l(h)}if(Ne){var Ke=z?se/z.duration()*(z._caScrollDist||0):se;Wt(Ke+(u._isFlipped?1:0)),Ne(Ke)}gr&&gr(-se/z.duration()*(z._caScrollDist||0))}},h.enable=function(Z,ie){h.enabled||(h.enabled=!0,Ye(k,"resize",Fr),K||Ye(k,"scroll",xr),ge&&Ye(p,"refreshInit",ge),Z!==!1&&(h.progress=s=0,E=F=b=i()),ie!==!1&&h.refresh())},h.getTween=function(Z){return Z&&x?x.tween:fe},h.setPositions=function(Z,ie,re,se){if(z){var We=z.scrollTrigger,we=z.duration(),Ie=We.end-We.start;Z=We.start+Ie*Z/we,ie=We.start+Ie*ie/we}h.refresh(!1,!1,{start:Co(Z,re&&!!h._startClamp),end:Co(ie,re&&!!h._endClamp)},se),h.update()},h.adjustPinSpacing=function(Z){if(Me&&Z){var ie=Me.indexOf(O.d)+1;Me[ie]=parseFloat(Me[ie])+Z+Be,Me[1]=parseFloat(Me[1])+Z+Be,Cr(Me)}},h.disable=function(Z,ie){if(h.enabled&&(Z!==!1&&h.revert(!0,!0),h.enabled=h.isActive=!1,ie||fe&&fe.pause(),Pt=0,N&&(N.uncache=1),ge&&je(p,"refreshInit",ge),Ct&&(Ct.pause(),x.tween&&x.tween.kill()&&(x.tween=0)),!K)){for(var re=pe.length;re--;)if(pe[re].scroller===k&&pe[re]!==h)return;je(k,"resize",Fr),K||je(k,"scroll",xr)}},h.kill=function(Z,ie){h.disable(Z,ie),fe&&!ie&&fe.kill(),_&&delete no[_];var re=pe.indexOf(h);re>=0&&pe.splice(re,1),re===lt&&Tn>0&&lt--,re=0,pe.forEach(function(se){return se.scroller===h.scroller&&(re=1)}),re||ct||(h.scroll.rec=0),r&&(r.scrollTrigger=null,Z&&r.revert({kill:!1}),ie||r.kill()),C&&[C,U,u,d].forEach(function(se){return se.parentNode&&se.parentNode.removeChild(se)}),Zr===h&&(Zr=0),y&&(N&&(N.uncache=1),re=0,pe.forEach(function(se){return se.pin===y&&re++}),re||(N.spacer=0)),t.onKill&&t.onKill(h)},pe.push(h),h.enable(!1,!1),Bt&&Bt(h),r&&r.add&&!q){var ve=h.update;h.update=function(){h.update=ve,de.cache++,S||m||h.refresh()},$.delayedCall(.01,h.update),q=.01,S=m=0}else h.refresh();y&&xs()},p.register=function(t){return br||($=t||pi(),fi()&&window.document&&p.enable(),br=zr),br},p.defaults=function(t){if(t)for(var r in t)fn[r]=t[r];return fn},p.disable=function(t,r){zr=0,pe.forEach(function(l){return l[r?"kill":"disable"](t)}),je(he,"wheel",xr),je(Ee,"scroll",xr),clearInterval(sn),je(Ee,"touchcancel",Nt),je(Te,"touchstart",Nt),cn(je,Ee,"pointerdown,touchstart,mousedown",Po),cn(je,Ee,"pointerup,touchend,mouseup",Mo),An.kill(),ln(je);for(var o=0;o<de.length;o+=3)un(je,de[o],de[o+1]),un(je,de[o],de[o+2])},p.enable=function(){if(he=window,Ee=document,xt=Ee.documentElement,Te=Ee.body,$&&(Kr=$.utils.toArray,jr=$.utils.clamp,to=$.core.context||Nt,Hn=$.core.suppressOverwrites||Nt,lo=he.history.scrollRestoration||"auto",oo=he.pageYOffset||0,$.core.globals("ScrollTrigger",p),Te)){zr=1,Tr=document.createElement("div"),Tr.style.height="100vh",Tr.style.position="absolute",_i(),fs(),De.register($),p.isTouch=De.isTouch,Xt=De.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),eo=De.isTouch===1,Ye(he,"wheel",xr),ao=[he,Ee,xt,Te],$.matchMedia?(p.matchMedia=function(R){var I=$.matchMedia(),T;for(T in R)I.add(T,R[T]);return I},$.addEventListener("matchMediaInit",function(){return go()}),$.addEventListener("matchMediaRevert",function(){return bi()}),$.addEventListener("matchMedia",function(){ar(0,1),dr("matchMedia")}),$.matchMedia().add("(orientation: portrait)",function(){return jn(),jn})):console.warn("Requires GSAP 3.11.0 or later"),jn(),Ye(Ee,"scroll",xr);var t=Te.hasAttribute("style"),r=Te.style,o=r.borderTopStyle,l=$.core.Animation.prototype,f,_;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",f=Ht(Te),He.m=Math.round(f.top+He.sc())||0,ut.m=Math.round(f.left+ut.sc())||0,o?r.borderTopStyle=o:r.removeProperty("border-top-style"),t||(Te.setAttribute("style",""),Te.removeAttribute("style")),sn=setInterval(ko,250),$.delayedCall(.5,function(){return an=0}),Ye(Ee,"touchcancel",Nt),Ye(Te,"touchstart",Nt),cn(Ye,Ee,"pointerdown,touchstart,mousedown",Po),cn(Ye,Ee,"pointerup,touchend,mouseup",Mo),Jn=$.utils.checkPrefix("transform"),Cn.push(Jn),br=nt(),An=$.delayedCall(.2,ar).pause(),wr=[Ee,"visibilitychange",function(){var R=he.innerWidth,I=he.innerHeight;Ee.hidden?(vo=R,So=I):(vo!==R||So!==I)&&Fr()},Ee,"DOMContentLoaded",ar,he,"load",ar,he,"resize",Fr],ln(Ye),pe.forEach(function(R){return R.enable(0,1)}),_=0;_<de.length;_+=3)un(je,de[_],de[_+1]),un(je,de[_],de[_+2])}},p.config=function(t){"limitCallbacks"in t&&(Un=!!t.limitCallbacks);var r=t.syncInterval;r&&clearInterval(sn)||(sn=r)&&setInterval(ko,r),"ignoreMobileResize"in t&&(eo=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(ln(je)||ln(Ye,t.autoRefreshEvents||"none"),li=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,r){var o=pt(t),l=de.indexOf(o),f=pr(o);~l&&de.splice(l,f?6:2),r&&(f?Lt.unshift(he,r,Te,r,xt,r):Lt.unshift(o,r))},p.clearMatchMedia=function(t){pe.forEach(function(r){return r._ctx&&r._ctx.query===t&&r._ctx.kill(!0,!0)})},p.isInViewport=function(t,r,o){var l=(yt(t)?pt(t):t).getBoundingClientRect(),f=l[o?lr:cr]*r||0;return o?l.right-f>0&&l.left+f<he.innerWidth:l.bottom-f>0&&l.top+f<he.innerHeight},p.positionInViewport=function(t,r,o){yt(t)&&(t=pt(t));var l=t.getBoundingClientRect(),f=l[o?lr:cr],_=r==null?f/2:r in In?In[r]*f:~r.indexOf("%")?parseFloat(r)*f/100:parseFloat(r)||0;return o?(l.left+_)/he.innerWidth:(l.top+_)/he.innerHeight},p.killAll=function(t){if(pe.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),t!==!0){var r=hr.killAll||[];hr={},r.forEach(function(o){return o()})}},p}();le.version="3.12.7";le.saveStyles=function(p){return p?Kr(p).forEach(function(e){if(e&&e.style){var n=mt.indexOf(e);n>=0&&mt.splice(n,5),mt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),$.core.getCache(e),to())}}):mt};le.revert=function(p,e){return go(!p,e)};le.create=function(p,e){return new le(p,e)};le.refresh=function(p){return p?Fr(!0):(br||le.register())&&ar(!0)};le.update=function(p){return++de.cache&&Gt(p===!0?2:0)};le.clearScrollMemory=wi;le.maxScroll=function(p,e){return zt(p,e?ut:He)};le.getScrollFunc=function(p,e){return Kt(pt(p),e?ut:He)};le.getById=function(p){return no[p]};le.getAll=function(){return pe.filter(function(p){return p.vars.id!=="ScrollSmoother"})};le.isScrolling=function(){return!!St};le.snapDirectional=ho;le.addEventListener=function(p,e){var n=hr[p]||(hr[p]=[]);~n.indexOf(e)||n.push(e)};le.removeEventListener=function(p,e){var n=hr[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};le.batch=function(p,e){var n=[],t={},r=e.interval||.016,o=e.batchMax||1e9,l=function(R,I){var T=[],v=[],y=$.delayedCall(r,function(){I(T,v),T=[],v=[]}).pause();return function(D){T.length||y.restart(!0),T.push(D.trigger),v.push(D),o<=T.length&&y.progress(1)}},f;for(f in e)t[f]=f.substr(0,2)==="on"&&ot(e[f])&&f!=="onRefreshInit"?l(f,e[f]):e[f];return ot(o)&&(o=o(),Ye(le,"refresh",function(){return o=e.batchMax()})),Kr(p).forEach(function(_){var R={};for(f in t)R[f]=t[f];R.trigger=_,n.push(le.create(R))}),n};var zo=function(e,n,t,r){return n>r?e(r):n<0&&e(0),t>r?(r-n)/(t-n):t<0?n/(n-t):1},Vn=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(De.isTouch?" pinch-zoom":""):"none",e===xt&&p(Te,n)},gn={auto:1,scroll:1},Ss=function(e){var n=e.event,t=e.target,r=e.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,l=o._gsap||$.core.getCache(o),f=nt(),_;if(!l._isScrollT||f-l._isScrollT>2e3){for(;o&&o!==Te&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(gn[(_=vt(o)).overflowY]||gn[_.overflowX]));)o=o.parentNode;l._isScroll=o&&o!==t&&!pr(o)&&(gn[(_=vt(o)).overflowY]||gn[_.overflowX]),l._isScrollT=f}(l._isScroll||r==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},Si=function(e,n,t,r){return De.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:r=r&&Ss,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return t&&Ye(Ee,De.eventTypes[0],Bo,!1,!0)},onDisable:function(){return je(Ee,De.eventTypes[0],Bo,!0)}})},Ts=/(input|label|select|textarea)/i,Lo,Bo=function(e){var n=Ts.test(e.target.tagName);(n||Lo)&&(e._gsapAllow=!0,Lo=n)},Cs=function(e){ir(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,r=n.momentum,o=n.allowNestedScroll,l=n.onRelease,f,_,R=pt(e.target)||xt,I=$.core.globals().ScrollSmoother,T=I&&I.get(),v=Xt&&(e.content&&pt(e.content)||T&&e.content!==!1&&!T.smooth()&&T.content()),y=Kt(R,He),D=Kt(R,ut),A=1,g=(De.isTouch&&he.visualViewport?he.visualViewport.scale*he.visualViewport.width:he.outerWidth)/he.innerWidth,B=0,Q=ot(r)?function(){return r(f)}:function(){return r||2.8},H,M,W=Si(R,e.type,!0,o),j=function(){return M=!1},z=Nt,G=Nt,X=function(){_=zt(R,He),G=jr(Xt?1:0,_),t&&(z=jr(0,zt(R,ut))),H=ur},O=function(){v._gsap.y=Lr(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},ee=function(){if(M){requestAnimationFrame(j);var P=Lr(f.deltaY/2),te=G(y.v-P);if(v&&te!==y.v+y.offset){y.offset=te-y.v;var h=Lr((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+h+", 0, 1)",v._gsap.y=h+"px",y.cacheID=de.cache,Gt()}return!0}y.offset&&O(),M=!0},k,J,K,ne,V=function(){X(),k.isActive()&&k.vars.scrollY>_&&(y()>_?k.progress(1)&&y(_):k.resetTo("scrollY",_))};return v&&$.set(v,{y:"+=0"}),e.ignoreCheck=function(L){return Xt&&L.type==="touchmove"&&ee()||A>1.05&&L.type!=="touchstart"||f.isGesturing||L.touches&&L.touches.length>1},e.onPress=function(){M=!1;var L=A;A=Lr((he.visualViewport&&he.visualViewport.scale||1)/g),k.pause(),L!==A&&Vn(R,A>1.01?!0:t?!1:"x"),J=D(),K=y(),X(),H=ur},e.onRelease=e.onGestureStart=function(L,P){if(y.offset&&O(),!P)ne.restart(!0);else{de.cache++;var te=Q(),h,ge;t&&(h=D(),ge=h+te*.05*-L.velocityX/.227,te*=zo(D,h,ge,zt(R,ut)),k.vars.scrollX=z(ge)),h=y(),ge=h+te*.05*-L.velocityY/.227,te*=zo(y,h,ge,zt(R,He)),k.vars.scrollY=G(ge),k.invalidate().duration(te).play(.01),(Xt&&k.vars.scrollY>=_||h>=_-1)&&$.to({},{onUpdate:V,duration:te})}l&&l(L)},e.onWheel=function(){k._ts&&k.pause(),nt()-B>1e3&&(H=0,B=nt())},e.onChange=function(L,P,te,h,ge){if(ur!==H&&X(),P&&t&&D(z(h[2]===P?J+(L.startX-L.x):D()+P-h[1])),te){y.offset&&O();var ye=ge[2]===te,Ue=ye?K+L.startY-L.y:y()+te-ge[1],b=G(Ue);ye&&Ue!==b&&(K+=b-Ue),y(b)}(te||P)&&Gt()},e.onEnable=function(){Vn(R,t?!1:"x"),le.addEventListener("refresh",V),Ye(he,"resize",V),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=D.smooth=!1),W.enable()},e.onDisable=function(){Vn(R,!0),je(he,"resize",V),le.removeEventListener("refresh",V),W.kill()},e.lockAxis=e.lockAxis!==!1,f=new De(e),f.iOS=Xt,Xt&&!y()&&y(1),Xt&&$.ticker.add(Nt),ne=f._dc,k=$.to(f,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:vi(y,y(),function(){return k.pause()})},onUpdate:Gt,onComplete:ne.vars.onComplete}),f};le.sort=function(p){if(ot(p))return pe.sort(p);var e=he.pageYOffset||0;return le.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+he.innerHeight}),pe.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};le.observe=function(p){return new De(p)};le.normalizeScroll=function(p){if(typeof p>"u")return at;if(p===!0&&at)return at.enable();if(p===!1){at&&at.kill(),at=p;return}var e=p instanceof De?p:Cs(p);return at&&at.target===e.target&&at.kill(),pr(e.target)&&(at=e),e};le.core={_getVelocityProp:Kn,_inputObserver:Si,_scrollers:de,_proxies:Lt,bridge:{ss:function(){St||dr("scrollStart"),St=nt()},ref:function(){return et}}};pi()&&$.registerPlugin(le);var Qr=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(I){I.preventDefault(),t(++p%e.children.length)},!1);function n(I){return e.appendChild(I.dom),I}function t(I){for(var T=0;T<e.children.length;T++)e.children[T].style.display=T===I?"block":"none";p=I}var r=(performance||Date).now(),o=r,l=0,f=n(new Qr.Panel("FPS","#0ff","#002")),_=n(new Qr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var R=n(new Qr.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){l++;var I=(performance||Date).now();if(_.update(I-r,200),I>=o+1e3&&(f.update(l*1e3/(I-o),100),o=I,l=0,R)){var T=performance.memory;R.update(T.usedJSHeapSize/1048576,T.jsHeapSizeLimit/1048576)}return I},update:function(){r=this.end()},domElement:e,setMode:t}};Qr.Panel=function(p,e,n){var t=1/0,r=0,o=Math.round,l=o(window.devicePixelRatio||1),f=80*l,_=48*l,R=3*l,I=2*l,T=3*l,v=15*l,y=74*l,D=30*l,A=document.createElement("canvas");A.width=f,A.height=_,A.style.cssText="width:80px;height:48px";var g=A.getContext("2d");return g.font="bold "+9*l+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,f,_),g.fillStyle=e,g.fillText(p,R,I),g.fillRect(T,v,y,D),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(T,v,y,D),{dom:A,update:function(B,Q){t=Math.min(t,B),r=Math.max(r,B),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,f,v),g.fillStyle=e,g.fillText(o(B)+" "+p+" ("+o(t)+"-"+o(r)+")",R,I),g.drawImage(A,T+l,v,y-l,D,T,v,y-l,D),g.fillRect(T+y-l,v,l,D),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(T+y-l,v,l,o((1-B/Q)*D))}}};class Ti extends Bi{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const r=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(r,n)}this.type="TextGeometry"}}const Ps=Gi;class Dn extends Vo{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,r){const o=this,l=new Xo(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(f){try{n(o.parse(f))}catch(_){r?r(_):console.error(_),o.manager.itemError(e)}},t,r)}parse(e){const n=this;function t(b,c){if(b.nodeType!==1)return;const s=M(b);let i=!1,x=null;switch(b.nodeName){case"svg":c=D(b,c);break;case"style":o(b);break;case"g":c=D(b,c);break;case"path":c=D(b,c),b.hasAttribute("d")&&(x=r(b));break;case"rect":c=D(b,c),x=_(b);break;case"polygon":c=D(b,c),x=R(b);break;case"polyline":c=D(b,c),x=I(b);break;case"circle":c=D(b,c),x=T(b);break;case"ellipse":c=D(b,c),x=v(b);break;case"line":c=D(b,c),x=y(b);break;case"defs":i=!0;break;case"use":c=D(b,c);const E=(b.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),F=b.viewportElement.getElementById(E);F?t(F,c):console.warn("SVGLoader: 'use node' references non-existent node id: "+E);break}x&&(c.fill!==void 0&&c.fill!=="none"&&x.color.setStyle(c.fill,Ps),j(x,ge),k.push(x),x.userData={node:b,style:c});const N=b.childNodes;for(let w=0;w<N.length;w++){const E=N[w];i&&E.nodeName!=="style"&&E.nodeName!=="defs"||t(E,c)}s&&(K.pop(),K.length>0?ge.copy(K[K.length-1]):ge.identity())}function r(b){const c=new Yt,s=new ce,i=new ce,x=new ce;let N=!0,w=!1;const E=b.getAttribute("d");if(E===""||E==="none")return null;const F=E.match(/[a-df-z][^a-df-z]*/ig);for(let S=0,m=F.length;S<m;S++){const C=F[S],U=C.charAt(0),u=C.slice(1).trim();N===!0&&(w=!0,N=!1);let d;switch(U){case"M":d=g(u);for(let a=0,Y=d.length;a<Y;a+=2)s.x=d[a+0],s.y=d[a+1],i.x=s.x,i.y=s.y,a===0?c.moveTo(s.x,s.y):c.lineTo(s.x,s.y),a===0&&x.copy(s);break;case"H":d=g(u);for(let a=0,Y=d.length;a<Y;a++)s.x=d[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&w===!0&&x.copy(s);break;case"V":d=g(u);for(let a=0,Y=d.length;a<Y;a++)s.y=d[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&w===!0&&x.copy(s);break;case"L":d=g(u);for(let a=0,Y=d.length;a<Y;a+=2)s.x=d[a+0],s.y=d[a+1],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&w===!0&&x.copy(s);break;case"C":d=g(u);for(let a=0,Y=d.length;a<Y;a+=6)c.bezierCurveTo(d[a+0],d[a+1],d[a+2],d[a+3],d[a+4],d[a+5]),i.x=d[a+2],i.y=d[a+3],s.x=d[a+4],s.y=d[a+5],a===0&&w===!0&&x.copy(s);break;case"S":d=g(u);for(let a=0,Y=d.length;a<Y;a+=4)c.bezierCurveTo(A(s.x,i.x),A(s.y,i.y),d[a+0],d[a+1],d[a+2],d[a+3]),i.x=d[a+0],i.y=d[a+1],s.x=d[a+2],s.y=d[a+3],a===0&&w===!0&&x.copy(s);break;case"Q":d=g(u);for(let a=0,Y=d.length;a<Y;a+=4)c.quadraticCurveTo(d[a+0],d[a+1],d[a+2],d[a+3]),i.x=d[a+0],i.y=d[a+1],s.x=d[a+2],s.y=d[a+3],a===0&&w===!0&&x.copy(s);break;case"T":d=g(u);for(let a=0,Y=d.length;a<Y;a+=2){const q=A(s.x,i.x),ue=A(s.y,i.y);c.quadraticCurveTo(q,ue,d[a+0],d[a+1]),i.x=q,i.y=ue,s.x=d[a+0],s.y=d[a+1],a===0&&w===!0&&x.copy(s)}break;case"A":d=g(u,[3,4],7);for(let a=0,Y=d.length;a<Y;a+=7){if(d[a+5]==s.x&&d[a+6]==s.y)continue;const q=s.clone();s.x=d[a+5],s.y=d[a+6],i.x=s.x,i.y=s.y,l(c,d[a],d[a+1],d[a+2],d[a+3],d[a+4],q,s),a===0&&w===!0&&x.copy(s)}break;case"m":d=g(u);for(let a=0,Y=d.length;a<Y;a+=2)s.x+=d[a+0],s.y+=d[a+1],i.x=s.x,i.y=s.y,a===0?c.moveTo(s.x,s.y):c.lineTo(s.x,s.y),a===0&&x.copy(s);break;case"h":d=g(u);for(let a=0,Y=d.length;a<Y;a++)s.x+=d[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&w===!0&&x.copy(s);break;case"v":d=g(u);for(let a=0,Y=d.length;a<Y;a++)s.y+=d[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&w===!0&&x.copy(s);break;case"l":d=g(u);for(let a=0,Y=d.length;a<Y;a+=2)s.x+=d[a+0],s.y+=d[a+1],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&w===!0&&x.copy(s);break;case"c":d=g(u);for(let a=0,Y=d.length;a<Y;a+=6)c.bezierCurveTo(s.x+d[a+0],s.y+d[a+1],s.x+d[a+2],s.y+d[a+3],s.x+d[a+4],s.y+d[a+5]),i.x=s.x+d[a+2],i.y=s.y+d[a+3],s.x+=d[a+4],s.y+=d[a+5],a===0&&w===!0&&x.copy(s);break;case"s":d=g(u);for(let a=0,Y=d.length;a<Y;a+=4)c.bezierCurveTo(A(s.x,i.x),A(s.y,i.y),s.x+d[a+0],s.y+d[a+1],s.x+d[a+2],s.y+d[a+3]),i.x=s.x+d[a+0],i.y=s.y+d[a+1],s.x+=d[a+2],s.y+=d[a+3],a===0&&w===!0&&x.copy(s);break;case"q":d=g(u);for(let a=0,Y=d.length;a<Y;a+=4)c.quadraticCurveTo(s.x+d[a+0],s.y+d[a+1],s.x+d[a+2],s.y+d[a+3]),i.x=s.x+d[a+0],i.y=s.y+d[a+1],s.x+=d[a+2],s.y+=d[a+3],a===0&&w===!0&&x.copy(s);break;case"t":d=g(u);for(let a=0,Y=d.length;a<Y;a+=2){const q=A(s.x,i.x),ue=A(s.y,i.y);c.quadraticCurveTo(q,ue,s.x+d[a+0],s.y+d[a+1]),i.x=q,i.y=ue,s.x=s.x+d[a+0],s.y=s.y+d[a+1],a===0&&w===!0&&x.copy(s)}break;case"a":d=g(u,[3,4],7);for(let a=0,Y=d.length;a<Y;a+=7){if(d[a+5]==0&&d[a+6]==0)continue;const q=s.clone();s.x+=d[a+5],s.y+=d[a+6],i.x=s.x,i.y=s.y,l(c,d[a],d[a+1],d[a+2],d[a+3],d[a+4],q,s),a===0&&w===!0&&x.copy(s)}break;case"Z":case"z":c.currentPath.autoClose=!0,c.currentPath.curves.length>0&&(s.copy(x),c.currentPath.currentPoint.copy(s),N=!0);break;default:console.warn(C)}w=!1}return c}function o(b){if(!(!b.sheet||!b.sheet.cssRules||!b.sheet.cssRules.length))for(let c=0;c<b.sheet.cssRules.length;c++){const s=b.sheet.cssRules[c];if(s.type!==1)continue;const i=s.selectorText.split(/,/gm).filter(Boolean).map(x=>x.trim());for(let x=0;x<i.length;x++){const N=Object.fromEntries(Object.entries(s.style).filter(([,w])=>w!==""));J[i[x]]=Object.assign(J[i[x]]||{},N)}}}function l(b,c,s,i,x,N,w,E){if(c==0||s==0){b.lineTo(E.x,E.y);return}i=i*Math.PI/180,c=Math.abs(c),s=Math.abs(s);const F=(w.x-E.x)/2,S=(w.y-E.y)/2,m=Math.cos(i)*F+Math.sin(i)*S,C=-Math.sin(i)*F+Math.cos(i)*S;let U=c*c,u=s*s;const d=m*m,a=C*C,Y=d/U+a/u;if(Y>1){const Oe=Math.sqrt(Y);c=Oe*c,s=Oe*s,U=c*c,u=s*s}const q=U*a+u*d,ue=(U*u-q)/q;let xe=Math.sqrt(Math.max(0,ue));x===N&&(xe=-xe);const _e=xe*c*C/s,me=-xe*s*m/c,be=Math.cos(i)*_e-Math.sin(i)*me+(w.x+E.x)/2,Se=Math.sin(i)*_e+Math.cos(i)*me+(w.y+E.y)/2,Ge=f(1,0,(m-_e)/c,(C-me)/s),Ce=f((m-_e)/c,(C-me)/s,(-m-_e)/c,(-C-me)/s)%(Math.PI*2);b.currentPath.absellipse(be,Se,c,s,Ge,Ge+Ce,N===0,i)}function f(b,c,s,i){const x=b*s+c*i,N=Math.sqrt(b*b+c*c)*Math.sqrt(s*s+i*i);let w=Math.acos(Math.max(-1,Math.min(1,x/N)));return b*i-c*s<0&&(w=-w),w}function _(b){const c=H(b.getAttribute("x")||0),s=H(b.getAttribute("y")||0),i=H(b.getAttribute("rx")||b.getAttribute("ry")||0),x=H(b.getAttribute("ry")||b.getAttribute("rx")||0),N=H(b.getAttribute("width")),w=H(b.getAttribute("height")),E=1-.551915024494,F=new Yt;return F.moveTo(c+i,s),F.lineTo(c+N-i,s),(i!==0||x!==0)&&F.bezierCurveTo(c+N-i*E,s,c+N,s+x*E,c+N,s+x),F.lineTo(c+N,s+w-x),(i!==0||x!==0)&&F.bezierCurveTo(c+N,s+w-x*E,c+N-i*E,s+w,c+N-i,s+w),F.lineTo(c+i,s+w),(i!==0||x!==0)&&F.bezierCurveTo(c+i*E,s+w,c,s+w-x*E,c,s+w-x),F.lineTo(c,s+x),(i!==0||x!==0)&&F.bezierCurveTo(c,s+x*E,c+i*E,s,c+i,s),F}function R(b){function c(N,w,E){const F=H(w),S=H(E);x===0?i.moveTo(F,S):i.lineTo(F,S),x++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new Yt;let x=0;return b.getAttribute("points").replace(s,c),i.currentPath.autoClose=!0,i}function I(b){function c(N,w,E){const F=H(w),S=H(E);x===0?i.moveTo(F,S):i.lineTo(F,S),x++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new Yt;let x=0;return b.getAttribute("points").replace(s,c),i.currentPath.autoClose=!1,i}function T(b){const c=H(b.getAttribute("cx")||0),s=H(b.getAttribute("cy")||0),i=H(b.getAttribute("r")||0),x=new Bn;x.absarc(c,s,i,0,Math.PI*2);const N=new Yt;return N.subPaths.push(x),N}function v(b){const c=H(b.getAttribute("cx")||0),s=H(b.getAttribute("cy")||0),i=H(b.getAttribute("rx")||0),x=H(b.getAttribute("ry")||0),N=new Bn;N.absellipse(c,s,i,x,0,Math.PI*2);const w=new Yt;return w.subPaths.push(N),w}function y(b){const c=H(b.getAttribute("x1")||0),s=H(b.getAttribute("y1")||0),i=H(b.getAttribute("x2")||0),x=H(b.getAttribute("y2")||0),N=new Yt;return N.moveTo(c,s),N.lineTo(i,x),N.currentPath.autoClose=!1,N}function D(b,c){c=Object.assign({},c);let s={};if(b.hasAttribute("class")){const w=b.getAttribute("class").split(/\s/).filter(Boolean).map(E=>E.trim());for(let E=0;E<w.length;E++)s=Object.assign(s,J["."+w[E]])}b.hasAttribute("id")&&(s=Object.assign(s,J["#"+b.getAttribute("id")]));function i(w,E,F){F===void 0&&(F=function(m){return m.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),m}),b.hasAttribute(w)&&(c[E]=F(b.getAttribute(w))),s[w]&&(c[E]=F(s[w])),b.style&&b.style[w]!==""&&(c[E]=F(b.style[w]))}function x(w){return Math.max(0,Math.min(1,H(w)))}function N(w){return Math.max(0,H(w))}return i("fill","fill"),i("fill-opacity","fillOpacity",x),i("fill-rule","fillRule"),i("opacity","opacity",x),i("stroke","stroke"),i("stroke-opacity","strokeOpacity",x),i("stroke-width","strokeWidth",N),i("stroke-linejoin","strokeLineJoin"),i("stroke-linecap","strokeLineCap"),i("stroke-miterlimit","strokeMiterLimit",N),i("visibility","visibility"),c}function A(b,c){return b-(c-b)}function g(b,c,s){if(typeof b!="string")throw new TypeError("Invalid input: "+typeof b);const i={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},x=0,N=1,w=2,E=3;let F=x,S=!0,m="",C="";const U=[];function u(q,ue,xe){const _e=new SyntaxError('Unexpected character "'+q+'" at index '+ue+".");throw _e.partial=xe,_e}function d(){m!==""&&(C===""?U.push(Number(m)):U.push(Number(m)*Math.pow(10,Number(C)))),m="",C=""}let a;const Y=b.length;for(let q=0;q<Y;q++){if(a=b[q],Array.isArray(c)&&c.includes(U.length%s)&&i.FLAGS.test(a)){F=N,m=a,d();continue}if(F===x){if(i.WHITESPACE.test(a))continue;if(i.DIGIT.test(a)||i.SIGN.test(a)){F=N,m=a;continue}if(i.POINT.test(a)){F=w,m=a;continue}i.COMMA.test(a)&&(S&&u(a,q,U),S=!0)}if(F===N){if(i.DIGIT.test(a)){m+=a;continue}if(i.POINT.test(a)){m+=a,F=w;continue}if(i.EXP.test(a)){F=E;continue}i.SIGN.test(a)&&m.length===1&&i.SIGN.test(m[0])&&u(a,q,U)}if(F===w){if(i.DIGIT.test(a)){m+=a;continue}if(i.EXP.test(a)){F=E;continue}i.POINT.test(a)&&m[m.length-1]==="."&&u(a,q,U)}if(F===E){if(i.DIGIT.test(a)){C+=a;continue}if(i.SIGN.test(a)){if(C===""){C+=a;continue}C.length===1&&i.SIGN.test(C)&&u(a,q,U)}}i.WHITESPACE.test(a)?(d(),F=x,S=!1):i.COMMA.test(a)?(d(),F=x,S=!0):i.SIGN.test(a)?(d(),F=N,m=a):i.POINT.test(a)?(d(),F=w,m=a):u(a,q,U)}return d(),U}const B=["mm","cm","in","pt","pc","px"],Q={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function H(b){let c="px";if(typeof b=="string"||b instanceof String)for(let i=0,x=B.length;i<x;i++){const N=B[i];if(b.endsWith(N)){c=N,b=b.substring(0,b.length-N.length);break}}let s;return c==="px"&&n.defaultUnit!=="px"?s=Q.in[n.defaultUnit]/n.defaultDPI:(s=Q[c][n.defaultUnit],s<0&&(s=Q[c].in*n.defaultDPI)),s*parseFloat(b)}function M(b){if(!(b.hasAttribute("transform")||b.nodeName==="use"&&(b.hasAttribute("x")||b.hasAttribute("y"))))return null;const c=W(b);return K.length>0&&c.premultiply(K[K.length-1]),ge.copy(c),K.push(c),c}function W(b){const c=new mr,s=ne;if(b.nodeName==="use"&&(b.hasAttribute("x")||b.hasAttribute("y"))){const i=H(b.getAttribute("x")),x=H(b.getAttribute("y"));c.translate(i,x)}if(b.hasAttribute("transform")){const i=b.getAttribute("transform").split(")");for(let x=i.length-1;x>=0;x--){const N=i[x].trim();if(N==="")continue;const w=N.indexOf("("),E=N.length;if(w>0&&w<E){const F=N.slice(0,w),S=g(N.slice(w+1));switch(s.identity(),F){case"translate":if(S.length>=1){const m=S[0];let C=0;S.length>=2&&(C=S[1]),s.translate(m,C)}break;case"rotate":if(S.length>=1){let m=0,C=0,U=0;m=S[0]*Math.PI/180,S.length>=3&&(C=S[1],U=S[2]),V.makeTranslation(-C,-U),L.makeRotation(m),P.multiplyMatrices(L,V),V.makeTranslation(C,U),s.multiplyMatrices(V,P)}break;case"scale":if(S.length>=1){const m=S[0];let C=m;S.length>=2&&(C=S[1]),s.scale(m,C)}break;case"skewX":S.length===1&&s.set(1,Math.tan(S[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":S.length===1&&s.set(1,0,0,Math.tan(S[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":S.length===6&&s.set(S[0],S[2],S[4],S[1],S[3],S[5],0,0,1);break}}c.premultiply(s)}}return c}function j(b,c){function s(w){h.set(w.x,w.y,1).applyMatrix3(c),w.set(h.x,h.y)}function i(w){const E=w.xRadius,F=w.yRadius,S=Math.cos(w.aRotation),m=Math.sin(w.aRotation),C=new Ze(E*S,E*m,0),U=new Ze(-F*m,F*S,0),u=C.applyMatrix3(c),d=U.applyMatrix3(c),a=ne.set(u.x,d.x,0,u.y,d.y,0,0,0,1),Y=V.copy(a).invert(),xe=L.copy(Y).transpose().multiply(Y).elements,_e=ee(xe[0],xe[1],xe[4]),me=Math.sqrt(_e.rt1),be=Math.sqrt(_e.rt2);if(w.xRadius=1/me,w.yRadius=1/be,w.aRotation=Math.atan2(_e.sn,_e.cs),!((w.aEndAngle-w.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const Ge=V.set(me,0,0,0,be,0,0,0,1),Ce=L.set(_e.cs,_e.sn,0,-_e.sn,_e.cs,0,0,0,1),Oe=Ge.multiply(Ce).multiply(a),At=Me=>{const{x:Wt,y:ft}=new Ze(Math.cos(Me),Math.sin(Me),0).applyMatrix3(Oe);return Math.atan2(ft,Wt)};w.aStartAngle=At(w.aStartAngle),w.aEndAngle=At(w.aEndAngle),z(c)&&(w.aClockwise=!w.aClockwise)}}function x(w){const E=X(c),F=O(c);w.xRadius*=E,w.yRadius*=F;const S=E>Number.EPSILON?Math.atan2(c.elements[1],c.elements[0]):Math.atan2(-c.elements[3],c.elements[4]);w.aRotation+=S,z(c)&&(w.aStartAngle*=-1,w.aEndAngle*=-1,w.aClockwise=!w.aClockwise)}const N=b.subPaths;for(let w=0,E=N.length;w<E;w++){const S=N[w].curves;for(let m=0;m<S.length;m++){const C=S[m];C.isLineCurve?(s(C.v1),s(C.v2)):C.isCubicBezierCurve?(s(C.v0),s(C.v1),s(C.v2),s(C.v3)):C.isQuadraticBezierCurve?(s(C.v0),s(C.v1),s(C.v2)):C.isEllipseCurve&&(te.set(C.aX,C.aY),s(te),C.aX=te.x,C.aY=te.y,G(c)?i(C):x(C))}}}function z(b){const c=b.elements;return c[0]*c[4]-c[1]*c[3]<0}function G(b){const c=b.elements,s=c[0]*c[3]+c[1]*c[4];if(s===0)return!1;const i=X(b),x=O(b);return Math.abs(s/(i*x))>Number.EPSILON}function X(b){const c=b.elements;return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function O(b){const c=b.elements;return Math.sqrt(c[3]*c[3]+c[4]*c[4])}function ee(b,c,s){let i,x,N,w,E;const F=b+s,S=b-s,m=Math.sqrt(S*S+4*c*c);return F>0?(i=.5*(F+m),E=1/i,x=b*E*s-c*E*c):F<0?x=.5*(F-m):(i=.5*m,x=-.5*m),S>0?N=S+m:N=S-m,Math.abs(N)>2*Math.abs(c)?(E=-2*c/N,w=1/Math.sqrt(1+E*E),N=E*w):Math.abs(c)===0?(N=1,w=0):(E=-.5*N/c,N=1/Math.sqrt(1+E*E),w=E*N),S>0&&(E=N,N=-w,w=E),{rt1:i,rt2:x,cs:N,sn:w}}const k=[],J={},K=[],ne=new mr,V=new mr,L=new mr,P=new mr,te=new ce,h=new Ze,ge=new mr,ye=new DOMParser().parseFromString(e,"image/svg+xml");return t(ye.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:k,xml:ye.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:t.ORIGIN,t:0};function o(A,g,B,Q){const H=A.x,M=g.x,W=B.x,j=Q.x,z=A.y,G=g.y,X=B.y,O=Q.y,ee=(j-W)*(z-X)-(O-X)*(H-W),k=(M-H)*(z-X)-(G-z)*(H-W),J=(O-X)*(M-H)-(j-W)*(G-z),K=ee/J,ne=k/J;if(J===0&&ee!==0||K<=0||K>=1||ne<0||ne>1)return null;if(ee===0&&J===0){for(let V=0;V<2;V++)if(l(V===0?B:Q,A,g),r.loc==t.ORIGIN){const L=V===0?B:Q;return{x:L.x,y:L.y,t:r.t}}else if(r.loc==t.BETWEEN){const L=+(H+r.t*(M-H)).toPrecision(10),P=+(z+r.t*(G-z)).toPrecision(10);return{x:L,y:P,t:r.t}}return null}else{for(let P=0;P<2;P++)if(l(P===0?B:Q,A,g),r.loc==t.ORIGIN){const te=P===0?B:Q;return{x:te.x,y:te.y,t:r.t}}const V=+(H+K*(M-H)).toPrecision(10),L=+(z+K*(G-z)).toPrecision(10);return{x:V,y:L,t:K}}}function l(A,g,B){const Q=B.x-g.x,H=B.y-g.y,M=A.x-g.x,W=A.y-g.y,j=Q*W-M*H;if(A.x===g.x&&A.y===g.y){r.loc=t.ORIGIN,r.t=0;return}if(A.x===B.x&&A.y===B.y){r.loc=t.DESTINATION,r.t=1;return}if(j<-Number.EPSILON){r.loc=t.LEFT;return}if(j>Number.EPSILON){r.loc=t.RIGHT;return}if(Q*M<0||H*W<0){r.loc=t.BEHIND;return}if(Math.sqrt(Q*Q+H*H)<Math.sqrt(M*M+W*W)){r.loc=t.BEYOND;return}let z;Q!==0?z=M/Q:z=W/H,r.loc=t.BETWEEN,r.t=z}function f(A,g){const B=[],Q=[];for(let H=1;H<A.length;H++){const M=A[H-1],W=A[H];for(let j=1;j<g.length;j++){const z=g[j-1],G=g[j],X=o(M,W,z,G);X!==null&&B.find(O=>O.t<=X.t+Number.EPSILON&&O.t>=X.t-Number.EPSILON)===void 0&&(B.push(X),Q.push(new ce(X.x,X.y)))}}return Q}function _(A,g,B){const Q=new ce;g.getCenter(Q);const H=[];return B.forEach(M=>{M.boundingBox.containsPoint(Q)&&f(A,M.points).forEach(j=>{H.push({identifier:M.identifier,isCW:M.isCW,point:j})})}),H.sort((M,W)=>M.point.x-W.point.x),H}function R(A,g,B,Q,H){(H==null||H==="")&&(H="nonzero");const M=new ce;A.boundingBox.getCenter(M);const W=[new ce(B,M.y),new ce(Q,M.y)],j=_(W,A.boundingBox,g);j.sort((k,J)=>k.point.x-J.point.x);const z=[],G=[];j.forEach(k=>{k.identifier===A.identifier?z.push(k):G.push(k)});const X=z[0].point.x,O=[];let ee=0;for(;ee<G.length&&G[ee].point.x<X;)O.length>0&&O[O.length-1]===G[ee].identifier?O.pop():O.push(G[ee].identifier),ee++;if(O.push(A.identifier),H==="evenodd"){const k=O.length%2===0,J=O[O.length-2];return{identifier:A.identifier,isHole:k,for:J}}else if(H==="nonzero"){let k=!0,J=null,K=null;for(let ne=0;ne<O.length;ne++){const V=O[ne];k?(K=g[V].isCW,k=!1,J=V):K!==g[V].isCW&&(K=g[V].isCW,k=!0)}return{identifier:A.identifier,isHole:k,for:J}}else console.warn('fill-rule: "'+H+'" is currently not implemented.')}let I=999999999,T=-999999999,v=e.subPaths.map(A=>{const g=A.getPoints();let B=-999999999,Q=999999999,H=-999999999,M=999999999;for(let W=0;W<g.length;W++){const j=g[W];j.y>B&&(B=j.y),j.y<Q&&(Q=j.y),j.x>H&&(H=j.x),j.x<M&&(M=j.x)}return T<=H&&(T=H+1),I>=M&&(I=M-1),{curves:A.curves,points:g,isCW:Hi.isClockWise(g),identifier:-1,boundingBox:new Fi(new ce(M,Q),new ce(H,B))}});v=v.filter(A=>A.points.length>1);for(let A=0;A<v.length;A++)v[A].identifier=A;const y=v.map(A=>R(A,v,I,T,e.userData?e.userData.style.fillRule:void 0)),D=[];return v.forEach(A=>{if(!y[A.identifier].isHole){const B=new Ui;B.curves=A.curves,y.filter(H=>H.isHole&&H.for===A.identifier).forEach(H=>{const M=v[H.identifier],W=new Bn;W.curves=M.curves,B.holes.push(W)}),D.push(B)}}),D}static getStrokeStyle(e,n,t,r,o){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",r=r!==void 0?r:"butt",o=o!==void 0?o:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:r,strokeMiterLimit:o}}static pointsToStroke(e,n,t,r){const o=[],l=[],f=[];if(Dn.pointsToStrokeWithBuffers(e,n,t,r,o,l,f)===0)return null;const _=new so;return _.setAttribute("position",new Hr(o,3)),_.setAttribute("normal",new Hr(l,3)),_.setAttribute("uv",new Hr(f,2)),_}static pointsToStrokeWithBuffers(e,n,t,r,o,l,f,_){const R=new ce,I=new ce,T=new ce,v=new ce,y=new ce,D=new ce,A=new ce,g=new ce,B=new ce,Q=new ce,H=new ce,M=new ce,W=new ce,j=new ce,z=new ce,G=new ce,X=new ce;t=t!==void 0?t:12,r=r!==void 0?r:.001,_=_!==void 0?_:0,e=S(e);const O=e.length;if(O<2)return 0;const ee=e[0].equals(e[O-1]);let k,J=e[0],K;const ne=n.strokeWidth/2,V=1/(O-1);let L=0,P,te,h,ge,ye=!1,Ue=0,b=_*3,c=_*2;s(e[0],e[1],R).multiplyScalar(ne),g.copy(e[0]).sub(R),B.copy(e[0]).add(R),Q.copy(g),H.copy(B);for(let m=1;m<O;m++){k=e[m],m===O-1?ee?K=e[1]:K=void 0:K=e[m+1];const C=R;if(s(J,k,C),T.copy(C).multiplyScalar(ne),M.copy(k).sub(T),W.copy(k).add(T),P=L+V,te=!1,K!==void 0){s(k,K,I),T.copy(I).multiplyScalar(ne),j.copy(k).sub(T),z.copy(k).add(T),h=!0,T.subVectors(K,J),C.dot(T)<0&&(h=!1),m===1&&(ye=h),T.subVectors(K,k),T.normalize();const U=Math.abs(C.dot(T));if(U>Number.EPSILON){const u=ne/U;T.multiplyScalar(-u),v.subVectors(k,J),y.copy(v).setLength(u).add(T),G.copy(y).negate();const d=y.length(),a=v.length();v.divideScalar(a),D.subVectors(K,k);const Y=D.length();switch(D.divideScalar(Y),v.dot(G)<a&&D.dot(G)<Y&&(te=!0),X.copy(y).add(k),G.add(k),ge=!1,te?h?(z.copy(G),W.copy(G)):(j.copy(G),M.copy(G)):N(),n.strokeLineJoin){case"bevel":w(h,te,P);break;case"round":E(h,te),h?x(k,M,j,P,0):x(k,z,W,P,1);break;case"miter":case"miter-clip":default:const q=ne*n.strokeMiterLimit/d;if(q<1)if(n.strokeLineJoin!=="miter-clip"){w(h,te,P);break}else E(h,te),h?(D.subVectors(X,M).multiplyScalar(q).add(M),A.subVectors(X,j).multiplyScalar(q).add(j),i(M,P,0),i(D,P,0),i(k,P,.5),i(k,P,.5),i(D,P,0),i(A,P,0),i(k,P,.5),i(A,P,0),i(j,P,0)):(D.subVectors(X,W).multiplyScalar(q).add(W),A.subVectors(X,z).multiplyScalar(q).add(z),i(W,P,1),i(D,P,1),i(k,P,.5),i(k,P,.5),i(D,P,1),i(A,P,1),i(k,P,.5),i(A,P,1),i(z,P,1));else te?(h?(i(B,L,1),i(g,L,0),i(X,P,0),i(B,L,1),i(X,P,0),i(G,P,1)):(i(B,L,1),i(g,L,0),i(X,P,1),i(g,L,0),i(G,P,0),i(X,P,1)),h?j.copy(X):z.copy(X)):h?(i(M,P,0),i(X,P,0),i(k,P,.5),i(k,P,.5),i(X,P,0),i(j,P,0)):(i(W,P,1),i(X,P,1),i(k,P,.5),i(k,P,.5),i(X,P,1),i(z,P,1)),ge=!0;break}}else N()}else N();!ee&&m===O-1&&F(e[0],Q,H,h,!0,L),L=P,J=k,g.copy(j),B.copy(z)}if(!ee)F(k,M,W,h,!1,P);else if(te&&o){let m=X,C=G;ye!==h&&(m=G,C=X),h?(ge||ye)&&(C.toArray(o,0*3),C.toArray(o,3*3),ge&&m.toArray(o,1*3)):(ge||!ye)&&(C.toArray(o,1*3),C.toArray(o,3*3),ge&&m.toArray(o,0*3))}return Ue;function s(m,C,U){return U.subVectors(C,m),U.set(-U.y,U.x).normalize()}function i(m,C,U){o&&(o[b]=m.x,o[b+1]=m.y,o[b+2]=0,l&&(l[b]=0,l[b+1]=0,l[b+2]=1),b+=3,f&&(f[c]=C,f[c+1]=U,c+=2)),Ue+=3}function x(m,C,U,u,d){R.copy(C).sub(m).normalize(),I.copy(U).sub(m).normalize();let a=Math.PI;const Y=R.dot(I);Math.abs(Y)<1&&(a=Math.abs(Math.acos(Y))),a/=t,T.copy(C);for(let q=0,ue=t-1;q<ue;q++)v.copy(T).rotateAround(m,a),i(T,u,d),i(v,u,d),i(m,u,.5),T.copy(v);i(v,u,d),i(U,u,d),i(m,u,.5)}function N(){i(B,L,1),i(g,L,0),i(M,P,0),i(B,L,1),i(M,P,0),i(W,P,1)}function w(m,C,U){C?m?(i(B,L,1),i(g,L,0),i(M,P,0),i(B,L,1),i(M,P,0),i(G,P,1),i(M,U,0),i(j,U,0),i(G,U,.5)):(i(B,L,1),i(g,L,0),i(W,P,1),i(g,L,0),i(G,P,0),i(W,P,1),i(W,U,1),i(G,U,0),i(z,U,1)):m?(i(M,U,0),i(j,U,0),i(k,U,.5)):(i(W,U,1),i(z,U,0),i(k,U,.5))}function E(m,C){C&&(m?(i(B,L,1),i(g,L,0),i(M,P,0),i(B,L,1),i(M,P,0),i(G,P,1),i(M,L,0),i(k,P,.5),i(G,P,1),i(k,P,.5),i(j,L,0),i(G,P,1)):(i(B,L,1),i(g,L,0),i(W,P,1),i(g,L,0),i(G,P,0),i(W,P,1),i(W,L,1),i(G,P,0),i(k,P,.5),i(k,P,.5),i(G,P,0),i(z,L,1)))}function F(m,C,U,u,d,a){switch(n.strokeLineCap){case"round":d?x(m,U,C,a,.5):x(m,C,U,a,.5);break;case"square":if(d)R.subVectors(C,m),I.set(R.y,-R.x),T.addVectors(R,I).add(m),v.subVectors(I,R).add(m),u?(T.toArray(o,1*3),v.toArray(o,0*3),v.toArray(o,3*3)):(T.toArray(o,1*3),f[3*2+1]===1?v.toArray(o,3*3):T.toArray(o,3*3),v.toArray(o,0*3));else{R.subVectors(U,m),I.set(R.y,-R.x),T.addVectors(R,I).add(m),v.subVectors(I,R).add(m);const Y=o.length;u?(T.toArray(o,Y-1*3),v.toArray(o,Y-2*3),v.toArray(o,Y-4*3)):(v.toArray(o,Y-2*3),T.toArray(o,Y-1*3),v.toArray(o,Y-4*3))}break}}function S(m){let C=!1;for(let u=1,d=m.length-1;u<d;u++)if(m[u].distanceTo(m[u+1])<r){C=!0;break}if(!C)return m;const U=[];U.push(m[0]);for(let u=1,d=m.length-1;u<d;u++)m[u].distanceTo(m[u+1])>=r&&U.push(m[u]);return U.push(m[m.length-1]),U}}}function Ms(p,e,n,t){const{CUBE_SIZE:r,FIRST_CUBE_Z:o}=t,l=8,f=24,_=.075,R=200;let I,T=[],v=[],y=[],D=[];const A=(M,W,j,z)=>{const G=new Mn(M,M,M),X=new wn(G),O=[new Ot({color:16711680,transparent:!0,opacity:z.opacity,blending:nr}),new Ot({color:65280,transparent:!0,opacity:z.opacity,blending:nr}),new Ot({color:255,transparent:!0,opacity:z.opacity,blending:nr}),new Ot({color:65535,transparent:!0,opacity:z.opacity,blending:nr}),new Ot({color:16711935,transparent:!0,opacity:z.opacity,blending:nr}),new Ot({color:16776960,transparent:!0,opacity:z.opacity,blending:nr})],ee=new Ft,k=X.getAttribute("position").array,J=[];for(let V=0;V<k.length/3;V+=2)J.push(V,V+1);const K=Array(6).fill(null).map(()=>new so),ne=Array(6).fill(null).map(()=>[]);for(let V=0;V<J.length/2;V++){const L=V%6;ne[L].push(J[V*2],J[V*2+1])}return K.forEach((V,L)=>{V.setIndex(ne[L]),V.setAttribute("position",X.getAttribute("position"));const P=new Vt(V,O[L]);ee.add(P)}),ee.position.z=W,ee.rotation.z=j,ee};return(()=>{const j=.9/(f-1);for(let J=0;J<f;J++)v[J]=new Ot({transparent:!0,opacity:1-J*j});if(I=new Ft,!I){console.error("introGroup failed to initialize");return}for(let J=0;J<f;J++){const K=r-J*l,ne=A(K,0,0,v[J]),V=ne.children.map(L=>L.material);D.push(V.map(L=>({material:L,originalColor:L.color.clone()}))),I.add(ne)}I.position.z=o,e.add(I),T.push(I),y=v.map(J=>J.opacity);const z=Fe.timeline({repeat:-1});z.to(I.rotation,{x:rt.degToRad(360),duration:12,ease:"none"},0),z.to(I.rotation,{y:rt.degToRad(360),duration:10,ease:"none"},0),z.to(I.rotation,{z:rt.degToRad(360),duration:14,ease:"none"},0);let G=-1,X=0;const O=_*1e3,ee=f*O,k=J=>{const K=J%ee/O,ne=Math.floor(K)%f;G!==-1&&J-X>=O&&(D[G].forEach(P=>{P.material.opacity=y[G],P.material.color.copy(P.originalColor)}),G=-1),G===-1&&ne!==G&&(G=ne,X=J,D[G].forEach(L=>{L.material.opacity=1,L.material.color.set(1,1,1)})),requestAnimationFrame(k)};requestAnimationFrame(k)})(),n.then(M=>{if(M){const W=B(M);p.add(W)}}),{introCubes:T};function B(M){const W=new Ft,j=Q(M);j.position.set(0,-36,0),W.add(j),H(G=>{W.add(G),Fe.fromTo(j.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const X=G.children.find(O=>O instanceof tt&&O!==G.children[0]);if(X){const O=X.position.y;Fe.to(X.position,{y:O+3,duration:1,ease:"easeOut",onComplete:()=>{X.position.y=O},repeat:-1})}}),W.position.x=0,W.position.y=-240;const z=o-f*l;return W.position.z=z+R,W}function Q(M){const W=new Ti("SCROLL TO CONTINUE",{font:M,size:8,depth:0,curveSegments:12,bevelEnabled:!1});W.computeBoundingBox(),W.center();const j=new qt({color:16777215,transparent:!0,opacity:1});return new tt(W,j)}function H(M){new Dn().load("/3D/mouse.svg",j=>{const z=j.paths;let G=null,X=null,O=new Ft;if(z.forEach((ee,k)=>{Dn.createShapes(ee).forEach(K=>{const ne=new Wi(K);ne.computeBoundingBox();const V=new qt({color:16777215,transparent:!0,opacity:1,side:Or}),L=new tt(ne,V);L.scale.set(.05,.05,1),k===0?G=L:k===1&&(X=L)})}),G&&X){O.add(G),O.add(X);const k=(G.geometry.boundingBox.max.x-G.geometry.boundingBox.min.x)*G.scale.x/2;O.position.x=-k,O.rotation.x=Math.PI,M(O)}})}}class Es extends Vo{constructor(e){super(e)}load(e,n,t,r){const o=this,l=new Xo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){const _=o.parse(JSON.parse(f));n&&n(_)},t,r)}parse(e){return new As(e)}}class As{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],r=ks(e,n,this.data);for(let o=0,l=r.length;o<l;o++)t.push(...r[o].toShapes());return t}}function ks(p,e,n){const t=Array.from(p),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,l=[];let f=0,_=0;for(let R=0;R<t.length;R++){const I=t[R];if(I===`
`)f=0,_-=o;else{const T=Rs(I,r,f,_,n);f+=T.offsetX,l.push(T.path)}}return l}function Rs(p,e,n,t,r){const o=r.glyphs[p]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+p+'" does not exists in font family '+r.familyName+".");return}const l=new Yt;let f,_,R,I,T,v,y,D;if(o.o){const A=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let g=0,B=A.length;g<B;)switch(A[g++]){case"m":f=A[g++]*e+n,_=A[g++]*e+t,l.moveTo(f,_);break;case"l":f=A[g++]*e+n,_=A[g++]*e+t,l.lineTo(f,_);break;case"q":R=A[g++]*e+n,I=A[g++]*e+t,T=A[g++]*e+n,v=A[g++]*e+t,l.quadraticCurveTo(T,v,R,I);break;case"b":R=A[g++]*e+n,I=A[g++]*e+t,T=A[g++]*e+n,v=A[g++]*e+t,y=A[g++]*e+n,D=A[g++]*e+t,l.bezierCurveTo(T,v,y,D,R,I);break}}return{offsetX:o.ha*e,path:l}}function Fo(p,e,n,t,r,o){const{CUBE_SIZE:l,CUBE_SPACING:f,FIRST_CUBE_Z:_}=e,R=_-(n.length+1)*f,I=65535,T=16711935,v=16711680,y=rt.degToRad(15),D=1e3,A=.5,g=80,B=1,Q=15,H=.1;let M=[],W=null,j=null,z=!1,G=!1,X=new ji,O=new ce,ee=null,k=null,J=null,K=!1,ne=null;const V=Jo(),L=(c,s,i,x,N,w)=>{const E=new Ft;E.position.z=i,E.rotation.z=x,E.userData.isActive=!1;const F=new Mn(s,s,s),S=new wn(F),m=new Ot({color:new wt(I),transparent:!0,opacity:0}),C=new Vt(S,m);C.geometry.computeBoundingSphere(),E.add(C);let U="right";const u=s/2;(()=>{const xe=new yo(40,24),_e=new wn(xe),me=new Ot({color:new wt(I),transparent:!0,opacity:0,visible:!0}),be=new Vt(_e,me);be.userData.isPortal=!0,be.userData.isAnimating=!1,be.geometry.computeBoundingSphere();const Se=new bn(120,120),Ge=new qt({visible:!1,side:Or}),Ce=new tt(Se,Ge);Ce.userData.isPortalHitbox=!0,Ce.userData.portal=be,Ce.geometry.computeBoundingSphere();const Oe=new Ft,At=new bn(B,Q),Me=65/2;for(let Ne=0;Ne<g;Ne++){const kt=new qt({color:new wt(T),transparent:!0,opacity:0,visible:!1,side:Or}),Ve=new tt(At,kt),ht=Ne/g*Math.PI*2;Ve.position.set(Math.cos(ht)*Me,Math.sin(ht)*Me,0),Ve.rotation.z=ht+Math.PI/2,Ve.userData.baseOpacity=.01,Ve.userData.index=Ne,Ve.geometry.computeBoundingSphere(),Oe.add(Ve)}const Wt=2,ft=25;for(let Ne=1;Ne<ft;Ne++){const kt=new yo(40,24),Ve=new wn(kt),ht=rt.lerp(1,.1,Ne/(ft-1)),fe=new Ot({color:new wt(I),transparent:!0,opacity:0}),dt=new Vt(Ve,fe);dt.userData.isPortal=!0,dt.userData.maxOpacity=ht,dt.position.z=-Ne*Wt,dt.geometry.computeBoundingSphere(),be.add(dt)}switch(be.userData.maxOpacity=1,U){case"left":case"right":Oe.children.forEach(Ne=>Ne.position.x+=H);break;case"top":case"bottom":Oe.children.forEach(Ne=>Ne.position.y+=H);break}switch(be.add(Oe),E.add(be),E.add(Ce),be.updateMatrixWorld(!0),Oe.updateMatrixWorld(!0),U){case"left":be.position.set(-u,0,0),be.rotation.y=Math.PI/2,Ce.position.set(-u,0,0),Ce.rotation.y=Math.PI/2;break;case"top":be.position.set(0,u,0),be.rotation.x=-Math.PI/2,Ce.position.set(0,u,0),Ce.rotation.x=Math.PI/2;break;case"right":be.position.set(u,0,0),be.rotation.y=-Math.PI/2,Ce.position.set(u,0,0),Ce.rotation.y=-Math.PI/2;break;case"bottom":be.position.set(0,-u,0),be.rotation.x=Math.PI/2,Ce.position.set(0,-u,0),Ce.rotation.x=Math.PI/2;break}})(),E.children.forEach(q=>{(q instanceof Vt||q instanceof tt)&&q.geometry&&!q.geometry.boundingSphere&&q.geometry.computeBoundingSphere()}),E.updateMatrixWorld(!0);const a=new Vi().setFromObject(E),Y=new Xi;return a.getBoundingSphere(Y),E.boundingSphere=Y,E},P=(c,s,i,x,N,w)=>{const E=new Ti(c,{font:w,size:N,depth:0,curveSegments:12,bevelEnabled:!1});E.computeBoundingBox(),E.center();const F=new qt({color:16777215,transparent:!0,opacity:0,side:Or}),S=new tt(E,F);S.position.set(s,i,x);const m=E.boundingBox,C=m.max.x-m.min.x,U=m.max.y-m.min.y,u=C+8,d=U+4,a=new bn(u,d),Y=new qt({color:0,transparent:!0,opacity:0,side:Or}),q=new tt(a,Y);return q.position.set(s,i,x-1),p.add(q),p.add(S),S.userData.backgroundPlane=q,S},te=()=>new Promise(c=>{W=new Es,W.load("/fonts/Poppins_Regular.json",s=>{j=s;const i=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n),i.forEach((x,N)=>{const w=_-(N+1)*f,E=(N+1)*y,F=L(x,l,w,E,x.keyart,x.keyartLocation);p.add(F),M.push(F),P(x.title,0,x.size-15,_+90-(N+1)*f,x.size,s)}),c()},void 0,s=>console.error("Error loading font:",s))}),h=()=>z?Promise.resolve({projectCubes:M,updateCubeColors:Ue,loadedFont:j,maxZ:R}):te().then(()=>(z=!0,{projectCubes:M,updateCubeColors:Ue,loadedFont:j,maxZ:R})).catch(c=>{throw console.error("Error in loadFontAndText:",c),c}),ge=c=>{if(!c.userData.isAnimating)return;c.userData.isAnimating=!1;const s=c.children.find(i=>i instanceof Ft);s&&(c.userData.animationTimeline&&(c.userData.animationTimeline.kill(),delete c.userData.animationTimeline),s.children.forEach(i=>{const x=i.material;x.opacity=0}))},ye=new Yi,Ue=c=>{ye.setFromProjectionMatrix(c.projectionMatrix.clone().multiply(c.matrixWorldInverse));const s=c.position.z;let i=[];p.traverse(x=>{x instanceof tt&&x.geometry&&x.geometry.type==="TextGeometry"&&i.push(x)}),G||(G=!0),M.forEach((x,N)=>{if(!x.geometry&&!x.children.length){console.warn(`Cube ${N} has no geometry or children`,x);return}try{if(!ye.intersectsObject(x))return}catch(S){console.error(`Error with cube ${N}`,x,S);return}const w=x.position.z,E=Math.abs(s-w);let F=0;E<=D&&(F=1-E/D),x.userData.isActive=F>=A,x.children.forEach(S=>{if(S instanceof Vt&&!S.userData.isPortal&&!S.userData.isPortalHitbox){const m=S.material;if(E<=D){const C=rt.lerp((I>>16&255)/255,(T>>16&255)/255,F),U=rt.lerp((I>>8&255)/255,(T>>8&255)/255,F),u=rt.lerp((I&255)/255,(T&255)/255,F);m.color.set(C,U,u),m.opacity=Math.min(1,F*2)}else m.opacity=0}else if(S instanceof Vt&&S.userData.isPortal)G&&(F>.1?S.children.forEach(m=>{m instanceof Ft&&m.children.forEach(C=>{C instanceof tt&&(C.material.visible=!0,!S.userData.animationStarted&&o.showPortalPulses)})}):F<=.1&&S.userData.animationStarted&&(S.children.forEach(m=>{m instanceof Ft&&m.children.forEach(C=>{C instanceof tt&&(C.material.visible=!1)})}),ge(S),delete S.userData.animationStarted));else if(S instanceof tt&&!S.userData.isPortalHitbox){const m=S.material;if(E<=D){const C=1-E/D;m.opacity=Math.min(.8,C*2)}else m.opacity=0}})}),i.forEach(x=>{const N=x.material,w=x.userData.backgroundPlane,E=w==null?void 0:w.material,F=x.position.z,S=Math.abs(s-F+120);if(S<=D){const m=1-S/D,C=Math.min(1,m*2);N.opacity=C,E&&(E.opacity=C*.8)}else N.opacity=0,E&&(E.opacity=0)})};return{getInitializedData:h,updateCubeColors:Ue,setupInteractivity:(c,s,i)=>{ne=i;let x=null,N=null;const w=(m,C=!0)=>{const U=[m,...m.children.filter(d=>d instanceof Vt&&d.userData.isPortal)],u=C?25:2;U.forEach((d,a)=>{let Y=-a*u;(m.position.y>0&&m.rotation.x===-Math.PI/2||m.position.y<0&&m.rotation.x===Math.PI/2)&&(Y=a*u);const q=C?d.userData.maxOpacity:0;Fe.to(d.position,{z:Y,duration:1,ease:"power3.out",delay:.5}),Fe.to(d.material,{opacity:q,duration:1,ease:"power3.out",delay:.5})})},E=m=>{O.x=m.clientX/window.innerWidth*2-1,O.y=-(m.clientY/window.innerHeight)*2+1,X.setFromCamera(O,c);const C=M.flatMap(u=>u.userData.isActive?u.children.filter(d=>d instanceof tt&&d.userData.isPortalHitbox):[]),U=X.intersectObjects(C);if(U.length>0){const d=U[0].object.userData.portal;if(ee!==d){if(ee){const Y=ee.material;Fe.to(Y.color,{r:(I>>16&255)/255,g:(I>>8&255)/255,b:(I&255)/255,duration:.5})}ee=d;const a=ee.material;Fe.to(a.color,{r:(v>>16&255)/255,g:(v>>8&255)/255,b:(v&255)/255,duration:.5})}s.style.cursor="pointer"}else{if(ee){const u=ee.material;Fe.to(u.color,{r:(I>>16&255)/255,g:(I>>8&255)/255,b:(I&255)/255,duration:.5}),ee=null}s.style.cursor="auto"}},F=m=>{O.x=m.clientX/window.innerWidth*2-1,O.y=-(m.clientY/window.innerHeight)*2+1,X.setFromCamera(O,c);const C=M.flatMap(ue=>ue.userData.isActive?ue.children.filter(xe=>xe instanceof tt&&xe.userData.isPortalHitbox):[]),U=X.intersectObjects(C);if(U.length===0)return;const u=U[0].object,d=u.userData.portal,a=u.parent,Y=M.indexOf(a),q=n[Y];if(K&&d===N){d.getWorldPosition(new Ze);let ue=new Ze;const xe=e.CUBE_SIZE/2;d.position.x===xe?ue.set(-1,0,0):d.position.x===-xe?ue.set(1,0,0):d.position.y===xe?ue.set(0,-1,0):d.position.y===-xe&&ue.set(0,1,0),ue.applyQuaternion(a.getWorldQuaternion(new qi)).normalize();const me=c.position.clone().clone().add(ue.clone().multiplyScalar(-675)),be=ue.clone().multiplyScalar(-1e3),Se=me.clone().add(be);Fe.to(c.position,{x:me.x,y:me.y,z:me.z,duration:1,ease:"power2.in",onUpdate:()=>c.lookAt(Se),onComplete:()=>{q!=null&&q.slug&&(V.setScrollPosition(window.scrollY),Mi.visit(route("project.show",{project:q.slug}),{preserveScroll:!1}))}})}else if(!K){k||(k=c.position.clone(),J=new Ze(0,0,R)),ne&&i(!0,k,J);const ue=d.getWorldPosition(new Ze);Fe.to(c.position,{x:0,y:0,z:a.getWorldPosition(new Ze).z,duration:2,ease:"power3.out"}),Fe.to({},{duration:2,ease:"power3.out",onUpdate:function(){const xe=this.progress(),_e=c.getWorldDirection(new Ze).multiplyScalar(1e3).add(c.position),me=rt.lerp(_e.x,ue.x,xe),be=rt.lerp(_e.y,ue.y,xe),Se=rt.lerp(_e.z,ue.z,xe);c.lookAt(me,be,Se)},onStart:()=>{K=!0,x=window.scrollY,document.body.classList.add("no-scrollbar"),N=d,w(d,!0)}})}},S=m=>{if(!K||!N||!k||!J)return;let C=0;if(m instanceof WheelEvent?C=m.deltaY:C=window.scrollY-(x||0),m.preventDefault(),m.stopPropagation(),C>0){window.scrollTo(0,x);return}if(C<0){const U=N,u=J.clone(),d=k.z;Fe.to(c.position,{x:k.x,y:k.y,z:d,duration:1,ease:"power3.out"}),Fe.to({},{duration:1,ease:"power3.out",onUpdate:function(){const a=this.progress(),Y=c.getWorldDirection(new Ze).multiplyScalar(1e3).add(c.position),q=rt.lerp(Y.x,u.x,a),ue=rt.lerp(Y.y,u.y,a),xe=rt.lerp(Y.z,u.z,a);c.lookAt(q,ue,xe)},onComplete:()=>{c.lookAt(u),K=!1,N=null,document.body.classList.remove("no-scrollbar"),ne&&i(!1),w(U,!1),x=null,k=null,J=null}})}};return s.addEventListener("mousemove",E),s.addEventListener("click",F),window.addEventListener("wheel",S,{passive:!1}),window.addEventListener("scroll",S,{passive:!1}),()=>{s.removeEventListener("mousemove",E),s.removeEventListener("click",F),window.removeEventListener("wheel",S),window.removeEventListener("scroll",S)}}}}Fe.registerPlugin(le);function Is(p,e,n,t,r,o,l={}){le.config({syncTouch:!0});const{CUBE_SPACING:f,FIRST_CUBE_Z:_}=o,R=(t==null?void 0:t.length)||0,I=_-(R+1)*f;let T=!1;const v=Math.abs(I)+(R-1)*f,y=Fe.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${v}`,scrub:l.scrub||.5,pin:!0,onUpdate:A=>{if(!T){const g=A.progress,B=rt.lerp(0,I,g);e.position.set(0,0,B),e.lookAt(0,0,I)}r(e)}}});return y.fromTo(e.position,{z:0},{z:I,duration:1,ease:"none"}),{setReverting:A=>{T=A},timeline:y}}const Ds={class:"preloader"},Os={class:"progress-label"},Ns=On({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>($r(),Nn("div",Ds,[sr("div",Os,Ei(Math.round(e.progress))+"%",1)]))}}),zs=qo(Ns,[["__scopeId","data-v-e5eadefa"]]),Xn=250,mn=500,Dr=-500,qn=-520,Ho=-720,Ls=On({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){Fe.registerPlugin(le);const e=Jo();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const n=p,t={showChasers:!1,showStarfield:!1,showCars:!1,showBuildings:!1,showPortalPulses:!1,showKeyarts:!1,showProjectGrids:!1},r=jt(null),o=jt(null),l=jt(!1),f=jt(0),_=jt(!1),R=jt(!0),I=new Map;jt(null);let T,v,y,D,A,g,B,Q,H=null,M=null,W=null,j=null,z=null,G=[],X=null;const O=()=>{const V=r.value?r.value.getBoundingClientRect().width:window.innerWidth,L=window.innerHeight,P=e.isMobile?.75:1;y.setSize(V*P,L*P),D.setSize(V*P,L*P),v.aspect=V/L,v.far=6e4,v.updateProjectionMatrix(),y.domElement.style.width=`${V}px`,y.domElement.style.height=`${L}px`},ee=V=>I.has(V)?Promise.resolve(I.get(V)):new Promise((L,P)=>{new Ki().load(V,h=>{h.encoding=void 0,I.set(V,h),L(h)},void 0,h=>P(h))}),k=async()=>{T=new jo,T.background=new wt(0),T.fog=new Zi(0,700,4e3),v=new Qi(75,window.innerWidth/window.innerHeight,1,6e4),v.position.set(0,0,0),v.lookAt(0,0,1e3),y=new Yo({antialias:!0}),e.isMobile?y.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):y.setPixelRatio(window.devicePixelRatio),y.toneMapping=$i,y.toneMappingExposure=1,y.outputEncoding=void 0,D=new $o(y);const V=new Ko(T,v);if(D.addPass(V),A=new fr(new ce(window.innerWidth,window.innerHeight),6,.4,0),A.renderToScreen=!0,e.isMobile||D.addPass(A),r.value)r.value.appendChild(y.domElement),y.domElement.style.opacity="0";else return;B=new Qr,B.dom.style.position="fixed",B.dom.style.top="0px",B.dom.style.left="0px",B.dom.style.zIndex="1000",document.body.appendChild(B.dom);const L=n.projects.length+2+1;let P=0;const te=()=>{P++,f.value=P/L*100,P===L&&(l.value=!0)};await ee(n.projectGridFile).then(()=>te()).catch(()=>te()),await ee(n.projectGridFile2).then(()=>te()).catch(()=>te());for(const ye of n.projects)ye.keyart?await ee(ye.keyart).then(()=>te()).catch(()=>te()):te();const h=Fo(T,{CUBE_SIZE:Xn,CUBE_SPACING:mn,FIRST_CUBE_Z:Dr},n.projects,n.projectGridFile,n.projectGridFile2,t);let ge=-8500;try{const ye=await h.getInitializedData();ge=ye.maxZ!==void 0&&!isNaN(ye.maxZ)?ye.maxZ:-8500,te();const{introCubes:Ue}=Ms(T,T,Promise.resolve(ye.loadedFont),{CUBE_SIZE:Xn,FIRST_CUBE_Z:Dr});G=[...Ue,...ye.projectCubes],X=ye.updateCubeColors,t.showCars,t.showStarfield,t.showChasers,O()}catch(ye){console.error("Error initializing project cubes:",ye)}};let J=0;const K=(V=0)=>{if(g=requestAnimationFrame(K),!(e.isMobile&&(J++,J%2===0))){if(y&&D){if(!e.isMobile){const L=Ho-qn;let P=0;v.position.z>=qn?P=0:v.position.z<=Ho?P=1:P=(v.position.z-qn)/L,A.strength=rt.lerp(1,.125,P)}_.value&&(X(v),le.update()),D.render()}B.update()}};Uo(()=>{k().then(()=>{if(l.value){g=requestAnimationFrame(K);const V=Fo(T,{CUBE_SIZE:Xn,CUBE_SPACING:mn,FIRST_CUBE_Z:Dr},n.projects,n.projectGridFile,n.projectGridFile2,t);let L=null;const P=V.getInitializedData().then(({projectCubes:h})=>{h.forEach(ye=>{ye.userData.isActive=!0});const ge=Dr-(n.projects.length-1)*mn;v.position.set(0,0,5e3),v.lookAt(0,0,ge),v.updateProjectionMatrix(),X(v),D.render(),G.length&&X&&(L=Is(T,v,o,G,X,{CUBE_SPACING:mn,FIRST_CUBE_Z:Dr},{scrub:1}).setReverting),y&&M===null&&(M=V.setupInteractivity(v,y.domElement,ye=>{L&&L(ye)})),window.scrollTo({top:0,behavior:"auto"})}),te=()=>{P.then(()=>{R.value=!1,v.position.set(0,0,5e3),v.updateProjectionMatrix(),Fe.to(y.domElement,{opacity:1,duration:.5,ease:"power4.out"});const h={z:5e3};Fe.to(h,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{v.position.z=h.z,v.updateProjectionMatrix()},onComplete:()=>{v.position.z=0,_.value=!0}})})};Fe.delayedCall(.1,te)}}).catch(V=>{console.error("Initialization failed:",V)}),window.addEventListener("resize",ne)}),Go(()=>{g&&cancelAnimationFrame(g),M&&M(),window.removeEventListener("resize",ne),le.getAll().forEach(V=>V.kill()),y.dispose(),D.dispose(),T.clear(),document.body.removeChild(B.dom),z&&z()});const ne=()=>{O(),le.refresh()};return(V,L)=>($r(),Nn("section",{ref_key:"wrapper",ref:o,class:"wrapper"},[rr(Ai,{name:"fade"},{default:ki(()=>[R.value?($r(),Ri(zs,{key:0,progress:f.value},null,8,["progress"])):Ii("",!0)]),_:1}),sr("div",{ref_key:"tunnelWrapper",ref:r,class:"tunnel-wrapper"},null,512)],512))}}),Bs=qo(Ls,[["__scopeId","data-v-c69e542f"]]),Fs={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Hs={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Us={class:"overflow-hidden"},Gs={class:"flex justify-center items-center"},Ws={class:"flex justify-center items-center -mt-24 mix-blend-screen"},Ks=On({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(p){return(e,n)=>($r(),Nn(Ni,null,[rr(Di(Oi),{title:"Welcome"}),sr("div",Fs,[sr("nav",Hs,[rr(Ji)]),sr("div",Us,[rr(Bs,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),sr("div",Gs,[rr(wo,{"particle-width":20,"particle-height":20})]),sr("div",Ws,[rr(wo,{"particle-width":15,"particle-height":160})]),rr(es)])],64))}});export{Ks as default};
