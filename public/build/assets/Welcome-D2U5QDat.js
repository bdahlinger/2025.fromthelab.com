import{I as Nn,d as or,D as Mi,x as Uo,y as Wo,e as Ln,o as Jr,J as Ci,W as Ei,a as cr,t as Ai,b as ir,T as ki,w as Ri,c as Ii,f as Di,u as Oi,m as Ni,F as Li}from"./app-BxK4C20o.js";import{M as Be,O as Yo,B as ao,F as Ur,C as ht,V as de,W as xn,H as wn,U as Qn,S as Sr,a as et,A as St,b as bt,N as zi,c as Fi,d as jo,e as Vo,f as En,P as Yt,E as Bi,g as Xo,h as qo,i as br,j as Hi,k as Gi,l as Ui,m as Bn,n as Wi,o as Qt,p as It,q as Yi,D as Lt,r as zt,s as Ge,t as je,u as _n,v as sr,R as ji,T as _r,w as bo,Q as Vi,x as Ys,y as js,z as Vs,I as Xs,J as qs,K as Xi,X as qi,Y as Zi,L as Qi,G as $i}from"./GlobalFooter-D453qlcq.js";import{_ as Zo}from"./_plugin-vue_export-helper-DlAUqK2U.js";class rn{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Ki=new Yo(-1,1,1,-1,0,1);class Ji extends ao{constructor(){super(),this.setAttribute("position",new Ur([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ur([0,2,0,0,2,0],2))}}const es=new Ji;class Qo{constructor(e){this._mesh=new Be(es,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Ki)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const $o={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`},ts={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ht(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class hr extends rn{constructor(e,n,t,r){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new de(e.x,e.y):new de(256,256),this.clearColor=new ht(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new xn(o,l,{type:wn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let _=0;_<this.nMips;_++){const S=new xn(o,l,{type:wn});S.texture.name="UnrealBloomPass.h"+_,S.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(S);const b=new xn(o,l,{type:wn});b.texture.name="UnrealBloomPass.v"+_,b.texture.generateMipmaps=!1,this.renderTargetsVertical.push(b),o=Math.round(o/2),l=Math.round(l/2)}const u=ts;this.highPassUniforms=Qn.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Sr({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.separableBlurMaterials=[];const x=[3,5,7,9,11];o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let _=0;_<this.nMips;_++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(x[_])),this.separableBlurMaterials[_].uniforms.invSize.value=new de(1/o,1/l),o=Math.round(o/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const T=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=T,this.bloomTintColors=[new et(1,1,1),new et(1,1,1),new et(1,1,1),new et(1,1,1),new et(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const I=$o;this.copyUniforms=Qn.clone(I.uniforms),this.blendMaterial=new Sr({uniforms:this.copyUniforms,vertexShader:I.vertexShader,fragmentShader:I.fragmentShader,blending:St,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ht,this.oldClearAlpha=1,this.basic=new bt,this.fsQuad=new Qo(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),r=Math.round(n/2);this.renderTargetBright.setSize(t,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(t,r),this.renderTargetsVertical[o].setSize(t,r),this.separableBlurMaterials[o].uniforms.invSize.value=new de(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,n,t,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let u=this.renderTargetBright;for(let x=0;x<this.nMips;x++)this.fsQuad.material=this.separableBlurMaterials[x],this.separableBlurMaterials[x].uniforms.colorTexture.value=u.texture,this.separableBlurMaterials[x].uniforms.direction.value=hr.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[x]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[x].uniforms.colorTexture.value=this.renderTargetsHorizontal[x].texture,this.separableBlurMaterials[x].uniforms.direction.value=hr.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[x]),e.clear(),this.fsQuad.render(e),u=this.renderTargetsVertical[x];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new Sr({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new de(.5,.5)},direction:{value:new de(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Sr({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}hr.BlurDirectionX=new de(1,0);hr.BlurDirectionY=new de(0,1);class rs extends rn{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof Sr?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Qn.clone(e.uniforms),this.material=new Sr({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Qo(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class xo extends rn{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let l,u;this.inverse?(l=0,u=1):(l=1,u=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,l,4294967295),o.buffers.stencil.setClear(u),o.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}}class ns extends rn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Ko{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new de);this._width=t.width,this._height=t.height,n=new xn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:wn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new rs($o),this.copyPass.material.blending=zi,this.clock=new Fi}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let r=0,o=this.passes.length;r<o;r++){const l=this.passes[r];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),l.needsSwap){if(t){const u=this.renderer.getContext(),x=this.renderer.state.buffers.stencil;x.setFunc(u.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),x.setFunc(u.EQUAL,1,4294967295)}this.swapBuffers()}xo!==void 0&&(l instanceof xo?t=!0:l instanceof ns&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new de);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Jo extends rn{constructor(e,n,t=null,r=null,o=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ht}render(e,n,t){const r=e.autoClear;e.autoClear=!1;let o,l;this.overrideMaterial!==null&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=l),e.autoClear=r}}const nr=.01,wo=45/3,os=3,Hn=45,_o=Nn({__name:"CubeStrip",props:{particleWidth:{},particleHeight:{}},setup(f){const e=f,n=or(null);let t,r,o=null,l=null,u=null,x=[];const T=Mi({particleCount:400,particleWidth:e.particleWidth??20,particleHeight:e.particleHeight??20,minSpeed:2,maxSpeed:5,speedRandomness:.5,positionZRandomness:.5,rotationRandomness:.5,rotateParticles:!1,useSquares:!0,emitterDepth:100,bloomStrength:1.1,bloomRadius:0,showControls:!1}),I=Hn/2+10;function _(m){const G=nr*T.particleWidth,q=nr*T.particleHeight,B=T.useSquares?new Yt(G,q):new En(G,q,G),k=Math.floor(Math.random()*3);let Y;switch(k){case 0:Y=new ht(1,0,0);break;case 1:Y=new ht(0,1,0);break;case 2:Y=new ht(0,0,1);break;default:Y=new ht(1,0,0)}const j=new bt({color:Y,transparent:!0,opacity:.7}),z=new Be(B,j),U=Hn+I*2;z.position.set(-45-I+m/(T.particleCount-1)*U,0,nr*(Math.random()-.5)*T.positionZRandomness*T.emitterDepth);const V=nr*(Math.random()*(T.maxSpeed-T.minSpeed)+T.minSpeed);return z.speed=V+nr*(Math.random()-.5)*T.speedRandomness,z.rotationSpeed=new et(Math.PI/2,Math.PI/2,Math.PI/2).multiplyScalar(Math.random()*T.rotationRandomness+.5),z}function S(){t=new jo;const m=os*1.5,G=m*wo;r=new Yo(-67.5/2,G/2,m/2,-4.5/2,.1,1e3),r.position.z=150,o=new Vo({antialias:!0}),o.setPixelRatio(window.devicePixelRatio),o.domElement&&(o.domElement.style.width="100%",o.domElement.style.height="auto");const q=new Jo(t,r);u=new hr(new de(window.innerWidth,window.innerHeight),T.bloomStrength,T.bloomRadius,.1),l=new Ko(o),l.addPass(q),l.addPass(u),L(),n.value&&n.value.appendChild(o.domElement),b(),C()}function b(){x.forEach(m=>t.remove(m)),x=[];for(let m=0;m<T.particleCount;m++){const G=_(m);x.push(G),t.add(G)}}function L(){if(!o||!l||!u)return;const m=window.innerWidth,G=m/wo;o.setSize(m,G),l.setSize(m,G),u.setSize(m,G),o.domElement&&(o.domElement.style.width="100%",o.domElement.style.height="auto")}function C(){requestAnimationFrame(C),x.forEach(m=>{m.position.x+=m.speed,!T.useSquares&&T.rotateParticles&&(m.rotation.x+=m.rotationSpeed.x*.016,m.rotation.y+=m.rotationSpeed.y*.016,m.rotation.z+=m.rotationSpeed.z*.016),m.position.x>Hn/2+I&&(x.indexOf(m),m.position.x=-45-I-nr*(m.geometry instanceof En,m.geometry.parameters.width),m.position.y=0,m.position.z=nr*(Math.random()-.5)*T.positionZRandomness*T.emitterDepth)}),l&&l.render()}return Uo(()=>{S(),window.addEventListener("resize",L)}),Wo(()=>{window.removeEventListener("resize",L),o==null||o.dispose()}),(m,G)=>(Jr(),Ln("div",{ref_key:"container",ref:n,class:"relative w-full before:absolute before:inset-x-0 before:top-0 before:h-[2vw] before:bg-gradient-to-b before:from-black before:to-transparent after:absolute after:inset-x-0 after:bottom-0 after:h-[2vw] after:bg-gradient-to-t after:from-black after:to-transparent"},null,512))}}),ei=Ci("tunnel",{state:()=>({activeProjectSlug:null,scrollPosition:0}),actions:{setActiveProject(f){this.activeProjectSlug=f},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(f){this.scrollPosition=f,console.log("Scroll position stored:",f)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function is(f,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(f,t.key,t)}}function ss(f,e,n){return e&&is(f.prototype,e),f}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var tt,vn,vt,Kt,Jt,Mr,ti,ar,Wr,ri,Vt,Rt,ni,oi=function(){return tt||typeof window<"u"&&(tt=window.gsap)&&tt.registerPlugin&&tt},ii=1,Pr=[],xe=[],Ht=[],Yr=Date.now,$n=function(e,n){return n},as=function(){var e=Wr.core,n=e.bridge||{},t=e._scrollers,r=e._proxies;t.push.apply(t,xe),r.push.apply(r,Ht),xe=t,Ht=r,$n=function(l,u){return n[l](u)}},er=function(e,n){return~Ht.indexOf(e)&&Ht[Ht.indexOf(e)+1][n]},jr=function(e){return!!~ri.indexOf(e)},ut=function(e,n,t,r,o){return e.addEventListener(n,t,{passive:r!==!1,capture:!!o})},ct=function(e,n,t,r){return e.removeEventListener(n,t,!!r)},sn="scrollLeft",an="scrollTop",Kn=function(){return Vt&&Vt.isPressed||xe.cache++},An=function(e,n){var t=function r(o){if(o||o===0){ii&&(vt.history.scrollRestoration="manual");var l=Vt&&Vt.isPressed;o=r.v=Math.round(o)||(Vt&&Vt.iOS?1:0),e(o),r.cacheID=xe.cache,l&&$n("ss",o)}else(n||xe.cache!==r.cacheID||$n("ref"))&&(r.cacheID=xe.cache,r.v=e());return r.v+r.offset};return t.offset=0,e&&t},gt={s:sn,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:An(function(f){return arguments.length?vt.scrollTo(f,Ve.sc()):vt.pageXOffset||Kt[sn]||Jt[sn]||Mr[sn]||0})},Ve={s:an,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:gt,sc:An(function(f){return arguments.length?vt.scrollTo(gt.sc(),f):vt.pageYOffset||Kt[an]||Jt[an]||Mr[an]||0})},mt=function(e,n){return(n&&n._ctx&&n._ctx.selector||tt.utils.toArray)(e)[0]||(typeof e=="string"&&tt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},tr=function(e,n){var t=n.s,r=n.sc;jr(e)&&(e=Kt.scrollingElement||Jt);var o=xe.indexOf(e),l=r===Ve.sc?1:2;!~o&&(o=xe.push(e)-1),xe[o+l]||ut(e,"scroll",Kn);var u=xe[o+l],x=u||(xe[o+l]=An(er(e,t),!0)||(jr(e)?r:An(function(T){return arguments.length?e[t]=T:e[t]})));return x.target=e,u||(x.smooth=tt.getProperty(e,"scrollBehavior")==="smooth"),x},Jn=function(e,n,t){var r=e,o=e,l=Yr(),u=l,x=n||50,T=Math.max(500,x*3),I=function(L,C){var m=Yr();C||m-l>x?(o=r,r=L,u=l,l=m):t?r+=L:r=o+(L-o)/(m-u)*(l-u)},_=function(){o=r=t?0:r,u=l=0},S=function(L){var C=u,m=o,G=Yr();return(L||L===0)&&L!==r&&I(L),l===u||G-u>T?0:(r+(t?m:-m))/((t?G:l)-C)*1e3};return{update:I,reset:_,getVelocity:S}},Or=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},vo=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},si=function(){Wr=tt.core.globals().ScrollTrigger,Wr&&Wr.core&&as()},ai=function(e){return tt=e||oi(),!vn&&tt&&typeof document<"u"&&document.body&&(vt=window,Kt=document,Jt=Kt.documentElement,Mr=Kt.body,ri=[vt,Kt,Jt,Mr],tt.utils.clamp,ni=tt.core.context||function(){},ar="onpointerenter"in Mr?"pointer":"mouse",ti=Fe.isTouch=vt.matchMedia&&vt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in vt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Rt=Fe.eventTypes=("ontouchstart"in Jt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Jt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return ii=0},500),si(),vn=1),vn};gt.op=Ve;xe.cache=0;var Fe=function(){function f(n){this.init(n)}var e=f.prototype;return e.init=function(t){vn||ai(tt)||console.warn("Please gsap.registerPlugin(Observer)"),Wr||si();var r=t.tolerance,o=t.dragMinimum,l=t.type,u=t.target,x=t.lineHeight,T=t.debounce,I=t.preventDefault,_=t.onStop,S=t.onStopDelay,b=t.ignore,L=t.wheelSpeed,C=t.event,m=t.onDragStart,G=t.onDragEnd,q=t.onDrag,B=t.onPress,k=t.onRelease,Y=t.onRight,j=t.onLeft,z=t.onUp,U=t.onDown,V=t.onChangeX,O=t.onChangeY,te=t.onChange,D=t.onToggleX,ee=t.onToggleY,J=t.onHover,Q=t.onHoverEnd,X=t.onMove,H=t.ignoreCheck,M=t.isNormalizer,oe=t.onGestureStart,p=t.onGestureEnd,se=t.onWheel,Ce=t.onEnable,Qe=t.onDisable,g=t.onClick,c=t.scrollSpeed,s=t.capture,i=t.allowClicks,w=t.lockAxis,R=t.onLockAxis;this.target=u=mt(u)||Jt,this.vars=t,b&&(b=tt.utils.toArray(b)),r=r||1e-9,o=o||0,L=L||1,c=c||1,l=l||"wheel,touch,pointer",T=T!==!1,x||(x=parseFloat(vt.getComputedStyle(Mr).lineHeight)||22);var y,E,F,A,v,P,N,d=this,h=0,a=0,W=t.passive||!I&&t.passive!==!1,$=tr(u,gt),ve=tr(u,Ve),ge=$(),ye=ve(),Te=~l.indexOf("touch")&&!~l.indexOf("pointer")&&Rt[0]==="pointerdown",ae=jr(u),fe=u.ownerDocument||Kt,Se=[0,0,0],re=[0,0,0],we=0,ke=function(){return we=Yr()},Re=function(ie,Pe){return(d.event=ie)&&b&&~b.indexOf(ie.target)||Pe&&Te&&ie.pointerType!=="touch"||H&&H(ie,Pe)},qt=function(){d._vx.reset(),d._vy.reset(),E.pause(),_&&_(d)},De=function(){var ie=d.deltaX=vo(Se),Pe=d.deltaY=vo(re),Z=Math.abs(ie)>=r,le=Math.abs(Pe)>=r;te&&(Z||le)&&te(d,ie,Pe,Se,re),Z&&(Y&&d.deltaX>0&&Y(d),j&&d.deltaX<0&&j(d),V&&V(d),D&&d.deltaX<0!=h<0&&D(d),h=d.deltaX,Se[0]=Se[1]=Se[2]=0),le&&(U&&d.deltaY>0&&U(d),z&&d.deltaY<0&&z(d),O&&O(d),ee&&d.deltaY<0!=a<0&&ee(d),a=d.deltaY,re[0]=re[1]=re[2]=0),(A||F)&&(X&&X(d),F&&(m&&F===1&&m(d),q&&q(d),F=0),A=!1),P&&!(P=!1)&&R&&R(d),v&&(se(d),v=!1),y=0},Tt=function(ie,Pe,Z){Se[Z]+=ie,re[Z]+=Pe,d._vx.update(ie),d._vy.update(Pe),T?y||(y=requestAnimationFrame(De)):De()},Zt=function(ie,Pe){w&&!N&&(d.axis=N=Math.abs(ie)>Math.abs(Pe)?"x":"y",P=!0),N!=="y"&&(Se[2]+=ie,d._vx.update(ie,!0)),N!=="x"&&(re[2]+=Pe,d._vy.update(Pe,!0)),T?y||(y=requestAnimationFrame(De)):De()},Et=function(ie){if(!Re(ie,1)){ie=Or(ie,I);var Pe=ie.clientX,Z=ie.clientY,le=Pe-d.x,ne=Z-d.y,ce=d.isDragging;d.x=Pe,d.y=Z,(ce||(le||ne)&&(Math.abs(d.startX-Pe)>=o||Math.abs(d.startY-Z)>=o))&&(F=ce?2:1,ce||(d.isDragging=!0),Zt(le,ne))}},Gt=d.onPress=function(ue){Re(ue,1)||ue&&ue.button||(d.axis=N=null,E.pause(),d.isPressed=!0,ue=Or(ue),h=a=0,d.startX=d.x=ue.clientX,d.startY=d.y=ue.clientY,d._vx.reset(),d._vy.reset(),ut(M?u:fe,Rt[1],Et,W,!0),d.deltaX=d.deltaY=0,B&&B(d))},he=d.onRelease=function(ue){if(!Re(ue,1)){ct(M?u:fe,Rt[1],Et,!0);var ie=!isNaN(d.y-d.startY),Pe=d.isDragging,Z=Pe&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),le=Or(ue);!Z&&ie&&(d._vx.reset(),d._vy.reset(),I&&i&&tt.delayedCall(.08,function(){if(Yr()-we>300&&!ue.defaultPrevented){if(ue.target.click)ue.target.click();else if(fe.createEvent){var ne=fe.createEvent("MouseEvents");ne.initMouseEvent("click",!0,!0,vt,1,le.screenX,le.screenY,le.clientX,le.clientY,!1,!1,!1,!1,0,null),ue.target.dispatchEvent(ne)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,_&&Pe&&!M&&E.restart(!0),F&&De(),G&&Pe&&G(d),k&&k(d,Z)}},Le=function(ie){return ie.touches&&ie.touches.length>1&&(d.isGesturing=!0)&&oe(ie,d.isDragging)},lt=function(){return(d.isGesturing=!1)||p(d)},Ue=function(ie){if(!Re(ie)){var Pe=$(),Z=ve();Tt((Pe-ge)*c,(Z-ye)*c,1),ge=Pe,ye=Z,_&&E.restart(!0)}},$e=function(ie){if(!Re(ie)){ie=Or(ie,I),se&&(v=!0);var Pe=(ie.deltaMode===1?x:ie.deltaMode===2?vt.innerHeight:1)*L;Tt(ie.deltaX*Pe,ie.deltaY*Pe,0),_&&!M&&E.restart(!0)}},Ut=function(ie){if(!Re(ie)){var Pe=ie.clientX,Z=ie.clientY,le=Pe-d.x,ne=Z-d.y;d.x=Pe,d.y=Z,A=!0,_&&E.restart(!0),(le||ne)&&Zt(le,ne)}},At=function(ie){d.event=ie,J(d)},Wt=function(ie){d.event=ie,Q(d)},kr=function(ie){return Re(ie)||Or(ie,I)&&g(d)};E=d._dc=tt.delayedCall(S||.25,qt).pause(),d.deltaX=d.deltaY=0,d._vx=Jn(0,50,!0),d._vy=Jn(0,50,!0),d.scrollX=$,d.scrollY=ve,d.isDragging=d.isGesturing=d.isPressed=!1,ni(this),d.enable=function(ue){return d.isEnabled||(ut(ae?fe:u,"scroll",Kn),l.indexOf("scroll")>=0&&ut(ae?fe:u,"scroll",Ue,W,s),l.indexOf("wheel")>=0&&ut(u,"wheel",$e,W,s),(l.indexOf("touch")>=0&&ti||l.indexOf("pointer")>=0)&&(ut(u,Rt[0],Gt,W,s),ut(fe,Rt[2],he),ut(fe,Rt[3],he),i&&ut(u,"click",ke,!0,!0),g&&ut(u,"click",kr),oe&&ut(fe,"gesturestart",Le),p&&ut(fe,"gestureend",lt),J&&ut(u,ar+"enter",At),Q&&ut(u,ar+"leave",Wt),X&&ut(u,ar+"move",Ut)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=A=F=!1,d._vx.reset(),d._vy.reset(),ge=$(),ye=ve(),ue&&ue.type&&Gt(ue),Ce&&Ce(d)),d},d.disable=function(){d.isEnabled&&(Pr.filter(function(ue){return ue!==d&&jr(ue.target)}).length||ct(ae?fe:u,"scroll",Kn),d.isPressed&&(d._vx.reset(),d._vy.reset(),ct(M?u:fe,Rt[1],Et,!0)),ct(ae?fe:u,"scroll",Ue,s),ct(u,"wheel",$e,s),ct(u,Rt[0],Gt,s),ct(fe,Rt[2],he),ct(fe,Rt[3],he),ct(u,"click",ke,!0),ct(u,"click",kr),ct(fe,"gesturestart",Le),ct(fe,"gestureend",lt),ct(u,ar+"enter",At),ct(u,ar+"leave",Wt),ct(u,ar+"move",Ut),d.isEnabled=d.isPressed=d.isDragging=!1,Qe&&Qe(d))},d.kill=d.revert=function(){d.disable();var ue=Pr.indexOf(d);ue>=0&&Pr.splice(ue,1),Vt===d&&(Vt=0)},Pr.push(d),M&&jr(u)&&(Vt=d),d.enable(C)},ss(f,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),f}();Fe.version="3.12.7";Fe.create=function(f){return new Fe(f)};Fe.register=ai;Fe.getAll=function(){return Pr.slice()};Fe.getById=function(f){return Pr.filter(function(e){return e.vars.id===f})[0]};oi()&&tt.registerPlugin(Fe);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var K,vr,be,Ae,_t,Me,lo,kn,en,Vr,zr,ln,it,zn,eo,dt,To,So,Tr,li,Gn,ci,ft,to,ui,fi,$t,ro,co,Cr,uo,Rn,no,Un,cn=1,st=Date.now,Wn=st(),Ct=0,Fr=0,Po=function(e,n,t){var r=wt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=r,r?e.substr(6,e.length-7):e},Mo=function(e,n){return n&&(!wt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},ls=function f(){return Fr&&requestAnimationFrame(f)},Co=function(){return zn=1},Eo=function(){return zn=0},Ft=function(e){return e},Br=function(e){return Math.round(e*1e5)/1e5||0},di=function(){return typeof window<"u"},pi=function(){return K||di()&&(K=window.gsap)&&K.registerPlugin&&K},gr=function(e){return!!~lo.indexOf(e)},hi=function(e){return(e==="Height"?uo:be["inner"+e])||_t["client"+e]||Me["client"+e]},gi=function(e){return er(e,"getBoundingClientRect")||(gr(e)?function(){return Cn.width=be.innerWidth,Cn.height=uo,Cn}:function(){return jt(e)})},cs=function(e,n,t){var r=t.d,o=t.d2,l=t.a;return(l=er(e,"getBoundingClientRect"))?function(){return l()[r]}:function(){return(n?hi(o):e["client"+o])||0}},us=function(e,n){return!n||~Ht.indexOf(e)?gi(e):function(){return Cn}},Bt=function(e,n){var t=n.s,r=n.d2,o=n.d,l=n.a;return Math.max(0,(t="scroll"+r)&&(l=er(e,t))?l()-gi(e)()[o]:gr(e)?(_t[t]||Me[t])-hi(r):e[t]-e["offset"+r])},un=function(e,n){for(var t=0;t<Tr.length;t+=3)(!n||~n.indexOf(Tr[t+1]))&&e(Tr[t],Tr[t+1],Tr[t+2])},wt=function(e){return typeof e=="string"},at=function(e){return typeof e=="function"},Hr=function(e){return typeof e=="number"},lr=function(e){return typeof e=="object"},Nr=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},Yn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},xr=Math.abs,mi="left",yi="top",fo="right",po="bottom",fr="width",dr="height",Xr="Right",qr="Left",Zr="Top",Qr="Bottom",He="padding",Pt="margin",Ar="Width",ho="Height",Ye="px",Mt=function(e){return be.getComputedStyle(e)},fs=function(e){var n=Mt(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Ao=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},jt=function(e,n){var t=n&&Mt(e)[eo]!=="matrix(1, 0, 0, 1, 0, 0)"&&K.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return t&&t.progress(0).kill(),r},In=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},bi=function(e){var n=[],t=e.labels,r=e.duration(),o;for(o in t)n.push(t[o]/r);return n},ds=function(e){return function(n){return K.utils.snap(bi(e),n)}},go=function(e){var n=K.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(r,o){return r-o});return t?function(r,o,l){l===void 0&&(l=.001);var u;if(!o)return n(r);if(o>0){for(r-=l,u=0;u<t.length;u++)if(t[u]>=r)return t[u];return t[u-1]}else for(u=t.length,r+=l;u--;)if(t[u]<=r)return t[u];return t[0]}:function(r,o,l){l===void 0&&(l=.001);var u=n(r);return!o||Math.abs(u-r)<l||u-r<0==o<0?u:n(o<0?r-e:r+e)}},ps=function(e){return function(n,t){return go(bi(e))(n,t.direction)}},fn=function(e,n,t,r){return t.split(",").forEach(function(o){return e(n,o,r)})},Ze=function(e,n,t,r,o){return e.addEventListener(n,t,{passive:!r,capture:!!o})},qe=function(e,n,t,r){return e.removeEventListener(n,t,!!r)},dn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},ko={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},pn={toggleActions:"play",anticipatePin:0},Dn={top:0,left:0,center:.5,bottom:1,right:1},Tn=function(e,n){if(wt(e)){var t=e.indexOf("="),r=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(r*=n/100),e=e.substr(0,t-1)),e=r+(e in Dn?Dn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},hn=function(e,n,t,r,o,l,u,x){var T=o.startColor,I=o.endColor,_=o.fontSize,S=o.indent,b=o.fontWeight,L=Ae.createElement("div"),C=gr(t)||er(t,"pinType")==="fixed",m=e.indexOf("scroller")!==-1,G=C?Me:t,q=e.indexOf("start")!==-1,B=q?T:I,k="border-color:"+B+";font-size:"+_+";color:"+B+";font-weight:"+b+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return k+="position:"+((m||x)&&C?"fixed;":"absolute;"),(m||x||!C)&&(k+=(r===Ve?fo:po)+":"+(l+parseFloat(S))+"px;"),u&&(k+="box-sizing:border-box;text-align:left;width:"+u.offsetWidth+"px;"),L._isStart=q,L.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),L.style.cssText=k,L.innerText=n||n===0?e+"-"+n:e,G.children[0]?G.insertBefore(L,G.children[0]):G.appendChild(L),L._offset=L["offset"+r.op.d2],Sn(L,0,r,q),L},Sn=function(e,n,t,r){var o={display:"block"},l=t[r?"os2":"p2"],u=t[r?"p2":"os2"];e._isFlipped=r,o[t.a+"Percent"]=r?-100:0,o[t.a]=r?"1px":0,o["border"+l+Ar]=1,o["border"+u+Ar]=0,o[t.p]=n+"px",K.set(e,o)},me=[],oo={},tn,Ro=function(){return st()-Ct>34&&(tn||(tn=requestAnimationFrame(Xt)))},wr=function(){(!ft||!ft.isPressed||ft.startX>Me.clientWidth)&&(xe.cache++,ft?tn||(tn=requestAnimationFrame(Xt)):Xt(),Ct||yr("scrollStart"),Ct=st())},jn=function(){fi=be.innerWidth,ui=be.innerHeight},Gr=function(e){xe.cache++,(e===!0||!it&&!ci&&!Ae.fullscreenElement&&!Ae.webkitFullscreenElement&&(!to||fi!==be.innerWidth||Math.abs(be.innerHeight-ui)>be.innerHeight*.25))&&kn.restart(!0)},mr={},hs=[],xi=function f(){return qe(pe,"scrollEnd",f)||ur(!0)},yr=function(e){return mr[e]&&mr[e].map(function(n){return n()})||hs},xt=[],wi=function(e){for(var n=0;n<xt.length;n+=5)(!e||xt[n+4]&&xt[n+4].query===e)&&(xt[n].style.cssText=xt[n+1],xt[n].getBBox&&xt[n].setAttribute("transform",xt[n+2]||""),xt[n+3].uncache=1)},mo=function(e,n){var t;for(dt=0;dt<me.length;dt++)t=me[dt],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));Rn=!0,n&&wi(n),n||yr("revert")},_i=function(e,n){xe.cache++,(n||!pt)&&xe.forEach(function(t){return at(t)&&t.cacheID++&&(t.rec=0)}),wt(e)&&(be.history.scrollRestoration=co=e)},pt,pr=0,Io,gs=function(){if(Io!==pr){var e=Io=pr;requestAnimationFrame(function(){return e===pr&&ur(!0)})}},vi=function(){Me.appendChild(Cr),uo=!ft&&Cr.offsetHeight||be.innerHeight,Me.removeChild(Cr)},Do=function(e){return en(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},ur=function(e,n){if(_t=Ae.documentElement,Me=Ae.body,lo=[be,Ae,_t,Me],Ct&&!e&&!Rn){Ze(pe,"scrollEnd",xi);return}vi(),pt=pe.isRefreshing=!0,xe.forEach(function(r){return at(r)&&++r.cacheID&&(r.rec=r())});var t=yr("refreshInit");li&&pe.sort(),n||mo(),xe.forEach(function(r){at(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),me.slice(0).forEach(function(r){return r.refresh()}),Rn=!1,me.forEach(function(r){if(r._subPinOffset&&r.pin){var o=r.vars.horizontal?"offsetWidth":"offsetHeight",l=r.pin[o];r.revert(!0,1),r.adjustPinSpacing(r.pin[o]-l),r.refresh()}}),no=1,Do(!0),me.forEach(function(r){var o=Bt(r.scroller,r._dir),l=r.vars.end==="max"||r._endClamp&&r.end>o,u=r._startClamp&&r.start>=o;(l||u)&&r.setPositions(u?o-1:r.start,l?Math.max(u?o:r.start+1,o):r.end,!0)}),Do(!1),no=0,t.forEach(function(r){return r&&r.render&&r.render(-1)}),xe.forEach(function(r){at(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),_i(co,1),kn.pause(),pr++,pt=2,Xt(2),me.forEach(function(r){return at(r.vars.onRefresh)&&r.vars.onRefresh(r)}),pt=pe.isRefreshing=!1,yr("refresh")},io=0,Pn=1,$r,Xt=function(e){if(e===2||!pt&&!Rn){pe.isUpdating=!0,$r&&$r.update(0);var n=me.length,t=st(),r=t-Wn>=50,o=n&&me[0].scroll();if(Pn=io>o?-1:1,pt||(io=o),r&&(Ct&&!zn&&t-Ct>200&&(Ct=0,yr("scrollEnd")),zr=Wn,Wn=t),Pn<0){for(dt=n;dt-- >0;)me[dt]&&me[dt].update(0,r);Pn=1}else for(dt=0;dt<n;dt++)me[dt]&&me[dt].update(0,r);pe.isUpdating=!1}tn=0},so=[mi,yi,po,fo,Pt+Qr,Pt+Xr,Pt+Zr,Pt+qr,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Mn=so.concat([fr,dr,"boxSizing","max"+Ar,"max"+ho,"position",Pt,He,He+Zr,He+Xr,He+Qr,He+qr]),ms=function(e,n,t){Er(t);var r=e._gsap;if(r.spacerIsNative)Er(r.spacerState);else if(e._gsap.swappedIn){var o=n.parentNode;o&&(o.insertBefore(e,n),o.removeChild(n))}e._gsap.swappedIn=!1},Vn=function(e,n,t,r){if(!e._gsap.swappedIn){for(var o=so.length,l=n.style,u=e.style,x;o--;)x=so[o],l[x]=t[x];l.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(l.display="inline-block"),u[po]=u[fo]="auto",l.flexBasis=t.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[fr]=In(e,gt)+Ye,l[dr]=In(e,Ve)+Ye,l[He]=u[Pt]=u[yi]=u[mi]="0",Er(r),u[fr]=u["max"+Ar]=t[fr],u[dr]=u["max"+ho]=t[dr],u[He]=t[He],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},ys=/([A-Z])/g,Er=function(e){if(e){var n=e.t.style,t=e.length,r=0,o,l;for((e.t._gsap||K.core.getCache(e.t)).uncache=1;r<t;r+=2)l=e[r+1],o=e[r],l?n[o]=l:n[o]&&n.removeProperty(o.replace(ys,"-$1").toLowerCase())}},gn=function(e){for(var n=Mn.length,t=e.style,r=[],o=0;o<n;o++)r.push(Mn[o],t[Mn[o]]);return r.t=e,r},bs=function(e,n,t){for(var r=[],o=e.length,l=t?8:0,u;l<o;l+=2)u=e[l],r.push(u,u in n?n[u]:e[l+1]);return r.t=e.t,r},Cn={left:0,top:0},Oo=function(e,n,t,r,o,l,u,x,T,I,_,S,b,L){at(e)&&(e=e(x)),wt(e)&&e.substr(0,3)==="max"&&(e=S+(e.charAt(4)==="="?Tn("0"+e.substr(3),t):0));var C=b?b.time():0,m,G,q;if(b&&b.seek(0),isNaN(e)||(e=+e),Hr(e))b&&(e=K.utils.mapRange(b.scrollTrigger.start,b.scrollTrigger.end,0,S,e)),u&&Sn(u,t,r,!0);else{at(n)&&(n=n(x));var B=(e||"0").split(" "),k,Y,j,z;q=mt(n,x)||Me,k=jt(q)||{},(!k||!k.left&&!k.top)&&Mt(q).display==="none"&&(z=q.style.display,q.style.display="block",k=jt(q),z?q.style.display=z:q.style.removeProperty("display")),Y=Tn(B[0],k[r.d]),j=Tn(B[1]||"0",t),e=k[r.p]-T[r.p]-I+Y+o-j,u&&Sn(u,j,r,t-j<20||u._isStart&&j>20),t-=t-j}if(L&&(x[L]=e||-.001,e<0&&(e=0)),l){var U=e+t,V=l._isStart;m="scroll"+r.d2,Sn(l,U,r,V&&U>20||!V&&(_?Math.max(Me[m],_t[m]):l.parentNode[m])<=U+1),_&&(T=jt(u),_&&(l.style[r.op.p]=T[r.op.p]-r.op.m-l._offset+Ye))}return b&&q&&(m=jt(q),b.seek(S),G=jt(q),b._caScrollDist=m[r.p]-G[r.p],e=e/b._caScrollDist*S),b&&b.seek(C),b?e:Math.round(e)},xs=/(webkit|moz|length|cssText|inset)/i,No=function(e,n,t,r){if(e.parentNode!==n){var o=e.style,l,u;if(n===Me){e._stOrig=o.cssText,u=Mt(e);for(l in u)!+l&&!xs.test(l)&&u[l]&&typeof o[l]=="string"&&l!=="0"&&(o[l]=u[l]);o.top=t,o.left=r}else o.cssText=e._stOrig;K.core.getCache(e).uncache=1,n.appendChild(e)}},Ti=function(e,n,t){var r=n,o=r;return function(l){var u=Math.round(e());return u!==r&&u!==o&&Math.abs(u-r)>3&&Math.abs(u-o)>3&&(l=u,t&&t()),o=r,r=Math.round(l),r}},mn=function(e,n,t){var r={};r[n.p]="+="+t,K.set(e,r)},Lo=function(e,n){var t=tr(e,n),r="_scroll"+n.p2,o=function l(u,x,T,I,_){var S=l.tween,b=x.onComplete,L={};T=T||t();var C=Ti(t,T,function(){S.kill(),l.tween=0});return _=I&&_||0,I=I||u-T,S&&S.kill(),x[r]=u,x.inherit=!1,x.modifiers=L,L[r]=function(){return C(T+I*S.ratio+_*S.ratio*S.ratio)},x.onUpdate=function(){xe.cache++,l.tween&&Xt()},x.onComplete=function(){l.tween=0,b&&b.call(S)},S=l.tween=K.to(e,x),S};return e[r]=t,t.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},Ze(e,"wheel",t.wheelHandler),pe.isTouch&&Ze(e,"touchmove",t.wheelHandler),o},pe=function(){function f(n,t){vr||f.register(K)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ro(this),this.init(n,t)}var e=f.prototype;return e.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Fr){this.update=this.refresh=this.kill=Ft;return}t=Ao(wt(t)||Hr(t)||t.nodeType?{trigger:t}:t,pn);var o=t,l=o.onUpdate,u=o.toggleClass,x=o.id,T=o.onToggle,I=o.onRefresh,_=o.scrub,S=o.trigger,b=o.pin,L=o.pinSpacing,C=o.invalidateOnRefresh,m=o.anticipatePin,G=o.onScrubComplete,q=o.onSnapComplete,B=o.once,k=o.snap,Y=o.pinReparent,j=o.pinSpacer,z=o.containerAnimation,U=o.fastScrollEnd,V=o.preventOverlaps,O=t.horizontal||t.containerAnimation&&t.horizontal!==!1?gt:Ve,te=!_&&_!==0,D=mt(t.scroller||be),ee=K.core.getCache(D),J=gr(D),Q=("pinType"in t?t.pinType:er(D,"pinType")||J&&"fixed")==="fixed",X=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],H=te&&t.toggleActions.split(" "),M="markers"in t?t.markers:pn.markers,oe=J?0:parseFloat(Mt(D)["border"+O.p2+Ar])||0,p=this,se=t.onRefreshInit&&function(){return t.onRefreshInit(p)},Ce=cs(D,J,O),Qe=us(D,J),g=0,c=0,s=0,i=tr(D,O),w,R,y,E,F,A,v,P,N,d,h,a,W,$,ve,ge,ye,Te,ae,fe,Se,re,we,ke,Re,qt,De,Tt,Zt,Et,Gt,he,Le,lt,Ue,$e,Ut,At,Wt;if(p._startClamp=p._endClamp=!1,p._dir=O,m*=45,p.scroller=D,p.scroll=z?z.time.bind(z):i,E=i(),p.vars=t,r=r||t.animation,"refreshPriority"in t&&(li=1,t.refreshPriority===-9999&&($r=p)),ee.tweenScroll=ee.tweenScroll||{top:Lo(D,Ve),left:Lo(D,gt)},p.tweenTo=w=ee.tweenScroll[O.p],p.scrubDuration=function(Z){Le=Hr(Z)&&Z,Le?he?he.duration(Z):he=K.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Le,paused:!0,onComplete:function(){return G&&G(p)}}):(he&&he.progress(1).kill(),he=0)},r&&(r.vars.lazy=!1,r._initted&&!p.isReverted||r.vars.immediateRender!==!1&&t.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),p.animation=r.pause(),r.scrollTrigger=p,p.scrubDuration(_),Et=0,x||(x=r.vars.id)),k&&((!lr(k)||k.push)&&(k={snapTo:k}),"scrollBehavior"in Me.style&&K.set(J?[Me,_t]:D,{scrollBehavior:"auto"}),xe.forEach(function(Z){return at(Z)&&Z.target===(J?Ae.scrollingElement||_t:D)&&(Z.smooth=!1)}),y=at(k.snapTo)?k.snapTo:k.snapTo==="labels"?ds(r):k.snapTo==="labelsDirectional"?ps(r):k.directional!==!1?function(Z,le){return go(k.snapTo)(Z,st()-c<500?0:le.direction)}:K.utils.snap(k.snapTo),lt=k.duration||{min:.1,max:2},lt=lr(lt)?Vr(lt.min,lt.max):Vr(lt,lt),Ue=K.delayedCall(k.delay||Le/2||.1,function(){var Z=i(),le=st()-c<500,ne=w.tween;if((le||Math.abs(p.getVelocity())<10)&&!ne&&!zn&&g!==Z){var ce=(Z-A)/$,Xe=r&&!te?r.totalProgress():ce,_e=le?0:(Xe-Gt)/(st()-zr)*1e3||0,ze=K.utils.clamp(-ce,1-ce,xr(_e/2)*_e/.185),rt=ce+(k.inertia===!1?0:ze),Ne,Ie,Ee=k,kt=Ee.onStart,Oe=Ee.onInterrupt,yt=Ee.onComplete;if(Ne=y(rt,p),Hr(Ne)||(Ne=rt),Ie=Math.max(0,Math.round(A+Ne*$)),Z<=v&&Z>=A&&Ie!==Z){if(ne&&!ne._initted&&ne.data<=xr(Ie-Z))return;k.inertia===!1&&(ze=Ne-ce),w(Ie,{duration:lt(xr(Math.max(xr(rt-Xe),xr(Ne-Xe))*.185/_e/.05||0)),ease:k.ease||"power3",data:xr(Ie-Z),onInterrupt:function(){return Ue.restart(!0)&&Oe&&Oe(p)},onComplete:function(){p.update(),g=i(),r&&!te&&(he?he.resetTo("totalProgress",Ne,r._tTime/r._tDur):r.progress(Ne)),Et=Gt=r&&!te?r.totalProgress():p.progress,q&&q(p),yt&&yt(p)}},Z,ze*$,Ie-Z-ze*$),kt&&kt(p,w.tween)}}else p.isActive&&g!==Z&&Ue.restart(!0)}).pause()),x&&(oo[x]=p),S=p.trigger=mt(S||b!==!0&&b),Wt=S&&S._gsap&&S._gsap.stRevert,Wt&&(Wt=Wt(p)),b=b===!0?S:mt(b),wt(u)&&(u={targets:S,className:u}),b&&(L===!1||L===Pt||(L=!L&&b.parentNode&&b.parentNode.style&&Mt(b.parentNode).display==="flex"?!1:He),p.pin=b,R=K.core.getCache(b),R.spacer?ve=R.pinState:(j&&(j=mt(j),j&&!j.nodeType&&(j=j.current||j.nativeElement),R.spacerIsNative=!!j,j&&(R.spacerState=gn(j))),R.spacer=Te=j||Ae.createElement("div"),Te.classList.add("pin-spacer"),x&&Te.classList.add("pin-spacer-"+x),R.pinState=ve=gn(b)),t.force3D!==!1&&K.set(b,{force3D:!0}),p.spacer=Te=R.spacer,Zt=Mt(b),ke=Zt[L+O.os2],fe=K.getProperty(b),Se=K.quickSetter(b,O.a,Ye),Vn(b,Te,Zt),ye=gn(b)),M){a=lr(M)?Ao(M,ko):ko,d=hn("scroller-start",x,D,O,a,0),h=hn("scroller-end",x,D,O,a,0,d),ae=d["offset"+O.op.d2];var kr=mt(er(D,"content")||D);P=this.markerStart=hn("start",x,kr,O,a,ae,0,z),N=this.markerEnd=hn("end",x,kr,O,a,ae,0,z),z&&(At=K.quickSetter([P,N],O.a,Ye)),!Q&&!(Ht.length&&er(D,"fixedMarkers")===!0)&&(fs(J?Me:D),K.set([d,h],{force3D:!0}),qt=K.quickSetter(d,O.a,Ye),Tt=K.quickSetter(h,O.a,Ye))}if(z){var ue=z.vars.onUpdate,ie=z.vars.onUpdateParams;z.eventCallback("onUpdate",function(){p.update(0,0,1),ue&&ue.apply(z,ie||[])})}if(p.previous=function(){return me[me.indexOf(p)-1]},p.next=function(){return me[me.indexOf(p)+1]},p.revert=function(Z,le){if(!le)return p.kill(!0);var ne=Z!==!1||!p.enabled,ce=it;ne!==p.isReverted&&(ne&&($e=Math.max(i(),p.scroll.rec||0),s=p.progress,Ut=r&&r.progress()),P&&[P,N,d,h].forEach(function(Xe){return Xe.style.display=ne?"none":"block"}),ne&&(it=p,p.update(ne)),b&&(!Y||!p.isActive)&&(ne?ms(b,Te,ve):Vn(b,Te,Mt(b),Re)),ne||p.update(ne),it=ce,p.isReverted=ne)},p.refresh=function(Z,le,ne,ce){if(!((it||!p.enabled)&&!le)){if(b&&Z&&Ct){Ze(f,"scrollEnd",xi);return}!pt&&se&&se(p),it=p,w.tween&&!ne&&(w.tween.kill(),w.tween=0),he&&he.pause(),C&&r&&r.revert({kill:!1}).invalidate(),p.isReverted||p.revert(!0,!0),p._subPinOffset=!1;var Xe=Ce(),_e=Qe(),ze=z?z.duration():Bt(D,O),rt=$<=.01,Ne=0,Ie=ce||0,Ee=lr(ne)?ne.end:t.end,kt=t.endTrigger||S,Oe=lr(ne)?ne.start:t.start||(t.start===0||!S?0:b?"0 0":"0 100%"),yt=p.pinnedContainer=t.pinnedContainer&&mt(t.pinnedContainer,p),Dt=S&&Math.max(0,me.indexOf(p))||0,Ke=Dt,Je,nt,rr,nn,ot,We,Ot,Fn,yo,Rr,Nt,Ir,on;for(M&&lr(ne)&&(Ir=K.getProperty(d,O.p),on=K.getProperty(h,O.p));Ke-- >0;)We=me[Ke],We.end||We.refresh(0,1)||(it=p),Ot=We.pin,Ot&&(Ot===S||Ot===b||Ot===yt)&&!We.isReverted&&(Rr||(Rr=[]),Rr.unshift(We),We.revert(!0,!0)),We!==me[Ke]&&(Dt--,Ke--);for(at(Oe)&&(Oe=Oe(p)),Oe=Po(Oe,"start",p),A=Oo(Oe,S,Xe,O,i(),P,d,p,_e,oe,Q,ze,z,p._startClamp&&"_startClamp")||(b?-.001:0),at(Ee)&&(Ee=Ee(p)),wt(Ee)&&!Ee.indexOf("+=")&&(~Ee.indexOf(" ")?Ee=(wt(Oe)?Oe.split(" ")[0]:"")+Ee:(Ne=Tn(Ee.substr(2),Xe),Ee=wt(Oe)?Oe:(z?K.utils.mapRange(0,z.duration(),z.scrollTrigger.start,z.scrollTrigger.end,A):A)+Ne,kt=S)),Ee=Po(Ee,"end",p),v=Math.max(A,Oo(Ee||(kt?"100% 0":ze),kt,Xe,O,i()+Ne,N,h,p,_e,oe,Q,ze,z,p._endClamp&&"_endClamp"))||-.001,Ne=0,Ke=Dt;Ke--;)We=me[Ke],Ot=We.pin,Ot&&We.start-We._pinPush<=A&&!z&&We.end>0&&(Je=We.end-(p._startClamp?Math.max(0,We.start):We.start),(Ot===S&&We.start-We._pinPush<A||Ot===yt)&&isNaN(Oe)&&(Ne+=Je*(1-We.progress)),Ot===b&&(Ie+=Je));if(A+=Ne,v+=Ne,p._startClamp&&(p._startClamp+=Ne),p._endClamp&&!pt&&(p._endClamp=v||-.001,v=Math.min(v,Bt(D,O))),$=v-A||(A-=.01)&&.001,rt&&(s=K.utils.clamp(0,1,K.utils.normalize(A,v,$e))),p._pinPush=Ie,P&&Ne&&(Je={},Je[O.a]="+="+Ne,yt&&(Je[O.p]="-="+i()),K.set([P,N],Je)),b&&!(no&&p.end>=Bt(D,O)))Je=Mt(b),nn=O===Ve,rr=i(),re=parseFloat(fe(O.a))+Ie,!ze&&v>1&&(Nt=(J?Ae.scrollingElement||_t:D).style,Nt={style:Nt,value:Nt["overflow"+O.a.toUpperCase()]},J&&Mt(Me)["overflow"+O.a.toUpperCase()]!=="scroll"&&(Nt.style["overflow"+O.a.toUpperCase()]="scroll")),Vn(b,Te,Je),ye=gn(b),nt=jt(b,!0),Fn=Q&&tr(D,nn?gt:Ve)(),L?(Re=[L+O.os2,$+Ie+Ye],Re.t=Te,Ke=L===He?In(b,O)+$+Ie:0,Ke&&(Re.push(O.d,Ke+Ye),Te.style.flexBasis!=="auto"&&(Te.style.flexBasis=Ke+Ye)),Er(Re),yt&&me.forEach(function(Dr){Dr.pin===yt&&Dr.vars.pinSpacing!==!1&&(Dr._subPinOffset=!0)}),Q&&i($e)):(Ke=In(b,O),Ke&&Te.style.flexBasis!=="auto"&&(Te.style.flexBasis=Ke+Ye)),Q&&(ot={top:nt.top+(nn?rr-A:Fn)+Ye,left:nt.left+(nn?Fn:rr-A)+Ye,boxSizing:"border-box",position:"fixed"},ot[fr]=ot["max"+Ar]=Math.ceil(nt.width)+Ye,ot[dr]=ot["max"+ho]=Math.ceil(nt.height)+Ye,ot[Pt]=ot[Pt+Zr]=ot[Pt+Xr]=ot[Pt+Qr]=ot[Pt+qr]="0",ot[He]=Je[He],ot[He+Zr]=Je[He+Zr],ot[He+Xr]=Je[He+Xr],ot[He+Qr]=Je[He+Qr],ot[He+qr]=Je[He+qr],ge=bs(ve,ot,Y),pt&&i(0)),r?(yo=r._initted,Gn(1),r.render(r.duration(),!0,!0),we=fe(O.a)-re+$+Ie,De=Math.abs($-we)>1,Q&&De&&ge.splice(ge.length-2,2),r.render(0,!0,!0),yo||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),Gn(0)):we=$,Nt&&(Nt.value?Nt.style["overflow"+O.a.toUpperCase()]=Nt.value:Nt.style.removeProperty("overflow-"+O.a));else if(S&&i()&&!z)for(nt=S.parentNode;nt&&nt!==Me;)nt._pinOffset&&(A-=nt._pinOffset,v-=nt._pinOffset),nt=nt.parentNode;Rr&&Rr.forEach(function(Dr){return Dr.revert(!1,!0)}),p.start=A,p.end=v,E=F=pt?$e:i(),!z&&!pt&&(E<$e&&i($e),p.scroll.rec=0),p.revert(!1,!0),c=st(),Ue&&(g=-1,Ue.restart(!0)),it=0,r&&te&&(r._initted||Ut)&&r.progress()!==Ut&&r.progress(Ut||0,!0).render(r.time(),!0,!0),(rt||s!==p.progress||z||C||r&&!r._initted)&&(r&&!te&&r.totalProgress(z&&A<-.001&&!s?K.utils.normalize(A,v,0):s,!0),p.progress=rt||(E-A)/$===s?0:s),b&&L&&(Te._pinOffset=Math.round(p.progress*we)),he&&he.invalidate(),isNaN(Ir)||(Ir-=K.getProperty(d,O.p),on-=K.getProperty(h,O.p),mn(d,O,Ir),mn(P,O,Ir-(ce||0)),mn(h,O,on),mn(N,O,on-(ce||0))),rt&&!pt&&p.update(),I&&!pt&&!W&&(W=!0,I(p),W=!1)}},p.getVelocity=function(){return(i()-F)/(st()-zr)*1e3||0},p.endAnimation=function(){Nr(p.callbackAnimation),r&&(he?he.progress(1):r.paused()?te||Nr(r,p.direction<0,1):Nr(r,r.reversed()))},p.labelToScroll=function(Z){return r&&r.labels&&(A||p.refresh()||A)+r.labels[Z]/r.duration()*$||0},p.getTrailing=function(Z){var le=me.indexOf(p),ne=p.direction>0?me.slice(0,le).reverse():me.slice(le+1);return(wt(Z)?ne.filter(function(ce){return ce.vars.preventOverlaps===Z}):ne).filter(function(ce){return p.direction>0?ce.end<=A:ce.start>=v})},p.update=function(Z,le,ne){if(!(z&&!ne&&!Z)){var ce=pt===!0?$e:p.scroll(),Xe=Z?0:(ce-A)/$,_e=Xe<0?0:Xe>1?1:Xe||0,ze=p.progress,rt,Ne,Ie,Ee,kt,Oe,yt,Dt;if(le&&(F=E,E=z?i():ce,k&&(Gt=Et,Et=r&&!te?r.totalProgress():_e)),m&&b&&!it&&!cn&&Ct&&(!_e&&A<ce+(ce-F)/(st()-zr)*m?_e=1e-4:_e===1&&v>ce+(ce-F)/(st()-zr)*m&&(_e=.9999)),_e!==ze&&p.enabled){if(rt=p.isActive=!!_e&&_e<1,Ne=!!ze&&ze<1,Oe=rt!==Ne,kt=Oe||!!_e!=!!ze,p.direction=_e>ze?1:-1,p.progress=_e,kt&&!it&&(Ie=_e&&!ze?0:_e===1?1:ze===1?2:3,te&&(Ee=!Oe&&H[Ie+1]!=="none"&&H[Ie+1]||H[Ie],Dt=r&&(Ee==="complete"||Ee==="reset"||Ee in r))),V&&(Oe||Dt)&&(Dt||_||!r)&&(at(V)?V(p):p.getTrailing(V).forEach(function(rr){return rr.endAnimation()})),te||(he&&!it&&!cn?(he._dp._time-he._start!==he._time&&he.render(he._dp._time-he._start),he.resetTo?he.resetTo("totalProgress",_e,r._tTime/r._tDur):(he.vars.totalProgress=_e,he.invalidate().restart())):r&&r.totalProgress(_e,!!(it&&(c||Z)))),b){if(Z&&L&&(Te.style[L+O.os2]=ke),!Q)Se(Br(re+we*_e));else if(kt){if(yt=!Z&&_e>ze&&v+1>ce&&ce+1>=Bt(D,O),Y)if(!Z&&(rt||yt)){var Ke=jt(b,!0),Je=ce-A;No(b,Me,Ke.top+(O===Ve?Je:0)+Ye,Ke.left+(O===Ve?0:Je)+Ye)}else No(b,Te);Er(rt||yt?ge:ye),De&&_e<1&&rt||Se(re+(_e===1&&!yt?we:0))}}k&&!w.tween&&!it&&!cn&&Ue.restart(!0),u&&(Oe||B&&_e&&(_e<1||!Un))&&en(u.targets).forEach(function(rr){return rr.classList[rt||B?"add":"remove"](u.className)}),l&&!te&&!Z&&l(p),kt&&!it?(te&&(Dt&&(Ee==="complete"?r.pause().totalProgress(1):Ee==="reset"?r.restart(!0).pause():Ee==="restart"?r.restart(!0):r[Ee]()),l&&l(p)),(Oe||!Un)&&(T&&Oe&&Yn(p,T),X[Ie]&&Yn(p,X[Ie]),B&&(_e===1?p.kill(!1,1):X[Ie]=0),Oe||(Ie=_e===1?1:3,X[Ie]&&Yn(p,X[Ie]))),U&&!rt&&Math.abs(p.getVelocity())>(Hr(U)?U:2500)&&(Nr(p.callbackAnimation),he?he.progress(1):Nr(r,Ee==="reverse"?1:!_e,1))):te&&l&&!it&&l(p)}if(Tt){var nt=z?ce/z.duration()*(z._caScrollDist||0):ce;qt(nt+(d._isFlipped?1:0)),Tt(nt)}At&&At(-ce/z.duration()*(z._caScrollDist||0))}},p.enable=function(Z,le){p.enabled||(p.enabled=!0,Ze(D,"resize",Gr),J||Ze(D,"scroll",wr),se&&Ze(f,"refreshInit",se),Z!==!1&&(p.progress=s=0,E=F=g=i()),le!==!1&&p.refresh())},p.getTween=function(Z){return Z&&w?w.tween:he},p.setPositions=function(Z,le,ne,ce){if(z){var Xe=z.scrollTrigger,_e=z.duration(),ze=Xe.end-Xe.start;Z=Xe.start+ze*Z/_e,le=Xe.start+ze*le/_e}p.refresh(!1,!1,{start:Mo(Z,ne&&!!p._startClamp),end:Mo(le,ne&&!!p._endClamp)},ce),p.update()},p.adjustPinSpacing=function(Z){if(Re&&Z){var le=Re.indexOf(O.d)+1;Re[le]=parseFloat(Re[le])+Z+Ye,Re[1]=parseFloat(Re[1])+Z+Ye,Er(Re)}},p.disable=function(Z,le){if(p.enabled&&(Z!==!1&&p.revert(!0,!0),p.enabled=p.isActive=!1,le||he&&he.pause(),$e=0,R&&(R.uncache=1),se&&qe(f,"refreshInit",se),Ue&&(Ue.pause(),w.tween&&w.tween.kill()&&(w.tween=0)),!J)){for(var ne=me.length;ne--;)if(me[ne].scroller===D&&me[ne]!==p)return;qe(D,"resize",Gr),J||qe(D,"scroll",wr)}},p.kill=function(Z,le){p.disable(Z,le),he&&!le&&he.kill(),x&&delete oo[x];var ne=me.indexOf(p);ne>=0&&me.splice(ne,1),ne===dt&&Pn>0&&dt--,ne=0,me.forEach(function(ce){return ce.scroller===p.scroller&&(ne=1)}),ne||pt||(p.scroll.rec=0),r&&(r.scrollTrigger=null,Z&&r.revert({kill:!1}),le||r.kill()),P&&[P,N,d,h].forEach(function(ce){return ce.parentNode&&ce.parentNode.removeChild(ce)}),$r===p&&($r=0),b&&(R&&(R.uncache=1),ne=0,me.forEach(function(ce){return ce.pin===b&&ne++}),ne||(R.spacer=0)),t.onKill&&t.onKill(p)},me.push(p),p.enable(!1,!1),Wt&&Wt(p),r&&r.add&&!$){var Pe=p.update;p.update=function(){p.update=Pe,xe.cache++,A||v||p.refresh()},K.delayedCall(.01,p.update),$=.01,A=v=0}else p.refresh();b&&gs()},f.register=function(t){return vr||(K=t||pi(),di()&&window.document&&f.enable(),vr=Fr),vr},f.defaults=function(t){if(t)for(var r in t)pn[r]=t[r];return pn},f.disable=function(t,r){Fr=0,me.forEach(function(l){return l[r?"kill":"disable"](t)}),qe(be,"wheel",wr),qe(Ae,"scroll",wr),clearInterval(ln),qe(Ae,"touchcancel",Ft),qe(Me,"touchstart",Ft),fn(qe,Ae,"pointerdown,touchstart,mousedown",Co),fn(qe,Ae,"pointerup,touchend,mouseup",Eo),kn.kill(),un(qe);for(var o=0;o<xe.length;o+=3)dn(qe,xe[o],xe[o+1]),dn(qe,xe[o],xe[o+2])},f.enable=function(){if(be=window,Ae=document,_t=Ae.documentElement,Me=Ae.body,K&&(en=K.utils.toArray,Vr=K.utils.clamp,ro=K.core.context||Ft,Gn=K.core.suppressOverwrites||Ft,co=be.history.scrollRestoration||"auto",io=be.pageYOffset||0,K.core.globals("ScrollTrigger",f),Me)){Fr=1,Cr=document.createElement("div"),Cr.style.height="100vh",Cr.style.position="absolute",vi(),ls(),Fe.register(K),f.isTouch=Fe.isTouch,$t=Fe.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),to=Fe.isTouch===1,Ze(be,"wheel",wr),lo=[be,Ae,_t,Me],K.matchMedia?(f.matchMedia=function(T){var I=K.matchMedia(),_;for(_ in T)I.add(_,T[_]);return I},K.addEventListener("matchMediaInit",function(){return mo()}),K.addEventListener("matchMediaRevert",function(){return wi()}),K.addEventListener("matchMedia",function(){ur(0,1),yr("matchMedia")}),K.matchMedia().add("(orientation: portrait)",function(){return jn(),jn})):console.warn("Requires GSAP 3.11.0 or later"),jn(),Ze(Ae,"scroll",wr);var t=Me.hasAttribute("style"),r=Me.style,o=r.borderTopStyle,l=K.core.Animation.prototype,u,x;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",u=jt(Me),Ve.m=Math.round(u.top+Ve.sc())||0,gt.m=Math.round(u.left+gt.sc())||0,o?r.borderTopStyle=o:r.removeProperty("border-top-style"),t||(Me.setAttribute("style",""),Me.removeAttribute("style")),ln=setInterval(Ro,250),K.delayedCall(.5,function(){return cn=0}),Ze(Ae,"touchcancel",Ft),Ze(Me,"touchstart",Ft),fn(Ze,Ae,"pointerdown,touchstart,mousedown",Co),fn(Ze,Ae,"pointerup,touchend,mouseup",Eo),eo=K.utils.checkPrefix("transform"),Mn.push(eo),vr=st(),kn=K.delayedCall(.2,ur).pause(),Tr=[Ae,"visibilitychange",function(){var T=be.innerWidth,I=be.innerHeight;Ae.hidden?(To=T,So=I):(To!==T||So!==I)&&Gr()},Ae,"DOMContentLoaded",ur,be,"load",ur,be,"resize",Gr],un(Ze),me.forEach(function(T){return T.enable(0,1)}),x=0;x<xe.length;x+=3)dn(qe,xe[x],xe[x+1]),dn(qe,xe[x],xe[x+2])}},f.config=function(t){"limitCallbacks"in t&&(Un=!!t.limitCallbacks);var r=t.syncInterval;r&&clearInterval(ln)||(ln=r)&&setInterval(Ro,r),"ignoreMobileResize"in t&&(to=f.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(un(qe)||un(Ze,t.autoRefreshEvents||"none"),ci=(t.autoRefreshEvents+"").indexOf("resize")===-1)},f.scrollerProxy=function(t,r){var o=mt(t),l=xe.indexOf(o),u=gr(o);~l&&xe.splice(l,u?6:2),r&&(u?Ht.unshift(be,r,Me,r,_t,r):Ht.unshift(o,r))},f.clearMatchMedia=function(t){me.forEach(function(r){return r._ctx&&r._ctx.query===t&&r._ctx.kill(!0,!0)})},f.isInViewport=function(t,r,o){var l=(wt(t)?mt(t):t).getBoundingClientRect(),u=l[o?fr:dr]*r||0;return o?l.right-u>0&&l.left+u<be.innerWidth:l.bottom-u>0&&l.top+u<be.innerHeight},f.positionInViewport=function(t,r,o){wt(t)&&(t=mt(t));var l=t.getBoundingClientRect(),u=l[o?fr:dr],x=r==null?u/2:r in Dn?Dn[r]*u:~r.indexOf("%")?parseFloat(r)*u/100:parseFloat(r)||0;return o?(l.left+x)/be.innerWidth:(l.top+x)/be.innerHeight},f.killAll=function(t){if(me.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),t!==!0){var r=mr.killAll||[];mr={},r.forEach(function(o){return o()})}},f}();pe.version="3.12.7";pe.saveStyles=function(f){return f?en(f).forEach(function(e){if(e&&e.style){var n=xt.indexOf(e);n>=0&&xt.splice(n,5),xt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),K.core.getCache(e),ro())}}):xt};pe.revert=function(f,e){return mo(!f,e)};pe.create=function(f,e){return new pe(f,e)};pe.refresh=function(f){return f?Gr(!0):(vr||pe.register())&&ur(!0)};pe.update=function(f){return++xe.cache&&Xt(f===!0?2:0)};pe.clearScrollMemory=_i;pe.maxScroll=function(f,e){return Bt(f,e?gt:Ve)};pe.getScrollFunc=function(f,e){return tr(mt(f),e?gt:Ve)};pe.getById=function(f){return oo[f]};pe.getAll=function(){return me.filter(function(f){return f.vars.id!=="ScrollSmoother"})};pe.isScrolling=function(){return!!Ct};pe.snapDirectional=go;pe.addEventListener=function(f,e){var n=mr[f]||(mr[f]=[]);~n.indexOf(e)||n.push(e)};pe.removeEventListener=function(f,e){var n=mr[f],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};pe.batch=function(f,e){var n=[],t={},r=e.interval||.016,o=e.batchMax||1e9,l=function(T,I){var _=[],S=[],b=K.delayedCall(r,function(){I(_,S),_=[],S=[]}).pause();return function(L){_.length||b.restart(!0),_.push(L.trigger),S.push(L),o<=_.length&&b.progress(1)}},u;for(u in e)t[u]=u.substr(0,2)==="on"&&at(e[u])&&u!=="onRefreshInit"?l(u,e[u]):e[u];return at(o)&&(o=o(),Ze(pe,"refresh",function(){return o=e.batchMax()})),en(f).forEach(function(x){var T={};for(u in t)T[u]=t[u];T.trigger=x,n.push(pe.create(T))}),n};var zo=function(e,n,t,r){return n>r?e(r):n<0&&e(0),t>r?(r-n)/(t-n):t<0?n/(n-t):1},Xn=function f(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(Fe.isTouch?" pinch-zoom":""):"none",e===_t&&f(Me,n)},yn={auto:1,scroll:1},ws=function(e){var n=e.event,t=e.target,r=e.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,l=o._gsap||K.core.getCache(o),u=st(),x;if(!l._isScrollT||u-l._isScrollT>2e3){for(;o&&o!==Me&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(yn[(x=Mt(o)).overflowY]||yn[x.overflowX]));)o=o.parentNode;l._isScroll=o&&o!==t&&!gr(o)&&(yn[(x=Mt(o)).overflowY]||yn[x.overflowX]),l._isScrollT=u}(l._isScroll||r==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},Si=function(e,n,t,r){return Fe.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:r=r&&ws,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return t&&Ze(Ae,Fe.eventTypes[0],Bo,!1,!0)},onDisable:function(){return qe(Ae,Fe.eventTypes[0],Bo,!0)}})},_s=/(input|label|select|textarea)/i,Fo,Bo=function(e){var n=_s.test(e.target.tagName);(n||Fo)&&(e._gsapAllow=!0,Fo=n)},vs=function(e){lr(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,r=n.momentum,o=n.allowNestedScroll,l=n.onRelease,u,x,T=mt(e.target)||_t,I=K.core.globals().ScrollSmoother,_=I&&I.get(),S=$t&&(e.content&&mt(e.content)||_&&e.content!==!1&&!_.smooth()&&_.content()),b=tr(T,Ve),L=tr(T,gt),C=1,m=(Fe.isTouch&&be.visualViewport?be.visualViewport.scale*be.visualViewport.width:be.outerWidth)/be.innerWidth,G=0,q=at(r)?function(){return r(u)}:function(){return r||2.8},B,k,Y=Si(T,e.type,!0,o),j=function(){return k=!1},z=Ft,U=Ft,V=function(){x=Bt(T,Ve),U=Vr($t?1:0,x),t&&(z=Vr(0,Bt(T,gt))),B=pr},O=function(){S._gsap.y=Br(parseFloat(S._gsap.y)+b.offset)+"px",S.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(S._gsap.y)+", 0, 1)",b.offset=b.cacheID=0},te=function(){if(k){requestAnimationFrame(j);var M=Br(u.deltaY/2),oe=U(b.v-M);if(S&&oe!==b.v+b.offset){b.offset=oe-b.v;var p=Br((parseFloat(S&&S._gsap.y)||0)-b.offset);S.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+p+", 0, 1)",S._gsap.y=p+"px",b.cacheID=xe.cache,Xt()}return!0}b.offset&&O(),k=!0},D,ee,J,Q,X=function(){V(),D.isActive()&&D.vars.scrollY>x&&(b()>x?D.progress(1)&&b(x):D.resetTo("scrollY",x))};return S&&K.set(S,{y:"+=0"}),e.ignoreCheck=function(H){return $t&&H.type==="touchmove"&&te()||C>1.05&&H.type!=="touchstart"||u.isGesturing||H.touches&&H.touches.length>1},e.onPress=function(){k=!1;var H=C;C=Br((be.visualViewport&&be.visualViewport.scale||1)/m),D.pause(),H!==C&&Xn(T,C>1.01?!0:t?!1:"x"),ee=L(),J=b(),V(),B=pr},e.onRelease=e.onGestureStart=function(H,M){if(b.offset&&O(),!M)Q.restart(!0);else{xe.cache++;var oe=q(),p,se;t&&(p=L(),se=p+oe*.05*-H.velocityX/.227,oe*=zo(L,p,se,Bt(T,gt)),D.vars.scrollX=z(se)),p=b(),se=p+oe*.05*-H.velocityY/.227,oe*=zo(b,p,se,Bt(T,Ve)),D.vars.scrollY=U(se),D.invalidate().duration(oe).play(.01),($t&&D.vars.scrollY>=x||p>=x-1)&&K.to({},{onUpdate:X,duration:oe})}l&&l(H)},e.onWheel=function(){D._ts&&D.pause(),st()-G>1e3&&(B=0,G=st())},e.onChange=function(H,M,oe,p,se){if(pr!==B&&V(),M&&t&&L(z(p[2]===M?ee+(H.startX-H.x):L()+M-p[1])),oe){b.offset&&O();var Ce=se[2]===oe,Qe=Ce?J+H.startY-H.y:b()+oe-se[1],g=U(Qe);Ce&&Qe!==g&&(J+=g-Qe),b(g)}(oe||M)&&Xt()},e.onEnable=function(){Xn(T,t?!1:"x"),pe.addEventListener("refresh",X),Ze(be,"resize",X),b.smooth&&(b.target.style.scrollBehavior="auto",b.smooth=L.smooth=!1),Y.enable()},e.onDisable=function(){Xn(T,!0),qe(be,"resize",X),pe.removeEventListener("refresh",X),Y.kill()},e.lockAxis=e.lockAxis!==!1,u=new Fe(e),u.iOS=$t,$t&&!b()&&b(1),$t&&K.ticker.add(Ft),Q=u._dc,D=K.to(u,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Ti(b,b(),function(){return D.pause()})},onUpdate:Xt,onComplete:Q.vars.onComplete}),u};pe.sort=function(f){if(at(f))return me.sort(f);var e=be.pageYOffset||0;return pe.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+be.innerHeight}),me.sort(f||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};pe.observe=function(f){return new Fe(f)};pe.normalizeScroll=function(f){if(typeof f>"u")return ft;if(f===!0&&ft)return ft.enable();if(f===!1){ft&&ft.kill(),ft=f;return}var e=f instanceof Fe?f:vs(f);return ft&&ft.target===e.target&&ft.kill(),gr(e.target)&&(ft=e),e};pe.core={_getVelocityProp:Jn,_inputObserver:Si,_scrollers:xe,_proxies:Ht,bridge:{ss:function(){Ct||yr("scrollStart"),Ct=st()},ref:function(){return it}}};pi()&&K.registerPlugin(pe);var Kr=function(){var f=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(I){I.preventDefault(),t(++f%e.children.length)},!1);function n(I){return e.appendChild(I.dom),I}function t(I){for(var _=0;_<e.children.length;_++)e.children[_].style.display=_===I?"block":"none";f=I}var r=(performance||Date).now(),o=r,l=0,u=n(new Kr.Panel("FPS","#0ff","#002")),x=n(new Kr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var T=n(new Kr.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){l++;var I=(performance||Date).now();if(x.update(I-r,200),I>=o+1e3&&(u.update(l*1e3/(I-o),100),o=I,l=0,T)){var _=performance.memory;T.update(_.usedJSHeapSize/1048576,_.jsHeapSizeLimit/1048576)}return I},update:function(){r=this.end()},domElement:e,setMode:t}};Kr.Panel=function(f,e,n){var t=1/0,r=0,o=Math.round,l=o(window.devicePixelRatio||1),u=80*l,x=48*l,T=3*l,I=2*l,_=3*l,S=15*l,b=74*l,L=30*l,C=document.createElement("canvas");C.width=u,C.height=x,C.style.cssText="width:80px;height:48px";var m=C.getContext("2d");return m.font="bold "+9*l+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,u,x),m.fillStyle=e,m.fillText(f,T,I),m.fillRect(_,S,b,L),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(_,S,b,L),{dom:C,update:function(G,q){t=Math.min(t,G),r=Math.max(r,G),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,u,S),m.fillStyle=e,m.fillText(o(G)+" "+f+" ("+o(t)+"-"+o(r)+")",T,I),m.drawImage(C,_+l,S,b-l,L,_,S,b-l,L),m.fillRect(_+b-l,S,l,L),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(_+b-l,S,l,o((1-G/q)*L))}}};class Pi extends Bi{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const r=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(r,n)}this.type="TextGeometry"}}const Ts=Wi;class On extends Xo{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,r){const o=this,l=new qo(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{n(o.parse(u))}catch(x){r?r(x):console.error(x),o.manager.itemError(e)}},t,r)}parse(e){const n=this;function t(g,c){if(g.nodeType!==1)return;const s=k(g);let i=!1,w=null;switch(g.nodeName){case"svg":c=L(g,c);break;case"style":o(g);break;case"g":c=L(g,c);break;case"path":c=L(g,c),g.hasAttribute("d")&&(w=r(g));break;case"rect":c=L(g,c),w=x(g);break;case"polygon":c=L(g,c),w=T(g);break;case"polyline":c=L(g,c),w=I(g);break;case"circle":c=L(g,c),w=_(g);break;case"ellipse":c=L(g,c),w=S(g);break;case"line":c=L(g,c),w=b(g);break;case"defs":i=!0;break;case"use":c=L(g,c);const E=(g.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),F=g.viewportElement.getElementById(E);F?t(F,c):console.warn("SVGLoader: 'use node' references non-existent node id: "+E);break}w&&(c.fill!==void 0&&c.fill!=="none"&&w.color.setStyle(c.fill,Ts),j(w,se),D.push(w),w.userData={node:g,style:c});const R=g.childNodes;for(let y=0;y<R.length;y++){const E=R[y];i&&E.nodeName!=="style"&&E.nodeName!=="defs"||t(E,c)}s&&(J.pop(),J.length>0?se.copy(J[J.length-1]):se.identity())}function r(g){const c=new Qt,s=new de,i=new de,w=new de;let R=!0,y=!1;const E=g.getAttribute("d");if(E===""||E==="none")return null;const F=E.match(/[a-df-z][^a-df-z]*/ig);for(let A=0,v=F.length;A<v;A++){const P=F[A],N=P.charAt(0),d=P.slice(1).trim();R===!0&&(y=!0,R=!1);let h;switch(N){case"M":h=m(d);for(let a=0,W=h.length;a<W;a+=2)s.x=h[a+0],s.y=h[a+1],i.x=s.x,i.y=s.y,a===0?c.moveTo(s.x,s.y):c.lineTo(s.x,s.y),a===0&&w.copy(s);break;case"H":h=m(d);for(let a=0,W=h.length;a<W;a++)s.x=h[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&y===!0&&w.copy(s);break;case"V":h=m(d);for(let a=0,W=h.length;a<W;a++)s.y=h[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&y===!0&&w.copy(s);break;case"L":h=m(d);for(let a=0,W=h.length;a<W;a+=2)s.x=h[a+0],s.y=h[a+1],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&y===!0&&w.copy(s);break;case"C":h=m(d);for(let a=0,W=h.length;a<W;a+=6)c.bezierCurveTo(h[a+0],h[a+1],h[a+2],h[a+3],h[a+4],h[a+5]),i.x=h[a+2],i.y=h[a+3],s.x=h[a+4],s.y=h[a+5],a===0&&y===!0&&w.copy(s);break;case"S":h=m(d);for(let a=0,W=h.length;a<W;a+=4)c.bezierCurveTo(C(s.x,i.x),C(s.y,i.y),h[a+0],h[a+1],h[a+2],h[a+3]),i.x=h[a+0],i.y=h[a+1],s.x=h[a+2],s.y=h[a+3],a===0&&y===!0&&w.copy(s);break;case"Q":h=m(d);for(let a=0,W=h.length;a<W;a+=4)c.quadraticCurveTo(h[a+0],h[a+1],h[a+2],h[a+3]),i.x=h[a+0],i.y=h[a+1],s.x=h[a+2],s.y=h[a+3],a===0&&y===!0&&w.copy(s);break;case"T":h=m(d);for(let a=0,W=h.length;a<W;a+=2){const $=C(s.x,i.x),ve=C(s.y,i.y);c.quadraticCurveTo($,ve,h[a+0],h[a+1]),i.x=$,i.y=ve,s.x=h[a+0],s.y=h[a+1],a===0&&y===!0&&w.copy(s)}break;case"A":h=m(d,[3,4],7);for(let a=0,W=h.length;a<W;a+=7){if(h[a+5]==s.x&&h[a+6]==s.y)continue;const $=s.clone();s.x=h[a+5],s.y=h[a+6],i.x=s.x,i.y=s.y,l(c,h[a],h[a+1],h[a+2],h[a+3],h[a+4],$,s),a===0&&y===!0&&w.copy(s)}break;case"m":h=m(d);for(let a=0,W=h.length;a<W;a+=2)s.x+=h[a+0],s.y+=h[a+1],i.x=s.x,i.y=s.y,a===0?c.moveTo(s.x,s.y):c.lineTo(s.x,s.y),a===0&&w.copy(s);break;case"h":h=m(d);for(let a=0,W=h.length;a<W;a++)s.x+=h[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&y===!0&&w.copy(s);break;case"v":h=m(d);for(let a=0,W=h.length;a<W;a++)s.y+=h[a],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&y===!0&&w.copy(s);break;case"l":h=m(d);for(let a=0,W=h.length;a<W;a+=2)s.x+=h[a+0],s.y+=h[a+1],i.x=s.x,i.y=s.y,c.lineTo(s.x,s.y),a===0&&y===!0&&w.copy(s);break;case"c":h=m(d);for(let a=0,W=h.length;a<W;a+=6)c.bezierCurveTo(s.x+h[a+0],s.y+h[a+1],s.x+h[a+2],s.y+h[a+3],s.x+h[a+4],s.y+h[a+5]),i.x=s.x+h[a+2],i.y=s.y+h[a+3],s.x+=h[a+4],s.y+=h[a+5],a===0&&y===!0&&w.copy(s);break;case"s":h=m(d);for(let a=0,W=h.length;a<W;a+=4)c.bezierCurveTo(C(s.x,i.x),C(s.y,i.y),s.x+h[a+0],s.y+h[a+1],s.x+h[a+2],s.y+h[a+3]),i.x=s.x+h[a+0],i.y=s.y+h[a+1],s.x+=h[a+2],s.y+=h[a+3],a===0&&y===!0&&w.copy(s);break;case"q":h=m(d);for(let a=0,W=h.length;a<W;a+=4)c.quadraticCurveTo(s.x+h[a+0],s.y+h[a+1],s.x+h[a+2],s.y+h[a+3]),i.x=s.x+h[a+0],i.y=s.y+h[a+1],s.x+=h[a+2],s.y+=h[a+3],a===0&&y===!0&&w.copy(s);break;case"t":h=m(d);for(let a=0,W=h.length;a<W;a+=2){const $=C(s.x,i.x),ve=C(s.y,i.y);c.quadraticCurveTo($,ve,s.x+h[a+0],s.y+h[a+1]),i.x=$,i.y=ve,s.x=s.x+h[a+0],s.y=s.y+h[a+1],a===0&&y===!0&&w.copy(s)}break;case"a":h=m(d,[3,4],7);for(let a=0,W=h.length;a<W;a+=7){if(h[a+5]==0&&h[a+6]==0)continue;const $=s.clone();s.x+=h[a+5],s.y+=h[a+6],i.x=s.x,i.y=s.y,l(c,h[a],h[a+1],h[a+2],h[a+3],h[a+4],$,s),a===0&&y===!0&&w.copy(s)}break;case"Z":case"z":c.currentPath.autoClose=!0,c.currentPath.curves.length>0&&(s.copy(w),c.currentPath.currentPoint.copy(s),R=!0);break;default:console.warn(P)}y=!1}return c}function o(g){if(!(!g.sheet||!g.sheet.cssRules||!g.sheet.cssRules.length))for(let c=0;c<g.sheet.cssRules.length;c++){const s=g.sheet.cssRules[c];if(s.type!==1)continue;const i=s.selectorText.split(/,/gm).filter(Boolean).map(w=>w.trim());for(let w=0;w<i.length;w++){const R=Object.fromEntries(Object.entries(s.style).filter(([,y])=>y!==""));ee[i[w]]=Object.assign(ee[i[w]]||{},R)}}}function l(g,c,s,i,w,R,y,E){if(c==0||s==0){g.lineTo(E.x,E.y);return}i=i*Math.PI/180,c=Math.abs(c),s=Math.abs(s);const F=(y.x-E.x)/2,A=(y.y-E.y)/2,v=Math.cos(i)*F+Math.sin(i)*A,P=-Math.sin(i)*F+Math.cos(i)*A;let N=c*c,d=s*s;const h=v*v,a=P*P,W=h/N+a/d;if(W>1){const we=Math.sqrt(W);c=we*c,s=we*s,N=c*c,d=s*s}const $=N*a+d*h,ve=(N*d-$)/$;let ge=Math.sqrt(Math.max(0,ve));w===R&&(ge=-ge);const ye=ge*c*P/s,Te=-ge*s*v/c,ae=Math.cos(i)*ye-Math.sin(i)*Te+(y.x+E.x)/2,fe=Math.sin(i)*ye+Math.cos(i)*Te+(y.y+E.y)/2,Se=u(1,0,(v-ye)/c,(P-Te)/s),re=u((v-ye)/c,(P-Te)/s,(-v-ye)/c,(-P-Te)/s)%(Math.PI*2);g.currentPath.absellipse(ae,fe,c,s,Se,Se+re,R===0,i)}function u(g,c,s,i){const w=g*s+c*i,R=Math.sqrt(g*g+c*c)*Math.sqrt(s*s+i*i);let y=Math.acos(Math.max(-1,Math.min(1,w/R)));return g*i-c*s<0&&(y=-y),y}function x(g){const c=B(g.getAttribute("x")||0),s=B(g.getAttribute("y")||0),i=B(g.getAttribute("rx")||g.getAttribute("ry")||0),w=B(g.getAttribute("ry")||g.getAttribute("rx")||0),R=B(g.getAttribute("width")),y=B(g.getAttribute("height")),E=1-.551915024494,F=new Qt;return F.moveTo(c+i,s),F.lineTo(c+R-i,s),(i!==0||w!==0)&&F.bezierCurveTo(c+R-i*E,s,c+R,s+w*E,c+R,s+w),F.lineTo(c+R,s+y-w),(i!==0||w!==0)&&F.bezierCurveTo(c+R,s+y-w*E,c+R-i*E,s+y,c+R-i,s+y),F.lineTo(c+i,s+y),(i!==0||w!==0)&&F.bezierCurveTo(c+i*E,s+y,c,s+y-w*E,c,s+y-w),F.lineTo(c,s+w),(i!==0||w!==0)&&F.bezierCurveTo(c,s+w*E,c+i*E,s,c+i,s),F}function T(g){function c(R,y,E){const F=B(y),A=B(E);w===0?i.moveTo(F,A):i.lineTo(F,A),w++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new Qt;let w=0;return g.getAttribute("points").replace(s,c),i.currentPath.autoClose=!0,i}function I(g){function c(R,y,E){const F=B(y),A=B(E);w===0?i.moveTo(F,A):i.lineTo(F,A),w++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new Qt;let w=0;return g.getAttribute("points").replace(s,c),i.currentPath.autoClose=!1,i}function _(g){const c=B(g.getAttribute("cx")||0),s=B(g.getAttribute("cy")||0),i=B(g.getAttribute("r")||0),w=new Bn;w.absarc(c,s,i,0,Math.PI*2);const R=new Qt;return R.subPaths.push(w),R}function S(g){const c=B(g.getAttribute("cx")||0),s=B(g.getAttribute("cy")||0),i=B(g.getAttribute("rx")||0),w=B(g.getAttribute("ry")||0),R=new Bn;R.absellipse(c,s,i,w,0,Math.PI*2);const y=new Qt;return y.subPaths.push(R),y}function b(g){const c=B(g.getAttribute("x1")||0),s=B(g.getAttribute("y1")||0),i=B(g.getAttribute("x2")||0),w=B(g.getAttribute("y2")||0),R=new Qt;return R.moveTo(c,s),R.lineTo(i,w),R.currentPath.autoClose=!1,R}function L(g,c){c=Object.assign({},c);let s={};if(g.hasAttribute("class")){const y=g.getAttribute("class").split(/\s/).filter(Boolean).map(E=>E.trim());for(let E=0;E<y.length;E++)s=Object.assign(s,ee["."+y[E]])}g.hasAttribute("id")&&(s=Object.assign(s,ee["#"+g.getAttribute("id")]));function i(y,E,F){F===void 0&&(F=function(v){return v.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),v}),g.hasAttribute(y)&&(c[E]=F(g.getAttribute(y))),s[y]&&(c[E]=F(s[y])),g.style&&g.style[y]!==""&&(c[E]=F(g.style[y]))}function w(y){return Math.max(0,Math.min(1,B(y)))}function R(y){return Math.max(0,B(y))}return i("fill","fill"),i("fill-opacity","fillOpacity",w),i("fill-rule","fillRule"),i("opacity","opacity",w),i("stroke","stroke"),i("stroke-opacity","strokeOpacity",w),i("stroke-width","strokeWidth",R),i("stroke-linejoin","strokeLineJoin"),i("stroke-linecap","strokeLineCap"),i("stroke-miterlimit","strokeMiterLimit",R),i("visibility","visibility"),c}function C(g,c){return g-(c-g)}function m(g,c,s){if(typeof g!="string")throw new TypeError("Invalid input: "+typeof g);const i={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},w=0,R=1,y=2,E=3;let F=w,A=!0,v="",P="";const N=[];function d($,ve,ge){const ye=new SyntaxError('Unexpected character "'+$+'" at index '+ve+".");throw ye.partial=ge,ye}function h(){v!==""&&(P===""?N.push(Number(v)):N.push(Number(v)*Math.pow(10,Number(P)))),v="",P=""}let a;const W=g.length;for(let $=0;$<W;$++){if(a=g[$],Array.isArray(c)&&c.includes(N.length%s)&&i.FLAGS.test(a)){F=R,v=a,h();continue}if(F===w){if(i.WHITESPACE.test(a))continue;if(i.DIGIT.test(a)||i.SIGN.test(a)){F=R,v=a;continue}if(i.POINT.test(a)){F=y,v=a;continue}i.COMMA.test(a)&&(A&&d(a,$,N),A=!0)}if(F===R){if(i.DIGIT.test(a)){v+=a;continue}if(i.POINT.test(a)){v+=a,F=y;continue}if(i.EXP.test(a)){F=E;continue}i.SIGN.test(a)&&v.length===1&&i.SIGN.test(v[0])&&d(a,$,N)}if(F===y){if(i.DIGIT.test(a)){v+=a;continue}if(i.EXP.test(a)){F=E;continue}i.POINT.test(a)&&v[v.length-1]==="."&&d(a,$,N)}if(F===E){if(i.DIGIT.test(a)){P+=a;continue}if(i.SIGN.test(a)){if(P===""){P+=a;continue}P.length===1&&i.SIGN.test(P)&&d(a,$,N)}}i.WHITESPACE.test(a)?(h(),F=w,A=!1):i.COMMA.test(a)?(h(),F=w,A=!0):i.SIGN.test(a)?(h(),F=R,v=a):i.POINT.test(a)?(h(),F=y,v=a):d(a,$,N)}return h(),N}const G=["mm","cm","in","pt","pc","px"],q={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function B(g){let c="px";if(typeof g=="string"||g instanceof String)for(let i=0,w=G.length;i<w;i++){const R=G[i];if(g.endsWith(R)){c=R,g=g.substring(0,g.length-R.length);break}}let s;return c==="px"&&n.defaultUnit!=="px"?s=q.in[n.defaultUnit]/n.defaultDPI:(s=q[c][n.defaultUnit],s<0&&(s=q[c].in*n.defaultDPI)),s*parseFloat(g)}function k(g){if(!(g.hasAttribute("transform")||g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))))return null;const c=Y(g);return J.length>0&&c.premultiply(J[J.length-1]),se.copy(c),J.push(c),c}function Y(g){const c=new br,s=Q;if(g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))){const i=B(g.getAttribute("x")),w=B(g.getAttribute("y"));c.translate(i,w)}if(g.hasAttribute("transform")){const i=g.getAttribute("transform").split(")");for(let w=i.length-1;w>=0;w--){const R=i[w].trim();if(R==="")continue;const y=R.indexOf("("),E=R.length;if(y>0&&y<E){const F=R.slice(0,y),A=m(R.slice(y+1));switch(s.identity(),F){case"translate":if(A.length>=1){const v=A[0];let P=0;A.length>=2&&(P=A[1]),s.translate(v,P)}break;case"rotate":if(A.length>=1){let v=0,P=0,N=0;v=A[0]*Math.PI/180,A.length>=3&&(P=A[1],N=A[2]),X.makeTranslation(-P,-N),H.makeRotation(v),M.multiplyMatrices(H,X),X.makeTranslation(P,N),s.multiplyMatrices(X,M)}break;case"scale":if(A.length>=1){const v=A[0];let P=v;A.length>=2&&(P=A[1]),s.scale(v,P)}break;case"skewX":A.length===1&&s.set(1,Math.tan(A[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":A.length===1&&s.set(1,0,0,Math.tan(A[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":A.length===6&&s.set(A[0],A[2],A[4],A[1],A[3],A[5],0,0,1);break}}c.premultiply(s)}}return c}function j(g,c){function s(y){p.set(y.x,y.y,1).applyMatrix3(c),y.set(p.x,p.y)}function i(y){const E=y.xRadius,F=y.yRadius,A=Math.cos(y.aRotation),v=Math.sin(y.aRotation),P=new et(E*A,E*v,0),N=new et(-F*v,F*A,0),d=P.applyMatrix3(c),h=N.applyMatrix3(c),a=Q.set(d.x,h.x,0,d.y,h.y,0,0,0,1),W=X.copy(a).invert(),ge=H.copy(W).transpose().multiply(W).elements,ye=te(ge[0],ge[1],ge[4]),Te=Math.sqrt(ye.rt1),ae=Math.sqrt(ye.rt2);if(y.xRadius=1/Te,y.yRadius=1/ae,y.aRotation=Math.atan2(ye.sn,ye.cs),!((y.aEndAngle-y.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const Se=X.set(Te,0,0,0,ae,0,0,0,1),re=H.set(ye.cs,ye.sn,0,-ye.sn,ye.cs,0,0,0,1),we=Se.multiply(re).multiply(a),ke=Re=>{const{x:qt,y:De}=new et(Math.cos(Re),Math.sin(Re),0).applyMatrix3(we);return Math.atan2(De,qt)};y.aStartAngle=ke(y.aStartAngle),y.aEndAngle=ke(y.aEndAngle),z(c)&&(y.aClockwise=!y.aClockwise)}}function w(y){const E=V(c),F=O(c);y.xRadius*=E,y.yRadius*=F;const A=E>Number.EPSILON?Math.atan2(c.elements[1],c.elements[0]):Math.atan2(-c.elements[3],c.elements[4]);y.aRotation+=A,z(c)&&(y.aStartAngle*=-1,y.aEndAngle*=-1,y.aClockwise=!y.aClockwise)}const R=g.subPaths;for(let y=0,E=R.length;y<E;y++){const A=R[y].curves;for(let v=0;v<A.length;v++){const P=A[v];P.isLineCurve?(s(P.v1),s(P.v2)):P.isCubicBezierCurve?(s(P.v0),s(P.v1),s(P.v2),s(P.v3)):P.isQuadraticBezierCurve?(s(P.v0),s(P.v1),s(P.v2)):P.isEllipseCurve&&(oe.set(P.aX,P.aY),s(oe),P.aX=oe.x,P.aY=oe.y,U(c)?i(P):w(P))}}}function z(g){const c=g.elements;return c[0]*c[4]-c[1]*c[3]<0}function U(g){const c=g.elements,s=c[0]*c[3]+c[1]*c[4];if(s===0)return!1;const i=V(g),w=O(g);return Math.abs(s/(i*w))>Number.EPSILON}function V(g){const c=g.elements;return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function O(g){const c=g.elements;return Math.sqrt(c[3]*c[3]+c[4]*c[4])}function te(g,c,s){let i,w,R,y,E;const F=g+s,A=g-s,v=Math.sqrt(A*A+4*c*c);return F>0?(i=.5*(F+v),E=1/i,w=g*E*s-c*E*c):F<0?w=.5*(F-v):(i=.5*v,w=-.5*v),A>0?R=A+v:R=A-v,Math.abs(R)>2*Math.abs(c)?(E=-2*c/R,y=1/Math.sqrt(1+E*E),R=E*y):Math.abs(c)===0?(R=1,y=0):(E=-.5*R/c,R=1/Math.sqrt(1+E*E),y=E*R),A>0&&(E=R,R=-y,y=E),{rt1:i,rt2:w,cs:R,sn:y}}const D=[],ee={},J=[],Q=new br,X=new br,H=new br,M=new br,oe=new de,p=new et,se=new br,Ce=new DOMParser().parseFromString(e,"image/svg+xml");return t(Ce.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:D,xml:Ce.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:t.ORIGIN,t:0};function o(C,m,G,q){const B=C.x,k=m.x,Y=G.x,j=q.x,z=C.y,U=m.y,V=G.y,O=q.y,te=(j-Y)*(z-V)-(O-V)*(B-Y),D=(k-B)*(z-V)-(U-z)*(B-Y),ee=(O-V)*(k-B)-(j-Y)*(U-z),J=te/ee,Q=D/ee;if(ee===0&&te!==0||J<=0||J>=1||Q<0||Q>1)return null;if(te===0&&ee===0){for(let X=0;X<2;X++)if(l(X===0?G:q,C,m),r.loc==t.ORIGIN){const H=X===0?G:q;return{x:H.x,y:H.y,t:r.t}}else if(r.loc==t.BETWEEN){const H=+(B+r.t*(k-B)).toPrecision(10),M=+(z+r.t*(U-z)).toPrecision(10);return{x:H,y:M,t:r.t}}return null}else{for(let M=0;M<2;M++)if(l(M===0?G:q,C,m),r.loc==t.ORIGIN){const oe=M===0?G:q;return{x:oe.x,y:oe.y,t:r.t}}const X=+(B+J*(k-B)).toPrecision(10),H=+(z+J*(U-z)).toPrecision(10);return{x:X,y:H,t:J}}}function l(C,m,G){const q=G.x-m.x,B=G.y-m.y,k=C.x-m.x,Y=C.y-m.y,j=q*Y-k*B;if(C.x===m.x&&C.y===m.y){r.loc=t.ORIGIN,r.t=0;return}if(C.x===G.x&&C.y===G.y){r.loc=t.DESTINATION,r.t=1;return}if(j<-Number.EPSILON){r.loc=t.LEFT;return}if(j>Number.EPSILON){r.loc=t.RIGHT;return}if(q*k<0||B*Y<0){r.loc=t.BEHIND;return}if(Math.sqrt(q*q+B*B)<Math.sqrt(k*k+Y*Y)){r.loc=t.BEYOND;return}let z;q!==0?z=k/q:z=Y/B,r.loc=t.BETWEEN,r.t=z}function u(C,m){const G=[],q=[];for(let B=1;B<C.length;B++){const k=C[B-1],Y=C[B];for(let j=1;j<m.length;j++){const z=m[j-1],U=m[j],V=o(k,Y,z,U);V!==null&&G.find(O=>O.t<=V.t+Number.EPSILON&&O.t>=V.t-Number.EPSILON)===void 0&&(G.push(V),q.push(new de(V.x,V.y)))}}return q}function x(C,m,G){const q=new de;m.getCenter(q);const B=[];return G.forEach(k=>{k.boundingBox.containsPoint(q)&&u(C,k.points).forEach(j=>{B.push({identifier:k.identifier,isCW:k.isCW,point:j})})}),B.sort((k,Y)=>k.point.x-Y.point.x),B}function T(C,m,G,q,B){(B==null||B==="")&&(B="nonzero");const k=new de;C.boundingBox.getCenter(k);const Y=[new de(G,k.y),new de(q,k.y)],j=x(Y,C.boundingBox,m);j.sort((D,ee)=>D.point.x-ee.point.x);const z=[],U=[];j.forEach(D=>{D.identifier===C.identifier?z.push(D):U.push(D)});const V=z[0].point.x,O=[];let te=0;for(;te<U.length&&U[te].point.x<V;)O.length>0&&O[O.length-1]===U[te].identifier?O.pop():O.push(U[te].identifier),te++;if(O.push(C.identifier),B==="evenodd"){const D=O.length%2===0,ee=O[O.length-2];return{identifier:C.identifier,isHole:D,for:ee}}else if(B==="nonzero"){let D=!0,ee=null,J=null;for(let Q=0;Q<O.length;Q++){const X=O[Q];D?(J=m[X].isCW,D=!1,ee=X):J!==m[X].isCW&&(J=m[X].isCW,D=!0)}return{identifier:C.identifier,isHole:D,for:ee}}else console.warn('fill-rule: "'+B+'" is currently not implemented.')}let I=999999999,_=-999999999,S=e.subPaths.map(C=>{const m=C.getPoints();let G=-999999999,q=999999999,B=-999999999,k=999999999;for(let Y=0;Y<m.length;Y++){const j=m[Y];j.y>G&&(G=j.y),j.y<q&&(q=j.y),j.x>B&&(B=j.x),j.x<k&&(k=j.x)}return _<=B&&(_=B+1),I>=k&&(I=k-1),{curves:C.curves,points:m,isCW:Gi.isClockWise(m),identifier:-1,boundingBox:new Hi(new de(k,q),new de(B,G))}});S=S.filter(C=>C.points.length>1);for(let C=0;C<S.length;C++)S[C].identifier=C;const b=S.map(C=>T(C,S,I,_,e.userData?e.userData.style.fillRule:void 0)),L=[];return S.forEach(C=>{if(!b[C.identifier].isHole){const G=new Ui;G.curves=C.curves,b.filter(B=>B.isHole&&B.for===C.identifier).forEach(B=>{const k=S[B.identifier],Y=new Bn;Y.curves=k.curves,G.holes.push(Y)}),L.push(G)}}),L}static getStrokeStyle(e,n,t,r,o){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",r=r!==void 0?r:"butt",o=o!==void 0?o:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:r,strokeMiterLimit:o}}static pointsToStroke(e,n,t,r){const o=[],l=[],u=[];if(On.pointsToStrokeWithBuffers(e,n,t,r,o,l,u)===0)return null;const x=new ao;return x.setAttribute("position",new Ur(o,3)),x.setAttribute("normal",new Ur(l,3)),x.setAttribute("uv",new Ur(u,2)),x}static pointsToStrokeWithBuffers(e,n,t,r,o,l,u,x){const T=new de,I=new de,_=new de,S=new de,b=new de,L=new de,C=new de,m=new de,G=new de,q=new de,B=new de,k=new de,Y=new de,j=new de,z=new de,U=new de,V=new de;t=t!==void 0?t:12,r=r!==void 0?r:.001,x=x!==void 0?x:0,e=A(e);const O=e.length;if(O<2)return 0;const te=e[0].equals(e[O-1]);let D,ee=e[0],J;const Q=n.strokeWidth/2,X=1/(O-1);let H=0,M,oe,p,se,Ce=!1,Qe=0,g=x*3,c=x*2;s(e[0],e[1],T).multiplyScalar(Q),m.copy(e[0]).sub(T),G.copy(e[0]).add(T),q.copy(m),B.copy(G);for(let v=1;v<O;v++){D=e[v],v===O-1?te?J=e[1]:J=void 0:J=e[v+1];const P=T;if(s(ee,D,P),_.copy(P).multiplyScalar(Q),k.copy(D).sub(_),Y.copy(D).add(_),M=H+X,oe=!1,J!==void 0){s(D,J,I),_.copy(I).multiplyScalar(Q),j.copy(D).sub(_),z.copy(D).add(_),p=!0,_.subVectors(J,ee),P.dot(_)<0&&(p=!1),v===1&&(Ce=p),_.subVectors(J,D),_.normalize();const N=Math.abs(P.dot(_));if(N>Number.EPSILON){const d=Q/N;_.multiplyScalar(-d),S.subVectors(D,ee),b.copy(S).setLength(d).add(_),U.copy(b).negate();const h=b.length(),a=S.length();S.divideScalar(a),L.subVectors(J,D);const W=L.length();switch(L.divideScalar(W),S.dot(U)<a&&L.dot(U)<W&&(oe=!0),V.copy(b).add(D),U.add(D),se=!1,oe?p?(z.copy(U),Y.copy(U)):(j.copy(U),k.copy(U)):R(),n.strokeLineJoin){case"bevel":y(p,oe,M);break;case"round":E(p,oe),p?w(D,k,j,M,0):w(D,z,Y,M,1);break;case"miter":case"miter-clip":default:const $=Q*n.strokeMiterLimit/h;if($<1)if(n.strokeLineJoin!=="miter-clip"){y(p,oe,M);break}else E(p,oe),p?(L.subVectors(V,k).multiplyScalar($).add(k),C.subVectors(V,j).multiplyScalar($).add(j),i(k,M,0),i(L,M,0),i(D,M,.5),i(D,M,.5),i(L,M,0),i(C,M,0),i(D,M,.5),i(C,M,0),i(j,M,0)):(L.subVectors(V,Y).multiplyScalar($).add(Y),C.subVectors(V,z).multiplyScalar($).add(z),i(Y,M,1),i(L,M,1),i(D,M,.5),i(D,M,.5),i(L,M,1),i(C,M,1),i(D,M,.5),i(C,M,1),i(z,M,1));else oe?(p?(i(G,H,1),i(m,H,0),i(V,M,0),i(G,H,1),i(V,M,0),i(U,M,1)):(i(G,H,1),i(m,H,0),i(V,M,1),i(m,H,0),i(U,M,0),i(V,M,1)),p?j.copy(V):z.copy(V)):p?(i(k,M,0),i(V,M,0),i(D,M,.5),i(D,M,.5),i(V,M,0),i(j,M,0)):(i(Y,M,1),i(V,M,1),i(D,M,.5),i(D,M,.5),i(V,M,1),i(z,M,1)),se=!0;break}}else R()}else R();!te&&v===O-1&&F(e[0],q,B,p,!0,H),H=M,ee=D,m.copy(j),G.copy(z)}if(!te)F(D,k,Y,p,!1,M);else if(oe&&o){let v=V,P=U;Ce!==p&&(v=U,P=V),p?(se||Ce)&&(P.toArray(o,0*3),P.toArray(o,3*3),se&&v.toArray(o,1*3)):(se||!Ce)&&(P.toArray(o,1*3),P.toArray(o,3*3),se&&v.toArray(o,0*3))}return Qe;function s(v,P,N){return N.subVectors(P,v),N.set(-N.y,N.x).normalize()}function i(v,P,N){o&&(o[g]=v.x,o[g+1]=v.y,o[g+2]=0,l&&(l[g]=0,l[g+1]=0,l[g+2]=1),g+=3,u&&(u[c]=P,u[c+1]=N,c+=2)),Qe+=3}function w(v,P,N,d,h){T.copy(P).sub(v).normalize(),I.copy(N).sub(v).normalize();let a=Math.PI;const W=T.dot(I);Math.abs(W)<1&&(a=Math.abs(Math.acos(W))),a/=t,_.copy(P);for(let $=0,ve=t-1;$<ve;$++)S.copy(_).rotateAround(v,a),i(_,d,h),i(S,d,h),i(v,d,.5),_.copy(S);i(S,d,h),i(N,d,h),i(v,d,.5)}function R(){i(G,H,1),i(m,H,0),i(k,M,0),i(G,H,1),i(k,M,0),i(Y,M,1)}function y(v,P,N){P?v?(i(G,H,1),i(m,H,0),i(k,M,0),i(G,H,1),i(k,M,0),i(U,M,1),i(k,N,0),i(j,N,0),i(U,N,.5)):(i(G,H,1),i(m,H,0),i(Y,M,1),i(m,H,0),i(U,M,0),i(Y,M,1),i(Y,N,1),i(U,N,0),i(z,N,1)):v?(i(k,N,0),i(j,N,0),i(D,N,.5)):(i(Y,N,1),i(z,N,0),i(D,N,.5))}function E(v,P){P&&(v?(i(G,H,1),i(m,H,0),i(k,M,0),i(G,H,1),i(k,M,0),i(U,M,1),i(k,H,0),i(D,M,.5),i(U,M,1),i(D,M,.5),i(j,H,0),i(U,M,1)):(i(G,H,1),i(m,H,0),i(Y,M,1),i(m,H,0),i(U,M,0),i(Y,M,1),i(Y,H,1),i(U,M,0),i(D,M,.5),i(D,M,.5),i(U,M,0),i(z,H,1)))}function F(v,P,N,d,h,a){switch(n.strokeLineCap){case"round":h?w(v,N,P,a,.5):w(v,P,N,a,.5);break;case"square":if(h)T.subVectors(P,v),I.set(T.y,-T.x),_.addVectors(T,I).add(v),S.subVectors(I,T).add(v),d?(_.toArray(o,1*3),S.toArray(o,0*3),S.toArray(o,3*3)):(_.toArray(o,1*3),u[3*2+1]===1?S.toArray(o,3*3):_.toArray(o,3*3),S.toArray(o,0*3));else{T.subVectors(N,v),I.set(T.y,-T.x),_.addVectors(T,I).add(v),S.subVectors(I,T).add(v);const W=o.length;d?(_.toArray(o,W-1*3),S.toArray(o,W-2*3),S.toArray(o,W-4*3)):(S.toArray(o,W-2*3),_.toArray(o,W-1*3),S.toArray(o,W-4*3))}break}}function A(v){let P=!1;for(let d=1,h=v.length-1;d<h;d++)if(v[d].distanceTo(v[d+1])<r){P=!0;break}if(!P)return v;const N=[];N.push(v[0]);for(let d=1,h=v.length-1;d<h;d++)v[d].distanceTo(v[d+1])>=r&&N.push(v[d]);return N.push(v[v.length-1]),N}}}function Ss(f,e,n,t){const{CUBE_SIZE:r,FIRST_CUBE_Z:o}=t,l=8,u=24,x=.075,T=200;let I,_=[],S=[],b=[],L=[];const C=(k,Y,j,z)=>{const U=new En(k,k,k),V=new _n(U),O=[new zt({color:16711680,transparent:!0,opacity:z.opacity,blending:St}),new zt({color:65280,transparent:!0,opacity:z.opacity,blending:St}),new zt({color:255,transparent:!0,opacity:z.opacity,blending:St}),new zt({color:65535,transparent:!0,opacity:z.opacity,blending:St}),new zt({color:16711935,transparent:!0,opacity:z.opacity,blending:St}),new zt({color:16776960,transparent:!0,opacity:z.opacity,blending:St})],te=new It,D=V.getAttribute("position").array,ee=[];for(let X=0;X<D.length/3;X+=2)ee.push(X,X+1);const J=Array(6).fill(null).map(()=>new ao),Q=Array(6).fill(null).map(()=>[]);for(let X=0;X<ee.length/2;X++){const H=X%6;Q[H].push(ee[X*2],ee[X*2+1])}return J.forEach((X,H)=>{X.setIndex(Q[H]),X.setAttribute("position",V.getAttribute("position"));const M=new sr(X,O[H]);te.add(M)}),te.position.z=Y,te.rotation.z=j,te};return(()=>{const j=.9/(u-1);for(let ee=0;ee<u;ee++)S[ee]=new zt({transparent:!0,opacity:1-ee*j});if(I=new It,!I){console.error("introGroup failed to initialize");return}for(let ee=0;ee<u;ee++){const J=r-ee*l,Q=C(J,0,0,S[ee]),X=Q.children.map(H=>H.material);L.push(X.map(H=>({material:H,originalColor:H.color.clone()}))),I.add(Q)}I.position.z=o,e.add(I),_.push(I),b=S.map(ee=>ee.opacity);const z=Ge.timeline({repeat:-1});z.to(I.rotation,{x:je.degToRad(360),duration:12,ease:"none"},0),z.to(I.rotation,{y:je.degToRad(360),duration:10,ease:"none"},0),z.to(I.rotation,{z:je.degToRad(360),duration:14,ease:"none"},0);let U=-1,V=0;const O=x*1e3,te=u*O,D=ee=>{const J=ee%te/O,Q=Math.floor(J)%u;U!==-1&&ee-V>=O&&(L[U].forEach(M=>{M.material.opacity=b[U],M.material.color.copy(M.originalColor)}),U=-1),U===-1&&Q!==U&&(U=Q,V=ee,L[U].forEach(H=>{H.material.opacity=1,H.material.color.set(1,1,1)})),requestAnimationFrame(D)};requestAnimationFrame(D)})(),n.then(k=>{if(k){const Y=G(k);f.add(Y)}}),{introCubes:_};function G(k){const Y=new It,j=q(k);j.position.set(0,-36,0),Y.add(j),B(U=>{Y.add(U),Ge.fromTo(j.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const V=U.children.find(O=>O instanceof Be&&O!==U.children[0]);if(V){const O=V.position.y;Ge.to(V.position,{y:O+3,duration:1,ease:"easeOut",onComplete:()=>{V.position.y=O},repeat:-1})}}),Y.position.x=0,Y.position.y=-240;const z=o-u*l;return Y.position.z=z+T,Y}function q(k){const Y=new Pi("SCROLL TO CONTINUE",{font:k,size:8,depth:0,curveSegments:12,bevelEnabled:!1});Y.computeBoundingBox(),Y.center();const j=new bt({color:16777215,transparent:!0,opacity:1});return new Be(Y,j)}function B(k){new On().load("/3D/mouse.svg",j=>{const z=j.paths;let U=null,V=null,O=new It;if(z.forEach((te,D)=>{On.createShapes(te).forEach(J=>{const Q=new Yi(J);Q.computeBoundingBox();const X=new bt({color:16777215,transparent:!0,opacity:1,side:Lt}),H=new Be(Q,X);H.scale.set(.05,.05,1),D===0?U=H:D===1&&(V=H)})}),U&&V){O.add(U),O.add(V);const D=(U.geometry.boundingBox.max.x-U.geometry.boundingBox.min.x)*U.scale.x/2;O.position.x=-D,O.rotation.x=Math.PI,k(O)}})}}class Ps extends Xo{constructor(e){super(e)}load(e,n,t,r){const o=this,l=new qo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){const x=o.parse(JSON.parse(u));n&&n(x)},t,r)}parse(e){return new Ms(e)}}class Ms{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],r=Cs(e,n,this.data);for(let o=0,l=r.length;o<l;o++)t.push(...r[o].toShapes());return t}}function Cs(f,e,n){const t=Array.from(f),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,l=[];let u=0,x=0;for(let T=0;T<t.length;T++){const I=t[T];if(I===`
`)u=0,x-=o;else{const _=Es(I,r,u,x,n);u+=_.offsetX,l.push(_.path)}}return l}function Es(f,e,n,t,r){const o=r.glyphs[f]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+f+'" does not exists in font family '+r.familyName+".");return}const l=new Qt;let u,x,T,I,_,S,b,L;if(o.o){const C=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let m=0,G=C.length;m<G;)switch(C[m++]){case"m":u=C[m++]*e+n,x=C[m++]*e+t,l.moveTo(u,x);break;case"l":u=C[m++]*e+n,x=C[m++]*e+t,l.lineTo(u,x);break;case"q":T=C[m++]*e+n,I=C[m++]*e+t,_=C[m++]*e+n,S=C[m++]*e+t,l.quadraticCurveTo(_,S,T,I);break;case"b":T=C[m++]*e+n,I=C[m++]*e+t,_=C[m++]*e+n,S=C[m++]*e+t,b=C[m++]*e+n,L=C[m++]*e+t,l.bezierCurveTo(_,S,b,L,T,I);break}}return{offsetX:o.ha*e,path:l}}function Ho(f,e,n,t,r){const{CUBE_SIZE:o,CUBE_SPACING:l,FIRST_CUBE_Z:u}=e,x=u-(n.length+1)*l,T=65535,I=16711935,_=16711680,S=je.degToRad(15),b=1e3,L=.5,C=80,m=1,G=15,q=.1;let B=[],k=null,Y=null,j=!1,z=!1,U=new ji,V=new de,O=null,te=null,D=null,ee=!1,J=null;const Q=ei(),X=(g,c,s,i,w,R)=>{const y=new It;y.position.z=s,y.rotation.z=i,y.userData.isActive=!1;const E=new En(c,c,c),F=new _n(E),A=new zt({color:new ht(T),transparent:!0,opacity:0}),v=new sr(F,A);y.add(v);let P="right";const N=c/2;if(w)switch(["left","top","right","bottom"].includes(R)?R:"left"){case"left":P="right";break;case"top":P="bottom";break;case"right":P="left";break;case"bottom":P="top";break}const d=()=>{const Se=new bo(40,24),re=new _n(Se),we=new zt({color:new ht(T),transparent:!0,opacity:0,visible:!0}),ke=new sr(re,we);ke.userData.isPortal=!0,ke.userData.isAnimating=!1;const Re=new Yt(120,120),qt=new bt({visible:!1,side:Lt}),De=new Be(Re,qt);De.userData.isPortalHitbox=!0,De.userData.portal=ke;const Tt=new It,Zt=new Yt(m,G),Et=65/2;for(let Le=0;Le<C;Le++){const lt=new bt({color:new ht(I),transparent:!0,opacity:0,visible:!1,side:Lt}),Ue=new Be(Zt,lt),$e=Le/C*Math.PI*2;Ue.position.set(Math.cos($e)*Et,Math.sin($e)*Et,0),Ue.rotation.z=$e+Math.PI/2,Ue.userData.baseOpacity=.01,Ue.userData.index=Le,Tt.add(Ue)}const Gt=2,he=25;for(let Le=1;Le<he;Le++){const lt=new bo(40,24),Ue=new _n(lt),$e=je.lerp(1,.1,Le/(he-1)),Ut=new zt({color:new ht(T),transparent:!0,opacity:0}),At=new sr(Ue,Ut);At.userData.isPortal=!0,At.userData.maxOpacity=$e,At.position.z=-Le*Gt,ke.add(At)}switch(ke.userData.maxOpacity=1,P){case"left":case"right":Tt.children.forEach(Le=>Le.position.x+=q);break;case"top":case"bottom":Tt.children.forEach(Le=>Le.position.y+=q);break}switch(ke.add(Tt),y.add(ke),y.add(De),ke.updateMatrixWorld(!0),Tt.updateMatrixWorld(!0),P){case"left":ke.position.set(-N,0,0),ke.rotation.y=Math.PI/2,De.position.set(-N,0,0),De.rotation.y=Math.PI/2;break;case"top":ke.position.set(0,N,0),ke.rotation.x=-Math.PI/2,De.position.set(0,N,0),De.rotation.x=Math.PI/2;break;case"right":ke.position.set(N,0,0),ke.rotation.y=-Math.PI/2,De.position.set(N,0,0),De.rotation.y=-Math.PI/2;break;case"bottom":ke.position.set(0,-N,0),ke.rotation.x=Math.PI/2,De.position.set(0,-N,0),De.rotation.x=Math.PI/2;break}};w?new _r().load(w,fe=>{fe.encoding=void 0;const Se=new Yt(c-1,c-1),re=new bt({map:fe,transparent:!0,opacity:0,blending:St,side:Lt}),we=new Be(Se,re);switch(R){case"left":we.position.set(-N,0,0),i>=je.degToRad(120)?(we.rotation.y=Math.PI/2,we.rotation.z=-Math.PI):we.rotation.y=Math.PI/2;break;case"top":we.position.set(0,N,0),we.rotation.x=Math.PI/2,we.rotation.z=-Math.PI/2;break;case"right":we.position.set(N,0,0),i>=je.degToRad(120)?(we.rotation.y=-Math.PI/2,we.rotation.z=-Math.PI):we.rotation.y=-Math.PI/2;break;case"bottom":we.position.set(0,-N,0),i>=je.degToRad(120)?(we.rotation.x=-Math.PI/2,we.rotation.z=Math.PI/2):(we.rotation.x=-Math.PI/2,we.rotation.z=-Math.PI/2);break}y.add(we),d()},void 0,fe=>{d()}):d(),new _r().load(t,ae=>{ae.encoding=void 0;const fe=new Yt(c-1,c-1),Se=new bt({map:ae,transparent:!0,opacity:0,blending:St,side:Lt,depthWrite:!1}),re=new Be(fe,Se);re.position.set(0,0,-c/2-1),re.rotation.y=0,re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile:",ae)}),new _r().load(t,ae=>{ae.encoding=void 0;const fe=new Yt(c-1,c-1),Se=new bt({map:ae,transparent:!0,opacity:0,blending:St,side:Lt,depthWrite:!1,color:new ht(16744448)}),re=new Be(fe,Se);re.position.set(0,0,c/2+1),re.rotation.y=0,re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile:",ae)});const W=["left","top","right","bottom"],ve=[w?R||"left":null,P].filter(Boolean),ge=W.filter(ae=>!ve.includes(ae));return new _r().load(t,ae=>{ae.encoding=void 0;const fe=new Yt(c-1,c-1),Se=new bt({map:ae,transparent:!0,opacity:0,blending:St,side:Lt,depthWrite:!1,color:new ht(255)}),re=new Be(fe,Se);switch(ge[0]){case"left":re.position.set(-N,0,0),re.rotation.y=-Math.PI/2;break;case"top":re.position.set(0,N,0),re.rotation.x=Math.PI/2;break;case"right":re.position.set(N,0,0),re.rotation.y=Math.PI/2;break;case"bottom":re.position.set(0,-N,0),re.rotation.x=-Math.PI/2;break}re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile:",ae)}),new _r().load(r,ae=>{ae.encoding=void 0;const fe=new Yt(c-1,c-1),Se=new bt({map:ae,transparent:!0,opacity:0,blending:St,side:Lt,depthWrite:!1}),re=new Be(fe,Se);switch(ge[1]){case"left":re.position.set(-N,0,0),re.rotation.y=-Math.PI/2;break;case"top":re.position.set(0,N,0),re.rotation.x=Math.PI/2;break;case"right":re.position.set(N,0,0),re.rotation.y=Math.PI/2;break;case"bottom":re.position.set(0,-N,0),re.rotation.x=-Math.PI/2;break}re.userData.isGridPlane=!0,y.add(re)},void 0,ae=>{console.error("Error loading projectGridFile2:",ae)}),y},H=(g,c,s,i,w,R)=>{const y=new Pi(g,{font:R,size:w,depth:0,curveSegments:12,bevelEnabled:!1});y.computeBoundingBox(),y.center();const E=new bt({color:16777215,transparent:!0,opacity:0,side:Lt}),F=new Be(y,E);F.position.set(c,s,i);const A=y.boundingBox,v=A.max.x-A.min.x,P=A.max.y-A.min.y,N=v+8,d=P+4,h=new Yt(N,d),a=new bt({color:0,transparent:!0,opacity:0,side:Lt}),W=new Be(h,a);return W.position.set(c,s,i-1),f.add(W),f.add(F),F.userData.backgroundPlane=W,F},M=()=>new Promise(g=>{k=new Ps,k.load("/fonts/Poppins_Regular.json",c=>{Y=c;const s=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n),s.forEach((i,w)=>{const R=u-(w+1)*l,y=(w+1)*S,E=X(i,o,R,y,i.keyart,i.keyartLocation);f.add(E),B.push(E),H(i.title,0,i.size-15,u+90-(w+1)*l,i.size,c)}),g()},void 0,c=>console.error("Error loading font:",c))}),oe=()=>j?Promise.resolve({projectCubes:B,updateCubeColors:Ce,loadedFont:Y,maxZ:x}):M().then(()=>(j=!0,{projectCubes:B,updateCubeColors:Ce,loadedFont:Y,maxZ:x})).catch(g=>{throw console.error("Error in loadFontAndText:",g),g}),p=g=>{if(g.userData.isAnimating)return;g.userData.isAnimating=!0;const c=g.children.find(y=>y instanceof It);if(!c)return;const s=c.children,i=s.length,w=Ge.timeline({repeat:-1,defaults:{ease:"none"}}),R={value:0};w.to(R,{value:1,duration:1.5,onUpdate:()=>{s.forEach(E=>{const F=E.material;if(F.visible){const A=(E.userData.index/i+R.value)%1,P=(Math.sin(A*Math.PI*2)+1)/2,N=.01+(1-.01)*Math.pow(P,4);F.opacity=N}})}}),g.userData.animationTimeline=w},se=g=>{if(!g.userData.isAnimating)return;g.userData.isAnimating=!1;const c=g.children.find(s=>s instanceof It);c&&(g.userData.animationTimeline&&(g.userData.animationTimeline.kill(),delete g.userData.animationTimeline),c.children.forEach(s=>{const i=s.material;i.opacity=0}))},Ce=g=>{const c=g.position.z;let s=[];f.traverse(i=>{i instanceof Be&&i.geometry&&i.geometry.type==="TextGeometry"&&s.push(i)}),z||(z=!0),B.forEach(i=>{const w=i.position.z,R=Math.abs(c-w);let y=0;R<=b&&(y=1-R/b),i.userData.isActive=y>=L,i.children.forEach(E=>{if(E instanceof sr&&!E.userData.isPortal&&!E.userData.isPortalHitbox){const F=E.material;if(R<=b){const A=je.lerp((T>>16&255)/255,(I>>16&255)/255,y),v=je.lerp((T>>8&255)/255,(I>>8&255)/255,y),P=je.lerp((T&255)/255,(I&255)/255,y);F.color.set(A,v,P),F.opacity=Math.min(1,y*2)}else F.opacity=0}else if(E instanceof sr&&E.userData.isPortal)z&&(y>.1?E.children.forEach(F=>{F instanceof It&&F.children.forEach(A=>{A instanceof Be&&(A.material.visible=!0,E.userData.animationStarted||(p(E),E.userData.animationStarted=!0))})}):y<=.1&&E.userData.animationStarted&&(E.children.forEach(F=>{F instanceof It&&F.children.forEach(A=>{A instanceof Be&&(A.material.visible=!1)})}),se(E),delete E.userData.animationStarted));else if(E instanceof Be&&!E.userData.isPortalHitbox){const F=E.material;if(R<=b){const A=1-R/b;F.opacity=Math.min(.8,A*2)}else F.opacity=0}})}),s.forEach(i=>{const w=i.material,R=i.userData.backgroundPlane,y=R==null?void 0:R.material,E=i.position.z,F=Math.abs(c-E+120);if(F<=b){const A=1-F/b,v=Math.min(1,A*2);w.opacity=v,y&&(y.opacity=v*.8)}else w.opacity=0,y&&(y.opacity=0)})};return{getInitializedData:oe,updateCubeColors:Ce,setupInteractivity:(g,c,s,i,w)=>{J=s;let R=null,y=null;const E=(P,N=!0)=>{const d=[P,...P.children.filter(a=>a instanceof sr&&a.userData.isPortal)],h=N?25:2;d.forEach((a,W)=>{let $=-W*h;(P.position.y>0&&P.rotation.x===-Math.PI/2||P.position.y<0&&P.rotation.x===Math.PI/2)&&($=W*h);const ve=N?a.userData.maxOpacity:0;Ge.to(a.position,{z:$,duration:1,ease:"power3.out",delay:.5}),Ge.to(a.material,{opacity:ve,duration:1,ease:"power3.out",delay:.5})})},F=P=>{V.x=P.clientX/window.innerWidth*2-1,V.y=-(P.clientY/window.innerHeight)*2+1,U.setFromCamera(V,g);const N=B.flatMap(h=>h.userData.isActive?h.children.filter(a=>a instanceof Be&&a.userData.isPortalHitbox):[]),d=U.intersectObjects(N);if(d.length>0){const a=d[0].object.userData.portal;if(O!==a){if(O){const $=O.material;Ge.to($.color,{r:(T>>16&255)/255,g:(T>>8&255)/255,b:(T&255)/255,duration:.5})}O=a;const W=O.material;Ge.to(W.color,{r:(_>>16&255)/255,g:(_>>8&255)/255,b:(_&255)/255,duration:.5})}c.style.cursor="pointer"}else{if(O){const h=O.material;Ge.to(h.color,{r:(T>>16&255)/255,g:(T>>8&255)/255,b:(T&255)/255,duration:.5}),O=null}c.style.cursor="auto"}},A=P=>{V.x=P.clientX/window.innerWidth*2-1,V.y=-(P.clientY/window.innerHeight)*2+1,U.setFromCamera(V,g);const N=B.flatMap(ge=>ge.userData.isActive?ge.children.filter(ye=>ye instanceof Be&&ye.userData.isPortalHitbox):[]),d=U.intersectObjects(N);if(d.length===0)return;const h=d[0].object,a=h.userData.portal,W=h.parent,$=B.indexOf(W),ve=n[$];if(ee&&a===y){a.getWorldPosition(new et);let ge=new et;const ye=e.CUBE_SIZE/2;a.position.x===ye?ge.set(-1,0,0):a.position.x===-ye?ge.set(1,0,0):a.position.y===ye?ge.set(0,-1,0):a.position.y===-ye&&ge.set(0,1,0),ge.applyQuaternion(W.getWorldQuaternion(new Vi)).normalize();const ae=g.position.clone().clone().add(ge.clone().multiplyScalar(-675)),fe=ge.clone().multiplyScalar(-1e3),Se=ae.clone().add(fe);Ge.to(g.position,{x:ae.x,y:ae.y,z:ae.z,duration:1,ease:"power2.in",onUpdate:()=>g.lookAt(Se),onComplete:()=>{ve!=null&&ve.slug&&(Q.setScrollPosition(window.scrollY),Ei.visit(route("project.show",{project:ve.slug}),{preserveScroll:!1}))}})}else if(!ee){te||(te=g.position.clone(),D=new et(0,0,x)),J&&J(!0,te,D);const ge=a.getWorldPosition(new et);w&&w.disable(!1),Ge.to(g.position,{x:0,y:0,z:W.getWorldPosition(new et).z,duration:2,ease:"power3.out"}),Ge.to({},{duration:2,ease:"power3.out",onUpdate:function(){const ye=this.progress(),Te=g.getWorldDirection(new et).multiplyScalar(1e3).add(g.position),ae=je.lerp(Te.x,ge.x,ye),fe=je.lerp(Te.y,ge.y,ye),Se=je.lerp(Te.z,ge.z,ye);g.lookAt(ae,fe,Se)},onStart:()=>{ee=!0,R=window.scrollY,document.body.classList.add("no-scrollbar"),y=a,E(a,!0)}})}},v=P=>{if(!ee||!y||!te||!D)return;let N=0;if(P instanceof WheelEvent?N=P.deltaY:N=window.scrollY-(R||0),N>0){P.preventDefault(),window.scrollTo(0,R);return}if(N<0){P.preventDefault();const d=y,h=D.clone();Ge.to(g.position,{x:te.x,y:te.y,z:te.z,duration:1,ease:"power3.out"}),Ge.to({},{duration:1,ease:"power3.out",onUpdate:function(){const a=this.progress(),W=g.getWorldDirection(new et).multiplyScalar(1e3).add(g.position),$=je.lerp(W.x,h.x,a),ve=je.lerp(W.y,h.y,a),ge=je.lerp(W.z,h.z,a);g.lookAt($,ve,ge)},onComplete:()=>{ee=!1,y=null,R=null,document.body.classList.remove("no-scrollbar"),J&&s(!1),w&&w.enable(),E(d,!1),te=null,D=null}})}};return c.addEventListener("mousemove",F),c.addEventListener("click",A),window.addEventListener("wheel",v,{passive:!1}),window.addEventListener("scroll",v,{passive:!1}),()=>{c.removeEventListener("mousemove",F),c.removeEventListener("click",A),window.removeEventListener("wheel",v),window.removeEventListener("scroll",v)}}}}function As(f,e,n,t){const r=()=>{const x=new It;let T=null,I=null;const _=[],S=[],b=[],L=[],C=[];return e.add(x),{cityGroup:x,instancedLines:T,particleGroup:I,particles:_,paths:S,particleDistances:b,particlePaths:L,particleDirections:C}},{cityGroup:o}=r();return{cityGroup:o,buildingLines:[],updateParticles:x=>{},dispose:()=>{e.remove(o)}}}Ge.registerPlugin(pe);function ks(f,e,n,t,r,o){const{CUBE_SPACING:l,FIRST_CUBE_Z:u}=o,x=(t==null?void 0:t.length)||0,T=u-(x+1)*l;let I=!1;const _=Math.abs(T)+(x-1)*l,S=Ge.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${_}`,scrub:1,pin:!0,onUpdate:L=>{if(!I){const C=L.progress,m=je.lerp(0,T,C);e.position.set(0,0,m),e.lookAt(0,0,T)}r(e)}}});return S.fromTo(e.position,{z:0},{z:T,duration:1,ease:"none"}),{setReverting:L=>{I=L},timeline:S}}const Rs={class:"preloader"},Is={class:"progress-label"},Ds=Nn({__name:"Preloader",props:{progress:{}},setup(f){return(e,n)=>(Jr(),Ln("div",Rs,[cr("div",Is,Ai(Math.round(e.progress))+"%",1)]))}}),Os=Zo(Ds,[["__scopeId","data-v-e5eadefa"]]),qn=250,bn=500,Lr=-500,Zn=-520,Go=-720,Ns=Nn({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(f){Ge.registerPlugin(pe),ei();const e=f,n={showChasers:!1,showStarfield:!1,showCars:!1,showBuildings:!1},t=or(null),r=or(null),o=or(!1),l=or(0),u=or(!1),x=or(!0),T=new Map;let I,_,S,b,L,C,m,G,q=0,B=null,k=null,Y=null,j=null,z=null,U=[],V=null;const O=()=>{const Q=t.value?t.value.getBoundingClientRect().width:window.innerWidth,X=window.innerHeight;S.setSize(Q,X),b.setSize(Q,X),_.aspect=Q/X,_.far=6e4,_.updateProjectionMatrix()},te=Q=>T.has(Q)?Promise.resolve(T.get(Q)):new Promise((X,H)=>{new _r().load(Q,oe=>{oe.encoding=void 0,T.set(Q,oe),X(oe)},void 0,oe=>H(oe))}),D=async()=>{I=new jo,I.background=new ht(0),I.fog=new Xi(0,700,4e3),_=new qi(75,window.innerWidth/window.innerHeight,1,6e4),_.position.set(0,0,0),_.lookAt(0,0,1e3),S=new Vo({antialias:!0}),S.setPixelRatio(window.devicePixelRatio),S.toneMapping=Zi,S.toneMappingExposure=1,S.outputEncoding=void 0,b=new Ko(S);const Q=new Jo(I,_);if(b.addPass(Q),L=new hr(new de(window.innerWidth,window.innerHeight),6,.4,0),L.renderToScreen=!0,b.addPass(L),t.value)t.value.appendChild(S.domElement),S.domElement.style.opacity="0";else return;m=new Kr,m.dom.style.position="fixed",m.dom.style.top="0px",m.dom.style.left="0px",m.dom.style.zIndex="1000",document.body.appendChild(m.dom);const X=e.projects.length+2+1;let H=0;const M=()=>{H++,l.value=H/X*100,H===X&&(o.value=!0)};await te(e.projectGridFile).then(()=>M()).catch(()=>M()),await te(e.projectGridFile2).then(()=>M()).catch(()=>M());for(const se of e.projects)se.keyart?await te(se.keyart).then(()=>M()).catch(()=>M()):M();const oe=Ho(I,{CUBE_SIZE:qn,CUBE_SPACING:bn,FIRST_CUBE_Z:Lr},e.projects,e.projectGridFile,e.projectGridFile2);let p=-8500;try{const se=await oe.getInitializedData();p=se.maxZ!==void 0&&!isNaN(se.maxZ)?se.maxZ:-8500,M();const{introCubes:Ce}=Ss(I,I,Promise.resolve(se.loadedFont),{CUBE_SIZE:qn,FIRST_CUBE_Z:Lr});U=[...Ce,...se.projectCubes],V=se.updateCubeColors;const{cityGroup:Qe,updateParticles:g,dispose:c}=As(I,I,p,n);G=g,z=c,n.showStarfield,n.showChasers,O()}catch(se){console.error("Error initializing project cubes:",se)}},ee=(Q=0)=>{if(C=requestAnimationFrame(ee),S&&b){const X=(Q-q)/1e3;q=Q,G(X);const H=Go-Zn;let M=0;_.position.z>=Zn?M=0:_.position.z<=Go?M=1:M=(_.position.z-Zn)/H,L.strength=je.lerp(1,.125,M),u.value&&(V(_),pe.update()),b.render()}m.update()};Uo(()=>{D().then(()=>{if(o.value){C=requestAnimationFrame(ee);const Q=Ho(I,{CUBE_SIZE:qn,CUBE_SPACING:bn,FIRST_CUBE_Z:Lr},e.projects,e.projectGridFile,e.projectGridFile2);let X=null,H=null;const M=Q.getInitializedData().then(({projectCubes:p})=>{p.forEach(Ce=>{Ce.userData.isActive=!0});const se=Lr-(e.projects.length-1)*bn;if(_.position.set(0,0,5e3),_.lookAt(0,0,se),_.updateProjectionMatrix(),V(_),b.render(),U.length&&V){const{setReverting:Ce,timeline:Qe}=ks(I,_,r,U,V,{CUBE_SPACING:bn,FIRST_CUBE_Z:Lr});H=Ce,X=Qe}S&&k===null&&(k=Q.setupInteractivity(_,S.domElement,(Ce,Qe,g)=>{H&&H(Ce)},void 0,X==null?void 0:X.scrollTrigger)),window.scrollTo({top:0,behavior:"auto"})}),oe=()=>{M.then(()=>{x.value=!1,_.position.set(0,0,5e3),_.updateProjectionMatrix(),Ge.to(S.domElement,{opacity:1,duration:.5,ease:"power4.out"});const p={z:5e3};Ge.to(p,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{_.position.z=p.z,_.updateProjectionMatrix()},onComplete:()=>{_.position.z=0,u.value=!0}})})};Ge.delayedCall(.1,oe)}}).catch(Q=>{console.error("Initialization failed:",Q)}),window.addEventListener("resize",J)}),Wo(()=>{C&&cancelAnimationFrame(C),k&&k(),window.removeEventListener("resize",J),pe.getAll().forEach(Q=>Q.kill()),S.dispose(),b.dispose(),I.clear(),document.body.removeChild(m.dom),z&&z()});const J=()=>{O(),pe.refresh()};return(Q,X)=>(Jr(),Ln("section",{ref_key:"wrapper",ref:r,class:"wrapper"},[ir(ki,{name:"fade"},{default:Ri(()=>[x.value?(Jr(),Ii(Os,{key:0,progress:l.value},null,8,["progress"])):Di("",!0)]),_:1}),cr("div",{ref_key:"tunnelWrapper",ref:t,class:"tunnel-wrapper"},null,512)],512))}}),Ls=Zo(Ns,[["__scopeId","data-v-ce8cae80"]]),zs={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Fs={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Bs={class:"overflow-hidden"},Hs={class:"flex justify-center items-center"},Gs={class:"flex justify-center items-center -mt-24 mix-blend-screen"},Qs=Nn({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(f){return(e,n)=>(Jr(),Ln(Li,null,[ir(Oi(Ni),{title:"Welcome"}),cr("div",zs,[cr("nav",Fs,[ir(Qi)]),cr("div",Bs,[ir(Ls,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),cr("div",Hs,[ir(_o,{"particle-width":20,"particle-height":20})]),cr("div",Gs,[ir(_o,{"particle-width":15,"particle-height":160})]),ir($i)])],64))}});export{Qs as default};
