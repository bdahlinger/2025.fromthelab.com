import{W as Gr,d as $t,I as gs,e as uo,o as Qt,a as Lt,t as Ks,x as Ur,y as Wr,b as Xo,w as Js,c as er,f as Yr,T as Vr,n as os,j as Ms,u as Xr,m as jr,F as Cs,h as Ps,g as qr}from"./app-BsD4nAZS.js";import{c as He,O as Zr,f as ho,F as Ko,k as vo,U as ns,V as ze,l as En,H as An,N as $r,C as Qr,m as At,e as Xe,b as Jt,n as rt,E as Kr,o as tr,p as or,q as ko,r as Jr,s as ei,t as ti,P as Yn,v as ss,w as lo,G as Nt,x as Ss,a as Ht,L as zt,g as Ie,y as Ke,B as Fo,z as Jo,h as gt,u as nr,R as oi,I as sr,J as ni,K as ao,Q as rr,T as ir,X as Es,Y as si,Z as ri,_ as Vn,$ as As,a0 as ii,a1 as Xn,a2 as jn,a3 as ai,S as li,a4 as ci,a5 as ui,W as fi,a6 as pi,a7 as di,d as hn,i as hi,j as gi}from"./GlobalFooter-DqfKWonP.js";import{u as Uo,_ as mi}from"./App.vue_vue_type_script_setup_true_lang-DEF4Y0_3.js";import{_ as ar}from"./_plugin-vue_export-helper-DlAUqK2U.js";function yi(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function xi(p,e,n){return e&&yi(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var bt,kn,Wt,fo,po,zo,lr,bo,en,cr,so,qt,ur,fr=function(){return bt||typeof window<"u"&&(bt=window.gsap)&&bt.registerPlugin&&bt},pr=1,Lo=[],We=[],to=[],tn=Date.now,rs=function(e,n){return n},bi=function(){var e=en.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,We),o.push.apply(o,to),We=t,to=o,rs=function(a,f){return n[a](f)}},go=function(e,n){return~to.indexOf(e)&&to[to.indexOf(e)+1][n]},on=function(e){return!!~cr.indexOf(e)},St=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Pt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},gn="scrollLeft",mn="scrollTop",is=function(){return so&&so.isPressed||We.cache++},zn=function(e,n){var t=function o(s){if(s||s===0){pr&&(Wt.history.scrollRestoration="manual");var a=so&&so.isPressed;s=o.v=Math.round(s)||(so&&so.iOS?1:0),e(s),o.cacheID=We.cache,a&&rs("ss",s)}else(n||We.cache!==o.cacheID||rs("ref"))&&(o.cacheID=We.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Rt={s:gn,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:zn(function(p){return arguments.length?Wt.scrollTo(p,dt.sc()):Wt.pageXOffset||fo[gn]||po[gn]||zo[gn]||0})},dt={s:mn,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Rt,sc:zn(function(p){return arguments.length?Wt.scrollTo(Rt.sc(),p):Wt.pageYOffset||fo[mn]||po[mn]||zo[mn]||0})},Bt=function(e,n){return(n&&n._ctx&&n._ctx.selector||bt.utils.toArray)(e)[0]||(typeof e=="string"&&bt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},mo=function(e,n){var t=n.s,o=n.sc;on(e)&&(e=fo.scrollingElement||po);var s=We.indexOf(e),a=o===dt.sc?1:2;!~s&&(s=We.push(e)-1),We[s+a]||St(e,"scroll",is);var f=We[s+a],x=f||(We[s+a]=zn(go(e,t),!0)||(on(e)?o:zn(function(L){return arguments.length?e[t]=L:e[t]})));return x.target=e,f||(x.smooth=bt.getProperty(e,"scrollBehavior")==="smooth"),x},as=function(e,n,t){var o=e,s=e,a=tn(),f=a,x=n||50,L=Math.max(500,x*3),U=function(C,M){var b=tn();M||b-a>x?(s=o,o=C,f=a,a=b):t?o+=C:o=s+(C-s)/(b-f)*(a-f)},E=function(){s=o=t?0:o,f=a=0},k=function(C){var M=f,b=s,G=tn();return(C||C===0)&&C!==o&&U(C),a===f||G-f>L?0:(o+(t?b:-b))/((t?G:a)-M)*1e3};return{update:U,reset:E,getVelocity:k}},Wo=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},ks=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},dr=function(){en=bt.core.globals().ScrollTrigger,en&&en.core&&bi()},hr=function(e){return bt=e||fr(),!kn&&bt&&typeof document<"u"&&document.body&&(Wt=window,fo=document,po=fo.documentElement,zo=fo.body,cr=[Wt,fo,po,zo],bt.utils.clamp,ur=bt.core.context||function(){},bo="onpointerenter"in zo?"pointer":"mouse",lr=it.isTouch=Wt.matchMedia&&Wt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Wt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,qt=it.eventTypes=("ontouchstart"in po?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in po?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return pr=0},500),dr(),kn=1),kn};Rt.op=dt;We.cache=0;var it=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){kn||hr(bt)||console.warn("Please gsap.registerPlugin(Observer)"),en||dr();var o=t.tolerance,s=t.dragMinimum,a=t.type,f=t.target,x=t.lineHeight,L=t.debounce,U=t.preventDefault,E=t.onStop,k=t.onStopDelay,m=t.ignore,C=t.wheelSpeed,M=t.event,b=t.onDragStart,G=t.onDragEnd,j=t.onDrag,z=t.onPress,I=t.onRelease,te=t.onRight,W=t.onLeft,R=t.onUp,Z=t.onDown,q=t.onChangeX,v=t.onChangeY,$=t.onChange,P=t.onToggleX,Q=t.onToggleY,J=t.onHover,ee=t.onHoverEnd,ge=t.onMove,B=t.ignoreCheck,S=t.isNormalizer,V=t.onGestureStart,u=t.onGestureEnd,he=t.onWheel,me=t.onEnable,Pe=t.onDisable,g=t.onClick,c=t.scrollSpeed,i=t.capture,r=t.allowClicks,_=t.lockAxis,D=t.onLockAxis;this.target=f=Bt(f)||po,this.vars=t,m&&(m=bt.utils.toArray(m)),o=o||1e-9,s=s||0,C=C||1,c=c||1,a=a||"wheel,touch,pointer",L=L!==!1,x||(x=parseFloat(Wt.getComputedStyle(zo).lineHeight)||22);var y,T,N,A,w,O,K,d=this,h=0,l=0,ne=t.passive||!U&&t.passive!==!1,ue=mo(f,Rt),je=mo(f,dt),Ze=ue(),Ge=je(),Ve=~a.indexOf("touch")&&!~a.indexOf("pointer")&&qt[0]==="pointerdown",xt=on(f),Je=f.ownerDocument||fo,tt=[0,0,0],at=[0,0,0],Y=0,ye=function(){return Y=tn()},X=function(fe,Ae){return(d.event=fe)&&m&&~m.indexOf(fe.target)||Ae&&Ve&&fe.pointerType!=="touch"||B&&B(fe,Ae)},Se=function(){d._vx.reset(),d._vy.reset(),T.pause(),E&&E(d)},xe=function(){var fe=d.deltaX=ks(tt),Ae=d.deltaY=ks(at),oe=Math.abs(fe)>=o,ce=Math.abs(Ae)>=o;$&&(oe||ce)&&$(d,fe,Ae,tt,at),oe&&(te&&d.deltaX>0&&te(d),W&&d.deltaX<0&&W(d),q&&q(d),P&&d.deltaX<0!=h<0&&P(d),h=d.deltaX,tt[0]=tt[1]=tt[2]=0),ce&&(Z&&d.deltaY>0&&Z(d),R&&d.deltaY<0&&R(d),v&&v(d),Q&&d.deltaY<0!=l<0&&Q(d),l=d.deltaY,at[0]=at[1]=at[2]=0),(A||N)&&(ge&&ge(d),N&&(b&&N===1&&b(d),j&&j(d),N=0),A=!1),O&&!(O=!1)&&D&&D(d),w&&(he(d),w=!1),y=0},we=function(fe,Ae,oe){tt[oe]+=fe,at[oe]+=Ae,d._vx.update(fe),d._vy.update(Ae),L?y||(y=requestAnimationFrame(xe)):xe()},ke=function(fe,Ae){_&&!K&&(d.axis=K=Math.abs(fe)>Math.abs(Ae)?"x":"y",O=!0),K!=="y"&&(tt[2]+=fe,d._vx.update(fe,!0)),K!=="x"&&(at[2]+=Ae,d._vy.update(Ae,!0)),L?y||(y=requestAnimationFrame(xe)):xe()},re=function(fe){if(!X(fe,1)){fe=Wo(fe,U);var Ae=fe.clientX,oe=fe.clientY,ce=Ae-d.x,F=oe-d.y,H=d.isDragging;d.x=Ae,d.y=oe,(H||(ce||F)&&(Math.abs(d.startX-Ae)>=s||Math.abs(d.startY-oe)>=s))&&(N=H?2:1,H||(d.isDragging=!0),ke(ce,F))}},ve=d.onPress=function(se){X(se,1)||se&&se.button||(d.axis=K=null,T.pause(),d.isPressed=!0,se=Wo(se),h=l=0,d.startX=d.x=se.clientX,d.startY=d.y=se.clientY,d._vx.reset(),d._vy.reset(),St(S?f:Je,qt[1],re,ne,!0),d.deltaX=d.deltaY=0,z&&z(d))},le=d.onRelease=function(se){if(!X(se,1)){Pt(S?f:Je,qt[1],re,!0);var fe=!isNaN(d.y-d.startY),Ae=d.isDragging,oe=Ae&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),ce=Wo(se);!oe&&fe&&(d._vx.reset(),d._vy.reset(),U&&r&&bt.delayedCall(.08,function(){if(tn()-Y>300&&!se.defaultPrevented){if(se.target.click)se.target.click();else if(Je.createEvent){var F=Je.createEvent("MouseEvents");F.initMouseEvent("click",!0,!0,Wt,1,ce.screenX,ce.screenY,ce.clientX,ce.clientY,!1,!1,!1,!1,0,null),se.target.dispatchEvent(F)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,E&&Ae&&!S&&T.restart(!0),N&&xe(),G&&Ae&&G(d),I&&I(d,oe)}},Te=function(fe){return fe.touches&&fe.touches.length>1&&(d.isGesturing=!0)&&V(fe,d.isDragging)},Ye=function(){return(d.isGesturing=!1)||u(d)},$e=function(fe){if(!X(fe)){var Ae=ue(),oe=je();we((Ae-Ze)*c,(oe-Ge)*c,1),Ze=Ae,Ge=oe,E&&T.restart(!0)}},Ne=function(fe){if(!X(fe)){fe=Wo(fe,U),he&&(w=!0);var Ae=(fe.deltaMode===1?x:fe.deltaMode===2?Wt.innerHeight:1)*C;we(fe.deltaX*Ae,fe.deltaY*Ae,0),E&&!S&&T.restart(!0)}},wt=function(fe){if(!X(fe)){var Ae=fe.clientX,oe=fe.clientY,ce=Ae-d.x,F=oe-d.y;d.x=Ae,d.y=oe,A=!0,E&&T.restart(!0),(ce||F)&&ke(ce,F)}},vt=function(fe){d.event=fe,J(d)},ht=function(fe){d.event=fe,ee(d)},It=function(fe){return X(fe)||Wo(fe,U)&&g(d)};T=d._dc=bt.delayedCall(k||.25,Se).pause(),d.deltaX=d.deltaY=0,d._vx=as(0,50,!0),d._vy=as(0,50,!0),d.scrollX=ue,d.scrollY=je,d.isDragging=d.isGesturing=d.isPressed=!1,ur(this),d.enable=function(se){return d.isEnabled||(St(xt?Je:f,"scroll",is),a.indexOf("scroll")>=0&&St(xt?Je:f,"scroll",$e,ne,i),a.indexOf("wheel")>=0&&St(f,"wheel",Ne,ne,i),(a.indexOf("touch")>=0&&lr||a.indexOf("pointer")>=0)&&(St(f,qt[0],ve,ne,i),St(Je,qt[2],le),St(Je,qt[3],le),r&&St(f,"click",ye,!0,!0),g&&St(f,"click",It),V&&St(Je,"gesturestart",Te),u&&St(Je,"gestureend",Ye),J&&St(f,bo+"enter",vt),ee&&St(f,bo+"leave",ht),ge&&St(f,bo+"move",wt)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=A=N=!1,d._vx.reset(),d._vy.reset(),Ze=ue(),Ge=je(),se&&se.type&&ve(se),me&&me(d)),d},d.disable=function(){d.isEnabled&&(Lo.filter(function(se){return se!==d&&on(se.target)}).length||Pt(xt?Je:f,"scroll",is),d.isPressed&&(d._vx.reset(),d._vy.reset(),Pt(S?f:Je,qt[1],re,!0)),Pt(xt?Je:f,"scroll",$e,i),Pt(f,"wheel",Ne,i),Pt(f,qt[0],ve,i),Pt(Je,qt[2],le),Pt(Je,qt[3],le),Pt(f,"click",ye,!0),Pt(f,"click",It),Pt(Je,"gesturestart",Te),Pt(Je,"gestureend",Ye),Pt(f,bo+"enter",vt),Pt(f,bo+"leave",ht),Pt(f,bo+"move",wt),d.isEnabled=d.isPressed=d.isDragging=!1,Pe&&Pe(d))},d.kill=d.revert=function(){d.disable();var se=Lo.indexOf(d);se>=0&&Lo.splice(se,1),so===d&&(so=0)},Lo.push(d),S&&on(f)&&(so=d),d.enable(M)},xi(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();it.version="3.12.7";it.create=function(p){return new it(p)};it.register=hr;it.getAll=function(){return Lo.slice()};it.getById=function(p){return Lo.filter(function(e){return e.vars.id===p})[0]};fr()&&bt.registerPlugin(it);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var de,Io,Ue,et,Ut,Qe,ms,Nn,fn,nn,jo,yn,Tt,Un,ls,kt,Ds,Rs,Oo,gr,qn,mr,Et,cs,yr,xr,co,us,ys,No,xs,Hn,fs,Zn,xn=1,Mt=Date.now,$n=Mt(),jt=0,qo=0,Is=function(e,n,t){var o=Gt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Os=function(e,n){return n&&(!Gt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},wi=function p(){return qo&&requestAnimationFrame(p)},Ls=function(){return Un=1},Bs=function(){return Un=0},Kt=function(e){return e},Zo=function(e){return Math.round(e*1e5)/1e5||0},br=function(){return typeof window<"u"},wr=function(){return de||br()&&(de=window.gsap)&&de.registerPlugin&&de},Po=function(e){return!!~ms.indexOf(e)},vr=function(e){return(e==="Height"?xs:Ue["inner"+e])||Ut["client"+e]||Qe["client"+e]},_r=function(e){return go(e,"getBoundingClientRect")||(Po(e)?function(){return Ln.width=Ue.innerWidth,Ln.height=xs,Ln}:function(){return no(e)})},vi=function(e,n,t){var o=t.d,s=t.d2,a=t.a;return(a=go(e,"getBoundingClientRect"))?function(){return a()[o]}:function(){return(n?vr(s):e["client"+s])||0}},_i=function(e,n){return!n||~to.indexOf(e)?_r(e):function(){return Ln}},eo=function(e,n){var t=n.s,o=n.d2,s=n.d,a=n.a;return Math.max(0,(t="scroll"+o)&&(a=go(e,t))?a()-_r(e)()[s]:Po(e)?(Ut[t]||Qe[t])-vr(o):e[t]-e["offset"+o])},bn=function(e,n){for(var t=0;t<Oo.length;t+=3)(!n||~n.indexOf(Oo[t+1]))&&e(Oo[t],Oo[t+1],Oo[t+2])},Gt=function(e){return typeof e=="string"},Ct=function(e){return typeof e=="function"},$o=function(e){return typeof e=="number"},wo=function(e){return typeof e=="object"},Yo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},Qn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},Do=Math.abs,Tr="left",Mr="top",bs="right",ws="bottom",To="width",Mo="height",sn="Right",rn="Left",an="Top",ln="Bottom",ct="padding",Vt="margin",Go="Width",vs="Height",pt="px",Xt=function(e){return Ue.getComputedStyle(e)},Ti=function(e){var n=Xt(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},zs=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},no=function(e,n){var t=n&&Xt(e)[ls]!=="matrix(1, 0, 0, 1, 0, 0)"&&de.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Fn=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},Cr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},Mi=function(e){return function(n){return de.utils.snap(Cr(e),n)}},_s=function(e){var n=de.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,a){a===void 0&&(a=.001);var f;if(!s)return n(o);if(s>0){for(o-=a,f=0;f<t.length;f++)if(t[f]>=o)return t[f];return t[f-1]}else for(f=t.length,o+=a;f--;)if(t[f]<=o)return t[f];return t[0]}:function(o,s,a){a===void 0&&(a=.001);var f=n(o);return!s||Math.abs(f-o)<a||f-o<0==s<0?f:n(s<0?o-e:o+e)}},Ci=function(e){return function(n,t){return _s(Cr(e))(n,t.direction)}},wn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},yt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},mt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},vn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Ns={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_n={toggleActions:"play",anticipatePin:0},Gn={top:0,left:0,center:.5,bottom:1,right:1},Dn=function(e,n){if(Gt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Gn?Gn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},Tn=function(e,n,t,o,s,a,f,x){var L=s.startColor,U=s.endColor,E=s.fontSize,k=s.indent,m=s.fontWeight,C=et.createElement("div"),M=Po(t)||go(t,"pinType")==="fixed",b=e.indexOf("scroller")!==-1,G=M?Qe:t,j=e.indexOf("start")!==-1,z=j?L:U,I="border-color:"+z+";font-size:"+E+";color:"+z+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return I+="position:"+((b||x)&&M?"fixed;":"absolute;"),(b||x||!M)&&(I+=(o===dt?bs:ws)+":"+(a+parseFloat(k))+"px;"),f&&(I+="box-sizing:border-box;text-align:left;width:"+f.offsetWidth+"px;"),C._isStart=j,C.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),C.style.cssText=I,C.innerText=n||n===0?e+"-"+n:e,G.children[0]?G.insertBefore(C,G.children[0]):G.appendChild(C),C._offset=C["offset"+o.op.d2],Rn(C,0,o,j),C},Rn=function(e,n,t,o){var s={display:"block"},a=t[o?"os2":"p2"],f=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+a+Go]=1,s["border"+f+Go]=0,s[t.p]=n+"px",de.set(e,s)},Fe=[],ps={},pn,Hs=function(){return Mt()-jt>34&&(pn||(pn=requestAnimationFrame(ro)))},Ro=function(){(!Et||!Et.isPressed||Et.startX>Qe.clientWidth)&&(We.cache++,Et?pn||(pn=requestAnimationFrame(ro)):ro(),jt||Eo("scrollStart"),jt=Mt())},Kn=function(){xr=Ue.innerWidth,yr=Ue.innerHeight},Qo=function(e){We.cache++,(e===!0||!Tt&&!mr&&!et.fullscreenElement&&!et.webkitFullscreenElement&&(!cs||xr!==Ue.innerWidth||Math.abs(Ue.innerHeight-yr)>Ue.innerHeight*.25))&&Nn.restart(!0)},So={},Pi=[],Pr=function p(){return mt(Oe,"scrollEnd",p)||_o(!0)},Eo=function(e){return So[e]&&So[e].map(function(n){return n()})||Pi},Ft=[],Sr=function(e){for(var n=0;n<Ft.length;n+=5)(!e||Ft[n+4]&&Ft[n+4].query===e)&&(Ft[n].style.cssText=Ft[n+1],Ft[n].getBBox&&Ft[n].setAttribute("transform",Ft[n+2]||""),Ft[n+3].uncache=1)},Ts=function(e,n){var t;for(kt=0;kt<Fe.length;kt++)t=Fe[kt],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));Hn=!0,n&&Sr(n),n||Eo("revert")},Er=function(e,n){We.cache++,(n||!Dt)&&We.forEach(function(t){return Ct(t)&&t.cacheID++&&(t.rec=0)}),Gt(e)&&(Ue.history.scrollRestoration=ys=e)},Dt,Co=0,Fs,Si=function(){if(Fs!==Co){var e=Fs=Co;requestAnimationFrame(function(){return e===Co&&_o(!0)})}},Ar=function(){Qe.appendChild(No),xs=!Et&&No.offsetHeight||Ue.innerHeight,Qe.removeChild(No)},Gs=function(e){return fn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},_o=function(e,n){if(Ut=et.documentElement,Qe=et.body,ms=[Ue,et,Ut,Qe],jt&&!e&&!Hn){yt(Oe,"scrollEnd",Pr);return}Ar(),Dt=Oe.isRefreshing=!0,We.forEach(function(o){return Ct(o)&&++o.cacheID&&(o.rec=o())});var t=Eo("refreshInit");gr&&Oe.sort(),n||Ts(),We.forEach(function(o){Ct(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),Fe.slice(0).forEach(function(o){return o.refresh()}),Hn=!1,Fe.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",a=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-a),o.refresh()}}),fs=1,Gs(!0),Fe.forEach(function(o){var s=eo(o.scroller,o._dir),a=o.vars.end==="max"||o._endClamp&&o.end>s,f=o._startClamp&&o.start>=s;(a||f)&&o.setPositions(f?s-1:o.start,a?Math.max(f?s:o.start+1,s):o.end,!0)}),Gs(!1),fs=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),We.forEach(function(o){Ct(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),Er(ys,1),Nn.pause(),Co++,Dt=2,ro(2),Fe.forEach(function(o){return Ct(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Dt=Oe.isRefreshing=!1,Eo("refresh")},ds=0,In=1,cn,ro=function(e){if(e===2||!Dt&&!Hn){Oe.isUpdating=!0,cn&&cn.update(0);var n=Fe.length,t=Mt(),o=t-$n>=50,s=n&&Fe[0].scroll();if(In=ds>s?-1:1,Dt||(ds=s),o&&(jt&&!Un&&t-jt>200&&(jt=0,Eo("scrollEnd")),jo=$n,$n=t),In<0){for(kt=n;kt-- >0;)Fe[kt]&&Fe[kt].update(0,o);In=1}else for(kt=0;kt<n;kt++)Fe[kt]&&Fe[kt].update(0,o);Oe.isUpdating=!1}pn=0},hs=[Tr,Mr,ws,bs,Vt+ln,Vt+sn,Vt+an,Vt+rn,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],On=hs.concat([To,Mo,"boxSizing","max"+Go,"max"+vs,"position",Vt,ct,ct+an,ct+sn,ct+ln,ct+rn]),Ei=function(e,n,t){Ho(t);var o=e._gsap;if(o.spacerIsNative)Ho(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},Jn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=hs.length,a=n.style,f=e.style,x;s--;)x=hs[s],a[x]=t[x];a.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(a.display="inline-block"),f[ws]=f[bs]="auto",a.flexBasis=t.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[To]=Fn(e,Rt)+pt,a[Mo]=Fn(e,dt)+pt,a[ct]=f[Vt]=f[Mr]=f[Tr]="0",Ho(o),f[To]=f["max"+Go]=t[To],f[Mo]=f["max"+vs]=t[Mo],f[ct]=t[ct],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},Ai=/([A-Z])/g,Ho=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,a;for((e.t._gsap||de.core.getCache(e.t)).uncache=1;o<t;o+=2)a=e[o+1],s=e[o],a?n[s]=a:n[s]&&n.removeProperty(s.replace(Ai,"-$1").toLowerCase())}},Mn=function(e){for(var n=On.length,t=e.style,o=[],s=0;s<n;s++)o.push(On[s],t[On[s]]);return o.t=e,o},ki=function(e,n,t){for(var o=[],s=e.length,a=t?8:0,f;a<s;a+=2)f=e[a],o.push(f,f in n?n[f]:e[a+1]);return o.t=e.t,o},Ln={left:0,top:0},Us=function(e,n,t,o,s,a,f,x,L,U,E,k,m,C){Ct(e)&&(e=e(x)),Gt(e)&&e.substr(0,3)==="max"&&(e=k+(e.charAt(4)==="="?Dn("0"+e.substr(3),t):0));var M=m?m.time():0,b,G,j;if(m&&m.seek(0),isNaN(e)||(e=+e),$o(e))m&&(e=de.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,k,e)),f&&Rn(f,t,o,!0);else{Ct(n)&&(n=n(x));var z=(e||"0").split(" "),I,te,W,R;j=Bt(n,x)||Qe,I=no(j)||{},(!I||!I.left&&!I.top)&&Xt(j).display==="none"&&(R=j.style.display,j.style.display="block",I=no(j),R?j.style.display=R:j.style.removeProperty("display")),te=Dn(z[0],I[o.d]),W=Dn(z[1]||"0",t),e=I[o.p]-L[o.p]-U+te+s-W,f&&Rn(f,W,o,t-W<20||f._isStart&&W>20),t-=t-W}if(C&&(x[C]=e||-.001,e<0&&(e=0)),a){var Z=e+t,q=a._isStart;b="scroll"+o.d2,Rn(a,Z,o,q&&Z>20||!q&&(E?Math.max(Qe[b],Ut[b]):a.parentNode[b])<=Z+1),E&&(L=no(f),E&&(a.style[o.op.p]=L[o.op.p]-o.op.m-a._offset+pt))}return m&&j&&(b=no(j),m.seek(k),G=no(j),m._caScrollDist=b[o.p]-G[o.p],e=e/m._caScrollDist*k),m&&m.seek(M),m?e:Math.round(e)},Di=/(webkit|moz|length|cssText|inset)/i,Ws=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,a,f;if(n===Qe){e._stOrig=s.cssText,f=Xt(e);for(a in f)!+a&&!Di.test(a)&&f[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=f[a]);s.top=t,s.left=o}else s.cssText=e._stOrig;de.core.getCache(e).uncache=1,n.appendChild(e)}},kr=function(e,n,t){var o=n,s=o;return function(a){var f=Math.round(e());return f!==o&&f!==s&&Math.abs(f-o)>3&&Math.abs(f-s)>3&&(a=f,t&&t()),s=o,o=Math.round(a),o}},Cn=function(e,n,t){var o={};o[n.p]="+="+t,de.set(e,o)},Ys=function(e,n){var t=mo(e,n),o="_scroll"+n.p2,s=function a(f,x,L,U,E){var k=a.tween,m=x.onComplete,C={};L=L||t();var M=kr(t,L,function(){k.kill(),a.tween=0});return E=U&&E||0,U=U||f-L,k&&k.kill(),x[o]=f,x.inherit=!1,x.modifiers=C,C[o]=function(){return M(L+U*k.ratio+E*k.ratio*k.ratio)},x.onUpdate=function(){We.cache++,a.tween&&ro()},x.onComplete=function(){a.tween=0,m&&m.call(k)},k=a.tween=de.to(e,x),k};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},yt(e,"wheel",t.wheelHandler),Oe.isTouch&&yt(e,"touchmove",t.wheelHandler),s},Oe=function(){function p(n,t){Io||p.register(de)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),us(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!qo){this.update=this.refresh=this.kill=Kt;return}t=zs(Gt(t)||$o(t)||t.nodeType?{trigger:t}:t,_n);var s=t,a=s.onUpdate,f=s.toggleClass,x=s.id,L=s.onToggle,U=s.onRefresh,E=s.scrub,k=s.trigger,m=s.pin,C=s.pinSpacing,M=s.invalidateOnRefresh,b=s.anticipatePin,G=s.onScrubComplete,j=s.onSnapComplete,z=s.once,I=s.snap,te=s.pinReparent,W=s.pinSpacer,R=s.containerAnimation,Z=s.fastScrollEnd,q=s.preventOverlaps,v=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Rt:dt,$=!E&&E!==0,P=Bt(t.scroller||Ue),Q=de.core.getCache(P),J=Po(P),ee=("pinType"in t?t.pinType:go(P,"pinType")||J&&"fixed")==="fixed",ge=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],B=$&&t.toggleActions.split(" "),S="markers"in t?t.markers:_n.markers,V=J?0:parseFloat(Xt(P)["border"+v.p2+Go])||0,u=this,he=t.onRefreshInit&&function(){return t.onRefreshInit(u)},me=vi(P,J,v),Pe=_i(P,J),g=0,c=0,i=0,r=mo(P,v),_,D,y,T,N,A,w,O,K,d,h,l,ne,ue,je,Ze,Ge,Ve,xt,Je,tt,at,Y,ye,X,Se,xe,we,ke,re,ve,le,Te,Ye,$e,Ne,wt,vt,ht;if(u._startClamp=u._endClamp=!1,u._dir=v,b*=45,u.scroller=P,u.scroll=R?R.time.bind(R):r,T=r(),u.vars=t,o=o||t.animation,"refreshPriority"in t&&(gr=1,t.refreshPriority===-9999&&(cn=u)),Q.tweenScroll=Q.tweenScroll||{top:Ys(P,dt),left:Ys(P,Rt)},u.tweenTo=_=Q.tweenScroll[v.p],u.scrubDuration=function(oe){Te=$o(oe)&&oe,Te?le?le.duration(oe):le=de.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Te,paused:!0,onComplete:function(){return G&&G(u)}}):(le&&le.progress(1).kill(),le=0)},o&&(o.vars.lazy=!1,o._initted&&!u.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),u.animation=o.pause(),o.scrollTrigger=u,u.scrubDuration(E),re=0,x||(x=o.vars.id)),I&&((!wo(I)||I.push)&&(I={snapTo:I}),"scrollBehavior"in Qe.style&&de.set(J?[Qe,Ut]:P,{scrollBehavior:"auto"}),We.forEach(function(oe){return Ct(oe)&&oe.target===(J?et.scrollingElement||Ut:P)&&(oe.smooth=!1)}),y=Ct(I.snapTo)?I.snapTo:I.snapTo==="labels"?Mi(o):I.snapTo==="labelsDirectional"?Ci(o):I.directional!==!1?function(oe,ce){return _s(I.snapTo)(oe,Mt()-c<500?0:ce.direction)}:de.utils.snap(I.snapTo),Ye=I.duration||{min:.1,max:2},Ye=wo(Ye)?nn(Ye.min,Ye.max):nn(Ye,Ye),$e=de.delayedCall(I.delay||Te/2||.1,function(){var oe=r(),ce=Mt()-c<500,F=_.tween;if((ce||Math.abs(u.getVelocity())<10)&&!F&&!Un&&g!==oe){var H=(oe-A)/ue,De=o&&!$?o.totalProgress():H,ie=ce?0:(De-ve)/(Mt()-jo)*1e3||0,Me=de.utils.clamp(-H,1-H,Do(ie/2)*ie/.185),ae=H+(I.inertia===!1?0:Me),_e,pe,Ee=I,Ce=Ee.onStart,be=Ee.onInterrupt,Re=Ee.onComplete;if(_e=y(ae,u),$o(_e)||(_e=ae),pe=Math.max(0,Math.round(A+_e*ue)),oe<=w&&oe>=A&&pe!==oe){if(F&&!F._initted&&F.data<=Do(pe-oe))return;I.inertia===!1&&(Me=_e-H),_(pe,{duration:Ye(Do(Math.max(Do(ae-De),Do(_e-De))*.185/ie/.05||0)),ease:I.ease||"power3",data:Do(pe-oe),onInterrupt:function(){return $e.restart(!0)&&be&&be(u)},onComplete:function(){u.update(),g=r(),o&&!$&&(le?le.resetTo("totalProgress",_e,o._tTime/o._tDur):o.progress(_e)),re=ve=o&&!$?o.totalProgress():u.progress,j&&j(u),Re&&Re(u)}},oe,Me*ue,pe-oe-Me*ue),Ce&&Ce(u,_.tween)}}else u.isActive&&g!==oe&&$e.restart(!0)}).pause()),x&&(ps[x]=u),k=u.trigger=Bt(k||m!==!0&&m),ht=k&&k._gsap&&k._gsap.stRevert,ht&&(ht=ht(u)),m=m===!0?k:Bt(m),Gt(f)&&(f={targets:k,className:f}),m&&(C===!1||C===Vt||(C=!C&&m.parentNode&&m.parentNode.style&&Xt(m.parentNode).display==="flex"?!1:ct),u.pin=m,D=de.core.getCache(m),D.spacer?je=D.pinState:(W&&(W=Bt(W),W&&!W.nodeType&&(W=W.current||W.nativeElement),D.spacerIsNative=!!W,W&&(D.spacerState=Mn(W))),D.spacer=Ve=W||et.createElement("div"),Ve.classList.add("pin-spacer"),x&&Ve.classList.add("pin-spacer-"+x),D.pinState=je=Mn(m)),t.force3D!==!1&&de.set(m,{force3D:!0}),u.spacer=Ve=D.spacer,ke=Xt(m),ye=ke[C+v.os2],Je=de.getProperty(m),tt=de.quickSetter(m,v.a,pt),Jn(m,Ve,ke),Ge=Mn(m)),S){l=wo(S)?zs(S,Ns):Ns,d=Tn("scroller-start",x,P,v,l,0),h=Tn("scroller-end",x,P,v,l,0,d),xt=d["offset"+v.op.d2];var It=Bt(go(P,"content")||P);O=this.markerStart=Tn("start",x,It,v,l,xt,0,R),K=this.markerEnd=Tn("end",x,It,v,l,xt,0,R),R&&(vt=de.quickSetter([O,K],v.a,pt)),!ee&&!(to.length&&go(P,"fixedMarkers")===!0)&&(Ti(J?Qe:P),de.set([d,h],{force3D:!0}),Se=de.quickSetter(d,v.a,pt),we=de.quickSetter(h,v.a,pt))}if(R){var se=R.vars.onUpdate,fe=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){u.update(0,0,1),se&&se.apply(R,fe||[])})}if(u.previous=function(){return Fe[Fe.indexOf(u)-1]},u.next=function(){return Fe[Fe.indexOf(u)+1]},u.revert=function(oe,ce){if(!ce)return u.kill(!0);var F=oe!==!1||!u.enabled,H=Tt;F!==u.isReverted&&(F&&(Ne=Math.max(r(),u.scroll.rec||0),i=u.progress,wt=o&&o.progress()),O&&[O,K,d,h].forEach(function(De){return De.style.display=F?"none":"block"}),F&&(Tt=u,u.update(F)),m&&(!te||!u.isActive)&&(F?Ei(m,Ve,je):Jn(m,Ve,Xt(m),X)),F||u.update(F),Tt=H,u.isReverted=F)},u.refresh=function(oe,ce,F,H){if(!((Tt||!u.enabled)&&!ce)){if(m&&oe&&jt){yt(p,"scrollEnd",Pr);return}!Dt&&he&&he(u),Tt=u,_.tween&&!F&&(_.tween.kill(),_.tween=0),le&&le.pause(),M&&o&&o.revert({kill:!1}).invalidate(),u.isReverted||u.revert(!0,!0),u._subPinOffset=!1;var De=me(),ie=Pe(),Me=R?R.duration():eo(P,v),ae=ue<=.01,_e=0,pe=H||0,Ee=wo(F)?F.end:t.end,Ce=t.endTrigger||k,be=wo(F)?F.start:t.start||(t.start===0||!k?0:m?"0 0":"0 100%"),Re=u.pinnedContainer=t.pinnedContainer&&Bt(t.pinnedContainer,u),qe=k&&Math.max(0,Fe.indexOf(u))||0,Le=qe,Be,ut,Zt,yo,ft,nt,Yt,io,ot,Ot,st,lt,oo;for(S&&wo(F)&&(lt=de.getProperty(d,v.p),oo=de.getProperty(h,v.p));Le-- >0;)nt=Fe[Le],nt.end||nt.refresh(0,1)||(Tt=u),Yt=nt.pin,Yt&&(Yt===k||Yt===m||Yt===Re)&&!nt.isReverted&&(Ot||(Ot=[]),Ot.unshift(nt),nt.revert(!0,!0)),nt!==Fe[Le]&&(qe--,Le--);for(Ct(be)&&(be=be(u)),be=Is(be,"start",u),A=Us(be,k,De,v,r(),O,d,u,ie,V,ee,Me,R,u._startClamp&&"_startClamp")||(m?-.001:0),Ct(Ee)&&(Ee=Ee(u)),Gt(Ee)&&!Ee.indexOf("+=")&&(~Ee.indexOf(" ")?Ee=(Gt(be)?be.split(" ")[0]:"")+Ee:(_e=Dn(Ee.substr(2),De),Ee=Gt(be)?be:(R?de.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,A):A)+_e,Ce=k)),Ee=Is(Ee,"end",u),w=Math.max(A,Us(Ee||(Ce?"100% 0":Me),Ce,De,v,r()+_e,K,h,u,ie,V,ee,Me,R,u._endClamp&&"_endClamp"))||-.001,_e=0,Le=qe;Le--;)nt=Fe[Le],Yt=nt.pin,Yt&&nt.start-nt._pinPush<=A&&!R&&nt.end>0&&(Be=nt.end-(u._startClamp?Math.max(0,nt.start):nt.start),(Yt===k&&nt.start-nt._pinPush<A||Yt===Re)&&isNaN(be)&&(_e+=Be*(1-nt.progress)),Yt===m&&(pe+=Be));if(A+=_e,w+=_e,u._startClamp&&(u._startClamp+=_e),u._endClamp&&!Dt&&(u._endClamp=w||-.001,w=Math.min(w,eo(P,v))),ue=w-A||(A-=.01)&&.001,ae&&(i=de.utils.clamp(0,1,de.utils.normalize(A,w,Ne))),u._pinPush=pe,O&&_e&&(Be={},Be[v.a]="+="+_e,Re&&(Be[v.p]="-="+r()),de.set([O,K],Be)),m&&!(fs&&u.end>=eo(P,v)))Be=Xt(m),yo=v===dt,Zt=r(),at=parseFloat(Je(v.a))+pe,!Me&&w>1&&(st=(J?et.scrollingElement||Ut:P).style,st={style:st,value:st["overflow"+v.a.toUpperCase()]},J&&Xt(Qe)["overflow"+v.a.toUpperCase()]!=="scroll"&&(st.style["overflow"+v.a.toUpperCase()]="scroll")),Jn(m,Ve,Be),Ge=Mn(m),ut=no(m,!0),io=ee&&mo(P,yo?Rt:dt)(),C?(X=[C+v.os2,ue+pe+pt],X.t=Ve,Le=C===ct?Fn(m,v)+ue+pe:0,Le&&(X.push(v.d,Le+pt),Ve.style.flexBasis!=="auto"&&(Ve.style.flexBasis=Le+pt)),Ho(X),Re&&Fe.forEach(function(_t){_t.pin===Re&&_t.vars.pinSpacing!==!1&&(_t._subPinOffset=!0)}),ee&&r(Ne)):(Le=Fn(m,v),Le&&Ve.style.flexBasis!=="auto"&&(Ve.style.flexBasis=Le+pt)),ee&&(ft={top:ut.top+(yo?Zt-A:io)+pt,left:ut.left+(yo?io:Zt-A)+pt,boxSizing:"border-box",position:"fixed"},ft[To]=ft["max"+Go]=Math.ceil(ut.width)+pt,ft[Mo]=ft["max"+vs]=Math.ceil(ut.height)+pt,ft[Vt]=ft[Vt+an]=ft[Vt+sn]=ft[Vt+ln]=ft[Vt+rn]="0",ft[ct]=Be[ct],ft[ct+an]=Be[ct+an],ft[ct+sn]=Be[ct+sn],ft[ct+ln]=Be[ct+ln],ft[ct+rn]=Be[ct+rn],Ze=ki(je,ft,te),Dt&&r(0)),o?(ot=o._initted,qn(1),o.render(o.duration(),!0,!0),Y=Je(v.a)-at+ue+pe,xe=Math.abs(ue-Y)>1,ee&&xe&&Ze.splice(Ze.length-2,2),o.render(0,!0,!0),ot||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),qn(0)):Y=ue,st&&(st.value?st.style["overflow"+v.a.toUpperCase()]=st.value:st.style.removeProperty("overflow-"+v.a));else if(k&&r()&&!R)for(ut=k.parentNode;ut&&ut!==Qe;)ut._pinOffset&&(A-=ut._pinOffset,w-=ut._pinOffset),ut=ut.parentNode;Ot&&Ot.forEach(function(_t){return _t.revert(!1,!0)}),u.start=A,u.end=w,T=N=Dt?Ne:r(),!R&&!Dt&&(T<Ne&&r(Ne),u.scroll.rec=0),u.revert(!1,!0),c=Mt(),$e&&(g=-1,$e.restart(!0)),Tt=0,o&&$&&(o._initted||wt)&&o.progress()!==wt&&o.progress(wt||0,!0).render(o.time(),!0,!0),(ae||i!==u.progress||R||M||o&&!o._initted)&&(o&&!$&&o.totalProgress(R&&A<-.001&&!i?de.utils.normalize(A,w,0):i,!0),u.progress=ae||(T-A)/ue===i?0:i),m&&C&&(Ve._pinOffset=Math.round(u.progress*Y)),le&&le.invalidate(),isNaN(lt)||(lt-=de.getProperty(d,v.p),oo-=de.getProperty(h,v.p),Cn(d,v,lt),Cn(O,v,lt-(H||0)),Cn(h,v,oo),Cn(K,v,oo-(H||0))),ae&&!Dt&&u.update(),U&&!Dt&&!ne&&(ne=!0,U(u),ne=!1)}},u.getVelocity=function(){return(r()-N)/(Mt()-jo)*1e3||0},u.endAnimation=function(){Yo(u.callbackAnimation),o&&(le?le.progress(1):o.paused()?$||Yo(o,u.direction<0,1):Yo(o,o.reversed()))},u.labelToScroll=function(oe){return o&&o.labels&&(A||u.refresh()||A)+o.labels[oe]/o.duration()*ue||0},u.getTrailing=function(oe){var ce=Fe.indexOf(u),F=u.direction>0?Fe.slice(0,ce).reverse():Fe.slice(ce+1);return(Gt(oe)?F.filter(function(H){return H.vars.preventOverlaps===oe}):F).filter(function(H){return u.direction>0?H.end<=A:H.start>=w})},u.update=function(oe,ce,F){if(!(R&&!F&&!oe)){var H=Dt===!0?Ne:u.scroll(),De=oe?0:(H-A)/ue,ie=De<0?0:De>1?1:De||0,Me=u.progress,ae,_e,pe,Ee,Ce,be,Re,qe;if(ce&&(N=T,T=R?r():H,I&&(ve=re,re=o&&!$?o.totalProgress():ie)),b&&m&&!Tt&&!xn&&jt&&(!ie&&A<H+(H-N)/(Mt()-jo)*b?ie=1e-4:ie===1&&w>H+(H-N)/(Mt()-jo)*b&&(ie=.9999)),ie!==Me&&u.enabled){if(ae=u.isActive=!!ie&&ie<1,_e=!!Me&&Me<1,be=ae!==_e,Ce=be||!!ie!=!!Me,u.direction=ie>Me?1:-1,u.progress=ie,Ce&&!Tt&&(pe=ie&&!Me?0:ie===1?1:Me===1?2:3,$&&(Ee=!be&&B[pe+1]!=="none"&&B[pe+1]||B[pe],qe=o&&(Ee==="complete"||Ee==="reset"||Ee in o))),q&&(be||qe)&&(qe||E||!o)&&(Ct(q)?q(u):u.getTrailing(q).forEach(function(Zt){return Zt.endAnimation()})),$||(le&&!Tt&&!xn?(le._dp._time-le._start!==le._time&&le.render(le._dp._time-le._start),le.resetTo?le.resetTo("totalProgress",ie,o._tTime/o._tDur):(le.vars.totalProgress=ie,le.invalidate().restart())):o&&o.totalProgress(ie,!!(Tt&&(c||oe)))),m){if(oe&&C&&(Ve.style[C+v.os2]=ye),!ee)tt(Zo(at+Y*ie));else if(Ce){if(Re=!oe&&ie>Me&&w+1>H&&H+1>=eo(P,v),te)if(!oe&&(ae||Re)){var Le=no(m,!0),Be=H-A;Ws(m,Qe,Le.top+(v===dt?Be:0)+pt,Le.left+(v===dt?0:Be)+pt)}else Ws(m,Ve);Ho(ae||Re?Ze:Ge),xe&&ie<1&&ae||tt(at+(ie===1&&!Re?Y:0))}}I&&!_.tween&&!Tt&&!xn&&$e.restart(!0),f&&(be||z&&ie&&(ie<1||!Zn))&&fn(f.targets).forEach(function(Zt){return Zt.classList[ae||z?"add":"remove"](f.className)}),a&&!$&&!oe&&a(u),Ce&&!Tt?($&&(qe&&(Ee==="complete"?o.pause().totalProgress(1):Ee==="reset"?o.restart(!0).pause():Ee==="restart"?o.restart(!0):o[Ee]()),a&&a(u)),(be||!Zn)&&(L&&be&&Qn(u,L),ge[pe]&&Qn(u,ge[pe]),z&&(ie===1?u.kill(!1,1):ge[pe]=0),be||(pe=ie===1?1:3,ge[pe]&&Qn(u,ge[pe]))),Z&&!ae&&Math.abs(u.getVelocity())>($o(Z)?Z:2500)&&(Yo(u.callbackAnimation),le?le.progress(1):Yo(o,Ee==="reverse"?1:!ie,1))):$&&a&&!Tt&&a(u)}if(we){var ut=R?H/R.duration()*(R._caScrollDist||0):H;Se(ut+(d._isFlipped?1:0)),we(ut)}vt&&vt(-H/R.duration()*(R._caScrollDist||0))}},u.enable=function(oe,ce){u.enabled||(u.enabled=!0,yt(P,"resize",Qo),J||yt(P,"scroll",Ro),he&&yt(p,"refreshInit",he),oe!==!1&&(u.progress=i=0,T=N=g=r()),ce!==!1&&u.refresh())},u.getTween=function(oe){return oe&&_?_.tween:le},u.setPositions=function(oe,ce,F,H){if(R){var De=R.scrollTrigger,ie=R.duration(),Me=De.end-De.start;oe=De.start+Me*oe/ie,ce=De.start+Me*ce/ie}u.refresh(!1,!1,{start:Os(oe,F&&!!u._startClamp),end:Os(ce,F&&!!u._endClamp)},H),u.update()},u.adjustPinSpacing=function(oe){if(X&&oe){var ce=X.indexOf(v.d)+1;X[ce]=parseFloat(X[ce])+oe+pt,X[1]=parseFloat(X[1])+oe+pt,Ho(X)}},u.disable=function(oe,ce){if(u.enabled&&(oe!==!1&&u.revert(!0,!0),u.enabled=u.isActive=!1,ce||le&&le.pause(),Ne=0,D&&(D.uncache=1),he&&mt(p,"refreshInit",he),$e&&($e.pause(),_.tween&&_.tween.kill()&&(_.tween=0)),!J)){for(var F=Fe.length;F--;)if(Fe[F].scroller===P&&Fe[F]!==u)return;mt(P,"resize",Qo),J||mt(P,"scroll",Ro)}},u.kill=function(oe,ce){u.disable(oe,ce),le&&!ce&&le.kill(),x&&delete ps[x];var F=Fe.indexOf(u);F>=0&&Fe.splice(F,1),F===kt&&In>0&&kt--,F=0,Fe.forEach(function(H){return H.scroller===u.scroller&&(F=1)}),F||Dt||(u.scroll.rec=0),o&&(o.scrollTrigger=null,oe&&o.revert({kill:!1}),ce||o.kill()),O&&[O,K,d,h].forEach(function(H){return H.parentNode&&H.parentNode.removeChild(H)}),cn===u&&(cn=0),m&&(D&&(D.uncache=1),F=0,Fe.forEach(function(H){return H.pin===m&&F++}),F||(D.spacer=0)),t.onKill&&t.onKill(u)},Fe.push(u),u.enable(!1,!1),ht&&ht(u),o&&o.add&&!ue){var Ae=u.update;u.update=function(){u.update=Ae,We.cache++,A||w||u.refresh()},de.delayedCall(.01,u.update),ue=.01,A=w=0}else u.refresh();m&&Si()},p.register=function(t){return Io||(de=t||wr(),br()&&window.document&&p.enable(),Io=qo),Io},p.defaults=function(t){if(t)for(var o in t)_n[o]=t[o];return _n},p.disable=function(t,o){qo=0,Fe.forEach(function(a){return a[o?"kill":"disable"](t)}),mt(Ue,"wheel",Ro),mt(et,"scroll",Ro),clearInterval(yn),mt(et,"touchcancel",Kt),mt(Qe,"touchstart",Kt),wn(mt,et,"pointerdown,touchstart,mousedown",Ls),wn(mt,et,"pointerup,touchend,mouseup",Bs),Nn.kill(),bn(mt);for(var s=0;s<We.length;s+=3)vn(mt,We[s],We[s+1]),vn(mt,We[s],We[s+2])},p.enable=function(){if(Ue=window,et=document,Ut=et.documentElement,Qe=et.body,de&&(fn=de.utils.toArray,nn=de.utils.clamp,us=de.core.context||Kt,qn=de.core.suppressOverwrites||Kt,ys=Ue.history.scrollRestoration||"auto",ds=Ue.pageYOffset||0,de.core.globals("ScrollTrigger",p),Qe)){qo=1,No=document.createElement("div"),No.style.height="100vh",No.style.position="absolute",Ar(),wi(),it.register(de),p.isTouch=it.isTouch,co=it.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),cs=it.isTouch===1,yt(Ue,"wheel",Ro),ms=[Ue,et,Ut,Qe],de.matchMedia?(p.matchMedia=function(L){var U=de.matchMedia(),E;for(E in L)U.add(E,L[E]);return U},de.addEventListener("matchMediaInit",function(){return Ts()}),de.addEventListener("matchMediaRevert",function(){return Sr()}),de.addEventListener("matchMedia",function(){_o(0,1),Eo("matchMedia")}),de.matchMedia().add("(orientation: portrait)",function(){return Kn(),Kn})):console.warn("Requires GSAP 3.11.0 or later"),Kn(),yt(et,"scroll",Ro);var t=Qe.hasAttribute("style"),o=Qe.style,s=o.borderTopStyle,a=de.core.Animation.prototype,f,x;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",f=no(Qe),dt.m=Math.round(f.top+dt.sc())||0,Rt.m=Math.round(f.left+Rt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(Qe.setAttribute("style",""),Qe.removeAttribute("style")),yn=setInterval(Hs,250),de.delayedCall(.5,function(){return xn=0}),yt(et,"touchcancel",Kt),yt(Qe,"touchstart",Kt),wn(yt,et,"pointerdown,touchstart,mousedown",Ls),wn(yt,et,"pointerup,touchend,mouseup",Bs),ls=de.utils.checkPrefix("transform"),On.push(ls),Io=Mt(),Nn=de.delayedCall(.2,_o).pause(),Oo=[et,"visibilitychange",function(){var L=Ue.innerWidth,U=Ue.innerHeight;et.hidden?(Ds=L,Rs=U):(Ds!==L||Rs!==U)&&Qo()},et,"DOMContentLoaded",_o,Ue,"load",_o,Ue,"resize",Qo],bn(yt),Fe.forEach(function(L){return L.enable(0,1)}),x=0;x<We.length;x+=3)vn(mt,We[x],We[x+1]),vn(mt,We[x],We[x+2])}},p.config=function(t){"limitCallbacks"in t&&(Zn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(yn)||(yn=o)&&setInterval(Hs,o),"ignoreMobileResize"in t&&(cs=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(bn(mt)||bn(yt,t.autoRefreshEvents||"none"),mr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,o){var s=Bt(t),a=We.indexOf(s),f=Po(s);~a&&We.splice(a,f?6:2),o&&(f?to.unshift(Ue,o,Qe,o,Ut,o):to.unshift(s,o))},p.clearMatchMedia=function(t){Fe.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},p.isInViewport=function(t,o,s){var a=(Gt(t)?Bt(t):t).getBoundingClientRect(),f=a[s?To:Mo]*o||0;return s?a.right-f>0&&a.left+f<Ue.innerWidth:a.bottom-f>0&&a.top+f<Ue.innerHeight},p.positionInViewport=function(t,o,s){Gt(t)&&(t=Bt(t));var a=t.getBoundingClientRect(),f=a[s?To:Mo],x=o==null?f/2:o in Gn?Gn[o]*f:~o.indexOf("%")?parseFloat(o)*f/100:parseFloat(o)||0;return s?(a.left+x)/Ue.innerWidth:(a.top+x)/Ue.innerHeight},p.killAll=function(t){if(Fe.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=So.killAll||[];So={},o.forEach(function(s){return s()})}},p}();Oe.version="3.12.7";Oe.saveStyles=function(p){return p?fn(p).forEach(function(e){if(e&&e.style){var n=Ft.indexOf(e);n>=0&&Ft.splice(n,5),Ft.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),de.core.getCache(e),us())}}):Ft};Oe.revert=function(p,e){return Ts(!p,e)};Oe.create=function(p,e){return new Oe(p,e)};Oe.refresh=function(p){return p?Qo(!0):(Io||Oe.register())&&_o(!0)};Oe.update=function(p){return++We.cache&&ro(p===!0?2:0)};Oe.clearScrollMemory=Er;Oe.maxScroll=function(p,e){return eo(p,e?Rt:dt)};Oe.getScrollFunc=function(p,e){return mo(Bt(p),e?Rt:dt)};Oe.getById=function(p){return ps[p]};Oe.getAll=function(){return Fe.filter(function(p){return p.vars.id!=="ScrollSmoother"})};Oe.isScrolling=function(){return!!jt};Oe.snapDirectional=_s;Oe.addEventListener=function(p,e){var n=So[p]||(So[p]=[]);~n.indexOf(e)||n.push(e)};Oe.removeEventListener=function(p,e){var n=So[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Oe.batch=function(p,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,a=function(L,U){var E=[],k=[],m=de.delayedCall(o,function(){U(E,k),E=[],k=[]}).pause();return function(C){E.length||m.restart(!0),E.push(C.trigger),k.push(C),s<=E.length&&m.progress(1)}},f;for(f in e)t[f]=f.substr(0,2)==="on"&&Ct(e[f])&&f!=="onRefreshInit"?a(f,e[f]):e[f];return Ct(s)&&(s=s(),yt(Oe,"refresh",function(){return s=e.batchMax()})),fn(p).forEach(function(x){var L={};for(f in t)L[f]=t[f];L.trigger=x,n.push(Oe.create(L))}),n};var Vs=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},es=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(it.isTouch?" pinch-zoom":""):"none",e===Ut&&p(Qe,n)},Pn={auto:1,scroll:1},Ri=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,a=s._gsap||de.core.getCache(s),f=Mt(),x;if(!a._isScrollT||f-a._isScrollT>2e3){for(;s&&s!==Qe&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Pn[(x=Xt(s)).overflowY]||Pn[x.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==t&&!Po(s)&&(Pn[(x=Xt(s)).overflowY]||Pn[x.overflowX]),a._isScrollT=f}(a._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},Dr=function(e,n,t,o){return it.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&Ri,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&yt(et,it.eventTypes[0],js,!1,!0)},onDisable:function(){return mt(et,it.eventTypes[0],js,!0)}})},Ii=/(input|label|select|textarea)/i,Xs,js=function(e){var n=Ii.test(e.target.tagName);(n||Xs)&&(e._gsapAllow=!0,Xs=n)},Oi=function(e){wo(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,a=n.onRelease,f,x,L=Bt(e.target)||Ut,U=de.core.globals().ScrollSmoother,E=U&&U.get(),k=co&&(e.content&&Bt(e.content)||E&&e.content!==!1&&!E.smooth()&&E.content()),m=mo(L,dt),C=mo(L,Rt),M=1,b=(it.isTouch&&Ue.visualViewport?Ue.visualViewport.scale*Ue.visualViewport.width:Ue.outerWidth)/Ue.innerWidth,G=0,j=Ct(o)?function(){return o(f)}:function(){return o||2.8},z,I,te=Dr(L,e.type,!0,s),W=function(){return I=!1},R=Kt,Z=Kt,q=function(){x=eo(L,dt),Z=nn(co?1:0,x),t&&(R=nn(0,eo(L,Rt))),z=Co},v=function(){k._gsap.y=Zo(parseFloat(k._gsap.y)+m.offset)+"px",k.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(k._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},$=function(){if(I){requestAnimationFrame(W);var S=Zo(f.deltaY/2),V=Z(m.v-S);if(k&&V!==m.v+m.offset){m.offset=V-m.v;var u=Zo((parseFloat(k&&k._gsap.y)||0)-m.offset);k.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+u+", 0, 1)",k._gsap.y=u+"px",m.cacheID=We.cache,ro()}return!0}m.offset&&v(),I=!0},P,Q,J,ee,ge=function(){q(),P.isActive()&&P.vars.scrollY>x&&(m()>x?P.progress(1)&&m(x):P.resetTo("scrollY",x))};return k&&de.set(k,{y:"+=0"}),e.ignoreCheck=function(B){return co&&B.type==="touchmove"&&$()||M>1.05&&B.type!=="touchstart"||f.isGesturing||B.touches&&B.touches.length>1},e.onPress=function(){I=!1;var B=M;M=Zo((Ue.visualViewport&&Ue.visualViewport.scale||1)/b),P.pause(),B!==M&&es(L,M>1.01?!0:t?!1:"x"),Q=C(),J=m(),q(),z=Co},e.onRelease=e.onGestureStart=function(B,S){if(m.offset&&v(),!S)ee.restart(!0);else{We.cache++;var V=j(),u,he;t&&(u=C(),he=u+V*.05*-B.velocityX/.227,V*=Vs(C,u,he,eo(L,Rt)),P.vars.scrollX=R(he)),u=m(),he=u+V*.05*-B.velocityY/.227,V*=Vs(m,u,he,eo(L,dt)),P.vars.scrollY=Z(he),P.invalidate().duration(V).play(.01),(co&&P.vars.scrollY>=x||u>=x-1)&&de.to({},{onUpdate:ge,duration:V})}a&&a(B)},e.onWheel=function(){P._ts&&P.pause(),Mt()-G>1e3&&(z=0,G=Mt())},e.onChange=function(B,S,V,u,he){if(Co!==z&&q(),S&&t&&C(R(u[2]===S?Q+(B.startX-B.x):C()+S-u[1])),V){m.offset&&v();var me=he[2]===V,Pe=me?J+B.startY-B.y:m()+V-he[1],g=Z(Pe);me&&Pe!==g&&(J+=g-Pe),m(g)}(V||S)&&ro()},e.onEnable=function(){es(L,t?!1:"x"),Oe.addEventListener("refresh",ge),yt(Ue,"resize",ge),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=C.smooth=!1),te.enable()},e.onDisable=function(){es(L,!0),mt(Ue,"resize",ge),Oe.removeEventListener("refresh",ge),te.kill()},e.lockAxis=e.lockAxis!==!1,f=new it(e),f.iOS=co,co&&!m()&&m(1),co&&de.ticker.add(Kt),ee=f._dc,P=de.to(f,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:kr(m,m(),function(){return P.pause()})},onUpdate:ro,onComplete:ee.vars.onComplete}),f};Oe.sort=function(p){if(Ct(p))return Fe.sort(p);var e=Ue.pageYOffset||0;return Oe.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+Ue.innerHeight}),Fe.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Oe.observe=function(p){return new it(p)};Oe.normalizeScroll=function(p){if(typeof p>"u")return Et;if(p===!0&&Et)return Et.enable();if(p===!1){Et&&Et.kill(),Et=p;return}var e=p instanceof it?p:Oi(p);return Et&&Et.target===e.target&&Et.kill(),Po(e.target)&&(Et=e),e};Oe.core={_getVelocityProp:as,_inputObserver:Dr,_scrollers:We,_proxies:to,bridge:{ss:function(){jt||Eo("scrollStart"),jt=Mt()},ref:function(){return Tt}}};wr()&&de.registerPlugin(Oe);var un=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(U){U.preventDefault(),t(++p%e.children.length)},!1);function n(U){return e.appendChild(U.dom),U}function t(U){for(var E=0;E<e.children.length;E++)e.children[E].style.display=E===U?"block":"none";p=U}var o=(performance||Date).now(),s=o,a=0,f=n(new un.Panel("FPS","#0ff","#002")),x=n(new un.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var L=n(new un.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){a++;var U=(performance||Date).now();if(x.update(U-o,200),U>=s+1e3&&(f.update(a*1e3/(U-s),100),s=U,a=0,L)){var E=performance.memory;L.update(E.usedJSHeapSize/1048576,E.jsHeapSizeLimit/1048576)}return U},update:function(){o=this.end()},domElement:e,setMode:t}};un.Panel=function(p,e,n){var t=1/0,o=0,s=Math.round,a=s(window.devicePixelRatio||1),f=80*a,x=48*a,L=3*a,U=2*a,E=3*a,k=15*a,m=74*a,C=30*a,M=document.createElement("canvas");M.width=f,M.height=x,M.style.cssText="width:80px;height:48px";var b=M.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=n,b.fillRect(0,0,f,x),b.fillStyle=e,b.fillText(p,L,U),b.fillRect(E,k,m,C),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(E,k,m,C),{dom:M,update:function(G,j){t=Math.min(t,G),o=Math.max(o,G),b.fillStyle=n,b.globalAlpha=1,b.fillRect(0,0,f,k),b.fillStyle=e,b.fillText(s(G)+" "+p+" ("+s(t)+"-"+s(o)+")",L,U),b.drawImage(M,E+a,k,m-a,C,E,k,m-a,C),b.fillRect(E+m-a,k,a,C),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(E+m-a,k,a,s((1-G/j)*C))}}};const Rr={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class dn{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Li=new Zr(-1,1,1,-1,0,1);class Bi extends ho{constructor(){super(),this.setAttribute("position",new Ko([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ko([0,2,0,0,2,0],2))}}const zi=new Bi;class Ir{constructor(e){this._mesh=new He(zi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Li)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ni extends dn{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof vo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=ns.clone(e.uniforms),this.material=new vo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Ir(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class qs extends dn{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,f;this.inverse?(a=0,f=1):(a=1,f=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,a,4294967295),s.buffers.stencil.setClear(f),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Hi extends dn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Fi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new ze);this._width=t.width,this._height=t.height,n=new En(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:An}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ni(Rr),this.copyPass.material.blending=$r,this.clock=new Qr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const a=this.passes[o];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),a.needsSwap){if(t){const f=this.renderer.getContext(),x=this.renderer.state.buffers.stencil;x.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),x.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}qs!==void 0&&(a instanceof qs?t=!0:a instanceof Hi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new ze);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Gi extends dn{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new At}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=o}}const Ui={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new At(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Ao extends dn{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new ze(e.x,e.y):new ze(256,256),this.clearColor=new At(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new En(s,a,{type:An}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let E=0;E<this.nMips;E++){const k=new En(s,a,{type:An});k.texture.name="UnrealBloomPass.h"+E,k.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(k);const m=new En(s,a,{type:An});m.texture.name="UnrealBloomPass.v"+E,m.texture.generateMipmaps=!1,this.renderTargetsVertical.push(m),s=Math.round(s/2),a=Math.round(a/2)}const f=Ui;this.highPassUniforms=ns.clone(f.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new vo({uniforms:this.highPassUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),this.separableBlurMaterials=[];const x=[3,5,7,9,11];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let E=0;E<this.nMips;E++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(x[E])),this.separableBlurMaterials[E].uniforms.invSize.value=new ze(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const L=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=L,this.bloomTintColors=[new Xe(1,1,1),new Xe(1,1,1),new Xe(1,1,1),new Xe(1,1,1),new Xe(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const U=Rr;this.copyUniforms=ns.clone(U.uniforms),this.blendMaterial=new vo({uniforms:this.copyUniforms,vertexShader:U.vertexShader,fragmentShader:U.fragmentShader,blending:Jt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new At,this.oldClearAlpha=1,this.basic=new rt,this.fsQuad=new Ir(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new ze(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let f=this.renderTargetBright;for(let x=0;x<this.nMips;x++)this.fsQuad.material=this.separableBlurMaterials[x],this.separableBlurMaterials[x].uniforms.colorTexture.value=f.texture,this.separableBlurMaterials[x].uniforms.direction.value=Ao.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[x]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[x].uniforms.colorTexture.value=this.renderTargetsHorizontal[x].texture,this.separableBlurMaterials[x].uniforms.direction.value=Ao.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[x]),e.clear(),this.fsQuad.render(e),f=this.renderTargetsVertical[x];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new vo({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new ze(.5,.5)},direction:{value:new ze(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new vo({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Ao.BlurDirectionX=new ze(1,0);Ao.BlurDirectionY=new ze(0,1);class Bn extends Kr{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Wi=ss;class Bo extends tr{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,a=new or(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(f){try{n(s.parse(f))}catch(x){o?o(x):console.error(x),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(g,c){if(g.nodeType!==1)return;const i=I(g);let r=!1,_=null;switch(g.nodeName){case"svg":c=C(g,c);break;case"style":s(g);break;case"g":c=C(g,c);break;case"path":c=C(g,c),g.hasAttribute("d")&&(_=o(g));break;case"rect":c=C(g,c),_=x(g);break;case"polygon":c=C(g,c),_=L(g);break;case"polyline":c=C(g,c),_=U(g);break;case"circle":c=C(g,c),_=E(g);break;case"ellipse":c=C(g,c),_=k(g);break;case"line":c=C(g,c),_=m(g);break;case"defs":r=!0;break;case"use":c=C(g,c);const T=(g.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),N=g.viewportElement.getElementById(T);N?t(N,c):console.warn("SVGLoader: 'use node' references non-existent node id: "+T);break}_&&(c.fill!==void 0&&c.fill!=="none"&&_.color.setStyle(c.fill,Wi),W(_,he),P.push(_),_.userData={node:g,style:c});const D=g.childNodes;for(let y=0;y<D.length;y++){const T=D[y];r&&T.nodeName!=="style"&&T.nodeName!=="defs"||t(T,c)}i&&(J.pop(),J.length>0?he.copy(J[J.length-1]):he.identity())}function o(g){const c=new lo,i=new ze,r=new ze,_=new ze;let D=!0,y=!1;const T=g.getAttribute("d");if(T===""||T==="none")return null;const N=T.match(/[a-df-z][^a-df-z]*/ig);for(let A=0,w=N.length;A<w;A++){const O=N[A],K=O.charAt(0),d=O.slice(1).trim();D===!0&&(y=!0,D=!1);let h;switch(K){case"M":h=b(d);for(let l=0,ne=h.length;l<ne;l+=2)i.x=h[l+0],i.y=h[l+1],r.x=i.x,r.y=i.y,l===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),l===0&&_.copy(i);break;case"H":h=b(d);for(let l=0,ne=h.length;l<ne;l++)i.x=h[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&y===!0&&_.copy(i);break;case"V":h=b(d);for(let l=0,ne=h.length;l<ne;l++)i.y=h[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&y===!0&&_.copy(i);break;case"L":h=b(d);for(let l=0,ne=h.length;l<ne;l+=2)i.x=h[l+0],i.y=h[l+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&y===!0&&_.copy(i);break;case"C":h=b(d);for(let l=0,ne=h.length;l<ne;l+=6)c.bezierCurveTo(h[l+0],h[l+1],h[l+2],h[l+3],h[l+4],h[l+5]),r.x=h[l+2],r.y=h[l+3],i.x=h[l+4],i.y=h[l+5],l===0&&y===!0&&_.copy(i);break;case"S":h=b(d);for(let l=0,ne=h.length;l<ne;l+=4)c.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),h[l+0],h[l+1],h[l+2],h[l+3]),r.x=h[l+0],r.y=h[l+1],i.x=h[l+2],i.y=h[l+3],l===0&&y===!0&&_.copy(i);break;case"Q":h=b(d);for(let l=0,ne=h.length;l<ne;l+=4)c.quadraticCurveTo(h[l+0],h[l+1],h[l+2],h[l+3]),r.x=h[l+0],r.y=h[l+1],i.x=h[l+2],i.y=h[l+3],l===0&&y===!0&&_.copy(i);break;case"T":h=b(d);for(let l=0,ne=h.length;l<ne;l+=2){const ue=M(i.x,r.x),je=M(i.y,r.y);c.quadraticCurveTo(ue,je,h[l+0],h[l+1]),r.x=ue,r.y=je,i.x=h[l+0],i.y=h[l+1],l===0&&y===!0&&_.copy(i)}break;case"A":h=b(d,[3,4],7);for(let l=0,ne=h.length;l<ne;l+=7){if(h[l+5]==i.x&&h[l+6]==i.y)continue;const ue=i.clone();i.x=h[l+5],i.y=h[l+6],r.x=i.x,r.y=i.y,a(c,h[l],h[l+1],h[l+2],h[l+3],h[l+4],ue,i),l===0&&y===!0&&_.copy(i)}break;case"m":h=b(d);for(let l=0,ne=h.length;l<ne;l+=2)i.x+=h[l+0],i.y+=h[l+1],r.x=i.x,r.y=i.y,l===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),l===0&&_.copy(i);break;case"h":h=b(d);for(let l=0,ne=h.length;l<ne;l++)i.x+=h[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&y===!0&&_.copy(i);break;case"v":h=b(d);for(let l=0,ne=h.length;l<ne;l++)i.y+=h[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&y===!0&&_.copy(i);break;case"l":h=b(d);for(let l=0,ne=h.length;l<ne;l+=2)i.x+=h[l+0],i.y+=h[l+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&y===!0&&_.copy(i);break;case"c":h=b(d);for(let l=0,ne=h.length;l<ne;l+=6)c.bezierCurveTo(i.x+h[l+0],i.y+h[l+1],i.x+h[l+2],i.y+h[l+3],i.x+h[l+4],i.y+h[l+5]),r.x=i.x+h[l+2],r.y=i.y+h[l+3],i.x+=h[l+4],i.y+=h[l+5],l===0&&y===!0&&_.copy(i);break;case"s":h=b(d);for(let l=0,ne=h.length;l<ne;l+=4)c.bezierCurveTo(M(i.x,r.x),M(i.y,r.y),i.x+h[l+0],i.y+h[l+1],i.x+h[l+2],i.y+h[l+3]),r.x=i.x+h[l+0],r.y=i.y+h[l+1],i.x+=h[l+2],i.y+=h[l+3],l===0&&y===!0&&_.copy(i);break;case"q":h=b(d);for(let l=0,ne=h.length;l<ne;l+=4)c.quadraticCurveTo(i.x+h[l+0],i.y+h[l+1],i.x+h[l+2],i.y+h[l+3]),r.x=i.x+h[l+0],r.y=i.y+h[l+1],i.x+=h[l+2],i.y+=h[l+3],l===0&&y===!0&&_.copy(i);break;case"t":h=b(d);for(let l=0,ne=h.length;l<ne;l+=2){const ue=M(i.x,r.x),je=M(i.y,r.y);c.quadraticCurveTo(ue,je,i.x+h[l+0],i.y+h[l+1]),r.x=ue,r.y=je,i.x=i.x+h[l+0],i.y=i.y+h[l+1],l===0&&y===!0&&_.copy(i)}break;case"a":h=b(d,[3,4],7);for(let l=0,ne=h.length;l<ne;l+=7){if(h[l+5]==0&&h[l+6]==0)continue;const ue=i.clone();i.x+=h[l+5],i.y+=h[l+6],r.x=i.x,r.y=i.y,a(c,h[l],h[l+1],h[l+2],h[l+3],h[l+4],ue,i),l===0&&y===!0&&_.copy(i)}break;case"Z":case"z":c.currentPath.autoClose=!0,c.currentPath.curves.length>0&&(i.copy(_),c.currentPath.currentPoint.copy(i),D=!0);break;default:console.warn(O)}y=!1}return c}function s(g){if(!(!g.sheet||!g.sheet.cssRules||!g.sheet.cssRules.length))for(let c=0;c<g.sheet.cssRules.length;c++){const i=g.sheet.cssRules[c];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(_=>_.trim());for(let _=0;_<r.length;_++){const D=Object.fromEntries(Object.entries(i.style).filter(([,y])=>y!==""));Q[r[_]]=Object.assign(Q[r[_]]||{},D)}}}function a(g,c,i,r,_,D,y,T){if(c==0||i==0){g.lineTo(T.x,T.y);return}r=r*Math.PI/180,c=Math.abs(c),i=Math.abs(i);const N=(y.x-T.x)/2,A=(y.y-T.y)/2,w=Math.cos(r)*N+Math.sin(r)*A,O=-Math.sin(r)*N+Math.cos(r)*A;let K=c*c,d=i*i;const h=w*w,l=O*O,ne=h/K+l/d;if(ne>1){const Y=Math.sqrt(ne);c=Y*c,i=Y*i,K=c*c,d=i*i}const ue=K*l+d*h,je=(K*d-ue)/ue;let Ze=Math.sqrt(Math.max(0,je));_===D&&(Ze=-Ze);const Ge=Ze*c*O/i,Ve=-Ze*i*w/c,xt=Math.cos(r)*Ge-Math.sin(r)*Ve+(y.x+T.x)/2,Je=Math.sin(r)*Ge+Math.cos(r)*Ve+(y.y+T.y)/2,tt=f(1,0,(w-Ge)/c,(O-Ve)/i),at=f((w-Ge)/c,(O-Ve)/i,(-w-Ge)/c,(-O-Ve)/i)%(Math.PI*2);g.currentPath.absellipse(xt,Je,c,i,tt,tt+at,D===0,r)}function f(g,c,i,r){const _=g*i+c*r,D=Math.sqrt(g*g+c*c)*Math.sqrt(i*i+r*r);let y=Math.acos(Math.max(-1,Math.min(1,_/D)));return g*r-c*i<0&&(y=-y),y}function x(g){const c=z(g.getAttribute("x")||0),i=z(g.getAttribute("y")||0),r=z(g.getAttribute("rx")||g.getAttribute("ry")||0),_=z(g.getAttribute("ry")||g.getAttribute("rx")||0),D=z(g.getAttribute("width")),y=z(g.getAttribute("height")),T=1-.551915024494,N=new lo;return N.moveTo(c+r,i),N.lineTo(c+D-r,i),(r!==0||_!==0)&&N.bezierCurveTo(c+D-r*T,i,c+D,i+_*T,c+D,i+_),N.lineTo(c+D,i+y-_),(r!==0||_!==0)&&N.bezierCurveTo(c+D,i+y-_*T,c+D-r*T,i+y,c+D-r,i+y),N.lineTo(c+r,i+y),(r!==0||_!==0)&&N.bezierCurveTo(c+r*T,i+y,c,i+y-_*T,c,i+y-_),N.lineTo(c,i+_),(r!==0||_!==0)&&N.bezierCurveTo(c,i+_*T,c+r*T,i,c+r,i),N}function L(g){function c(D,y,T){const N=z(y),A=z(T);_===0?r.moveTo(N,A):r.lineTo(N,A),_++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new lo;let _=0;return g.getAttribute("points").replace(i,c),r.currentPath.autoClose=!0,r}function U(g){function c(D,y,T){const N=z(y),A=z(T);_===0?r.moveTo(N,A):r.lineTo(N,A),_++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new lo;let _=0;return g.getAttribute("points").replace(i,c),r.currentPath.autoClose=!1,r}function E(g){const c=z(g.getAttribute("cx")||0),i=z(g.getAttribute("cy")||0),r=z(g.getAttribute("r")||0),_=new Yn;_.absarc(c,i,r,0,Math.PI*2);const D=new lo;return D.subPaths.push(_),D}function k(g){const c=z(g.getAttribute("cx")||0),i=z(g.getAttribute("cy")||0),r=z(g.getAttribute("rx")||0),_=z(g.getAttribute("ry")||0),D=new Yn;D.absellipse(c,i,r,_,0,Math.PI*2);const y=new lo;return y.subPaths.push(D),y}function m(g){const c=z(g.getAttribute("x1")||0),i=z(g.getAttribute("y1")||0),r=z(g.getAttribute("x2")||0),_=z(g.getAttribute("y2")||0),D=new lo;return D.moveTo(c,i),D.lineTo(r,_),D.currentPath.autoClose=!1,D}function C(g,c){c=Object.assign({},c);let i={};if(g.hasAttribute("class")){const y=g.getAttribute("class").split(/\s/).filter(Boolean).map(T=>T.trim());for(let T=0;T<y.length;T++)i=Object.assign(i,Q["."+y[T]])}g.hasAttribute("id")&&(i=Object.assign(i,Q["#"+g.getAttribute("id")]));function r(y,T,N){N===void 0&&(N=function(w){return w.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),w}),g.hasAttribute(y)&&(c[T]=N(g.getAttribute(y))),i[y]&&(c[T]=N(i[y])),g.style&&g.style[y]!==""&&(c[T]=N(g.style[y]))}function _(y){return Math.max(0,Math.min(1,z(y)))}function D(y){return Math.max(0,z(y))}return r("fill","fill"),r("fill-opacity","fillOpacity",_),r("fill-rule","fillRule"),r("opacity","opacity",_),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",_),r("stroke-width","strokeWidth",D),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",D),r("visibility","visibility"),c}function M(g,c){return g-(c-g)}function b(g,c,i){if(typeof g!="string")throw new TypeError("Invalid input: "+typeof g);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},_=0,D=1,y=2,T=3;let N=_,A=!0,w="",O="";const K=[];function d(ue,je,Ze){const Ge=new SyntaxError('Unexpected character "'+ue+'" at index '+je+".");throw Ge.partial=Ze,Ge}function h(){w!==""&&(O===""?K.push(Number(w)):K.push(Number(w)*Math.pow(10,Number(O)))),w="",O=""}let l;const ne=g.length;for(let ue=0;ue<ne;ue++){if(l=g[ue],Array.isArray(c)&&c.includes(K.length%i)&&r.FLAGS.test(l)){N=D,w=l,h();continue}if(N===_){if(r.WHITESPACE.test(l))continue;if(r.DIGIT.test(l)||r.SIGN.test(l)){N=D,w=l;continue}if(r.POINT.test(l)){N=y,w=l;continue}r.COMMA.test(l)&&(A&&d(l,ue,K),A=!0)}if(N===D){if(r.DIGIT.test(l)){w+=l;continue}if(r.POINT.test(l)){w+=l,N=y;continue}if(r.EXP.test(l)){N=T;continue}r.SIGN.test(l)&&w.length===1&&r.SIGN.test(w[0])&&d(l,ue,K)}if(N===y){if(r.DIGIT.test(l)){w+=l;continue}if(r.EXP.test(l)){N=T;continue}r.POINT.test(l)&&w[w.length-1]==="."&&d(l,ue,K)}if(N===T){if(r.DIGIT.test(l)){O+=l;continue}if(r.SIGN.test(l)){if(O===""){O+=l;continue}O.length===1&&r.SIGN.test(O)&&d(l,ue,K)}}r.WHITESPACE.test(l)?(h(),N=_,A=!1):r.COMMA.test(l)?(h(),N=_,A=!0):r.SIGN.test(l)?(h(),N=D,w=l):r.POINT.test(l)?(h(),N=y,w=l):d(l,ue,K)}return h(),K}const G=["mm","cm","in","pt","pc","px"],j={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function z(g){let c="px";if(typeof g=="string"||g instanceof String)for(let r=0,_=G.length;r<_;r++){const D=G[r];if(g.endsWith(D)){c=D,g=g.substring(0,g.length-D.length);break}}let i;return c==="px"&&n.defaultUnit!=="px"?i=j.in[n.defaultUnit]/n.defaultDPI:(i=j[c][n.defaultUnit],i<0&&(i=j[c].in*n.defaultDPI)),i*parseFloat(g)}function I(g){if(!(g.hasAttribute("transform")||g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))))return null;const c=te(g);return J.length>0&&c.premultiply(J[J.length-1]),he.copy(c),J.push(c),c}function te(g){const c=new ko,i=ee;if(g.nodeName==="use"&&(g.hasAttribute("x")||g.hasAttribute("y"))){const r=z(g.getAttribute("x")),_=z(g.getAttribute("y"));c.translate(r,_)}if(g.hasAttribute("transform")){const r=g.getAttribute("transform").split(")");for(let _=r.length-1;_>=0;_--){const D=r[_].trim();if(D==="")continue;const y=D.indexOf("("),T=D.length;if(y>0&&y<T){const N=D.slice(0,y),A=b(D.slice(y+1));switch(i.identity(),N){case"translate":if(A.length>=1){const w=A[0];let O=0;A.length>=2&&(O=A[1]),i.translate(w,O)}break;case"rotate":if(A.length>=1){let w=0,O=0,K=0;w=A[0]*Math.PI/180,A.length>=3&&(O=A[1],K=A[2]),ge.makeTranslation(-O,-K),B.makeRotation(w),S.multiplyMatrices(B,ge),ge.makeTranslation(O,K),i.multiplyMatrices(ge,S)}break;case"scale":if(A.length>=1){const w=A[0];let O=w;A.length>=2&&(O=A[1]),i.scale(w,O)}break;case"skewX":A.length===1&&i.set(1,Math.tan(A[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":A.length===1&&i.set(1,0,0,Math.tan(A[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":A.length===6&&i.set(A[0],A[2],A[4],A[1],A[3],A[5],0,0,1);break}}c.premultiply(i)}}return c}function W(g,c){function i(y){u.set(y.x,y.y,1).applyMatrix3(c),y.set(u.x,u.y)}function r(y){const T=y.xRadius,N=y.yRadius,A=Math.cos(y.aRotation),w=Math.sin(y.aRotation),O=new Xe(T*A,T*w,0),K=new Xe(-N*w,N*A,0),d=O.applyMatrix3(c),h=K.applyMatrix3(c),l=ee.set(d.x,h.x,0,d.y,h.y,0,0,0,1),ne=ge.copy(l).invert(),Ze=B.copy(ne).transpose().multiply(ne).elements,Ge=$(Ze[0],Ze[1],Ze[4]),Ve=Math.sqrt(Ge.rt1),xt=Math.sqrt(Ge.rt2);if(y.xRadius=1/Ve,y.yRadius=1/xt,y.aRotation=Math.atan2(Ge.sn,Ge.cs),!((y.aEndAngle-y.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const tt=ge.set(Ve,0,0,0,xt,0,0,0,1),at=B.set(Ge.cs,Ge.sn,0,-Ge.sn,Ge.cs,0,0,0,1),Y=tt.multiply(at).multiply(l),ye=X=>{const{x:Se,y:xe}=new Xe(Math.cos(X),Math.sin(X),0).applyMatrix3(Y);return Math.atan2(xe,Se)};y.aStartAngle=ye(y.aStartAngle),y.aEndAngle=ye(y.aEndAngle),R(c)&&(y.aClockwise=!y.aClockwise)}}function _(y){const T=q(c),N=v(c);y.xRadius*=T,y.yRadius*=N;const A=T>Number.EPSILON?Math.atan2(c.elements[1],c.elements[0]):Math.atan2(-c.elements[3],c.elements[4]);y.aRotation+=A,R(c)&&(y.aStartAngle*=-1,y.aEndAngle*=-1,y.aClockwise=!y.aClockwise)}const D=g.subPaths;for(let y=0,T=D.length;y<T;y++){const A=D[y].curves;for(let w=0;w<A.length;w++){const O=A[w];O.isLineCurve?(i(O.v1),i(O.v2)):O.isCubicBezierCurve?(i(O.v0),i(O.v1),i(O.v2),i(O.v3)):O.isQuadraticBezierCurve?(i(O.v0),i(O.v1),i(O.v2)):O.isEllipseCurve&&(V.set(O.aX,O.aY),i(V),O.aX=V.x,O.aY=V.y,Z(c)?r(O):_(O))}}}function R(g){const c=g.elements;return c[0]*c[4]-c[1]*c[3]<0}function Z(g){const c=g.elements,i=c[0]*c[3]+c[1]*c[4];if(i===0)return!1;const r=q(g),_=v(g);return Math.abs(i/(r*_))>Number.EPSILON}function q(g){const c=g.elements;return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function v(g){const c=g.elements;return Math.sqrt(c[3]*c[3]+c[4]*c[4])}function $(g,c,i){let r,_,D,y,T;const N=g+i,A=g-i,w=Math.sqrt(A*A+4*c*c);return N>0?(r=.5*(N+w),T=1/r,_=g*T*i-c*T*c):N<0?_=.5*(N-w):(r=.5*w,_=-.5*w),A>0?D=A+w:D=A-w,Math.abs(D)>2*Math.abs(c)?(T=-2*c/D,y=1/Math.sqrt(1+T*T),D=T*y):Math.abs(c)===0?(D=1,y=0):(T=-.5*D/c,D=1/Math.sqrt(1+T*T),y=T*D),A>0&&(T=D,D=-y,y=T),{rt1:r,rt2:_,cs:D,sn:y}}const P=[],Q={},J=[],ee=new ko,ge=new ko,B=new ko,S=new ko,V=new ze,u=new Xe,he=new ko,me=new DOMParser().parseFromString(e,"image/svg+xml");return t(me.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:P,xml:me.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(M,b,G,j){const z=M.x,I=b.x,te=G.x,W=j.x,R=M.y,Z=b.y,q=G.y,v=j.y,$=(W-te)*(R-q)-(v-q)*(z-te),P=(I-z)*(R-q)-(Z-R)*(z-te),Q=(v-q)*(I-z)-(W-te)*(Z-R),J=$/Q,ee=P/Q;if(Q===0&&$!==0||J<=0||J>=1||ee<0||ee>1)return null;if($===0&&Q===0){for(let ge=0;ge<2;ge++)if(a(ge===0?G:j,M,b),o.loc==t.ORIGIN){const B=ge===0?G:j;return{x:B.x,y:B.y,t:o.t}}else if(o.loc==t.BETWEEN){const B=+(z+o.t*(I-z)).toPrecision(10),S=+(R+o.t*(Z-R)).toPrecision(10);return{x:B,y:S,t:o.t}}return null}else{for(let S=0;S<2;S++)if(a(S===0?G:j,M,b),o.loc==t.ORIGIN){const V=S===0?G:j;return{x:V.x,y:V.y,t:o.t}}const ge=+(z+J*(I-z)).toPrecision(10),B=+(R+J*(Z-R)).toPrecision(10);return{x:ge,y:B,t:J}}}function a(M,b,G){const j=G.x-b.x,z=G.y-b.y,I=M.x-b.x,te=M.y-b.y,W=j*te-I*z;if(M.x===b.x&&M.y===b.y){o.loc=t.ORIGIN,o.t=0;return}if(M.x===G.x&&M.y===G.y){o.loc=t.DESTINATION,o.t=1;return}if(W<-Number.EPSILON){o.loc=t.LEFT;return}if(W>Number.EPSILON){o.loc=t.RIGHT;return}if(j*I<0||z*te<0){o.loc=t.BEHIND;return}if(Math.sqrt(j*j+z*z)<Math.sqrt(I*I+te*te)){o.loc=t.BEYOND;return}let R;j!==0?R=I/j:R=te/z,o.loc=t.BETWEEN,o.t=R}function f(M,b){const G=[],j=[];for(let z=1;z<M.length;z++){const I=M[z-1],te=M[z];for(let W=1;W<b.length;W++){const R=b[W-1],Z=b[W],q=s(I,te,R,Z);q!==null&&G.find(v=>v.t<=q.t+Number.EPSILON&&v.t>=q.t-Number.EPSILON)===void 0&&(G.push(q),j.push(new ze(q.x,q.y)))}}return j}function x(M,b,G){const j=new ze;b.getCenter(j);const z=[];return G.forEach(I=>{I.boundingBox.containsPoint(j)&&f(M,I.points).forEach(W=>{z.push({identifier:I.identifier,isCW:I.isCW,point:W})})}),z.sort((I,te)=>I.point.x-te.point.x),z}function L(M,b,G,j,z){(z==null||z==="")&&(z="nonzero");const I=new ze;M.boundingBox.getCenter(I);const te=[new ze(G,I.y),new ze(j,I.y)],W=x(te,M.boundingBox,b);W.sort((P,Q)=>P.point.x-Q.point.x);const R=[],Z=[];W.forEach(P=>{P.identifier===M.identifier?R.push(P):Z.push(P)});const q=R[0].point.x,v=[];let $=0;for(;$<Z.length&&Z[$].point.x<q;)v.length>0&&v[v.length-1]===Z[$].identifier?v.pop():v.push(Z[$].identifier),$++;if(v.push(M.identifier),z==="evenodd"){const P=v.length%2===0,Q=v[v.length-2];return{identifier:M.identifier,isHole:P,for:Q}}else if(z==="nonzero"){let P=!0,Q=null,J=null;for(let ee=0;ee<v.length;ee++){const ge=v[ee];P?(J=b[ge].isCW,P=!1,Q=ge):J!==b[ge].isCW&&(J=b[ge].isCW,P=!0)}return{identifier:M.identifier,isHole:P,for:Q}}else console.warn('fill-rule: "'+z+'" is currently not implemented.')}let U=999999999,E=-999999999,k=e.subPaths.map(M=>{const b=M.getPoints();let G=-999999999,j=999999999,z=-999999999,I=999999999;for(let te=0;te<b.length;te++){const W=b[te];W.y>G&&(G=W.y),W.y<j&&(j=W.y),W.x>z&&(z=W.x),W.x<I&&(I=W.x)}return E<=z&&(E=z+1),U>=I&&(U=I-1),{curves:M.curves,points:b,isCW:ei.isClockWise(b),identifier:-1,boundingBox:new Jr(new ze(I,j),new ze(z,G))}});k=k.filter(M=>M.points.length>1);for(let M=0;M<k.length;M++)k[M].identifier=M;const m=k.map(M=>L(M,k,U,E,e.userData?e.userData.style.fillRule:void 0)),C=[];return k.forEach(M=>{if(!m[M.identifier].isHole){const G=new ti;G.curves=M.curves,m.filter(z=>z.isHole&&z.for===M.identifier).forEach(z=>{const I=k[z.identifier],te=new Yn;te.curves=I.curves,G.holes.push(te)}),C.push(G)}}),C}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],a=[],f=[];if(Bo.pointsToStrokeWithBuffers(e,n,t,o,s,a,f)===0)return null;const x=new ho;return x.setAttribute("position",new Ko(s,3)),x.setAttribute("normal",new Ko(a,3)),x.setAttribute("uv",new Ko(f,2)),x}static pointsToStrokeWithBuffers(e,n,t,o,s,a,f,x){const L=new ze,U=new ze,E=new ze,k=new ze,m=new ze,C=new ze,M=new ze,b=new ze,G=new ze,j=new ze,z=new ze,I=new ze,te=new ze,W=new ze,R=new ze,Z=new ze,q=new ze;t=t!==void 0?t:12,o=o!==void 0?o:.001,x=x!==void 0?x:0,e=A(e);const v=e.length;if(v<2)return 0;const $=e[0].equals(e[v-1]);let P,Q=e[0],J;const ee=n.strokeWidth/2,ge=1/(v-1);let B=0,S,V,u,he,me=!1,Pe=0,g=x*3,c=x*2;i(e[0],e[1],L).multiplyScalar(ee),b.copy(e[0]).sub(L),G.copy(e[0]).add(L),j.copy(b),z.copy(G);for(let w=1;w<v;w++){P=e[w],w===v-1?$?J=e[1]:J=void 0:J=e[w+1];const O=L;if(i(Q,P,O),E.copy(O).multiplyScalar(ee),I.copy(P).sub(E),te.copy(P).add(E),S=B+ge,V=!1,J!==void 0){i(P,J,U),E.copy(U).multiplyScalar(ee),W.copy(P).sub(E),R.copy(P).add(E),u=!0,E.subVectors(J,Q),O.dot(E)<0&&(u=!1),w===1&&(me=u),E.subVectors(J,P),E.normalize();const K=Math.abs(O.dot(E));if(K>Number.EPSILON){const d=ee/K;E.multiplyScalar(-d),k.subVectors(P,Q),m.copy(k).setLength(d).add(E),Z.copy(m).negate();const h=m.length(),l=k.length();k.divideScalar(l),C.subVectors(J,P);const ne=C.length();switch(C.divideScalar(ne),k.dot(Z)<l&&C.dot(Z)<ne&&(V=!0),q.copy(m).add(P),Z.add(P),he=!1,V?u?(R.copy(Z),te.copy(Z)):(W.copy(Z),I.copy(Z)):D(),n.strokeLineJoin){case"bevel":y(u,V,S);break;case"round":T(u,V),u?_(P,I,W,S,0):_(P,R,te,S,1);break;case"miter":case"miter-clip":default:const ue=ee*n.strokeMiterLimit/h;if(ue<1)if(n.strokeLineJoin!=="miter-clip"){y(u,V,S);break}else T(u,V),u?(C.subVectors(q,I).multiplyScalar(ue).add(I),M.subVectors(q,W).multiplyScalar(ue).add(W),r(I,S,0),r(C,S,0),r(P,S,.5),r(P,S,.5),r(C,S,0),r(M,S,0),r(P,S,.5),r(M,S,0),r(W,S,0)):(C.subVectors(q,te).multiplyScalar(ue).add(te),M.subVectors(q,R).multiplyScalar(ue).add(R),r(te,S,1),r(C,S,1),r(P,S,.5),r(P,S,.5),r(C,S,1),r(M,S,1),r(P,S,.5),r(M,S,1),r(R,S,1));else V?(u?(r(G,B,1),r(b,B,0),r(q,S,0),r(G,B,1),r(q,S,0),r(Z,S,1)):(r(G,B,1),r(b,B,0),r(q,S,1),r(b,B,0),r(Z,S,0),r(q,S,1)),u?W.copy(q):R.copy(q)):u?(r(I,S,0),r(q,S,0),r(P,S,.5),r(P,S,.5),r(q,S,0),r(W,S,0)):(r(te,S,1),r(q,S,1),r(P,S,.5),r(P,S,.5),r(q,S,1),r(R,S,1)),he=!0;break}}else D()}else D();!$&&w===v-1&&N(e[0],j,z,u,!0,B),B=S,Q=P,b.copy(W),G.copy(R)}if(!$)N(P,I,te,u,!1,S);else if(V&&s){let w=q,O=Z;me!==u&&(w=Z,O=q),u?(he||me)&&(O.toArray(s,0*3),O.toArray(s,3*3),he&&w.toArray(s,1*3)):(he||!me)&&(O.toArray(s,1*3),O.toArray(s,3*3),he&&w.toArray(s,0*3))}return Pe;function i(w,O,K){return K.subVectors(O,w),K.set(-K.y,K.x).normalize()}function r(w,O,K){s&&(s[g]=w.x,s[g+1]=w.y,s[g+2]=0,a&&(a[g]=0,a[g+1]=0,a[g+2]=1),g+=3,f&&(f[c]=O,f[c+1]=K,c+=2)),Pe+=3}function _(w,O,K,d,h){L.copy(O).sub(w).normalize(),U.copy(K).sub(w).normalize();let l=Math.PI;const ne=L.dot(U);Math.abs(ne)<1&&(l=Math.abs(Math.acos(ne))),l/=t,E.copy(O);for(let ue=0,je=t-1;ue<je;ue++)k.copy(E).rotateAround(w,l),r(E,d,h),r(k,d,h),r(w,d,.5),E.copy(k);r(k,d,h),r(K,d,h),r(w,d,.5)}function D(){r(G,B,1),r(b,B,0),r(I,S,0),r(G,B,1),r(I,S,0),r(te,S,1)}function y(w,O,K){O?w?(r(G,B,1),r(b,B,0),r(I,S,0),r(G,B,1),r(I,S,0),r(Z,S,1),r(I,K,0),r(W,K,0),r(Z,K,.5)):(r(G,B,1),r(b,B,0),r(te,S,1),r(b,B,0),r(Z,S,0),r(te,S,1),r(te,K,1),r(Z,K,0),r(R,K,1)):w?(r(I,K,0),r(W,K,0),r(P,K,.5)):(r(te,K,1),r(R,K,0),r(P,K,.5))}function T(w,O){O&&(w?(r(G,B,1),r(b,B,0),r(I,S,0),r(G,B,1),r(I,S,0),r(Z,S,1),r(I,B,0),r(P,S,.5),r(Z,S,1),r(P,S,.5),r(W,B,0),r(Z,S,1)):(r(G,B,1),r(b,B,0),r(te,S,1),r(b,B,0),r(Z,S,0),r(te,S,1),r(te,B,1),r(Z,S,0),r(P,S,.5),r(P,S,.5),r(Z,S,0),r(R,B,1)))}function N(w,O,K,d,h,l){switch(n.strokeLineCap){case"round":h?_(w,K,O,l,.5):_(w,O,K,l,.5);break;case"square":if(h)L.subVectors(O,w),U.set(L.y,-L.x),E.addVectors(L,U).add(w),k.subVectors(U,L).add(w),d?(E.toArray(s,1*3),k.toArray(s,0*3),k.toArray(s,3*3)):(E.toArray(s,1*3),f[3*2+1]===1?k.toArray(s,3*3):E.toArray(s,3*3),k.toArray(s,0*3));else{L.subVectors(K,w),U.set(L.y,-L.x),E.addVectors(L,U).add(w),k.subVectors(U,L).add(w);const ne=s.length;d?(E.toArray(s,ne-1*3),k.toArray(s,ne-2*3),k.toArray(s,ne-4*3)):(k.toArray(s,ne-2*3),E.toArray(s,ne-1*3),k.toArray(s,ne-4*3))}break}}function A(w){let O=!1;for(let d=1,h=w.length-1;d<h;d++)if(w[d].distanceTo(w[d+1])<o){O=!0;break}if(!O)return w;const K=[];K.push(w[0]);for(let d=1,h=w.length-1;d<h;d++)w[d].distanceTo(w[d+1])>=o&&K.push(w[d]);return K.push(w[w.length-1]),K}}}function Yi(p,e,n,t){const o=Uo(),{CUBE_SIZE:s,FIRST_CUBE_Z:a}=n,f=8,x=24,L=.075,U=200;let E,k=[],m=[],C=[],M=[];const b=(W,R,Z,q)=>{const v=new Fo(W,W,W),$=new Jo(v),P=[new zt({color:16711680,transparent:!0,opacity:q.opacity,blending:Jt}),new zt({color:65280,transparent:!0,opacity:q.opacity,blending:Jt}),new zt({color:255,transparent:!0,opacity:q.opacity,blending:Jt}),new zt({color:65535,transparent:!0,opacity:q.opacity,blending:Jt}),new zt({color:16711935,transparent:!0,opacity:q.opacity,blending:Jt}),new zt({color:16776960,transparent:!0,opacity:q.opacity,blending:Jt})],Q=new Nt,J=$.getAttribute("position").array,ee=[];for(let S=0;S<J.length/3;S+=2)ee.push(S,S+1);const ge=Array(6).fill(null).map(()=>new ho),B=Array(6).fill(null).map(()=>[]);for(let S=0;S<ee.length/2;S++){const V=S%6;B[V].push(ee[S*2],ee[S*2+1])}return ge.forEach((S,V)=>{S.setIndex(B[V]),S.setAttribute("position",$.getAttribute("position"));const u=new gt(S,P[V]);Q.add(u)}),Q.position.z=R,Q.rotation.z=Z,Q};if((()=>{const Z=.9/(x-1);for(let ee=0;ee<x;ee++)m[ee]=new zt({transparent:!0,opacity:1-ee*Z});if(E=new Nt,!E){console.error("introGroup failed to initialize");return}for(let ee=0;ee<x;ee++){const ge=s-ee*f,B=b(ge,0,0,m[ee]),S=B.children.map(V=>V.material);M.push(S.map(V=>({material:V,originalColor:V.color.clone()}))),E.add(B)}E.position.z=a,p.add(E),k.push(E),C=m.map(ee=>ee.opacity);const q=Ie.timeline({repeat:-1});q.to(E.rotation,{x:Ke.degToRad(360),duration:12,ease:"none"},0),q.to(E.rotation,{y:Ke.degToRad(360),duration:10,ease:"none"},0),q.to(E.rotation,{z:Ke.degToRad(360),duration:14,ease:"none"},0);let v=-1,$=0;const P=L*1e3,Q=x*P,J=ee=>{const ge=ee%Q/P,B=Math.floor(ge)%x;v!==-1&&ee-$>=P&&(M[v].forEach(u=>{u.material.opacity=C[v],u.material.color.copy(u.originalColor)}),v=-1),v===-1&&B!==v&&(v=B,$=ee,M[v].forEach(V=>{V.material.opacity=1,V.material.color.set(1,1,1)})),requestAnimationFrame(J)};requestAnimationFrame(J)})(),e.value){const W=j(e.value);p.add(W)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:k};function j(W){const R=new Nt,Z=z(W);Z.position.set(0,o.isMobile?-110:-36,0),R.add(Z),o.isMobile?I(v=>{R.add(v),Ie.fromTo(Z.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const $=v.children.find(P=>P instanceof He&&P!==v.children[0]);if($){const P=$.position.y;Ie.to($.position,{y:P-15,duration:1,ease:"easeOut",onComplete:()=>{$.position.y=P},repeat:-1})}}):te(v=>{R.add(v),Ie.fromTo(Z.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const $=v.children.find(P=>P instanceof He&&P!==v.children[0]);if($){const P=$.position.y;Ie.to($.position,{y:P+3,duration:1,ease:"easeOut",onComplete:()=>{$.position.y=P},repeat:-1})}}),R.position.x=0,R.position.y=o.isMobile?-300:-240;const q=a-x*f;return R.position.z=q+U,R}function z(W){const R=new Bn(`${o.isMobile?"SWIPE":"SCROLL"} TO CONTINUE`,{font:W,size:o.isMobile?30:8,depth:0,curveSegments:12,bevelEnabled:!1});R.computeBoundingBox(),R.center();const Z=new rt({color:16777215,transparent:!0,opacity:1});return new He(R,Z)}function I(W){new Bo().load("/3D/swipe.svg",Z=>{const q=Z.paths;let v=null,$=null,P=new Nt;if(q.forEach((Q,J)=>{Bo.createShapes(Q).forEach(ge=>{const B=new Ss(ge);B.computeBoundingBox();const S=new rt({color:16777215,transparent:!0,opacity:1,side:Ht}),V=new He(B,S);V.scale.set(o.isMobile?.1:.05,o.isMobile?.1:.05,1),J===0?v=V:J===1&&($=V)})}),v&&$){P.add(v),P.add($);const J=(v.geometry.boundingBox.max.x-v.geometry.boundingBox.min.x)*v.scale.x/2;P.position.x=-J,P.rotation.x=Math.PI,W(P)}})}function te(W){new Bo().load("/3D/mouse.svg",Z=>{const q=Z.paths;let v=null,$=null,P=new Nt;if(q.forEach((Q,J)=>{Bo.createShapes(Q).forEach(ge=>{const B=new Ss(ge);B.computeBoundingBox();const S=new rt({color:16777215,transparent:!0,opacity:1,side:Ht}),V=new He(B,S);V.scale.set(o.isMobile?.1:.05,o.isMobile?.1:.05,1),J===0?v=V:J===1&&($=V)})}),v&&$){P.add(v),P.add($);const J=(v.geometry.boundingBox.max.x-v.geometry.boundingBox.min.x)*v.scale.x/2;P.position.x=-J,P.rotation.x=Math.PI,W(P)}})}}function Vi(p,e,n,t,o,s,a,f){const x=Uo(),L=nr(),{CUBE_SIZE:U,CUBE_SPACING:E,FIRST_CUBE_Z:k}=e,m=k-(n.length+1)*E,C=65535,M=16711935,b=(C>>16&255)/255,G=(C>>8&255)/255,j=(C&255)/255,z=(M>>16&255)/255,I=(M>>8&255)/255,te=(M&255)/255,W=Ke.degToRad(15),R=1e3,Z=.5,q=65280,v=80,$=1,P=15,Q=.1,J="ENTER TO LEARN MORE",ee=x.isMobile?1:.5,ge=40,B=.125,S=100,V=8,u=x.isMobile?2.5:2,he=x.isMobile?4:3.5,me=1;let Pe=[];Pe.length=0;let g=[],c=!1,i=new oi,r=new ze,_=null,D=null,y=null,T=!1,N=null;const A=new Map,w=new Map,O=new Map,K=(Y,ye,X,Se,xe,we,ke)=>{const re=new Nt;re.name="group",re.position.z=X,re.rotation.z=Se,re.userData.isActive=!1,re.userData.cubeIndex=ke;const ve=new Fo(ye,ye,ye),le=new Jo(ve),Te=new zt({color:new At(C),transparent:!0,opacity:0}),Ye=new gt(le,Te);Ye.geometry.computeBoundingSphere(),re.add(Ye);let $e="right";const Ne=ye/2,wt=()=>{const se=x.isMobile?2:1,fe=25*se,Ae=40*se,oe=new Es(Ae,75),ce=new Jo(oe),F=new zt({color:new At(C),transparent:!0,opacity:0,visible:!0}),H=new gt(ce,F);H.name="portal",H.userData.isPortal=!0,H.userData.isAnimating=!1,H.geometry.computeBoundingSphere();const De=80*se,ie=new ao(De,De),Me=new rt({visible:!1,side:Ht}),ae=new He(ie,Me);ae.userData.isPortalHitbox=!0,ae.userData.portal=H,ae.geometry.computeBoundingSphere();const _e=new Nt,pe=$*se,Ee=P*se,Ce=new ao(pe,Ee),be=(fe+Ae)/2;for(let ot=0;ot<v;ot++){const Ot=new rt({color:new At(M),transparent:!0,opacity:0,visible:!1,side:Ht}),st=new He(Ce,Ot),lt=ot/v*Math.PI*2;st.position.set(Math.cos(lt)*be,Math.sin(lt)*be,0),st.rotation.z=lt+Math.PI/2,st.userData.baseOpacity=.01,st.userData.index=ot,st.geometry.computeBoundingSphere(),_e.add(st)}H.userData.pulsesGroup=_e;const Re=2*se,qe=25;for(let ot=1;ot<qe;ot++){const Ot=new Es(Ae,75),st=new Jo(Ot),lt=Ke.lerp(.125,.1,ot/(qe-1)),oo=new zt({color:new At(C),transparent:!0,opacity:0}),_t=new gt(st,oo);_t.userData.isPortal=!0,_t.userData.maxOpacity=lt,_t.position.z=-ot*Re,_t.geometry.computeBoundingSphere(),H.add(_t)}H.userData.maxOpacity=.125;let Le=null;if(f.value){const ot=3*se,Ot=new Bn(J,{font:f.value,size:ot,depth:0,curveSegments:12,bevelEnabled:!1});Ot.computeBoundingBox(),Ot.center();const st=new rt({color:16777215,transparent:!0,opacity:0,side:Ht}),lt=new He(Ot,st);lt.visible=!1,lt.userData.isVisible=!1,lt.userData.isExploreText=!0,lt.userData.skipTextMeshes=!0;const oo=-45*se;lt.position.set(0,oo,0),lt.name="textMesh",H.add(lt),H.userData.exploreText=lt;const _t=Ot.boundingBox,Or=(_t.max.x-_t.min.x+10)*se,Lr=(_t.max.y-_t.min.y+10)*se,Br=new ao(Or,Lr),zr=new rt({transparent:!0,opacity:0,side:Ht,visible:!1});Le=new He(Br,zr),Le.position.set(0,oo,0),Le.userData.isExploreTextHitbox=!0,Le.userData.portal=H,Le.geometry.computeBoundingSphere(),Le.name="textHitbox",H.add(Le),H.userData.exploreTextHitbox=Le;const Nr=5,Wn=new Bn(Y.title,{font:f.value,size:Nr,depth:0,curveSegments:12,bevelEnabled:!1});Wn.computeBoundingBox(),Wn.center();const Hr=new rt({color:16777215,transparent:!0,opacity:0,side:Ht}),xo=new He(Wn,Hr);xo.visible=!1,xo.userData.isVisible=!1,xo.userData.isTitleText=!0,xo.userData.skipTextMeshes=!0;const Fr=x.isMobile?x.orientation==="portrait"?100:106:60;xo.position.set(0,Fr,0),H.add(xo),H.userData.titleText=xo}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const Be=new Nt;Be.name="closeGroup",Be.position.set(x.isMobile?Ae-10:Ae,Ae,2);const ut=new ao(12,x.isMobile?1:.5),Zt=new rt({color:16777215,transparent:!0,opacity:0,side:Ht}),yo=new He(ut,Zt);yo.rotation.z=Math.PI/4;const ft=new He(ut,Zt);ft.rotation.z=-Math.PI/4,Be.add(yo,ft);const nt=new ao(15*se,15*se),Yt=new rt({side:Ht,visible:!1}),io=new He(nt,Yt);switch(io.userData.isCloseHitbox=!0,io.geometry.computeBoundingSphere(),io.renderOrder=2,Be.add(io),$e){case"left":H.position.set(-Ne,0,0),H.rotation.y=Math.PI/2,ae.position.set(-Ne,0,0),ae.rotation.y=Math.PI/2,Se>=Ke.degToRad(120)&&(H.rotation.z=Math.PI),_e.children.forEach(ot=>ot.position.x+=Q);break;case"top":H.position.set(0,-Ne,0),H.rotation.x=-Math.PI/2,H.rotation.z=-Math.PI/2,ae.position.set(0,-Ne,0),ae.rotation.x=Math.PI/2,Se>=Ke.degToRad(100)&&Se>=Ke.degToRad(180)&&(H.rotation.z=Math.PI/2),_e.children.forEach(ot=>ot.position.y+=Q);break;case"right":H.position.set(Ne,0,0),H.rotation.y=-Math.PI/2,ae.position.set(Ne,0,0),ae.rotation.y=-Math.PI/2,Se>=Ke.degToRad(120)&&(H.rotation.z=Math.PI),_e.children.forEach(ot=>ot.position.x+=Q);break;case"bottom":H.position.set(0,Ne,0),H.rotation.x=Math.PI/2,H.rotation.z=-Math.PI/2,ae.position.set(0,Ne,0),ae.rotation.x=Math.PI/2,_e.children.forEach(ot=>ot.position.y+=Q);break}H.add(Be),H.userData.closeButton=Be,Be.updateMatrixWorld(!0),H.add(_e),re.add(H),re.add(ae),re.userData.closeButton=Be,H.updateMatrixWorld(!0),_e.updateMatrixWorld(!0),Be.updateMatrixWorld(!0),A.set(re,[]),w.set(re,0),O.set(re,0)},vt=se=>{(se instanceof gt||se instanceof He)&&se.geometry&&se.geometry.computeBoundingSphere(),re.add(se)};if(xe&&s.showKeyarts){switch(["left","top","right","bottom"].includes(we)?we:"left"){case"left":$e="right";break;case"top":$e="bottom";break;case"right":$e="left";break;case"bottom":$e="top";break}const fe=a.get(xe);if(fe){const Ae=new ao(ye-1,ye-1),oe=new rt({map:fe,transparent:!0,opacity:0,blending:Jt,side:Ht}),ce=new He(Ae,oe);switch(ce.userData.isLoaded=!0,we){case"left":ce.position.set(-Ne,0,0),Se>=Ke.degToRad(120)?(ce.rotation.y=Math.PI/2,ce.rotation.z=-Math.PI):ce.rotation.y=Math.PI/2;break;case"top":ce.position.set(0,-Ne,0),ce.rotation.x=-Math.PI/2,ce.rotation.z=-Math.PI/2;break;case"right":ce.position.set(Ne,0,0),Se>=Ke.degToRad(120)?(ce.rotation.y=-Math.PI/2,ce.rotation.z=-Math.PI):ce.rotation.y=-Math.PI/2;break;case"bottom":ce.position.set(0,Ne,0),Se>=Ke.degToRad(180)?Se>=Ke.degToRad(220)?(ce.rotation.x=Math.PI/2,ce.rotation.z=Math.PI/2):(ce.rotation.x=-Math.PI/2,ce.rotation.z=Math.PI/2):(ce.rotation.x=Math.PI/2,ce.rotation.z=-Math.PI/2);break}ce.geometry.computeBoundingSphere(),vt(ce),wt()}else console.warn(`Keyart texture not preloaded for ${Y.title}: ${xe}`),wt()}else wt();re.userData.portalLocation=$e;{const se=(De,ie,Me,ae)=>{const _e=new ao(ye-1,ye-1),pe={map:De,transparent:!0,opacity:0,blending:Jt,side:Ht,depthWrite:!1};ae&&(pe.color=ae);const Ee=new rt(pe),Ce=new He(_e,Ee);Ce.position.copy(ie),Me.x&&(Ce.rotation.x=Me.x),Me.y&&(Ce.rotation.y=Me.y),Ce.userData.isGridPlane=!0,Ce.geometry.computeBoundingSphere(),vt(Ce)},fe=a.get(t),Ae=a.get(o),oe=["left","top","right","bottom"],F=[xe&&s.showKeyarts?we||"left":null,$e].filter(Boolean),H=oe.filter(De=>!F.includes(De));if(fe)switch(se(fe,new Xe(0,0,-ye/2-1),{y:0}),se(fe,new Xe(0,0,ye/2+1),{y:0},new At(16744448)),H[0]){case"left":se(fe,new Xe(-Ne,0,0),{y:-Math.PI/2},new At(255));break;case"top":se(fe,new Xe(0,Ne,0),{x:Math.PI/2},new At(255));break;case"right":se(fe,new Xe(Ne,0,0),{y:Math.PI/2},new At(255));break;case"bottom":se(fe,new Xe(0,-Ne,0),{x:-Math.PI/2},new At(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(Ae)switch(H[1]){case"left":se(Ae,new Xe(-Ne,0,0),{y:-Math.PI/2});break;case"top":se(Ae,new Xe(0,Ne,0),{x:Math.PI/2});break;case"right":se(Ae,new Xe(Ne,0,0),{y:Math.PI/2});break;case"bottom":se(Ae,new Xe(0,-Ne,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}re.children.forEach(se=>{se.updateMatrixWorld(!0),se instanceof Nt&&se.children.forEach(fe=>{fe.updateMatrixWorld(!0)})}),re.updateMatrixWorld(!0);const ht=new rr().setFromObject(re),It=new ir;return ht.getBoundingSphere(It),re.boundingSphere=It,re},d=new sr,h=(Y,ye,X,Se,xe)=>{if(!f.value){console.warn("Font not available; skipping text creation for:",Y);const ht=new ho,It=new rt({visible:!1});return new He(ht,It)}const we=new Bn(Y,{font:f.value,size:xe,depth:0,curveSegments:12,bevelEnabled:!1});we.computeBoundingBox(),we.center();const ke=new rt({color:16777215,transparent:!0,opacity:0,side:Ht}),re=new He(we,ke);re.position.set(ye,X,Se);const ve=we.boundingBox,le=ve.max.x-ve.min.x,Te=ve.max.y-ve.min.y,Ye=le+8,$e=Te+4,Ne=new ao(Ye,$e),wt=new rt({color:0,transparent:!0,opacity:0,side:Ht}),vt=new He(Ne,wt);return vt.position.set(ye,X,Se-1),p.add(vt),p.add(re),re.userData.backgroundPlane=vt,re},l=()=>{const Y=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let ye=0;Y.forEach((X,Se)=>{const xe=k-(Se+1)*E,we=(Se+1)*W,ke=K(X,U,xe,we,X.keyart,X.keyartLocation,ye);p.add(ke),Pe.push(ke),ye++,h(X.title,0,X.size-15,k+90-(Se+1)*E,X.size)}),p.traverse(X=>{var Se;X instanceof He&&((Se=X.geometry)==null?void 0:Se.type)==="TextGeometry"&&!X.userData.skipTextMeshes&&g.push(X)})},ne=()=>c?Promise.resolve({projectCubes:Pe,updateCubeColors:Ve,maxZ:m}):(l(),c=!0,Promise.resolve({projectCubes:Pe,updateCubeColors:Ve,maxZ:m})),ue=Y=>{if(Y.userData.isAnimating)return;Y.userData.isAnimating=!0;const ye=Y.userData.pulsesGroup;if(!ye){console.warn("Pulses group not found in portal.userData");return}const X=ye.children,Se=X.length,xe=Ie.timeline({repeat:-1,defaults:{ease:"none"}}),we={value:0};xe.to(we,{value:1,duration:1.5,onUpdate:()=>{X.forEach(re=>{const ve=re.material;if(ve.visible){const le=(re.userData.index/Se+we.value)%1,Ye=(Math.sin(le*Math.PI*2)+1)/2;ve.opacity=.01+(1-.01)*Math.pow(Ye,4)}})}}),Y.userData.animationTimeline=xe},je=Y=>{if(!Y.userData.isAnimating)return;Y.userData.isAnimating=!1;const ye=Y.userData.pulsesGroup;if(!ye){console.warn("Pulses group not found in portal.userData");return}Y.userData.animationTimeline&&(Y.userData.animationTimeline.kill(),delete Y.userData.animationTimeline),ye.children.forEach(X=>{const Se=X.material;Se.opacity=0})},Ze=(Y,ye)=>{let X;const Se=(O.get(Y)||0)+1;O.set(Y,Se),Se%V===0?X=new ni(u,he,12,1):X=new Fo(ee,ee,ee);const xe=new rt({color:16777215,transparent:!0,opacity:0}),we=new He(X,xe);we.position.set(0,0,0);const ke=ye.position.clone(),re=ke.clone().normalize(),ve=ke.length()+S;if(Se%V===0){const Te=we.position.clone().add(re);we.lookAt(Te),we.rotateX(Math.PI/2)}Y.add(we),Ie.to(xe,{opacity:.5,duration:me,ease:"power2.in",overwrite:"auto"});const le=A.get(Y)||[];le.push({mesh:we,direction:re,distanceTraveled:0,totalDistance:ve}),A.set(Y,le)},Ge=Y=>{(A.get(Y)||[]).forEach(X=>{Y.remove(X.mesh),X.mesh.geometry.dispose(),X.mesh.material.dispose()}),A.set(Y,[])},Ve=Y=>{d.setFromProjectionMatrix(Y.projectionMatrix.clone().multiply(Y.matrixWorldInverse));const ye=Y.position.z;Pe.forEach((X,Se)=>{const xe=X.boundingSphere;if(xe){const ve=xe.clone();if(ve.radius*=1.5,!d.intersectsSphere(ve))return}else console.warn(`Cube ${Se} has no boundingSphere`);const we=X.position.z,ke=Math.abs(ye-we);let re=0;ke<=R&&(re=1-ke/R),X.userData.isActive=re>=Z,X.children.forEach(ve=>{if(ve instanceof gt&&!ve.userData.isPortal&&!ve.userData.isPortalHitbox){const le=ve.material;if(ke<=R){const Te=Ke.lerp(b,z,re),Ye=Ke.lerp(G,I,re),$e=Ke.lerp(j,te,re);le.color.set(Te,Ye,$e),le.opacity=Math.min(1,re*2)}else le.opacity=0}else if(ve instanceof gt&&ve.userData.isPortal){ve.children.forEach(Te=>{if(Te instanceof He&&Te.userData.isExploreText){const Ye=Te.material;if(Te===ve.userData.titleText&&T)return;if(ke<=R){const $e=1-ke/R;Ye.opacity=Math.min(1,$e*2),Te.visible=!0}else Ye.opacity=0,Te.visible=!1}});const le=ve.userData.pulsesGroup;re>.1?le&&le.children.forEach(Te=>{Te instanceof He&&(Te.material.visible=!0,!ve.userData.animationStarted&&s.showPortalPulses&&(ue(ve),ve.userData.animationStarted=!0))}):re<=.1&&ve.userData.animationStarted&&(le&&le.children.forEach(Te=>{Te instanceof He&&(Te.material.visible=!1)}),je(ve),delete ve.userData.animationStarted)}else if(ve instanceof He&&!ve.userData.isPortalHitbox&&!ve.userData.isCloseHitbox){const le=ve.material;if(ve.userData.isLoaded||ve.userData.isGridPlane)if(ke<=R){const Te=1-ke/R;le.opacity=Math.min(.8,Te*2),ve.visible=!0}else le.opacity=0,ve.visible=!1}})}),g.forEach(X=>{if(!d.intersectsObject(X))return;const Se=X.material,xe=X.userData.backgroundPlane,we=xe==null?void 0:xe.material,ke=X.position.z,re=Math.abs(ye-ke+120);if(T){Se.opacity=0,we&&(we.opacity=0);return}if(re<=R){const ve=1-re/R,le=Math.min(1,ve*2);Se.opacity=le,we&&(we.opacity=le*.8)}else Se.opacity=0,we&&(we.opacity=0)})},xt=(Y,ye)=>{const X=performance.now()/1e3,Se=Y.position.z;Pe.forEach(xe=>{const we=xe.position.z;if(Math.abs(Se-we+90)<=R&&!T){const re=w.get(xe)||0;if(X-re>=B){const Te=xe.children.find(Ye=>Ye instanceof gt&&Ye.userData.isPortal);Te&&(Ze(xe,Te),w.set(xe,X))}const le=(A.get(xe)||[]).filter(Te=>{if(Te.distanceTraveled+=ge*ye,Te.mesh.position.copy(Te.direction.clone().multiplyScalar(Te.distanceTraveled)),(Te.totalDistance-Te.distanceTraveled)/ge<=me&&!Te.isFadingOut){Te.isFadingOut=!0;const Ne=Te.mesh.material;Ie.to(Ne,{opacity:0,duration:me,ease:"power2.out",overwrite:"auto"})}return Te.distanceTraveled>=Te.totalDistance?(xe.remove(Te.mesh),Te.mesh.geometry.dispose(),Te.mesh.material.dispose(),!1):!0});A.set(xe,le)}else Ge(xe)})},Je=Y=>{const ye=[Y,...Y.children.filter(xe=>xe instanceof gt&&xe.userData.isPortal)],X=2,Se=.1;ye.forEach((xe,we)=>{const ke=xe.material;ke.opacity=xe.userData.maxOpacity;const re=Ie.timeline({repeat:-1,delay:we*Se});re.to(ke,{opacity:0,duration:X/2,ease:"power2.inOut"}).to(ke,{opacity:xe.userData.maxOpacity,duration:X/2,ease:"power2.inOut"}),xe.userData.marqueeTimeline=re})},tt=Y=>{const ye=[Y,...Y.children.filter(X=>X instanceof gt&&X.userData.isPortal)];ye.forEach(X=>{X.userData.marqueeTimeline&&(X.userData.marqueeTimeline.kill(),delete X.userData.marqueeTimeline)}),Y.userData.ringExpandTimeline&&(Y.userData.ringExpandTimeline.kill(),delete Y.userData.ringExpandTimeline),ye.forEach((X,Se)=>{const xe=X.material;Ie.killTweensOf(X.position),Ie.killTweensOf(xe),X.position.z=-Se*2,xe.opacity=0})};return{getInitializedData:ne,updateCubeColors:Ve,setupInteractivity:(Y,ye,X,Se,xe)=>{N=Se;let we=null,ke=null,re=null,ve=!1,le=!1,Te=!1,Ye=!1,$e=!1;const Ne=F=>{T&&(we=F.touches[0].clientY,ke=ke??window.scrollY,ve=!0)},wt=F=>{if(!T||!re||!we||Ye)return;const De=F.touches[0].clientY-we;x.isMobile&&De<-50&&!le&&(F.cancelable&&F.preventDefault(),It(),we=null)},vt=F=>{we=null,ve=!1,Te=!0,Ie.delayedCall(.5,()=>{Te=!1})},ht=F=>{if(ve||le||Te||Ye){F.preventDefault(),F.stopPropagation(),ke!==null&&(window.scrollTo(0,ke),Ie.to(window,{scrollTo:{y:ke},duration:0}));return}if(!T||!re||!D||!y)return;if(x.isMobile){F.preventDefault(),F.stopPropagation();return}let H=0;if(F instanceof WheelEvent?H=F.deltaY:H=window.scrollY-(ke||0),F.preventDefault(),F.stopPropagation(),H>0){window.scrollTo(0,ke);return}H<0&&It()},It=()=>{const F=re,H=y?y.clone():new Xe(0,0,m),De=(D==null?void 0:D.z)??Y.position.z,ie=F==null?void 0:F.parent,Me=F?Pe.indexOf(ie):-1;if(Ye=!0,F){tt(F);const pe=F.userData.titleText;if(pe){const Ee=pe.material;Ie.to(Ee,{opacity:0,duration:.5,ease:"power2.out",onComplete:()=>{pe.visible=!1}})}if(F.userData.closeButton){const Ee=F.userData.closeButton,Ce=Ee.children.filter(be=>be instanceof He&&!be.userData.isCloseHitbox).map(be=>be.material);Ce.length>0&&Ie.to(Ce,{opacity:0,duration:.5,ease:"power2.out",onComplete:()=>{Ee.visible=!1}})}}Ie.to(Y.position,{x:(D==null?void 0:D.x)??Y.position.x,y:(D==null?void 0:D.y)??Y.position.y,z:De,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const pe=g[Me];if(Me!==-1&&pe){const Ee=pe.material,Ce=pe.userData.backgroundPlane,be=Math.abs(Y.position.z-pe.position.z+120),Re=be<=R?Math.min(1,(1-be/R)*2):0;Ie.to(Ee,{opacity:Re,duration:.5,ease:"power2.in"}),Ce&&Ie.to(Ce.material,{opacity:Re*.8,duration:.5,ease:"power2.in"})}},onUpdate:()=>{const pe=_e.progress,Ee=Ke.lerp(ae.x,H.x,pe),Ce=Ke.lerp(ae.y,H.y,pe),be=Ke.lerp(ae.z,H.z,pe);Y.lookAt(Ee,Ce,be),Y.updateMatrixWorld(!0)},onComplete:()=>{Y.lookAt(H),T=!1,re=null,document.body.classList.remove("no-scrollbar"),x.isMobile&&(document.body.style.overflow=""),N&&N(!1),ke=null,D=null,y=null,Y.userData.lockedLookAt=null,Ye=!1,Pe.forEach(pe=>{Math.abs(Y.position.z-pe.position.z+90)<=R&&w.set(pe,0)})}});const ae=Y.userData.lockedLookAt?Y.userData.lockedLookAt.clone():Y.getWorldDirection(new Xe).multiplyScalar(1e3).add(Y.position),_e={progress:0};Ie.to(_e,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},se=(F,H=!0)=>{const De=[F,...F.children.filter(ae=>ae instanceof gt&&ae.userData.isPortal)],ie=H?25:2,Me=Ie.timeline({onComplete:()=>{H&&De[0]===F&&Je(F)}});De.forEach((ae,_e)=>{let pe=-_e*ie;(F.position.y>0&&F.rotation.x===-Math.PI/2||F.position.y<0&&F.rotation.x===Math.PI/2)&&(pe=_e*ie);const Ee=H?ae.userData.maxOpacity:0;Me.to(ae.position,{z:pe,duration:1,ease:"power3.out",delay:.5},0),Me.to(ae.material,{opacity:Ee,duration:1,ease:"power3.out",delay:.5},0)}),F.userData.ringExpandTimeline=Me},fe=F=>{r.x=F.clientX/window.innerWidth*2-1,r.y=-(F.clientY/window.innerHeight)*2+1,i.setFromCamera(r,Y),Y.userData.lockedLookAt&&(Y.lookAt(Y.userData.lockedLookAt),Y.updateMatrixWorld(!0)),Pe.forEach(ie=>{ie.userData.lockedPosition&&(ie.position.equals(ie.userData.lockedPosition)||ie.position.copy(ie.userData.lockedPosition)),ie.updateMatrixWorld(!0),ie.children.forEach(Me=>Me.updateMatrixWorld(!0))});const H=Pe.flatMap(ie=>{const Me=[];return!T&&ie.userData.isActive&&ie.children.forEach(ae=>{ae instanceof He&&(ae.userData.isPortalHitbox||ae.userData.isExploreTextHitbox)&&Me.push(ae)}),T&&re&&ie===re.parent&&ie.children.forEach(ae=>{if(ae instanceof He&&ae.userData.isPortalHitbox&&Me.push(ae),ae instanceof gt&&ae.userData.isPortal){const _e=ae;_e.children.forEach(pe=>{pe instanceof He&&pe.userData.isExploreTextHitbox&&Me.push(pe),pe instanceof Nt&&pe===_e.userData.closeButton&&pe.children.forEach(Ee=>{Ee instanceof He&&Ee.userData.isCloseHitbox&&Me.push(Ee)})})}}),Me}),De=i.intersectObjects(H);if(De.length>0){const ie=De[0].object;if(ie.userData.isPortalHitbox||ie.userData.isExploreTextHitbox){const Me=ie.userData.portal;_!==Me&&(_&&[_,..._.children.filter(pe=>pe instanceof gt&&pe.userData.isPortal)].forEach(pe=>{const Ee=pe.material;Ie.to(Ee.color,{r:(C>>16&255)/255,g:(C>>8&255)/255,b:(C&255)/255,duration:.5})}),_=Me,[_,..._.children.filter(_e=>_e instanceof gt&&_e.userData.isPortal)].forEach(_e=>{const pe=_e.material;Ie.to(pe.color,{r:(q>>16&255)/255,g:(q>>8&255)/255,b:(q&255)/255,duration:.5})})),ye.style.cursor="pointer"}else if(ie.userData.isCloseHitbox&&T){if(!$e){$e=!0;const Me=ie.parent;Ie.to(Me.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"})}ye.style.cursor="pointer"}}else{if(_&&([_,..._.children.filter(Me=>Me instanceof gt&&Me.userData.isPortal)].forEach(Me=>{const ae=Me.material;Ie.to(ae.color,{r:(C>>16&255)/255,g:(C>>8&255)/255,b:(C&255)/255,duration:.5})}),_=null),T&&re&&$e){const ie=re.userData.closeButton;ie&&($e=!1,Ie.to(ie.rotation,{z:0,duration:.3,ease:"power2.inOut"}))}ye.style.cursor="auto"}},Ae=F=>{if(Ye)return;r.x=F.clientX/window.innerWidth*2-1,r.y=-(F.clientY/window.innerHeight)*2+1,i.setFromCamera(r,Y);const H=Pe.flatMap(Ce=>{const be=[];return T&&re&&Ce===re.parent&&Ce.children.forEach(Re=>{if(Re instanceof gt&&Re.userData.isPortal){const qe=Re;qe.children.forEach(Le=>{Le instanceof Nt&&Le===qe.userData.closeButton&&Le.children.forEach(Be=>{Be instanceof He&&Be.userData.isCloseHitbox&&be.push(Be)})})}}),be}),De=Pe.flatMap(Ce=>{const be=[];return!T&&Ce.userData.isActive&&Ce.children.forEach(Re=>{Re instanceof He&&(Re.userData.isPortalHitbox||Re.userData.isExploreTextHitbox)&&be.push(Re)}),T&&re&&Ce===re.parent&&Ce.children.forEach(Re=>{Re instanceof He&&Re.userData.isPortalHitbox&&be.push(Re),Re instanceof gt&&Re.userData.isPortal&&Re.children.forEach(qe=>{qe instanceof He&&qe.userData.isExploreTextHitbox&&be.push(qe)})}),be});let ie=i.intersectObjects(H);for(const Ce of ie)if(Ce.object.userData.isCloseHitbox){It();return}if(ie=i.intersectObjects(De),ie.length===0)return;const ae=ie[0].object.userData.portal,_e=ae.parent,pe=Pe.indexOf(_e),Ee=n[pe];if(T&&ae===re){let Ce=new Xe;const be=e.CUBE_SIZE/2;ae.position.x===be?Ce.set(-1,0,0):ae.position.x===-be?Ce.set(1,0,0):ae.position.y===be?Ce.set(0,-1,0):ae.position.y===-be&&Ce.set(0,1,0),Ce.applyQuaternion(_e.getWorldQuaternion(new si)).normalize();const qe=Y.position.clone().clone().add(Ce.clone().multiplyScalar(-675)),Le=Ce.clone().multiplyScalar(-1e3),Be=qe.clone().add(Le);Ye=!0,Ie.to(Y.position,{x:qe.x,y:qe.y,z:qe.z,duration:1,ease:"power2.in",onUpdate:()=>Y.lookAt(Be),onStart:()=>{Ie.to(X.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{Ee!=null&&Ee.slug&&(L.setScrollPosition(window.scrollY),Gr.visit(route("project.show",{project:Ee.slug}),{preserveScroll:!1})),Ye=!1}})}else if(!T){D||(D=Y.position.clone(),y=new Xe(0,0,m)),N&&Se(!0,D,y);const Ce=ae.getWorldPosition(new Xe);le=!0,Ye=!0,ke=window.scrollY,Ie.to(Y.position,{x:0,y:0,z:_e.getWorldPosition(new Xe).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{T=!0,re=ae,document.body.classList.add("no-scrollbar"),x.isMobile&&(document.body.style.overflow="hidden"),_e.userData.lockedPosition=_e.position.clone(),Ge(_e);const be=g[pe];if(be){const qe=be.material,Le=be.userData.backgroundPlane;Ie.to(qe,{opacity:0,duration:.5,ease:"power2.out"}),Le&&Ie.to(Le.material,{opacity:0,duration:.5,ease:"power2.out"})}const Re=ae.userData.titleText;if(Re){Re.visible=!0;const qe=Re.material;Ie.to(qe,{opacity:1,duration:1,ease:"power2.in",delay:.5})}if(ae.userData.closeButton){const qe=ae.userData.closeButton;qe.visible=!0;const Le=qe.children.filter(Be=>Be instanceof He&&!Be.userData.isCloseHitbox).map(Be=>Be.material);Le.length>0&&Ie.to(Le,{opacity:1,duration:.5,ease:"power2.in",delay:.5})}},onComplete:()=>{se(ae,!0),le=!1,Ye=!1,Y.userData.lockedLookAt=Ce.clone()}}),Ie.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const be=this.progress(),Re=Y.getWorldDirection(new Xe).multiplyScalar(1e3).add(Y.position),qe=Ke.lerp(Re.x,Ce.x,be),Le=Ke.lerp(Re.y,Ce.y,be),Be=Ke.lerp(Re.z,Ce.z,be);Y.lookAt(qe,Le,Be)},onComplete:()=>{Y.lookAt(Ce.x,Ce.y,Ce.z),Y.updateMatrixWorld(!0)}})}};ye.addEventListener("mousemove",fe),ye.addEventListener("click",Ae),ye.addEventListener("touchstart",Ne,{passive:!1}),ye.addEventListener("touchmove",wt,{passive:!1}),ye.addEventListener("touchend",vt,{passive:!0}),window.addEventListener("wheel",ht,{passive:!1}),window.addEventListener("scroll",ht,{passive:!1});const oe=()=>{A.forEach((F,H)=>{F.forEach(De=>{H.remove(De.mesh),De.mesh.geometry.dispose(),De.mesh.material.dispose()})}),A.clear(),w.clear(),O.clear()},ce=()=>{ye.removeEventListener("mousemove",fe),ye.removeEventListener("click",Ae),ye.removeEventListener("touchstart",Ne),ye.removeEventListener("touchmove",wt),ye.removeEventListener("touchend",vt),window.removeEventListener("wheel",ht),window.removeEventListener("scroll",ht),re&&tt(re),x.isMobile&&(document.body.style.overflow="")};return()=>{ce(),oe()}},updateClickHereParticles:xt}}function Xi(p,e,n,t){const o=Uo(),s=100,a=100,f=300,x=3355443,L=o.isMobile?24:32,U=-600,E=-500,k=500,m=o.isMobile?5:10,C=.05,M=1,b=o.isMobile?6:4,G=o.isMobile?4:6,j=100,z=-450,I=60,te=n-k,W=Math.abs(E-te),R=Math.ceil(W/s),Z=()=>{const u=new Nt;let he=null,me=null;const Pe=[],g=[],c=[],i=[],r=[];{const _=new Fo(s,s,s),D=new Jo(_),y=L*R,T=new ri;T.copy(D),T.instanceCount=y;const N=new zt({color:x,transparent:!0,fog:!0,vertexColors:!0}),A=new Float32Array(y*3),w=new Float32Array(y*3),O=new Float32Array(y*3),K=L*s,d=-K/2+s/2,h=E;for(let X=0;X<L;X++){const Se=q(X);for(let xe=0;xe<R;xe++){const we=X*R+xe,ke=d+X*s,re=h-xe*s,ve=Ke.randFloat(a,f),le=ve/s,Te=U+ve/2;A[we*3]=ke,A[we*3+1]=Te,A[we*3+2]=re,w[we*3]=1,w[we*3+1]=le,w[we*3+2]=1,O[we*3]=Se,O[we*3+1]=Se,O[we*3+2]=Se}}T.setAttribute("instancePosition",new Vn(A,3)),T.setAttribute("instanceScale",new Vn(w,3)),T.setAttribute("color",new Vn(O,3)),N.onBeforeCompile=X=>{X.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${X.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},he=new gt(T,N);const l=-K/2,ne=K/2,ue=U,je=U+f,Ze=te,Ge=E;T.boundingBox=new rr(new Xe(l,ue,Ze),new Xe(ne,je,Ge));const Ve=(l+ne)/2,xt=(ue+je)/2,Je=(Ze+Ge)/2,tt=ne-l,at=je-ue,Y=Ge-Ze,ye=Math.sqrt(tt*tt+at*at+Y*Y)/2;T.boundingSphere=new ir(new Xe(Ve,xt,Je),ye),u.add(he)}{me=new Nt;const _=L*s/(G-1),D=-(L*s)/2;for(let T=0;T<G;T++){let A=D+T*_,w=E;const O=[new Xe(A,z,w)];let K=0;for(;w>te;){const d=w===E?Ke.randFloat(300,800):Math.min(Ke.randFloat(300,800),Math.abs(w-te));if(w-=d,O.push(new Xe(A,z,w)),K+=d,w<=te){O[O.length-1].z=te;break}const h=Math.random()<.5?-1:1,l=Ke.randFloat(100,300);A+=h*l,O.push(new Xe(A,z,w)),K+=l}g.push({points:O,totalLength:K})}const y=new Fo(b,b,b);for(let T=0;T<G;T++){const N=g[T],A=N.totalLength,w=A/I;for(let O=0;O<I;O++){const K=new rt({color:16711680,fog:!0}),d=new He(y,K),h=O*w;let l=h;for(let ne=0;ne<N.points.length-1;ne++){const ue=N.points[ne],je=N.points[ne+1],Ze=ue.distanceTo(je);if(l<=Ze){const Ge=l/Ze;d.position.lerpVectors(ue,je,Ge);break}l-=Ze}Pe.push(d),c.push(h),i.push(T),r.push(1),me.add(d)}for(let O=0;O<I;O++){const K=new rt({color:16777215,fog:!0}),d=new He(y,K),h=A-(O*w+w/2);let l=A-h;const ne=[...N.points].reverse();for(let ue=0;ue<ne.length-1;ue++){const je=ne[ue],Ze=ne[ue+1],Ge=je.distanceTo(Ze);if(l<=Ge){const Ve=l/Ge;d.position.lerpVectors(je,Ze,Ve);break}l-=Ge}Pe.push(d),c.push(h),i.push(T),r.push(-1),me.add(d)}}e.add(me)}return e.add(u),{cityGroup:u,instancedLines:he,particleGroup:me,particles:Pe,paths:g,particleDistances:c,particlePaths:i,particleDirections:r}},q=u=>{if(u<m){const he=(M-C)/(m-1);return C+u*he}else if(u>=L-m){const he=L-1-u,me=(M-C)/(m-1);return C+he*me}return M},{cityGroup:v,instancedLines:$,particleGroup:P,particles:Q,paths:J,particleDistances:ee,particlePaths:ge,particleDirections:B}=Z();return{cityGroup:v,buildingLines:$?[$]:[],updateParticles:u=>{const he=j*u;for(let me=0;me<Q.length;me++){const Pe=B[me],g=ge[me],c=J[g],i=c.totalLength;ee[me]+=he*Pe,Pe===1?(ee[me]=ee[me]%i,ee[me]<0&&(ee[me]+=i)):ee[me]=(ee[me]+i)%i;const r=ee[me],_=Pe===1?c.points:[...c.points].reverse();let D=Pe===1?r:i-r;for(let y=0;y<_.length-1;y++){const T=_[y],N=_[y+1],A=T.distanceTo(N);if(D<=A){const w=D/A;Q[me].position.lerpVectors(T,N,w);break}D-=A}}},dispose:()=>{$&&(v.remove($),$.geometry.dispose(),$.material.dispose()),P&&(e.remove(P),P.children.forEach(u=>{u.geometry.dispose(),u.material.dispose()})),e.remove(v)}}}Ie.registerPlugin(Oe);function ji(p,e,n,t,o,s,a={},f,x){const L=Uo(),{CUBE_SPACING:U,FIRST_CUBE_Z:E}=s,k=(t==null?void 0:t.length)||0,m=E-(k+1)*U;let C=!1,M=!1;const b=L.isMobile?(Math.abs(m)+(k-1)*U)*.7:Math.abs(m)+(k-1)*U;let G=Ie.timeline();Oe.config({ignoreMobileResize:!0});{let I=0;const te=16;G=Ie.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${b}`,scrub:a.scrub,pin:!0,onUpdate:W=>{const R=performance.now();if(R-I>=te){if(!C){const Z=W.progress,q=Ke.lerp(0,m,Z);e.position.set(0,0,q),e.lookAt(0,0,m)}o(e),I=R}x&&x.update()},onRefresh:()=>{e.updateProjectionMatrix()}}}),G.fromTo(e.position,{z:0},{z:m,duration:1,ease:"none"},0)}return{setReverting:I=>{C=I},timeline:G,isScrollTriggerActive:()=>M}}function qi(p,e,n){const t=Uo(),o=t.isMobile?25:20,s=t.isMobile?600:1800,a=4e3,f=-1e3,x=n-1e3,L=1e3,U=n,E=150,k=-500,m=n,C=new ho,M=new Float32Array(s*3),b=new Float32Array(s),G=new Float32Array(s);let j=0;for(;j<s;){const Z=(Math.random()-.5)*a,q=(Math.random()-.5)*a,v=f+Math.random()*(x-f),$=v>U&&Math.abs(Z)<L&&Math.abs(q)<L,P=Math.abs(Z)<E&&Math.abs(q)<E&&v>m&&v<k;if(!$&&!P){const Q=j*3;M[Q]=Z,M[Q+1]=q,M[Q+2]=v;const J=.1+Math.random()*(.7-.1);b[j]=J,G[j]=J,j++}}C.setAttribute("position",new As(M,3)),C.setAttribute("opacity",new As(G,1));const z=new vo({uniforms:{color:{value:new At(1,1,1)},size:{value:o}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),I=new ii(C,z);I.frustumCulled=!0,p.add(I);const te={values:G.slice()},W=C.attributes.opacity;return Ie.to(te,{duration:2,onUpdate:()=>{const Z=Date.now()*.001;for(let q=0;q<s;q++)te.values[q]=b[q]*(.05+.95*Math.abs(Math.sin(Z+q*.01)));W.array.set(te.values),W.needsUpdate=!0},repeat:-1,ease:"none"}),new sr,{dispose:()=>{Ie.killTweensOf(G),p.remove(I),C.dispose(),z.dispose()}}}function Zi(p,e){const t=e-1500,o=100,s=2,a=64,f=1e3,x=a*3,L=[4,4.5,5],U=6;let E,k,m,C,M,b;const G=[],j=[[],[],[]],z=[[],[],[]],I=[[],[],[]];let te=[0,0,0];const W=()=>{const v=0-t,$=[];for(let V=0;V<o;V++){const u=V/(o-1),he=0-u*v,me=u*5*2*Math.PI,Pe=90*(.8+.2*Math.sin(me*2)),g=new Xe(Pe*Math.cos(me),Pe*Math.sin(me),he);(isNaN(g.x)||isNaN(g.y)||isNaN(g.z))&&console.error("NaN in chaserPath points",{t:u,z:he,projectMaxZ:e}),$.push(g)}E=new Xn($);const P=new ho().setFromPoints(E.getPoints(200));C=new jn(P,new zt({color:16711935,linewidth:2,visible:!1})),p.add(C);const Q=[];for(let V=0;V<o;V++){const u=V/(o-1),he=0-u*v,me=u*3*2*Math.PI,Pe=60*(.8+.2*Math.sin(me*4)),g=new Xe(Pe*Math.cos(me),Pe*Math.sin(me),he);(isNaN(g.x)||isNaN(g.y)||isNaN(g.z))&&console.error("NaN in chaserPath2 points",{t:u,z:he,projectMaxZ:e}),Q.push(g)}k=new Xn(Q);const J=new ho().setFromPoints(k.getPoints(200));M=new jn(J,new zt({color:65535,linewidth:2,visible:!1})),p.add(M);const ee=[];for(let V=0;V<o;V++){const u=V/(o-1),he=0-u*v,me=u*7*2*Math.PI,Pe=100,g=90,c=.1*Math.sin(me),i=new Xe(Pe*(1+c)*Math.cos(me),g*(1-c)*Math.sin(me),he);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:u,z:he,projectMaxZ:e}),ee.push(i)}m=new Xn(ee);const ge=new ho().setFromPoints(m.getPoints(200));b=new jn(ge,new zt({color:16776960,linewidth:2,visible:!1})),p.add(b);const B=[16711680,65280,255],S=new Fo(s,s,s);S.attributes.color&&delete S.attributes.color;for(let V=0;V<3;V++){const u=new Nt;u.opacity=1,u.renderOrder=1,G[V]=u,p.add(u);for(let he=0;he<x;he++){const me=new rt({color:B[V],transparent:!0,opacity:0,blending:ai,fog:!0,depthWrite:!1}),Pe=new He(S,me);Pe.renderOrder=1,Pe.visible=!1,u.add(Pe),j[V][he]=Pe,z[V][he]=0,I[V][he]=!1}}},R=v=>{const $=[E,k,m][v],P=$.getLength(),Q=I[v].filter(ee=>ee).length;if(x-Q>=a){let ee=0;for(let ge=0;ge<a;ge++){const B=I[v].findIndex(g=>!g);if(B===-1){console.warn(`No available chasers for path ${v}, emitted ${ee}/${a}`);break}const S=ee/(a-1),V=.05+(1-.05)*Math.pow(S,3),u=new rt({color:[16711680,65280,255][v],transparent:!0,opacity:V,blending:Jt,fog:!0,depthWrite:!1});j[v][B].material=u,j[v][B].visible=!0;const he=ee*U;z[v][B]=he,I[v][B]=!0;const me=he/P,Pe=$.getPointAt(me);j[v][B].position.copy(Pe),ee++}}},Z=v=>{const $=performance.now()/1e3,P=[E,k,m];for(let Q=0;Q<3;Q++){$-te[Q]>=L[Q]&&(R(Q),te[Q]=$);const J=P[Q],ee=J.getLength(),ge=f*v;for(let B=0;B<x;B++)if(I[Q][B]){z[Q][B]+=ge;const S=z[Q][B]/ee;if(S>=1)j[Q][B].visible=!1,I[Q][B]=!1,z[Q][B]=0;else{const V=J.getPointAt(S);j[Q][B].position.copy(V)}}}};return W(),{chaserPath:E,chaserPath2:k,chaserPath3:m,updateChasers:Z,dispose:()=>{p.remove(C),p.remove(M),p.remove(b),C.geometry.dispose(),C.material.dispose(),M.geometry.dispose(),M.material.dispose(),b.geometry.dispose(),b.material.dispose(),G.forEach(v=>{v.children.forEach($=>{$.geometry.dispose(),$.material.dispose()}),p.remove(v)})}}}class $i extends tr{constructor(e){super(e)}load(e,n,t,o){const s=this,a=new or(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(f){const x=s.parse(JSON.parse(f));n&&n(x)},t,o)}parse(e){return new Qi(e)}}class Qi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=Ki(e,n,this.data);for(let s=0,a=o.length;s<a;s++)t.push(...o[s].toShapes());return t}}function Ki(p,e,n){const t=Array.from(p),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,a=[];let f=0,x=0;for(let L=0;L<t.length;L++){const U=t[L];if(U===`
`)f=0,x-=s;else{const E=Ji(U,o,f,x,n);f+=E.offsetX,a.push(E.path)}}return a}function Ji(p,e,n,t,o){const s=o.glyphs[p]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+p+'" does not exists in font family '+o.familyName+".");return}const a=new lo;let f,x,L,U,E,k,m,C;if(s.o){const M=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let b=0,G=M.length;b<G;)switch(M[b++]){case"m":f=M[b++]*e+n,x=M[b++]*e+t,a.moveTo(f,x);break;case"l":f=M[b++]*e+n,x=M[b++]*e+t,a.lineTo(f,x);break;case"q":L=M[b++]*e+n,U=M[b++]*e+t,E=M[b++]*e+n,k=M[b++]*e+t,a.quadraticCurveTo(E,k,L,U);break;case"b":L=M[b++]*e+n,U=M[b++]*e+t,E=M[b++]*e+n,k=M[b++]*e+t,m=M[b++]*e+n,C=M[b++]*e+t,a.bezierCurveTo(E,k,m,C,L,U);break}}return{offsetX:s.ha*e,path:a}}function ea(p="/fonts/Poppins_Regular.json"){const e=$t(null),n=$t(0),t=$t(!1),o=()=>new Promise((a,f)=>{new $i().load(p,L=>{e.value=L,n.value=100,t.value=!0,a(L)},L=>{L.lengthComputable&&(n.value=L.loaded/L.total*100)},L=>{n.value=100,t.value=!0,f(L)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const ta={class:"preloader"},oa={class:"progress-label"},na=gs({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>(Qt(),uo("div",ta,[Lt("div",oa,Ks(Math.round(e.progress))+"%",1)]))}}),sa=ar(na,[["__scopeId","data-v-e5eadefa"]]),Zs=250,Sn=500,Vo=-500,ts=-520,$s=-720,Qs=4e3,ra=gs({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){Ie.registerPlugin(Oe);const e=p,n=nr();n.projects=e.projects;const t=Uo(),o=$t(!1),s={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},a=$t(null),f=$t(null),x=$t(!1),L=$t(0),U=$t(!1),E=$t(!0),k=new Map;let m,C,M,b,G,j,z,I=null,te=null,W=null,R=null,Z=null,q=[],v=null,$=null,P=0,Q=null,J,ee=null,ge=null,B=null;const S=ea("/fonts/Poppins_Regular.json"),V=()=>{const c=a.value?a.value.getBoundingClientRect().width:window.innerWidth,i=window.innerHeight,r=t.isMobile?.75:1,_=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;M.setSize(c*r,i*r),M.setPixelRatio(_),b.setSize(c*r,i*r),C.aspect=c/i,C.updateProjectionMatrix(),M.domElement.style.width=`${c}px`,M.domElement.style.height=`${i}px`},u=c=>k.has(c)?Promise.resolve(k.get(c)):new Promise((i,r)=>{new di().load(c,D=>{D.encoding=ss,k.set(c,D),i(D)},void 0,D=>r(D))}),he=async()=>{m=new li,m.background=new At(0),m.fog=new ci(0,700,Qs),C=new ui(t.isMobile?t.orientation==="landscape"?90:120:75,window.innerWidth/window.innerHeight,1,Qs+6e3),C.position.set(0,0,0),C.lookAt(0,0,1e3),M=new fi({antialias:!0}),t.isMobile?M.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):M.setPixelRatio(window.devicePixelRatio),M.toneMapping=pi,M.toneMappingExposure=1,M.outputEncoding=ss,b=new Fi(M);const c=new Gi(m,C);b.addPass(c);const i=new ze(Math.floor(window.innerWidth/2),Math.floor(window.innerHeight/2));if(t.isMobile?G=new Ao(i,1,.1,0):G=new Ao(i,1.6,.2,0),G.renderToScreen=!0,b.addPass(G),a.value)a.value.appendChild(M.domElement),M.domElement.style.opacity="0";else return;j=new un,j.dom.style.position="fixed",j.dom.style.top="0px",j.dom.style.left="0px",j.dom.style.zIndex="1000",document.body.appendChild(j.dom);const _=e.projects.filter(T=>T.keyart).length+2+1;let D=0;const y=()=>{D++;const T=D/_*100,N=S.loadingProgress.value;L.value=(T+N/_)/(1+1/_),D===_&&S.isLoaded.value&&(x.value=!0)};await S.initialize().then(()=>{y()}).catch(T=>{console.error("Font initialization failed:",T),y()}),await u(e.projectGridFile).then(()=>y()).catch(()=>y()),await u(e.projectGridFile2).then(()=>y()).catch(()=>y());for(const T of e.projects)T.keyart?await u(T.keyart).then(()=>y()).catch(()=>y()):y();Q=Vi(m,{CUBE_SIZE:Zs,CUBE_SPACING:Sn,FIRST_CUBE_Z:Vo},e.projects,e.projectGridFile,e.projectGridFile2,s,k,S.font);try{if(await Q.getInitializedData().then(({maxZ:T,updateCubeColors:N,projectCubes:A})=>{if(J=T,J===void 0||isNaN(J))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:w}=Yi(m,S.font,{CUBE_SIZE:Zs,FIRST_CUBE_Z:Vo},s);q=[...w,...A],v=N}),s.showCars){const{cityGroup:T,updateParticles:N,dispose:A}=Xi(m,m,J,s);z=N,Z=A}if(s.showStarfield){const{dispose:T}=qi(m,C,J);I=T}if(s.showChasers){const{dispose:T,updateChasers:N}=Zi(m,J);W=T,R=N}V()}catch(T){console.error("Error initializing project cubes:",T),J=Vo-(e.projects.length+1)*Sn}},me=(c=0)=>{if($=requestAnimationFrame(me),M&&b){const i=(c-P)/1e3;P=c,z(i),R&&R(i),Q!=null&&Q.updateClickHereParticles&&Q.updateClickHereParticles(C,i);const r=4e3,_=1e3,D=Math.abs(C.position.z-J);C.far=Math.max(r+_,D),C.updateProjectionMatrix();const y=$s-ts;let T=0;C.position.z>=ts?T=0:C.position.z<=$s?T=1:T=(C.position.z-ts)/y;const N=.01,A=1-Math.pow(1-T,2);let w;t.isMobile?w=Ke.lerp(1.3,N,A):w=Ke.lerp(1.6,N,A),G.strength=w,b.render()}j.update()},Pe=()=>{console.log("handleResize()"),V(),Oe.refresh()},g=()=>{if(t.isMobile){const c=t.orientation;console.log("Resize: orientation",c,"lastOrientation",ge),c!==ge&&(ge=c,B&&clearTimeout(B),B=setTimeout(()=>{Pe(),B=null},500))}else Pe()};return Ur(()=>{he().then(()=>{if(x.value){$=requestAnimationFrame(me);let c=null;const i=Q.getInitializedData().then(({projectCubes:_})=>{_.forEach(y=>{y.userData.isActive=!0});const D=Vo-(e.projects.length-1)*Sn;if(C.position.set(0,0,5e3),C.lookAt(0,0,D),C.updateProjectionMatrix(),v(C),b.render(),Oe.getAll().forEach(y=>y.kill()),q.length&&v){const y=ji(m,C,f,q,v,{CUBE_SPACING:Sn,FIRST_CUBE_Z:Vo},{scrub:t.isMobile?.5:1},s,j);c=y.setReverting,ee=y.isScrollTriggerActive}M&&te===null&&(te=Q.setupInteractivity(C,M.domElement,M,y=>{c&&c(y)},ee)),o.value=!0,window.scrollTo({top:0,behavior:"auto"})}),r=()=>{i.then(()=>{E.value=!1,C.position.set(0,0,5e3),C.updateProjectionMatrix(),Ie.to(M.domElement,{opacity:1,duration:.5,ease:"power4.out"});const _={z:5e3};Ie.to(_,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{C.position.z=_.z,C.updateProjectionMatrix()},onComplete:()=>{C.position.z=0,U.value=!0}})})};Ie.delayedCall(.5,r)}}).catch(c=>{console.error("Initialization failed:",c)}),window.addEventListener("resize",g)}),Wr(()=>{$!==null&&cancelAnimationFrame($),te&&te(),window.removeEventListener("resize",g),Oe.getAll().forEach(c=>c.kill()),M.dispose(),b.dispose(),m.clear(),document.body.removeChild(j.dom),I&&I(),W&&W(),Z&&Z()}),(c,i)=>(Qt(),uo("section",{ref_key:"wrapper",ref:f,class:os(["wrapper",{ready:o.value}])},[Xo(Vr,{name:"fade"},{default:Js(()=>[E.value?(Qt(),er(sa,{key:0,progress:L.value},null,8,["progress"])):Yr("",!0)]),_:1}),Lt("div",{ref_key:"tunnelWrapper",ref:a,class:"tunnel-wrapper"},null,512)],2))}}),ia=ar(ra,[["__scopeId","data-v-eb2cf45e"]]),aa={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},la={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},ca={class:"overflow-hidden"},ua={class:"mt-16 px-4 md:px-16"},fa={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},pa=["innerHTML"],da={class:"flex justify-center items-center gap-8 text-xs text-white/80 uppercase mt-12"},xa=gs({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{},archived:{}},setup(p){const e=p,n=Ms(()=>[...e.archived].sort((s,a)=>s.title.localeCompare(a.title))),t=Ms(()=>Object.values(hn.Enums.Classification)),o=s=>{switch(s){case hn.Enums.Classification.ENTERTAINMENT:return"fill-red-400";case hn.Enums.Classification.ECOMMERCE:return"fill-green-500";case hn.Enums.Classification.OTHER:return"fill-white";default:return"fill-white-500"}};return(s,a)=>(Qt(),er(mi,null,{default:Js(()=>[Xo(Xr(jr),{title:"Welcome"}),Lt("div",aa,[Lt("nav",la,[Xo(hi)]),Lt("div",ca,[Xo(ia,{projects:s.projects,"project-grid-file":s.projectGridFile,"project-grid-file2":s.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file2"])]),Lt("div",ua,[a[2]||(a[2]=Lt("h2",{class:"mb-4 text-white"},"OTHER WEB PROJECTS",-1)),Lt("ul",fa,[(Qt(!0),uo(Cs,null,Ps(n.value,(f,x)=>(Qt(),uo("li",{class:"text-xs text-white/80 flex items-center gap-2",key:x},[(Qt(),uo("svg",{class:os(["size-1.5 md:size-[.375vw] 3xl:size-[.375rem]",o(f.classification)]),viewBox:"0 0 6 6","aria-hidden":"true"},a[0]||(a[0]=[Lt("circle",{cx:"3",cy:"3",r:"3"},null,-1)]),2)),Lt("span",{innerHTML:f.title},null,8,pa)]))),128))]),Lt("ul",da,[(Qt(!0),uo(Cs,null,Ps(t.value,f=>(Qt(),uo("li",{class:"flex items-center gap-2",key:f},[(Qt(),uo("svg",{class:os(["size-3",o(f)]),viewBox:"0 0 6 6","aria-hidden":"true"},a[1]||(a[1]=[Lt("circle",{cx:"3",cy:"3",r:"3"},null,-1)]),2)),qr(" "+Ks(f),1)]))),128))])]),a[3]||(a[3]=Lt("div",{class:"flex justify-center items-center"},null,-1)),a[4]||(a[4]=Lt("div",{class:"flex justify-center items-center"},null,-1)),Xo(gi)])]),_:1}))}});export{xa as default};
