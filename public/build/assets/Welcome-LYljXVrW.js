import{W as Tr,d as Kt,I as cs,e as Us,o as Dn,a as ho,t as Mr,x as Pr,y as Cr,b as Ho,w as Ws,c as Ys,f as Sr,T as Er,u as Ar,m as kr}from"./app-Dw5tgo0o.js";import{c as Be,O as Dr,e as ao,F as Xo,j as go,U as Qn,V as Le,k as Tn,H as Mn,N as Ir,C as Rr,l as St,d as De,b as Zt,m as ft,E as Or,n as Xs,o as js,p as Mo,q as Lr,r as Br,s as zr,P as Hn,t as Nr,v as no,G as yt,w as Hr,a as Xt,L as Rt,g as Oe,x as $e,B as Ro,y as jo,f as wt,u as Vs,R as Fr,z as Gr,I as Ur,J as oo,K as qs,Q as Zs,T as xs,X as Wr,Y as Yr,Z as Fn,_ as ws,$ as Xr,a0 as Gn,a1 as Un,a2 as jr,S as Vr,a3 as qr,a4 as Zr,W as $r,a5 as Qr,a6 as Kr,h as Jr,i as ei}from"./GlobalFooter-DB02f19-.js";import{u as rn,_ as ti}from"./App.vue_vue_type_script_setup_true_lang-D3Df4tqV.js";import{_ as $s}from"./_plugin-vue_export-helper-DlAUqK2U.js";function oi(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function ni(p,e,n){return e&&oi(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var bt,Pn,Nt,ro,io,ko,Qs,fo,Vo,Ks,eo,jt,Js,er=function(){return bt||typeof window<"u"&&(bt=window.gsap)&&bt.registerPlugin&&bt},tr=1,Ao=[],He=[],Qt=[],qo=Date.now,Kn=function(e,n){return n},si=function(){var e=Vo.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,He),o.push.apply(o,Qt),He=t,Qt=o,Kn=function(u,f){return n[u](f)}},lo=function(e,n){return~Qt.indexOf(e)&&Qt[Qt.indexOf(e)+1][n]},Zo=function(e){return!!~Ks.indexOf(e)},Pt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Mt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},un="scrollLeft",fn="scrollTop",Jn=function(){return eo&&eo.isPressed||He.cache++},In=function(e,n){var t=function o(s){if(s||s===0){tr&&(Nt.history.scrollRestoration="manual");var u=eo&&eo.isPressed;s=o.v=Math.round(s)||(eo&&eo.iOS?1:0),e(s),o.cacheID=He.cache,u&&Kn("ss",s)}else(n||He.cache!==o.cacheID||Kn("ref"))&&(o.cacheID=He.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},kt={s:un,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:In(function(p){return arguments.length?Nt.scrollTo(p,pt.sc()):Nt.pageXOffset||ro[un]||io[un]||ko[un]||0})},pt={s:fn,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:kt,sc:In(function(p){return arguments.length?Nt.scrollTo(kt.sc(),p):Nt.pageYOffset||ro[fn]||io[fn]||ko[fn]||0})},It=function(e,n){return(n&&n._ctx&&n._ctx.selector||bt.utils.toArray)(e)[0]||(typeof e=="string"&&bt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},co=function(e,n){var t=n.s,o=n.sc;Zo(e)&&(e=ro.scrollingElement||io);var s=He.indexOf(e),u=o===pt.sc?1:2;!~s&&(s=He.push(e)-1),He[s+u]||Pt(e,"scroll",Jn);var f=He[s+u],x=f||(He[s+u]=In(lo(e,t),!0)||(Zo(e)?o:In(function(D){return arguments.length?e[t]=D:e[t]})));return x.target=e,f||(x.smooth=bt.getProperty(e,"scrollBehavior")==="smooth"),x},es=function(e,n,t){var o=e,s=e,u=qo(),f=u,x=n||50,D=Math.max(500,x*3),F=function(w,T){var y=qo();T||y-u>x?(s=o,o=w,f=u,u=y):t?o+=w:o=s+(w-s)/(y-f)*(u-f)},S=function(){s=o=t?0:o,f=u=0},v=function(w){var T=f,y=s,N=qo();return(w||w===0)&&w!==o&&F(w),u===f||N-f>D?0:(o+(t?y:-y))/((t?N:u)-T)*1e3};return{update:F,reset:S,getVelocity:v}},Bo=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},bs=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},or=function(){Vo=bt.core.globals().ScrollTrigger,Vo&&Vo.core&&si()},nr=function(e){return bt=e||er(),!Pn&&bt&&typeof document<"u"&&document.body&&(Nt=window,ro=document,io=ro.documentElement,ko=ro.body,Ks=[Nt,ro,io,ko],bt.utils.clamp,Js=bt.core.context||function(){},fo="onpointerenter"in ko?"pointer":"mouse",Qs=rt.isTouch=Nt.matchMedia&&Nt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Nt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,jt=rt.eventTypes=("ontouchstart"in io?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in io?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return tr=0},500),or(),Pn=1),Pn};kt.op=pt;He.cache=0;var rt=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){Pn||nr(bt)||console.warn("Please gsap.registerPlugin(Observer)"),Vo||or();var o=t.tolerance,s=t.dragMinimum,u=t.type,f=t.target,x=t.lineHeight,D=t.debounce,F=t.preventDefault,S=t.onStop,v=t.onStopDelay,g=t.ignore,w=t.wheelSpeed,T=t.event,y=t.onDragStart,N=t.onDragEnd,$=t.onDrag,L=t.onPress,E=t.onRelease,X=t.onRight,q=t.onLeft,I=t.onUp,Z=t.onDown,K=t.onChangeX,M=t.onChangeY,fe=t.onChange,P=t.onToggleX,V=t.onToggleY,ue=t.onHover,de=t.onHoverEnd,le=t.onMove,k=t.ignoreCheck,R=t.isNormalizer,pe=t.onGestureStart,a=t.onGestureEnd,J=t.onWheel,ee=t.onEnable,me=t.onDisable,h=t.onClick,c=t.scrollSpeed,i=t.capture,r=t.allowClicks,C=t.lockAxis,G=t.onLockAxis;this.target=f=It(f)||io,this.vars=t,g&&(g=bt.utils.toArray(g)),o=o||1e-9,s=s||0,w=w||1,c=c||1,u=u||"wheel,touch,pointer",D=D!==!1,x||(x=parseFloat(Nt.getComputedStyle(ko).lineHeight)||22);var _,z,j,B,b,O,Q,d=this,m=0,l=0,oe=t.passive||!F&&t.passive!==!1,he=co(f,kt),Ge=co(f,pt),Ve=he(),H=Ge(),te=~u.indexOf("touch")&&!~u.indexOf("pointer")&&jt[0]==="pointerdown",xe=Zo(f),re=f.ownerDocument||ro,ge=[0,0,0],we=[0,0,0],_e=0,ve=function(){return _e=qo()},be=function(ce,Me){return(d.event=ce)&&g&&~g.indexOf(ce.target)||Me&&te&&ce.pointerType!=="touch"||k&&k(ce,Me)},Pe=function(){d._vx.reset(),d._vy.reset(),z.pause(),S&&S(d)},ie=function(){var ce=d.deltaX=bs(ge),Me=d.deltaY=bs(we),A=Math.abs(ce)>=o,Y=Math.abs(Me)>=o;fe&&(A||Y)&&fe(d,ce,Me,ge,we),A&&(X&&d.deltaX>0&&X(d),q&&d.deltaX<0&&q(d),K&&K(d),P&&d.deltaX<0!=m<0&&P(d),m=d.deltaX,ge[0]=ge[1]=ge[2]=0),Y&&(Z&&d.deltaY>0&&Z(d),I&&d.deltaY<0&&I(d),M&&M(d),V&&d.deltaY<0!=l<0&&V(d),l=d.deltaY,we[0]=we[1]=we[2]=0),(B||j)&&(le&&le(d),j&&(y&&j===1&&y(d),$&&$(d),j=0),B=!1),O&&!(O=!1)&&G&&G(d),b&&(J(d),b=!1),_=0},Ee=function(ce,Me,A){ge[A]+=ce,we[A]+=Me,d._vx.update(ce),d._vy.update(Me),D?_||(_=requestAnimationFrame(ie)):ie()},je=function(ce,Me){C&&!Q&&(d.axis=Q=Math.abs(ce)>Math.abs(Me)?"x":"y",O=!0),Q!=="y"&&(ge[2]+=ce,d._vx.update(ce,!0)),Q!=="x"&&(we[2]+=Me,d._vy.update(Me,!0)),D?_||(_=requestAnimationFrame(ie)):ie()},Te=function(ce){if(!be(ce,1)){ce=Bo(ce,F);var Me=ce.clientX,A=ce.clientY,Y=Me-d.x,U=A-d.y,ne=d.isDragging;d.x=Me,d.y=A,(ne||(Y||U)&&(Math.abs(d.startX-Me)>=s||Math.abs(d.startY-A)>=s))&&(j=ne?2:1,ne||(d.isDragging=!0),je(Y,U))}},lt=d.onPress=function(W){be(W,1)||W&&W.button||(d.axis=Q=null,z.pause(),d.isPressed=!0,W=Bo(W),m=l=0,d.startX=d.x=W.clientX,d.startY=d.y=W.clientY,d._vx.reset(),d._vy.reset(),Pt(R?f:re,jt[1],Te,oe,!0),d.deltaX=d.deltaY=0,L&&L(d))},Ae=d.onRelease=function(W){if(!be(W,1)){Mt(R?f:re,jt[1],Te,!0);var ce=!isNaN(d.y-d.startY),Me=d.isDragging,A=Me&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),Y=Bo(W);!A&&ce&&(d._vx.reset(),d._vy.reset(),F&&r&&bt.delayedCall(.08,function(){if(qo()-_e>300&&!W.defaultPrevented){if(W.target.click)W.target.click();else if(re.createEvent){var U=re.createEvent("MouseEvents");U.initMouseEvent("click",!0,!0,Nt,1,Y.screenX,Y.screenY,Y.clientX,Y.clientY,!1,!1,!1,!1,0,null),W.target.dispatchEvent(U)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,S&&Me&&!R&&z.restart(!0),j&&ie(),N&&Me&&N(d),E&&E(d,A)}},dt=function(ce){return ce.touches&&ce.touches.length>1&&(d.isGesturing=!0)&&pe(ce,d.isDragging)},it=function(){return(d.isGesturing=!1)||a(d)},Fe=function(ce){if(!be(ce)){var Me=he(),A=Ge();Ee((Me-Ve)*c,(A-H)*c,1),Ve=Me,H=A,S&&z.restart(!0)}},Ke=function(ce){if(!be(ce)){ce=Bo(ce,F),J&&(b=!0);var Me=(ce.deltaMode===1?x:ce.deltaMode===2?Nt.innerHeight:1)*w;Ee(ce.deltaX*Me,ce.deltaY*Me,0),S&&!R&&z.restart(!0)}},ct=function(ce){if(!be(ce)){var Me=ce.clientX,A=ce.clientY,Y=Me-d.x,U=A-d.y;d.x=Me,d.y=A,B=!0,S&&z.restart(!0),(Y||U)&&je(Y,U)}},Dt=function(ce){d.event=ce,ue(d)},Ue=function(ce){d.event=ce,de(d)},Ce=function(ce){return be(ce)||Bo(ce,F)&&h(d)};z=d._dc=bt.delayedCall(v||.25,Pe).pause(),d.deltaX=d.deltaY=0,d._vx=es(0,50,!0),d._vy=es(0,50,!0),d.scrollX=he,d.scrollY=Ge,d.isDragging=d.isGesturing=d.isPressed=!1,Js(this),d.enable=function(W){return d.isEnabled||(Pt(xe?re:f,"scroll",Jn),u.indexOf("scroll")>=0&&Pt(xe?re:f,"scroll",Fe,oe,i),u.indexOf("wheel")>=0&&Pt(f,"wheel",Ke,oe,i),(u.indexOf("touch")>=0&&Qs||u.indexOf("pointer")>=0)&&(Pt(f,jt[0],lt,oe,i),Pt(re,jt[2],Ae),Pt(re,jt[3],Ae),r&&Pt(f,"click",ve,!0,!0),h&&Pt(f,"click",Ce),pe&&Pt(re,"gesturestart",dt),a&&Pt(re,"gestureend",it),ue&&Pt(f,fo+"enter",Dt),de&&Pt(f,fo+"leave",Ue),le&&Pt(f,fo+"move",ct)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=B=j=!1,d._vx.reset(),d._vy.reset(),Ve=he(),H=Ge(),W&&W.type&&lt(W),ee&&ee(d)),d},d.disable=function(){d.isEnabled&&(Ao.filter(function(W){return W!==d&&Zo(W.target)}).length||Mt(xe?re:f,"scroll",Jn),d.isPressed&&(d._vx.reset(),d._vy.reset(),Mt(R?f:re,jt[1],Te,!0)),Mt(xe?re:f,"scroll",Fe,i),Mt(f,"wheel",Ke,i),Mt(f,jt[0],lt,i),Mt(re,jt[2],Ae),Mt(re,jt[3],Ae),Mt(f,"click",ve,!0),Mt(f,"click",Ce),Mt(re,"gesturestart",dt),Mt(re,"gestureend",it),Mt(f,fo+"enter",Dt),Mt(f,fo+"leave",Ue),Mt(f,fo+"move",ct),d.isEnabled=d.isPressed=d.isDragging=!1,me&&me(d))},d.kill=d.revert=function(){d.disable();var W=Ao.indexOf(d);W>=0&&Ao.splice(W,1),eo===d&&(eo=0)},Ao.push(d),R&&Zo(f)&&(eo=d),d.enable(T)},ni(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();rt.version="3.12.7";rt.create=function(p){return new rt(p)};rt.register=nr;rt.getAll=function(){return Ao.slice()};rt.getById=function(p){return Ao.filter(function(e){return e.vars.id===p})[0]};er()&&bt.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ye,So,Ne,ot,zt,Qe,us,Rn,nn,$o,Fo,pn,_t,Nn,ts,Et,_s,vs,Eo,sr,Wn,rr,Ct,os,ir,ar,so,ns,fs,Do,ps,On,ss,Yn,dn=1,vt=Date.now,Xn=vt(),Wt=0,Go=0,Ts=function(e,n,t){var o=Bt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Ms=function(e,n){return n&&(!Bt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},ri=function p(){return Go&&requestAnimationFrame(p)},Ps=function(){return Nn=1},Cs=function(){return Nn=0},qt=function(e){return e},Uo=function(e){return Math.round(e*1e5)/1e5||0},lr=function(){return typeof window<"u"},cr=function(){return ye||lr()&&(ye=window.gsap)&&ye.registerPlugin&&ye},bo=function(e){return!!~us.indexOf(e)},ur=function(e){return(e==="Height"?ps:Ne["inner"+e])||zt["client"+e]||Qe["client"+e]},fr=function(e){return lo(e,"getBoundingClientRect")||(bo(e)?function(){return kn.width=Ne.innerWidth,kn.height=ps,kn}:function(){return Jt(e)})},ii=function(e,n,t){var o=t.d,s=t.d2,u=t.a;return(u=lo(e,"getBoundingClientRect"))?function(){return u()[o]}:function(){return(n?ur(s):e["client"+s])||0}},ai=function(e,n){return!n||~Qt.indexOf(e)?fr(e):function(){return kn}},$t=function(e,n){var t=n.s,o=n.d2,s=n.d,u=n.a;return Math.max(0,(t="scroll"+o)&&(u=lo(e,t))?u()-fr(e)()[s]:bo(e)?(zt[t]||Qe[t])-ur(o):e[t]-e["offset"+o])},hn=function(e,n){for(var t=0;t<Eo.length;t+=3)(!n||~n.indexOf(Eo[t+1]))&&e(Eo[t],Eo[t+1],Eo[t+2])},Bt=function(e){return typeof e=="string"},Tt=function(e){return typeof e=="function"},Wo=function(e){return typeof e=="number"},po=function(e){return typeof e=="object"},zo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},jn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},Po=Math.abs,pr="left",dr="top",ds="right",hs="bottom",yo="width",xo="height",Qo="Right",Ko="Left",Jo="Top",en="Bottom",at="padding",Gt="margin",Oo="Width",gs="Height",ut="px",Ut=function(e){return Ne.getComputedStyle(e)},li=function(e){var n=Ut(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Ss=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},Jt=function(e,n){var t=n&&Ut(e)[ts]!=="matrix(1, 0, 0, 1, 0, 0)"&&ye.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Ln=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},hr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},ci=function(e){return function(n){return ye.utils.snap(hr(e),n)}},ms=function(e){var n=ye.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,u){u===void 0&&(u=.001);var f;if(!s)return n(o);if(s>0){for(o-=u,f=0;f<t.length;f++)if(t[f]>=o)return t[f];return t[f-1]}else for(f=t.length,o+=u;f--;)if(t[f]<=o)return t[f];return t[0]}:function(o,s,u){u===void 0&&(u=.001);var f=n(o);return!s||Math.abs(f-o)<u||f-o<0==s<0?f:n(s<0?o-e:o+e)}},ui=function(e){return function(n,t){return ms(hr(e))(n,t.direction)}},gn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},mt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},gt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},mn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Es={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},yn={toggleActions:"play",anticipatePin:0},Bn={top:0,left:0,center:.5,bottom:1,right:1},Cn=function(e,n){if(Bt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Bn?Bn[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},xn=function(e,n,t,o,s,u,f,x){var D=s.startColor,F=s.endColor,S=s.fontSize,v=s.indent,g=s.fontWeight,w=ot.createElement("div"),T=bo(t)||lo(t,"pinType")==="fixed",y=e.indexOf("scroller")!==-1,N=T?Qe:t,$=e.indexOf("start")!==-1,L=$?D:F,E="border-color:"+L+";font-size:"+S+";color:"+L+";font-weight:"+g+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return E+="position:"+((y||x)&&T?"fixed;":"absolute;"),(y||x||!T)&&(E+=(o===pt?ds:hs)+":"+(u+parseFloat(v))+"px;"),f&&(E+="box-sizing:border-box;text-align:left;width:"+f.offsetWidth+"px;"),w._isStart=$,w.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),w.style.cssText=E,w.innerText=n||n===0?e+"-"+n:e,N.children[0]?N.insertBefore(w,N.children[0]):N.appendChild(w),w._offset=w["offset"+o.op.d2],Sn(w,0,o,$),w},Sn=function(e,n,t,o){var s={display:"block"},u=t[o?"os2":"p2"],f=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+u+Oo]=1,s["border"+f+Oo]=0,s[t.p]=n+"px",ye.set(e,s)},ze=[],rs={},sn,As=function(){return vt()-Wt>34&&(sn||(sn=requestAnimationFrame(to)))},Co=function(){(!Ct||!Ct.isPressed||Ct.startX>Qe.clientWidth)&&(He.cache++,Ct?sn||(sn=requestAnimationFrame(to)):to(),Wt||vo("scrollStart"),Wt=vt())},Vn=function(){ar=Ne.innerWidth,ir=Ne.innerHeight},Yo=function(e){He.cache++,(e===!0||!_t&&!rr&&!ot.fullscreenElement&&!ot.webkitFullscreenElement&&(!os||ar!==Ne.innerWidth||Math.abs(Ne.innerHeight-ir)>Ne.innerHeight*.25))&&Rn.restart(!0)},_o={},fi=[],gr=function p(){return gt(Re,"scrollEnd",p)||mo(!0)},vo=function(e){return _o[e]&&_o[e].map(function(n){return n()})||fi},Lt=[],mr=function(e){for(var n=0;n<Lt.length;n+=5)(!e||Lt[n+4]&&Lt[n+4].query===e)&&(Lt[n].style.cssText=Lt[n+1],Lt[n].getBBox&&Lt[n].setAttribute("transform",Lt[n+2]||""),Lt[n+3].uncache=1)},ys=function(e,n){var t;for(Et=0;Et<ze.length;Et++)t=ze[Et],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));On=!0,n&&mr(n),n||vo("revert")},yr=function(e,n){He.cache++,(n||!At)&&He.forEach(function(t){return Tt(t)&&t.cacheID++&&(t.rec=0)}),Bt(e)&&(Ne.history.scrollRestoration=fs=e)},At,wo=0,ks,pi=function(){if(ks!==wo){var e=ks=wo;requestAnimationFrame(function(){return e===wo&&mo(!0)})}},xr=function(){Qe.appendChild(Do),ps=!Ct&&Do.offsetHeight||Ne.innerHeight,Qe.removeChild(Do)},Ds=function(e){return nn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},mo=function(e,n){if(zt=ot.documentElement,Qe=ot.body,us=[Ne,ot,zt,Qe],Wt&&!e&&!On){mt(Re,"scrollEnd",gr);return}xr(),At=Re.isRefreshing=!0,He.forEach(function(o){return Tt(o)&&++o.cacheID&&(o.rec=o())});var t=vo("refreshInit");sr&&Re.sort(),n||ys(),He.forEach(function(o){Tt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),ze.slice(0).forEach(function(o){return o.refresh()}),On=!1,ze.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",u=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-u),o.refresh()}}),ss=1,Ds(!0),ze.forEach(function(o){var s=$t(o.scroller,o._dir),u=o.vars.end==="max"||o._endClamp&&o.end>s,f=o._startClamp&&o.start>=s;(u||f)&&o.setPositions(f?s-1:o.start,u?Math.max(f?s:o.start+1,s):o.end,!0)}),Ds(!1),ss=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),He.forEach(function(o){Tt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),yr(fs,1),Rn.pause(),wo++,At=2,to(2),ze.forEach(function(o){return Tt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),At=Re.isRefreshing=!1,vo("refresh")},is=0,En=1,tn,to=function(e){if(e===2||!At&&!On){Re.isUpdating=!0,tn&&tn.update(0);var n=ze.length,t=vt(),o=t-Xn>=50,s=n&&ze[0].scroll();if(En=is>s?-1:1,At||(is=s),o&&(Wt&&!Nn&&t-Wt>200&&(Wt=0,vo("scrollEnd")),Fo=Xn,Xn=t),En<0){for(Et=n;Et-- >0;)ze[Et]&&ze[Et].update(0,o);En=1}else for(Et=0;Et<n;Et++)ze[Et]&&ze[Et].update(0,o);Re.isUpdating=!1}sn=0},as=[pr,dr,hs,ds,Gt+en,Gt+Qo,Gt+Jo,Gt+Ko,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],An=as.concat([yo,xo,"boxSizing","max"+Oo,"max"+gs,"position",Gt,at,at+Jo,at+Qo,at+en,at+Ko]),di=function(e,n,t){Io(t);var o=e._gsap;if(o.spacerIsNative)Io(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},qn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=as.length,u=n.style,f=e.style,x;s--;)x=as[s],u[x]=t[x];u.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(u.display="inline-block"),f[hs]=f[ds]="auto",u.flexBasis=t.flexBasis||"auto",u.overflow="visible",u.boxSizing="border-box",u[yo]=Ln(e,kt)+ut,u[xo]=Ln(e,pt)+ut,u[at]=f[Gt]=f[dr]=f[pr]="0",Io(o),f[yo]=f["max"+Oo]=t[yo],f[xo]=f["max"+gs]=t[xo],f[at]=t[at],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},hi=/([A-Z])/g,Io=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,u;for((e.t._gsap||ye.core.getCache(e.t)).uncache=1;o<t;o+=2)u=e[o+1],s=e[o],u?n[s]=u:n[s]&&n.removeProperty(s.replace(hi,"-$1").toLowerCase())}},wn=function(e){for(var n=An.length,t=e.style,o=[],s=0;s<n;s++)o.push(An[s],t[An[s]]);return o.t=e,o},gi=function(e,n,t){for(var o=[],s=e.length,u=t?8:0,f;u<s;u+=2)f=e[u],o.push(f,f in n?n[f]:e[u+1]);return o.t=e.t,o},kn={left:0,top:0},Is=function(e,n,t,o,s,u,f,x,D,F,S,v,g,w){Tt(e)&&(e=e(x)),Bt(e)&&e.substr(0,3)==="max"&&(e=v+(e.charAt(4)==="="?Cn("0"+e.substr(3),t):0));var T=g?g.time():0,y,N,$;if(g&&g.seek(0),isNaN(e)||(e=+e),Wo(e))g&&(e=ye.utils.mapRange(g.scrollTrigger.start,g.scrollTrigger.end,0,v,e)),f&&Sn(f,t,o,!0);else{Tt(n)&&(n=n(x));var L=(e||"0").split(" "),E,X,q,I;$=It(n,x)||Qe,E=Jt($)||{},(!E||!E.left&&!E.top)&&Ut($).display==="none"&&(I=$.style.display,$.style.display="block",E=Jt($),I?$.style.display=I:$.style.removeProperty("display")),X=Cn(L[0],E[o.d]),q=Cn(L[1]||"0",t),e=E[o.p]-D[o.p]-F+X+s-q,f&&Sn(f,q,o,t-q<20||f._isStart&&q>20),t-=t-q}if(w&&(x[w]=e||-.001,e<0&&(e=0)),u){var Z=e+t,K=u._isStart;y="scroll"+o.d2,Sn(u,Z,o,K&&Z>20||!K&&(S?Math.max(Qe[y],zt[y]):u.parentNode[y])<=Z+1),S&&(D=Jt(f),S&&(u.style[o.op.p]=D[o.op.p]-o.op.m-u._offset+ut))}return g&&$&&(y=Jt($),g.seek(v),N=Jt($),g._caScrollDist=y[o.p]-N[o.p],e=e/g._caScrollDist*v),g&&g.seek(T),g?e:Math.round(e)},mi=/(webkit|moz|length|cssText|inset)/i,Rs=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,u,f;if(n===Qe){e._stOrig=s.cssText,f=Ut(e);for(u in f)!+u&&!mi.test(u)&&f[u]&&typeof s[u]=="string"&&u!=="0"&&(s[u]=f[u]);s.top=t,s.left=o}else s.cssText=e._stOrig;ye.core.getCache(e).uncache=1,n.appendChild(e)}},wr=function(e,n,t){var o=n,s=o;return function(u){var f=Math.round(e());return f!==o&&f!==s&&Math.abs(f-o)>3&&Math.abs(f-s)>3&&(u=f,t&&t()),s=o,o=Math.round(u),o}},bn=function(e,n,t){var o={};o[n.p]="+="+t,ye.set(e,o)},Os=function(e,n){var t=co(e,n),o="_scroll"+n.p2,s=function u(f,x,D,F,S){var v=u.tween,g=x.onComplete,w={};D=D||t();var T=wr(t,D,function(){v.kill(),u.tween=0});return S=F&&S||0,F=F||f-D,v&&v.kill(),x[o]=f,x.inherit=!1,x.modifiers=w,w[o]=function(){return T(D+F*v.ratio+S*v.ratio*v.ratio)},x.onUpdate=function(){He.cache++,u.tween&&to()},x.onComplete=function(){u.tween=0,g&&g.call(v)},v=u.tween=ye.to(e,x),v};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},mt(e,"wheel",t.wheelHandler),Re.isTouch&&mt(e,"touchmove",t.wheelHandler),s},Re=function(){function p(n,t){So||p.register(ye)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ns(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Go){this.update=this.refresh=this.kill=qt;return}t=Ss(Bt(t)||Wo(t)||t.nodeType?{trigger:t}:t,yn);var s=t,u=s.onUpdate,f=s.toggleClass,x=s.id,D=s.onToggle,F=s.onRefresh,S=s.scrub,v=s.trigger,g=s.pin,w=s.pinSpacing,T=s.invalidateOnRefresh,y=s.anticipatePin,N=s.onScrubComplete,$=s.onSnapComplete,L=s.once,E=s.snap,X=s.pinReparent,q=s.pinSpacer,I=s.containerAnimation,Z=s.fastScrollEnd,K=s.preventOverlaps,M=t.horizontal||t.containerAnimation&&t.horizontal!==!1?kt:pt,fe=!S&&S!==0,P=It(t.scroller||Ne),V=ye.core.getCache(P),ue=bo(P),de=("pinType"in t?t.pinType:lo(P,"pinType")||ue&&"fixed")==="fixed",le=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],k=fe&&t.toggleActions.split(" "),R="markers"in t?t.markers:yn.markers,pe=ue?0:parseFloat(Ut(P)["border"+M.p2+Oo])||0,a=this,J=t.onRefreshInit&&function(){return t.onRefreshInit(a)},ee=ii(P,ue,M),me=ai(P,ue),h=0,c=0,i=0,r=co(P,M),C,G,_,z,j,B,b,O,Q,d,m,l,oe,he,Ge,Ve,H,te,xe,re,ge,we,_e,ve,be,Pe,ie,Ee,je,Te,lt,Ae,dt,it,Fe,Ke,ct,Dt,Ue;if(a._startClamp=a._endClamp=!1,a._dir=M,y*=45,a.scroller=P,a.scroll=I?I.time.bind(I):r,z=r(),a.vars=t,o=o||t.animation,"refreshPriority"in t&&(sr=1,t.refreshPriority===-9999&&(tn=a)),V.tweenScroll=V.tweenScroll||{top:Os(P,pt),left:Os(P,kt)},a.tweenTo=C=V.tweenScroll[M.p],a.scrubDuration=function(A){dt=Wo(A)&&A,dt?Ae?Ae.duration(A):Ae=ye.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:dt,paused:!0,onComplete:function(){return N&&N(a)}}):(Ae&&Ae.progress(1).kill(),Ae=0)},o&&(o.vars.lazy=!1,o._initted&&!a.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),a.animation=o.pause(),o.scrollTrigger=a,a.scrubDuration(S),Te=0,x||(x=o.vars.id)),E&&((!po(E)||E.push)&&(E={snapTo:E}),"scrollBehavior"in Qe.style&&ye.set(ue?[Qe,zt]:P,{scrollBehavior:"auto"}),He.forEach(function(A){return Tt(A)&&A.target===(ue?ot.scrollingElement||zt:P)&&(A.smooth=!1)}),_=Tt(E.snapTo)?E.snapTo:E.snapTo==="labels"?ci(o):E.snapTo==="labelsDirectional"?ui(o):E.directional!==!1?function(A,Y){return ms(E.snapTo)(A,vt()-c<500?0:Y.direction)}:ye.utils.snap(E.snapTo),it=E.duration||{min:.1,max:2},it=po(it)?$o(it.min,it.max):$o(it,it),Fe=ye.delayedCall(E.delay||dt/2||.1,function(){var A=r(),Y=vt()-c<500,U=C.tween;if((Y||Math.abs(a.getVelocity())<10)&&!U&&!Nn&&h!==A){var ne=(A-B)/he,Ie=o&&!fe?o.totalProgress():ne,se=Y?0:(Ie-lt)/(vt()-Fo)*1e3||0,ae=ye.utils.clamp(-ne,1-ne,Po(se/2)*se/.185),Se=ne+(E.inertia===!1?0:ae),ke,qe,Ye=E,Ot=Ye.onStart,nt=Ye.onInterrupt,ht=Ye.onComplete;if(ke=_(Se,a),Wo(ke)||(ke=Se),qe=Math.max(0,Math.round(B+ke*he)),A<=b&&A>=B&&qe!==A){if(U&&!U._initted&&U.data<=Po(qe-A))return;E.inertia===!1&&(ae=ke-ne),C(qe,{duration:it(Po(Math.max(Po(Se-Ie),Po(ke-Ie))*.185/se/.05||0)),ease:E.ease||"power3",data:Po(qe-A),onInterrupt:function(){return Fe.restart(!0)&&nt&&nt(a)},onComplete:function(){a.update(),h=r(),o&&!fe&&(Ae?Ae.resetTo("totalProgress",ke,o._tTime/o._tDur):o.progress(ke)),Te=lt=o&&!fe?o.totalProgress():a.progress,$&&$(a),ht&&ht(a)}},A,ae*he,qe-A-ae*he),Ot&&Ot(a,C.tween)}}else a.isActive&&h!==A&&Fe.restart(!0)}).pause()),x&&(rs[x]=a),v=a.trigger=It(v||g!==!0&&g),Ue=v&&v._gsap&&v._gsap.stRevert,Ue&&(Ue=Ue(a)),g=g===!0?v:It(g),Bt(f)&&(f={targets:v,className:f}),g&&(w===!1||w===Gt||(w=!w&&g.parentNode&&g.parentNode.style&&Ut(g.parentNode).display==="flex"?!1:at),a.pin=g,G=ye.core.getCache(g),G.spacer?Ge=G.pinState:(q&&(q=It(q),q&&!q.nodeType&&(q=q.current||q.nativeElement),G.spacerIsNative=!!q,q&&(G.spacerState=wn(q))),G.spacer=te=q||ot.createElement("div"),te.classList.add("pin-spacer"),x&&te.classList.add("pin-spacer-"+x),G.pinState=Ge=wn(g)),t.force3D!==!1&&ye.set(g,{force3D:!0}),a.spacer=te=G.spacer,je=Ut(g),ve=je[w+M.os2],re=ye.getProperty(g),ge=ye.quickSetter(g,M.a,ut),qn(g,te,je),H=wn(g)),R){l=po(R)?Ss(R,Es):Es,d=xn("scroller-start",x,P,M,l,0),m=xn("scroller-end",x,P,M,l,0,d),xe=d["offset"+M.op.d2];var Ce=It(lo(P,"content")||P);O=this.markerStart=xn("start",x,Ce,M,l,xe,0,I),Q=this.markerEnd=xn("end",x,Ce,M,l,xe,0,I),I&&(Dt=ye.quickSetter([O,Q],M.a,ut)),!de&&!(Qt.length&&lo(P,"fixedMarkers")===!0)&&(li(ue?Qe:P),ye.set([d,m],{force3D:!0}),Pe=ye.quickSetter(d,M.a,ut),Ee=ye.quickSetter(m,M.a,ut))}if(I){var W=I.vars.onUpdate,ce=I.vars.onUpdateParams;I.eventCallback("onUpdate",function(){a.update(0,0,1),W&&W.apply(I,ce||[])})}if(a.previous=function(){return ze[ze.indexOf(a)-1]},a.next=function(){return ze[ze.indexOf(a)+1]},a.revert=function(A,Y){if(!Y)return a.kill(!0);var U=A!==!1||!a.enabled,ne=_t;U!==a.isReverted&&(U&&(Ke=Math.max(r(),a.scroll.rec||0),i=a.progress,ct=o&&o.progress()),O&&[O,Q,d,m].forEach(function(Ie){return Ie.style.display=U?"none":"block"}),U&&(_t=a,a.update(U)),g&&(!X||!a.isActive)&&(U?di(g,te,Ge):qn(g,te,Ut(g),be)),U||a.update(U),_t=ne,a.isReverted=U)},a.refresh=function(A,Y,U,ne){if(!((_t||!a.enabled)&&!Y)){if(g&&A&&Wt){mt(p,"scrollEnd",gr);return}!At&&J&&J(a),_t=a,C.tween&&!U&&(C.tween.kill(),C.tween=0),Ae&&Ae.pause(),T&&o&&o.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var Ie=ee(),se=me(),ae=I?I.duration():$t(P,M),Se=he<=.01,ke=0,qe=ne||0,Ye=po(U)?U.end:t.end,Ot=t.endTrigger||v,nt=po(U)?U.start:t.start||(t.start===0||!v?0:g?"0 0":"0 100%"),ht=a.pinnedContainer=t.pinnedContainer&&It(t.pinnedContainer,a),st=v&&Math.max(0,ze.indexOf(a))||0,Je=st,We,tt,Ze,Vt,Xe,et,xt,Yt,ln,uo,Ht,Ft,cn;for(R&&po(U)&&(Ft=ye.getProperty(d,M.p),cn=ye.getProperty(m,M.p));Je-- >0;)et=ze[Je],et.end||et.refresh(0,1)||(_t=a),xt=et.pin,xt&&(xt===v||xt===g||xt===ht)&&!et.isReverted&&(uo||(uo=[]),uo.unshift(et),et.revert(!0,!0)),et!==ze[Je]&&(st--,Je--);for(Tt(nt)&&(nt=nt(a)),nt=Ts(nt,"start",a),B=Is(nt,v,Ie,M,r(),O,d,a,se,pe,de,ae,I,a._startClamp&&"_startClamp")||(g?-.001:0),Tt(Ye)&&(Ye=Ye(a)),Bt(Ye)&&!Ye.indexOf("+=")&&(~Ye.indexOf(" ")?Ye=(Bt(nt)?nt.split(" ")[0]:"")+Ye:(ke=Cn(Ye.substr(2),Ie),Ye=Bt(nt)?nt:(I?ye.utils.mapRange(0,I.duration(),I.scrollTrigger.start,I.scrollTrigger.end,B):B)+ke,Ot=v)),Ye=Ts(Ye,"end",a),b=Math.max(B,Is(Ye||(Ot?"100% 0":ae),Ot,Ie,M,r()+ke,Q,m,a,se,pe,de,ae,I,a._endClamp&&"_endClamp"))||-.001,ke=0,Je=st;Je--;)et=ze[Je],xt=et.pin,xt&&et.start-et._pinPush<=B&&!I&&et.end>0&&(We=et.end-(a._startClamp?Math.max(0,et.start):et.start),(xt===v&&et.start-et._pinPush<B||xt===ht)&&isNaN(nt)&&(ke+=We*(1-et.progress)),xt===g&&(qe+=We));if(B+=ke,b+=ke,a._startClamp&&(a._startClamp+=ke),a._endClamp&&!At&&(a._endClamp=b||-.001,b=Math.min(b,$t(P,M))),he=b-B||(B-=.01)&&.001,Se&&(i=ye.utils.clamp(0,1,ye.utils.normalize(B,b,Ke))),a._pinPush=qe,O&&ke&&(We={},We[M.a]="+="+ke,ht&&(We[M.p]="-="+r()),ye.set([O,Q],We)),g&&!(ss&&a.end>=$t(P,M)))We=Ut(g),Vt=M===pt,Ze=r(),we=parseFloat(re(M.a))+qe,!ae&&b>1&&(Ht=(ue?ot.scrollingElement||zt:P).style,Ht={style:Ht,value:Ht["overflow"+M.a.toUpperCase()]},ue&&Ut(Qe)["overflow"+M.a.toUpperCase()]!=="scroll"&&(Ht.style["overflow"+M.a.toUpperCase()]="scroll")),qn(g,te,We),H=wn(g),tt=Jt(g,!0),Yt=de&&co(P,Vt?kt:pt)(),w?(be=[w+M.os2,he+qe+ut],be.t=te,Je=w===at?Ln(g,M)+he+qe:0,Je&&(be.push(M.d,Je+ut),te.style.flexBasis!=="auto"&&(te.style.flexBasis=Je+ut)),Io(be),ht&&ze.forEach(function(Lo){Lo.pin===ht&&Lo.vars.pinSpacing!==!1&&(Lo._subPinOffset=!0)}),de&&r(Ke)):(Je=Ln(g,M),Je&&te.style.flexBasis!=="auto"&&(te.style.flexBasis=Je+ut)),de&&(Xe={top:tt.top+(Vt?Ze-B:Yt)+ut,left:tt.left+(Vt?Yt:Ze-B)+ut,boxSizing:"border-box",position:"fixed"},Xe[yo]=Xe["max"+Oo]=Math.ceil(tt.width)+ut,Xe[xo]=Xe["max"+gs]=Math.ceil(tt.height)+ut,Xe[Gt]=Xe[Gt+Jo]=Xe[Gt+Qo]=Xe[Gt+en]=Xe[Gt+Ko]="0",Xe[at]=We[at],Xe[at+Jo]=We[at+Jo],Xe[at+Qo]=We[at+Qo],Xe[at+en]=We[at+en],Xe[at+Ko]=We[at+Ko],Ve=gi(Ge,Xe,X),At&&r(0)),o?(ln=o._initted,Wn(1),o.render(o.duration(),!0,!0),_e=re(M.a)-we+he+qe,ie=Math.abs(he-_e)>1,de&&ie&&Ve.splice(Ve.length-2,2),o.render(0,!0,!0),ln||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Wn(0)):_e=he,Ht&&(Ht.value?Ht.style["overflow"+M.a.toUpperCase()]=Ht.value:Ht.style.removeProperty("overflow-"+M.a));else if(v&&r()&&!I)for(tt=v.parentNode;tt&&tt!==Qe;)tt._pinOffset&&(B-=tt._pinOffset,b-=tt._pinOffset),tt=tt.parentNode;uo&&uo.forEach(function(Lo){return Lo.revert(!1,!0)}),a.start=B,a.end=b,z=j=At?Ke:r(),!I&&!At&&(z<Ke&&r(Ke),a.scroll.rec=0),a.revert(!1,!0),c=vt(),Fe&&(h=-1,Fe.restart(!0)),_t=0,o&&fe&&(o._initted||ct)&&o.progress()!==ct&&o.progress(ct||0,!0).render(o.time(),!0,!0),(Se||i!==a.progress||I||T||o&&!o._initted)&&(o&&!fe&&o.totalProgress(I&&B<-.001&&!i?ye.utils.normalize(B,b,0):i,!0),a.progress=Se||(z-B)/he===i?0:i),g&&w&&(te._pinOffset=Math.round(a.progress*_e)),Ae&&Ae.invalidate(),isNaN(Ft)||(Ft-=ye.getProperty(d,M.p),cn-=ye.getProperty(m,M.p),bn(d,M,Ft),bn(O,M,Ft-(ne||0)),bn(m,M,cn),bn(Q,M,cn-(ne||0))),Se&&!At&&a.update(),F&&!At&&!oe&&(oe=!0,F(a),oe=!1)}},a.getVelocity=function(){return(r()-j)/(vt()-Fo)*1e3||0},a.endAnimation=function(){zo(a.callbackAnimation),o&&(Ae?Ae.progress(1):o.paused()?fe||zo(o,a.direction<0,1):zo(o,o.reversed()))},a.labelToScroll=function(A){return o&&o.labels&&(B||a.refresh()||B)+o.labels[A]/o.duration()*he||0},a.getTrailing=function(A){var Y=ze.indexOf(a),U=a.direction>0?ze.slice(0,Y).reverse():ze.slice(Y+1);return(Bt(A)?U.filter(function(ne){return ne.vars.preventOverlaps===A}):U).filter(function(ne){return a.direction>0?ne.end<=B:ne.start>=b})},a.update=function(A,Y,U){if(!(I&&!U&&!A)){var ne=At===!0?Ke:a.scroll(),Ie=A?0:(ne-B)/he,se=Ie<0?0:Ie>1?1:Ie||0,ae=a.progress,Se,ke,qe,Ye,Ot,nt,ht,st;if(Y&&(j=z,z=I?r():ne,E&&(lt=Te,Te=o&&!fe?o.totalProgress():se)),y&&g&&!_t&&!dn&&Wt&&(!se&&B<ne+(ne-j)/(vt()-Fo)*y?se=1e-4:se===1&&b>ne+(ne-j)/(vt()-Fo)*y&&(se=.9999)),se!==ae&&a.enabled){if(Se=a.isActive=!!se&&se<1,ke=!!ae&&ae<1,nt=Se!==ke,Ot=nt||!!se!=!!ae,a.direction=se>ae?1:-1,a.progress=se,Ot&&!_t&&(qe=se&&!ae?0:se===1?1:ae===1?2:3,fe&&(Ye=!nt&&k[qe+1]!=="none"&&k[qe+1]||k[qe],st=o&&(Ye==="complete"||Ye==="reset"||Ye in o))),K&&(nt||st)&&(st||S||!o)&&(Tt(K)?K(a):a.getTrailing(K).forEach(function(Ze){return Ze.endAnimation()})),fe||(Ae&&!_t&&!dn?(Ae._dp._time-Ae._start!==Ae._time&&Ae.render(Ae._dp._time-Ae._start),Ae.resetTo?Ae.resetTo("totalProgress",se,o._tTime/o._tDur):(Ae.vars.totalProgress=se,Ae.invalidate().restart())):o&&o.totalProgress(se,!!(_t&&(c||A)))),g){if(A&&w&&(te.style[w+M.os2]=ve),!de)ge(Uo(we+_e*se));else if(Ot){if(ht=!A&&se>ae&&b+1>ne&&ne+1>=$t(P,M),X)if(!A&&(Se||ht)){var Je=Jt(g,!0),We=ne-B;Rs(g,Qe,Je.top+(M===pt?We:0)+ut,Je.left+(M===pt?0:We)+ut)}else Rs(g,te);Io(Se||ht?Ve:H),ie&&se<1&&Se||ge(we+(se===1&&!ht?_e:0))}}E&&!C.tween&&!_t&&!dn&&Fe.restart(!0),f&&(nt||L&&se&&(se<1||!Yn))&&nn(f.targets).forEach(function(Ze){return Ze.classList[Se||L?"add":"remove"](f.className)}),u&&!fe&&!A&&u(a),Ot&&!_t?(fe&&(st&&(Ye==="complete"?o.pause().totalProgress(1):Ye==="reset"?o.restart(!0).pause():Ye==="restart"?o.restart(!0):o[Ye]()),u&&u(a)),(nt||!Yn)&&(D&&nt&&jn(a,D),le[qe]&&jn(a,le[qe]),L&&(se===1?a.kill(!1,1):le[qe]=0),nt||(qe=se===1?1:3,le[qe]&&jn(a,le[qe]))),Z&&!Se&&Math.abs(a.getVelocity())>(Wo(Z)?Z:2500)&&(zo(a.callbackAnimation),Ae?Ae.progress(1):zo(o,Ye==="reverse"?1:!se,1))):fe&&u&&!_t&&u(a)}if(Ee){var tt=I?ne/I.duration()*(I._caScrollDist||0):ne;Pe(tt+(d._isFlipped?1:0)),Ee(tt)}Dt&&Dt(-ne/I.duration()*(I._caScrollDist||0))}},a.enable=function(A,Y){a.enabled||(a.enabled=!0,mt(P,"resize",Yo),ue||mt(P,"scroll",Co),J&&mt(p,"refreshInit",J),A!==!1&&(a.progress=i=0,z=j=h=r()),Y!==!1&&a.refresh())},a.getTween=function(A){return A&&C?C.tween:Ae},a.setPositions=function(A,Y,U,ne){if(I){var Ie=I.scrollTrigger,se=I.duration(),ae=Ie.end-Ie.start;A=Ie.start+ae*A/se,Y=Ie.start+ae*Y/se}a.refresh(!1,!1,{start:Ms(A,U&&!!a._startClamp),end:Ms(Y,U&&!!a._endClamp)},ne),a.update()},a.adjustPinSpacing=function(A){if(be&&A){var Y=be.indexOf(M.d)+1;be[Y]=parseFloat(be[Y])+A+ut,be[1]=parseFloat(be[1])+A+ut,Io(be)}},a.disable=function(A,Y){if(a.enabled&&(A!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,Y||Ae&&Ae.pause(),Ke=0,G&&(G.uncache=1),J&&gt(p,"refreshInit",J),Fe&&(Fe.pause(),C.tween&&C.tween.kill()&&(C.tween=0)),!ue)){for(var U=ze.length;U--;)if(ze[U].scroller===P&&ze[U]!==a)return;gt(P,"resize",Yo),ue||gt(P,"scroll",Co)}},a.kill=function(A,Y){a.disable(A,Y),Ae&&!Y&&Ae.kill(),x&&delete rs[x];var U=ze.indexOf(a);U>=0&&ze.splice(U,1),U===Et&&En>0&&Et--,U=0,ze.forEach(function(ne){return ne.scroller===a.scroller&&(U=1)}),U||At||(a.scroll.rec=0),o&&(o.scrollTrigger=null,A&&o.revert({kill:!1}),Y||o.kill()),O&&[O,Q,d,m].forEach(function(ne){return ne.parentNode&&ne.parentNode.removeChild(ne)}),tn===a&&(tn=0),g&&(G&&(G.uncache=1),U=0,ze.forEach(function(ne){return ne.pin===g&&U++}),U||(G.spacer=0)),t.onKill&&t.onKill(a)},ze.push(a),a.enable(!1,!1),Ue&&Ue(a),o&&o.add&&!he){var Me=a.update;a.update=function(){a.update=Me,He.cache++,B||b||a.refresh()},ye.delayedCall(.01,a.update),he=.01,B=b=0}else a.refresh();g&&pi()},p.register=function(t){return So||(ye=t||cr(),lr()&&window.document&&p.enable(),So=Go),So},p.defaults=function(t){if(t)for(var o in t)yn[o]=t[o];return yn},p.disable=function(t,o){Go=0,ze.forEach(function(u){return u[o?"kill":"disable"](t)}),gt(Ne,"wheel",Co),gt(ot,"scroll",Co),clearInterval(pn),gt(ot,"touchcancel",qt),gt(Qe,"touchstart",qt),gn(gt,ot,"pointerdown,touchstart,mousedown",Ps),gn(gt,ot,"pointerup,touchend,mouseup",Cs),Rn.kill(),hn(gt);for(var s=0;s<He.length;s+=3)mn(gt,He[s],He[s+1]),mn(gt,He[s],He[s+2])},p.enable=function(){if(Ne=window,ot=document,zt=ot.documentElement,Qe=ot.body,ye&&(nn=ye.utils.toArray,$o=ye.utils.clamp,ns=ye.core.context||qt,Wn=ye.core.suppressOverwrites||qt,fs=Ne.history.scrollRestoration||"auto",is=Ne.pageYOffset||0,ye.core.globals("ScrollTrigger",p),Qe)){Go=1,Do=document.createElement("div"),Do.style.height="100vh",Do.style.position="absolute",xr(),ri(),rt.register(ye),p.isTouch=rt.isTouch,so=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),os=rt.isTouch===1,mt(Ne,"wheel",Co),us=[Ne,ot,zt,Qe],ye.matchMedia?(p.matchMedia=function(D){var F=ye.matchMedia(),S;for(S in D)F.add(S,D[S]);return F},ye.addEventListener("matchMediaInit",function(){return ys()}),ye.addEventListener("matchMediaRevert",function(){return mr()}),ye.addEventListener("matchMedia",function(){mo(0,1),vo("matchMedia")}),ye.matchMedia().add("(orientation: portrait)",function(){return Vn(),Vn})):console.warn("Requires GSAP 3.11.0 or later"),Vn(),mt(ot,"scroll",Co);var t=Qe.hasAttribute("style"),o=Qe.style,s=o.borderTopStyle,u=ye.core.Animation.prototype,f,x;for(u.revert||Object.defineProperty(u,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",f=Jt(Qe),pt.m=Math.round(f.top+pt.sc())||0,kt.m=Math.round(f.left+kt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(Qe.setAttribute("style",""),Qe.removeAttribute("style")),pn=setInterval(As,250),ye.delayedCall(.5,function(){return dn=0}),mt(ot,"touchcancel",qt),mt(Qe,"touchstart",qt),gn(mt,ot,"pointerdown,touchstart,mousedown",Ps),gn(mt,ot,"pointerup,touchend,mouseup",Cs),ts=ye.utils.checkPrefix("transform"),An.push(ts),So=vt(),Rn=ye.delayedCall(.2,mo).pause(),Eo=[ot,"visibilitychange",function(){var D=Ne.innerWidth,F=Ne.innerHeight;ot.hidden?(_s=D,vs=F):(_s!==D||vs!==F)&&Yo()},ot,"DOMContentLoaded",mo,Ne,"load",mo,Ne,"resize",Yo],hn(mt),ze.forEach(function(D){return D.enable(0,1)}),x=0;x<He.length;x+=3)mn(gt,He[x],He[x+1]),mn(gt,He[x],He[x+2])}},p.config=function(t){"limitCallbacks"in t&&(Yn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(pn)||(pn=o)&&setInterval(As,o),"ignoreMobileResize"in t&&(os=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(hn(gt)||hn(mt,t.autoRefreshEvents||"none"),rr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,o){var s=It(t),u=He.indexOf(s),f=bo(s);~u&&He.splice(u,f?6:2),o&&(f?Qt.unshift(Ne,o,Qe,o,zt,o):Qt.unshift(s,o))},p.clearMatchMedia=function(t){ze.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},p.isInViewport=function(t,o,s){var u=(Bt(t)?It(t):t).getBoundingClientRect(),f=u[s?yo:xo]*o||0;return s?u.right-f>0&&u.left+f<Ne.innerWidth:u.bottom-f>0&&u.top+f<Ne.innerHeight},p.positionInViewport=function(t,o,s){Bt(t)&&(t=It(t));var u=t.getBoundingClientRect(),f=u[s?yo:xo],x=o==null?f/2:o in Bn?Bn[o]*f:~o.indexOf("%")?parseFloat(o)*f/100:parseFloat(o)||0;return s?(u.left+x)/Ne.innerWidth:(u.top+x)/Ne.innerHeight},p.killAll=function(t){if(ze.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=_o.killAll||[];_o={},o.forEach(function(s){return s()})}},p}();Re.version="3.12.7";Re.saveStyles=function(p){return p?nn(p).forEach(function(e){if(e&&e.style){var n=Lt.indexOf(e);n>=0&&Lt.splice(n,5),Lt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),ye.core.getCache(e),ns())}}):Lt};Re.revert=function(p,e){return ys(!p,e)};Re.create=function(p,e){return new Re(p,e)};Re.refresh=function(p){return p?Yo(!0):(So||Re.register())&&mo(!0)};Re.update=function(p){return++He.cache&&to(p===!0?2:0)};Re.clearScrollMemory=yr;Re.maxScroll=function(p,e){return $t(p,e?kt:pt)};Re.getScrollFunc=function(p,e){return co(It(p),e?kt:pt)};Re.getById=function(p){return rs[p]};Re.getAll=function(){return ze.filter(function(p){return p.vars.id!=="ScrollSmoother"})};Re.isScrolling=function(){return!!Wt};Re.snapDirectional=ms;Re.addEventListener=function(p,e){var n=_o[p]||(_o[p]=[]);~n.indexOf(e)||n.push(e)};Re.removeEventListener=function(p,e){var n=_o[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Re.batch=function(p,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,u=function(D,F){var S=[],v=[],g=ye.delayedCall(o,function(){F(S,v),S=[],v=[]}).pause();return function(w){S.length||g.restart(!0),S.push(w.trigger),v.push(w),s<=S.length&&g.progress(1)}},f;for(f in e)t[f]=f.substr(0,2)==="on"&&Tt(e[f])&&f!=="onRefreshInit"?u(f,e[f]):e[f];return Tt(s)&&(s=s(),mt(Re,"refresh",function(){return s=e.batchMax()})),nn(p).forEach(function(x){var D={};for(f in t)D[f]=t[f];D.trigger=x,n.push(Re.create(D))}),n};var Ls=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},Zn=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(rt.isTouch?" pinch-zoom":""):"none",e===zt&&p(Qe,n)},_n={auto:1,scroll:1},yi=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,u=s._gsap||ye.core.getCache(s),f=vt(),x;if(!u._isScrollT||f-u._isScrollT>2e3){for(;s&&s!==Qe&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(_n[(x=Ut(s)).overflowY]||_n[x.overflowX]));)s=s.parentNode;u._isScroll=s&&s!==t&&!bo(s)&&(_n[(x=Ut(s)).overflowY]||_n[x.overflowX]),u._isScrollT=f}(u._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},br=function(e,n,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&yi,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&mt(ot,rt.eventTypes[0],zs,!1,!0)},onDisable:function(){return gt(ot,rt.eventTypes[0],zs,!0)}})},xi=/(input|label|select|textarea)/i,Bs,zs=function(e){var n=xi.test(e.target.tagName);(n||Bs)&&(e._gsapAllow=!0,Bs=n)},wi=function(e){po(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,u=n.onRelease,f,x,D=It(e.target)||zt,F=ye.core.globals().ScrollSmoother,S=F&&F.get(),v=so&&(e.content&&It(e.content)||S&&e.content!==!1&&!S.smooth()&&S.content()),g=co(D,pt),w=co(D,kt),T=1,y=(rt.isTouch&&Ne.visualViewport?Ne.visualViewport.scale*Ne.visualViewport.width:Ne.outerWidth)/Ne.innerWidth,N=0,$=Tt(o)?function(){return o(f)}:function(){return o||2.8},L,E,X=br(D,e.type,!0,s),q=function(){return E=!1},I=qt,Z=qt,K=function(){x=$t(D,pt),Z=$o(so?1:0,x),t&&(I=$o(0,$t(D,kt))),L=wo},M=function(){v._gsap.y=Uo(parseFloat(v._gsap.y)+g.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",g.offset=g.cacheID=0},fe=function(){if(E){requestAnimationFrame(q);var R=Uo(f.deltaY/2),pe=Z(g.v-R);if(v&&pe!==g.v+g.offset){g.offset=pe-g.v;var a=Uo((parseFloat(v&&v._gsap.y)||0)-g.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",v._gsap.y=a+"px",g.cacheID=He.cache,to()}return!0}g.offset&&M(),E=!0},P,V,ue,de,le=function(){K(),P.isActive()&&P.vars.scrollY>x&&(g()>x?P.progress(1)&&g(x):P.resetTo("scrollY",x))};return v&&ye.set(v,{y:"+=0"}),e.ignoreCheck=function(k){return so&&k.type==="touchmove"&&fe()||T>1.05&&k.type!=="touchstart"||f.isGesturing||k.touches&&k.touches.length>1},e.onPress=function(){E=!1;var k=T;T=Uo((Ne.visualViewport&&Ne.visualViewport.scale||1)/y),P.pause(),k!==T&&Zn(D,T>1.01?!0:t?!1:"x"),V=w(),ue=g(),K(),L=wo},e.onRelease=e.onGestureStart=function(k,R){if(g.offset&&M(),!R)de.restart(!0);else{He.cache++;var pe=$(),a,J;t&&(a=w(),J=a+pe*.05*-k.velocityX/.227,pe*=Ls(w,a,J,$t(D,kt)),P.vars.scrollX=I(J)),a=g(),J=a+pe*.05*-k.velocityY/.227,pe*=Ls(g,a,J,$t(D,pt)),P.vars.scrollY=Z(J),P.invalidate().duration(pe).play(.01),(so&&P.vars.scrollY>=x||a>=x-1)&&ye.to({},{onUpdate:le,duration:pe})}u&&u(k)},e.onWheel=function(){P._ts&&P.pause(),vt()-N>1e3&&(L=0,N=vt())},e.onChange=function(k,R,pe,a,J){if(wo!==L&&K(),R&&t&&w(I(a[2]===R?V+(k.startX-k.x):w()+R-a[1])),pe){g.offset&&M();var ee=J[2]===pe,me=ee?ue+k.startY-k.y:g()+pe-J[1],h=Z(me);ee&&me!==h&&(ue+=h-me),g(h)}(pe||R)&&to()},e.onEnable=function(){Zn(D,t?!1:"x"),Re.addEventListener("refresh",le),mt(Ne,"resize",le),g.smooth&&(g.target.style.scrollBehavior="auto",g.smooth=w.smooth=!1),X.enable()},e.onDisable=function(){Zn(D,!0),gt(Ne,"resize",le),Re.removeEventListener("refresh",le),X.kill()},e.lockAxis=e.lockAxis!==!1,f=new rt(e),f.iOS=so,so&&!g()&&g(1),so&&ye.ticker.add(qt),de=f._dc,P=ye.to(f,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:wr(g,g(),function(){return P.pause()})},onUpdate:to,onComplete:de.vars.onComplete}),f};Re.sort=function(p){if(Tt(p))return ze.sort(p);var e=Ne.pageYOffset||0;return Re.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+Ne.innerHeight}),ze.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Re.observe=function(p){return new rt(p)};Re.normalizeScroll=function(p){if(typeof p>"u")return Ct;if(p===!0&&Ct)return Ct.enable();if(p===!1){Ct&&Ct.kill(),Ct=p;return}var e=p instanceof rt?p:wi(p);return Ct&&Ct.target===e.target&&Ct.kill(),bo(e.target)&&(Ct=e),e};Re.core={_getVelocityProp:es,_inputObserver:br,_scrollers:He,_proxies:Qt,bridge:{ss:function(){Wt||vo("scrollStart"),Wt=vt()},ref:function(){return _t}}};cr()&&ye.registerPlugin(Re);var on=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(F){F.preventDefault(),t(++p%e.children.length)},!1);function n(F){return e.appendChild(F.dom),F}function t(F){for(var S=0;S<e.children.length;S++)e.children[S].style.display=S===F?"block":"none";p=F}var o=(performance||Date).now(),s=o,u=0,f=n(new on.Panel("FPS","#0ff","#002")),x=n(new on.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var D=n(new on.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){u++;var F=(performance||Date).now();if(x.update(F-o,200),F>=s+1e3&&(f.update(u*1e3/(F-s),100),s=F,u=0,D)){var S=performance.memory;D.update(S.usedJSHeapSize/1048576,S.jsHeapSizeLimit/1048576)}return F},update:function(){o=this.end()},domElement:e,setMode:t}};on.Panel=function(p,e,n){var t=1/0,o=0,s=Math.round,u=s(window.devicePixelRatio||1),f=80*u,x=48*u,D=3*u,F=2*u,S=3*u,v=15*u,g=74*u,w=30*u,T=document.createElement("canvas");T.width=f,T.height=x,T.style.cssText="width:80px;height:48px";var y=T.getContext("2d");return y.font="bold "+9*u+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,f,x),y.fillStyle=e,y.fillText(p,D,F),y.fillRect(S,v,g,w),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(S,v,g,w),{dom:T,update:function(N,$){t=Math.min(t,N),o=Math.max(o,N),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,f,v),y.fillStyle=e,y.fillText(s(N)+" "+p+" ("+s(t)+"-"+s(o)+")",D,F),y.drawImage(T,S+u,v,g-u,w,S,v,g-u,w),y.fillRect(S+g-u,v,u,w),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(S+g-u,v,u,s((1-N/$)*w))}}};const _r={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class an{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const bi=new Dr(-1,1,1,-1,0,1);class _i extends ao{constructor(){super(),this.setAttribute("position",new Xo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Xo([0,2,0,0,2,0],2))}}const vi=new _i;class vr{constructor(e){this._mesh=new Be(vi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,bi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ti extends an{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof go?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Qn.clone(e.uniforms),this.material=new go({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new vr(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Ns extends an{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let u,f;this.inverse?(u=0,f=1):(u=1,f=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,u,4294967295),s.buffers.stencil.setClear(f),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Mi extends an{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Pi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new Le);this._width=t.width,this._height=t.height,n=new Tn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Mn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ti(_r),this.copyPass.material.blending=Ir,this.clock=new Rr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const u=this.passes[o];if(u.enabled!==!1){if(u.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),u.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),u.needsSwap){if(t){const f=this.renderer.getContext(),x=this.renderer.state.buffers.stencil;x.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),x.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}Ns!==void 0&&(u instanceof Ns?t=!0:u instanceof Mi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Le);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Ci extends an{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new St}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,u;this.overrideMaterial!==null&&(u=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=u),e.autoClear=o}}const Si={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new St(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class To extends an{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new Le(e.x,e.y):new Le(256,256),this.clearColor=new St(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),u=Math.round(this.resolution.y/2);this.renderTargetBright=new Tn(s,u,{type:Mn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let S=0;S<this.nMips;S++){const v=new Tn(s,u,{type:Mn});v.texture.name="UnrealBloomPass.h"+S,v.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(v);const g=new Tn(s,u,{type:Mn});g.texture.name="UnrealBloomPass.v"+S,g.texture.generateMipmaps=!1,this.renderTargetsVertical.push(g),s=Math.round(s/2),u=Math.round(u/2)}const f=Si;this.highPassUniforms=Qn.clone(f.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new go({uniforms:this.highPassUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),this.separableBlurMaterials=[];const x=[3,5,7,9,11];s=Math.round(this.resolution.x/2),u=Math.round(this.resolution.y/2);for(let S=0;S<this.nMips;S++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(x[S])),this.separableBlurMaterials[S].uniforms.invSize.value=new Le(1/s,1/u),s=Math.round(s/2),u=Math.round(u/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const D=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=D,this.bloomTintColors=[new De(1,1,1),new De(1,1,1),new De(1,1,1),new De(1,1,1),new De(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const F=_r;this.copyUniforms=Qn.clone(F.uniforms),this.blendMaterial=new go({uniforms:this.copyUniforms,vertexShader:F.vertexShader,fragmentShader:F.fragmentShader,blending:Zt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new St,this.oldClearAlpha=1,this.basic=new ft,this.fsQuad=new vr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new Le(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const u=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let f=this.renderTargetBright;for(let x=0;x<this.nMips;x++)this.fsQuad.material=this.separableBlurMaterials[x],this.separableBlurMaterials[x].uniforms.colorTexture.value=f.texture,this.separableBlurMaterials[x].uniforms.direction.value=To.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[x]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[x].uniforms.colorTexture.value=this.renderTargetsHorizontal[x].texture,this.separableBlurMaterials[x].uniforms.direction.value=To.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[x]),e.clear(),this.fsQuad.render(e),f=this.renderTargetsVertical[x];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=u}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new go({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Le(.5,.5)},direction:{value:new Le(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new go({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}To.BlurDirectionX=new Le(1,0);To.BlurDirectionY=new Le(0,1);class ls extends Or{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Ei=Nr;class zn extends Xs{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,u=new js(s.manager);u.setPath(s.path),u.setRequestHeader(s.requestHeader),u.setWithCredentials(s.withCredentials),u.load(e,function(f){try{n(s.parse(f))}catch(x){o?o(x):console.error(x),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(h,c){if(h.nodeType!==1)return;const i=E(h);let r=!1,C=null;switch(h.nodeName){case"svg":c=w(h,c);break;case"style":s(h);break;case"g":c=w(h,c);break;case"path":c=w(h,c),h.hasAttribute("d")&&(C=o(h));break;case"rect":c=w(h,c),C=x(h);break;case"polygon":c=w(h,c),C=D(h);break;case"polyline":c=w(h,c),C=F(h);break;case"circle":c=w(h,c),C=S(h);break;case"ellipse":c=w(h,c),C=v(h);break;case"line":c=w(h,c),C=g(h);break;case"defs":r=!0;break;case"use":c=w(h,c);const z=(h.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),j=h.viewportElement.getElementById(z);j?t(j,c):console.warn("SVGLoader: 'use node' references non-existent node id: "+z);break}C&&(c.fill!==void 0&&c.fill!=="none"&&C.color.setStyle(c.fill,Ei),q(C,J),P.push(C),C.userData={node:h,style:c});const G=h.childNodes;for(let _=0;_<G.length;_++){const z=G[_];r&&z.nodeName!=="style"&&z.nodeName!=="defs"||t(z,c)}i&&(ue.pop(),ue.length>0?J.copy(ue[ue.length-1]):J.identity())}function o(h){const c=new no,i=new Le,r=new Le,C=new Le;let G=!0,_=!1;const z=h.getAttribute("d");if(z===""||z==="none")return null;const j=z.match(/[a-df-z][^a-df-z]*/ig);for(let B=0,b=j.length;B<b;B++){const O=j[B],Q=O.charAt(0),d=O.slice(1).trim();G===!0&&(_=!0,G=!1);let m;switch(Q){case"M":m=y(d);for(let l=0,oe=m.length;l<oe;l+=2)i.x=m[l+0],i.y=m[l+1],r.x=i.x,r.y=i.y,l===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),l===0&&C.copy(i);break;case"H":m=y(d);for(let l=0,oe=m.length;l<oe;l++)i.x=m[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&_===!0&&C.copy(i);break;case"V":m=y(d);for(let l=0,oe=m.length;l<oe;l++)i.y=m[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&_===!0&&C.copy(i);break;case"L":m=y(d);for(let l=0,oe=m.length;l<oe;l+=2)i.x=m[l+0],i.y=m[l+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&_===!0&&C.copy(i);break;case"C":m=y(d);for(let l=0,oe=m.length;l<oe;l+=6)c.bezierCurveTo(m[l+0],m[l+1],m[l+2],m[l+3],m[l+4],m[l+5]),r.x=m[l+2],r.y=m[l+3],i.x=m[l+4],i.y=m[l+5],l===0&&_===!0&&C.copy(i);break;case"S":m=y(d);for(let l=0,oe=m.length;l<oe;l+=4)c.bezierCurveTo(T(i.x,r.x),T(i.y,r.y),m[l+0],m[l+1],m[l+2],m[l+3]),r.x=m[l+0],r.y=m[l+1],i.x=m[l+2],i.y=m[l+3],l===0&&_===!0&&C.copy(i);break;case"Q":m=y(d);for(let l=0,oe=m.length;l<oe;l+=4)c.quadraticCurveTo(m[l+0],m[l+1],m[l+2],m[l+3]),r.x=m[l+0],r.y=m[l+1],i.x=m[l+2],i.y=m[l+3],l===0&&_===!0&&C.copy(i);break;case"T":m=y(d);for(let l=0,oe=m.length;l<oe;l+=2){const he=T(i.x,r.x),Ge=T(i.y,r.y);c.quadraticCurveTo(he,Ge,m[l+0],m[l+1]),r.x=he,r.y=Ge,i.x=m[l+0],i.y=m[l+1],l===0&&_===!0&&C.copy(i)}break;case"A":m=y(d,[3,4],7);for(let l=0,oe=m.length;l<oe;l+=7){if(m[l+5]==i.x&&m[l+6]==i.y)continue;const he=i.clone();i.x=m[l+5],i.y=m[l+6],r.x=i.x,r.y=i.y,u(c,m[l],m[l+1],m[l+2],m[l+3],m[l+4],he,i),l===0&&_===!0&&C.copy(i)}break;case"m":m=y(d);for(let l=0,oe=m.length;l<oe;l+=2)i.x+=m[l+0],i.y+=m[l+1],r.x=i.x,r.y=i.y,l===0?c.moveTo(i.x,i.y):c.lineTo(i.x,i.y),l===0&&C.copy(i);break;case"h":m=y(d);for(let l=0,oe=m.length;l<oe;l++)i.x+=m[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&_===!0&&C.copy(i);break;case"v":m=y(d);for(let l=0,oe=m.length;l<oe;l++)i.y+=m[l],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&_===!0&&C.copy(i);break;case"l":m=y(d);for(let l=0,oe=m.length;l<oe;l+=2)i.x+=m[l+0],i.y+=m[l+1],r.x=i.x,r.y=i.y,c.lineTo(i.x,i.y),l===0&&_===!0&&C.copy(i);break;case"c":m=y(d);for(let l=0,oe=m.length;l<oe;l+=6)c.bezierCurveTo(i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3],i.x+m[l+4],i.y+m[l+5]),r.x=i.x+m[l+2],r.y=i.y+m[l+3],i.x+=m[l+4],i.y+=m[l+5],l===0&&_===!0&&C.copy(i);break;case"s":m=y(d);for(let l=0,oe=m.length;l<oe;l+=4)c.bezierCurveTo(T(i.x,r.x),T(i.y,r.y),i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3]),r.x=i.x+m[l+0],r.y=i.y+m[l+1],i.x+=m[l+2],i.y+=m[l+3],l===0&&_===!0&&C.copy(i);break;case"q":m=y(d);for(let l=0,oe=m.length;l<oe;l+=4)c.quadraticCurveTo(i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3]),r.x=i.x+m[l+0],r.y=i.y+m[l+1],i.x+=m[l+2],i.y+=m[l+3],l===0&&_===!0&&C.copy(i);break;case"t":m=y(d);for(let l=0,oe=m.length;l<oe;l+=2){const he=T(i.x,r.x),Ge=T(i.y,r.y);c.quadraticCurveTo(he,Ge,i.x+m[l+0],i.y+m[l+1]),r.x=he,r.y=Ge,i.x=i.x+m[l+0],i.y=i.y+m[l+1],l===0&&_===!0&&C.copy(i)}break;case"a":m=y(d,[3,4],7);for(let l=0,oe=m.length;l<oe;l+=7){if(m[l+5]==0&&m[l+6]==0)continue;const he=i.clone();i.x+=m[l+5],i.y+=m[l+6],r.x=i.x,r.y=i.y,u(c,m[l],m[l+1],m[l+2],m[l+3],m[l+4],he,i),l===0&&_===!0&&C.copy(i)}break;case"Z":case"z":c.currentPath.autoClose=!0,c.currentPath.curves.length>0&&(i.copy(C),c.currentPath.currentPoint.copy(i),G=!0);break;default:console.warn(O)}_=!1}return c}function s(h){if(!(!h.sheet||!h.sheet.cssRules||!h.sheet.cssRules.length))for(let c=0;c<h.sheet.cssRules.length;c++){const i=h.sheet.cssRules[c];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(C=>C.trim());for(let C=0;C<r.length;C++){const G=Object.fromEntries(Object.entries(i.style).filter(([,_])=>_!==""));V[r[C]]=Object.assign(V[r[C]]||{},G)}}}function u(h,c,i,r,C,G,_,z){if(c==0||i==0){h.lineTo(z.x,z.y);return}r=r*Math.PI/180,c=Math.abs(c),i=Math.abs(i);const j=(_.x-z.x)/2,B=(_.y-z.y)/2,b=Math.cos(r)*j+Math.sin(r)*B,O=-Math.sin(r)*j+Math.cos(r)*B;let Q=c*c,d=i*i;const m=b*b,l=O*O,oe=m/Q+l/d;if(oe>1){const _e=Math.sqrt(oe);c=_e*c,i=_e*i,Q=c*c,d=i*i}const he=Q*l+d*m,Ge=(Q*d-he)/he;let Ve=Math.sqrt(Math.max(0,Ge));C===G&&(Ve=-Ve);const H=Ve*c*O/i,te=-Ve*i*b/c,xe=Math.cos(r)*H-Math.sin(r)*te+(_.x+z.x)/2,re=Math.sin(r)*H+Math.cos(r)*te+(_.y+z.y)/2,ge=f(1,0,(b-H)/c,(O-te)/i),we=f((b-H)/c,(O-te)/i,(-b-H)/c,(-O-te)/i)%(Math.PI*2);h.currentPath.absellipse(xe,re,c,i,ge,ge+we,G===0,r)}function f(h,c,i,r){const C=h*i+c*r,G=Math.sqrt(h*h+c*c)*Math.sqrt(i*i+r*r);let _=Math.acos(Math.max(-1,Math.min(1,C/G)));return h*r-c*i<0&&(_=-_),_}function x(h){const c=L(h.getAttribute("x")||0),i=L(h.getAttribute("y")||0),r=L(h.getAttribute("rx")||h.getAttribute("ry")||0),C=L(h.getAttribute("ry")||h.getAttribute("rx")||0),G=L(h.getAttribute("width")),_=L(h.getAttribute("height")),z=1-.551915024494,j=new no;return j.moveTo(c+r,i),j.lineTo(c+G-r,i),(r!==0||C!==0)&&j.bezierCurveTo(c+G-r*z,i,c+G,i+C*z,c+G,i+C),j.lineTo(c+G,i+_-C),(r!==0||C!==0)&&j.bezierCurveTo(c+G,i+_-C*z,c+G-r*z,i+_,c+G-r,i+_),j.lineTo(c+r,i+_),(r!==0||C!==0)&&j.bezierCurveTo(c+r*z,i+_,c,i+_-C*z,c,i+_-C),j.lineTo(c,i+C),(r!==0||C!==0)&&j.bezierCurveTo(c,i+C*z,c+r*z,i,c+r,i),j}function D(h){function c(G,_,z){const j=L(_),B=L(z);C===0?r.moveTo(j,B):r.lineTo(j,B),C++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new no;let C=0;return h.getAttribute("points").replace(i,c),r.currentPath.autoClose=!0,r}function F(h){function c(G,_,z){const j=L(_),B=L(z);C===0?r.moveTo(j,B):r.lineTo(j,B),C++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new no;let C=0;return h.getAttribute("points").replace(i,c),r.currentPath.autoClose=!1,r}function S(h){const c=L(h.getAttribute("cx")||0),i=L(h.getAttribute("cy")||0),r=L(h.getAttribute("r")||0),C=new Hn;C.absarc(c,i,r,0,Math.PI*2);const G=new no;return G.subPaths.push(C),G}function v(h){const c=L(h.getAttribute("cx")||0),i=L(h.getAttribute("cy")||0),r=L(h.getAttribute("rx")||0),C=L(h.getAttribute("ry")||0),G=new Hn;G.absellipse(c,i,r,C,0,Math.PI*2);const _=new no;return _.subPaths.push(G),_}function g(h){const c=L(h.getAttribute("x1")||0),i=L(h.getAttribute("y1")||0),r=L(h.getAttribute("x2")||0),C=L(h.getAttribute("y2")||0),G=new no;return G.moveTo(c,i),G.lineTo(r,C),G.currentPath.autoClose=!1,G}function w(h,c){c=Object.assign({},c);let i={};if(h.hasAttribute("class")){const _=h.getAttribute("class").split(/\s/).filter(Boolean).map(z=>z.trim());for(let z=0;z<_.length;z++)i=Object.assign(i,V["."+_[z]])}h.hasAttribute("id")&&(i=Object.assign(i,V["#"+h.getAttribute("id")]));function r(_,z,j){j===void 0&&(j=function(b){return b.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),b}),h.hasAttribute(_)&&(c[z]=j(h.getAttribute(_))),i[_]&&(c[z]=j(i[_])),h.style&&h.style[_]!==""&&(c[z]=j(h.style[_]))}function C(_){return Math.max(0,Math.min(1,L(_)))}function G(_){return Math.max(0,L(_))}return r("fill","fill"),r("fill-opacity","fillOpacity",C),r("fill-rule","fillRule"),r("opacity","opacity",C),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",C),r("stroke-width","strokeWidth",G),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",G),r("visibility","visibility"),c}function T(h,c){return h-(c-h)}function y(h,c,i){if(typeof h!="string")throw new TypeError("Invalid input: "+typeof h);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},C=0,G=1,_=2,z=3;let j=C,B=!0,b="",O="";const Q=[];function d(he,Ge,Ve){const H=new SyntaxError('Unexpected character "'+he+'" at index '+Ge+".");throw H.partial=Ve,H}function m(){b!==""&&(O===""?Q.push(Number(b)):Q.push(Number(b)*Math.pow(10,Number(O)))),b="",O=""}let l;const oe=h.length;for(let he=0;he<oe;he++){if(l=h[he],Array.isArray(c)&&c.includes(Q.length%i)&&r.FLAGS.test(l)){j=G,b=l,m();continue}if(j===C){if(r.WHITESPACE.test(l))continue;if(r.DIGIT.test(l)||r.SIGN.test(l)){j=G,b=l;continue}if(r.POINT.test(l)){j=_,b=l;continue}r.COMMA.test(l)&&(B&&d(l,he,Q),B=!0)}if(j===G){if(r.DIGIT.test(l)){b+=l;continue}if(r.POINT.test(l)){b+=l,j=_;continue}if(r.EXP.test(l)){j=z;continue}r.SIGN.test(l)&&b.length===1&&r.SIGN.test(b[0])&&d(l,he,Q)}if(j===_){if(r.DIGIT.test(l)){b+=l;continue}if(r.EXP.test(l)){j=z;continue}r.POINT.test(l)&&b[b.length-1]==="."&&d(l,he,Q)}if(j===z){if(r.DIGIT.test(l)){O+=l;continue}if(r.SIGN.test(l)){if(O===""){O+=l;continue}O.length===1&&r.SIGN.test(O)&&d(l,he,Q)}}r.WHITESPACE.test(l)?(m(),j=C,B=!1):r.COMMA.test(l)?(m(),j=C,B=!0):r.SIGN.test(l)?(m(),j=G,b=l):r.POINT.test(l)?(m(),j=_,b=l):d(l,he,Q)}return m(),Q}const N=["mm","cm","in","pt","pc","px"],$={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function L(h){let c="px";if(typeof h=="string"||h instanceof String)for(let r=0,C=N.length;r<C;r++){const G=N[r];if(h.endsWith(G)){c=G,h=h.substring(0,h.length-G.length);break}}let i;return c==="px"&&n.defaultUnit!=="px"?i=$.in[n.defaultUnit]/n.defaultDPI:(i=$[c][n.defaultUnit],i<0&&(i=$[c].in*n.defaultDPI)),i*parseFloat(h)}function E(h){if(!(h.hasAttribute("transform")||h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))))return null;const c=X(h);return ue.length>0&&c.premultiply(ue[ue.length-1]),J.copy(c),ue.push(c),c}function X(h){const c=new Mo,i=de;if(h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))){const r=L(h.getAttribute("x")),C=L(h.getAttribute("y"));c.translate(r,C)}if(h.hasAttribute("transform")){const r=h.getAttribute("transform").split(")");for(let C=r.length-1;C>=0;C--){const G=r[C].trim();if(G==="")continue;const _=G.indexOf("("),z=G.length;if(_>0&&_<z){const j=G.slice(0,_),B=y(G.slice(_+1));switch(i.identity(),j){case"translate":if(B.length>=1){const b=B[0];let O=0;B.length>=2&&(O=B[1]),i.translate(b,O)}break;case"rotate":if(B.length>=1){let b=0,O=0,Q=0;b=B[0]*Math.PI/180,B.length>=3&&(O=B[1],Q=B[2]),le.makeTranslation(-O,-Q),k.makeRotation(b),R.multiplyMatrices(k,le),le.makeTranslation(O,Q),i.multiplyMatrices(le,R)}break;case"scale":if(B.length>=1){const b=B[0];let O=b;B.length>=2&&(O=B[1]),i.scale(b,O)}break;case"skewX":B.length===1&&i.set(1,Math.tan(B[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":B.length===1&&i.set(1,0,0,Math.tan(B[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":B.length===6&&i.set(B[0],B[2],B[4],B[1],B[3],B[5],0,0,1);break}}c.premultiply(i)}}return c}function q(h,c){function i(_){a.set(_.x,_.y,1).applyMatrix3(c),_.set(a.x,a.y)}function r(_){const z=_.xRadius,j=_.yRadius,B=Math.cos(_.aRotation),b=Math.sin(_.aRotation),O=new De(z*B,z*b,0),Q=new De(-j*b,j*B,0),d=O.applyMatrix3(c),m=Q.applyMatrix3(c),l=de.set(d.x,m.x,0,d.y,m.y,0,0,0,1),oe=le.copy(l).invert(),Ve=k.copy(oe).transpose().multiply(oe).elements,H=fe(Ve[0],Ve[1],Ve[4]),te=Math.sqrt(H.rt1),xe=Math.sqrt(H.rt2);if(_.xRadius=1/te,_.yRadius=1/xe,_.aRotation=Math.atan2(H.sn,H.cs),!((_.aEndAngle-_.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const ge=le.set(te,0,0,0,xe,0,0,0,1),we=k.set(H.cs,H.sn,0,-H.sn,H.cs,0,0,0,1),_e=ge.multiply(we).multiply(l),ve=be=>{const{x:Pe,y:ie}=new De(Math.cos(be),Math.sin(be),0).applyMatrix3(_e);return Math.atan2(ie,Pe)};_.aStartAngle=ve(_.aStartAngle),_.aEndAngle=ve(_.aEndAngle),I(c)&&(_.aClockwise=!_.aClockwise)}}function C(_){const z=K(c),j=M(c);_.xRadius*=z,_.yRadius*=j;const B=z>Number.EPSILON?Math.atan2(c.elements[1],c.elements[0]):Math.atan2(-c.elements[3],c.elements[4]);_.aRotation+=B,I(c)&&(_.aStartAngle*=-1,_.aEndAngle*=-1,_.aClockwise=!_.aClockwise)}const G=h.subPaths;for(let _=0,z=G.length;_<z;_++){const B=G[_].curves;for(let b=0;b<B.length;b++){const O=B[b];O.isLineCurve?(i(O.v1),i(O.v2)):O.isCubicBezierCurve?(i(O.v0),i(O.v1),i(O.v2),i(O.v3)):O.isQuadraticBezierCurve?(i(O.v0),i(O.v1),i(O.v2)):O.isEllipseCurve&&(pe.set(O.aX,O.aY),i(pe),O.aX=pe.x,O.aY=pe.y,Z(c)?r(O):C(O))}}}function I(h){const c=h.elements;return c[0]*c[4]-c[1]*c[3]<0}function Z(h){const c=h.elements,i=c[0]*c[3]+c[1]*c[4];if(i===0)return!1;const r=K(h),C=M(h);return Math.abs(i/(r*C))>Number.EPSILON}function K(h){const c=h.elements;return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function M(h){const c=h.elements;return Math.sqrt(c[3]*c[3]+c[4]*c[4])}function fe(h,c,i){let r,C,G,_,z;const j=h+i,B=h-i,b=Math.sqrt(B*B+4*c*c);return j>0?(r=.5*(j+b),z=1/r,C=h*z*i-c*z*c):j<0?C=.5*(j-b):(r=.5*b,C=-.5*b),B>0?G=B+b:G=B-b,Math.abs(G)>2*Math.abs(c)?(z=-2*c/G,_=1/Math.sqrt(1+z*z),G=z*_):Math.abs(c)===0?(G=1,_=0):(z=-.5*G/c,G=1/Math.sqrt(1+z*z),_=z*G),B>0&&(z=G,G=-_,_=z),{rt1:r,rt2:C,cs:G,sn:_}}const P=[],V={},ue=[],de=new Mo,le=new Mo,k=new Mo,R=new Mo,pe=new Le,a=new De,J=new Mo,ee=new DOMParser().parseFromString(e,"image/svg+xml");return t(ee.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:P,xml:ee.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(T,y,N,$){const L=T.x,E=y.x,X=N.x,q=$.x,I=T.y,Z=y.y,K=N.y,M=$.y,fe=(q-X)*(I-K)-(M-K)*(L-X),P=(E-L)*(I-K)-(Z-I)*(L-X),V=(M-K)*(E-L)-(q-X)*(Z-I),ue=fe/V,de=P/V;if(V===0&&fe!==0||ue<=0||ue>=1||de<0||de>1)return null;if(fe===0&&V===0){for(let le=0;le<2;le++)if(u(le===0?N:$,T,y),o.loc==t.ORIGIN){const k=le===0?N:$;return{x:k.x,y:k.y,t:o.t}}else if(o.loc==t.BETWEEN){const k=+(L+o.t*(E-L)).toPrecision(10),R=+(I+o.t*(Z-I)).toPrecision(10);return{x:k,y:R,t:o.t}}return null}else{for(let R=0;R<2;R++)if(u(R===0?N:$,T,y),o.loc==t.ORIGIN){const pe=R===0?N:$;return{x:pe.x,y:pe.y,t:o.t}}const le=+(L+ue*(E-L)).toPrecision(10),k=+(I+ue*(Z-I)).toPrecision(10);return{x:le,y:k,t:ue}}}function u(T,y,N){const $=N.x-y.x,L=N.y-y.y,E=T.x-y.x,X=T.y-y.y,q=$*X-E*L;if(T.x===y.x&&T.y===y.y){o.loc=t.ORIGIN,o.t=0;return}if(T.x===N.x&&T.y===N.y){o.loc=t.DESTINATION,o.t=1;return}if(q<-Number.EPSILON){o.loc=t.LEFT;return}if(q>Number.EPSILON){o.loc=t.RIGHT;return}if($*E<0||L*X<0){o.loc=t.BEHIND;return}if(Math.sqrt($*$+L*L)<Math.sqrt(E*E+X*X)){o.loc=t.BEYOND;return}let I;$!==0?I=E/$:I=X/L,o.loc=t.BETWEEN,o.t=I}function f(T,y){const N=[],$=[];for(let L=1;L<T.length;L++){const E=T[L-1],X=T[L];for(let q=1;q<y.length;q++){const I=y[q-1],Z=y[q],K=s(E,X,I,Z);K!==null&&N.find(M=>M.t<=K.t+Number.EPSILON&&M.t>=K.t-Number.EPSILON)===void 0&&(N.push(K),$.push(new Le(K.x,K.y)))}}return $}function x(T,y,N){const $=new Le;y.getCenter($);const L=[];return N.forEach(E=>{E.boundingBox.containsPoint($)&&f(T,E.points).forEach(q=>{L.push({identifier:E.identifier,isCW:E.isCW,point:q})})}),L.sort((E,X)=>E.point.x-X.point.x),L}function D(T,y,N,$,L){(L==null||L==="")&&(L="nonzero");const E=new Le;T.boundingBox.getCenter(E);const X=[new Le(N,E.y),new Le($,E.y)],q=x(X,T.boundingBox,y);q.sort((P,V)=>P.point.x-V.point.x);const I=[],Z=[];q.forEach(P=>{P.identifier===T.identifier?I.push(P):Z.push(P)});const K=I[0].point.x,M=[];let fe=0;for(;fe<Z.length&&Z[fe].point.x<K;)M.length>0&&M[M.length-1]===Z[fe].identifier?M.pop():M.push(Z[fe].identifier),fe++;if(M.push(T.identifier),L==="evenodd"){const P=M.length%2===0,V=M[M.length-2];return{identifier:T.identifier,isHole:P,for:V}}else if(L==="nonzero"){let P=!0,V=null,ue=null;for(let de=0;de<M.length;de++){const le=M[de];P?(ue=y[le].isCW,P=!1,V=le):ue!==y[le].isCW&&(ue=y[le].isCW,P=!0)}return{identifier:T.identifier,isHole:P,for:V}}else console.warn('fill-rule: "'+L+'" is currently not implemented.')}let F=999999999,S=-999999999,v=e.subPaths.map(T=>{const y=T.getPoints();let N=-999999999,$=999999999,L=-999999999,E=999999999;for(let X=0;X<y.length;X++){const q=y[X];q.y>N&&(N=q.y),q.y<$&&($=q.y),q.x>L&&(L=q.x),q.x<E&&(E=q.x)}return S<=L&&(S=L+1),F>=E&&(F=E-1),{curves:T.curves,points:y,isCW:Br.isClockWise(y),identifier:-1,boundingBox:new Lr(new Le(E,$),new Le(L,N))}});v=v.filter(T=>T.points.length>1);for(let T=0;T<v.length;T++)v[T].identifier=T;const g=v.map(T=>D(T,v,F,S,e.userData?e.userData.style.fillRule:void 0)),w=[];return v.forEach(T=>{if(!g[T.identifier].isHole){const N=new zr;N.curves=T.curves,g.filter(L=>L.isHole&&L.for===T.identifier).forEach(L=>{const E=v[L.identifier],X=new Hn;X.curves=E.curves,N.holes.push(X)}),w.push(N)}}),w}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],u=[],f=[];if(zn.pointsToStrokeWithBuffers(e,n,t,o,s,u,f)===0)return null;const x=new ao;return x.setAttribute("position",new Xo(s,3)),x.setAttribute("normal",new Xo(u,3)),x.setAttribute("uv",new Xo(f,2)),x}static pointsToStrokeWithBuffers(e,n,t,o,s,u,f,x){const D=new Le,F=new Le,S=new Le,v=new Le,g=new Le,w=new Le,T=new Le,y=new Le,N=new Le,$=new Le,L=new Le,E=new Le,X=new Le,q=new Le,I=new Le,Z=new Le,K=new Le;t=t!==void 0?t:12,o=o!==void 0?o:.001,x=x!==void 0?x:0,e=B(e);const M=e.length;if(M<2)return 0;const fe=e[0].equals(e[M-1]);let P,V=e[0],ue;const de=n.strokeWidth/2,le=1/(M-1);let k=0,R,pe,a,J,ee=!1,me=0,h=x*3,c=x*2;i(e[0],e[1],D).multiplyScalar(de),y.copy(e[0]).sub(D),N.copy(e[0]).add(D),$.copy(y),L.copy(N);for(let b=1;b<M;b++){P=e[b],b===M-1?fe?ue=e[1]:ue=void 0:ue=e[b+1];const O=D;if(i(V,P,O),S.copy(O).multiplyScalar(de),E.copy(P).sub(S),X.copy(P).add(S),R=k+le,pe=!1,ue!==void 0){i(P,ue,F),S.copy(F).multiplyScalar(de),q.copy(P).sub(S),I.copy(P).add(S),a=!0,S.subVectors(ue,V),O.dot(S)<0&&(a=!1),b===1&&(ee=a),S.subVectors(ue,P),S.normalize();const Q=Math.abs(O.dot(S));if(Q>Number.EPSILON){const d=de/Q;S.multiplyScalar(-d),v.subVectors(P,V),g.copy(v).setLength(d).add(S),Z.copy(g).negate();const m=g.length(),l=v.length();v.divideScalar(l),w.subVectors(ue,P);const oe=w.length();switch(w.divideScalar(oe),v.dot(Z)<l&&w.dot(Z)<oe&&(pe=!0),K.copy(g).add(P),Z.add(P),J=!1,pe?a?(I.copy(Z),X.copy(Z)):(q.copy(Z),E.copy(Z)):G(),n.strokeLineJoin){case"bevel":_(a,pe,R);break;case"round":z(a,pe),a?C(P,E,q,R,0):C(P,I,X,R,1);break;case"miter":case"miter-clip":default:const he=de*n.strokeMiterLimit/m;if(he<1)if(n.strokeLineJoin!=="miter-clip"){_(a,pe,R);break}else z(a,pe),a?(w.subVectors(K,E).multiplyScalar(he).add(E),T.subVectors(K,q).multiplyScalar(he).add(q),r(E,R,0),r(w,R,0),r(P,R,.5),r(P,R,.5),r(w,R,0),r(T,R,0),r(P,R,.5),r(T,R,0),r(q,R,0)):(w.subVectors(K,X).multiplyScalar(he).add(X),T.subVectors(K,I).multiplyScalar(he).add(I),r(X,R,1),r(w,R,1),r(P,R,.5),r(P,R,.5),r(w,R,1),r(T,R,1),r(P,R,.5),r(T,R,1),r(I,R,1));else pe?(a?(r(N,k,1),r(y,k,0),r(K,R,0),r(N,k,1),r(K,R,0),r(Z,R,1)):(r(N,k,1),r(y,k,0),r(K,R,1),r(y,k,0),r(Z,R,0),r(K,R,1)),a?q.copy(K):I.copy(K)):a?(r(E,R,0),r(K,R,0),r(P,R,.5),r(P,R,.5),r(K,R,0),r(q,R,0)):(r(X,R,1),r(K,R,1),r(P,R,.5),r(P,R,.5),r(K,R,1),r(I,R,1)),J=!0;break}}else G()}else G();!fe&&b===M-1&&j(e[0],$,L,a,!0,k),k=R,V=P,y.copy(q),N.copy(I)}if(!fe)j(P,E,X,a,!1,R);else if(pe&&s){let b=K,O=Z;ee!==a&&(b=Z,O=K),a?(J||ee)&&(O.toArray(s,0*3),O.toArray(s,3*3),J&&b.toArray(s,1*3)):(J||!ee)&&(O.toArray(s,1*3),O.toArray(s,3*3),J&&b.toArray(s,0*3))}return me;function i(b,O,Q){return Q.subVectors(O,b),Q.set(-Q.y,Q.x).normalize()}function r(b,O,Q){s&&(s[h]=b.x,s[h+1]=b.y,s[h+2]=0,u&&(u[h]=0,u[h+1]=0,u[h+2]=1),h+=3,f&&(f[c]=O,f[c+1]=Q,c+=2)),me+=3}function C(b,O,Q,d,m){D.copy(O).sub(b).normalize(),F.copy(Q).sub(b).normalize();let l=Math.PI;const oe=D.dot(F);Math.abs(oe)<1&&(l=Math.abs(Math.acos(oe))),l/=t,S.copy(O);for(let he=0,Ge=t-1;he<Ge;he++)v.copy(S).rotateAround(b,l),r(S,d,m),r(v,d,m),r(b,d,.5),S.copy(v);r(v,d,m),r(Q,d,m),r(b,d,.5)}function G(){r(N,k,1),r(y,k,0),r(E,R,0),r(N,k,1),r(E,R,0),r(X,R,1)}function _(b,O,Q){O?b?(r(N,k,1),r(y,k,0),r(E,R,0),r(N,k,1),r(E,R,0),r(Z,R,1),r(E,Q,0),r(q,Q,0),r(Z,Q,.5)):(r(N,k,1),r(y,k,0),r(X,R,1),r(y,k,0),r(Z,R,0),r(X,R,1),r(X,Q,1),r(Z,Q,0),r(I,Q,1)):b?(r(E,Q,0),r(q,Q,0),r(P,Q,.5)):(r(X,Q,1),r(I,Q,0),r(P,Q,.5))}function z(b,O){O&&(b?(r(N,k,1),r(y,k,0),r(E,R,0),r(N,k,1),r(E,R,0),r(Z,R,1),r(E,k,0),r(P,R,.5),r(Z,R,1),r(P,R,.5),r(q,k,0),r(Z,R,1)):(r(N,k,1),r(y,k,0),r(X,R,1),r(y,k,0),r(Z,R,0),r(X,R,1),r(X,k,1),r(Z,R,0),r(P,R,.5),r(P,R,.5),r(Z,R,0),r(I,k,1)))}function j(b,O,Q,d,m,l){switch(n.strokeLineCap){case"round":m?C(b,Q,O,l,.5):C(b,O,Q,l,.5);break;case"square":if(m)D.subVectors(O,b),F.set(D.y,-D.x),S.addVectors(D,F).add(b),v.subVectors(F,D).add(b),d?(S.toArray(s,1*3),v.toArray(s,0*3),v.toArray(s,3*3)):(S.toArray(s,1*3),f[3*2+1]===1?v.toArray(s,3*3):S.toArray(s,3*3),v.toArray(s,0*3));else{D.subVectors(Q,b),F.set(D.y,-D.x),S.addVectors(D,F).add(b),v.subVectors(F,D).add(b);const oe=s.length;d?(S.toArray(s,oe-1*3),v.toArray(s,oe-2*3),v.toArray(s,oe-4*3)):(v.toArray(s,oe-2*3),S.toArray(s,oe-1*3),v.toArray(s,oe-4*3))}break}}function B(b){let O=!1;for(let d=1,m=b.length-1;d<m;d++)if(b[d].distanceTo(b[d+1])<o){O=!0;break}if(!O)return b;const Q=[];Q.push(b[0]);for(let d=1,m=b.length-1;d<m;d++)b[d].distanceTo(b[d+1])>=o&&Q.push(b[d]);return Q.push(b[b.length-1]),Q}}}function Ai(p,e,n,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=n,u=8,f=24,x=.075,D=200;let F,S=[],v=[],g=[],w=[];const T=(E,X,q,I)=>{const Z=new Ro(E,E,E),K=new jo(Z),M=[new Rt({color:16711680,transparent:!0,opacity:I.opacity,blending:Zt}),new Rt({color:65280,transparent:!0,opacity:I.opacity,blending:Zt}),new Rt({color:255,transparent:!0,opacity:I.opacity,blending:Zt}),new Rt({color:65535,transparent:!0,opacity:I.opacity,blending:Zt}),new Rt({color:16711935,transparent:!0,opacity:I.opacity,blending:Zt}),new Rt({color:16776960,transparent:!0,opacity:I.opacity,blending:Zt})],fe=new yt,P=K.getAttribute("position").array,V=[];for(let le=0;le<P.length/3;le+=2)V.push(le,le+1);const ue=Array(6).fill(null).map(()=>new ao),de=Array(6).fill(null).map(()=>[]);for(let le=0;le<V.length/2;le++){const k=le%6;de[k].push(V[le*2],V[le*2+1])}return ue.forEach((le,k)=>{le.setIndex(de[k]),le.setAttribute("position",K.getAttribute("position"));const R=new wt(le,M[k]);fe.add(R)}),fe.position.z=X,fe.rotation.z=q,fe};if((()=>{const q=.9/(f-1);for(let V=0;V<f;V++)v[V]=new Rt({transparent:!0,opacity:1-V*q});if(F=new yt,!F){console.error("introGroup failed to initialize");return}for(let V=0;V<f;V++){const ue=o-V*u,de=T(ue,0,0,v[V]),le=de.children.map(k=>k.material);w.push(le.map(k=>({material:k,originalColor:k.color.clone()}))),F.add(de)}F.position.z=s,p.add(F),S.push(F),g=v.map(V=>V.opacity);const I=Oe.timeline({repeat:-1});I.to(F.rotation,{x:$e.degToRad(360),duration:12,ease:"none"},0),I.to(F.rotation,{y:$e.degToRad(360),duration:10,ease:"none"},0),I.to(F.rotation,{z:$e.degToRad(360),duration:14,ease:"none"},0);let Z=-1,K=0;const M=x*1e3,fe=f*M,P=V=>{const ue=V%fe/M,de=Math.floor(ue)%f;Z!==-1&&V-K>=M&&(w[Z].forEach(R=>{R.material.opacity=g[Z],R.material.color.copy(R.originalColor)}),Z=-1),Z===-1&&de!==Z&&(Z=de,K=V,w[Z].forEach(k=>{k.material.opacity=1,k.material.color.set(1,1,1)})),requestAnimationFrame(P)};requestAnimationFrame(P)})(),e.value){const E=N(e.value);p.add(E)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:S};function N(E){const X=new yt,q=$(E);q.position.set(0,-36,0),X.add(q),L(Z=>{X.add(Z),Oe.fromTo(q.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const K=Z.children.find(M=>M instanceof Be&&M!==Z.children[0]);if(K){const M=K.position.y;Oe.to(K.position,{y:M+3,duration:1,ease:"easeOut",onComplete:()=>{K.position.y=M},repeat:-1})}}),X.position.x=0,X.position.y=-240;const I=s-f*u;return X.position.z=I+D,X}function $(E){const X=new ls("SCROLL TO CONTINUE",{font:E,size:8,depth:0,curveSegments:12,bevelEnabled:!1});X.computeBoundingBox(),X.center();const q=new ft({color:16777215,transparent:!0,opacity:1});return new Be(X,q)}function L(E){new zn().load("/3D/mouse.svg",q=>{const I=q.paths;let Z=null,K=null,M=new yt;if(I.forEach((fe,P)=>{zn.createShapes(fe).forEach(ue=>{const de=new Hr(ue);de.computeBoundingBox();const le=new ft({color:16777215,transparent:!0,opacity:1,side:Xt}),k=new Be(de,le);k.scale.set(.05,.05,1),P===0?Z=k:P===1&&(K=k)})}),Z&&K){M.add(Z),M.add(K);const P=(Z.geometry.boundingBox.max.x-Z.geometry.boundingBox.min.x)*Z.scale.x/2;M.position.x=-P,M.rotation.x=Math.PI,E(M)}})}}function ki(p,e,n,t,o,s,u,f){const x=rn(),D=Vs(),{CUBE_SIZE:F,CUBE_SPACING:S,FIRST_CUBE_Z:v}=e,g=v-(n.length+1)*S,w=65535,T=16711935,y=$e.degToRad(15),N=1e3,$=.5,L=65280,E=80,X=1,q=15,I=.1,Z="ENTER TO LEARN MORE",K=D.isMobile?1:.5,M=40,fe=.125,P=100,V=8,ue=D.isMobile?1.5:2,de=D.isMobile?2:3.5,le=1;let k=[];k.length=0;let R=!1,pe=!1,a=new Fr,J=new Le,ee=null,me=null,h=null,c=!1,i=null;const r=new Map,C=new Map,G=new Map,_=(H,te,xe,re,ge,we,_e)=>{const ve=new yt;ve.position.z=xe,ve.rotation.z=re,ve.userData.isActive=!1,ve.userData.cubeIndex=_e;const be=new Ro(te,te,te),Pe=new jo(be),ie=new Rt({color:new St(w),transparent:!0,opacity:0}),Ee=new wt(Pe,ie);Ee.geometry.computeBoundingSphere(),ve.add(Ee);let je="right";const Te=te/2,lt=Fe=>{const Dt=new xs(40,24),Ue=new jo(Dt),Ce=new Rt({color:new St(w),transparent:!0,opacity:0,visible:!0}),W=new wt(Ue,Ce);W.userData.isPortal=!0,W.userData.isAnimating=!1,W.geometry.computeBoundingSphere();const ce=new oo(80,80),Me=new ft({visible:!1,side:Xt}),A=new Be(ce,Me);A.userData.isPortalHitbox=!0,A.userData.portal=W,A.geometry.computeBoundingSphere();const Y=new yt,U=new oo(X,q),ne=65/2;for(let Ze=0;Ze<E;Ze++){const Vt=new ft({color:new St(T),transparent:!0,opacity:0,visible:!1,side:Xt}),Xe=new Be(U,Vt),et=Ze/E*Math.PI*2;Xe.position.set(Math.cos(et)*ne,Math.sin(et)*ne,0),Xe.rotation.z=et+Math.PI/2,Xe.userData.baseOpacity=.01,Xe.userData.index=Ze,Xe.geometry.computeBoundingSphere(),Y.add(Xe)}const Ie=2,se=25;for(let Ze=1;Ze<se;Ze++){const Vt=new xs(40,24),Xe=new jo(Vt),et=$e.lerp(1,.1,Ze/(se-1)),xt=new Rt({color:new St(w),transparent:!0,opacity:0}),Yt=new wt(Xe,xt);Yt.userData.isPortal=!0,Yt.userData.maxOpacity=et,Yt.position.z=-Ze*Ie,Yt.geometry.computeBoundingSphere(),W.add(Yt)}if(W.userData.maxOpacity=1,f.value){const Ze=new ls(Z,{font:f.value,size:3,depth:0,curveSegments:12,bevelEnabled:!1});Ze.computeBoundingBox(),Ze.center();const Vt=new ft({color:16777215,transparent:!0,opacity:0,side:Xt}),Xe=new Be(Ze,Vt);Xe.visible=!1,Xe.userData.isVisible=!1,Xe.userData.isExploreText=!0,Xe.userData.skipTextMeshes=!0;const et=45;Xe.position.set(0,et,0),W.add(Xe),W.userData.exploreText=Xe;const xt=Ze.boundingBox,Yt=xt.max.x-xt.min.x+10,ln=xt.max.y-xt.min.y+10,uo=new oo(Yt,ln),Ht=new ft({transparent:!0,opacity:0,side:Xt,visible:!1}),Ft=new Be(uo,Ht);Ft.position.set(0,et,0),Ft.userData.isExploreTextHitbox=!0,Ft.userData.portal=W,Ft.geometry.computeBoundingSphere(),W.add(Ft),W.userData.exploreTextHitbox=Ft}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const ae=new yt,Se=new oo(12,D.isMobile?1:.5),ke=new ft({color:16777215,transparent:!0,opacity:0,side:Xt}),qe=new Be(Se,ke);qe.rotation.z=Math.PI/4;const Ye=new Be(Se,ke);Ye.rotation.z=-Math.PI/4,ae.add(qe,Ye);const Ot=new oo(30,30),nt=new ft({opacity:0,transparent:!0,side:Xt,visible:!0}),ht=new Be(Ot,nt);ht.userData.isCloseHitbox=!0,ht.geometry.computeBoundingSphere(),ht.renderOrder=2,ae.add(ht);const st=42,Je=42,We=-10;ae.visible=!1;let tt;switch(je){case"left":W.position.set(-Te,0,0),W.rotation.y=Math.PI/2,A.position.set(-Te,0,0),A.rotation.y=Math.PI/2,re>=$e.degToRad(120)?(W.rotation.z=Math.PI,ae.position.set(-Te+We,-42,st),tt=new De(-Te+We,-42,st)):(ae.position.set(-Te+We,Je,-42),tt=new De(-Te+We,Je,-42)),ae.rotation.y=Math.PI/2,Y.children.forEach(Ze=>Ze.position.x+=I);break;case"top":W.position.set(0,-Te,0),W.rotation.x=-Math.PI/2,W.rotation.z=-Math.PI/2,A.position.set(0,-Te,0),A.rotation.x=Math.PI/2,re>=$e.degToRad(100)?re>=$e.degToRad(180)?(W.rotation.z=Math.PI/2,ae.position.set(-42,-Te+We,-42),tt=new De(-42,-Te+We,-42)):(ae.position.set(Je,-Te+We,st),tt=new De(Je,-Te+We,st)):(ae.position.set(Je,-Te+We,st),tt=new De(Je,-Te+We,st)),ae.rotation.x=-Math.PI/2,Y.children.forEach(Ze=>Ze.position.y+=I);break;case"right":W.position.set(Te,0,0),W.rotation.y=-Math.PI/2,A.position.set(Te,0,0),A.rotation.y=-Math.PI/2,re>=$e.degToRad(120)?(W.rotation.z=Math.PI,ae.position.set(Te+We,-42,-42),tt=new De(Te+We,-42,-42)):(ae.position.set(Te+We,Je,st),tt=new De(Te+We,Je,st)),ae.rotation.y=-Math.PI/2,Y.children.forEach(Ze=>Ze.position.x+=I);break;case"bottom":W.position.set(0,Te,0),W.rotation.x=Math.PI/2,W.rotation.z=-Math.PI/2,A.position.set(0,Te,0),A.rotation.x=Math.PI/2,re>=$e.degToRad(100)?(ae.position.set(st,Te-We,-42),tt=new De(st,Te-We,-42)):(ae.position.set(Je,Te-We,-42),tt=new De(Je,Te-We,-42)),ae.rotation.x=Math.PI/2,Y.children.forEach(Ze=>Ze.position.y+=I);break}ve.userData.initialCloseGroupPosition=tt,ae.updateMatrixWorld(!0),W.add(Y),ve.add(W),ve.add(A),ve.add(ae),ve.userData.closeButton=ae,W.updateMatrixWorld(!0),Y.updateMatrixWorld(!0),ae.updateMatrixWorld(!0),r.set(ve,[]),C.set(ve,0),G.set(ve,0)},Ae=Fe=>{(Fe instanceof wt||Fe instanceof Be)&&Fe.geometry&&Fe.geometry.computeBoundingSphere(),ve.add(Fe)};if(ge&&s.showKeyarts){switch(["left","top","right","bottom"].includes(we)?we:"left"){case"left":je="right";break;case"top":je="bottom";break;case"right":je="left";break;case"bottom":je="top";break}const Ke=u.get(ge);if(Ke){const ct=new oo(te-1,te-1),Dt=new ft({map:Ke,transparent:!0,opacity:0,blending:Zt,side:Xt}),Ue=new Be(ct,Dt);switch(Ue.userData.isLoaded=!0,we){case"left":Ue.position.set(-Te,0,0),re>=$e.degToRad(120)?(Ue.rotation.y=Math.PI/2,Ue.rotation.z=-Math.PI):Ue.rotation.y=Math.PI/2;break;case"top":Ue.position.set(0,-Te,0),Ue.rotation.x=-Math.PI/2,Ue.rotation.z=-Math.PI/2;break;case"right":Ue.position.set(Te,0,0),re>=$e.degToRad(120)?(Ue.rotation.y=-Math.PI/2,Ue.rotation.z=-Math.PI):Ue.rotation.y=-Math.PI/2;break;case"bottom":Ue.position.set(0,Te,0),re>=$e.degToRad(180)?re>=$e.degToRad(220)?(Ue.rotation.x=Math.PI/2,Ue.rotation.z=Math.PI/2):(Ue.rotation.x=-Math.PI/2,Ue.rotation.z=Math.PI/2):(Ue.rotation.x=Math.PI/2,Ue.rotation.z=-Math.PI/2);break}Ue.geometry.computeBoundingSphere(),Ae(Ue),lt()}else console.warn(`Keyart texture not preloaded for ${H.title}: ${ge}`),lt()}else lt();ve.userData.portalLocation=je;{const Fe=(ce,Me,A,Y)=>{const U=new oo(te-1,te-1),ne={map:ce,transparent:!0,opacity:0,blending:Zt,side:Xt,depthWrite:!1};Y&&(ne.color=Y);const Ie=new ft(ne),se=new Be(U,Ie);se.position.copy(Me),A.x&&(se.rotation.x=A.x),A.y&&(se.rotation.y=A.y),se.userData.isGridPlane=!0,se.geometry.computeBoundingSphere(),Ae(se)},Ke=u.get(t),ct=u.get(o),Dt=["left","top","right","bottom"],Ce=[ge&&s.showKeyarts?we||"left":null,je].filter(Boolean),W=Dt.filter(ce=>!Ce.includes(ce));if(Ke)switch(Fe(Ke,new De(0,0,-te/2-1),{y:0}),Fe(Ke,new De(0,0,te/2+1),{y:0},new St(16744448)),W[0]){case"left":Fe(Ke,new De(-Te,0,0),{y:-Math.PI/2},new St(255));break;case"top":Fe(Ke,new De(0,Te,0),{x:Math.PI/2},new St(255));break;case"right":Fe(Ke,new De(Te,0,0),{y:Math.PI/2},new St(255));break;case"bottom":Fe(Ke,new De(0,-Te,0),{x:-Math.PI/2},new St(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(ct)switch(W[1]){case"left":Fe(ct,new De(-Te,0,0),{y:-Math.PI/2});break;case"top":Fe(ct,new De(0,Te,0),{x:Math.PI/2});break;case"right":Fe(ct,new De(Te,0,0),{y:Math.PI/2});break;case"bottom":Fe(ct,new De(0,-Te,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}ve.children.forEach(Fe=>{Fe.updateMatrixWorld(!0),Fe instanceof yt&&Fe.children.forEach(Ke=>{Ke.updateMatrixWorld(!0)})}),ve.updateMatrixWorld(!0);const dt=new qs().setFromObject(ve),it=new Zs;return dt.getBoundingSphere(it),ve.boundingSphere=it,ve},z=new Gr,j=(H,te,xe,re,ge)=>{if(!f.value){console.warn("Font not available; skipping text creation for:",H);const dt=new ao,it=new ft({visible:!1});return new Be(dt,it)}const we=new ls(H,{font:f.value,size:ge,depth:0,curveSegments:12,bevelEnabled:!1});we.computeBoundingBox(),we.center();const _e=new ft({color:16777215,transparent:!0,opacity:0,side:Xt}),ve=new Be(we,_e);ve.position.set(te,xe,re);const be=we.boundingBox,Pe=be.max.x-be.min.x,ie=be.max.y-be.min.y,Ee=Pe+8,je=ie+4,Te=new oo(Ee,je),lt=new ft({color:0,transparent:!0,opacity:0,side:Xt}),Ae=new Be(Te,lt);return Ae.position.set(te,xe,re-1),p.add(Ae),p.add(ve),ve.userData.backgroundPlane=Ae,ve},B=()=>{const H=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let te=0;H.forEach((xe,re)=>{const ge=v-(re+1)*S,we=(re+1)*y,_e=_(xe,F,ge,we,xe.keyart,xe.keyartLocation,te);p.add(_e),k.push(_e),te++,j(xe.title,0,xe.size-15,v+90-(re+1)*S,xe.size)})},b=()=>R?Promise.resolve({projectCubes:k,updateCubeColors:l,maxZ:g}):(B(),R=!0,Promise.resolve({projectCubes:k,updateCubeColors:l,maxZ:g})),O=H=>{if(H.userData.isAnimating)return;H.userData.isAnimating=!0;const te=H.children.find(_e=>_e instanceof yt);if(!te)return;const xe=te.children,re=xe.length,ge=Oe.timeline({repeat:-1,defaults:{ease:"none"}}),we={value:0};ge.to(we,{value:1,duration:1.5,onUpdate:()=>{xe.forEach(ve=>{const be=ve.material;if(be.visible){const Pe=(ve.userData.index/re+we.value)%1,Ee=(Math.sin(Pe*Math.PI*2)+1)/2;be.opacity=.01+(1-.01)*Math.pow(Ee,4)}})}}),H.userData.animationTimeline=ge},Q=H=>{if(!H.userData.isAnimating)return;H.userData.isAnimating=!1;const te=H.children.find(xe=>xe instanceof yt);te&&(H.userData.animationTimeline&&(H.userData.animationTimeline.kill(),delete H.userData.animationTimeline),te.children.forEach(xe=>{const re=xe.material;re.opacity=0}))},d=(H,te)=>{let xe;const re=(G.get(H)||0)+1;G.set(H,re),re%V===0?xe=new Ur(ue,de,12,1):xe=new Ro(K,K,K);const ge=new ft({color:16777215,transparent:!0,opacity:0}),we=new Be(xe,ge);we.position.set(0,0,0);const _e=te.position.clone(),ve=_e.clone().normalize(),be=_e.length()+P;if(re%V===0){const ie=we.position.clone().add(ve);we.lookAt(ie),we.rotateX(Math.PI/2)}H.add(we),Oe.to(ge,{opacity:.5,duration:le,ease:"power2.in",overwrite:"auto"});const Pe=r.get(H)||[];Pe.push({mesh:we,direction:ve,distanceTraveled:0,totalDistance:be}),r.set(H,Pe)},m=H=>{(r.get(H)||[]).forEach(xe=>{H.remove(xe.mesh),xe.mesh.geometry.dispose(),xe.mesh.material.dispose()}),r.set(H,[])},l=H=>{z.setFromProjectionMatrix(H.projectionMatrix.clone().multiply(H.matrixWorldInverse));const te=H.position.z;let xe=[];p.traverse(re=>{var ge;return re instanceof Be&&((ge=re.geometry)==null?void 0:ge.type)==="TextGeometry"&&!re.userData.skipTextMeshes&&xe.push(re)}),pe||(pe=!0),k.forEach((re,ge)=>{const we=re.boundingSphere;if(we){const Pe=we.clone();if(Pe.radius*=1.5,!z.intersectsSphere(Pe))return}else console.warn(`Cube ${ge} has no boundingSphere`);const _e=re.position.z,ve=Math.abs(te-_e);let be=0;ve<=N&&(be=1-ve/N),re.userData.isActive=be>=$,re.children.forEach(Pe=>{if(Pe instanceof wt&&!Pe.userData.isPortal&&!Pe.userData.isPortalHitbox){const ie=Pe.material;if(ve<=N){const Ee=$e.lerp((w>>16&255)/255,(T>>16&255)/255,be),je=$e.lerp((w>>8&255)/255,(T>>8&255)/255,be),Te=$e.lerp((w&255)/255,(T&255)/255,be);ie.color.set(Ee,je,Te),ie.opacity=Math.min(1,be*2)}else ie.opacity=0}else if(Pe instanceof wt&&Pe.userData.isPortal)Pe.children.forEach(ie=>{if(ie instanceof Be&&ie.userData.isExploreText){const Ee=ie.material;if(ve<=N){const je=1-ve/N;Ee.opacity=Math.min(1,je*2),ie.visible=!0}else Ee.opacity=0,ie.visible=!1}}),pe&&(be>.1?Pe.children.forEach(ie=>{ie instanceof yt&&ie.children.forEach(Ee=>{Ee instanceof Be&&(Ee.material.visible=!0,!Pe.userData.animationStarted&&s.showPortalPulses&&(O(Pe),Pe.userData.animationStarted=!0))})}):be<=.1&&Pe.userData.animationStarted&&(Pe.children.forEach(ie=>{ie instanceof yt&&ie.children.forEach(Ee=>{Ee instanceof Be&&(Ee.material.visible=!1)})}),Q(Pe),delete Pe.userData.animationStarted));else if(Pe instanceof Be&&!Pe.userData.isPortalHitbox&&!Pe.userData.isCloseHitbox){const ie=Pe.material;if(Pe.userData.isLoaded||Pe.userData.isGridPlane)if(ve<=N){const Ee=1-ve/N;ie.opacity=Math.min(.8,Ee*2),Pe.visible=!0}else ie.opacity=0,Pe.visible=!1}else if(Pe instanceof yt&&Pe.userData.closeButton){const ie=Math.abs(te-Pe.position.z);Pe.children.forEach(Ee=>{if(Ee instanceof Be&&!Ee.userData.isCloseHitbox){const je=Ee.material;if(ie<=N){const Te=1-ie/N;je.opacity=Math.min(1,Te*2)}else je.opacity=0}})}})}),xe.forEach(re=>{if(!z.intersectsObject(re))return;const ge=re.material,we=re.userData.backgroundPlane,_e=we==null?void 0:we.material,ve=re.position.z,be=Math.abs(te-ve+120);if(c){ge.opacity=0,_e&&(_e.opacity=0);return}if(be<=N){const Pe=1-be/N,ie=Math.min(1,Pe*2);ge.opacity=ie,_e&&(_e.opacity=ie*.8)}else ge.opacity=0,_e&&(_e.opacity=0)})},oe=(H,te)=>{const xe=performance.now()/1e3,re=H.position.z;k.forEach(ge=>{const we=ge.position.z;if(Math.abs(re-we+90)<=N&&!c){const ve=C.get(ge)||0;if(xe-ve>=fe){const ie=ge.children.find(Ee=>Ee instanceof wt&&Ee.userData.isPortal);ie&&(d(ge,ie),C.set(ge,xe))}const Pe=(r.get(ge)||[]).filter(ie=>{if(ie.distanceTraveled+=M*te,ie.mesh.position.copy(ie.direction.clone().multiplyScalar(ie.distanceTraveled)),(ie.totalDistance-ie.distanceTraveled)/M<=le&&!ie.isFadingOut){ie.isFadingOut=!0;const Te=ie.mesh.material;Oe.to(Te,{opacity:0,duration:le,ease:"power2.out",overwrite:"auto"})}return ie.distanceTraveled>=ie.totalDistance?(ge.remove(ie.mesh),ie.mesh.geometry.dispose(),ie.mesh.material.dispose(),!1):!0});r.set(ge,Pe)}else m(ge)})},he=H=>{const te=[H,...H.children.filter(ge=>ge instanceof wt&&ge.userData.isPortal)],xe=2,re=.1;te.forEach((ge,we)=>{const _e=ge.material;_e.opacity=ge.userData.maxOpacity;const ve=Oe.timeline({repeat:-1,delay:we*re});ve.to(_e,{opacity:0,duration:xe/2,ease:"power2.inOut"}).to(_e,{opacity:ge.userData.maxOpacity,duration:xe/2,ease:"power2.inOut"}),ge.userData.marqueeTimeline=ve})},Ge=H=>{[H,...H.children.filter(xe=>xe instanceof wt&&xe.userData.isPortal)].forEach(xe=>{if(xe.userData.marqueeTimeline){xe.userData.marqueeTimeline.kill(),delete xe.userData.marqueeTimeline;const re=xe.material;re.opacity=xe.userData.maxOpacity}})};return{getInitializedData:b,updateCubeColors:l,setupInteractivity:(H,te,xe,re)=>{i=re;let ge=null,we=null,_e=null,ve=!1,be=!1,Pe=!1,ie=!1,Ee=[],je=!1;p.traverse(Ce=>{var W;Ce instanceof Be&&((W=Ce.geometry)==null?void 0:W.type)==="TextGeometry"&&!Ce.userData.skipTextMeshes&&Ee.push(Ce)});const Te=Ce=>{c&&(ge=Ce.touches[0].clientY,we=we??window.scrollY,ve=!0)},lt=Ce=>{if(!c||!_e||!ge||ie)return;const ce=Ce.touches[0].clientY-ge;x.isMobile&&ce<-50&&!be&&(Ce.cancelable&&Ce.preventDefault(),it(),ge=null)},Ae=Ce=>{ge=null,ve=!1,Pe=!0,Oe.delayedCall(.5,()=>{Pe=!1})},dt=Ce=>{if(ve||be||Pe||ie){Ce.preventDefault(),Ce.stopPropagation(),we!==null&&(window.scrollTo(0,we),Oe.to(window,{scrollTo:{y:we},duration:0}));return}if(!c||!_e||!me||!h)return;if(x.isMobile){Ce.preventDefault(),Ce.stopPropagation();return}let W=0;if(Ce instanceof WheelEvent?W=Ce.deltaY:W=window.scrollY-(we||0),Ce.preventDefault(),Ce.stopPropagation(),W>0){window.scrollTo(0,we);return}W<0&&it()},it=()=>{const Ce=_e,W=h?h.clone():new De(0,0,g),ce=(me==null?void 0:me.z)??H.position.z,Me=Ce==null?void 0:Ce.parent,A=Ce?k.indexOf(Me):-1;ie=!0,Ce&&Ge(Ce);const Y=H.userData.lockedLookAt?H.userData.lockedLookAt.clone():H.getWorldDirection(new De).multiplyScalar(1e3).add(H.position),U={progress:0};Oe.to(H.position,{x:(me==null?void 0:me.x)??H.position.x,y:(me==null?void 0:me.y)??H.position.y,z:ce,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const ne=Ee[A];if(A!==-1&&ne){const Ie=Ee[A];if(Ie){const se=Ie.material,ae=Ie.userData.backgroundPlane,Se=Math.abs(H.position.z-Ie.position.z+120),ke=Se<=N?Math.min(1,(1-Se/N)*2):0;Oe.to(se,{opacity:ke,duration:.5,ease:"power2.in"}),ae&&Oe.to(ae.material,{opacity:ke*.8,duration:.5,ease:"power2.in"})}}if(Me!=null&&Me.userData.closeButton){const Ie=Me.userData.closeButton.position;Oe.to(Me.userData.closeButton.rotation,{z:0,duration:.3,ease:"power2.inOut"}),Oe.to(Me.userData.closeButton.position,{x:Ie.x+2,duration:.3,ease:"power2.inOut"});const se=Me.userData.closeButton.children.filter(ae=>ae instanceof Be).map(ae=>ae.material);Oe.to(se,{opacity:0,duration:.5,onUpdate:()=>{},onComplete:()=>{Me.userData.closeButton.updateMatrixWorld(!0),Me.userData.closeButton.visible=!1,Me.userData.lockedPosition=null,je=!1}}),Ce&&Fe(Ce,!1)}},onUpdate:()=>{const ne=U.progress,Ie=$e.lerp(Y.x,W.x,ne),se=$e.lerp(Y.y,W.y,ne),ae=$e.lerp(Y.z,W.z,ne);H.lookAt(Ie,se,ae),H.updateMatrixWorld(!0)},onComplete:()=>{H.lookAt(W),c=!1,_e=null,document.body.classList.remove("no-scrollbar"),x.isMobile&&(document.body.style.overflow=""),i&&i(!1),Ce&&Ge(Ce),we=null,me=null,h=null,H.userData.lockedLookAt=null,ie=!1,k.forEach(ne=>{Math.abs(H.position.z-ne.position.z+90)<=N&&C.set(ne,0)})}}),Oe.to(U,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},Fe=(Ce,W=!0)=>{const ce=[Ce,...Ce.children.filter(A=>A instanceof wt&&A.userData.isPortal)],Me=W?25:2;ce.forEach((A,Y)=>{let U=-Y*Me;(Ce.position.y>0&&Ce.rotation.x===-Math.PI/2||Ce.position.y<0&&Ce.rotation.x===Math.PI/2)&&(U=Y*Me);const ne=W?A.userData.maxOpacity:0;Oe.to(A.position,{z:U,duration:1,ease:"power3.out",delay:.5,onComplete:()=>{W&&Y===0&&he(Ce)}}),Oe.to(A.material,{opacity:ne,duration:1,ease:"power3.out",delay:.5})})},Ke=Ce=>{var Me;J.x=Ce.clientX/window.innerWidth*2-1,J.y=-(Ce.clientY/window.innerHeight)*2+1,a.setFromCamera(J,H),H.userData.lockedLookAt&&(H.lookAt(H.userData.lockedLookAt),H.updateMatrixWorld(!0)),k.forEach(A=>{A.userData.lockedPosition&&(A.position.equals(A.userData.lockedPosition)||A.position.copy(A.userData.lockedPosition)),A.updateMatrixWorld(!0),A.children.forEach(Y=>Y.updateMatrixWorld(!0))});const W=k.flatMap(A=>{const Y=[];return!c&&A.userData.isActive&&A.children.forEach(U=>{U instanceof Be&&(U.userData.isPortalHitbox||U.userData.isExploreTextHitbox)&&Y.push(U)}),c&&_e&&A===_e.parent&&A.children.forEach(U=>{U instanceof Be&&U.userData.isPortalHitbox&&Y.push(U),U instanceof wt&&U.userData.isPortal&&U.children.forEach(ne=>{ne instanceof Be&&ne.userData.isExploreTextHitbox&&Y.push(ne)}),U instanceof yt&&U===A.userData.closeButton&&U.children.forEach(ne=>{ne instanceof Be&&ne.userData.isCloseHitbox&&Y.push(ne)})}),Y}),ce=a.intersectObjects(W);if(ce.length>0){const A=ce[0].object;if(A.userData.isPortalHitbox||A.userData.isExploreTextHitbox){const Y=A.userData.portal;ee!==Y&&(ee&&[ee,...ee.children.filter(Ie=>Ie instanceof wt&&Ie.userData.isPortal)].forEach(Ie=>{const se=Ie.material;Oe.to(se.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5})}),ee=Y,[ee,...ee.children.filter(ne=>ne instanceof wt&&ne.userData.isPortal)].forEach(ne=>{const Ie=ne.material;Oe.to(Ie.color,{r:(L>>16&255)/255,g:(L>>8&255)/255,b:(L&255)/255,duration:.5})})),te.style.cursor="pointer"}else if(A.userData.isCloseHitbox&&c){if(!je){je=!0;const Y=A.parent;Y.children.filter(ne=>ne instanceof Be&&!ne.userData.isCloseHitbox);const U=Y.position;Oe.to(Y.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"}),Oe.to(Y.position,{x:U.x-2,duration:.3,ease:"power2.inOut"})}te.style.cursor="pointer"}else te.style.cursor="auto"}else{if(ee&&([ee,...ee.children.filter(Y=>Y instanceof wt&&Y.userData.isPortal)].forEach(Y=>{const U=Y.material;Oe.to(U.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5})}),ee=null),c&&_e&&je){const A=(Me=_e.parent)==null?void 0:Me.userData.closeButton,Y=A.position;A&&(je=!1,Oe.to(A.rotation,{z:0,duration:.3,ease:"power2.inOut"}),Oe.to(A.position,{x:Y.x+2,duration:.3,ease:"power2.inOut"}))}te.style.cursor="auto"}},ct=Ce=>{if(ie)return;J.x=Ce.clientX/window.innerWidth*2-1,J.y=-(Ce.clientY/window.innerHeight)*2+1,a.setFromCamera(J,H);const W=k.flatMap(se=>{const ae=[];return c&&_e&&se===_e.parent&&se.children.forEach(Se=>{Se instanceof yt&&Se===se.userData.closeButton&&Se.children.forEach(ke=>{ke instanceof Be&&ke.userData.isCloseHitbox&&ae.push(ke)})}),ae}),ce=k.flatMap(se=>{const ae=[];return!c&&se.userData.isActive&&se.children.forEach(Se=>{Se instanceof Be&&(Se.userData.isPortalHitbox||Se.userData.isExploreTextHitbox)&&ae.push(Se)}),c&&_e&&se===_e.parent&&se.children.forEach(Se=>{Se instanceof Be&&Se.userData.isPortalHitbox&&ae.push(Se),Se instanceof wt&&Se.userData.isPortal&&Se.children.forEach(ke=>{ke instanceof Be&&ke.userData.isExploreTextHitbox&&ae.push(ke)})}),ae});let Me=a.intersectObjects(W);for(const se of Me)if(se.object.userData.isCloseHitbox){it();return}if(Me=a.intersectObjects(ce),Me.length===0)return;const Y=Me[0].object.userData.portal,U=Y.parent,ne=k.indexOf(U),Ie=n[ne];if(c&&Y===_e){let se=new De;const ae=e.CUBE_SIZE/2;Y.position.x===ae?se.set(-1,0,0):Y.position.x===-ae?se.set(1,0,0):Y.position.y===ae?se.set(0,-1,0):Y.position.y===-ae&&se.set(0,1,0),se.applyQuaternion(U.getWorldQuaternion(new Wr)).normalize();const ke=H.position.clone().clone().add(se.clone().multiplyScalar(-675)),qe=se.clone().multiplyScalar(-1e3),Ye=ke.clone().add(qe);ie=!0,Oe.to(H.position,{x:ke.x,y:ke.y,z:ke.z,duration:1,ease:"power2.in",onUpdate:()=>H.lookAt(Ye),onStart:()=>{Oe.to(xe.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{Ie!=null&&Ie.slug&&(D.setScrollPosition(window.scrollY),Tr.visit(route("project.show",{project:Ie.slug}),{preserveScroll:!1})),ie=!1}})}else if(!c){me||(me=H.position.clone(),h=new De(0,0,g)),i&&re(!0,me,h);const se=Y.getWorldPosition(new De);be=!0,ie=!0,we=window.scrollY,Oe.to(H.position,{x:0,y:0,z:U.getWorldPosition(new De).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{c=!0,_e=Y,document.body.classList.add("no-scrollbar"),x.isMobile&&(document.body.style.overflow="hidden"),Fe(Y,!0),U.userData.lockedPosition=U.position.clone(),m(U);const ae=Ee[ne];if(ae){const Se=ae.material,ke=ae.userData.backgroundPlane;Oe.to(Se,{opacity:0,duration:.5,ease:"power2.out"}),ke&&Oe.to(ke.material,{opacity:0,duration:.5,ease:"power2.out"})}},onComplete:()=>{if(U.userData.closeButton){U.userData.initialCloseGroupPosition&&U.userData.closeButton.position.copy(U.userData.initialCloseGroupPosition),U.userData.closeButton.visible=!0,U.userData.closeButton.updateMatrixWorld(!0),U.updateMatrixWorld(!0),U.userData.closeButton.updateMatrixWorld(!0);const ae=U.userData.closeButton.children.filter(Se=>Se instanceof Be&&!Se.userData.isCloseHitbox).map(Se=>Se.material);ae.length>0&&Oe.to(ae,{opacity:1,duration:.5,onComplete:()=>{U.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),Oe.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const ae=this.progress(),Se=H.getWorldDirection(new De).multiplyScalar(1e3).add(H.position),ke=$e.lerp(Se.x,se.x,ae),qe=$e.lerp(Se.y,se.y,ae),Ye=$e.lerp(Se.z,se.z,ae);H.lookAt(ke,qe,Ye)},onComplete:()=>{H.lookAt(se.x,se.y,se.z),H.updateMatrixWorld(!0),be=!1,ie=!1,H.userData.lockedLookAt=se.clone()}})}};te.addEventListener("mousemove",Ke),te.addEventListener("click",ct),te.addEventListener("touchstart",Te,{passive:!1}),te.addEventListener("touchmove",lt,{passive:!1}),te.addEventListener("touchend",Ae,{passive:!0}),window.addEventListener("wheel",dt,{passive:!1}),window.addEventListener("scroll",dt,{passive:!1});const Dt=()=>{r.forEach((Ce,W)=>{Ce.forEach(ce=>{W.remove(ce.mesh),ce.mesh.geometry.dispose(),ce.mesh.material.dispose()})}),r.clear(),C.clear(),G.clear()},Ue=()=>{te.removeEventListener("mousemove",Ke),te.removeEventListener("click",ct),te.removeEventListener("touchstart",Te),te.removeEventListener("touchmove",lt),te.removeEventListener("touchend",Ae),window.removeEventListener("wheel",dt),window.removeEventListener("scroll",dt),_e&&Ge(_e),x.isMobile&&(document.body.style.overflow="")};return()=>{Ue(),Dt()}},updateClickHereParticles:oe}}function Di(p,e,n,t){const o=rn(),s=100,u=100,f=300,x=3355443,D=o.isMobile?24:32,F=-600,S=-500,v=1e3,g=o.isMobile?5:10,w=.05,T=1,y=o.isMobile?6:4,N=o.isMobile?4:6,$=100,L=-450,E=60,X=n-v,q=Math.abs(S-X),I=Math.ceil(q/s),Z=()=>{const a=new yt;let J=null,ee=null;const me=[],h=[],c=[],i=[],r=[];{const C=new Ro(s,s,s),G=new jo(C),_=D*I,z=new Yr;z.copy(G),z.instanceCount=_;const j=new Rt({color:x,transparent:!0,fog:!0,vertexColors:!0}),B=new Float32Array(_*3),b=new Float32Array(_*3),O=new Float32Array(_*3),Q=D*s,d=-Q/2+s/2,m=S;for(let be=0;be<D;be++){const Pe=K(be);for(let ie=0;ie<I;ie++){const Ee=be*I+ie,je=d+be*s,Te=m-ie*s,lt=$e.randFloat(u,f),Ae=lt/s,dt=F+lt/2;B[Ee*3]=je,B[Ee*3+1]=dt,B[Ee*3+2]=Te,b[Ee*3]=1,b[Ee*3+1]=Ae,b[Ee*3+2]=1,O[Ee*3]=Pe,O[Ee*3+1]=Pe,O[Ee*3+2]=Pe}}z.setAttribute("instancePosition",new Fn(B,3)),z.setAttribute("instanceScale",new Fn(b,3)),z.setAttribute("color",new Fn(O,3)),j.onBeforeCompile=be=>{be.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${be.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},J=new wt(z,j);const l=-Q/2,oe=Q/2,he=F,Ge=F+f,Ve=X,H=S;z.boundingBox=new qs(new De(l,he,Ve),new De(oe,Ge,H));const te=(l+oe)/2,xe=(he+Ge)/2,re=(Ve+H)/2,ge=oe-l,we=Ge-he,_e=H-Ve,ve=Math.sqrt(ge*ge+we*we+_e*_e)/2;z.boundingSphere=new Zs(new De(te,xe,re),ve),a.add(J)}{ee=new yt;const C=D*s/(N-1),G=-(D*s)/2;for(let z=0;z<N;z++){let B=G+z*C,b=S;const O=[new De(B,L,b)];let Q=0;for(;b>X;){const d=b===S?$e.randFloat(300,800):Math.min($e.randFloat(300,800),Math.abs(b-X));if(b-=d,O.push(new De(B,L,b)),Q+=d,b<=X){O[O.length-1].z=X;break}const m=Math.random()<.5?-1:1,l=$e.randFloat(100,300);B+=m*l,O.push(new De(B,L,b)),Q+=l}h.push({points:O,totalLength:Q})}const _=new Ro(y,y,y);for(let z=0;z<N;z++){const j=h[z],B=j.totalLength,b=B/E;for(let O=0;O<E;O++){const Q=new ft({color:16711680,fog:!0}),d=new Be(_,Q),m=O*b;let l=m;for(let oe=0;oe<j.points.length-1;oe++){const he=j.points[oe],Ge=j.points[oe+1],Ve=he.distanceTo(Ge);if(l<=Ve){const H=l/Ve;d.position.lerpVectors(he,Ge,H);break}l-=Ve}me.push(d),c.push(m),i.push(z),r.push(1),ee.add(d)}for(let O=0;O<E;O++){const Q=new ft({color:16777215,fog:!0}),d=new Be(_,Q),m=B-(O*b+b/2);let l=B-m;const oe=[...j.points].reverse();for(let he=0;he<oe.length-1;he++){const Ge=oe[he],Ve=oe[he+1],H=Ge.distanceTo(Ve);if(l<=H){const te=l/H;d.position.lerpVectors(Ge,Ve,te);break}l-=H}me.push(d),c.push(m),i.push(z),r.push(-1),ee.add(d)}}e.add(ee)}return e.add(a),{cityGroup:a,instancedLines:J,particleGroup:ee,particles:me,paths:h,particleDistances:c,particlePaths:i,particleDirections:r}},K=a=>{if(a<g){const J=(T-w)/(g-1);return w+a*J}else if(a>=D-g){const J=D-1-a,ee=(T-w)/(g-1);return w+J*ee}return T},{cityGroup:M,instancedLines:fe,particleGroup:P,particles:V,paths:ue,particleDistances:de,particlePaths:le,particleDirections:k}=Z();return{cityGroup:M,buildingLines:fe?[fe]:[],updateParticles:a=>{const J=$*a;for(let ee=0;ee<V.length;ee++){const me=k[ee],h=le[ee],c=ue[h],i=c.totalLength;de[ee]+=J*me,me===1?(de[ee]=de[ee]%i,de[ee]<0&&(de[ee]+=i)):de[ee]=(de[ee]+i)%i;const r=de[ee],C=me===1?c.points:[...c.points].reverse();let G=me===1?r:i-r;for(let _=0;_<C.length-1;_++){const z=C[_],j=C[_+1],B=z.distanceTo(j);if(G<=B){const b=G/B;V[ee].position.lerpVectors(z,j,b);break}G-=B}}},dispose:()=>{fe&&(M.remove(fe),fe.geometry.dispose(),fe.material.dispose()),P&&(e.remove(P),P.children.forEach(a=>{a.geometry.dispose(),a.material.dispose()})),e.remove(M)}}}Oe.registerPlugin(Re);function Ii(p,e,n,t,o,s,u={},f,x){const D=rn(),{CUBE_SPACING:F,FIRST_CUBE_Z:S}=s,v=(t==null?void 0:t.length)||0,g=S-(v+1)*F;let w=!1;const T=D.isMobile?(Math.abs(g)+(v-1)*F)*.7:Math.abs(g)+(v-1)*F;let y=Oe.timeline();Re.config({ignoreMobileResize:!0});{let $=0;const L=16;y=Oe.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${T}`,scrub:u.scrub||(D.isMobile?.8:.5),pin:!0,onUpdate:E=>{const X=performance.now();if(X-$>=L){if(!w){const q=E.progress,I=$e.lerp(0,g,q);e.position.set(0,0,I),e.lookAt(0,0,g)}o(e),$=X}x&&x.update()},onRefresh:()=>{e.updateProjectionMatrix()}}}),y.fromTo(e.position,{z:0},{z:g,duration:1,ease:"none"},0)}return{setReverting:$=>{w=$},timeline:y}}function Ri(p,e,n){const t=rn(),o=t.isMobile?25:20,s=t.isMobile?1e3:2e3,u=4e3,f=-1e3,x=n-1e3,D=1e3,F=n,S=150,v=-500,g=n,w=new ao,T=new Float32Array(s*3),y=new Float32Array(s),N=new Float32Array(s);let $=0;for(;$<s;){const I=(Math.random()-.5)*u,Z=(Math.random()-.5)*u,K=f+Math.random()*(x-f),M=K>F&&Math.abs(I)<D&&Math.abs(Z)<D,fe=Math.abs(I)<S&&Math.abs(Z)<S&&K>g&&K<v;if(!M&&!fe){const P=$*3;T[P]=I,T[P+1]=Z,T[P+2]=K;const V=.1+Math.random()*(.7-.1);y[$]=V,N[$]=V,$++}}w.setAttribute("position",new ws(T,3)),w.setAttribute("opacity",new ws(N,1));const L=new go({uniforms:{color:{value:new St(1,1,1)},size:{value:o}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),E=new Xr(w,L);p.add(E);const X=w.attributes.opacity;for(let I=0;I<s;I++)Oe.to({opacity:y[I]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){N[I]=this.targets()[0].opacity,X.needsUpdate=!0}});return{dispose:()=>{Oe.killTweensOf(N),p.remove(E),w.dispose(),L.dispose()}}}function Oi(p,e){const t=e-1500,o=100,s=2,u=64,f=1e3,x=u*3,D=[4,4.5,5],F=6;let S,v,g,w,T,y;const N=[],$=[[],[],[]],L=[[],[],[]],E=[[],[],[]];let X=[0,0,0];const q=()=>{const M=0-t,fe=[];for(let pe=0;pe<o;pe++){const a=pe/(o-1),J=0-a*M,ee=a*5*2*Math.PI,me=90*(.8+.2*Math.sin(ee*2)),h=new De(me*Math.cos(ee),me*Math.sin(ee),J);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath points",{t:a,z:J,projectMaxZ:e}),fe.push(h)}S=new Gn(fe);const P=new ao().setFromPoints(S.getPoints(200));w=new Un(P,new Rt({color:16711935,linewidth:2,visible:!1})),p.add(w);const V=[];for(let pe=0;pe<o;pe++){const a=pe/(o-1),J=0-a*M,ee=a*3*2*Math.PI,me=60*(.8+.2*Math.sin(ee*4)),h=new De(me*Math.cos(ee),me*Math.sin(ee),J);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath2 points",{t:a,z:J,projectMaxZ:e}),V.push(h)}v=new Gn(V);const ue=new ao().setFromPoints(v.getPoints(200));T=new Un(ue,new Rt({color:65535,linewidth:2,visible:!1})),p.add(T);const de=[];for(let pe=0;pe<o;pe++){const a=pe/(o-1),J=0-a*M,ee=a*7*2*Math.PI,me=100,h=90,c=.1*Math.sin(ee),i=new De(me*(1+c)*Math.cos(ee),h*(1-c)*Math.sin(ee),J);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:a,z:J,projectMaxZ:e}),de.push(i)}g=new Gn(de);const le=new ao().setFromPoints(g.getPoints(200));y=new Un(le,new Rt({color:16776960,linewidth:2,visible:!1})),p.add(y);const k=[16711680,65280,255],R=new Ro(s,s,s);R.attributes.color&&delete R.attributes.color;for(let pe=0;pe<3;pe++){const a=new yt;a.opacity=1,a.renderOrder=1,N[pe]=a,p.add(a);for(let J=0;J<x;J++){const ee=new ft({color:k[pe],transparent:!0,opacity:0,blending:jr,fog:!0,depthWrite:!1}),me=new Be(R,ee);me.renderOrder=1,me.visible=!1,a.add(me),$[pe][J]=me,L[pe][J]=0,E[pe][J]=!1}}},I=M=>{const fe=[S,v,g][M],P=fe.getLength(),V=E[M].filter(de=>de).length;if(x-V>=u){let de=0;for(let le=0;le<u;le++){const k=E[M].findIndex(h=>!h);if(k===-1){console.warn(`No available chasers for path ${M}, emitted ${de}/${u}`);break}const R=de/(u-1),pe=.05+(1-.05)*Math.pow(R,3),a=new ft({color:[16711680,65280,255][M],transparent:!0,opacity:pe,blending:Zt,fog:!0,depthWrite:!1});$[M][k].material=a,$[M][k].visible=!0;const J=de*F;L[M][k]=J,E[M][k]=!0;const ee=J/P,me=fe.getPointAt(ee);$[M][k].position.copy(me),de++}}},Z=M=>{const fe=performance.now()/1e3,P=[S,v,g];for(let V=0;V<3;V++){fe-X[V]>=D[V]&&(I(V),X[V]=fe);const ue=P[V],de=ue.getLength(),le=f*M;for(let k=0;k<x;k++)if(E[V][k]){L[V][k]+=le;const R=L[V][k]/de;if(R>=1)$[V][k].visible=!1,E[V][k]=!1,L[V][k]=0;else{const pe=ue.getPointAt(R);$[V][k].position.copy(pe)}}}};return q(),{chaserPath:S,chaserPath2:v,chaserPath3:g,updateChasers:Z,dispose:()=>{p.remove(w),p.remove(T),p.remove(y),w.geometry.dispose(),w.material.dispose(),T.geometry.dispose(),T.material.dispose(),y.geometry.dispose(),y.material.dispose(),N.forEach(M=>{M.children.forEach(fe=>{fe.geometry.dispose(),fe.material.dispose()}),p.remove(M)})}}}class Li extends Xs{constructor(e){super(e)}load(e,n,t,o){const s=this,u=new js(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){const x=s.parse(JSON.parse(f));n&&n(x)},t,o)}parse(e){return new Bi(e)}}class Bi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=zi(e,n,this.data);for(let s=0,u=o.length;s<u;s++)t.push(...o[s].toShapes());return t}}function zi(p,e,n){const t=Array.from(p),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,u=[];let f=0,x=0;for(let D=0;D<t.length;D++){const F=t[D];if(F===`
`)f=0,x-=s;else{const S=Ni(F,o,f,x,n);f+=S.offsetX,u.push(S.path)}}return u}function Ni(p,e,n,t,o){const s=o.glyphs[p]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+p+'" does not exists in font family '+o.familyName+".");return}const u=new no;let f,x,D,F,S,v,g,w;if(s.o){const T=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,N=T.length;y<N;)switch(T[y++]){case"m":f=T[y++]*e+n,x=T[y++]*e+t,u.moveTo(f,x);break;case"l":f=T[y++]*e+n,x=T[y++]*e+t,u.lineTo(f,x);break;case"q":D=T[y++]*e+n,F=T[y++]*e+t,S=T[y++]*e+n,v=T[y++]*e+t,u.quadraticCurveTo(S,v,D,F);break;case"b":D=T[y++]*e+n,F=T[y++]*e+t,S=T[y++]*e+n,v=T[y++]*e+t,g=T[y++]*e+n,w=T[y++]*e+t,u.bezierCurveTo(S,v,g,w,D,F);break}}return{offsetX:s.ha*e,path:u}}function Hi(p="/fonts/Poppins_Regular.json"){const e=Kt(null),n=Kt(0),t=Kt(!1),o=()=>new Promise((u,f)=>{new Li().load(p,D=>{e.value=D,n.value=100,t.value=!0,u(D)},D=>{D.lengthComputable&&(n.value=D.loaded/D.total*100)},D=>{n.value=100,t.value=!0,f(D)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const Fi={class:"preloader"},Gi={class:"progress-label"},Ui=cs({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>(Dn(),Us("div",Fi,[ho("div",Gi,Mr(Math.round(e.progress))+"%",1)]))}}),Wi=$s(Ui,[["__scopeId","data-v-e5eadefa"]]),Hs=250,vn=500,No=-500,$n=-520,Fs=-720,Gs=4e3,Yi=cs({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){Oe.registerPlugin(Re);const e=p,n=Vs();n.projects=e.projects;const t=rn(),o={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},s=Kt(null),u=Kt(null),f=Kt(!1),x=Kt(0),D=Kt(!1),F=Kt(!0),S=new Map;let v,g,w,T,y,N,$,L=null,E=null,X=null,q=null,I=null,Z=[],K=null,M=null,fe=0,P=null,V;const ue=Hi("/fonts/Poppins_Regular.json"),de=()=>{const a=s.value?s.value.getBoundingClientRect().width:window.innerWidth,J=window.innerHeight,ee=t.isMobile?.75:1,me=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;w.setSize(a*ee,J*ee),w.setPixelRatio(me),T.setSize(a*ee,J*ee),g.aspect=a/J,g.updateProjectionMatrix(),w.domElement.style.width=`${a}px`,w.domElement.style.height=`${J}px`},le=a=>S.has(a)?Promise.resolve(S.get(a)):new Promise((J,ee)=>{new Kr().load(a,h=>{h.encoding=void 0,S.set(a,h),J(h)},void 0,h=>ee(h))}),k=async()=>{v=new Vr,v.background=new St(0),v.fog=new qr(0,700,Gs),g=new Zr(t.isMobile?95:75,window.innerWidth/window.innerHeight,1,Gs+6e3),g.position.set(0,0,0),g.lookAt(0,0,1e3),w=new $r({antialias:!0}),t.isMobile?w.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):w.setPixelRatio(window.devicePixelRatio),w.toneMapping=Qr,w.toneMappingExposure=1,w.outputEncoding=void 0,T=new Pi(w);const a=new Ci(v,g);if(T.addPass(a),t.isMobile?y=new To(new Le(window.innerWidth,window.innerHeight),1,.1,0):y=new To(new Le(window.innerWidth,window.innerHeight),1.6,.2,0),y.renderToScreen=!0,T.addPass(y),s.value)s.value.appendChild(w.domElement),w.domElement.style.opacity="0";else return;N=new on,N.dom.style.position="fixed",N.dom.style.top="0px",N.dom.style.left="0px",N.dom.style.zIndex="1000",document.body.appendChild(N.dom);const ee=e.projects.filter(c=>c.keyart).length+2+1;let me=0;const h=()=>{me++;const c=me/ee*100,i=ue.loadingProgress.value;x.value=(c+i/ee)/(1+1/ee),me===ee&&ue.isLoaded.value&&(f.value=!0)};await ue.initialize().then(()=>{h()}).catch(c=>{console.error("Font initialization failed:",c),h()}),await le(e.projectGridFile).then(()=>h()).catch(()=>h()),await le(e.projectGridFile2).then(()=>h()).catch(()=>h());for(const c of e.projects)c.keyart?await le(c.keyart).then(()=>h()).catch(()=>h()):h();P=ki(v,{CUBE_SIZE:Hs,CUBE_SPACING:vn,FIRST_CUBE_Z:No},e.projects,e.projectGridFile,e.projectGridFile2,o,S,ue.font);try{if(await P.getInitializedData().then(({maxZ:c,updateCubeColors:i,projectCubes:r})=>{if(V=c,V===void 0||isNaN(V))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:C}=Ai(v,ue.font,{CUBE_SIZE:Hs,FIRST_CUBE_Z:No},o);Z=[...C,...r],K=i}),o.showCars){const{cityGroup:c,updateParticles:i,dispose:r}=Di(v,v,V,o);$=i,I=r}if(o.showStarfield){const{dispose:c}=Ri(v,g,V);L=c}if(o.showChasers){const{dispose:c,updateChasers:i}=Oi(v,V);X=c,q=i}de()}catch(c){console.error("Error initializing project cubes:",c),V=No-(e.projects.length+1)*vn}},R=(a=0)=>{if(M=requestAnimationFrame(R),w&&T){const J=(a-fe)/1e3;fe=a,$(J),q&&q(J),P!=null&&P.updateClickHereParticles&&P.updateClickHereParticles(g,J);const ee=4e3,me=1e3,h=Math.abs(g.position.z-V);g.far=Math.max(ee+me,h),g.updateProjectionMatrix();const c=Fs-$n;let i=0;g.position.z>=$n?i=0:g.position.z<=Fs?i=1:i=(g.position.z-$n)/c,t.isMobile?y.strength=$e.lerp(1.3,0,i):y.strength=$e.lerp(1.6,.125,i),T.render()}N.update()};Pr(()=>{k().then(()=>{if(f.value){M=requestAnimationFrame(R);let a=null;const J=P.getInitializedData().then(({projectCubes:me})=>{me.forEach(c=>{c.userData.isActive=!0});const h=No-(e.projects.length-1)*vn;g.position.set(0,0,5e3),g.lookAt(0,0,h),g.updateProjectionMatrix(),K(g),T.render(),Re.getAll().forEach(c=>c.kill()),Z.length&&K&&(a=Ii(v,g,u,Z,K,{CUBE_SPACING:vn,FIRST_CUBE_Z:No},{scrub:1},o,N).setReverting),w&&E===null&&(E=P.setupInteractivity(g,w.domElement,w,c=>{a&&a(c)})),window.scrollTo({top:0,behavior:"auto"})}),ee=()=>{J.then(()=>{F.value=!1,g.position.set(0,0,5e3),g.updateProjectionMatrix(),Oe.to(w.domElement,{opacity:1,duration:.5,ease:"power4.out"});const me={z:5e3};Oe.to(me,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{g.position.z=me.z,g.updateProjectionMatrix()},onComplete:()=>{g.position.z=0,D.value=!0}})})};Oe.delayedCall(.5,ee)}}).catch(a=>{console.error("Initialization failed:",a)}),window.addEventListener("resize",pe)}),Cr(()=>{M!==null&&cancelAnimationFrame(M),E&&E(),window.removeEventListener("resize",pe),Re.getAll().forEach(a=>a.kill()),w.dispose(),T.dispose(),v.clear(),document.body.removeChild(N.dom),L&&L(),X&&X(),I&&I()});const pe=()=>{de(),Re.refresh()};return(a,J)=>(Dn(),Us("section",{ref_key:"wrapper",ref:u,class:"wrapper"},[Ho(Er,{name:"fade"},{default:Ws(()=>[F.value?(Dn(),Ys(Wi,{key:0,progress:x.value},null,8,["progress"])):Sr("",!0)]),_:1}),ho("div",{ref_key:"tunnelWrapper",ref:s,class:"tunnel-wrapper"},null,512)],512))}}),Xi=$s(Yi,[["__scopeId","data-v-96d552de"]]),ji={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Vi={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},qi={class:"overflow-hidden"},Ji=cs({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(p){return(e,n)=>(Dn(),Ys(ti,null,{default:Ws(()=>[Ho(Ar(kr),{title:"Welcome"}),ho("div",ji,[ho("nav",Vi,[Ho(Jr)]),ho("div",qi,[Ho(Xi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),n[0]||(n[0]=ho("div",{class:"flex justify-center items-center"},null,-1)),n[1]||(n[1]=ho("div",{class:"flex justify-center items-center"},null,-1)),Ho(ei)])]),_:1}))}});export{Ji as default};
