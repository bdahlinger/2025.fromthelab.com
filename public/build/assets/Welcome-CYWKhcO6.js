import{W as Tr,d as $t,I as cs,e as Us,o as kn,a as fo,t as Mr,x as Pr,y as Cr,b as Ho,w as Ws,c as Ys,f as Sr,T as Er,u as Ar,m as kr}from"./app-BCqueLoh.js";import{c as Ne,O as Dr,e as ro,F as Xo,j as po,U as Qn,V as Re,k as vn,H as Tn,N as Ir,C as Rr,l as At,d as ke,b as Vt,m as pt,E as Or,n as Xs,o as js,p as vo,q as Lr,r as Br,s as zr,P as Hn,t as Nr,v as to,G as xt,w as Hr,a as Yt,L as Ot,g as De,x as Ve,B as Do,y as jo,f as bt,u as Vs,R as Fr,z as Gr,I as Ur,J as eo,K as qs,Q as Zs,T as xs,X as Wr,Y as Yr,Z as Fn,_ as ws,$ as Xr,a0 as Gn,a1 as Un,a2 as jr,S as Vr,a3 as qr,a4 as Zr,W as $r,a5 as Qr,a6 as Kr,h as Jr,i as ei}from"./GlobalFooter-B_Wkfhz6.js";import{u as zn,_ as ti}from"./App.vue_vue_type_script_setup_true_lang-IPhIPJKW.js";import{_ as $s}from"./_plugin-vue_export-helper-DlAUqK2U.js";function oi(p,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(p,t.key,t)}}function ni(p,e,n){return e&&oi(p.prototype,e),p}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _t,Mn,Ft,no,so,Eo,Qs,co,Vo,Ks,Kt,Xt,Js,er=function(){return _t||typeof window<"u"&&(_t=window.gsap)&&_t.registerPlugin&&_t},tr=1,So=[],Ge=[],Zt=[],qo=Date.now,Kn=function(e,n){return n},si=function(){var e=Vo.core,n=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,Ge),o.push.apply(o,Zt),Ge=t,Zt=o,Kn=function(c,f){return n[c](f)}},io=function(e,n){return~Zt.indexOf(e)&&Zt[Zt.indexOf(e)+1][n]},Zo=function(e){return!!~Ks.indexOf(e)},St=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:o!==!1,capture:!!s})},Ct=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},cn="scrollLeft",un="scrollTop",Jn=function(){return Kt&&Kt.isPressed||Ge.cache++},Dn=function(e,n){var t=function o(s){if(s||s===0){tr&&(Ft.history.scrollRestoration="manual");var c=Kt&&Kt.isPressed;s=o.v=Math.round(s)||(Kt&&Kt.iOS?1:0),e(s),o.cacheID=Ge.cache,c&&Kn("ss",s)}else(n||Ge.cache!==o.cacheID||Kn("ref"))&&(o.cacheID=Ge.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},It={s:cn,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Dn(function(p){return arguments.length?Ft.scrollTo(p,dt.sc()):Ft.pageXOffset||no[cn]||so[cn]||Eo[cn]||0})},dt={s:un,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:It,sc:Dn(function(p){return arguments.length?Ft.scrollTo(It.sc(),p):Ft.pageYOffset||no[un]||so[un]||Eo[un]||0})},Rt=function(e,n){return(n&&n._ctx&&n._ctx.selector||_t.utils.toArray)(e)[0]||(typeof e=="string"&&_t.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},ao=function(e,n){var t=n.s,o=n.sc;Zo(e)&&(e=no.scrollingElement||so);var s=Ge.indexOf(e),c=o===dt.sc?1:2;!~s&&(s=Ge.push(e)-1),Ge[s+c]||St(e,"scroll",Jn);var f=Ge[s+c],x=f||(Ge[s+c]=Dn(io(e,t),!0)||(Zo(e)?o:Dn(function(D){return arguments.length?e[t]=D:e[t]})));return x.target=e,f||(x.smooth=_t.getProperty(e,"scrollBehavior")==="smooth"),x},es=function(e,n,t){var o=e,s=e,c=qo(),f=c,x=n||50,D=Math.max(500,x*3),N=function(v,T){var y=qo();T||y-c>x?(s=o,o=v,f=c,c=y):t?o+=v:o=s+(v-s)/(y-f)*(c-f)},S=function(){s=o=t?0:o,f=c=0},_=function(v){var T=f,y=s,G=qo();return(v||v===0)&&v!==o&&N(v),c===f||G-f>D?0:(o+(t?y:-y))/((t?G:c)-T)*1e3};return{update:N,reset:S,getVelocity:_}},Bo=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},bs=function(e){var n=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(t)?n:t},or=function(){Vo=_t.core.globals().ScrollTrigger,Vo&&Vo.core&&si()},nr=function(e){return _t=e||er(),!Mn&&_t&&typeof document<"u"&&document.body&&(Ft=window,no=document,so=no.documentElement,Eo=no.body,Ks=[Ft,no,so,Eo],_t.utils.clamp,Js=_t.core.context||function(){},co="onpointerenter"in Eo?"pointer":"mouse",Qs=at.isTouch=Ft.matchMedia&&Ft.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ft||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Xt=at.eventTypes=("ontouchstart"in so?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in so?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return tr=0},500),or(),Mn=1),Mn};It.op=dt;Ge.cache=0;var at=function(){function p(n){this.init(n)}var e=p.prototype;return e.init=function(t){Mn||nr(_t)||console.warn("Please gsap.registerPlugin(Observer)"),Vo||or();var o=t.tolerance,s=t.dragMinimum,c=t.type,f=t.target,x=t.lineHeight,D=t.debounce,N=t.preventDefault,S=t.onStop,_=t.onStopDelay,g=t.ignore,v=t.wheelSpeed,T=t.event,y=t.onDragStart,G=t.onDragEnd,$=t.onDrag,L=t.onPress,E=t.onRelease,q=t.onRight,X=t.onLeft,R=t.onUp,W=t.onDown,ne=t.onChangeX,M=t.onChangeY,de=t.onChange,P=t.onToggleX,j=t.onToggleY,le=t.onHover,fe=t.onHoverEnd,te=t.onMove,B=t.ignoreCheck,k=t.isNormalizer,ue=t.onGestureStart,a=t.onGestureEnd,K=t.onWheel,oe=t.onEnable,Pe=t.onDisable,h=t.onClick,u=t.scrollSpeed,i=t.capture,r=t.allowClicks,C=t.lockAxis,F=t.onLockAxis;this.target=f=Rt(f)||so,this.vars=t,g&&(g=_t.utils.toArray(g)),o=o||1e-9,s=s||0,v=v||1,u=u||1,c=c||"wheel,touch,pointer",D=D!==!1,x||(x=parseFloat(Ft.getComputedStyle(Eo).lineHeight)||22);var w,z,U,O,b,I,J,d=this,m=0,l=0,se=t.passive||!N&&t.passive!==!1,pe=ao(f,It),Ye=ao(f,dt),H=pe(),ee=Ye(),ie=~c.indexOf("touch")&&!~c.indexOf("pointer")&&Xt[0]==="pointerdown",xe=Zo(f),ce=f.ownerDocument||no,be=[0,0,0],_e=[0,0,0],he=0,Oe=function(){return he=qo()},re=function(ae,Q){return(d.event=ae)&&g&&~g.indexOf(ae.target)||Q&&ie&&ae.pointerType!=="touch"||B&&B(ae,Q)},ge=function(){d._vx.reset(),d._vy.reset(),z.pause(),S&&S(d)},Ee=function(){var ae=d.deltaX=bs(be),Q=d.deltaY=bs(_e),A=Math.abs(ae)>=o,Y=Math.abs(Q)>=o;de&&(A||Y)&&de(d,ae,Q,be,_e),A&&(q&&d.deltaX>0&&q(d),X&&d.deltaX<0&&X(d),ne&&ne(d),P&&d.deltaX<0!=m<0&&P(d),m=d.deltaX,be[0]=be[1]=be[2]=0),Y&&(W&&d.deltaY>0&&W(d),R&&d.deltaY<0&&R(d),M&&M(d),j&&d.deltaY<0!=l<0&&j(d),l=d.deltaY,_e[0]=_e[1]=_e[2]=0),(O||U)&&(te&&te(d),U&&(y&&U===1&&y(d),$&&$(d),U=0),O=!1),I&&!(I=!1)&&F&&F(d),b&&(K(d),b=!1),w=0},Le=function(ae,Q,A){be[A]+=ae,_e[A]+=Q,d._vx.update(ae),d._vy.update(Q),D?w||(w=requestAnimationFrame(Ee)):Ee()},Me=function(ae,Q){C&&!J&&(d.axis=J=Math.abs(ae)>Math.abs(Q)?"x":"y",I=!0),J!=="y"&&(be[2]+=ae,d._vx.update(ae,!0)),J!=="x"&&(_e[2]+=Q,d._vy.update(Q,!0)),D?w||(w=requestAnimationFrame(Ee)):Ee()},ut=function(ae){if(!re(ae,1)){ae=Bo(ae,N);var Q=ae.clientX,A=ae.clientY,Y=Q-d.x,Z=A-d.y,me=d.isDragging;d.x=Q,d.y=A,(me||(Y||Z)&&(Math.abs(d.startX-Q)>=s||Math.abs(d.startY-A)>=s))&&(U=me?2:1,me||(d.isDragging=!0),Me(Y,Z))}},lt=d.onPress=function(ye){re(ye,1)||ye&&ye.button||(d.axis=J=null,z.pause(),d.isPressed=!0,ye=Bo(ye),m=l=0,d.startX=d.x=ye.clientX,d.startY=d.y=ye.clientY,d._vx.reset(),d._vy.reset(),St(k?f:ce,Xt[1],ut,se,!0),d.deltaX=d.deltaY=0,L&&L(d))},Ae=d.onRelease=function(ye){if(!re(ye,1)){Ct(k?f:ce,Xt[1],ut,!0);var ae=!isNaN(d.y-d.startY),Q=d.isDragging,A=Q&&(Math.abs(d.x-d.startX)>3||Math.abs(d.y-d.startY)>3),Y=Bo(ye);!A&&ae&&(d._vx.reset(),d._vy.reset(),N&&r&&_t.delayedCall(.08,function(){if(qo()-he>300&&!ye.defaultPrevented){if(ye.target.click)ye.target.click();else if(ce.createEvent){var Z=ce.createEvent("MouseEvents");Z.initMouseEvent("click",!0,!0,Ft,1,Y.screenX,Y.screenY,Y.clientX,Y.clientY,!1,!1,!1,!1,0,null),ye.target.dispatchEvent(Z)}}})),d.isDragging=d.isGesturing=d.isPressed=!1,S&&Q&&!k&&z.restart(!0),U&&Ee(),G&&Q&&G(d),E&&E(d,A)}},ht=function(ae){return ae.touches&&ae.touches.length>1&&(d.isGesturing=!0)&&ue(ae,d.isDragging)},Ue=function(){return(d.isGesturing=!1)||a(d)},Qe=function(ae){if(!re(ae)){var Q=pe(),A=Ye();Le((Q-H)*u,(A-ee)*u,1),H=Q,ee=A,S&&z.restart(!0)}},st=function(ae){if(!re(ae)){ae=Bo(ae,N),K&&(b=!0);var Q=(ae.deltaMode===1?x:ae.deltaMode===2?Ft.innerHeight:1)*v;Le(ae.deltaX*Q,ae.deltaY*Q,0),S&&!k&&z.restart(!0)}},Pt=function(ae){if(!re(ae)){var Q=ae.clientX,A=ae.clientY,Y=Q-d.x,Z=A-d.y;d.x=Q,d.y=A,O=!0,S&&z.restart(!0),(Y||Z)&&Me(Y,Z)}},Xe=function(ae){d.event=ae,le(d)},Ce=function(ae){d.event=ae,fe(d)},Te=function(ae){return re(ae)||Bo(ae,N)&&h(d)};z=d._dc=_t.delayedCall(_||.25,ge).pause(),d.deltaX=d.deltaY=0,d._vx=es(0,50,!0),d._vy=es(0,50,!0),d.scrollX=pe,d.scrollY=Ye,d.isDragging=d.isGesturing=d.isPressed=!1,Js(this),d.enable=function(ye){return d.isEnabled||(St(xe?ce:f,"scroll",Jn),c.indexOf("scroll")>=0&&St(xe?ce:f,"scroll",Qe,se,i),c.indexOf("wheel")>=0&&St(f,"wheel",st,se,i),(c.indexOf("touch")>=0&&Qs||c.indexOf("pointer")>=0)&&(St(f,Xt[0],lt,se,i),St(ce,Xt[2],Ae),St(ce,Xt[3],Ae),r&&St(f,"click",Oe,!0,!0),h&&St(f,"click",Te),ue&&St(ce,"gesturestart",ht),a&&St(ce,"gestureend",Ue),le&&St(f,co+"enter",Xe),fe&&St(f,co+"leave",Ce),te&&St(f,co+"move",Pt)),d.isEnabled=!0,d.isDragging=d.isGesturing=d.isPressed=O=U=!1,d._vx.reset(),d._vy.reset(),H=pe(),ee=Ye(),ye&&ye.type&&lt(ye),oe&&oe(d)),d},d.disable=function(){d.isEnabled&&(So.filter(function(ye){return ye!==d&&Zo(ye.target)}).length||Ct(xe?ce:f,"scroll",Jn),d.isPressed&&(d._vx.reset(),d._vy.reset(),Ct(k?f:ce,Xt[1],ut,!0)),Ct(xe?ce:f,"scroll",Qe,i),Ct(f,"wheel",st,i),Ct(f,Xt[0],lt,i),Ct(ce,Xt[2],Ae),Ct(ce,Xt[3],Ae),Ct(f,"click",Oe,!0),Ct(f,"click",Te),Ct(ce,"gesturestart",ht),Ct(ce,"gestureend",Ue),Ct(f,co+"enter",Xe),Ct(f,co+"leave",Ce),Ct(f,co+"move",Pt),d.isEnabled=d.isPressed=d.isDragging=!1,Pe&&Pe(d))},d.kill=d.revert=function(){d.disable();var ye=So.indexOf(d);ye>=0&&So.splice(ye,1),Kt===d&&(Kt=0)},So.push(d),k&&Zo(f)&&(Kt=d),d.enable(T)},ni(p,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),p}();at.version="3.12.7";at.create=function(p){return new at(p)};at.register=nr;at.getAll=function(){return So.slice()};at.getById=function(p){return So.filter(function(e){return e.vars.id===p})[0]};er()&&_t.registerPlugin(at);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var we,Po,Fe,tt,Ht,qe,us,In,nn,$o,Fo,fn,vt,Nn,ts,kt,_s,vs,Co,sr,Wn,rr,Et,os,ir,ar,oo,ns,fs,Ao,ps,Rn,ss,Yn,pn=1,Tt=Date.now,Xn=Tt(),Wt=0,Go=0,Ts=function(e,n,t){var o=Nt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Ms=function(e,n){return n&&(!Nt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},ri=function p(){return Go&&requestAnimationFrame(p)},Ps=function(){return Nn=1},Cs=function(){return Nn=0},jt=function(e){return e},Uo=function(e){return Math.round(e*1e5)/1e5||0},lr=function(){return typeof window<"u"},cr=function(){return we||lr()&&(we=window.gsap)&&we.registerPlugin&&we},xo=function(e){return!!~us.indexOf(e)},ur=function(e){return(e==="Height"?ps:Fe["inner"+e])||Ht["client"+e]||qe["client"+e]},fr=function(e){return io(e,"getBoundingClientRect")||(xo(e)?function(){return An.width=Fe.innerWidth,An.height=ps,An}:function(){return Qt(e)})},ii=function(e,n,t){var o=t.d,s=t.d2,c=t.a;return(c=io(e,"getBoundingClientRect"))?function(){return c()[o]}:function(){return(n?ur(s):e["client"+s])||0}},ai=function(e,n){return!n||~Zt.indexOf(e)?fr(e):function(){return An}},qt=function(e,n){var t=n.s,o=n.d2,s=n.d,c=n.a;return Math.max(0,(t="scroll"+o)&&(c=io(e,t))?c()-fr(e)()[s]:xo(e)?(Ht[t]||qe[t])-ur(o):e[t]-e["offset"+o])},dn=function(e,n){for(var t=0;t<Co.length;t+=3)(!n||~n.indexOf(Co[t+1]))&&e(Co[t],Co[t+1],Co[t+2])},Nt=function(e){return typeof e=="string"},Mt=function(e){return typeof e=="function"},Wo=function(e){return typeof e=="number"},uo=function(e){return typeof e=="object"},zo=function(e,n,t){return e&&e.progress(n?0:1)&&t&&e.pause()},jn=function(e,n){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return n(e)}):n(e);t&&t.totalTime&&(e.callbackAnimation=t)}},To=Math.abs,pr="left",dr="top",ds="right",hs="bottom",go="width",mo="height",Qo="Right",Ko="Left",Jo="Top",en="Bottom",ct="padding",Gt="margin",Io="Width",gs="Height",ft="px",Ut=function(e){return Fe.getComputedStyle(e)},li=function(e){var n=Ut(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Ss=function(e,n){for(var t in n)t in e||(e[t]=n[t]);return e},Qt=function(e,n){var t=n&&Ut(e)[ts]!=="matrix(1, 0, 0, 1, 0, 0)"&&we.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},On=function(e,n){var t=n.d2;return e["offset"+t]||e["client"+t]||0},hr=function(e){var n=[],t=e.labels,o=e.duration(),s;for(s in t)n.push(t[s]/o);return n},ci=function(e){return function(n){return we.utils.snap(hr(e),n)}},ms=function(e){var n=we.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,c){c===void 0&&(c=.001);var f;if(!s)return n(o);if(s>0){for(o-=c,f=0;f<t.length;f++)if(t[f]>=o)return t[f];return t[f-1]}else for(f=t.length,o+=c;f--;)if(t[f]<=o)return t[f];return t[0]}:function(o,s,c){c===void 0&&(c=.001);var f=n(o);return!s||Math.abs(f-o)<c||f-o<0==s<0?f:n(s<0?o-e:o+e)}},ui=function(e){return function(n,t){return ms(hr(e))(n,t.direction)}},hn=function(e,n,t,o){return t.split(",").forEach(function(s){return e(n,s,o)})},yt=function(e,n,t,o,s){return e.addEventListener(n,t,{passive:!o,capture:!!s})},mt=function(e,n,t,o){return e.removeEventListener(n,t,!!o)},gn=function(e,n,t){t=t&&t.wheelHandler,t&&(e(n,"wheel",t),e(n,"touchmove",t))},Es={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},mn={toggleActions:"play",anticipatePin:0},Ln={top:0,left:0,center:.5,bottom:1,right:1},Pn=function(e,n){if(Nt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=n/100),e=e.substr(0,t-1)),e=o+(e in Ln?Ln[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},yn=function(e,n,t,o,s,c,f,x){var D=s.startColor,N=s.endColor,S=s.fontSize,_=s.indent,g=s.fontWeight,v=tt.createElement("div"),T=xo(t)||io(t,"pinType")==="fixed",y=e.indexOf("scroller")!==-1,G=T?qe:t,$=e.indexOf("start")!==-1,L=$?D:N,E="border-color:"+L+";font-size:"+S+";color:"+L+";font-weight:"+g+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return E+="position:"+((y||x)&&T?"fixed;":"absolute;"),(y||x||!T)&&(E+=(o===dt?ds:hs)+":"+(c+parseFloat(_))+"px;"),f&&(E+="box-sizing:border-box;text-align:left;width:"+f.offsetWidth+"px;"),v._isStart=$,v.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),v.style.cssText=E,v.innerText=n||n===0?e+"-"+n:e,G.children[0]?G.insertBefore(v,G.children[0]):G.appendChild(v),v._offset=v["offset"+o.op.d2],Cn(v,0,o,$),v},Cn=function(e,n,t,o){var s={display:"block"},c=t[o?"os2":"p2"],f=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+c+Io]=1,s["border"+f+Io]=0,s[t.p]=n+"px",we.set(e,s)},He=[],rs={},sn,As=function(){return Tt()-Wt>34&&(sn||(sn=requestAnimationFrame(Jt)))},Mo=function(){(!Et||!Et.isPressed||Et.startX>qe.clientWidth)&&(Ge.cache++,Et?sn||(sn=requestAnimationFrame(Jt)):Jt(),Wt||bo("scrollStart"),Wt=Tt())},Vn=function(){ar=Fe.innerWidth,ir=Fe.innerHeight},Yo=function(e){Ge.cache++,(e===!0||!vt&&!rr&&!tt.fullscreenElement&&!tt.webkitFullscreenElement&&(!os||ar!==Fe.innerWidth||Math.abs(Fe.innerHeight-ir)>Fe.innerHeight*.25))&&In.restart(!0)},wo={},fi=[],gr=function p(){return mt(Ie,"scrollEnd",p)||ho(!0)},bo=function(e){return wo[e]&&wo[e].map(function(n){return n()})||fi},zt=[],mr=function(e){for(var n=0;n<zt.length;n+=5)(!e||zt[n+4]&&zt[n+4].query===e)&&(zt[n].style.cssText=zt[n+1],zt[n].getBBox&&zt[n].setAttribute("transform",zt[n+2]||""),zt[n+3].uncache=1)},ys=function(e,n){var t;for(kt=0;kt<He.length;kt++)t=He[kt],t&&(!n||t._ctx===n)&&(e?t.kill(1):t.revert(!0,!0));Rn=!0,n&&mr(n),n||bo("revert")},yr=function(e,n){Ge.cache++,(n||!Dt)&&Ge.forEach(function(t){return Mt(t)&&t.cacheID++&&(t.rec=0)}),Nt(e)&&(Fe.history.scrollRestoration=fs=e)},Dt,yo=0,ks,pi=function(){if(ks!==yo){var e=ks=yo;requestAnimationFrame(function(){return e===yo&&ho(!0)})}},xr=function(){qe.appendChild(Ao),ps=!Et&&Ao.offsetHeight||Fe.innerHeight,qe.removeChild(Ao)},Ds=function(e){return nn(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},ho=function(e,n){if(Ht=tt.documentElement,qe=tt.body,us=[Fe,tt,Ht,qe],Wt&&!e&&!Rn){yt(Ie,"scrollEnd",gr);return}xr(),Dt=Ie.isRefreshing=!0,Ge.forEach(function(o){return Mt(o)&&++o.cacheID&&(o.rec=o())});var t=bo("refreshInit");sr&&Ie.sort(),n||ys(),Ge.forEach(function(o){Mt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),He.slice(0).forEach(function(o){return o.refresh()}),Rn=!1,He.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",c=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-c),o.refresh()}}),ss=1,Ds(!0),He.forEach(function(o){var s=qt(o.scroller,o._dir),c=o.vars.end==="max"||o._endClamp&&o.end>s,f=o._startClamp&&o.start>=s;(c||f)&&o.setPositions(f?s-1:o.start,c?Math.max(f?s:o.start+1,s):o.end,!0)}),Ds(!1),ss=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),Ge.forEach(function(o){Mt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),yr(fs,1),In.pause(),yo++,Dt=2,Jt(2),He.forEach(function(o){return Mt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),Dt=Ie.isRefreshing=!1,bo("refresh")},is=0,Sn=1,tn,Jt=function(e){if(e===2||!Dt&&!Rn){Ie.isUpdating=!0,tn&&tn.update(0);var n=He.length,t=Tt(),o=t-Xn>=50,s=n&&He[0].scroll();if(Sn=is>s?-1:1,Dt||(is=s),o&&(Wt&&!Nn&&t-Wt>200&&(Wt=0,bo("scrollEnd")),Fo=Xn,Xn=t),Sn<0){for(kt=n;kt-- >0;)He[kt]&&He[kt].update(0,o);Sn=1}else for(kt=0;kt<n;kt++)He[kt]&&He[kt].update(0,o);Ie.isUpdating=!1}sn=0},as=[pr,dr,hs,ds,Gt+en,Gt+Qo,Gt+Jo,Gt+Ko,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],En=as.concat([go,mo,"boxSizing","max"+Io,"max"+gs,"position",Gt,ct,ct+Jo,ct+Qo,ct+en,ct+Ko]),di=function(e,n,t){ko(t);var o=e._gsap;if(o.spacerIsNative)ko(o.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},qn=function(e,n,t,o){if(!e._gsap.swappedIn){for(var s=as.length,c=n.style,f=e.style,x;s--;)x=as[s],c[x]=t[x];c.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(c.display="inline-block"),f[hs]=f[ds]="auto",c.flexBasis=t.flexBasis||"auto",c.overflow="visible",c.boxSizing="border-box",c[go]=On(e,It)+ft,c[mo]=On(e,dt)+ft,c[ct]=f[Gt]=f[dr]=f[pr]="0",ko(o),f[go]=f["max"+Io]=t[go],f[mo]=f["max"+gs]=t[mo],f[ct]=t[ct],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},hi=/([A-Z])/g,ko=function(e){if(e){var n=e.t.style,t=e.length,o=0,s,c;for((e.t._gsap||we.core.getCache(e.t)).uncache=1;o<t;o+=2)c=e[o+1],s=e[o],c?n[s]=c:n[s]&&n.removeProperty(s.replace(hi,"-$1").toLowerCase())}},xn=function(e){for(var n=En.length,t=e.style,o=[],s=0;s<n;s++)o.push(En[s],t[En[s]]);return o.t=e,o},gi=function(e,n,t){for(var o=[],s=e.length,c=t?8:0,f;c<s;c+=2)f=e[c],o.push(f,f in n?n[f]:e[c+1]);return o.t=e.t,o},An={left:0,top:0},Is=function(e,n,t,o,s,c,f,x,D,N,S,_,g,v){Mt(e)&&(e=e(x)),Nt(e)&&e.substr(0,3)==="max"&&(e=_+(e.charAt(4)==="="?Pn("0"+e.substr(3),t):0));var T=g?g.time():0,y,G,$;if(g&&g.seek(0),isNaN(e)||(e=+e),Wo(e))g&&(e=we.utils.mapRange(g.scrollTrigger.start,g.scrollTrigger.end,0,_,e)),f&&Cn(f,t,o,!0);else{Mt(n)&&(n=n(x));var L=(e||"0").split(" "),E,q,X,R;$=Rt(n,x)||qe,E=Qt($)||{},(!E||!E.left&&!E.top)&&Ut($).display==="none"&&(R=$.style.display,$.style.display="block",E=Qt($),R?$.style.display=R:$.style.removeProperty("display")),q=Pn(L[0],E[o.d]),X=Pn(L[1]||"0",t),e=E[o.p]-D[o.p]-N+q+s-X,f&&Cn(f,X,o,t-X<20||f._isStart&&X>20),t-=t-X}if(v&&(x[v]=e||-.001,e<0&&(e=0)),c){var W=e+t,ne=c._isStart;y="scroll"+o.d2,Cn(c,W,o,ne&&W>20||!ne&&(S?Math.max(qe[y],Ht[y]):c.parentNode[y])<=W+1),S&&(D=Qt(f),S&&(c.style[o.op.p]=D[o.op.p]-o.op.m-c._offset+ft))}return g&&$&&(y=Qt($),g.seek(_),G=Qt($),g._caScrollDist=y[o.p]-G[o.p],e=e/g._caScrollDist*_),g&&g.seek(T),g?e:Math.round(e)},mi=/(webkit|moz|length|cssText|inset)/i,Rs=function(e,n,t,o){if(e.parentNode!==n){var s=e.style,c,f;if(n===qe){e._stOrig=s.cssText,f=Ut(e);for(c in f)!+c&&!mi.test(c)&&f[c]&&typeof s[c]=="string"&&c!=="0"&&(s[c]=f[c]);s.top=t,s.left=o}else s.cssText=e._stOrig;we.core.getCache(e).uncache=1,n.appendChild(e)}},wr=function(e,n,t){var o=n,s=o;return function(c){var f=Math.round(e());return f!==o&&f!==s&&Math.abs(f-o)>3&&Math.abs(f-s)>3&&(c=f,t&&t()),s=o,o=Math.round(c),o}},wn=function(e,n,t){var o={};o[n.p]="+="+t,we.set(e,o)},Os=function(e,n){var t=ao(e,n),o="_scroll"+n.p2,s=function c(f,x,D,N,S){var _=c.tween,g=x.onComplete,v={};D=D||t();var T=wr(t,D,function(){_.kill(),c.tween=0});return S=N&&S||0,N=N||f-D,_&&_.kill(),x[o]=f,x.inherit=!1,x.modifiers=v,v[o]=function(){return T(D+N*_.ratio+S*_.ratio*_.ratio)},x.onUpdate=function(){Ge.cache++,c.tween&&Jt()},x.onComplete=function(){c.tween=0,g&&g.call(_)},_=c.tween=we.to(e,x),_};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},yt(e,"wheel",t.wheelHandler),Ie.isTouch&&yt(e,"touchmove",t.wheelHandler),s},Ie=function(){function p(n,t){Po||p.register(we)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ns(this),this.init(n,t)}var e=p.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Go){this.update=this.refresh=this.kill=jt;return}t=Ss(Nt(t)||Wo(t)||t.nodeType?{trigger:t}:t,mn);var s=t,c=s.onUpdate,f=s.toggleClass,x=s.id,D=s.onToggle,N=s.onRefresh,S=s.scrub,_=s.trigger,g=s.pin,v=s.pinSpacing,T=s.invalidateOnRefresh,y=s.anticipatePin,G=s.onScrubComplete,$=s.onSnapComplete,L=s.once,E=s.snap,q=s.pinReparent,X=s.pinSpacer,R=s.containerAnimation,W=s.fastScrollEnd,ne=s.preventOverlaps,M=t.horizontal||t.containerAnimation&&t.horizontal!==!1?It:dt,de=!S&&S!==0,P=Rt(t.scroller||Fe),j=we.core.getCache(P),le=xo(P),fe=("pinType"in t?t.pinType:io(P,"pinType")||le&&"fixed")==="fixed",te=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],B=de&&t.toggleActions.split(" "),k="markers"in t?t.markers:mn.markers,ue=le?0:parseFloat(Ut(P)["border"+M.p2+Io])||0,a=this,K=t.onRefreshInit&&function(){return t.onRefreshInit(a)},oe=ii(P,le,M),Pe=ai(P,le),h=0,u=0,i=0,r=ao(P,M),C,F,w,z,U,O,b,I,J,d,m,l,se,pe,Ye,H,ee,ie,xe,ce,be,_e,he,Oe,re,ge,Ee,Le,Me,ut,lt,Ae,ht,Ue,Qe,st,Pt,Xe,Ce;if(a._startClamp=a._endClamp=!1,a._dir=M,y*=45,a.scroller=P,a.scroll=R?R.time.bind(R):r,z=r(),a.vars=t,o=o||t.animation,"refreshPriority"in t&&(sr=1,t.refreshPriority===-9999&&(tn=a)),j.tweenScroll=j.tweenScroll||{top:Os(P,dt),left:Os(P,It)},a.tweenTo=C=j.tweenScroll[M.p],a.scrubDuration=function(A){ht=Wo(A)&&A,ht?Ae?Ae.duration(A):Ae=we.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ht,paused:!0,onComplete:function(){return G&&G(a)}}):(Ae&&Ae.progress(1).kill(),Ae=0)},o&&(o.vars.lazy=!1,o._initted&&!a.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),a.animation=o.pause(),o.scrollTrigger=a,a.scrubDuration(S),ut=0,x||(x=o.vars.id)),E&&((!uo(E)||E.push)&&(E={snapTo:E}),"scrollBehavior"in qe.style&&we.set(le?[qe,Ht]:P,{scrollBehavior:"auto"}),Ge.forEach(function(A){return Mt(A)&&A.target===(le?tt.scrollingElement||Ht:P)&&(A.smooth=!1)}),w=Mt(E.snapTo)?E.snapTo:E.snapTo==="labels"?ci(o):E.snapTo==="labelsDirectional"?ui(o):E.directional!==!1?function(A,Y){return ms(E.snapTo)(A,Tt()-u<500?0:Y.direction)}:we.utils.snap(E.snapTo),Ue=E.duration||{min:.1,max:2},Ue=uo(Ue)?$o(Ue.min,Ue.max):$o(Ue,Ue),Qe=we.delayedCall(E.delay||ht/2||.1,function(){var A=r(),Y=Tt()-u<500,Z=C.tween;if((Y||Math.abs(a.getVelocity())<10)&&!Z&&!Nn&&h!==A){var me=(A-O)/pe,ve=o&&!de?o.totalProgress():me,V=Y?0:(ve-lt)/(Tt()-Fo)*1e3||0,Se=we.utils.clamp(-me,1-me,To(V/2)*V/.185),Be=me+(E.inertia===!1?0:Se),Ze,je,$e=E,Lt=$e.onStart,Ke=$e.onInterrupt,nt=$e.onComplete;if(Ze=w(Be,a),Wo(Ze)||(Ze=Be),je=Math.max(0,Math.round(O+Ze*pe)),A<=b&&A>=O&&je!==A){if(Z&&!Z._initted&&Z.data<=To(je-A))return;E.inertia===!1&&(Se=Ze-me),C(je,{duration:Ue(To(Math.max(To(Be-ve),To(Ze-ve))*.185/V/.05||0)),ease:E.ease||"power3",data:To(je-A),onInterrupt:function(){return Qe.restart(!0)&&Ke&&Ke(a)},onComplete:function(){a.update(),h=r(),o&&!de&&(Ae?Ae.resetTo("totalProgress",Ze,o._tTime/o._tDur):o.progress(Ze)),ut=lt=o&&!de?o.totalProgress():a.progress,$&&$(a),nt&&nt(a)}},A,Se*pe,je-A-Se*pe),Lt&&Lt(a,C.tween)}}else a.isActive&&h!==A&&Qe.restart(!0)}).pause()),x&&(rs[x]=a),_=a.trigger=Rt(_||g!==!0&&g),Ce=_&&_._gsap&&_._gsap.stRevert,Ce&&(Ce=Ce(a)),g=g===!0?_:Rt(g),Nt(f)&&(f={targets:_,className:f}),g&&(v===!1||v===Gt||(v=!v&&g.parentNode&&g.parentNode.style&&Ut(g.parentNode).display==="flex"?!1:ct),a.pin=g,F=we.core.getCache(g),F.spacer?Ye=F.pinState:(X&&(X=Rt(X),X&&!X.nodeType&&(X=X.current||X.nativeElement),F.spacerIsNative=!!X,X&&(F.spacerState=xn(X))),F.spacer=ie=X||tt.createElement("div"),ie.classList.add("pin-spacer"),x&&ie.classList.add("pin-spacer-"+x),F.pinState=Ye=xn(g)),t.force3D!==!1&&we.set(g,{force3D:!0}),a.spacer=ie=F.spacer,Me=Ut(g),Oe=Me[v+M.os2],ce=we.getProperty(g),be=we.quickSetter(g,M.a,ft),qn(g,ie,Me),ee=xn(g)),k){l=uo(k)?Ss(k,Es):Es,d=yn("scroller-start",x,P,M,l,0),m=yn("scroller-end",x,P,M,l,0,d),xe=d["offset"+M.op.d2];var Te=Rt(io(P,"content")||P);I=this.markerStart=yn("start",x,Te,M,l,xe,0,R),J=this.markerEnd=yn("end",x,Te,M,l,xe,0,R),R&&(Xe=we.quickSetter([I,J],M.a,ft)),!fe&&!(Zt.length&&io(P,"fixedMarkers")===!0)&&(li(le?qe:P),we.set([d,m],{force3D:!0}),ge=we.quickSetter(d,M.a,ft),Le=we.quickSetter(m,M.a,ft))}if(R){var ye=R.vars.onUpdate,ae=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){a.update(0,0,1),ye&&ye.apply(R,ae||[])})}if(a.previous=function(){return He[He.indexOf(a)-1]},a.next=function(){return He[He.indexOf(a)+1]},a.revert=function(A,Y){if(!Y)return a.kill(!0);var Z=A!==!1||!a.enabled,me=vt;Z!==a.isReverted&&(Z&&(st=Math.max(r(),a.scroll.rec||0),i=a.progress,Pt=o&&o.progress()),I&&[I,J,d,m].forEach(function(ve){return ve.style.display=Z?"none":"block"}),Z&&(vt=a,a.update(Z)),g&&(!q||!a.isActive)&&(Z?di(g,ie,Ye):qn(g,ie,Ut(g),re)),Z||a.update(Z),vt=me,a.isReverted=Z)},a.refresh=function(A,Y,Z,me){if(!((vt||!a.enabled)&&!Y)){if(g&&A&&Wt){yt(p,"scrollEnd",gr);return}!Dt&&K&&K(a),vt=a,C.tween&&!Z&&(C.tween.kill(),C.tween=0),Ae&&Ae.pause(),T&&o&&o.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var ve=oe(),V=Pe(),Se=R?R.duration():qt(P,M),Be=pe<=.01,Ze=0,je=me||0,$e=uo(Z)?Z.end:t.end,Lt=t.endTrigger||_,Ke=uo(Z)?Z.start:t.start||(t.start===0||!_?0:g?"0 0":"0 100%"),nt=a.pinnedContainer=t.pinnedContainer&&Rt(t.pinnedContainer,a),rt=_&&Math.max(0,He.indexOf(a))||0,We=rt,Je,ze,Bt,it,ot,et,gt,Ro,an,lo,wt,Oo,ln;for(k&&uo(Z)&&(Oo=we.getProperty(d,M.p),ln=we.getProperty(m,M.p));We-- >0;)et=He[We],et.end||et.refresh(0,1)||(vt=a),gt=et.pin,gt&&(gt===_||gt===g||gt===nt)&&!et.isReverted&&(lo||(lo=[]),lo.unshift(et),et.revert(!0,!0)),et!==He[We]&&(rt--,We--);for(Mt(Ke)&&(Ke=Ke(a)),Ke=Ts(Ke,"start",a),O=Is(Ke,_,ve,M,r(),I,d,a,V,ue,fe,Se,R,a._startClamp&&"_startClamp")||(g?-.001:0),Mt($e)&&($e=$e(a)),Nt($e)&&!$e.indexOf("+=")&&(~$e.indexOf(" ")?$e=(Nt(Ke)?Ke.split(" ")[0]:"")+$e:(Ze=Pn($e.substr(2),ve),$e=Nt(Ke)?Ke:(R?we.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,O):O)+Ze,Lt=_)),$e=Ts($e,"end",a),b=Math.max(O,Is($e||(Lt?"100% 0":Se),Lt,ve,M,r()+Ze,J,m,a,V,ue,fe,Se,R,a._endClamp&&"_endClamp"))||-.001,Ze=0,We=rt;We--;)et=He[We],gt=et.pin,gt&&et.start-et._pinPush<=O&&!R&&et.end>0&&(Je=et.end-(a._startClamp?Math.max(0,et.start):et.start),(gt===_&&et.start-et._pinPush<O||gt===nt)&&isNaN(Ke)&&(Ze+=Je*(1-et.progress)),gt===g&&(je+=Je));if(O+=Ze,b+=Ze,a._startClamp&&(a._startClamp+=Ze),a._endClamp&&!Dt&&(a._endClamp=b||-.001,b=Math.min(b,qt(P,M))),pe=b-O||(O-=.01)&&.001,Be&&(i=we.utils.clamp(0,1,we.utils.normalize(O,b,st))),a._pinPush=je,I&&Ze&&(Je={},Je[M.a]="+="+Ze,nt&&(Je[M.p]="-="+r()),we.set([I,J],Je)),g&&!(ss&&a.end>=qt(P,M)))Je=Ut(g),it=M===dt,Bt=r(),_e=parseFloat(ce(M.a))+je,!Se&&b>1&&(wt=(le?tt.scrollingElement||Ht:P).style,wt={style:wt,value:wt["overflow"+M.a.toUpperCase()]},le&&Ut(qe)["overflow"+M.a.toUpperCase()]!=="scroll"&&(wt.style["overflow"+M.a.toUpperCase()]="scroll")),qn(g,ie,Je),ee=xn(g),ze=Qt(g,!0),Ro=fe&&ao(P,it?It:dt)(),v?(re=[v+M.os2,pe+je+ft],re.t=ie,We=v===ct?On(g,M)+pe+je:0,We&&(re.push(M.d,We+ft),ie.style.flexBasis!=="auto"&&(ie.style.flexBasis=We+ft)),ko(re),nt&&He.forEach(function(Lo){Lo.pin===nt&&Lo.vars.pinSpacing!==!1&&(Lo._subPinOffset=!0)}),fe&&r(st)):(We=On(g,M),We&&ie.style.flexBasis!=="auto"&&(ie.style.flexBasis=We+ft)),fe&&(ot={top:ze.top+(it?Bt-O:Ro)+ft,left:ze.left+(it?Ro:Bt-O)+ft,boxSizing:"border-box",position:"fixed"},ot[go]=ot["max"+Io]=Math.ceil(ze.width)+ft,ot[mo]=ot["max"+gs]=Math.ceil(ze.height)+ft,ot[Gt]=ot[Gt+Jo]=ot[Gt+Qo]=ot[Gt+en]=ot[Gt+Ko]="0",ot[ct]=Je[ct],ot[ct+Jo]=Je[ct+Jo],ot[ct+Qo]=Je[ct+Qo],ot[ct+en]=Je[ct+en],ot[ct+Ko]=Je[ct+Ko],H=gi(Ye,ot,q),Dt&&r(0)),o?(an=o._initted,Wn(1),o.render(o.duration(),!0,!0),he=ce(M.a)-_e+pe+je,Ee=Math.abs(pe-he)>1,fe&&Ee&&H.splice(H.length-2,2),o.render(0,!0,!0),an||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Wn(0)):he=pe,wt&&(wt.value?wt.style["overflow"+M.a.toUpperCase()]=wt.value:wt.style.removeProperty("overflow-"+M.a));else if(_&&r()&&!R)for(ze=_.parentNode;ze&&ze!==qe;)ze._pinOffset&&(O-=ze._pinOffset,b-=ze._pinOffset),ze=ze.parentNode;lo&&lo.forEach(function(Lo){return Lo.revert(!1,!0)}),a.start=O,a.end=b,z=U=Dt?st:r(),!R&&!Dt&&(z<st&&r(st),a.scroll.rec=0),a.revert(!1,!0),u=Tt(),Qe&&(h=-1,Qe.restart(!0)),vt=0,o&&de&&(o._initted||Pt)&&o.progress()!==Pt&&o.progress(Pt||0,!0).render(o.time(),!0,!0),(Be||i!==a.progress||R||T||o&&!o._initted)&&(o&&!de&&o.totalProgress(R&&O<-.001&&!i?we.utils.normalize(O,b,0):i,!0),a.progress=Be||(z-O)/pe===i?0:i),g&&v&&(ie._pinOffset=Math.round(a.progress*he)),Ae&&Ae.invalidate(),isNaN(Oo)||(Oo-=we.getProperty(d,M.p),ln-=we.getProperty(m,M.p),wn(d,M,Oo),wn(I,M,Oo-(me||0)),wn(m,M,ln),wn(J,M,ln-(me||0))),Be&&!Dt&&a.update(),N&&!Dt&&!se&&(se=!0,N(a),se=!1)}},a.getVelocity=function(){return(r()-U)/(Tt()-Fo)*1e3||0},a.endAnimation=function(){zo(a.callbackAnimation),o&&(Ae?Ae.progress(1):o.paused()?de||zo(o,a.direction<0,1):zo(o,o.reversed()))},a.labelToScroll=function(A){return o&&o.labels&&(O||a.refresh()||O)+o.labels[A]/o.duration()*pe||0},a.getTrailing=function(A){var Y=He.indexOf(a),Z=a.direction>0?He.slice(0,Y).reverse():He.slice(Y+1);return(Nt(A)?Z.filter(function(me){return me.vars.preventOverlaps===A}):Z).filter(function(me){return a.direction>0?me.end<=O:me.start>=b})},a.update=function(A,Y,Z){if(!(R&&!Z&&!A)){var me=Dt===!0?st:a.scroll(),ve=A?0:(me-O)/pe,V=ve<0?0:ve>1?1:ve||0,Se=a.progress,Be,Ze,je,$e,Lt,Ke,nt,rt;if(Y&&(U=z,z=R?r():me,E&&(lt=ut,ut=o&&!de?o.totalProgress():V)),y&&g&&!vt&&!pn&&Wt&&(!V&&O<me+(me-U)/(Tt()-Fo)*y?V=1e-4:V===1&&b>me+(me-U)/(Tt()-Fo)*y&&(V=.9999)),V!==Se&&a.enabled){if(Be=a.isActive=!!V&&V<1,Ze=!!Se&&Se<1,Ke=Be!==Ze,Lt=Ke||!!V!=!!Se,a.direction=V>Se?1:-1,a.progress=V,Lt&&!vt&&(je=V&&!Se?0:V===1?1:Se===1?2:3,de&&($e=!Ke&&B[je+1]!=="none"&&B[je+1]||B[je],rt=o&&($e==="complete"||$e==="reset"||$e in o))),ne&&(Ke||rt)&&(rt||S||!o)&&(Mt(ne)?ne(a):a.getTrailing(ne).forEach(function(Bt){return Bt.endAnimation()})),de||(Ae&&!vt&&!pn?(Ae._dp._time-Ae._start!==Ae._time&&Ae.render(Ae._dp._time-Ae._start),Ae.resetTo?Ae.resetTo("totalProgress",V,o._tTime/o._tDur):(Ae.vars.totalProgress=V,Ae.invalidate().restart())):o&&o.totalProgress(V,!!(vt&&(u||A)))),g){if(A&&v&&(ie.style[v+M.os2]=Oe),!fe)be(Uo(_e+he*V));else if(Lt){if(nt=!A&&V>Se&&b+1>me&&me+1>=qt(P,M),q)if(!A&&(Be||nt)){var We=Qt(g,!0),Je=me-O;Rs(g,qe,We.top+(M===dt?Je:0)+ft,We.left+(M===dt?0:Je)+ft)}else Rs(g,ie);ko(Be||nt?H:ee),Ee&&V<1&&Be||be(_e+(V===1&&!nt?he:0))}}E&&!C.tween&&!vt&&!pn&&Qe.restart(!0),f&&(Ke||L&&V&&(V<1||!Yn))&&nn(f.targets).forEach(function(Bt){return Bt.classList[Be||L?"add":"remove"](f.className)}),c&&!de&&!A&&c(a),Lt&&!vt?(de&&(rt&&($e==="complete"?o.pause().totalProgress(1):$e==="reset"?o.restart(!0).pause():$e==="restart"?o.restart(!0):o[$e]()),c&&c(a)),(Ke||!Yn)&&(D&&Ke&&jn(a,D),te[je]&&jn(a,te[je]),L&&(V===1?a.kill(!1,1):te[je]=0),Ke||(je=V===1?1:3,te[je]&&jn(a,te[je]))),W&&!Be&&Math.abs(a.getVelocity())>(Wo(W)?W:2500)&&(zo(a.callbackAnimation),Ae?Ae.progress(1):zo(o,$e==="reverse"?1:!V,1))):de&&c&&!vt&&c(a)}if(Le){var ze=R?me/R.duration()*(R._caScrollDist||0):me;ge(ze+(d._isFlipped?1:0)),Le(ze)}Xe&&Xe(-me/R.duration()*(R._caScrollDist||0))}},a.enable=function(A,Y){a.enabled||(a.enabled=!0,yt(P,"resize",Yo),le||yt(P,"scroll",Mo),K&&yt(p,"refreshInit",K),A!==!1&&(a.progress=i=0,z=U=h=r()),Y!==!1&&a.refresh())},a.getTween=function(A){return A&&C?C.tween:Ae},a.setPositions=function(A,Y,Z,me){if(R){var ve=R.scrollTrigger,V=R.duration(),Se=ve.end-ve.start;A=ve.start+Se*A/V,Y=ve.start+Se*Y/V}a.refresh(!1,!1,{start:Ms(A,Z&&!!a._startClamp),end:Ms(Y,Z&&!!a._endClamp)},me),a.update()},a.adjustPinSpacing=function(A){if(re&&A){var Y=re.indexOf(M.d)+1;re[Y]=parseFloat(re[Y])+A+ft,re[1]=parseFloat(re[1])+A+ft,ko(re)}},a.disable=function(A,Y){if(a.enabled&&(A!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,Y||Ae&&Ae.pause(),st=0,F&&(F.uncache=1),K&&mt(p,"refreshInit",K),Qe&&(Qe.pause(),C.tween&&C.tween.kill()&&(C.tween=0)),!le)){for(var Z=He.length;Z--;)if(He[Z].scroller===P&&He[Z]!==a)return;mt(P,"resize",Yo),le||mt(P,"scroll",Mo)}},a.kill=function(A,Y){a.disable(A,Y),Ae&&!Y&&Ae.kill(),x&&delete rs[x];var Z=He.indexOf(a);Z>=0&&He.splice(Z,1),Z===kt&&Sn>0&&kt--,Z=0,He.forEach(function(me){return me.scroller===a.scroller&&(Z=1)}),Z||Dt||(a.scroll.rec=0),o&&(o.scrollTrigger=null,A&&o.revert({kill:!1}),Y||o.kill()),I&&[I,J,d,m].forEach(function(me){return me.parentNode&&me.parentNode.removeChild(me)}),tn===a&&(tn=0),g&&(F&&(F.uncache=1),Z=0,He.forEach(function(me){return me.pin===g&&Z++}),Z||(F.spacer=0)),t.onKill&&t.onKill(a)},He.push(a),a.enable(!1,!1),Ce&&Ce(a),o&&o.add&&!pe){var Q=a.update;a.update=function(){a.update=Q,Ge.cache++,O||b||a.refresh()},we.delayedCall(.01,a.update),pe=.01,O=b=0}else a.refresh();g&&pi()},p.register=function(t){return Po||(we=t||cr(),lr()&&window.document&&p.enable(),Po=Go),Po},p.defaults=function(t){if(t)for(var o in t)mn[o]=t[o];return mn},p.disable=function(t,o){Go=0,He.forEach(function(c){return c[o?"kill":"disable"](t)}),mt(Fe,"wheel",Mo),mt(tt,"scroll",Mo),clearInterval(fn),mt(tt,"touchcancel",jt),mt(qe,"touchstart",jt),hn(mt,tt,"pointerdown,touchstart,mousedown",Ps),hn(mt,tt,"pointerup,touchend,mouseup",Cs),In.kill(),dn(mt);for(var s=0;s<Ge.length;s+=3)gn(mt,Ge[s],Ge[s+1]),gn(mt,Ge[s],Ge[s+2])},p.enable=function(){if(Fe=window,tt=document,Ht=tt.documentElement,qe=tt.body,we&&(nn=we.utils.toArray,$o=we.utils.clamp,ns=we.core.context||jt,Wn=we.core.suppressOverwrites||jt,fs=Fe.history.scrollRestoration||"auto",is=Fe.pageYOffset||0,we.core.globals("ScrollTrigger",p),qe)){Go=1,Ao=document.createElement("div"),Ao.style.height="100vh",Ao.style.position="absolute",xr(),ri(),at.register(we),p.isTouch=at.isTouch,oo=at.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),os=at.isTouch===1,yt(Fe,"wheel",Mo),us=[Fe,tt,Ht,qe],we.matchMedia?(p.matchMedia=function(D){var N=we.matchMedia(),S;for(S in D)N.add(S,D[S]);return N},we.addEventListener("matchMediaInit",function(){return ys()}),we.addEventListener("matchMediaRevert",function(){return mr()}),we.addEventListener("matchMedia",function(){ho(0,1),bo("matchMedia")}),we.matchMedia().add("(orientation: portrait)",function(){return Vn(),Vn})):console.warn("Requires GSAP 3.11.0 or later"),Vn(),yt(tt,"scroll",Mo);var t=qe.hasAttribute("style"),o=qe.style,s=o.borderTopStyle,c=we.core.Animation.prototype,f,x;for(c.revert||Object.defineProperty(c,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",f=Qt(qe),dt.m=Math.round(f.top+dt.sc())||0,It.m=Math.round(f.left+It.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(qe.setAttribute("style",""),qe.removeAttribute("style")),fn=setInterval(As,250),we.delayedCall(.5,function(){return pn=0}),yt(tt,"touchcancel",jt),yt(qe,"touchstart",jt),hn(yt,tt,"pointerdown,touchstart,mousedown",Ps),hn(yt,tt,"pointerup,touchend,mouseup",Cs),ts=we.utils.checkPrefix("transform"),En.push(ts),Po=Tt(),In=we.delayedCall(.2,ho).pause(),Co=[tt,"visibilitychange",function(){var D=Fe.innerWidth,N=Fe.innerHeight;tt.hidden?(_s=D,vs=N):(_s!==D||vs!==N)&&Yo()},tt,"DOMContentLoaded",ho,Fe,"load",ho,Fe,"resize",Yo],dn(yt),He.forEach(function(D){return D.enable(0,1)}),x=0;x<Ge.length;x+=3)gn(mt,Ge[x],Ge[x+1]),gn(mt,Ge[x],Ge[x+2])}},p.config=function(t){"limitCallbacks"in t&&(Yn=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(fn)||(fn=o)&&setInterval(As,o),"ignoreMobileResize"in t&&(os=p.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(dn(mt)||dn(yt,t.autoRefreshEvents||"none"),rr=(t.autoRefreshEvents+"").indexOf("resize")===-1)},p.scrollerProxy=function(t,o){var s=Rt(t),c=Ge.indexOf(s),f=xo(s);~c&&Ge.splice(c,f?6:2),o&&(f?Zt.unshift(Fe,o,qe,o,Ht,o):Zt.unshift(s,o))},p.clearMatchMedia=function(t){He.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},p.isInViewport=function(t,o,s){var c=(Nt(t)?Rt(t):t).getBoundingClientRect(),f=c[s?go:mo]*o||0;return s?c.right-f>0&&c.left+f<Fe.innerWidth:c.bottom-f>0&&c.top+f<Fe.innerHeight},p.positionInViewport=function(t,o,s){Nt(t)&&(t=Rt(t));var c=t.getBoundingClientRect(),f=c[s?go:mo],x=o==null?f/2:o in Ln?Ln[o]*f:~o.indexOf("%")?parseFloat(o)*f/100:parseFloat(o)||0;return s?(c.left+x)/Fe.innerWidth:(c.top+x)/Fe.innerHeight},p.killAll=function(t){if(He.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=wo.killAll||[];wo={},o.forEach(function(s){return s()})}},p}();Ie.version="3.12.7";Ie.saveStyles=function(p){return p?nn(p).forEach(function(e){if(e&&e.style){var n=zt.indexOf(e);n>=0&&zt.splice(n,5),zt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),we.core.getCache(e),ns())}}):zt};Ie.revert=function(p,e){return ys(!p,e)};Ie.create=function(p,e){return new Ie(p,e)};Ie.refresh=function(p){return p?Yo(!0):(Po||Ie.register())&&ho(!0)};Ie.update=function(p){return++Ge.cache&&Jt(p===!0?2:0)};Ie.clearScrollMemory=yr;Ie.maxScroll=function(p,e){return qt(p,e?It:dt)};Ie.getScrollFunc=function(p,e){return ao(Rt(p),e?It:dt)};Ie.getById=function(p){return rs[p]};Ie.getAll=function(){return He.filter(function(p){return p.vars.id!=="ScrollSmoother"})};Ie.isScrolling=function(){return!!Wt};Ie.snapDirectional=ms;Ie.addEventListener=function(p,e){var n=wo[p]||(wo[p]=[]);~n.indexOf(e)||n.push(e)};Ie.removeEventListener=function(p,e){var n=wo[p],t=n&&n.indexOf(e);t>=0&&n.splice(t,1)};Ie.batch=function(p,e){var n=[],t={},o=e.interval||.016,s=e.batchMax||1e9,c=function(D,N){var S=[],_=[],g=we.delayedCall(o,function(){N(S,_),S=[],_=[]}).pause();return function(v){S.length||g.restart(!0),S.push(v.trigger),_.push(v),s<=S.length&&g.progress(1)}},f;for(f in e)t[f]=f.substr(0,2)==="on"&&Mt(e[f])&&f!=="onRefreshInit"?c(f,e[f]):e[f];return Mt(s)&&(s=s(),yt(Ie,"refresh",function(){return s=e.batchMax()})),nn(p).forEach(function(x){var D={};for(f in t)D[f]=t[f];D.trigger=x,n.push(Ie.create(D))}),n};var Ls=function(e,n,t,o){return n>o?e(o):n<0&&e(0),t>o?(o-n)/(t-n):t<0?n/(n-t):1},Zn=function p(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(at.isTouch?" pinch-zoom":""):"none",e===Ht&&p(qe,n)},bn={auto:1,scroll:1},yi=function(e){var n=e.event,t=e.target,o=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,c=s._gsap||we.core.getCache(s),f=Tt(),x;if(!c._isScrollT||f-c._isScrollT>2e3){for(;s&&s!==qe&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(bn[(x=Ut(s)).overflowY]||bn[x.overflowX]));)s=s.parentNode;c._isScroll=s&&s!==t&&!xo(s)&&(bn[(x=Ut(s)).overflowY]||bn[x.overflowX]),c._isScrollT=f}(c._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},br=function(e,n,t,o){return at.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&yi,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&yt(tt,at.eventTypes[0],zs,!1,!0)},onDisable:function(){return mt(tt,at.eventTypes[0],zs,!0)}})},xi=/(input|label|select|textarea)/i,Bs,zs=function(e){var n=xi.test(e.target.tagName);(n||Bs)&&(e._gsapAllow=!0,Bs=n)},wi=function(e){uo(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,t=n.normalizeScrollX,o=n.momentum,s=n.allowNestedScroll,c=n.onRelease,f,x,D=Rt(e.target)||Ht,N=we.core.globals().ScrollSmoother,S=N&&N.get(),_=oo&&(e.content&&Rt(e.content)||S&&e.content!==!1&&!S.smooth()&&S.content()),g=ao(D,dt),v=ao(D,It),T=1,y=(at.isTouch&&Fe.visualViewport?Fe.visualViewport.scale*Fe.visualViewport.width:Fe.outerWidth)/Fe.innerWidth,G=0,$=Mt(o)?function(){return o(f)}:function(){return o||2.8},L,E,q=br(D,e.type,!0,s),X=function(){return E=!1},R=jt,W=jt,ne=function(){x=qt(D,dt),W=$o(oo?1:0,x),t&&(R=$o(0,qt(D,It))),L=yo},M=function(){_._gsap.y=Uo(parseFloat(_._gsap.y)+g.offset)+"px",_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(_._gsap.y)+", 0, 1)",g.offset=g.cacheID=0},de=function(){if(E){requestAnimationFrame(X);var k=Uo(f.deltaY/2),ue=W(g.v-k);if(_&&ue!==g.v+g.offset){g.offset=ue-g.v;var a=Uo((parseFloat(_&&_._gsap.y)||0)-g.offset);_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",_._gsap.y=a+"px",g.cacheID=Ge.cache,Jt()}return!0}g.offset&&M(),E=!0},P,j,le,fe,te=function(){ne(),P.isActive()&&P.vars.scrollY>x&&(g()>x?P.progress(1)&&g(x):P.resetTo("scrollY",x))};return _&&we.set(_,{y:"+=0"}),e.ignoreCheck=function(B){return oo&&B.type==="touchmove"&&de()||T>1.05&&B.type!=="touchstart"||f.isGesturing||B.touches&&B.touches.length>1},e.onPress=function(){E=!1;var B=T;T=Uo((Fe.visualViewport&&Fe.visualViewport.scale||1)/y),P.pause(),B!==T&&Zn(D,T>1.01?!0:t?!1:"x"),j=v(),le=g(),ne(),L=yo},e.onRelease=e.onGestureStart=function(B,k){if(g.offset&&M(),!k)fe.restart(!0);else{Ge.cache++;var ue=$(),a,K;t&&(a=v(),K=a+ue*.05*-B.velocityX/.227,ue*=Ls(v,a,K,qt(D,It)),P.vars.scrollX=R(K)),a=g(),K=a+ue*.05*-B.velocityY/.227,ue*=Ls(g,a,K,qt(D,dt)),P.vars.scrollY=W(K),P.invalidate().duration(ue).play(.01),(oo&&P.vars.scrollY>=x||a>=x-1)&&we.to({},{onUpdate:te,duration:ue})}c&&c(B)},e.onWheel=function(){P._ts&&P.pause(),Tt()-G>1e3&&(L=0,G=Tt())},e.onChange=function(B,k,ue,a,K){if(yo!==L&&ne(),k&&t&&v(R(a[2]===k?j+(B.startX-B.x):v()+k-a[1])),ue){g.offset&&M();var oe=K[2]===ue,Pe=oe?le+B.startY-B.y:g()+ue-K[1],h=W(Pe);oe&&Pe!==h&&(le+=h-Pe),g(h)}(ue||k)&&Jt()},e.onEnable=function(){Zn(D,t?!1:"x"),Ie.addEventListener("refresh",te),yt(Fe,"resize",te),g.smooth&&(g.target.style.scrollBehavior="auto",g.smooth=v.smooth=!1),q.enable()},e.onDisable=function(){Zn(D,!0),mt(Fe,"resize",te),Ie.removeEventListener("refresh",te),q.kill()},e.lockAxis=e.lockAxis!==!1,f=new at(e),f.iOS=oo,oo&&!g()&&g(1),oo&&we.ticker.add(jt),fe=f._dc,P=we.to(f,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:wr(g,g(),function(){return P.pause()})},onUpdate:Jt,onComplete:fe.vars.onComplete}),f};Ie.sort=function(p){if(Mt(p))return He.sort(p);var e=Fe.pageYOffset||0;return Ie.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+Fe.innerHeight}),He.sort(p||function(n,t){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};Ie.observe=function(p){return new at(p)};Ie.normalizeScroll=function(p){if(typeof p>"u")return Et;if(p===!0&&Et)return Et.enable();if(p===!1){Et&&Et.kill(),Et=p;return}var e=p instanceof at?p:wi(p);return Et&&Et.target===e.target&&Et.kill(),xo(e.target)&&(Et=e),e};Ie.core={_getVelocityProp:es,_inputObserver:br,_scrollers:Ge,_proxies:Zt,bridge:{ss:function(){Wt||bo("scrollStart"),Wt=Tt()},ref:function(){return vt}}};cr()&&we.registerPlugin(Ie);var on=function(){var p=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(N){N.preventDefault(),t(++p%e.children.length)},!1);function n(N){return e.appendChild(N.dom),N}function t(N){for(var S=0;S<e.children.length;S++)e.children[S].style.display=S===N?"block":"none";p=N}var o=(performance||Date).now(),s=o,c=0,f=n(new on.Panel("FPS","#0ff","#002")),x=n(new on.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var D=n(new on.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){c++;var N=(performance||Date).now();if(x.update(N-o,200),N>=s+1e3&&(f.update(c*1e3/(N-s),100),s=N,c=0,D)){var S=performance.memory;D.update(S.usedJSHeapSize/1048576,S.jsHeapSizeLimit/1048576)}return N},update:function(){o=this.end()},domElement:e,setMode:t}};on.Panel=function(p,e,n){var t=1/0,o=0,s=Math.round,c=s(window.devicePixelRatio||1),f=80*c,x=48*c,D=3*c,N=2*c,S=3*c,_=15*c,g=74*c,v=30*c,T=document.createElement("canvas");T.width=f,T.height=x,T.style.cssText="width:80px;height:48px";var y=T.getContext("2d");return y.font="bold "+9*c+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,f,x),y.fillStyle=e,y.fillText(p,D,N),y.fillRect(S,_,g,v),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(S,_,g,v),{dom:T,update:function(G,$){t=Math.min(t,G),o=Math.max(o,G),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,f,_),y.fillStyle=e,y.fillText(s(G)+" "+p+" ("+s(t)+"-"+s(o)+")",D,N),y.drawImage(T,S+c,_,g-c,v,S,_,g-c,v),y.fillRect(S+g-c,_,c,v),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(S+g-c,_,c,s((1-G/$)*v))}}};const _r={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class rn{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const bi=new Dr(-1,1,1,-1,0,1);class _i extends ro{constructor(){super(),this.setAttribute("position",new Xo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Xo([0,2,0,0,2,0],2))}}const vi=new _i;class vr{constructor(e){this._mesh=new Ne(vi,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,bi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ti extends rn{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof po?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Qn.clone(e.uniforms),this.material=new po({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new vr(this.material)}render(e,n,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Ns extends rn{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let c,f;this.inverse?(c=0,f=1):(c=1,f=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,c,4294967295),s.buffers.stencil.setClear(f),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class Mi extends rn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Pi{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const t=e.getSize(new Re);this._width=t.width,this._height=t.height,n=new vn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Tn}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ti(_r),this.copyPass.material.blending=Ir,this.clock=new Rr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const c=this.passes[o];if(c.enabled!==!1){if(c.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),c.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),c.needsSwap){if(t){const f=this.renderer.getContext(),x=this.renderer.state.buffers.stencil;x.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),x.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}Ns!==void 0&&(c instanceof Ns?t=!0:c instanceof Mi&&(t=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Re);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Ci extends rn{constructor(e,n,t=null,o=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new At}render(e,n,t){const o=e.autoClear;e.autoClear=!1;let s,c;this.overrideMaterial!==null&&(c=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=c),e.autoClear=o}}const Si={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new At(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class _o extends rn{constructor(e,n,t,o){super(),this.strength=n!==void 0?n:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new Re(e.x,e.y):new Re(256,256),this.clearColor=new At(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);this.renderTargetBright=new vn(s,c,{type:Tn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let S=0;S<this.nMips;S++){const _=new vn(s,c,{type:Tn});_.texture.name="UnrealBloomPass.h"+S,_.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(_);const g=new vn(s,c,{type:Tn});g.texture.name="UnrealBloomPass.v"+S,g.texture.generateMipmaps=!1,this.renderTargetsVertical.push(g),s=Math.round(s/2),c=Math.round(c/2)}const f=Si;this.highPassUniforms=Qn.clone(f.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new po({uniforms:this.highPassUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),this.separableBlurMaterials=[];const x=[3,5,7,9,11];s=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);for(let S=0;S<this.nMips;S++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(x[S])),this.separableBlurMaterials[S].uniforms.invSize.value=new Re(1/s,1/c),s=Math.round(s/2),c=Math.round(c/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const D=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=D,this.bloomTintColors=[new ke(1,1,1),new ke(1,1,1),new ke(1,1,1),new ke(1,1,1),new ke(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const N=_r;this.copyUniforms=Qn.clone(N.uniforms),this.blendMaterial=new po({uniforms:this.copyUniforms,vertexShader:N.vertexShader,fragmentShader:N.fragmentShader,blending:Vt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new At,this.oldClearAlpha=1,this.basic=new pt,this.fsQuad=new vr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let t=Math.round(e/2),o=Math.round(n/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new Re(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,n,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const c=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let f=this.renderTargetBright;for(let x=0;x<this.nMips;x++)this.fsQuad.material=this.separableBlurMaterials[x],this.separableBlurMaterials[x].uniforms.colorTexture.value=f.texture,this.separableBlurMaterials[x].uniforms.direction.value=_o.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[x]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[x].uniforms.colorTexture.value=this.renderTargetsHorizontal[x].texture,this.separableBlurMaterials[x].uniforms.direction.value=_o.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[x]),e.clear(),this.fsQuad.render(e),f=this.renderTargetsVertical[x];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=c}getSeparableBlurMaterial(e){const n=[];for(let t=0;t<e;t++)n.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new po({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Re(.5,.5)},direction:{value:new Re(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new po({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}_o.BlurDirectionX=new Re(1,0);_o.BlurDirectionY=new Re(0,1);class ls extends Or{constructor(e,n={}){const t=n.font;if(t===void 0)super();else{const o=t.generateShapes(e,n.size);n.depth===void 0&&(n.depth=50),n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}const Ei=Nr;class Bn extends Xs{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,o){const s=this,c=new js(s.manager);c.setPath(s.path),c.setRequestHeader(s.requestHeader),c.setWithCredentials(s.withCredentials),c.load(e,function(f){try{n(s.parse(f))}catch(x){o?o(x):console.error(x),s.manager.itemError(e)}},t,o)}parse(e){const n=this;function t(h,u){if(h.nodeType!==1)return;const i=E(h);let r=!1,C=null;switch(h.nodeName){case"svg":u=v(h,u);break;case"style":s(h);break;case"g":u=v(h,u);break;case"path":u=v(h,u),h.hasAttribute("d")&&(C=o(h));break;case"rect":u=v(h,u),C=x(h);break;case"polygon":u=v(h,u),C=D(h);break;case"polyline":u=v(h,u),C=N(h);break;case"circle":u=v(h,u),C=S(h);break;case"ellipse":u=v(h,u),C=_(h);break;case"line":u=v(h,u),C=g(h);break;case"defs":r=!0;break;case"use":u=v(h,u);const z=(h.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),U=h.viewportElement.getElementById(z);U?t(U,u):console.warn("SVGLoader: 'use node' references non-existent node id: "+z);break}C&&(u.fill!==void 0&&u.fill!=="none"&&C.color.setStyle(u.fill,Ei),X(C,K),P.push(C),C.userData={node:h,style:u});const F=h.childNodes;for(let w=0;w<F.length;w++){const z=F[w];r&&z.nodeName!=="style"&&z.nodeName!=="defs"||t(z,u)}i&&(le.pop(),le.length>0?K.copy(le[le.length-1]):K.identity())}function o(h){const u=new to,i=new Re,r=new Re,C=new Re;let F=!0,w=!1;const z=h.getAttribute("d");if(z===""||z==="none")return null;const U=z.match(/[a-df-z][^a-df-z]*/ig);for(let O=0,b=U.length;O<b;O++){const I=U[O],J=I.charAt(0),d=I.slice(1).trim();F===!0&&(w=!0,F=!1);let m;switch(J){case"M":m=y(d);for(let l=0,se=m.length;l<se;l+=2)i.x=m[l+0],i.y=m[l+1],r.x=i.x,r.y=i.y,l===0?u.moveTo(i.x,i.y):u.lineTo(i.x,i.y),l===0&&C.copy(i);break;case"H":m=y(d);for(let l=0,se=m.length;l<se;l++)i.x=m[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&w===!0&&C.copy(i);break;case"V":m=y(d);for(let l=0,se=m.length;l<se;l++)i.y=m[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&w===!0&&C.copy(i);break;case"L":m=y(d);for(let l=0,se=m.length;l<se;l+=2)i.x=m[l+0],i.y=m[l+1],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&w===!0&&C.copy(i);break;case"C":m=y(d);for(let l=0,se=m.length;l<se;l+=6)u.bezierCurveTo(m[l+0],m[l+1],m[l+2],m[l+3],m[l+4],m[l+5]),r.x=m[l+2],r.y=m[l+3],i.x=m[l+4],i.y=m[l+5],l===0&&w===!0&&C.copy(i);break;case"S":m=y(d);for(let l=0,se=m.length;l<se;l+=4)u.bezierCurveTo(T(i.x,r.x),T(i.y,r.y),m[l+0],m[l+1],m[l+2],m[l+3]),r.x=m[l+0],r.y=m[l+1],i.x=m[l+2],i.y=m[l+3],l===0&&w===!0&&C.copy(i);break;case"Q":m=y(d);for(let l=0,se=m.length;l<se;l+=4)u.quadraticCurveTo(m[l+0],m[l+1],m[l+2],m[l+3]),r.x=m[l+0],r.y=m[l+1],i.x=m[l+2],i.y=m[l+3],l===0&&w===!0&&C.copy(i);break;case"T":m=y(d);for(let l=0,se=m.length;l<se;l+=2){const pe=T(i.x,r.x),Ye=T(i.y,r.y);u.quadraticCurveTo(pe,Ye,m[l+0],m[l+1]),r.x=pe,r.y=Ye,i.x=m[l+0],i.y=m[l+1],l===0&&w===!0&&C.copy(i)}break;case"A":m=y(d,[3,4],7);for(let l=0,se=m.length;l<se;l+=7){if(m[l+5]==i.x&&m[l+6]==i.y)continue;const pe=i.clone();i.x=m[l+5],i.y=m[l+6],r.x=i.x,r.y=i.y,c(u,m[l],m[l+1],m[l+2],m[l+3],m[l+4],pe,i),l===0&&w===!0&&C.copy(i)}break;case"m":m=y(d);for(let l=0,se=m.length;l<se;l+=2)i.x+=m[l+0],i.y+=m[l+1],r.x=i.x,r.y=i.y,l===0?u.moveTo(i.x,i.y):u.lineTo(i.x,i.y),l===0&&C.copy(i);break;case"h":m=y(d);for(let l=0,se=m.length;l<se;l++)i.x+=m[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&w===!0&&C.copy(i);break;case"v":m=y(d);for(let l=0,se=m.length;l<se;l++)i.y+=m[l],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&w===!0&&C.copy(i);break;case"l":m=y(d);for(let l=0,se=m.length;l<se;l+=2)i.x+=m[l+0],i.y+=m[l+1],r.x=i.x,r.y=i.y,u.lineTo(i.x,i.y),l===0&&w===!0&&C.copy(i);break;case"c":m=y(d);for(let l=0,se=m.length;l<se;l+=6)u.bezierCurveTo(i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3],i.x+m[l+4],i.y+m[l+5]),r.x=i.x+m[l+2],r.y=i.y+m[l+3],i.x+=m[l+4],i.y+=m[l+5],l===0&&w===!0&&C.copy(i);break;case"s":m=y(d);for(let l=0,se=m.length;l<se;l+=4)u.bezierCurveTo(T(i.x,r.x),T(i.y,r.y),i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3]),r.x=i.x+m[l+0],r.y=i.y+m[l+1],i.x+=m[l+2],i.y+=m[l+3],l===0&&w===!0&&C.copy(i);break;case"q":m=y(d);for(let l=0,se=m.length;l<se;l+=4)u.quadraticCurveTo(i.x+m[l+0],i.y+m[l+1],i.x+m[l+2],i.y+m[l+3]),r.x=i.x+m[l+0],r.y=i.y+m[l+1],i.x+=m[l+2],i.y+=m[l+3],l===0&&w===!0&&C.copy(i);break;case"t":m=y(d);for(let l=0,se=m.length;l<se;l+=2){const pe=T(i.x,r.x),Ye=T(i.y,r.y);u.quadraticCurveTo(pe,Ye,i.x+m[l+0],i.y+m[l+1]),r.x=pe,r.y=Ye,i.x=i.x+m[l+0],i.y=i.y+m[l+1],l===0&&w===!0&&C.copy(i)}break;case"a":m=y(d,[3,4],7);for(let l=0,se=m.length;l<se;l+=7){if(m[l+5]==0&&m[l+6]==0)continue;const pe=i.clone();i.x+=m[l+5],i.y+=m[l+6],r.x=i.x,r.y=i.y,c(u,m[l],m[l+1],m[l+2],m[l+3],m[l+4],pe,i),l===0&&w===!0&&C.copy(i)}break;case"Z":case"z":u.currentPath.autoClose=!0,u.currentPath.curves.length>0&&(i.copy(C),u.currentPath.currentPoint.copy(i),F=!0);break;default:console.warn(I)}w=!1}return u}function s(h){if(!(!h.sheet||!h.sheet.cssRules||!h.sheet.cssRules.length))for(let u=0;u<h.sheet.cssRules.length;u++){const i=h.sheet.cssRules[u];if(i.type!==1)continue;const r=i.selectorText.split(/,/gm).filter(Boolean).map(C=>C.trim());for(let C=0;C<r.length;C++){const F=Object.fromEntries(Object.entries(i.style).filter(([,w])=>w!==""));j[r[C]]=Object.assign(j[r[C]]||{},F)}}}function c(h,u,i,r,C,F,w,z){if(u==0||i==0){h.lineTo(z.x,z.y);return}r=r*Math.PI/180,u=Math.abs(u),i=Math.abs(i);const U=(w.x-z.x)/2,O=(w.y-z.y)/2,b=Math.cos(r)*U+Math.sin(r)*O,I=-Math.sin(r)*U+Math.cos(r)*O;let J=u*u,d=i*i;const m=b*b,l=I*I,se=m/J+l/d;if(se>1){const he=Math.sqrt(se);u=he*u,i=he*i,J=u*u,d=i*i}const pe=J*l+d*m,Ye=(J*d-pe)/pe;let H=Math.sqrt(Math.max(0,Ye));C===F&&(H=-H);const ee=H*u*I/i,ie=-H*i*b/u,xe=Math.cos(r)*ee-Math.sin(r)*ie+(w.x+z.x)/2,ce=Math.sin(r)*ee+Math.cos(r)*ie+(w.y+z.y)/2,be=f(1,0,(b-ee)/u,(I-ie)/i),_e=f((b-ee)/u,(I-ie)/i,(-b-ee)/u,(-I-ie)/i)%(Math.PI*2);h.currentPath.absellipse(xe,ce,u,i,be,be+_e,F===0,r)}function f(h,u,i,r){const C=h*i+u*r,F=Math.sqrt(h*h+u*u)*Math.sqrt(i*i+r*r);let w=Math.acos(Math.max(-1,Math.min(1,C/F)));return h*r-u*i<0&&(w=-w),w}function x(h){const u=L(h.getAttribute("x")||0),i=L(h.getAttribute("y")||0),r=L(h.getAttribute("rx")||h.getAttribute("ry")||0),C=L(h.getAttribute("ry")||h.getAttribute("rx")||0),F=L(h.getAttribute("width")),w=L(h.getAttribute("height")),z=1-.551915024494,U=new to;return U.moveTo(u+r,i),U.lineTo(u+F-r,i),(r!==0||C!==0)&&U.bezierCurveTo(u+F-r*z,i,u+F,i+C*z,u+F,i+C),U.lineTo(u+F,i+w-C),(r!==0||C!==0)&&U.bezierCurveTo(u+F,i+w-C*z,u+F-r*z,i+w,u+F-r,i+w),U.lineTo(u+r,i+w),(r!==0||C!==0)&&U.bezierCurveTo(u+r*z,i+w,u,i+w-C*z,u,i+w-C),U.lineTo(u,i+C),(r!==0||C!==0)&&U.bezierCurveTo(u,i+C*z,u+r*z,i,u+r,i),U}function D(h){function u(F,w,z){const U=L(w),O=L(z);C===0?r.moveTo(U,O):r.lineTo(U,O),C++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new to;let C=0;return h.getAttribute("points").replace(i,u),r.currentPath.autoClose=!0,r}function N(h){function u(F,w,z){const U=L(w),O=L(z);C===0?r.moveTo(U,O):r.lineTo(U,O),C++}const i=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new to;let C=0;return h.getAttribute("points").replace(i,u),r.currentPath.autoClose=!1,r}function S(h){const u=L(h.getAttribute("cx")||0),i=L(h.getAttribute("cy")||0),r=L(h.getAttribute("r")||0),C=new Hn;C.absarc(u,i,r,0,Math.PI*2);const F=new to;return F.subPaths.push(C),F}function _(h){const u=L(h.getAttribute("cx")||0),i=L(h.getAttribute("cy")||0),r=L(h.getAttribute("rx")||0),C=L(h.getAttribute("ry")||0),F=new Hn;F.absellipse(u,i,r,C,0,Math.PI*2);const w=new to;return w.subPaths.push(F),w}function g(h){const u=L(h.getAttribute("x1")||0),i=L(h.getAttribute("y1")||0),r=L(h.getAttribute("x2")||0),C=L(h.getAttribute("y2")||0),F=new to;return F.moveTo(u,i),F.lineTo(r,C),F.currentPath.autoClose=!1,F}function v(h,u){u=Object.assign({},u);let i={};if(h.hasAttribute("class")){const w=h.getAttribute("class").split(/\s/).filter(Boolean).map(z=>z.trim());for(let z=0;z<w.length;z++)i=Object.assign(i,j["."+w[z]])}h.hasAttribute("id")&&(i=Object.assign(i,j["#"+h.getAttribute("id")]));function r(w,z,U){U===void 0&&(U=function(b){return b.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),b}),h.hasAttribute(w)&&(u[z]=U(h.getAttribute(w))),i[w]&&(u[z]=U(i[w])),h.style&&h.style[w]!==""&&(u[z]=U(h.style[w]))}function C(w){return Math.max(0,Math.min(1,L(w)))}function F(w){return Math.max(0,L(w))}return r("fill","fill"),r("fill-opacity","fillOpacity",C),r("fill-rule","fillRule"),r("opacity","opacity",C),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",C),r("stroke-width","strokeWidth",F),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",F),r("visibility","visibility"),u}function T(h,u){return h-(u-h)}function y(h,u,i){if(typeof h!="string")throw new TypeError("Invalid input: "+typeof h);const r={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},C=0,F=1,w=2,z=3;let U=C,O=!0,b="",I="";const J=[];function d(pe,Ye,H){const ee=new SyntaxError('Unexpected character "'+pe+'" at index '+Ye+".");throw ee.partial=H,ee}function m(){b!==""&&(I===""?J.push(Number(b)):J.push(Number(b)*Math.pow(10,Number(I)))),b="",I=""}let l;const se=h.length;for(let pe=0;pe<se;pe++){if(l=h[pe],Array.isArray(u)&&u.includes(J.length%i)&&r.FLAGS.test(l)){U=F,b=l,m();continue}if(U===C){if(r.WHITESPACE.test(l))continue;if(r.DIGIT.test(l)||r.SIGN.test(l)){U=F,b=l;continue}if(r.POINT.test(l)){U=w,b=l;continue}r.COMMA.test(l)&&(O&&d(l,pe,J),O=!0)}if(U===F){if(r.DIGIT.test(l)){b+=l;continue}if(r.POINT.test(l)){b+=l,U=w;continue}if(r.EXP.test(l)){U=z;continue}r.SIGN.test(l)&&b.length===1&&r.SIGN.test(b[0])&&d(l,pe,J)}if(U===w){if(r.DIGIT.test(l)){b+=l;continue}if(r.EXP.test(l)){U=z;continue}r.POINT.test(l)&&b[b.length-1]==="."&&d(l,pe,J)}if(U===z){if(r.DIGIT.test(l)){I+=l;continue}if(r.SIGN.test(l)){if(I===""){I+=l;continue}I.length===1&&r.SIGN.test(I)&&d(l,pe,J)}}r.WHITESPACE.test(l)?(m(),U=C,O=!1):r.COMMA.test(l)?(m(),U=C,O=!0):r.SIGN.test(l)?(m(),U=F,b=l):r.POINT.test(l)?(m(),U=w,b=l):d(l,pe,J)}return m(),J}const G=["mm","cm","in","pt","pc","px"],$={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function L(h){let u="px";if(typeof h=="string"||h instanceof String)for(let r=0,C=G.length;r<C;r++){const F=G[r];if(h.endsWith(F)){u=F,h=h.substring(0,h.length-F.length);break}}let i;return u==="px"&&n.defaultUnit!=="px"?i=$.in[n.defaultUnit]/n.defaultDPI:(i=$[u][n.defaultUnit],i<0&&(i=$[u].in*n.defaultDPI)),i*parseFloat(h)}function E(h){if(!(h.hasAttribute("transform")||h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))))return null;const u=q(h);return le.length>0&&u.premultiply(le[le.length-1]),K.copy(u),le.push(u),u}function q(h){const u=new vo,i=fe;if(h.nodeName==="use"&&(h.hasAttribute("x")||h.hasAttribute("y"))){const r=L(h.getAttribute("x")),C=L(h.getAttribute("y"));u.translate(r,C)}if(h.hasAttribute("transform")){const r=h.getAttribute("transform").split(")");for(let C=r.length-1;C>=0;C--){const F=r[C].trim();if(F==="")continue;const w=F.indexOf("("),z=F.length;if(w>0&&w<z){const U=F.slice(0,w),O=y(F.slice(w+1));switch(i.identity(),U){case"translate":if(O.length>=1){const b=O[0];let I=0;O.length>=2&&(I=O[1]),i.translate(b,I)}break;case"rotate":if(O.length>=1){let b=0,I=0,J=0;b=O[0]*Math.PI/180,O.length>=3&&(I=O[1],J=O[2]),te.makeTranslation(-I,-J),B.makeRotation(b),k.multiplyMatrices(B,te),te.makeTranslation(I,J),i.multiplyMatrices(te,k)}break;case"scale":if(O.length>=1){const b=O[0];let I=b;O.length>=2&&(I=O[1]),i.scale(b,I)}break;case"skewX":O.length===1&&i.set(1,Math.tan(O[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":O.length===1&&i.set(1,0,0,Math.tan(O[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":O.length===6&&i.set(O[0],O[2],O[4],O[1],O[3],O[5],0,0,1);break}}u.premultiply(i)}}return u}function X(h,u){function i(w){a.set(w.x,w.y,1).applyMatrix3(u),w.set(a.x,a.y)}function r(w){const z=w.xRadius,U=w.yRadius,O=Math.cos(w.aRotation),b=Math.sin(w.aRotation),I=new ke(z*O,z*b,0),J=new ke(-U*b,U*O,0),d=I.applyMatrix3(u),m=J.applyMatrix3(u),l=fe.set(d.x,m.x,0,d.y,m.y,0,0,0,1),se=te.copy(l).invert(),H=B.copy(se).transpose().multiply(se).elements,ee=de(H[0],H[1],H[4]),ie=Math.sqrt(ee.rt1),xe=Math.sqrt(ee.rt2);if(w.xRadius=1/ie,w.yRadius=1/xe,w.aRotation=Math.atan2(ee.sn,ee.cs),!((w.aEndAngle-w.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const be=te.set(ie,0,0,0,xe,0,0,0,1),_e=B.set(ee.cs,ee.sn,0,-ee.sn,ee.cs,0,0,0,1),he=be.multiply(_e).multiply(l),Oe=re=>{const{x:ge,y:Ee}=new ke(Math.cos(re),Math.sin(re),0).applyMatrix3(he);return Math.atan2(Ee,ge)};w.aStartAngle=Oe(w.aStartAngle),w.aEndAngle=Oe(w.aEndAngle),R(u)&&(w.aClockwise=!w.aClockwise)}}function C(w){const z=ne(u),U=M(u);w.xRadius*=z,w.yRadius*=U;const O=z>Number.EPSILON?Math.atan2(u.elements[1],u.elements[0]):Math.atan2(-u.elements[3],u.elements[4]);w.aRotation+=O,R(u)&&(w.aStartAngle*=-1,w.aEndAngle*=-1,w.aClockwise=!w.aClockwise)}const F=h.subPaths;for(let w=0,z=F.length;w<z;w++){const O=F[w].curves;for(let b=0;b<O.length;b++){const I=O[b];I.isLineCurve?(i(I.v1),i(I.v2)):I.isCubicBezierCurve?(i(I.v0),i(I.v1),i(I.v2),i(I.v3)):I.isQuadraticBezierCurve?(i(I.v0),i(I.v1),i(I.v2)):I.isEllipseCurve&&(ue.set(I.aX,I.aY),i(ue),I.aX=ue.x,I.aY=ue.y,W(u)?r(I):C(I))}}}function R(h){const u=h.elements;return u[0]*u[4]-u[1]*u[3]<0}function W(h){const u=h.elements,i=u[0]*u[3]+u[1]*u[4];if(i===0)return!1;const r=ne(h),C=M(h);return Math.abs(i/(r*C))>Number.EPSILON}function ne(h){const u=h.elements;return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function M(h){const u=h.elements;return Math.sqrt(u[3]*u[3]+u[4]*u[4])}function de(h,u,i){let r,C,F,w,z;const U=h+i,O=h-i,b=Math.sqrt(O*O+4*u*u);return U>0?(r=.5*(U+b),z=1/r,C=h*z*i-u*z*u):U<0?C=.5*(U-b):(r=.5*b,C=-.5*b),O>0?F=O+b:F=O-b,Math.abs(F)>2*Math.abs(u)?(z=-2*u/F,w=1/Math.sqrt(1+z*z),F=z*w):Math.abs(u)===0?(F=1,w=0):(z=-.5*F/u,F=1/Math.sqrt(1+z*z),w=z*F),O>0&&(z=F,F=-w,w=z),{rt1:r,rt2:C,cs:F,sn:w}}const P=[],j={},le=[],fe=new vo,te=new vo,B=new vo,k=new vo,ue=new Re,a=new ke,K=new vo,oe=new DOMParser().parseFromString(e,"image/svg+xml");return t(oe.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:P,xml:oe.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:t.ORIGIN,t:0};function s(T,y,G,$){const L=T.x,E=y.x,q=G.x,X=$.x,R=T.y,W=y.y,ne=G.y,M=$.y,de=(X-q)*(R-ne)-(M-ne)*(L-q),P=(E-L)*(R-ne)-(W-R)*(L-q),j=(M-ne)*(E-L)-(X-q)*(W-R),le=de/j,fe=P/j;if(j===0&&de!==0||le<=0||le>=1||fe<0||fe>1)return null;if(de===0&&j===0){for(let te=0;te<2;te++)if(c(te===0?G:$,T,y),o.loc==t.ORIGIN){const B=te===0?G:$;return{x:B.x,y:B.y,t:o.t}}else if(o.loc==t.BETWEEN){const B=+(L+o.t*(E-L)).toPrecision(10),k=+(R+o.t*(W-R)).toPrecision(10);return{x:B,y:k,t:o.t}}return null}else{for(let k=0;k<2;k++)if(c(k===0?G:$,T,y),o.loc==t.ORIGIN){const ue=k===0?G:$;return{x:ue.x,y:ue.y,t:o.t}}const te=+(L+le*(E-L)).toPrecision(10),B=+(R+le*(W-R)).toPrecision(10);return{x:te,y:B,t:le}}}function c(T,y,G){const $=G.x-y.x,L=G.y-y.y,E=T.x-y.x,q=T.y-y.y,X=$*q-E*L;if(T.x===y.x&&T.y===y.y){o.loc=t.ORIGIN,o.t=0;return}if(T.x===G.x&&T.y===G.y){o.loc=t.DESTINATION,o.t=1;return}if(X<-Number.EPSILON){o.loc=t.LEFT;return}if(X>Number.EPSILON){o.loc=t.RIGHT;return}if($*E<0||L*q<0){o.loc=t.BEHIND;return}if(Math.sqrt($*$+L*L)<Math.sqrt(E*E+q*q)){o.loc=t.BEYOND;return}let R;$!==0?R=E/$:R=q/L,o.loc=t.BETWEEN,o.t=R}function f(T,y){const G=[],$=[];for(let L=1;L<T.length;L++){const E=T[L-1],q=T[L];for(let X=1;X<y.length;X++){const R=y[X-1],W=y[X],ne=s(E,q,R,W);ne!==null&&G.find(M=>M.t<=ne.t+Number.EPSILON&&M.t>=ne.t-Number.EPSILON)===void 0&&(G.push(ne),$.push(new Re(ne.x,ne.y)))}}return $}function x(T,y,G){const $=new Re;y.getCenter($);const L=[];return G.forEach(E=>{E.boundingBox.containsPoint($)&&f(T,E.points).forEach(X=>{L.push({identifier:E.identifier,isCW:E.isCW,point:X})})}),L.sort((E,q)=>E.point.x-q.point.x),L}function D(T,y,G,$,L){(L==null||L==="")&&(L="nonzero");const E=new Re;T.boundingBox.getCenter(E);const q=[new Re(G,E.y),new Re($,E.y)],X=x(q,T.boundingBox,y);X.sort((P,j)=>P.point.x-j.point.x);const R=[],W=[];X.forEach(P=>{P.identifier===T.identifier?R.push(P):W.push(P)});const ne=R[0].point.x,M=[];let de=0;for(;de<W.length&&W[de].point.x<ne;)M.length>0&&M[M.length-1]===W[de].identifier?M.pop():M.push(W[de].identifier),de++;if(M.push(T.identifier),L==="evenodd"){const P=M.length%2===0,j=M[M.length-2];return{identifier:T.identifier,isHole:P,for:j}}else if(L==="nonzero"){let P=!0,j=null,le=null;for(let fe=0;fe<M.length;fe++){const te=M[fe];P?(le=y[te].isCW,P=!1,j=te):le!==y[te].isCW&&(le=y[te].isCW,P=!0)}return{identifier:T.identifier,isHole:P,for:j}}else console.warn('fill-rule: "'+L+'" is currently not implemented.')}let N=999999999,S=-999999999,_=e.subPaths.map(T=>{const y=T.getPoints();let G=-999999999,$=999999999,L=-999999999,E=999999999;for(let q=0;q<y.length;q++){const X=y[q];X.y>G&&(G=X.y),X.y<$&&($=X.y),X.x>L&&(L=X.x),X.x<E&&(E=X.x)}return S<=L&&(S=L+1),N>=E&&(N=E-1),{curves:T.curves,points:y,isCW:Br.isClockWise(y),identifier:-1,boundingBox:new Lr(new Re(E,$),new Re(L,G))}});_=_.filter(T=>T.points.length>1);for(let T=0;T<_.length;T++)_[T].identifier=T;const g=_.map(T=>D(T,_,N,S,e.userData?e.userData.style.fillRule:void 0)),v=[];return _.forEach(T=>{if(!g[T.identifier].isHole){const G=new zr;G.curves=T.curves,g.filter(L=>L.isHole&&L.for===T.identifier).forEach(L=>{const E=_[L.identifier],q=new Hn;q.curves=E.curves,G.holes.push(q)}),v.push(G)}}),v}static getStrokeStyle(e,n,t,o,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(e,n,t,o){const s=[],c=[],f=[];if(Bn.pointsToStrokeWithBuffers(e,n,t,o,s,c,f)===0)return null;const x=new ro;return x.setAttribute("position",new Xo(s,3)),x.setAttribute("normal",new Xo(c,3)),x.setAttribute("uv",new Xo(f,2)),x}static pointsToStrokeWithBuffers(e,n,t,o,s,c,f,x){const D=new Re,N=new Re,S=new Re,_=new Re,g=new Re,v=new Re,T=new Re,y=new Re,G=new Re,$=new Re,L=new Re,E=new Re,q=new Re,X=new Re,R=new Re,W=new Re,ne=new Re;t=t!==void 0?t:12,o=o!==void 0?o:.001,x=x!==void 0?x:0,e=O(e);const M=e.length;if(M<2)return 0;const de=e[0].equals(e[M-1]);let P,j=e[0],le;const fe=n.strokeWidth/2,te=1/(M-1);let B=0,k,ue,a,K,oe=!1,Pe=0,h=x*3,u=x*2;i(e[0],e[1],D).multiplyScalar(fe),y.copy(e[0]).sub(D),G.copy(e[0]).add(D),$.copy(y),L.copy(G);for(let b=1;b<M;b++){P=e[b],b===M-1?de?le=e[1]:le=void 0:le=e[b+1];const I=D;if(i(j,P,I),S.copy(I).multiplyScalar(fe),E.copy(P).sub(S),q.copy(P).add(S),k=B+te,ue=!1,le!==void 0){i(P,le,N),S.copy(N).multiplyScalar(fe),X.copy(P).sub(S),R.copy(P).add(S),a=!0,S.subVectors(le,j),I.dot(S)<0&&(a=!1),b===1&&(oe=a),S.subVectors(le,P),S.normalize();const J=Math.abs(I.dot(S));if(J>Number.EPSILON){const d=fe/J;S.multiplyScalar(-d),_.subVectors(P,j),g.copy(_).setLength(d).add(S),W.copy(g).negate();const m=g.length(),l=_.length();_.divideScalar(l),v.subVectors(le,P);const se=v.length();switch(v.divideScalar(se),_.dot(W)<l&&v.dot(W)<se&&(ue=!0),ne.copy(g).add(P),W.add(P),K=!1,ue?a?(R.copy(W),q.copy(W)):(X.copy(W),E.copy(W)):F(),n.strokeLineJoin){case"bevel":w(a,ue,k);break;case"round":z(a,ue),a?C(P,E,X,k,0):C(P,R,q,k,1);break;case"miter":case"miter-clip":default:const pe=fe*n.strokeMiterLimit/m;if(pe<1)if(n.strokeLineJoin!=="miter-clip"){w(a,ue,k);break}else z(a,ue),a?(v.subVectors(ne,E).multiplyScalar(pe).add(E),T.subVectors(ne,X).multiplyScalar(pe).add(X),r(E,k,0),r(v,k,0),r(P,k,.5),r(P,k,.5),r(v,k,0),r(T,k,0),r(P,k,.5),r(T,k,0),r(X,k,0)):(v.subVectors(ne,q).multiplyScalar(pe).add(q),T.subVectors(ne,R).multiplyScalar(pe).add(R),r(q,k,1),r(v,k,1),r(P,k,.5),r(P,k,.5),r(v,k,1),r(T,k,1),r(P,k,.5),r(T,k,1),r(R,k,1));else ue?(a?(r(G,B,1),r(y,B,0),r(ne,k,0),r(G,B,1),r(ne,k,0),r(W,k,1)):(r(G,B,1),r(y,B,0),r(ne,k,1),r(y,B,0),r(W,k,0),r(ne,k,1)),a?X.copy(ne):R.copy(ne)):a?(r(E,k,0),r(ne,k,0),r(P,k,.5),r(P,k,.5),r(ne,k,0),r(X,k,0)):(r(q,k,1),r(ne,k,1),r(P,k,.5),r(P,k,.5),r(ne,k,1),r(R,k,1)),K=!0;break}}else F()}else F();!de&&b===M-1&&U(e[0],$,L,a,!0,B),B=k,j=P,y.copy(X),G.copy(R)}if(!de)U(P,E,q,a,!1,k);else if(ue&&s){let b=ne,I=W;oe!==a&&(b=W,I=ne),a?(K||oe)&&(I.toArray(s,0*3),I.toArray(s,3*3),K&&b.toArray(s,1*3)):(K||!oe)&&(I.toArray(s,1*3),I.toArray(s,3*3),K&&b.toArray(s,0*3))}return Pe;function i(b,I,J){return J.subVectors(I,b),J.set(-J.y,J.x).normalize()}function r(b,I,J){s&&(s[h]=b.x,s[h+1]=b.y,s[h+2]=0,c&&(c[h]=0,c[h+1]=0,c[h+2]=1),h+=3,f&&(f[u]=I,f[u+1]=J,u+=2)),Pe+=3}function C(b,I,J,d,m){D.copy(I).sub(b).normalize(),N.copy(J).sub(b).normalize();let l=Math.PI;const se=D.dot(N);Math.abs(se)<1&&(l=Math.abs(Math.acos(se))),l/=t,S.copy(I);for(let pe=0,Ye=t-1;pe<Ye;pe++)_.copy(S).rotateAround(b,l),r(S,d,m),r(_,d,m),r(b,d,.5),S.copy(_);r(_,d,m),r(J,d,m),r(b,d,.5)}function F(){r(G,B,1),r(y,B,0),r(E,k,0),r(G,B,1),r(E,k,0),r(q,k,1)}function w(b,I,J){I?b?(r(G,B,1),r(y,B,0),r(E,k,0),r(G,B,1),r(E,k,0),r(W,k,1),r(E,J,0),r(X,J,0),r(W,J,.5)):(r(G,B,1),r(y,B,0),r(q,k,1),r(y,B,0),r(W,k,0),r(q,k,1),r(q,J,1),r(W,J,0),r(R,J,1)):b?(r(E,J,0),r(X,J,0),r(P,J,.5)):(r(q,J,1),r(R,J,0),r(P,J,.5))}function z(b,I){I&&(b?(r(G,B,1),r(y,B,0),r(E,k,0),r(G,B,1),r(E,k,0),r(W,k,1),r(E,B,0),r(P,k,.5),r(W,k,1),r(P,k,.5),r(X,B,0),r(W,k,1)):(r(G,B,1),r(y,B,0),r(q,k,1),r(y,B,0),r(W,k,0),r(q,k,1),r(q,B,1),r(W,k,0),r(P,k,.5),r(P,k,.5),r(W,k,0),r(R,B,1)))}function U(b,I,J,d,m,l){switch(n.strokeLineCap){case"round":m?C(b,J,I,l,.5):C(b,I,J,l,.5);break;case"square":if(m)D.subVectors(I,b),N.set(D.y,-D.x),S.addVectors(D,N).add(b),_.subVectors(N,D).add(b),d?(S.toArray(s,1*3),_.toArray(s,0*3),_.toArray(s,3*3)):(S.toArray(s,1*3),f[3*2+1]===1?_.toArray(s,3*3):S.toArray(s,3*3),_.toArray(s,0*3));else{D.subVectors(J,b),N.set(D.y,-D.x),S.addVectors(D,N).add(b),_.subVectors(N,D).add(b);const se=s.length;d?(S.toArray(s,se-1*3),_.toArray(s,se-2*3),_.toArray(s,se-4*3)):(_.toArray(s,se-2*3),S.toArray(s,se-1*3),_.toArray(s,se-4*3))}break}}function O(b){let I=!1;for(let d=1,m=b.length-1;d<m;d++)if(b[d].distanceTo(b[d+1])<o){I=!0;break}if(!I)return b;const J=[];J.push(b[0]);for(let d=1,m=b.length-1;d<m;d++)b[d].distanceTo(b[d+1])>=o&&J.push(b[d]);return J.push(b[b.length-1]),J}}}function Ai(p,e,n,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=n,c=8,f=24,x=.075,D=200;let N,S=[],_=[],g=[],v=[];const T=(E,q,X,R)=>{const W=new Do(E,E,E),ne=new jo(W),M=[new Ot({color:16711680,transparent:!0,opacity:R.opacity,blending:Vt}),new Ot({color:65280,transparent:!0,opacity:R.opacity,blending:Vt}),new Ot({color:255,transparent:!0,opacity:R.opacity,blending:Vt}),new Ot({color:65535,transparent:!0,opacity:R.opacity,blending:Vt}),new Ot({color:16711935,transparent:!0,opacity:R.opacity,blending:Vt}),new Ot({color:16776960,transparent:!0,opacity:R.opacity,blending:Vt})],de=new xt,P=ne.getAttribute("position").array,j=[];for(let te=0;te<P.length/3;te+=2)j.push(te,te+1);const le=Array(6).fill(null).map(()=>new ro),fe=Array(6).fill(null).map(()=>[]);for(let te=0;te<j.length/2;te++){const B=te%6;fe[B].push(j[te*2],j[te*2+1])}return le.forEach((te,B)=>{te.setIndex(fe[B]),te.setAttribute("position",ne.getAttribute("position"));const k=new bt(te,M[B]);de.add(k)}),de.position.z=q,de.rotation.z=X,de};if((()=>{const X=.9/(f-1);for(let j=0;j<f;j++)_[j]=new Ot({transparent:!0,opacity:1-j*X});if(N=new xt,!N){console.error("introGroup failed to initialize");return}for(let j=0;j<f;j++){const le=o-j*c,fe=T(le,0,0,_[j]),te=fe.children.map(B=>B.material);v.push(te.map(B=>({material:B,originalColor:B.color.clone()}))),N.add(fe)}N.position.z=s,p.add(N),S.push(N),g=_.map(j=>j.opacity);const R=De.timeline({repeat:-1});R.to(N.rotation,{x:Ve.degToRad(360),duration:12,ease:"none"},0),R.to(N.rotation,{y:Ve.degToRad(360),duration:10,ease:"none"},0),R.to(N.rotation,{z:Ve.degToRad(360),duration:14,ease:"none"},0);let W=-1,ne=0;const M=x*1e3,de=f*M,P=j=>{const le=j%de/M,fe=Math.floor(le)%f;W!==-1&&j-ne>=M&&(v[W].forEach(k=>{k.material.opacity=g[W],k.material.color.copy(k.originalColor)}),W=-1),W===-1&&fe!==W&&(W=fe,ne=j,v[W].forEach(B=>{B.material.opacity=1,B.material.color.set(1,1,1)})),requestAnimationFrame(P)};requestAnimationFrame(P)})(),e.value){const E=G(e.value);p.add(E)}else console.warn('Font not available; "SCROLL TO CONTINUE" message skipped.');return{introCubes:S};function G(E){const q=new xt,X=$(E);X.position.set(0,-36,0),q.add(X),L(W=>{q.add(W),De.fromTo(X.material,{opacity:.3},{opacity:1,duration:3,ease:"linear",repeat:-1,yoyo:!0});const ne=W.children.find(M=>M instanceof Ne&&M!==W.children[0]);if(ne){const M=ne.position.y;De.to(ne.position,{y:M+3,duration:1,ease:"easeOut",onComplete:()=>{ne.position.y=M},repeat:-1})}}),q.position.x=0,q.position.y=-240;const R=s-f*c;return q.position.z=R+D,q}function $(E){const q=new ls("SCROLL TO CONTINUE",{font:E,size:8,depth:0,curveSegments:12,bevelEnabled:!1});q.computeBoundingBox(),q.center();const X=new pt({color:16777215,transparent:!0,opacity:1});return new Ne(q,X)}function L(E){new Bn().load("/3D/mouse.svg",X=>{const R=X.paths;let W=null,ne=null,M=new xt;if(R.forEach((de,P)=>{Bn.createShapes(de).forEach(le=>{const fe=new Hr(le);fe.computeBoundingBox();const te=new pt({color:16777215,transparent:!0,opacity:1,side:Yt}),B=new Ne(fe,te);B.scale.set(.05,.05,1),P===0?W=B:P===1&&(ne=B)})}),W&&ne){M.add(W),M.add(ne);const P=(W.geometry.boundingBox.max.x-W.geometry.boundingBox.min.x)*W.scale.x/2;M.position.x=-P,M.rotation.x=Math.PI,E(M)}})}}function ki(p,e,n,t,o,s,c,f){const x=Vs(),{CUBE_SIZE:D,CUBE_SPACING:N,FIRST_CUBE_Z:S}=e,_=S-(n.length+1)*N,g=65535,v=16711935,T=Ve.degToRad(15),y=1e3,G=.5,$=65280,L=80,E=1,q=15,X=.1,R="ENTER TO LEARN MORE",W=x.isMobile?1:.5,ne=40,M=.125,de=100,P=8,j=x.isMobile?1.5:2,le=x.isMobile?2:3.5,fe=1;let te=[];te.length=0;let B=!1,k=!1,ue=new Fr,a=new Re,K=null,oe=null,Pe=null,h=!1,u=null;const i=new Map,r=new Map,C=new Map,F=(H,ee,ie,xe,ce,be,_e)=>{const he=new xt;he.position.z=ie,he.rotation.z=xe,he.userData.isActive=!1,he.userData.cubeIndex=_e;const Oe=new Do(ee,ee,ee),re=new jo(Oe),ge=new Ot({color:new At(g),transparent:!0,opacity:0}),Ee=new bt(re,ge);Ee.geometry.computeBoundingSphere(),he.add(Ee);let Le="right";const Me=ee/2,ut=Ue=>{const Pt=new xs(40,24),Xe=new jo(Pt),Ce=new Ot({color:new At(g),transparent:!0,opacity:0,visible:!0}),Te=new bt(Xe,Ce);Te.userData.isPortal=!0,Te.userData.isAnimating=!1,Te.geometry.computeBoundingSphere();const ye=new eo(80,80),ae=new pt({visible:!1,side:Yt}),Q=new Ne(ye,ae);Q.userData.isPortalHitbox=!0,Q.userData.portal=Te,Q.geometry.computeBoundingSphere();const A=new xt,Y=new eo(E,q),Z=65/2;for(let ze=0;ze<L;ze++){const Bt=new pt({color:new At(v),transparent:!0,opacity:0,visible:!1,side:Yt}),it=new Ne(Y,Bt),ot=ze/L*Math.PI*2;it.position.set(Math.cos(ot)*Z,Math.sin(ot)*Z,0),it.rotation.z=ot+Math.PI/2,it.userData.baseOpacity=.01,it.userData.index=ze,it.geometry.computeBoundingSphere(),A.add(it)}const me=2,ve=25;for(let ze=1;ze<ve;ze++){const Bt=new xs(40,24),it=new jo(Bt),ot=Ve.lerp(1,.1,ze/(ve-1)),et=new Ot({color:new At(g),transparent:!0,opacity:0}),gt=new bt(it,et);gt.userData.isPortal=!0,gt.userData.maxOpacity=ot,gt.position.z=-ze*me,gt.geometry.computeBoundingSphere(),Te.add(gt)}if(Te.userData.maxOpacity=1,f.value){const ze=new ls(R,{font:f.value,size:3,depth:0,curveSegments:12,bevelEnabled:!1});ze.computeBoundingBox(),ze.center();const Bt=new pt({color:16777215,transparent:!0,opacity:0,side:Yt}),it=new Ne(ze,Bt);it.visible=!1,it.userData.isVisible=!1,it.userData.isExploreText=!0,it.userData.skipTextMeshes=!0;const ot=45;it.position.set(0,ot,0),Te.add(it),Te.userData.exploreText=it;const et=ze.boundingBox,gt=et.max.x-et.min.x+10,Ro=et.max.y-et.min.y+10,an=new eo(gt,Ro),lo=new pt({transparent:!0,opacity:0,side:Yt,visible:!1}),wt=new Ne(an,lo);wt.position.set(0,ot,0),wt.userData.isExploreTextHitbox=!0,wt.userData.portal=Te,wt.geometry.computeBoundingSphere(),Te.add(wt),Te.userData.exploreTextHitbox=wt}else console.warn("Font not loaded yet; 'EXPLORE' text skipped for this portal.");const V=new xt,Se=new eo(12,x.isMobile?1:.5),Be=new pt({color:16777215,transparent:!0,opacity:0,side:Yt}),Ze=new Ne(Se,Be);Ze.rotation.z=Math.PI/4;const je=new Ne(Se,Be);je.rotation.z=-Math.PI/4,V.add(Ze,je);const $e=new eo(30,30),Lt=new pt({opacity:0,transparent:!0,side:Yt,visible:!0}),Ke=new Ne($e,Lt);Ke.userData.isCloseHitbox=!0,Ke.geometry.computeBoundingSphere(),Ke.renderOrder=2,V.add(Ke);const nt=42,rt=42,We=-10;V.visible=!1;let Je;switch(Le){case"left":Te.position.set(-Me,0,0),Te.rotation.y=Math.PI/2,Q.position.set(-Me,0,0),Q.rotation.y=Math.PI/2,xe>=Ve.degToRad(120)?(Te.rotation.z=Math.PI,V.position.set(-Me+We,-42,nt),Je=new ke(-Me+We,-42,nt)):(V.position.set(-Me+We,rt,-42),Je=new ke(-Me+We,rt,-42)),V.rotation.y=Math.PI/2,A.children.forEach(ze=>ze.position.x+=X);break;case"top":Te.position.set(0,-Me,0),Te.rotation.x=-Math.PI/2,Te.rotation.z=-Math.PI/2,Q.position.set(0,-Me,0),Q.rotation.x=Math.PI/2,xe>=Ve.degToRad(100)?xe>=Ve.degToRad(180)?(Te.rotation.z=Math.PI/2,V.position.set(-42,-Me+We,-42),Je=new ke(-42,-Me+We,-42)):(V.position.set(rt,-Me+We,nt),Je=new ke(rt,-Me+We,nt)):(V.position.set(rt,-Me+We,nt),Je=new ke(rt,-Me+We,nt)),V.rotation.x=-Math.PI/2,A.children.forEach(ze=>ze.position.y+=X);break;case"right":Te.position.set(Me,0,0),Te.rotation.y=-Math.PI/2,Q.position.set(Me,0,0),Q.rotation.y=-Math.PI/2,xe>=Ve.degToRad(120)?(Te.rotation.z=Math.PI,V.position.set(Me+We,-42,-42),Je=new ke(Me+We,-42,-42)):(V.position.set(Me+We,rt,nt),Je=new ke(Me+We,rt,nt)),V.rotation.y=-Math.PI/2,A.children.forEach(ze=>ze.position.x+=X);break;case"bottom":Te.position.set(0,Me,0),Te.rotation.x=Math.PI/2,Te.rotation.z=-Math.PI/2,Q.position.set(0,Me,0),Q.rotation.x=Math.PI/2,xe>=Ve.degToRad(100)?(V.position.set(nt,Me-We,-42),Je=new ke(nt,Me-We,-42)):(V.position.set(rt,Me-We,-42),Je=new ke(rt,Me-We,-42)),V.rotation.x=Math.PI/2,A.children.forEach(ze=>ze.position.y+=X);break}he.userData.initialCloseGroupPosition=Je,V.updateMatrixWorld(!0),Te.add(A),he.add(Te),he.add(Q),he.add(V),he.userData.closeButton=V,Te.updateMatrixWorld(!0),A.updateMatrixWorld(!0),V.updateMatrixWorld(!0),i.set(he,[]),r.set(he,0),C.set(he,0)},lt=Ue=>{(Ue instanceof bt||Ue instanceof Ne)&&Ue.geometry&&Ue.geometry.computeBoundingSphere(),he.add(Ue)};if(ce&&s.showKeyarts){switch(["left","top","right","bottom"].includes(be)?be:"left"){case"left":Le="right";break;case"top":Le="bottom";break;case"right":Le="left";break;case"bottom":Le="top";break}const Qe=c.get(ce);if(Qe){const st=new eo(ee-1,ee-1),Pt=new pt({map:Qe,transparent:!0,opacity:0,blending:Vt,side:Yt}),Xe=new Ne(st,Pt);switch(Xe.userData.isLoaded=!0,be){case"left":Xe.position.set(-Me,0,0),xe>=Ve.degToRad(120)?(Xe.rotation.y=Math.PI/2,Xe.rotation.z=-Math.PI):Xe.rotation.y=Math.PI/2;break;case"top":Xe.position.set(0,-Me,0),Xe.rotation.x=-Math.PI/2,Xe.rotation.z=-Math.PI/2;break;case"right":Xe.position.set(Me,0,0),xe>=Ve.degToRad(120)?(Xe.rotation.y=-Math.PI/2,Xe.rotation.z=-Math.PI):Xe.rotation.y=-Math.PI/2;break;case"bottom":Xe.position.set(0,Me,0),xe>=Ve.degToRad(180)?xe>=Ve.degToRad(220)?(Xe.rotation.x=Math.PI/2,Xe.rotation.z=Math.PI/2):(Xe.rotation.x=-Math.PI/2,Xe.rotation.z=Math.PI/2):(Xe.rotation.x=Math.PI/2,Xe.rotation.z=-Math.PI/2);break}Xe.geometry.computeBoundingSphere(),lt(Xe),ut()}else console.warn(`Keyart texture not preloaded for ${H.title}: ${ce}`),ut()}else ut();he.userData.portalLocation=Le;{const Ue=(ye,ae,Q,A)=>{const Y=new eo(ee-1,ee-1),Z={map:ye,transparent:!0,opacity:0,blending:Vt,side:Yt,depthWrite:!1};A&&(Z.color=A);const me=new pt(Z),ve=new Ne(Y,me);ve.position.copy(ae),Q.x&&(ve.rotation.x=Q.x),Q.y&&(ve.rotation.y=Q.y),ve.userData.isGridPlane=!0,ve.geometry.computeBoundingSphere(),lt(ve)},Qe=c.get(t),st=c.get(o),Pt=["left","top","right","bottom"],Ce=[ce&&s.showKeyarts?be||"left":null,Le].filter(Boolean),Te=Pt.filter(ye=>!Ce.includes(ye));if(Qe)switch(Ue(Qe,new ke(0,0,-ee/2-1),{y:0}),Ue(Qe,new ke(0,0,ee/2+1),{y:0},new At(16744448)),Te[0]){case"left":Ue(Qe,new ke(-Me,0,0),{y:-Math.PI/2},new At(255));break;case"top":Ue(Qe,new ke(0,Me,0),{x:Math.PI/2},new At(255));break;case"right":Ue(Qe,new ke(Me,0,0),{y:Math.PI/2},new At(255));break;case"bottom":Ue(Qe,new ke(0,-Me,0),{x:-Math.PI/2},new At(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(st)switch(Te[1]){case"left":Ue(st,new ke(-Me,0,0),{y:-Math.PI/2});break;case"top":Ue(st,new ke(0,Me,0),{x:Math.PI/2});break;case"right":Ue(st,new ke(Me,0,0),{y:Math.PI/2});break;case"bottom":Ue(st,new ke(0,-Me,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}he.children.forEach(Ue=>{Ue.updateMatrixWorld(!0),Ue instanceof xt&&Ue.children.forEach(Qe=>{Qe.updateMatrixWorld(!0)})}),he.updateMatrixWorld(!0);const Ae=new qs().setFromObject(he),ht=new Zs;return Ae.getBoundingSphere(ht),he.boundingSphere=ht,he},w=new Gr,z=(H,ee,ie,xe,ce)=>{if(!f.value){console.warn("Font not available; skipping text creation for:",H);const Ae=new ro,ht=new pt({visible:!1});return new Ne(Ae,ht)}const be=new ls(H,{font:f.value,size:ce,depth:0,curveSegments:12,bevelEnabled:!1});be.computeBoundingBox(),be.center();const _e=new pt({color:16777215,transparent:!0,opacity:0,side:Yt}),he=new Ne(be,_e);he.position.set(ee,ie,xe);const Oe=be.boundingBox,re=Oe.max.x-Oe.min.x,ge=Oe.max.y-Oe.min.y,Ee=re+8,Le=ge+4,Me=new eo(Ee,Le),ut=new pt({color:0,transparent:!0,opacity:0,side:Yt}),lt=new Ne(Me,ut);return lt.position.set(ee,ie,xe-1),p.add(lt),p.add(he),he.userData.backgroundPlane=lt,he},U=()=>{const H=Array.isArray(n)?n:[];Array.isArray(n)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",n);let ee=0;H.forEach((ie,xe)=>{const ce=S-(xe+1)*N,be=(xe+1)*T,_e=F(ie,D,ce,be,ie.keyart,ie.keyartLocation,ee);p.add(_e),te.push(_e),ee++,z(ie.title,0,ie.size-15,S+90-(xe+1)*N,ie.size)})},O=()=>B?Promise.resolve({projectCubes:te,updateCubeColors:m,maxZ:_}):(U(),B=!0,Promise.resolve({projectCubes:te,updateCubeColors:m,maxZ:_})),b=H=>{if(H.userData.isAnimating)return;H.userData.isAnimating=!0;const ee=H.children.find(_e=>_e instanceof xt);if(!ee)return;const ie=ee.children,xe=ie.length,ce=De.timeline({repeat:-1,defaults:{ease:"none"}}),be={value:0};ce.to(be,{value:1,duration:1.5,onUpdate:()=>{ie.forEach(he=>{const Oe=he.material;if(Oe.visible){const re=(he.userData.index/xe+be.value)%1,Ee=(Math.sin(re*Math.PI*2)+1)/2;Oe.opacity=.01+(1-.01)*Math.pow(Ee,4)}})}}),H.userData.animationTimeline=ce},I=H=>{if(!H.userData.isAnimating)return;H.userData.isAnimating=!1;const ee=H.children.find(ie=>ie instanceof xt);ee&&(H.userData.animationTimeline&&(H.userData.animationTimeline.kill(),delete H.userData.animationTimeline),ee.children.forEach(ie=>{const xe=ie.material;xe.opacity=0}))},J=(H,ee)=>{let ie;const xe=(C.get(H)||0)+1;C.set(H,xe),xe%P===0?ie=new Ur(j,le,12,1):ie=new Do(W,W,W);const ce=new pt({color:16777215,transparent:!0,opacity:0}),be=new Ne(ie,ce);be.position.set(0,0,0);const _e=ee.position.clone(),he=_e.clone().normalize(),Oe=_e.length()+de;if(xe%P===0){const ge=be.position.clone().add(he);be.lookAt(ge),be.rotateX(Math.PI/2)}H.add(be),De.to(ce,{opacity:.5,duration:fe,ease:"power2.in",overwrite:"auto"});const re=i.get(H)||[];re.push({mesh:be,direction:he,distanceTraveled:0,totalDistance:Oe}),i.set(H,re)},d=H=>{(i.get(H)||[]).forEach(ie=>{H.remove(ie.mesh),ie.mesh.geometry.dispose(),ie.mesh.material.dispose()}),i.set(H,[])},m=H=>{w.setFromProjectionMatrix(H.projectionMatrix.clone().multiply(H.matrixWorldInverse));const ee=H.position.z;let ie=[];p.traverse(xe=>{var ce;return xe instanceof Ne&&((ce=xe.geometry)==null?void 0:ce.type)==="TextGeometry"&&!xe.userData.skipTextMeshes&&ie.push(xe)}),k||(k=!0),te.forEach((xe,ce)=>{const be=xe.boundingSphere;if(be){const re=be.clone();if(re.radius*=1.5,!w.intersectsSphere(re))return}else console.warn(`Cube ${ce} has no boundingSphere`);const _e=xe.position.z,he=Math.abs(ee-_e);let Oe=0;he<=y&&(Oe=1-he/y),xe.userData.isActive=Oe>=G,xe.children.forEach(re=>{if(re instanceof bt&&!re.userData.isPortal&&!re.userData.isPortalHitbox){const ge=re.material;if(he<=y){const Ee=Ve.lerp((g>>16&255)/255,(v>>16&255)/255,Oe),Le=Ve.lerp((g>>8&255)/255,(v>>8&255)/255,Oe),Me=Ve.lerp((g&255)/255,(v&255)/255,Oe);ge.color.set(Ee,Le,Me),ge.opacity=Math.min(1,Oe*2)}else ge.opacity=0}else if(re instanceof bt&&re.userData.isPortal)re.children.forEach(ge=>{if(ge instanceof Ne&&ge.userData.isExploreText){const Ee=ge.material;if(he<=y){const Le=1-he/y;Ee.opacity=Math.min(1,Le*2),ge.visible=!0}else Ee.opacity=0,ge.visible=!1}}),k&&(Oe>.1?re.children.forEach(ge=>{ge instanceof xt&&ge.children.forEach(Ee=>{Ee instanceof Ne&&(Ee.material.visible=!0,!re.userData.animationStarted&&s.showPortalPulses&&(b(re),re.userData.animationStarted=!0))})}):Oe<=.1&&re.userData.animationStarted&&(re.children.forEach(ge=>{ge instanceof xt&&ge.children.forEach(Ee=>{Ee instanceof Ne&&(Ee.material.visible=!1)})}),I(re),delete re.userData.animationStarted));else if(re instanceof Ne&&!re.userData.isPortalHitbox&&!re.userData.isCloseHitbox){const ge=re.material;if(re.userData.isLoaded||re.userData.isGridPlane)if(he<=y){const Ee=1-he/y;ge.opacity=Math.min(.8,Ee*2),re.visible=!0}else ge.opacity=0,re.visible=!1}else if(re instanceof xt&&re.userData.closeButton){const ge=Math.abs(ee-re.position.z);re.children.forEach(Ee=>{if(Ee instanceof Ne&&!Ee.userData.isCloseHitbox){const Le=Ee.material;if(ge<=y){const Me=1-ge/y;Le.opacity=Math.min(1,Me*2)}else Le.opacity=0}})}})}),ie.forEach(xe=>{if(!w.intersectsObject(xe))return;const ce=xe.material,be=xe.userData.backgroundPlane,_e=be==null?void 0:be.material,he=xe.position.z,Oe=Math.abs(ee-he+120);if(h){ce.opacity=0,_e&&(_e.opacity=0);return}if(Oe<=y){const re=1-Oe/y,ge=Math.min(1,re*2);ce.opacity=ge,_e&&(_e.opacity=ge*.8)}else ce.opacity=0,_e&&(_e.opacity=0)})},l=(H,ee)=>{const ie=performance.now()/1e3,xe=H.position.z;te.forEach(ce=>{const be=ce.position.z;if(Math.abs(xe-be+90)<=y&&!h){const he=r.get(ce)||0;if(ie-he>=M){const ge=ce.children.find(Ee=>Ee instanceof bt&&Ee.userData.isPortal);ge&&(J(ce,ge),r.set(ce,ie))}const re=(i.get(ce)||[]).filter(ge=>{if(ge.distanceTraveled+=ne*ee,ge.mesh.position.copy(ge.direction.clone().multiplyScalar(ge.distanceTraveled)),(ge.totalDistance-ge.distanceTraveled)/ne<=fe&&!ge.isFadingOut){ge.isFadingOut=!0;const Me=ge.mesh.material;De.to(Me,{opacity:0,duration:fe,ease:"power2.out",overwrite:"auto"})}return ge.distanceTraveled>=ge.totalDistance?(ce.remove(ge.mesh),ge.mesh.geometry.dispose(),ge.mesh.material.dispose(),!1):!0});i.set(ce,re)}else d(ce)})},se=H=>{const ee=[H,...H.children.filter(ce=>ce instanceof bt&&ce.userData.isPortal)],ie=2,xe=.1;ee.forEach((ce,be)=>{const _e=ce.material;_e.opacity=ce.userData.maxOpacity;const he=De.timeline({repeat:-1,delay:be*xe});he.to(_e,{opacity:0,duration:ie/2,ease:"power2.inOut"}).to(_e,{opacity:ce.userData.maxOpacity,duration:ie/2,ease:"power2.inOut"}),ce.userData.marqueeTimeline=he})},pe=H=>{[H,...H.children.filter(ie=>ie instanceof bt&&ie.userData.isPortal)].forEach(ie=>{if(ie.userData.marqueeTimeline){ie.userData.marqueeTimeline.kill(),delete ie.userData.marqueeTimeline;const xe=ie.material;xe.opacity=ie.userData.maxOpacity}})};return{getInitializedData:O,updateCubeColors:m,setupInteractivity:(H,ee,ie,xe)=>{u=xe;let ce=null,be=null,_e=null,he=!1,Oe=!1,re=!1,ge=!1,Ee=[],Le=!1;p.traverse(Ce=>{var Te;Ce instanceof Ne&&((Te=Ce.geometry)==null?void 0:Te.type)==="TextGeometry"&&!Ce.userData.skipTextMeshes&&Ee.push(Ce)});const Me=Ce=>{h&&(ce=Ce.touches[0].clientY,be=be??window.scrollY,he=!0)},ut=Ce=>{if(!h||!_e||!ce)return;const ye=Ce.touches[0].clientY-ce;ye<-20&&!Oe?(ht(),ce=null):ye>20&&(Ce.preventDefault(),window.scrollTo(0,be),De.to(window,{scrollTo:{y:be},duration:0}))},lt=()=>{ce=null,he=!1,re=!0,De.delayedCall(.5,()=>{re=!1})},Ae=Ce=>{if(he||Oe||re){Ce.preventDefault(),Ce.stopPropagation(),be!==null&&(window.scrollTo(0,be),De.to(window,{scrollTo:{y:be},duration:0}));return}if(!h||!_e||!oe||!Pe)return;let Te=0;if(Ce instanceof WheelEvent?Te=Ce.deltaY:Te=window.scrollY-(be||0),Ce.preventDefault(),Ce.stopPropagation(),Te>0){window.scrollTo(0,be);return}Te<0&&ht()},ht=()=>{const Ce=_e,Te=Pe?Pe.clone():new ke(0,0,_),ye=(oe==null?void 0:oe.z)??H.position.z,ae=Ce==null?void 0:Ce.parent,Q=Ce?te.indexOf(ae):-1;ge=!0,Ce&&pe(Ce);const A=H.userData.lockedLookAt?H.userData.lockedLookAt.clone():H.getWorldDirection(new ke).multiplyScalar(1e3).add(H.position),Y={progress:0};De.to(H.position,{x:(oe==null?void 0:oe.x)??H.position.x,y:(oe==null?void 0:oe.y)??H.position.y,z:ye,duration:2,ease:"power3.inOut",overwrite:"auto",onStart:()=>{const Z=Ee[Q];if(Q!==-1&&Z){const me=Ee[Q];if(me){const ve=me.material,V=me.userData.backgroundPlane,Se=Math.abs(H.position.z-me.position.z+120),Be=Se<=y?Math.min(1,(1-Se/y)*2):0;De.to(ve,{opacity:Be,duration:.5,ease:"power2.in"}),V&&De.to(V.material,{opacity:Be*.8,duration:.5,ease:"power2.in"})}}if(ae!=null&&ae.userData.closeButton){const me=ae.userData.closeButton.position;De.to(ae.userData.closeButton.rotation,{z:0,duration:.3,ease:"power2.inOut"}),De.to(ae.userData.closeButton.position,{x:me.x+2,duration:.3,ease:"power2.inOut"});const ve=ae.userData.closeButton.children.filter(V=>V instanceof Ne).map(V=>V.material);De.to(ve,{opacity:0,duration:.5,onUpdate:()=>{},onComplete:()=>{ae.userData.closeButton.updateMatrixWorld(!0),ae.userData.closeButton.visible=!1,ae.userData.lockedPosition=null,Le=!1}}),Ce&&Ue(Ce,!1)}},onUpdate:()=>{const Z=Y.progress,me=Ve.lerp(A.x,Te.x,Z),ve=Ve.lerp(A.y,Te.y,Z),V=Ve.lerp(A.z,Te.z,Z);H.lookAt(me,ve,V),H.updateMatrixWorld(!0)},onComplete:()=>{H.lookAt(Te),h=!1,_e=null,document.body.classList.remove("no-scrollbar"),u&&u(!1),Ce&&pe(Ce),be=null,oe=null,Pe=null,H.userData.lockedLookAt=null,ge=!1,te.forEach(Z=>{Math.abs(H.position.z-Z.position.z+90)<=y&&r.set(Z,0)})}}),De.to(Y,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},Ue=(Ce,Te=!0)=>{const ye=[Ce,...Ce.children.filter(Q=>Q instanceof bt&&Q.userData.isPortal)],ae=Te?25:2;ye.forEach((Q,A)=>{let Y=-A*ae;(Ce.position.y>0&&Ce.rotation.x===-Math.PI/2||Ce.position.y<0&&Ce.rotation.x===Math.PI/2)&&(Y=A*ae);const Z=Te?Q.userData.maxOpacity:0;De.to(Q.position,{z:Y,duration:1,ease:"power3.out",delay:.5,onComplete:()=>{Te&&A===0&&se(Ce)}}),De.to(Q.material,{opacity:Z,duration:1,ease:"power3.out",delay:.5})})},Qe=Ce=>{var ae;a.x=Ce.clientX/window.innerWidth*2-1,a.y=-(Ce.clientY/window.innerHeight)*2+1,ue.setFromCamera(a,H),H.userData.lockedLookAt&&(H.lookAt(H.userData.lockedLookAt),H.updateMatrixWorld(!0)),te.forEach(Q=>{Q.userData.lockedPosition&&(Q.position.equals(Q.userData.lockedPosition)||Q.position.copy(Q.userData.lockedPosition)),Q.updateMatrixWorld(!0),Q.children.forEach(A=>A.updateMatrixWorld(!0))});const Te=te.flatMap(Q=>{const A=[];return!h&&Q.userData.isActive&&Q.children.forEach(Y=>{Y instanceof Ne&&(Y.userData.isPortalHitbox||Y.userData.isExploreTextHitbox)&&A.push(Y)}),h&&_e&&Q===_e.parent&&Q.children.forEach(Y=>{Y instanceof Ne&&Y.userData.isPortalHitbox&&A.push(Y),Y instanceof bt&&Y.userData.isPortal&&Y.children.forEach(Z=>{Z instanceof Ne&&Z.userData.isExploreTextHitbox&&A.push(Z)}),Y instanceof xt&&Y===Q.userData.closeButton&&Y.children.forEach(Z=>{Z instanceof Ne&&Z.userData.isCloseHitbox&&A.push(Z)})}),A}),ye=ue.intersectObjects(Te);if(ye.length>0){const Q=ye[0].object;if(Q.userData.isPortalHitbox||Q.userData.isExploreTextHitbox){const A=Q.userData.portal;K!==A&&(K&&[K,...K.children.filter(me=>me instanceof bt&&me.userData.isPortal)].forEach(me=>{const ve=me.material;De.to(ve.color,{r:(g>>16&255)/255,g:(g>>8&255)/255,b:(g&255)/255,duration:.5})}),K=A,[K,...K.children.filter(Z=>Z instanceof bt&&Z.userData.isPortal)].forEach(Z=>{const me=Z.material;De.to(me.color,{r:($>>16&255)/255,g:($>>8&255)/255,b:($&255)/255,duration:.5})})),ee.style.cursor="pointer"}else if(Q.userData.isCloseHitbox&&h){if(!Le){Le=!0;const A=Q.parent;A.children.filter(Z=>Z instanceof Ne&&!Z.userData.isCloseHitbox);const Y=A.position;De.to(A.rotation,{z:Math.PI/2,duration:.3,ease:"power2.inOut"}),De.to(A.position,{x:Y.x-2,duration:.3,ease:"power2.inOut"})}ee.style.cursor="pointer"}else ee.style.cursor="auto"}else{if(K&&([K,...K.children.filter(A=>A instanceof bt&&A.userData.isPortal)].forEach(A=>{const Y=A.material;De.to(Y.color,{r:(g>>16&255)/255,g:(g>>8&255)/255,b:(g&255)/255,duration:.5})}),K=null),h&&_e&&Le){const Q=(ae=_e.parent)==null?void 0:ae.userData.closeButton,A=Q.position;Q&&(Le=!1,De.to(Q.rotation,{z:0,duration:.3,ease:"power2.inOut"}),De.to(Q.position,{x:A.x+2,duration:.3,ease:"power2.inOut"}))}ee.style.cursor="auto"}},st=Ce=>{if(ge)return;a.x=Ce.clientX/window.innerWidth*2-1,a.y=-(Ce.clientY/window.innerHeight)*2+1,ue.setFromCamera(a,H);const Te=te.flatMap(ve=>{const V=[];return h&&_e&&ve===_e.parent&&ve.children.forEach(Se=>{Se instanceof xt&&Se===ve.userData.closeButton&&Se.children.forEach(Be=>{Be instanceof Ne&&Be.userData.isCloseHitbox&&V.push(Be)})}),V}),ye=te.flatMap(ve=>{const V=[];return!h&&ve.userData.isActive&&ve.children.forEach(Se=>{Se instanceof Ne&&(Se.userData.isPortalHitbox||Se.userData.isExploreTextHitbox)&&V.push(Se)}),h&&_e&&ve===_e.parent&&ve.children.forEach(Se=>{Se instanceof Ne&&Se.userData.isPortalHitbox&&V.push(Se),Se instanceof bt&&Se.userData.isPortal&&Se.children.forEach(Be=>{Be instanceof Ne&&Be.userData.isExploreTextHitbox&&V.push(Be)})}),V});let ae=ue.intersectObjects(Te);for(const ve of ae)if(ve.object.userData.isCloseHitbox){ht();return}if(ae=ue.intersectObjects(ye),ae.length===0)return;const A=ae[0].object.userData.portal,Y=A.parent,Z=te.indexOf(Y),me=n[Z];if(h&&A===_e){let ve=new ke;const V=e.CUBE_SIZE/2;A.position.x===V?ve.set(-1,0,0):A.position.x===-V?ve.set(1,0,0):A.position.y===V?ve.set(0,-1,0):A.position.y===-V&&ve.set(0,1,0),ve.applyQuaternion(Y.getWorldQuaternion(new Wr)).normalize();const Be=H.position.clone().clone().add(ve.clone().multiplyScalar(-675)),Ze=ve.clone().multiplyScalar(-1e3),je=Be.clone().add(Ze);ge=!0,De.to(H.position,{x:Be.x,y:Be.y,z:Be.z,duration:1,ease:"power2.in",onUpdate:()=>H.lookAt(je),onStart:()=>{De.to(ie.domElement,{opacity:0,duration:1,ease:"power2.in",overwrite:"auto"})},onComplete:()=>{me!=null&&me.slug&&(x.setScrollPosition(window.scrollY),Tr.visit(route("project.show",{project:me.slug}),{preserveScroll:!1})),ge=!1}})}else if(!h){oe||(oe=H.position.clone(),Pe=new ke(0,0,_)),u&&xe(!0,oe,Pe);const ve=A.getWorldPosition(new ke);Oe=!0,ge=!0,be=window.scrollY,De.to(H.position,{x:0,y:0,z:Y.getWorldPosition(new ke).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{h=!0,_e=A,document.body.classList.add("no-scrollbar"),Ue(A,!0),Y.userData.lockedPosition=Y.position.clone(),d(Y);const V=Ee[Z];if(V){const Se=V.material,Be=V.userData.backgroundPlane;De.to(Se,{opacity:0,duration:.5,ease:"power2.out"}),Be&&De.to(Be.material,{opacity:0,duration:.5,ease:"power2.out"})}},onComplete:()=>{if(Y.userData.closeButton){Y.userData.initialCloseGroupPosition&&Y.userData.closeButton.position.copy(Y.userData.initialCloseGroupPosition),Y.userData.closeButton.visible=!0,Y.userData.closeButton.updateMatrixWorld(!0),Y.updateMatrixWorld(!0),Y.userData.closeButton.updateMatrixWorld(!0);const V=Y.userData.closeButton.children.filter(Se=>Se instanceof Ne&&!Se.userData.isCloseHitbox).map(Se=>Se.material);V.length>0&&De.to(V,{opacity:1,duration:.5,onComplete:()=>{Y.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),De.to({},{duration:2,ease:"power2.out",overwrite:"all",onUpdate:function(){const V=this.progress(),Se=H.getWorldDirection(new ke).multiplyScalar(1e3).add(H.position),Be=Ve.lerp(Se.x,ve.x,V),Ze=Ve.lerp(Se.y,ve.y,V),je=Ve.lerp(Se.z,ve.z,V);H.lookAt(Be,Ze,je)},onComplete:()=>{H.lookAt(ve.x,ve.y,ve.z),H.updateMatrixWorld(!0),Oe=!1,ge=!1,H.userData.lockedLookAt=ve.clone()}})}};ee.addEventListener("mousemove",Qe),ee.addEventListener("click",st),ee.addEventListener("touchstart",Me,{passive:!0}),ee.addEventListener("touchmove",ut,{passive:!1}),ee.addEventListener("touchend",lt,{passive:!0}),window.addEventListener("wheel",Ae,{passive:!1}),window.addEventListener("scroll",Ae,{passive:!1});const Pt=()=>{i.forEach((Ce,Te)=>{Ce.forEach(ye=>{Te.remove(ye.mesh),ye.mesh.geometry.dispose(),ye.mesh.material.dispose()})}),i.clear(),r.clear(),C.clear()},Xe=()=>{ee.removeEventListener("mousemove",Qe),ee.removeEventListener("click",st),ee.removeEventListener("touchstart",Me),ee.removeEventListener("touchmove",ut),ee.removeEventListener("touchend",lt),window.removeEventListener("wheel",Ae),window.removeEventListener("scroll",Ae),_e&&pe(_e)};return()=>{Xe(),Pt()}},updateClickHereParticles:l}}function Di(p,e,n,t){const o=zn(),s=100,c=100,f=300,x=3355443,D=o.isMobile?24:32,N=-600,S=-500,_=1e3,g=o.isMobile?5:10,v=.05,T=1,y=o.isMobile?6:4,G=o.isMobile?4:6,$=100,L=-450,E=60,q=n-_,X=Math.abs(S-q),R=Math.ceil(X/s),W=()=>{const a=new xt;let K=null,oe=null;const Pe=[],h=[],u=[],i=[],r=[];{const C=new Do(s,s,s),F=new jo(C),w=D*R,z=new Yr;z.copy(F),z.instanceCount=w;const U=new Ot({color:x,transparent:!0,fog:!0,vertexColors:!0}),O=new Float32Array(w*3),b=new Float32Array(w*3),I=new Float32Array(w*3),J=D*s,d=-J/2+s/2,m=S;for(let re=0;re<D;re++){const ge=ne(re);for(let Ee=0;Ee<R;Ee++){const Le=re*R+Ee,Me=d+re*s,ut=m-Ee*s,lt=Ve.randFloat(c,f),Ae=lt/s,ht=N+lt/2;O[Le*3]=Me,O[Le*3+1]=ht,O[Le*3+2]=ut,b[Le*3]=1,b[Le*3+1]=Ae,b[Le*3+2]=1,I[Le*3]=ge,I[Le*3+1]=ge,I[Le*3+2]=ge}}z.setAttribute("instancePosition",new Fn(O,3)),z.setAttribute("instanceScale",new Fn(b,3)),z.setAttribute("color",new Fn(I,3)),U.onBeforeCompile=re=>{re.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${re.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},K=new bt(z,U);const l=-J/2,se=J/2,pe=N,Ye=N+f,H=q,ee=S;z.boundingBox=new qs(new ke(l,pe,H),new ke(se,Ye,ee));const ie=(l+se)/2,xe=(pe+Ye)/2,ce=(H+ee)/2,be=se-l,_e=Ye-pe,he=ee-H,Oe=Math.sqrt(be*be+_e*_e+he*he)/2;z.boundingSphere=new Zs(new ke(ie,xe,ce),Oe),a.add(K)}{oe=new xt;const C=D*s/(G-1),F=-(D*s)/2;for(let z=0;z<G;z++){let O=F+z*C,b=S;const I=[new ke(O,L,b)];let J=0;for(;b>q;){const d=b===S?Ve.randFloat(300,800):Math.min(Ve.randFloat(300,800),Math.abs(b-q));if(b-=d,I.push(new ke(O,L,b)),J+=d,b<=q){I[I.length-1].z=q;break}const m=Math.random()<.5?-1:1,l=Ve.randFloat(100,300);O+=m*l,I.push(new ke(O,L,b)),J+=l}h.push({points:I,totalLength:J})}const w=new Do(y,y,y);for(let z=0;z<G;z++){const U=h[z],O=U.totalLength,b=O/E;for(let I=0;I<E;I++){const J=new pt({color:16711680,fog:!0}),d=new Ne(w,J),m=I*b;let l=m;for(let se=0;se<U.points.length-1;se++){const pe=U.points[se],Ye=U.points[se+1],H=pe.distanceTo(Ye);if(l<=H){const ee=l/H;d.position.lerpVectors(pe,Ye,ee);break}l-=H}Pe.push(d),u.push(m),i.push(z),r.push(1),oe.add(d)}for(let I=0;I<E;I++){const J=new pt({color:16777215,fog:!0}),d=new Ne(w,J),m=O-(I*b+b/2);let l=O-m;const se=[...U.points].reverse();for(let pe=0;pe<se.length-1;pe++){const Ye=se[pe],H=se[pe+1],ee=Ye.distanceTo(H);if(l<=ee){const ie=l/ee;d.position.lerpVectors(Ye,H,ie);break}l-=ee}Pe.push(d),u.push(m),i.push(z),r.push(-1),oe.add(d)}}e.add(oe)}return e.add(a),{cityGroup:a,instancedLines:K,particleGroup:oe,particles:Pe,paths:h,particleDistances:u,particlePaths:i,particleDirections:r}},ne=a=>{if(a<g){const K=(T-v)/(g-1);return v+a*K}else if(a>=D-g){const K=D-1-a,oe=(T-v)/(g-1);return v+K*oe}return T},{cityGroup:M,instancedLines:de,particleGroup:P,particles:j,paths:le,particleDistances:fe,particlePaths:te,particleDirections:B}=W();return{cityGroup:M,buildingLines:de?[de]:[],updateParticles:a=>{const K=$*a;for(let oe=0;oe<j.length;oe++){const Pe=B[oe],h=te[oe],u=le[h],i=u.totalLength;fe[oe]+=K*Pe,Pe===1?(fe[oe]=fe[oe]%i,fe[oe]<0&&(fe[oe]+=i)):fe[oe]=(fe[oe]+i)%i;const r=fe[oe],C=Pe===1?u.points:[...u.points].reverse();let F=Pe===1?r:i-r;for(let w=0;w<C.length-1;w++){const z=C[w],U=C[w+1],O=z.distanceTo(U);if(F<=O){const b=F/O;j[oe].position.lerpVectors(z,U,b);break}F-=O}}},dispose:()=>{de&&(M.remove(de),de.geometry.dispose(),de.material.dispose()),P&&(e.remove(P),P.children.forEach(a=>{a.geometry.dispose(),a.material.dispose()})),e.remove(M)}}}De.registerPlugin(Ie);function Ii(p,e,n,t,o,s,c={},f,x){const D=zn(),{CUBE_SPACING:N,FIRST_CUBE_Z:S}=s,_=(t==null?void 0:t.length)||0,g=S-(_+1)*N;let v=!1;const T=Math.abs(g)+(_-1)*N;let y=De.timeline();return Ie.normalizeScroll(!0),Ie.config({ignoreMobileResize:!0}),y=De.timeline({scrollTrigger:{trigger:n.value,start:"top top",end:`+=${T}`,scrub:c.scrub||(D.isMobile?3:.5),pin:!0,onUpdate:$=>{if(!v){const L=$.progress,E=Ve.lerp(0,g,L);e.position.set(0,0,E),e.lookAt(0,0,g)}o(e),x&&x.update()},onRefresh:()=>{e.updateProjectionMatrix()}}}),y.fromTo(e.position,{z:0},{z:g,duration:1,ease:"none"},0),{setReverting:$=>{v=$},timeline:y}}function Ri(p,e,n){const t=zn(),o=t.isMobile?25:20,s=t.isMobile?1e3:2e3,c=4e3,f=-1e3,x=n-1e3,D=1e3,N=n,S=150,_=-500,g=n,v=new ro,T=new Float32Array(s*3),y=new Float32Array(s),G=new Float32Array(s);let $=0;for(;$<s;){const R=(Math.random()-.5)*c,W=(Math.random()-.5)*c,ne=f+Math.random()*(x-f),M=ne>N&&Math.abs(R)<D&&Math.abs(W)<D,de=Math.abs(R)<S&&Math.abs(W)<S&&ne>g&&ne<_;if(!M&&!de){const P=$*3;T[P]=R,T[P+1]=W,T[P+2]=ne;const j=.1+Math.random()*(.7-.1);y[$]=j,G[$]=j,$++}}v.setAttribute("position",new ws(T,3)),v.setAttribute("opacity",new ws(G,1));const L=new po({uniforms:{color:{value:new At(1,1,1)},size:{value:o}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),E=new Xr(v,L);p.add(E);const q=v.attributes.opacity;for(let R=0;R<s;R++)De.to({opacity:y[R]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){G[R]=this.targets()[0].opacity,q.needsUpdate=!0}});return{dispose:()=>{De.killTweensOf(G),p.remove(E),v.dispose(),L.dispose()}}}function Oi(p,e){const t=e-1500,o=100,s=2,c=64,f=1e3,x=c*3,D=[4,4.5,5],N=6;let S,_,g,v,T,y;const G=[],$=[[],[],[]],L=[[],[],[]],E=[[],[],[]];let q=[0,0,0];const X=()=>{const M=0-t,de=[];for(let ue=0;ue<o;ue++){const a=ue/(o-1),K=0-a*M,oe=a*5*2*Math.PI,Pe=90*(.8+.2*Math.sin(oe*2)),h=new ke(Pe*Math.cos(oe),Pe*Math.sin(oe),K);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath points",{t:a,z:K,projectMaxZ:e}),de.push(h)}S=new Gn(de);const P=new ro().setFromPoints(S.getPoints(200));v=new Un(P,new Ot({color:16711935,linewidth:2,visible:!1})),p.add(v);const j=[];for(let ue=0;ue<o;ue++){const a=ue/(o-1),K=0-a*M,oe=a*3*2*Math.PI,Pe=60*(.8+.2*Math.sin(oe*4)),h=new ke(Pe*Math.cos(oe),Pe*Math.sin(oe),K);(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&console.error("NaN in chaserPath2 points",{t:a,z:K,projectMaxZ:e}),j.push(h)}_=new Gn(j);const le=new ro().setFromPoints(_.getPoints(200));T=new Un(le,new Ot({color:65535,linewidth:2,visible:!1})),p.add(T);const fe=[];for(let ue=0;ue<o;ue++){const a=ue/(o-1),K=0-a*M,oe=a*7*2*Math.PI,Pe=100,h=90,u=.1*Math.sin(oe),i=new ke(Pe*(1+u)*Math.cos(oe),h*(1-u)*Math.sin(oe),K);(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&console.error("NaN in chaserPath3 points",{t:a,z:K,projectMaxZ:e}),fe.push(i)}g=new Gn(fe);const te=new ro().setFromPoints(g.getPoints(200));y=new Un(te,new Ot({color:16776960,linewidth:2,visible:!1})),p.add(y);const B=[16711680,65280,255],k=new Do(s,s,s);k.attributes.color&&delete k.attributes.color;for(let ue=0;ue<3;ue++){const a=new xt;a.opacity=1,a.renderOrder=1,G[ue]=a,p.add(a);for(let K=0;K<x;K++){const oe=new pt({color:B[ue],transparent:!0,opacity:0,blending:jr,fog:!0,depthWrite:!1}),Pe=new Ne(k,oe);Pe.renderOrder=1,Pe.visible=!1,a.add(Pe),$[ue][K]=Pe,L[ue][K]=0,E[ue][K]=!1}}},R=M=>{const de=[S,_,g][M],P=de.getLength(),j=E[M].filter(fe=>fe).length;if(x-j>=c){let fe=0;for(let te=0;te<c;te++){const B=E[M].findIndex(h=>!h);if(B===-1){console.warn(`No available chasers for path ${M}, emitted ${fe}/${c}`);break}const k=fe/(c-1),ue=.05+(1-.05)*Math.pow(k,3),a=new pt({color:[16711680,65280,255][M],transparent:!0,opacity:ue,blending:Vt,fog:!0,depthWrite:!1});$[M][B].material=a,$[M][B].visible=!0;const K=fe*N;L[M][B]=K,E[M][B]=!0;const oe=K/P,Pe=de.getPointAt(oe);$[M][B].position.copy(Pe),fe++}}},W=M=>{const de=performance.now()/1e3,P=[S,_,g];for(let j=0;j<3;j++){de-q[j]>=D[j]&&(R(j),q[j]=de);const le=P[j],fe=le.getLength(),te=f*M;for(let B=0;B<x;B++)if(E[j][B]){L[j][B]+=te;const k=L[j][B]/fe;if(k>=1)$[j][B].visible=!1,E[j][B]=!1,L[j][B]=0;else{const ue=le.getPointAt(k);$[j][B].position.copy(ue)}}}};return X(),{chaserPath:S,chaserPath2:_,chaserPath3:g,updateChasers:W,dispose:()=>{p.remove(v),p.remove(T),p.remove(y),v.geometry.dispose(),v.material.dispose(),T.geometry.dispose(),T.material.dispose(),y.geometry.dispose(),y.material.dispose(),G.forEach(M=>{M.children.forEach(de=>{de.geometry.dispose(),de.material.dispose()}),p.remove(M)})}}}class Li extends Xs{constructor(e){super(e)}load(e,n,t,o){const s=this,c=new js(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){const x=s.parse(JSON.parse(f));n&&n(x)},t,o)}parse(e){return new Bi(e)}}class Bi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=zi(e,n,this.data);for(let s=0,c=o.length;s<c;s++)t.push(...o[s].toShapes());return t}}function zi(p,e,n){const t=Array.from(p),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,c=[];let f=0,x=0;for(let D=0;D<t.length;D++){const N=t[D];if(N===`
`)f=0,x-=s;else{const S=Ni(N,o,f,x,n);f+=S.offsetX,c.push(S.path)}}return c}function Ni(p,e,n,t,o){const s=o.glyphs[p]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+p+'" does not exists in font family '+o.familyName+".");return}const c=new to;let f,x,D,N,S,_,g,v;if(s.o){const T=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,G=T.length;y<G;)switch(T[y++]){case"m":f=T[y++]*e+n,x=T[y++]*e+t,c.moveTo(f,x);break;case"l":f=T[y++]*e+n,x=T[y++]*e+t,c.lineTo(f,x);break;case"q":D=T[y++]*e+n,N=T[y++]*e+t,S=T[y++]*e+n,_=T[y++]*e+t,c.quadraticCurveTo(S,_,D,N);break;case"b":D=T[y++]*e+n,N=T[y++]*e+t,S=T[y++]*e+n,_=T[y++]*e+t,g=T[y++]*e+n,v=T[y++]*e+t,c.bezierCurveTo(S,_,g,v,D,N);break}}return{offsetX:s.ha*e,path:c}}function Hi(p="/fonts/Poppins_Regular.json"){const e=$t(null),n=$t(0),t=$t(!1),o=()=>new Promise((c,f)=>{new Li().load(p,D=>{console.log("Font loaded successfully:",{timestamp:Date.now(),url:p,userAgent:navigator.userAgent}),e.value=D,n.value=100,t.value=!0,c(D)},D=>{D.lengthComputable&&(n.value=D.loaded/D.total*100)},D=>{console.error("Font loading error details:",{url:p,message:D.message,userAgent:navigator.userAgent}),n.value=100,t.value=!0,f(D)})});return{font:e,loadingProgress:n,isLoaded:t,initialize:()=>o()}}const Fi={class:"preloader"},Gi={class:"progress-label"},Ui=cs({__name:"Preloader",props:{progress:{}},setup(p){return(e,n)=>(kn(),Us("div",Fi,[fo("div",Gi,Mr(Math.round(e.progress))+"%",1)]))}}),Wi=$s(Ui,[["__scopeId","data-v-e5eadefa"]]),Hs=250,_n=500,No=-500,$n=-520,Fs=-720,Gs=4e3,Yi=cs({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(p){De.registerPlugin(Ie);const e=p,n=Vs();n.projects=e.projects;const t=zn(),o={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},s=$t(null),c=$t(null),f=$t(!1),x=$t(0),D=$t(!1),N=$t(!0),S=new Map;let _,g,v,T,y,G,$,L=null,E=null,q=null,X=null,R=null,W=[],ne=null,M=null,de=0,P=null,j;const le=Hi("/fonts/Poppins_Regular.json"),fe=()=>{const a=s.value?s.value.getBoundingClientRect().width:window.innerWidth,K=window.innerHeight,oe=t.isMobile?.75:1,Pe=t.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;v.setSize(a*oe,K*oe),v.setPixelRatio(Pe),T.setSize(a*oe,K*oe),g.aspect=a/K,g.updateProjectionMatrix(),v.domElement.style.width=`${a}px`,v.domElement.style.height=`${K}px`},te=a=>S.has(a)?Promise.resolve(S.get(a)):new Promise((K,oe)=>{new Kr().load(a,h=>{h.encoding=void 0,S.set(a,h),K(h)},void 0,h=>oe(h))}),B=async()=>{_=new Vr,_.background=new At(0),_.fog=new qr(0,700,Gs),g=new Zr(t.isMobile?95:75,window.innerWidth/window.innerHeight,1,Gs+6e3),g.position.set(0,0,0),g.lookAt(0,0,1e3),v=new $r({antialias:!0}),t.isMobile?v.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):v.setPixelRatio(window.devicePixelRatio),v.toneMapping=Qr,v.toneMappingExposure=1,v.outputEncoding=void 0,T=new Pi(v);const a=new Ci(_,g);if(T.addPass(a),t.isMobile?y=new _o(new Re(window.innerWidth,window.innerHeight),1,.1,0):y=new _o(new Re(window.innerWidth,window.innerHeight),1.6,.2,0),y.renderToScreen=!0,T.addPass(y),s.value)s.value.appendChild(v.domElement),v.domElement.style.opacity="0";else return;G=new on,G.dom.style.position="fixed",G.dom.style.top="0px",G.dom.style.left="0px",G.dom.style.zIndex="1000",document.body.appendChild(G.dom);const oe=e.projects.filter(u=>u.keyart).length+2+1;let Pe=0;const h=()=>{Pe++;const u=Pe/oe*100,i=le.loadingProgress.value;x.value=(u+i/oe)/(1+1/oe),Pe===oe&&le.isLoaded.value&&(f.value=!0)};await le.initialize().then(()=>{console.log("Font initialized:",{fontValue:!!le.font.value,timestamp:Date.now()}),h()}).catch(u=>{console.error("Font initialization failed:",u),h()}),await te(e.projectGridFile).then(()=>h()).catch(()=>h()),await te(e.projectGridFile2).then(()=>h()).catch(()=>h());for(const u of e.projects)u.keyart?await te(u.keyart).then(()=>h()).catch(()=>h()):h();P=ki(_,{CUBE_SIZE:Hs,CUBE_SPACING:_n,FIRST_CUBE_Z:No},e.projects,e.projectGridFile,e.projectGridFile2,o,S,le.font),console.log("Before projectCubesInstance creation:",{fontValue:!!le.font.value,timestamp:Date.now()});try{if(await P.getInitializedData().then(({maxZ:u,updateCubeColors:i,projectCubes:r})=>{if(j=u,j===void 0||isNaN(j))throw new Error("Invalid maxZ from projectCubesInstance");console.log("Before introCubes creation:",{fontValue:!!le.font.value,timestamp:Date.now()});const{introCubes:C}=Ai(_,le.font,{CUBE_SIZE:Hs,FIRST_CUBE_Z:No},o);W=[...C,...r],ne=i}),o.showCars){const{cityGroup:u,updateParticles:i,dispose:r}=Di(_,_,j,o);$=i,R=r}if(o.showStarfield){const{dispose:u}=Ri(_,g,j);L=u}if(o.showChasers){const{dispose:u,updateChasers:i}=Oi(_,j);q=u,X=i}fe()}catch(u){console.error("Error initializing project cubes:",u),j=No-(e.projects.length+1)*_n}},k=(a=0)=>{if(M=requestAnimationFrame(k),v&&T){const K=(a-de)/1e3;de=a,$(K),X&&X(K),P!=null&&P.updateClickHereParticles&&P.updateClickHereParticles(g,K);const oe=4e3,Pe=1e3,h=Math.abs(g.position.z-j);g.far=Math.max(oe+Pe,h),g.updateProjectionMatrix();const u=Fs-$n;let i=0;g.position.z>=$n?i=0:g.position.z<=Fs?i=1:i=(g.position.z-$n)/u,t.isMobile?y.strength=Ve.lerp(1.3,0,i):y.strength=Ve.lerp(1.6,.125,i),T.render()}G.update()};Pr(()=>{B().then(()=>{if(f.value){M=requestAnimationFrame(k);let a=null;const K=P.getInitializedData().then(({projectCubes:Pe})=>{Pe.forEach(u=>{u.userData.isActive=!0});const h=No-(e.projects.length-1)*_n;g.position.set(0,0,5e3),g.lookAt(0,0,h),g.updateProjectionMatrix(),ne(g),T.render(),W.length&&ne&&(a=Ii(_,g,c,W,ne,{CUBE_SPACING:_n,FIRST_CUBE_Z:No},{scrub:t.isMobile?3:1},o,G).setReverting),v&&E===null&&(E=P.setupInteractivity(g,v.domElement,v,u=>{a&&a(u)})),window.scrollTo({top:0,behavior:"auto"})}),oe=()=>{K.then(()=>{N.value=!1,g.position.set(0,0,5e3),g.updateProjectionMatrix(),De.to(v.domElement,{opacity:1,duration:.5,ease:"power4.out"});const Pe={z:5e3};De.to(Pe,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{g.position.z=Pe.z,g.updateProjectionMatrix()},onComplete:()=>{g.position.z=0,D.value=!0}})})};De.delayedCall(.5,oe)}}).catch(a=>{console.error("Initialization failed:",a)}),window.addEventListener("resize",ue)}),Cr(()=>{M!==null&&cancelAnimationFrame(M),E&&E(),window.removeEventListener("resize",ue),Ie.getAll().forEach(a=>a.kill()),v.dispose(),T.dispose(),_.clear(),document.body.removeChild(G.dom),L&&L(),q&&q(),R&&R()});const ue=()=>{fe(),Ie.refresh()};return(a,K)=>(kn(),Us("section",{ref_key:"wrapper",ref:c,class:"wrapper"},[Ho(Er,{name:"fade"},{default:Ws(()=>[N.value?(kn(),Ys(Wi,{key:0,progress:x.value},null,8,["progress"])):Sr("",!0)]),_:1}),fo("div",{ref_key:"tunnelWrapper",ref:s,class:"tunnel-wrapper"},null,512)],512))}}),Xi=$s(Yi,[["__scopeId","data-v-33f430c4"]]),ji={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Vi={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},qi={class:"overflow-hidden"},Ji=cs({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(p){return(e,n)=>(kn(),Ys(ti,null,{default:Ws(()=>[Ho(Ar(kr),{title:"Welcome"}),fo("div",ji,[fo("nav",Vi,[Ho(Jr)]),fo("div",qi,[Ho(Xi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),n[0]||(n[0]=fo("div",{class:"flex justify-center items-center"},null,-1)),n[1]||(n[1]=fo("div",{class:"flex justify-center items-center"},null,-1)),Ho(ei)])]),_:1}))}});export{Ji as default};
