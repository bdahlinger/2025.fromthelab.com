import{J as hn,W as gn,I as es,e as ts,o as Cr,a as io,t as mn,d as _o,x as _n,y as wn,b as Bo,T as vn,w as yn,c as xn,f as bn,u as Tn,m as Cn,F as Pn}from"./app-CHCGyFBW.js";import{M as Ye,O as Sn,B as To,F as fs,S as ao,U as Yr,V as kt,W as mr,H as _r,N as Mn,C as En,a as Ct,b as de,A as Wt,c as Et,E as In,d as Dt,e as _t,g as Ve,f as Ue,h as Mo,i as Uo,j as Gt,k as Dn,l as An,m as Rn,R as ps,n as kn,o as On,P as ro,D as Qt,p as Ns,q as Fs,r as ds,Q as Bn,I as Ln,s as Rr,t as hs,u as Nn,v as kr,w as Or,x as Fn,y as zn,z as Hn,J as Un,K as Gn,T as Yn,X as Wn,L as Xn,G as Zn}from"./GlobalFooter-3sHmU0Su.js";import{_ as zs}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Hs=hn("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(n,e){n.isMobile=e}},actions:{setActiveProject(n){this.activeProjectSlug=n},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(n){this.scrollPosition=n,console.log("Scroll position stored:",n)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function Vn(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function jn(n,e,r){return e&&Vn(n.prototype,e),n}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ht,wr,Bt,Kt,Jt,Co,Us,so,Go,Gs,jt,zt,Ys,Ws=function(){return ht||typeof window<"u"&&(ht=window.gsap)&&ht.registerPlugin&&ht},Xs=1,bo=[],ye=[],Zt=[],Yo=Date.now,Wr=function(e,r){return r},$n=function(){var e=Go.core,r=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,ye),o.push.apply(o,Zt),ye=t,Zt=o,Wr=function(i,l){return r[i](l)}},eo=function(e,r){return~Zt.indexOf(e)&&Zt[Zt.indexOf(e)+1][r]},Wo=function(e){return!!~Gs.indexOf(e)},bt=function(e,r,t,o,s){return e.addEventListener(r,t,{passive:o!==!1,capture:!!s})},xt=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},rr="scrollLeft",sr="scrollTop",Xr=function(){return jt&&jt.isPressed||ye.cache++},Pr=function(e,r){var t=function o(s){if(s||s===0){Xs&&(Bt.history.scrollRestoration="manual");var i=jt&&jt.isPressed;s=o.v=Math.round(s)||(jt&&jt.iOS?1:0),e(s),o.cacheID=ye.cache,i&&Wr("ss",s)}else(r||ye.cache!==o.cacheID||Wr("ref"))&&(o.cacheID=ye.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Mt={s:rr,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Pr(function(n){return arguments.length?Bt.scrollTo(n,ct.sc()):Bt.pageXOffset||Kt[rr]||Jt[rr]||Co[rr]||0})},ct={s:sr,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Mt,sc:Pr(function(n){return arguments.length?Bt.scrollTo(Mt.sc(),n):Bt.pageYOffset||Kt[sr]||Jt[sr]||Co[sr]||0})},It=function(e,r){return(r&&r._ctx&&r._ctx.selector||ht.utils.toArray)(e)[0]||(typeof e=="string"&&ht.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},to=function(e,r){var t=r.s,o=r.sc;Wo(e)&&(e=Kt.scrollingElement||Jt);var s=ye.indexOf(e),i=o===ct.sc?1:2;!~s&&(s=ye.push(e)-1),ye[s+i]||bt(e,"scroll",Xr);var l=ye[s+i],p=l||(ye[s+i]=Pr(eo(e,t),!0)||(Wo(e)?o:Pr(function(_){return arguments.length?e[t]=_:e[t]})));return p.target=e,l||(p.smooth=ht.getProperty(e,"scrollBehavior")==="smooth"),p},Zr=function(e,r,t){var o=e,s=e,i=Yo(),l=i,p=r||50,_=Math.max(500,p*3),T=function(w,E){var g=Yo();E||g-i>p?(s=o,o=w,l=i,i=g):t?o+=w:o=s+(w-s)/(g-l)*(i-l)},h=function(){s=o=t?0:o,l=i=0},f=function(w){var E=l,g=s,re=Yo();return(w||w===0)&&w!==o&&T(w),i===l||re-l>_?0:(o+(t?g:-g))/((t?re:i)-E)*1e3};return{update:T,reset:h,getVelocity:f}},Ro=function(e,r){return r&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},gs=function(e){var r=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(r)>=Math.abs(t)?r:t},Zs=function(){Go=ht.core.globals().ScrollTrigger,Go&&Go.core&&$n()},Vs=function(e){return ht=e||Ws(),!wr&&ht&&typeof document<"u"&&document.body&&(Bt=window,Kt=document,Jt=Kt.documentElement,Co=Kt.body,Gs=[Bt,Kt,Jt,Co],ht.utils.clamp,Ys=ht.core.context||function(){},so="onpointerenter"in Co?"pointer":"mouse",Us=rt.isTouch=Bt.matchMedia&&Bt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Bt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,zt=rt.eventTypes=("ontouchstart"in Jt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Jt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Xs=0},500),Zs(),wr=1),wr};Mt.op=ct;ye.cache=0;var rt=function(){function n(r){this.init(r)}var e=n.prototype;return e.init=function(t){wr||Vs(ht)||console.warn("Please gsap.registerPlugin(Observer)"),Go||Zs();var o=t.tolerance,s=t.dragMinimum,i=t.type,l=t.target,p=t.lineHeight,_=t.debounce,T=t.preventDefault,h=t.onStop,f=t.onStopDelay,c=t.ignore,w=t.wheelSpeed,E=t.event,g=t.onDragStart,re=t.onDragEnd,ee=t.onDrag,ne=t.onPress,S=t.onRelease,De=t.onRight,Q=t.onLeft,A=t.onUp,Pe=t.onDown,oe=t.onChangeX,m=t.onChangeY,z=t.onChange,v=t.onToggleX,B=t.onToggleY,ie=t.onHover,Se=t.onHoverEnd,Be=t.onMove,V=t.ignoreCheck,L=t.isNormalizer,C=t.onGestureStart,a=t.onGestureEnd,y=t.onWheel,U=t.onEnable,H=t.onDisable,ae=t.onClick,xe=t.scrollSpeed,be=t.capture,Me=t.allowClicks,Xe=t.lockAxis,Ae=t.onLockAxis;this.target=l=It(l)||Jt,this.vars=t,c&&(c=ht.utils.toArray(c)),o=o||1e-9,s=s||0,w=w||1,xe=xe||1,i=i||"wheel,touch,pointer",_=_!==!1,p||(p=parseFloat(Bt.getComputedStyle(Co).lineHeight)||22);var Oe,Le,Ie,W,pe,Ge,Fe,u=this,ze=0,Qe=0,b=t.passive||!T&&t.passive!==!1,P=to(l,Mt),K=to(l,ct),I=P(),G=K(),N=~i.indexOf("touch")&&!~i.indexOf("pointer")&&zt[0]==="pointerdown",X=Wo(l),q=l.ownerDocument||Kt,fe=[0,0,0],D=[0,0,0],j=0,le=function(){return j=Yo()},M=function(x,Z){return(u.event=x)&&c&&~c.indexOf(x.target)||Z&&N&&x.pointerType!=="touch"||V&&V(x,Z)},je=function(){u._vx.reset(),u._vy.reset(),Le.pause(),h&&h(u)},He=function(){var x=u.deltaX=gs(fe),Z=u.deltaY=gs(D),d=Math.abs(x)>=o,Y=Math.abs(Z)>=o;z&&(d||Y)&&z(u,x,Z,fe,D),d&&(De&&u.deltaX>0&&De(u),Q&&u.deltaX<0&&Q(u),oe&&oe(u),v&&u.deltaX<0!=ze<0&&v(u),ze=u.deltaX,fe[0]=fe[1]=fe[2]=0),Y&&(Pe&&u.deltaY>0&&Pe(u),A&&u.deltaY<0&&A(u),m&&m(u),B&&u.deltaY<0!=Qe<0&&B(u),Qe=u.deltaY,D[0]=D[1]=D[2]=0),(W||Ie)&&(Be&&Be(u),Ie&&(g&&Ie===1&&g(u),ee&&ee(u),Ie=0),W=!1),Ge&&!(Ge=!1)&&Ae&&Ae(u),pe&&(y(u),pe=!1),Oe=0},yt=function(x,Z,d){fe[d]+=x,D[d]+=Z,u._vx.update(x),u._vy.update(Z),_?Oe||(Oe=requestAnimationFrame(He)):He()},ut=function(x,Z){Xe&&!Fe&&(u.axis=Fe=Math.abs(x)>Math.abs(Z)?"x":"y",Ge=!0),Fe!=="y"&&(fe[2]+=x,u._vx.update(x,!0)),Fe!=="x"&&(D[2]+=Z,u._vy.update(Z,!0)),_?Oe||(Oe=requestAnimationFrame(He)):He()},Te=function(x){if(!M(x,1)){x=Ro(x,T);var Z=x.clientX,d=x.clientY,Y=Z-u.x,F=d-u.y,te=u.isDragging;u.x=Z,u.y=d,(te||(Y||F)&&(Math.abs(u.startX-Z)>=s||Math.abs(u.startY-d)>=s))&&(Ie=te?2:1,te||(u.isDragging=!0),ut(Y,F))}},Ze=u.onPress=function(O){M(O,1)||O&&O.button||(u.axis=Fe=null,Le.pause(),u.isPressed=!0,O=Ro(O),ze=Qe=0,u.startX=u.x=O.clientX,u.startY=u.y=O.clientY,u._vx.reset(),u._vy.reset(),bt(L?l:q,zt[1],Te,b,!0),u.deltaX=u.deltaY=0,ne&&ne(u))},J=u.onRelease=function(O){if(!M(O,1)){xt(L?l:q,zt[1],Te,!0);var x=!isNaN(u.y-u.startY),Z=u.isDragging,d=Z&&(Math.abs(u.x-u.startX)>3||Math.abs(u.y-u.startY)>3),Y=Ro(O);!d&&x&&(u._vx.reset(),u._vy.reset(),T&&Me&&ht.delayedCall(.08,function(){if(Yo()-j>300&&!O.defaultPrevented){if(O.target.click)O.target.click();else if(q.createEvent){var F=q.createEvent("MouseEvents");F.initMouseEvent("click",!0,!0,Bt,1,Y.screenX,Y.screenY,Y.clientX,Y.clientY,!1,!1,!1,!1,0,null),O.target.dispatchEvent(F)}}})),u.isDragging=u.isGesturing=u.isPressed=!1,h&&Z&&!L&&Le.restart(!0),Ie&&He(),re&&Z&&re(u),S&&S(u,d)}},ce=function(x){return x.touches&&x.touches.length>1&&(u.isGesturing=!0)&&C(x,u.isDragging)},$=function(){return(u.isGesturing=!1)||a(u)},se=function(x){if(!M(x)){var Z=P(),d=K();yt((Z-I)*xe,(d-G)*xe,1),I=Z,G=d,h&&Le.restart(!0)}},ge=function(x){if(!M(x)){x=Ro(x,T),y&&(pe=!0);var Z=(x.deltaMode===1?p:x.deltaMode===2?Bt.innerHeight:1)*w;yt(x.deltaX*Z,x.deltaY*Z,0),h&&!L&&Le.restart(!0)}},Re=function(x){if(!M(x)){var Z=x.clientX,d=x.clientY,Y=Z-u.x,F=d-u.y;u.x=Z,u.y=d,W=!0,h&&Le.restart(!0),(Y||F)&&ut(Y,F)}},me=function(x){u.event=x,ie(u)},k=function(x){u.event=x,Se(u)},$e=function(x){return M(x)||Ro(x,T)&&ae(u)};Le=u._dc=ht.delayedCall(f||.25,je).pause(),u.deltaX=u.deltaY=0,u._vx=Zr(0,50,!0),u._vy=Zr(0,50,!0),u.scrollX=P,u.scrollY=K,u.isDragging=u.isGesturing=u.isPressed=!1,Ys(this),u.enable=function(O){return u.isEnabled||(bt(X?q:l,"scroll",Xr),i.indexOf("scroll")>=0&&bt(X?q:l,"scroll",se,b,be),i.indexOf("wheel")>=0&&bt(l,"wheel",ge,b,be),(i.indexOf("touch")>=0&&Us||i.indexOf("pointer")>=0)&&(bt(l,zt[0],Ze,b,be),bt(q,zt[2],J),bt(q,zt[3],J),Me&&bt(l,"click",le,!0,!0),ae&&bt(l,"click",$e),C&&bt(q,"gesturestart",ce),a&&bt(q,"gestureend",$),ie&&bt(l,so+"enter",me),Se&&bt(l,so+"leave",k),Be&&bt(l,so+"move",Re)),u.isEnabled=!0,u.isDragging=u.isGesturing=u.isPressed=W=Ie=!1,u._vx.reset(),u._vy.reset(),I=P(),G=K(),O&&O.type&&Ze(O),U&&U(u)),u},u.disable=function(){u.isEnabled&&(bo.filter(function(O){return O!==u&&Wo(O.target)}).length||xt(X?q:l,"scroll",Xr),u.isPressed&&(u._vx.reset(),u._vy.reset(),xt(L?l:q,zt[1],Te,!0)),xt(X?q:l,"scroll",se,be),xt(l,"wheel",ge,be),xt(l,zt[0],Ze,be),xt(q,zt[2],J),xt(q,zt[3],J),xt(l,"click",le,!0),xt(l,"click",$e),xt(q,"gesturestart",ce),xt(q,"gestureend",$),xt(l,so+"enter",me),xt(l,so+"leave",k),xt(l,so+"move",Re),u.isEnabled=u.isPressed=u.isDragging=!1,H&&H(u))},u.kill=u.revert=function(){u.disable();var O=bo.indexOf(u);O>=0&&bo.splice(O,1),jt===u&&(jt=0)},bo.push(u),L&&Wo(l)&&(jt=u),u.enable(E)},jn(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();rt.version="3.12.7";rt.create=function(n){return new rt(n)};rt.register=Vs;rt.getAll=function(){return bo.slice()};rt.getById=function(n){return bo.filter(function(e){return e.vars.id===n})[0]};Ws()&&ht.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var R,yo,ve,We,Ot,Ne,os,Sr,Ko,Xo,Lo,nr,mt,Dr,Vr,Pt,ms,_s,xo,js,Br,$s,Tt,jr,Qs,qs,qt,$r,rs,Po,ss,Mr,Qr,Lr,ir=1,wt=Date.now,Nr=wt(),Ft=0,No=0,ws=function(e,r,t){var o=Rt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+r+"Clamp"]=o,o?e.substr(6,e.length-7):e},vs=function(e,r){return r&&(!Rt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Qn=function n(){return No&&requestAnimationFrame(n)},ys=function(){return Dr=1},xs=function(){return Dr=0},Yt=function(e){return e},Fo=function(e){return Math.round(e*1e5)/1e5||0},Ks=function(){return typeof window<"u"},Js=function(){return R||Ks()&&(R=window.gsap)&&R.registerPlugin&&R},po=function(e){return!!~os.indexOf(e)},en=function(e){return(e==="Height"?ss:ve["inner"+e])||Ot["client"+e]||Ne["client"+e]},tn=function(e){return eo(e,"getBoundingClientRect")||(po(e)?function(){return Tr.width=ve.innerWidth,Tr.height=ss,Tr}:function(){return Vt(e)})},qn=function(e,r,t){var o=t.d,s=t.d2,i=t.a;return(i=eo(e,"getBoundingClientRect"))?function(){return i()[o]}:function(){return(r?en(s):e["client"+s])||0}},Kn=function(e,r){return!r||~Zt.indexOf(e)?tn(e):function(){return Tr}},Xt=function(e,r){var t=r.s,o=r.d2,s=r.d,i=r.a;return Math.max(0,(t="scroll"+o)&&(i=eo(e,t))?i()-tn(e)()[s]:po(e)?(Ot[t]||Ne[t])-en(o):e[t]-e["offset"+o])},ar=function(e,r){for(var t=0;t<xo.length;t+=3)(!r||~r.indexOf(xo[t+1]))&&e(xo[t],xo[t+1],xo[t+2])},Rt=function(e){return typeof e=="string"},vt=function(e){return typeof e=="function"},zo=function(e){return typeof e=="number"},no=function(e){return typeof e=="object"},ko=function(e,r,t){return e&&e.progress(r?0:1)&&t&&e.pause()},Fr=function(e,r){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return r(e)}):r(e);t&&t.totalTime&&(e.callbackAnimation=t)}},wo=Math.abs,on="left",rn="top",ns="right",is="bottom",co="width",uo="height",Zo="Right",Vo="Left",jo="Top",$o="Bottom",st="padding",Lt="margin",Eo="Width",as="Height",lt="px",Nt=function(e){return ve.getComputedStyle(e)},Jn=function(e){var r=Nt(e).position;e.style.position=r==="absolute"||r==="fixed"?r:"relative"},bs=function(e,r){for(var t in r)t in e||(e[t]=r[t]);return e},Vt=function(e,r){var t=r&&Nt(e)[Vr]!=="matrix(1, 0, 0, 1, 0, 0)"&&R.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Er=function(e,r){var t=r.d2;return e["offset"+t]||e["client"+t]||0},sn=function(e){var r=[],t=e.labels,o=e.duration(),s;for(s in t)r.push(t[s]/o);return r},ei=function(e){return function(r){return R.utils.snap(sn(e),r)}},ls=function(e){var r=R.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,i){i===void 0&&(i=.001);var l;if(!s)return r(o);if(s>0){for(o-=i,l=0;l<t.length;l++)if(t[l]>=o)return t[l];return t[l-1]}else for(l=t.length,o+=i;l--;)if(t[l]<=o)return t[l];return t[0]}:function(o,s,i){i===void 0&&(i=.001);var l=r(o);return!s||Math.abs(l-o)<i||l-o<0==s<0?l:r(s<0?o-e:o+e)}},ti=function(e){return function(r,t){return ls(sn(e))(r,t.direction)}},lr=function(e,r,t,o){return t.split(",").forEach(function(s){return e(r,s,o)})},pt=function(e,r,t,o,s){return e.addEventListener(r,t,{passive:!o,capture:!!s})},ft=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},cr=function(e,r,t){t=t&&t.wheelHandler,t&&(e(r,"wheel",t),e(r,"touchmove",t))},Ts={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ur={toggleActions:"play",anticipatePin:0},Ir={top:0,left:0,center:.5,bottom:1,right:1},vr=function(e,r){if(Rt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=r/100),e=e.substr(0,t-1)),e=o+(e in Ir?Ir[e]*r:~e.indexOf("%")?parseFloat(e)*r/100:parseFloat(e)||0)}return e},fr=function(e,r,t,o,s,i,l,p){var _=s.startColor,T=s.endColor,h=s.fontSize,f=s.indent,c=s.fontWeight,w=We.createElement("div"),E=po(t)||eo(t,"pinType")==="fixed",g=e.indexOf("scroller")!==-1,re=E?Ne:t,ee=e.indexOf("start")!==-1,ne=ee?_:T,S="border-color:"+ne+";font-size:"+h+";color:"+ne+";font-weight:"+c+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return S+="position:"+((g||p)&&E?"fixed;":"absolute;"),(g||p||!E)&&(S+=(o===ct?ns:is)+":"+(i+parseFloat(f))+"px;"),l&&(S+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),w._isStart=ee,w.setAttribute("class","gsap-marker-"+e+(r?" marker-"+r:"")),w.style.cssText=S,w.innerText=r||r===0?e+"-"+r:e,re.children[0]?re.insertBefore(w,re.children[0]):re.appendChild(w),w._offset=w["offset"+o.op.d2],yr(w,0,o,ee),w},yr=function(e,r,t,o){var s={display:"block"},i=t[o?"os2":"p2"],l=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+i+Eo]=1,s["border"+l+Eo]=0,s[t.p]=r+"px",R.set(e,s)},we=[],qr={},Jo,Cs=function(){return wt()-Ft>34&&(Jo||(Jo=requestAnimationFrame($t)))},vo=function(){(!Tt||!Tt.isPressed||Tt.startX>Ne.clientWidth)&&(ye.cache++,Tt?Jo||(Jo=requestAnimationFrame($t)):$t(),Ft||go("scrollStart"),Ft=wt())},zr=function(){qs=ve.innerWidth,Qs=ve.innerHeight},Ho=function(e){ye.cache++,(e===!0||!mt&&!$s&&!We.fullscreenElement&&!We.webkitFullscreenElement&&(!jr||qs!==ve.innerWidth||Math.abs(ve.innerHeight-Qs)>ve.innerHeight*.25))&&Sr.restart(!0)},ho={},oi=[],nn=function n(){return ft(_e,"scrollEnd",n)||lo(!0)},go=function(e){return ho[e]&&ho[e].map(function(r){return r()})||oi},At=[],an=function(e){for(var r=0;r<At.length;r+=5)(!e||At[r+4]&&At[r+4].query===e)&&(At[r].style.cssText=At[r+1],At[r].getBBox&&At[r].setAttribute("transform",At[r+2]||""),At[r+3].uncache=1)},cs=function(e,r){var t;for(Pt=0;Pt<we.length;Pt++)t=we[Pt],t&&(!r||t._ctx===r)&&(e?t.kill(1):t.revert(!0,!0));Mr=!0,r&&an(r),r||go("revert")},ln=function(e,r){ye.cache++,(r||!St)&&ye.forEach(function(t){return vt(t)&&t.cacheID++&&(t.rec=0)}),Rt(e)&&(ve.history.scrollRestoration=rs=e)},St,fo=0,Ps,ri=function(){if(Ps!==fo){var e=Ps=fo;requestAnimationFrame(function(){return e===fo&&lo(!0)})}},cn=function(){Ne.appendChild(Po),ss=!Tt&&Po.offsetHeight||ve.innerHeight,Ne.removeChild(Po)},Ss=function(e){return Ko(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(r){return r.style.display=e?"none":"block"})},lo=function(e,r){if(Ot=We.documentElement,Ne=We.body,os=[ve,We,Ot,Ne],Ft&&!e&&!Mr){pt(_e,"scrollEnd",nn);return}cn(),St=_e.isRefreshing=!0,ye.forEach(function(o){return vt(o)&&++o.cacheID&&(o.rec=o())});var t=go("refreshInit");js&&_e.sort(),r||cs(),ye.forEach(function(o){vt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),we.slice(0).forEach(function(o){return o.refresh()}),Mr=!1,we.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",i=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-i),o.refresh()}}),Qr=1,Ss(!0),we.forEach(function(o){var s=Xt(o.scroller,o._dir),i=o.vars.end==="max"||o._endClamp&&o.end>s,l=o._startClamp&&o.start>=s;(i||l)&&o.setPositions(l?s-1:o.start,i?Math.max(l?s:o.start+1,s):o.end,!0)}),Ss(!1),Qr=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),ye.forEach(function(o){vt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),ln(rs,1),Sr.pause(),fo++,St=2,$t(2),we.forEach(function(o){return vt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),St=_e.isRefreshing=!1,go("refresh")},Kr=0,xr=1,Qo,$t=function(e){if(e===2||!St&&!Mr){_e.isUpdating=!0,Qo&&Qo.update(0);var r=we.length,t=wt(),o=t-Nr>=50,s=r&&we[0].scroll();if(xr=Kr>s?-1:1,St||(Kr=s),o&&(Ft&&!Dr&&t-Ft>200&&(Ft=0,go("scrollEnd")),Lo=Nr,Nr=t),xr<0){for(Pt=r;Pt-- >0;)we[Pt]&&we[Pt].update(0,o);xr=1}else for(Pt=0;Pt<r;Pt++)we[Pt]&&we[Pt].update(0,o);_e.isUpdating=!1}Jo=0},Jr=[on,rn,is,ns,Lt+$o,Lt+Zo,Lt+jo,Lt+Vo,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],br=Jr.concat([co,uo,"boxSizing","max"+Eo,"max"+as,"position",Lt,st,st+jo,st+Zo,st+$o,st+Vo]),si=function(e,r,t){So(t);var o=e._gsap;if(o.spacerIsNative)So(o.spacerState);else if(e._gsap.swappedIn){var s=r.parentNode;s&&(s.insertBefore(e,r),s.removeChild(r))}e._gsap.swappedIn=!1},Hr=function(e,r,t,o){if(!e._gsap.swappedIn){for(var s=Jr.length,i=r.style,l=e.style,p;s--;)p=Jr[s],i[p]=t[p];i.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(i.display="inline-block"),l[is]=l[ns]="auto",i.flexBasis=t.flexBasis||"auto",i.overflow="visible",i.boxSizing="border-box",i[co]=Er(e,Mt)+lt,i[uo]=Er(e,ct)+lt,i[st]=l[Lt]=l[rn]=l[on]="0",So(o),l[co]=l["max"+Eo]=t[co],l[uo]=l["max"+as]=t[uo],l[st]=t[st],e.parentNode!==r&&(e.parentNode.insertBefore(r,e),r.appendChild(e)),e._gsap.swappedIn=!0}},ni=/([A-Z])/g,So=function(e){if(e){var r=e.t.style,t=e.length,o=0,s,i;for((e.t._gsap||R.core.getCache(e.t)).uncache=1;o<t;o+=2)i=e[o+1],s=e[o],i?r[s]=i:r[s]&&r.removeProperty(s.replace(ni,"-$1").toLowerCase())}},pr=function(e){for(var r=br.length,t=e.style,o=[],s=0;s<r;s++)o.push(br[s],t[br[s]]);return o.t=e,o},ii=function(e,r,t){for(var o=[],s=e.length,i=t?8:0,l;i<s;i+=2)l=e[i],o.push(l,l in r?r[l]:e[i+1]);return o.t=e.t,o},Tr={left:0,top:0},Ms=function(e,r,t,o,s,i,l,p,_,T,h,f,c,w){vt(e)&&(e=e(p)),Rt(e)&&e.substr(0,3)==="max"&&(e=f+(e.charAt(4)==="="?vr("0"+e.substr(3),t):0));var E=c?c.time():0,g,re,ee;if(c&&c.seek(0),isNaN(e)||(e=+e),zo(e))c&&(e=R.utils.mapRange(c.scrollTrigger.start,c.scrollTrigger.end,0,f,e)),l&&yr(l,t,o,!0);else{vt(r)&&(r=r(p));var ne=(e||"0").split(" "),S,De,Q,A;ee=It(r,p)||Ne,S=Vt(ee)||{},(!S||!S.left&&!S.top)&&Nt(ee).display==="none"&&(A=ee.style.display,ee.style.display="block",S=Vt(ee),A?ee.style.display=A:ee.style.removeProperty("display")),De=vr(ne[0],S[o.d]),Q=vr(ne[1]||"0",t),e=S[o.p]-_[o.p]-T+De+s-Q,l&&yr(l,Q,o,t-Q<20||l._isStart&&Q>20),t-=t-Q}if(w&&(p[w]=e||-.001,e<0&&(e=0)),i){var Pe=e+t,oe=i._isStart;g="scroll"+o.d2,yr(i,Pe,o,oe&&Pe>20||!oe&&(h?Math.max(Ne[g],Ot[g]):i.parentNode[g])<=Pe+1),h&&(_=Vt(l),h&&(i.style[o.op.p]=_[o.op.p]-o.op.m-i._offset+lt))}return c&&ee&&(g=Vt(ee),c.seek(f),re=Vt(ee),c._caScrollDist=g[o.p]-re[o.p],e=e/c._caScrollDist*f),c&&c.seek(E),c?e:Math.round(e)},ai=/(webkit|moz|length|cssText|inset)/i,Es=function(e,r,t,o){if(e.parentNode!==r){var s=e.style,i,l;if(r===Ne){e._stOrig=s.cssText,l=Nt(e);for(i in l)!+i&&!ai.test(i)&&l[i]&&typeof s[i]=="string"&&i!=="0"&&(s[i]=l[i]);s.top=t,s.left=o}else s.cssText=e._stOrig;R.core.getCache(e).uncache=1,r.appendChild(e)}},un=function(e,r,t){var o=r,s=o;return function(i){var l=Math.round(e());return l!==o&&l!==s&&Math.abs(l-o)>3&&Math.abs(l-s)>3&&(i=l,t&&t()),s=o,o=Math.round(i),o}},dr=function(e,r,t){var o={};o[r.p]="+="+t,R.set(e,o)},Is=function(e,r){var t=to(e,r),o="_scroll"+r.p2,s=function i(l,p,_,T,h){var f=i.tween,c=p.onComplete,w={};_=_||t();var E=un(t,_,function(){f.kill(),i.tween=0});return h=T&&h||0,T=T||l-_,f&&f.kill(),p[o]=l,p.inherit=!1,p.modifiers=w,w[o]=function(){return E(_+T*f.ratio+h*f.ratio*f.ratio)},p.onUpdate=function(){ye.cache++,i.tween&&$t()},p.onComplete=function(){i.tween=0,c&&c.call(f)},f=i.tween=R.to(e,p),f};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},pt(e,"wheel",t.wheelHandler),_e.isTouch&&pt(e,"touchmove",t.wheelHandler),s},_e=function(){function n(r,t){yo||n.register(R)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),$r(this),this.init(r,t)}var e=n.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!No){this.update=this.refresh=this.kill=Yt;return}t=bs(Rt(t)||zo(t)||t.nodeType?{trigger:t}:t,ur);var s=t,i=s.onUpdate,l=s.toggleClass,p=s.id,_=s.onToggle,T=s.onRefresh,h=s.scrub,f=s.trigger,c=s.pin,w=s.pinSpacing,E=s.invalidateOnRefresh,g=s.anticipatePin,re=s.onScrubComplete,ee=s.onSnapComplete,ne=s.once,S=s.snap,De=s.pinReparent,Q=s.pinSpacer,A=s.containerAnimation,Pe=s.fastScrollEnd,oe=s.preventOverlaps,m=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Mt:ct,z=!h&&h!==0,v=It(t.scroller||ve),B=R.core.getCache(v),ie=po(v),Se=("pinType"in t?t.pinType:eo(v,"pinType")||ie&&"fixed")==="fixed",Be=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],V=z&&t.toggleActions.split(" "),L="markers"in t?t.markers:ur.markers,C=ie?0:parseFloat(Nt(v)["border"+m.p2+Eo])||0,a=this,y=t.onRefreshInit&&function(){return t.onRefreshInit(a)},U=qn(v,ie,m),H=Kn(v,ie),ae=0,xe=0,be=0,Me=to(v,m),Xe,Ae,Oe,Le,Ie,W,pe,Ge,Fe,u,ze,Qe,b,P,K,I,G,N,X,q,fe,D,j,le,M,je,He,yt,ut,Te,Ze,J,ce,$,se,ge,Re,me,k;if(a._startClamp=a._endClamp=!1,a._dir=m,g*=45,a.scroller=v,a.scroll=A?A.time.bind(A):Me,Le=Me(),a.vars=t,o=o||t.animation,"refreshPriority"in t&&(js=1,t.refreshPriority===-9999&&(Qo=a)),B.tweenScroll=B.tweenScroll||{top:Is(v,ct),left:Is(v,Mt)},a.tweenTo=Xe=B.tweenScroll[m.p],a.scrubDuration=function(d){ce=zo(d)&&d,ce?J?J.duration(d):J=R.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ce,paused:!0,onComplete:function(){return re&&re(a)}}):(J&&J.progress(1).kill(),J=0)},o&&(o.vars.lazy=!1,o._initted&&!a.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),a.animation=o.pause(),o.scrollTrigger=a,a.scrubDuration(h),Te=0,p||(p=o.vars.id)),S&&((!no(S)||S.push)&&(S={snapTo:S}),"scrollBehavior"in Ne.style&&R.set(ie?[Ne,Ot]:v,{scrollBehavior:"auto"}),ye.forEach(function(d){return vt(d)&&d.target===(ie?We.scrollingElement||Ot:v)&&(d.smooth=!1)}),Oe=vt(S.snapTo)?S.snapTo:S.snapTo==="labels"?ei(o):S.snapTo==="labelsDirectional"?ti(o):S.directional!==!1?function(d,Y){return ls(S.snapTo)(d,wt()-xe<500?0:Y.direction)}:R.utils.snap(S.snapTo),$=S.duration||{min:.1,max:2},$=no($)?Xo($.min,$.max):Xo($,$),se=R.delayedCall(S.delay||ce/2||.1,function(){var d=Me(),Y=wt()-xe<500,F=Xe.tween;if((Y||Math.abs(a.getVelocity())<10)&&!F&&!Dr&&ae!==d){var te=(d-W)/P,tt=o&&!z?o.totalProgress():te,Ce=Y?0:(tt-Ze)/(wt()-Lo)*1e3||0,qe=R.utils.clamp(-te,1-te,wo(Ce/2)*Ce/.185),ot=te+(S.inertia===!1?0:qe),ke,Ee,ue=S,Je=ue.onStart,he=ue.onInterrupt,dt=ue.onComplete;if(ke=Oe(ot,a),zo(ke)||(ke=ot),Ee=Math.max(0,Math.round(W+ke*P)),d<=pe&&d>=W&&Ee!==d){if(F&&!F._initted&&F.data<=wo(Ee-d))return;S.inertia===!1&&(qe=ke-te),Xe(Ee,{duration:$(wo(Math.max(wo(ot-tt),wo(ke-tt))*.185/Ce/.05||0)),ease:S.ease||"power3",data:wo(Ee-d),onInterrupt:function(){return se.restart(!0)&&he&&he(a)},onComplete:function(){a.update(),ae=Me(),o&&!z&&(J?J.resetTo("totalProgress",ke,o._tTime/o._tDur):o.progress(ke)),Te=Ze=o&&!z?o.totalProgress():a.progress,ee&&ee(a),dt&&dt(a)}},d,qe*P,Ee-d-qe*P),Je&&Je(a,Xe.tween)}}else a.isActive&&ae!==d&&se.restart(!0)}).pause()),p&&(qr[p]=a),f=a.trigger=It(f||c!==!0&&c),k=f&&f._gsap&&f._gsap.stRevert,k&&(k=k(a)),c=c===!0?f:It(c),Rt(l)&&(l={targets:f,className:l}),c&&(w===!1||w===Lt||(w=!w&&c.parentNode&&c.parentNode.style&&Nt(c.parentNode).display==="flex"?!1:st),a.pin=c,Ae=R.core.getCache(c),Ae.spacer?K=Ae.pinState:(Q&&(Q=It(Q),Q&&!Q.nodeType&&(Q=Q.current||Q.nativeElement),Ae.spacerIsNative=!!Q,Q&&(Ae.spacerState=pr(Q))),Ae.spacer=N=Q||We.createElement("div"),N.classList.add("pin-spacer"),p&&N.classList.add("pin-spacer-"+p),Ae.pinState=K=pr(c)),t.force3D!==!1&&R.set(c,{force3D:!0}),a.spacer=N=Ae.spacer,ut=Nt(c),le=ut[w+m.os2],q=R.getProperty(c),fe=R.quickSetter(c,m.a,lt),Hr(c,N,ut),G=pr(c)),L){Qe=no(L)?bs(L,Ts):Ts,u=fr("scroller-start",p,v,m,Qe,0),ze=fr("scroller-end",p,v,m,Qe,0,u),X=u["offset"+m.op.d2];var $e=It(eo(v,"content")||v);Ge=this.markerStart=fr("start",p,$e,m,Qe,X,0,A),Fe=this.markerEnd=fr("end",p,$e,m,Qe,X,0,A),A&&(me=R.quickSetter([Ge,Fe],m.a,lt)),!Se&&!(Zt.length&&eo(v,"fixedMarkers")===!0)&&(Jn(ie?Ne:v),R.set([u,ze],{force3D:!0}),je=R.quickSetter(u,m.a,lt),yt=R.quickSetter(ze,m.a,lt))}if(A){var O=A.vars.onUpdate,x=A.vars.onUpdateParams;A.eventCallback("onUpdate",function(){a.update(0,0,1),O&&O.apply(A,x||[])})}if(a.previous=function(){return we[we.indexOf(a)-1]},a.next=function(){return we[we.indexOf(a)+1]},a.revert=function(d,Y){if(!Y)return a.kill(!0);var F=d!==!1||!a.enabled,te=mt;F!==a.isReverted&&(F&&(ge=Math.max(Me(),a.scroll.rec||0),be=a.progress,Re=o&&o.progress()),Ge&&[Ge,Fe,u,ze].forEach(function(tt){return tt.style.display=F?"none":"block"}),F&&(mt=a,a.update(F)),c&&(!De||!a.isActive)&&(F?si(c,N,K):Hr(c,N,Nt(c),M)),F||a.update(F),mt=te,a.isReverted=F)},a.refresh=function(d,Y,F,te){if(!((mt||!a.enabled)&&!Y)){if(c&&d&&Ft){pt(n,"scrollEnd",nn);return}!St&&y&&y(a),mt=a,Xe.tween&&!F&&(Xe.tween.kill(),Xe.tween=0),J&&J.pause(),E&&o&&o.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var tt=U(),Ce=H(),qe=A?A.duration():Xt(v,m),ot=P<=.01,ke=0,Ee=te||0,ue=no(F)?F.end:t.end,Je=t.endTrigger||f,he=no(F)?F.start:t.start||(t.start===0||!f?0:c?"0 0":"0 100%"),dt=a.pinnedContainer=t.pinnedContainer&&It(t.pinnedContainer,a),nt=f&&Math.max(0,we.indexOf(a))||0,Ke=nt,it,et,oo,tr,gt,at,Ht,Ar,us,Io,Ut,Do,or;for(L&&no(F)&&(Do=R.getProperty(u,m.p),or=R.getProperty(ze,m.p));Ke-- >0;)at=we[Ke],at.end||at.refresh(0,1)||(mt=a),Ht=at.pin,Ht&&(Ht===f||Ht===c||Ht===dt)&&!at.isReverted&&(Io||(Io=[]),Io.unshift(at),at.revert(!0,!0)),at!==we[Ke]&&(nt--,Ke--);for(vt(he)&&(he=he(a)),he=ws(he,"start",a),W=Ms(he,f,tt,m,Me(),Ge,u,a,Ce,C,Se,qe,A,a._startClamp&&"_startClamp")||(c?-.001:0),vt(ue)&&(ue=ue(a)),Rt(ue)&&!ue.indexOf("+=")&&(~ue.indexOf(" ")?ue=(Rt(he)?he.split(" ")[0]:"")+ue:(ke=vr(ue.substr(2),tt),ue=Rt(he)?he:(A?R.utils.mapRange(0,A.duration(),A.scrollTrigger.start,A.scrollTrigger.end,W):W)+ke,Je=f)),ue=ws(ue,"end",a),pe=Math.max(W,Ms(ue||(Je?"100% 0":qe),Je,tt,m,Me()+ke,Fe,ze,a,Ce,C,Se,qe,A,a._endClamp&&"_endClamp"))||-.001,ke=0,Ke=nt;Ke--;)at=we[Ke],Ht=at.pin,Ht&&at.start-at._pinPush<=W&&!A&&at.end>0&&(it=at.end-(a._startClamp?Math.max(0,at.start):at.start),(Ht===f&&at.start-at._pinPush<W||Ht===dt)&&isNaN(he)&&(ke+=it*(1-at.progress)),Ht===c&&(Ee+=it));if(W+=ke,pe+=ke,a._startClamp&&(a._startClamp+=ke),a._endClamp&&!St&&(a._endClamp=pe||-.001,pe=Math.min(pe,Xt(v,m))),P=pe-W||(W-=.01)&&.001,ot&&(be=R.utils.clamp(0,1,R.utils.normalize(W,pe,ge))),a._pinPush=Ee,Ge&&ke&&(it={},it[m.a]="+="+ke,dt&&(it[m.p]="-="+Me()),R.set([Ge,Fe],it)),c&&!(Qr&&a.end>=Xt(v,m)))it=Nt(c),tr=m===ct,oo=Me(),D=parseFloat(q(m.a))+Ee,!qe&&pe>1&&(Ut=(ie?We.scrollingElement||Ot:v).style,Ut={style:Ut,value:Ut["overflow"+m.a.toUpperCase()]},ie&&Nt(Ne)["overflow"+m.a.toUpperCase()]!=="scroll"&&(Ut.style["overflow"+m.a.toUpperCase()]="scroll")),Hr(c,N,it),G=pr(c),et=Vt(c,!0),Ar=Se&&to(v,tr?Mt:ct)(),w?(M=[w+m.os2,P+Ee+lt],M.t=N,Ke=w===st?Er(c,m)+P+Ee:0,Ke&&(M.push(m.d,Ke+lt),N.style.flexBasis!=="auto"&&(N.style.flexBasis=Ke+lt)),So(M),dt&&we.forEach(function(Ao){Ao.pin===dt&&Ao.vars.pinSpacing!==!1&&(Ao._subPinOffset=!0)}),Se&&Me(ge)):(Ke=Er(c,m),Ke&&N.style.flexBasis!=="auto"&&(N.style.flexBasis=Ke+lt)),Se&&(gt={top:et.top+(tr?oo-W:Ar)+lt,left:et.left+(tr?Ar:oo-W)+lt,boxSizing:"border-box",position:"fixed"},gt[co]=gt["max"+Eo]=Math.ceil(et.width)+lt,gt[uo]=gt["max"+as]=Math.ceil(et.height)+lt,gt[Lt]=gt[Lt+jo]=gt[Lt+Zo]=gt[Lt+$o]=gt[Lt+Vo]="0",gt[st]=it[st],gt[st+jo]=it[st+jo],gt[st+Zo]=it[st+Zo],gt[st+$o]=it[st+$o],gt[st+Vo]=it[st+Vo],I=ii(K,gt,De),St&&Me(0)),o?(us=o._initted,Br(1),o.render(o.duration(),!0,!0),j=q(m.a)-D+P+Ee,He=Math.abs(P-j)>1,Se&&He&&I.splice(I.length-2,2),o.render(0,!0,!0),us||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Br(0)):j=P,Ut&&(Ut.value?Ut.style["overflow"+m.a.toUpperCase()]=Ut.value:Ut.style.removeProperty("overflow-"+m.a));else if(f&&Me()&&!A)for(et=f.parentNode;et&&et!==Ne;)et._pinOffset&&(W-=et._pinOffset,pe-=et._pinOffset),et=et.parentNode;Io&&Io.forEach(function(Ao){return Ao.revert(!1,!0)}),a.start=W,a.end=pe,Le=Ie=St?ge:Me(),!A&&!St&&(Le<ge&&Me(ge),a.scroll.rec=0),a.revert(!1,!0),xe=wt(),se&&(ae=-1,se.restart(!0)),mt=0,o&&z&&(o._initted||Re)&&o.progress()!==Re&&o.progress(Re||0,!0).render(o.time(),!0,!0),(ot||be!==a.progress||A||E||o&&!o._initted)&&(o&&!z&&o.totalProgress(A&&W<-.001&&!be?R.utils.normalize(W,pe,0):be,!0),a.progress=ot||(Le-W)/P===be?0:be),c&&w&&(N._pinOffset=Math.round(a.progress*j)),J&&J.invalidate(),isNaN(Do)||(Do-=R.getProperty(u,m.p),or-=R.getProperty(ze,m.p),dr(u,m,Do),dr(Ge,m,Do-(te||0)),dr(ze,m,or),dr(Fe,m,or-(te||0))),ot&&!St&&a.update(),T&&!St&&!b&&(b=!0,T(a),b=!1)}},a.getVelocity=function(){return(Me()-Ie)/(wt()-Lo)*1e3||0},a.endAnimation=function(){ko(a.callbackAnimation),o&&(J?J.progress(1):o.paused()?z||ko(o,a.direction<0,1):ko(o,o.reversed()))},a.labelToScroll=function(d){return o&&o.labels&&(W||a.refresh()||W)+o.labels[d]/o.duration()*P||0},a.getTrailing=function(d){var Y=we.indexOf(a),F=a.direction>0?we.slice(0,Y).reverse():we.slice(Y+1);return(Rt(d)?F.filter(function(te){return te.vars.preventOverlaps===d}):F).filter(function(te){return a.direction>0?te.end<=W:te.start>=pe})},a.update=function(d,Y,F){if(!(A&&!F&&!d)){var te=St===!0?ge:a.scroll(),tt=d?0:(te-W)/P,Ce=tt<0?0:tt>1?1:tt||0,qe=a.progress,ot,ke,Ee,ue,Je,he,dt,nt;if(Y&&(Ie=Le,Le=A?Me():te,S&&(Ze=Te,Te=o&&!z?o.totalProgress():Ce)),g&&c&&!mt&&!ir&&Ft&&(!Ce&&W<te+(te-Ie)/(wt()-Lo)*g?Ce=1e-4:Ce===1&&pe>te+(te-Ie)/(wt()-Lo)*g&&(Ce=.9999)),Ce!==qe&&a.enabled){if(ot=a.isActive=!!Ce&&Ce<1,ke=!!qe&&qe<1,he=ot!==ke,Je=he||!!Ce!=!!qe,a.direction=Ce>qe?1:-1,a.progress=Ce,Je&&!mt&&(Ee=Ce&&!qe?0:Ce===1?1:qe===1?2:3,z&&(ue=!he&&V[Ee+1]!=="none"&&V[Ee+1]||V[Ee],nt=o&&(ue==="complete"||ue==="reset"||ue in o))),oe&&(he||nt)&&(nt||h||!o)&&(vt(oe)?oe(a):a.getTrailing(oe).forEach(function(oo){return oo.endAnimation()})),z||(J&&!mt&&!ir?(J._dp._time-J._start!==J._time&&J.render(J._dp._time-J._start),J.resetTo?J.resetTo("totalProgress",Ce,o._tTime/o._tDur):(J.vars.totalProgress=Ce,J.invalidate().restart())):o&&o.totalProgress(Ce,!!(mt&&(xe||d)))),c){if(d&&w&&(N.style[w+m.os2]=le),!Se)fe(Fo(D+j*Ce));else if(Je){if(dt=!d&&Ce>qe&&pe+1>te&&te+1>=Xt(v,m),De)if(!d&&(ot||dt)){var Ke=Vt(c,!0),it=te-W;Es(c,Ne,Ke.top+(m===ct?it:0)+lt,Ke.left+(m===ct?0:it)+lt)}else Es(c,N);So(ot||dt?I:G),He&&Ce<1&&ot||fe(D+(Ce===1&&!dt?j:0))}}S&&!Xe.tween&&!mt&&!ir&&se.restart(!0),l&&(he||ne&&Ce&&(Ce<1||!Lr))&&Ko(l.targets).forEach(function(oo){return oo.classList[ot||ne?"add":"remove"](l.className)}),i&&!z&&!d&&i(a),Je&&!mt?(z&&(nt&&(ue==="complete"?o.pause().totalProgress(1):ue==="reset"?o.restart(!0).pause():ue==="restart"?o.restart(!0):o[ue]()),i&&i(a)),(he||!Lr)&&(_&&he&&Fr(a,_),Be[Ee]&&Fr(a,Be[Ee]),ne&&(Ce===1?a.kill(!1,1):Be[Ee]=0),he||(Ee=Ce===1?1:3,Be[Ee]&&Fr(a,Be[Ee]))),Pe&&!ot&&Math.abs(a.getVelocity())>(zo(Pe)?Pe:2500)&&(ko(a.callbackAnimation),J?J.progress(1):ko(o,ue==="reverse"?1:!Ce,1))):z&&i&&!mt&&i(a)}if(yt){var et=A?te/A.duration()*(A._caScrollDist||0):te;je(et+(u._isFlipped?1:0)),yt(et)}me&&me(-te/A.duration()*(A._caScrollDist||0))}},a.enable=function(d,Y){a.enabled||(a.enabled=!0,pt(v,"resize",Ho),ie||pt(v,"scroll",vo),y&&pt(n,"refreshInit",y),d!==!1&&(a.progress=be=0,Le=Ie=ae=Me()),Y!==!1&&a.refresh())},a.getTween=function(d){return d&&Xe?Xe.tween:J},a.setPositions=function(d,Y,F,te){if(A){var tt=A.scrollTrigger,Ce=A.duration(),qe=tt.end-tt.start;d=tt.start+qe*d/Ce,Y=tt.start+qe*Y/Ce}a.refresh(!1,!1,{start:vs(d,F&&!!a._startClamp),end:vs(Y,F&&!!a._endClamp)},te),a.update()},a.adjustPinSpacing=function(d){if(M&&d){var Y=M.indexOf(m.d)+1;M[Y]=parseFloat(M[Y])+d+lt,M[1]=parseFloat(M[1])+d+lt,So(M)}},a.disable=function(d,Y){if(a.enabled&&(d!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,Y||J&&J.pause(),ge=0,Ae&&(Ae.uncache=1),y&&ft(n,"refreshInit",y),se&&(se.pause(),Xe.tween&&Xe.tween.kill()&&(Xe.tween=0)),!ie)){for(var F=we.length;F--;)if(we[F].scroller===v&&we[F]!==a)return;ft(v,"resize",Ho),ie||ft(v,"scroll",vo)}},a.kill=function(d,Y){a.disable(d,Y),J&&!Y&&J.kill(),p&&delete qr[p];var F=we.indexOf(a);F>=0&&we.splice(F,1),F===Pt&&xr>0&&Pt--,F=0,we.forEach(function(te){return te.scroller===a.scroller&&(F=1)}),F||St||(a.scroll.rec=0),o&&(o.scrollTrigger=null,d&&o.revert({kill:!1}),Y||o.kill()),Ge&&[Ge,Fe,u,ze].forEach(function(te){return te.parentNode&&te.parentNode.removeChild(te)}),Qo===a&&(Qo=0),c&&(Ae&&(Ae.uncache=1),F=0,we.forEach(function(te){return te.pin===c&&F++}),F||(Ae.spacer=0)),t.onKill&&t.onKill(a)},we.push(a),a.enable(!1,!1),k&&k(a),o&&o.add&&!P){var Z=a.update;a.update=function(){a.update=Z,ye.cache++,W||pe||a.refresh()},R.delayedCall(.01,a.update),P=.01,W=pe=0}else a.refresh();c&&ri()},n.register=function(t){return yo||(R=t||Js(),Ks()&&window.document&&n.enable(),yo=No),yo},n.defaults=function(t){if(t)for(var o in t)ur[o]=t[o];return ur},n.disable=function(t,o){No=0,we.forEach(function(i){return i[o?"kill":"disable"](t)}),ft(ve,"wheel",vo),ft(We,"scroll",vo),clearInterval(nr),ft(We,"touchcancel",Yt),ft(Ne,"touchstart",Yt),lr(ft,We,"pointerdown,touchstart,mousedown",ys),lr(ft,We,"pointerup,touchend,mouseup",xs),Sr.kill(),ar(ft);for(var s=0;s<ye.length;s+=3)cr(ft,ye[s],ye[s+1]),cr(ft,ye[s],ye[s+2])},n.enable=function(){if(ve=window,We=document,Ot=We.documentElement,Ne=We.body,R&&(Ko=R.utils.toArray,Xo=R.utils.clamp,$r=R.core.context||Yt,Br=R.core.suppressOverwrites||Yt,rs=ve.history.scrollRestoration||"auto",Kr=ve.pageYOffset||0,R.core.globals("ScrollTrigger",n),Ne)){No=1,Po=document.createElement("div"),Po.style.height="100vh",Po.style.position="absolute",cn(),Qn(),rt.register(R),n.isTouch=rt.isTouch,qt=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),jr=rt.isTouch===1,pt(ve,"wheel",vo),os=[ve,We,Ot,Ne],R.matchMedia?(n.matchMedia=function(_){var T=R.matchMedia(),h;for(h in _)T.add(h,_[h]);return T},R.addEventListener("matchMediaInit",function(){return cs()}),R.addEventListener("matchMediaRevert",function(){return an()}),R.addEventListener("matchMedia",function(){lo(0,1),go("matchMedia")}),R.matchMedia().add("(orientation: portrait)",function(){return zr(),zr})):console.warn("Requires GSAP 3.11.0 or later"),zr(),pt(We,"scroll",vo);var t=Ne.hasAttribute("style"),o=Ne.style,s=o.borderTopStyle,i=R.core.Animation.prototype,l,p;for(i.revert||Object.defineProperty(i,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",l=Vt(Ne),ct.m=Math.round(l.top+ct.sc())||0,Mt.m=Math.round(l.left+Mt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(Ne.setAttribute("style",""),Ne.removeAttribute("style")),nr=setInterval(Cs,250),R.delayedCall(.5,function(){return ir=0}),pt(We,"touchcancel",Yt),pt(Ne,"touchstart",Yt),lr(pt,We,"pointerdown,touchstart,mousedown",ys),lr(pt,We,"pointerup,touchend,mouseup",xs),Vr=R.utils.checkPrefix("transform"),br.push(Vr),yo=wt(),Sr=R.delayedCall(.2,lo).pause(),xo=[We,"visibilitychange",function(){var _=ve.innerWidth,T=ve.innerHeight;We.hidden?(ms=_,_s=T):(ms!==_||_s!==T)&&Ho()},We,"DOMContentLoaded",lo,ve,"load",lo,ve,"resize",Ho],ar(pt),we.forEach(function(_){return _.enable(0,1)}),p=0;p<ye.length;p+=3)cr(ft,ye[p],ye[p+1]),cr(ft,ye[p],ye[p+2])}},n.config=function(t){"limitCallbacks"in t&&(Lr=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(nr)||(nr=o)&&setInterval(Cs,o),"ignoreMobileResize"in t&&(jr=n.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(ar(ft)||ar(pt,t.autoRefreshEvents||"none"),$s=(t.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(t,o){var s=It(t),i=ye.indexOf(s),l=po(s);~i&&ye.splice(i,l?6:2),o&&(l?Zt.unshift(ve,o,Ne,o,Ot,o):Zt.unshift(s,o))},n.clearMatchMedia=function(t){we.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},n.isInViewport=function(t,o,s){var i=(Rt(t)?It(t):t).getBoundingClientRect(),l=i[s?co:uo]*o||0;return s?i.right-l>0&&i.left+l<ve.innerWidth:i.bottom-l>0&&i.top+l<ve.innerHeight},n.positionInViewport=function(t,o,s){Rt(t)&&(t=It(t));var i=t.getBoundingClientRect(),l=i[s?co:uo],p=o==null?l/2:o in Ir?Ir[o]*l:~o.indexOf("%")?parseFloat(o)*l/100:parseFloat(o)||0;return s?(i.left+p)/ve.innerWidth:(i.top+p)/ve.innerHeight},n.killAll=function(t){if(we.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=ho.killAll||[];ho={},o.forEach(function(s){return s()})}},n}();_e.version="3.12.7";_e.saveStyles=function(n){return n?Ko(n).forEach(function(e){if(e&&e.style){var r=At.indexOf(e);r>=0&&At.splice(r,5),At.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),R.core.getCache(e),$r())}}):At};_e.revert=function(n,e){return cs(!n,e)};_e.create=function(n,e){return new _e(n,e)};_e.refresh=function(n){return n?Ho(!0):(yo||_e.register())&&lo(!0)};_e.update=function(n){return++ye.cache&&$t(n===!0?2:0)};_e.clearScrollMemory=ln;_e.maxScroll=function(n,e){return Xt(n,e?Mt:ct)};_e.getScrollFunc=function(n,e){return to(It(n),e?Mt:ct)};_e.getById=function(n){return qr[n]};_e.getAll=function(){return we.filter(function(n){return n.vars.id!=="ScrollSmoother"})};_e.isScrolling=function(){return!!Ft};_e.snapDirectional=ls;_e.addEventListener=function(n,e){var r=ho[n]||(ho[n]=[]);~r.indexOf(e)||r.push(e)};_e.removeEventListener=function(n,e){var r=ho[n],t=r&&r.indexOf(e);t>=0&&r.splice(t,1)};_e.batch=function(n,e){var r=[],t={},o=e.interval||.016,s=e.batchMax||1e9,i=function(_,T){var h=[],f=[],c=R.delayedCall(o,function(){T(h,f),h=[],f=[]}).pause();return function(w){h.length||c.restart(!0),h.push(w.trigger),f.push(w),s<=h.length&&c.progress(1)}},l;for(l in e)t[l]=l.substr(0,2)==="on"&&vt(e[l])&&l!=="onRefreshInit"?i(l,e[l]):e[l];return vt(s)&&(s=s(),pt(_e,"refresh",function(){return s=e.batchMax()})),Ko(n).forEach(function(p){var _={};for(l in t)_[l]=t[l];_.trigger=p,r.push(_e.create(_))}),r};var Ds=function(e,r,t,o){return r>o?e(o):r<0&&e(0),t>o?(o-r)/(t-r):t<0?r/(r-t):1},Ur=function n(e,r){r===!0?e.style.removeProperty("touch-action"):e.style.touchAction=r===!0?"auto":r?"pan-"+r+(rt.isTouch?" pinch-zoom":""):"none",e===Ot&&n(Ne,r)},hr={auto:1,scroll:1},li=function(e){var r=e.event,t=e.target,o=e.axis,s=(r.changedTouches?r.changedTouches[0]:r).target,i=s._gsap||R.core.getCache(s),l=wt(),p;if(!i._isScrollT||l-i._isScrollT>2e3){for(;s&&s!==Ne&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(hr[(p=Nt(s)).overflowY]||hr[p.overflowX]));)s=s.parentNode;i._isScroll=s&&s!==t&&!po(s)&&(hr[(p=Nt(s)).overflowY]||hr[p.overflowX]),i._isScrollT=l}(i._isScroll||o==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},fn=function(e,r,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:o=o&&li,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&pt(We,rt.eventTypes[0],Rs,!1,!0)},onDisable:function(){return ft(We,rt.eventTypes[0],Rs,!0)}})},ci=/(input|label|select|textarea)/i,As,Rs=function(e){var r=ci.test(e.target.tagName);(r||As)&&(e._gsapAllow=!0,As=r)},ui=function(e){no(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var r=e,t=r.normalizeScrollX,o=r.momentum,s=r.allowNestedScroll,i=r.onRelease,l,p,_=It(e.target)||Ot,T=R.core.globals().ScrollSmoother,h=T&&T.get(),f=qt&&(e.content&&It(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),c=to(_,ct),w=to(_,Mt),E=1,g=(rt.isTouch&&ve.visualViewport?ve.visualViewport.scale*ve.visualViewport.width:ve.outerWidth)/ve.innerWidth,re=0,ee=vt(o)?function(){return o(l)}:function(){return o||2.8},ne,S,De=fn(_,e.type,!0,s),Q=function(){return S=!1},A=Yt,Pe=Yt,oe=function(){p=Xt(_,ct),Pe=Xo(qt?1:0,p),t&&(A=Xo(0,Xt(_,Mt))),ne=fo},m=function(){f._gsap.y=Fo(parseFloat(f._gsap.y)+c.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",c.offset=c.cacheID=0},z=function(){if(S){requestAnimationFrame(Q);var L=Fo(l.deltaY/2),C=Pe(c.v-L);if(f&&C!==c.v+c.offset){c.offset=C-c.v;var a=Fo((parseFloat(f&&f._gsap.y)||0)-c.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",f._gsap.y=a+"px",c.cacheID=ye.cache,$t()}return!0}c.offset&&m(),S=!0},v,B,ie,Se,Be=function(){oe(),v.isActive()&&v.vars.scrollY>p&&(c()>p?v.progress(1)&&c(p):v.resetTo("scrollY",p))};return f&&R.set(f,{y:"+=0"}),e.ignoreCheck=function(V){return qt&&V.type==="touchmove"&&z()||E>1.05&&V.type!=="touchstart"||l.isGesturing||V.touches&&V.touches.length>1},e.onPress=function(){S=!1;var V=E;E=Fo((ve.visualViewport&&ve.visualViewport.scale||1)/g),v.pause(),V!==E&&Ur(_,E>1.01?!0:t?!1:"x"),B=w(),ie=c(),oe(),ne=fo},e.onRelease=e.onGestureStart=function(V,L){if(c.offset&&m(),!L)Se.restart(!0);else{ye.cache++;var C=ee(),a,y;t&&(a=w(),y=a+C*.05*-V.velocityX/.227,C*=Ds(w,a,y,Xt(_,Mt)),v.vars.scrollX=A(y)),a=c(),y=a+C*.05*-V.velocityY/.227,C*=Ds(c,a,y,Xt(_,ct)),v.vars.scrollY=Pe(y),v.invalidate().duration(C).play(.01),(qt&&v.vars.scrollY>=p||a>=p-1)&&R.to({},{onUpdate:Be,duration:C})}i&&i(V)},e.onWheel=function(){v._ts&&v.pause(),wt()-re>1e3&&(ne=0,re=wt())},e.onChange=function(V,L,C,a,y){if(fo!==ne&&oe(),L&&t&&w(A(a[2]===L?B+(V.startX-V.x):w()+L-a[1])),C){c.offset&&m();var U=y[2]===C,H=U?ie+V.startY-V.y:c()+C-y[1],ae=Pe(H);U&&H!==ae&&(ie+=ae-H),c(ae)}(C||L)&&$t()},e.onEnable=function(){Ur(_,t?!1:"x"),_e.addEventListener("refresh",Be),pt(ve,"resize",Be),c.smooth&&(c.target.style.scrollBehavior="auto",c.smooth=w.smooth=!1),De.enable()},e.onDisable=function(){Ur(_,!0),ft(ve,"resize",Be),_e.removeEventListener("refresh",Be),De.kill()},e.lockAxis=e.lockAxis!==!1,l=new rt(e),l.iOS=qt,qt&&!c()&&c(1),qt&&R.ticker.add(Yt),Se=l._dc,v=R.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:un(c,c(),function(){return v.pause()})},onUpdate:$t,onComplete:Se.vars.onComplete}),l};_e.sort=function(n){if(vt(n))return we.sort(n);var e=ve.pageYOffset||0;return _e.getAll().forEach(function(r){return r._sortY=r.trigger?e+r.trigger.getBoundingClientRect().top:r.start+ve.innerHeight}),we.sort(n||function(r,t){return(r.vars.refreshPriority||0)*-1e6+(r.vars.containerAnimation?1e6:r._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};_e.observe=function(n){return new rt(n)};_e.normalizeScroll=function(n){if(typeof n>"u")return Tt;if(n===!0&&Tt)return Tt.enable();if(n===!1){Tt&&Tt.kill(),Tt=n;return}var e=n instanceof rt?n:ui(n);return Tt&&Tt.target===e.target&&Tt.kill(),po(e.target)&&(Tt=e),e};_e.core={_getVelocityProp:Zr,_inputObserver:fn,_scrollers:ye,_proxies:Zt,bridge:{ss:function(){Ft||go("scrollStart"),Ft=wt()},ref:function(){return mt}}};Js()&&R.registerPlugin(_e);var qo=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(T){T.preventDefault(),t(++n%e.children.length)},!1);function r(T){return e.appendChild(T.dom),T}function t(T){for(var h=0;h<e.children.length;h++)e.children[h].style.display=h===T?"block":"none";n=T}var o=(performance||Date).now(),s=o,i=0,l=r(new qo.Panel("FPS","#0ff","#002")),p=r(new qo.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var _=r(new qo.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:r,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){i++;var T=(performance||Date).now();if(p.update(T-o,200),T>=s+1e3&&(l.update(i*1e3/(T-s),100),s=T,i=0,_)){var h=performance.memory;_.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return T},update:function(){o=this.end()},domElement:e,setMode:t}};qo.Panel=function(n,e,r){var t=1/0,o=0,s=Math.round,i=s(window.devicePixelRatio||1),l=80*i,p=48*i,_=3*i,T=2*i,h=3*i,f=15*i,c=74*i,w=30*i,E=document.createElement("canvas");E.width=l,E.height=p,E.style.cssText="width:80px;height:48px";var g=E.getContext("2d");return g.font="bold "+9*i+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=r,g.fillRect(0,0,l,p),g.fillStyle=e,g.fillText(n,_,T),g.fillRect(h,f,c,w),g.fillStyle=r,g.globalAlpha=.9,g.fillRect(h,f,c,w),{dom:E,update:function(re,ee){t=Math.min(t,re),o=Math.max(o,re),g.fillStyle=r,g.globalAlpha=1,g.fillRect(0,0,l,f),g.fillStyle=e,g.fillText(s(re)+" "+n+" ("+s(t)+"-"+s(o)+")",_,T),g.drawImage(E,h+i,f,c-i,w,h,f,c-i,w),g.fillRect(h+c-i,f,i,w),g.fillStyle=r,g.globalAlpha=.9,g.fillRect(h+c-i,f,i,s((1-re/ee)*w))}}};const pn={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class er{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const fi=new Sn(-1,1,1,-1,0,1);class pi extends To{constructor(){super(),this.setAttribute("position",new fs([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new fs([0,2,0,0,2,0],2))}}const di=new pi;class dn{constructor(e){this._mesh=new Ye(di,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,fi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class hi extends er{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof ao?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Yr.clone(e.uniforms),this.material=new ao({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new dn(this.material)}render(e,r,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class ks extends er{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let i,l;this.inverse?(i=0,l=1):(i=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class gi extends er{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class mi{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const t=e.getSize(new kt);this._width=t.width,this._height=t.height,r=new mr(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:_r}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new hi(pn),this.copyPass.material.blending=Mn,this.clock=new En}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const i=this.passes[o];if(i.enabled!==!1){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),i.needsSwap){if(t){const l=this.renderer.getContext(),p=this.renderer.state.buffers.stencil;p.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),p.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}ks!==void 0&&(i instanceof ks?t=!0:i instanceof gi&&(t=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new kt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class _i extends er{constructor(e,r,t=null,o=null,s=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ct}render(e,r,t){const o=e.autoClear;e.autoClear=!1;let s,i;this.overrideMaterial!==null&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=i),e.autoClear=o}}const wi={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ct(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class mo extends er{constructor(e,r,t,o){super(),this.strength=r!==void 0?r:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new kt(e.x,e.y):new kt(256,256),this.clearColor=new Ct(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);this.renderTargetBright=new mr(s,i,{type:_r}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let h=0;h<this.nMips;h++){const f=new mr(s,i,{type:_r});f.texture.name="UnrealBloomPass.h"+h,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const c=new mr(s,i,{type:_r});c.texture.name="UnrealBloomPass.v"+h,c.texture.generateMipmaps=!1,this.renderTargetsVertical.push(c),s=Math.round(s/2),i=Math.round(i/2)}const l=wi;this.highPassUniforms=Yr.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ao({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const p=[3,5,7,9,11];s=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);for(let h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(p[h])),this.separableBlurMaterials[h].uniforms.invSize.value=new kt(1/s,1/i),s=Math.round(s/2),i=Math.round(i/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const _=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=_,this.bloomTintColors=[new de(1,1,1),new de(1,1,1),new de(1,1,1),new de(1,1,1),new de(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const T=pn;this.copyUniforms=Yr.clone(T.uniforms),this.blendMaterial=new ao({uniforms:this.copyUniforms,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,blending:Wt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ct,this.oldClearAlpha=1,this.basic=new Et,this.fsQuad=new dn(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let t=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new kt(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,r,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const i=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let p=0;p<this.nMips;p++)this.fsQuad.material=this.separableBlurMaterials[p],this.separableBlurMaterials[p].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[p].uniforms.direction.value=mo.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[p]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[p].uniforms.colorTexture.value=this.renderTargetsHorizontal[p].texture,this.separableBlurMaterials[p].uniforms.direction.value=mo.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[p]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[p];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=i}getSeparableBlurMaterial(e){const r=[];for(let t=0;t<e;t++)r.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new ao({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new kt(.5,.5)},direction:{value:new kt(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new ao({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}mo.BlurDirectionX=new kt(1,0);mo.BlurDirectionY=new kt(0,1);class vi extends In{constructor(e,r={}){const t=r.font;if(t===void 0)super();else{const o=t.generateShapes(e,r.size);r.depth===void 0&&(r.depth=50),r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),super(o,r)}this.type="TextGeometry"}}function yi(n,e,r,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=r,i=8,l=24,p=.075;let _,T=[],h=[],f=[],c=[];const w=(g,re,ee,ne)=>{const S=new Mo(g,g,g),De=new Uo(S),Q=[new Dt({color:16711680,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:65280,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:255,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:65535,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:16711935,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:16776960,transparent:!0,opacity:ne.opacity,blending:Wt})],A=new _t,Pe=De.getAttribute("position").array,oe=[];for(let v=0;v<Pe.length/3;v+=2)oe.push(v,v+1);const m=Array(6).fill(null).map(()=>new To),z=Array(6).fill(null).map(()=>[]);for(let v=0;v<oe.length/2;v++){const B=v%6;z[B].push(oe[v*2],oe[v*2+1])}return m.forEach((v,B)=>{v.setIndex(z[B]),v.setAttribute("position",De.getAttribute("position"));const ie=new Gt(v,Q[B]);A.add(ie)}),A.position.z=re,A.rotation.z=ee,A};return(()=>{const ee=.9/(l-1);for(let oe=0;oe<l;oe++)h[oe]=new Dt({transparent:!0,opacity:1-oe*ee});if(_=new _t,!_){console.error("introGroup failed to initialize");return}for(let oe=0;oe<l;oe++){const m=o-oe*i,z=w(m,0,0,h[oe]),v=z.children.map(B=>B.material);c.push(v.map(B=>({material:B,originalColor:B.color.clone()}))),_.add(z)}_.position.z=s,e.add(_),T.push(_),f=h.map(oe=>oe.opacity);const ne=Ve.timeline({repeat:-1});ne.to(_.rotation,{x:Ue.degToRad(360),duration:12,ease:"none"},0),ne.to(_.rotation,{y:Ue.degToRad(360),duration:10,ease:"none"},0),ne.to(_.rotation,{z:Ue.degToRad(360),duration:14,ease:"none"},0);let S=-1,De=0;const Q=p*1e3,A=l*Q,Pe=oe=>{const m=oe%A/Q,z=Math.floor(m)%l;S!==-1&&oe-De>=Q&&(c[S].forEach(ie=>{ie.material.opacity=f[S],ie.material.color.copy(ie.originalColor)}),S=-1),S===-1&&z!==S&&(S=z,De=oe,c[S].forEach(B=>{B.material.opacity=1,B.material.color.set(1,1,1)})),requestAnimationFrame(Pe)};requestAnimationFrame(Pe)})(),{introCubes:T}}class xi extends Dn{constructor(e){super(e)}load(e,r,t,o){const s=this,i=new An(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(l){const p=s.parse(JSON.parse(l));r&&r(p)},t,o)}parse(e){return new bi(e)}}class bi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,r=100){const t=[],o=Ti(e,r,this.data);for(let s=0,i=o.length;s<i;s++)t.push(...o[s].toShapes());return t}}function Ti(n,e,r){const t=Array.from(n),o=e/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,i=[];let l=0,p=0;for(let _=0;_<t.length;_++){const T=t[_];if(T===`
`)l=0,p-=s;else{const h=Ci(T,o,l,p,r);l+=h.offsetX,i.push(h.path)}}return i}function Ci(n,e,r,t,o){const s=o.glyphs[n]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+o.familyName+".");return}const i=new Rn;let l,p,_,T,h,f,c,w;if(s.o){const E=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let g=0,re=E.length;g<re;)switch(E[g++]){case"m":l=E[g++]*e+r,p=E[g++]*e+t,i.moveTo(l,p);break;case"l":l=E[g++]*e+r,p=E[g++]*e+t,i.lineTo(l,p);break;case"q":_=E[g++]*e+r,T=E[g++]*e+t,h=E[g++]*e+r,f=E[g++]*e+t,i.quadraticCurveTo(h,f,_,T);break;case"b":_=E[g++]*e+r,T=E[g++]*e+t,h=E[g++]*e+r,f=E[g++]*e+t,c=E[g++]*e+r,w=E[g++]*e+t,i.bezierCurveTo(h,f,c,w,_,T);break}}return{offsetX:s.ha*e,path:i}}function Pi(n,e,r,t,o,s,i){const l=Hs(),{CUBE_SIZE:p,CUBE_SPACING:_,FIRST_CUBE_Z:T}=e,h=T-(r.length+1)*_,f=65535,c=16711935,w=16711680,E=Ue.degToRad(15),g=1e3,re=.5,ee=80,ne=1,S=15,De=.1,Q=l.isMobile?1:.5,A=40,Pe=.125,oe=100,m=5,z=l.isMobile?1.5:2,v=l.isMobile?2:2.5;let B=[];B.length=0;let ie=null,Se=null,Be=!1,V=!1,L=new ps,C=new kt,a=null,y=null,U=null,H=!1,ae=null;const xe=new Map,be=new Map,Me=new Map,Xe=(b,P,K,I,G,N)=>{const X=new _t;X.position.z=K,X.rotation.z=I,X.userData.isActive=!1;const q=new Mo(P,P,P),fe=new Uo(q),D=new Dt({color:new Ct(f),transparent:!0,opacity:0}),j=new Gt(fe,D);j.geometry.computeBoundingSphere(),X.add(j);let le="right";const M=P/2,je=()=>{const J=new ds(40,24),ce=new Uo(J),$=new Dt({color:new Ct(f),transparent:!0,opacity:0,visible:!0}),se=new Gt(ce,$);se.userData.isPortal=!0,se.userData.isAnimating=!1,se.geometry.computeBoundingSphere();const ge=new ro(60,60),Re=new Et({visible:!1,side:Qt}),me=new Ye(ge,Re);me.userData.isPortalHitbox=!0,me.userData.portal=se,me.geometry.computeBoundingSphere();const k=new _t,$e=new ro(ne,S),O=65/2;for(let he=0;he<ee;he++){const dt=new Et({color:new Ct(c),transparent:!0,opacity:0,visible:!1,side:Qt}),nt=new Ye($e,dt),Ke=he/ee*Math.PI*2;nt.position.set(Math.cos(Ke)*O,Math.sin(Ke)*O,0),nt.rotation.z=Ke+Math.PI/2,nt.userData.baseOpacity=.01,nt.userData.index=he,nt.geometry.computeBoundingSphere(),k.add(nt)}const x=2,Z=25;for(let he=1;he<Z;he++){const dt=new ds(40,24),nt=new Uo(dt),Ke=Ue.lerp(1,.1,he/(Z-1)),it=new Dt({color:new Ct(f),transparent:!0,opacity:0}),et=new Gt(nt,it);et.userData.isPortal=!0,et.userData.maxOpacity=Ke,et.position.z=-he*x,et.geometry.computeBoundingSphere(),se.add(et)}se.userData.maxOpacity=1;const d=new _t,Y=new ro(12,1),F=new Et({color:16777215,transparent:!0,opacity:0,side:Qt}),te=new Ye(Y,F);te.rotation.z=Math.PI/4;const tt=new Ye(Y,F);tt.rotation.z=-Math.PI/4,d.add(te,tt);const Ce=new ro(30,30),qe=new Et({opacity:0,transparent:!0,side:Qt,visible:!0}),ot=new Ye(Ce,qe);ot.userData.isCloseHitbox=!0,ot.geometry.computeBoundingSphere(),ot.renderOrder=2,d.add(ot);const ke=42,Ee=42,ue=-10;d.visible=!1;let Je;switch(le){case"left":se.position.set(-M,0,0),se.rotation.y=Math.PI/2,me.position.set(-M,0,0),me.rotation.y=Math.PI/2,I>=Ue.degToRad(120)?(d.position.set(-M+ue,-42,ke),Je=new de(-M+ue,-42,ke)):(d.position.set(-M+ue,Ee,-42),Je=new de(-M+ue,Ee,-42)),d.rotation.y=Math.PI/2,k.children.forEach(he=>he.position.x+=De);break;case"top":se.position.set(0,-M,0),se.rotation.x=-Math.PI/2,me.position.set(0,-M,0),me.rotation.x=Math.PI/2,I>=Ue.degToRad(100)?I>=Ue.degToRad(180)?(d.position.set(-42,-M+ue,-42),Je=new de(-42,-M+ue,-42)):(d.position.set(Ee,-M+ue,ke),Je=new de(Ee,-M+ue,ke)):(d.position.set(Ee,-M+ue,ke),Je=new de(Ee,-M+ue,ke)),d.rotation.x=-Math.PI/2,k.children.forEach(he=>he.position.y+=De);break;case"right":se.position.set(M,0,0),se.rotation.y=-Math.PI/2,me.position.set(M,0,0),me.rotation.y=-Math.PI/2,I>=Ue.degToRad(120)?(d.position.set(M+ue,-42,-42),Je=new de(M+ue,-42,-42)):(d.position.set(M+ue,Ee,ke),Je=new de(M+ue,Ee,ke)),d.rotation.y=-Math.PI/2,k.children.forEach(he=>he.position.x+=De);break;case"bottom":se.position.set(0,M,0),se.rotation.x=Math.PI/2,me.position.set(0,M,0),me.rotation.x=Math.PI/2,I>=Ue.degToRad(100)?(d.position.set(ke,M-ue,-42),Je=new de(ke,M-ue,-42)):(d.position.set(Ee,M-ue,-42),Je=new de(Ee,M-ue,-42)),d.rotation.x=Math.PI/2,k.children.forEach(he=>he.position.y+=De);break}X.userData.initialCloseGroupPosition=Je,d.updateMatrixWorld(!0),se.add(k),X.add(se),X.add(me),X.add(d),X.userData.closeButton=d,se.updateMatrixWorld(!0),k.updateMatrixWorld(!0),d.updateMatrixWorld(!0),xe.set(X,[]),be.set(X,0),Me.set(X,0)},He=Te=>{(Te instanceof Gt||Te instanceof Ye)&&Te.geometry&&Te.geometry.computeBoundingSphere(),X.add(Te)};if(G&&s.showKeyarts){switch(["left","top","right","bottom"].includes(N)?N:"left"){case"left":le="right";break;case"top":le="bottom";break;case"right":le="left";break;case"bottom":le="top";break}const Ze=i.get(G);if(Ze){const J=new ro(P-1,P-1),ce=new Et({map:Ze,transparent:!0,opacity:0,blending:Wt,side:Qt}),$=new Ye(J,ce);switch($.userData.isLoaded=!0,N){case"left":$.position.set(-M,0,0),I>=Ue.degToRad(120)?($.rotation.y=Math.PI/2,$.rotation.z=-Math.PI):$.rotation.y=Math.PI/2;break;case"top":$.position.set(0,-M,0),$.rotation.x=-Math.PI/2,$.rotation.z=-Math.PI/2;break;case"right":$.position.set(M,0,0),I>=Ue.degToRad(120)?($.rotation.y=-Math.PI/2,$.rotation.z=-Math.PI):$.rotation.y=-Math.PI/2;break;case"bottom":$.position.set(0,M,0),I>=Ue.degToRad(180)?I>=Ue.degToRad(220)?($.rotation.x=Math.PI/2,$.rotation.z=Math.PI/2):($.rotation.x=-Math.PI/2,$.rotation.z=Math.PI/2):($.rotation.x=Math.PI/2,$.rotation.z=-Math.PI/2);break}$.geometry.computeBoundingSphere(),He($),je()}else console.warn(`Keyart texture not preloaded for ${b.title}: ${G}`),je()}else je();X.userData.portalLocation=le;{const Te=(Re,me,k,$e)=>{const O=new ro(P-1,P-1),x={map:Re,transparent:!0,opacity:0,blending:Wt,side:Qt,depthWrite:!1};$e&&(x.color=$e);const Z=new Et(x),d=new Ye(O,Z);d.position.copy(me),k.x&&(d.rotation.x=k.x),k.y&&(d.rotation.y=k.y),d.userData.isGridPlane=!0,d.geometry.computeBoundingSphere(),He(d)},Ze=i.get(t),J=i.get(o),ce=["left","top","right","bottom"],se=[G&&s.showKeyarts?N||"left":null,le].filter(Boolean),ge=ce.filter(Re=>!se.includes(Re));if(Ze)switch(Te(Ze,new de(0,0,-P/2-1),{y:0}),Te(Ze,new de(0,0,P/2+1),{y:0},new Ct(16744448)),ge[0]){case"left":Te(Ze,new de(-M,0,0),{y:-Math.PI/2},new Ct(255));break;case"top":Te(Ze,new de(0,M,0),{x:Math.PI/2},new Ct(255));break;case"right":Te(Ze,new de(M,0,0),{y:Math.PI/2},new Ct(255));break;case"bottom":Te(Ze,new de(0,-M,0),{x:-Math.PI/2},new Ct(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(J)switch(ge[1]){case"left":Te(J,new de(-M,0,0),{y:-Math.PI/2});break;case"top":Te(J,new de(0,M,0),{x:Math.PI/2});break;case"right":Te(J,new de(M,0,0),{y:Math.PI/2});break;case"bottom":Te(J,new de(0,-M,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}X.children.forEach(Te=>{Te.updateMatrixWorld(!0),Te instanceof _t&&Te.children.forEach(Ze=>{Ze.updateMatrixWorld(!0)})}),X.updateMatrixWorld(!0);const yt=new Ns().setFromObject(X),ut=new Fs;return yt.getBoundingSphere(ut),X.boundingSphere=ut,X},Ae=new kn,Oe=(b,P,K,I,G,N)=>{const X=new vi(b,{font:N,size:G,depth:0,curveSegments:12,bevelEnabled:!1});X.computeBoundingBox(),X.center();const q=new Et({color:16777215,transparent:!0,opacity:0,side:Qt}),fe=new Ye(X,q);fe.position.set(P,K,I);const D=X.boundingBox,j=D.max.x-D.min.x,le=D.max.y-D.min.y,M=j+8,je=le+4,He=new ro(M,je),yt=new Et({color:0,transparent:!0,opacity:0,side:Qt}),ut=new Ye(He,yt);return ut.position.set(P,K,I-1),n.add(ut),n.add(fe),fe.userData.backgroundPlane=ut,fe},Le=()=>new Promise(b=>{ie=new xi,ie.load("/fonts/Poppins_Regular.json",P=>{Se=P;const K=Array.isArray(r)?r:[];Array.isArray(r)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",r),K.forEach((I,G)=>{const N=T-(G+1)*_,X=(G+1)*E,q=Xe(I,p,N,X,I.keyart,I.keyartLocation);n.add(q),B.push(q),Oe(I.title,0,I.size-15,T+90-(G+1)*_,I.size,P)}),b()},void 0,P=>console.error("Error loading font:",P))}),Ie=()=>Be?Promise.resolve({projectCubes:B,updateCubeColors:u,loadedFont:Se,maxZ:h}):Le().then(()=>(Be=!0,{projectCubes:B,updateCubeColors:u,loadedFont:Se,maxZ:h})).catch(b=>{throw console.error("Error in loadFontAndText:",b),b}),W=b=>{if(b.userData.isAnimating)return;b.userData.isAnimating=!0;const P=b.children.find(X=>X instanceof _t);if(!P)return;const K=P.children,I=K.length,G=Ve.timeline({repeat:-1,defaults:{ease:"none"}}),N={value:0};G.to(N,{value:1,duration:1.5,onUpdate:()=>{K.forEach(q=>{const fe=q.material;if(fe.visible){const D=(q.userData.index/I+N.value)%1,le=(Math.sin(D*Math.PI*2)+1)/2;fe.opacity=.01+(1-.01)*Math.pow(le,4)}})}}),b.userData.animationTimeline=G},pe=b=>{if(!b.userData.isAnimating)return;b.userData.isAnimating=!1;const P=b.children.find(K=>K instanceof _t);P&&(b.userData.animationTimeline&&(b.userData.animationTimeline.kill(),delete b.userData.animationTimeline),P.children.forEach(K=>{const I=K.material;I.opacity=0}))},Ge=(b,P)=>{let K;const I=(Me.get(b)||0)+1;Me.set(b,I),I%m===0?K=new On(z,v,6,1):K=new Mo(Q,Q,Q);const G=new Et({color:16777215}),N=new Ye(K,G);N.position.set(0,0,0);const X=P.position.clone(),q=X.clone().normalize(),fe=X.length()+oe;if(I%m===0){const j=N.position.clone().add(q);N.lookAt(j),N.rotateX(Math.PI/2)}b.add(N);const D=xe.get(b)||[];D.push({mesh:N,direction:q,distanceTraveled:0,totalDistance:fe}),xe.set(b,D)},Fe=b=>{(xe.get(b)||[]).forEach(K=>{b.remove(K.mesh),K.mesh.geometry.dispose(),K.mesh.material.dispose()}),xe.set(b,[])},u=b=>{Ae.setFromProjectionMatrix(b.projectionMatrix.clone().multiply(b.matrixWorldInverse));const P=b.position.z;let K=[];n.traverse(I=>{var G;return I instanceof Ye&&((G=I.geometry)==null?void 0:G.type)==="TextGeometry"&&K.push(I)}),V||(V=!0),B.forEach((I,G)=>{const N=I.boundingSphere;if(N){const D=N.clone();if(D.radius*=1.5,!Ae.intersectsSphere(D))return}else console.warn(`Cube ${G} has no boundingSphere`);const X=I.position.z,q=Math.abs(P-X+90);let fe=0;q<=g&&(fe=1-q/g),I.userData.isActive=fe>=re,I.children.forEach(D=>{if(D instanceof Gt&&!D.userData.isPortal&&!D.userData.isPortalHitbox){const j=D.material;if(q<=g){const le=Ue.lerp((f>>16&255)/255,(c>>16&255)/255,fe),M=Ue.lerp((f>>8&255)/255,(c>>8&255)/255,fe),je=Ue.lerp((f&255)/255,(c&255)/255,fe);j.color.set(le,M,je),j.opacity=Math.min(1,fe*2)}else j.opacity=0}else if(D instanceof Gt&&D.userData.isPortal)V&&(fe>.1?D.children.forEach(j=>{j instanceof _t&&j.children.forEach(le=>{le instanceof Ye&&(le.material.visible=!0,!D.userData.animationStarted&&s.showPortalPulses&&(W(D),D.userData.animationStarted=!0))})}):fe<=.1&&D.userData.animationStarted&&(D.children.forEach(j=>{j instanceof _t&&j.children.forEach(le=>{le instanceof Ye&&(le.material.visible=!1)})}),pe(D),delete D.userData.animationStarted));else if(D instanceof Ye&&!D.userData.isPortalHitbox&&!D.userData.isCloseHitbox){const j=D.material;if(D.userData.isLoaded||D.userData.isGridPlane)if(q<=g){const le=1-q/g;j.opacity=Math.min(.8,le*2)}else j.opacity=0}else if(D instanceof _t&&D.userData.closeButton){const j=Math.abs(P-D.position.z);D.children.forEach(le=>{if(le instanceof Ye&&!le.userData.isCloseHitbox){const M=le.material;if(j<=g){const je=1-j/g;M.opacity=Math.min(1,je*2)}else M.opacity=0}})}})}),K.forEach(I=>{if(!Ae.intersectsObject(I))return;const G=I.material,N=I.userData.backgroundPlane,X=N==null?void 0:N.material,q=I.position.z,fe=Math.abs(P-q+120);if(fe<=g){const D=1-fe/g,j=Math.min(1,D*2);G.opacity=j,X&&(X.opacity=j*.8)}else G.opacity=0,X&&(X.opacity=0)})};return{getInitializedData:Ie,updateCubeColors:u,setupInteractivity:(b,P,K)=>{ae=K;let I=null,G=null,N=null,X=!1,q=!1,fe=!1,D=!1;const j=ce=>{H&&(I=ce.touches[0].clientY,G=G??window.scrollY,X=!0)},le=ce=>{if(!H||!N||!I)return;const se=ce.touches[0].clientY-I;se<-20&&!q?(He(),I=null):se>20&&(ce.preventDefault(),window.scrollTo(0,G),Ve.to(window,{scrollTo:{y:G},duration:0}))},M=()=>{I=null,X=!1,fe=!0,Ve.delayedCall(.5,()=>{fe=!1})},je=ce=>{if(X||q||fe){ce.preventDefault(),ce.stopPropagation(),G!==null&&(window.scrollTo(0,G),Ve.to(window,{scrollTo:{y:G},duration:0}));return}if(!H||!N||!y||!U)return;let $=0;if(ce instanceof WheelEvent?$=ce.deltaY:$=window.scrollY-(G||0),ce.preventDefault(),ce.stopPropagation(),$>0){window.scrollTo(0,G);return}$<0&&He()},He=()=>{const ce=N,$=U?U.clone():new de(0,0,h),se=(y==null?void 0:y.z)??b.position.z,ge=ce==null?void 0:ce.parent;D=!0,Ve.to(b.position,{x:(y==null?void 0:y.x)??b.position.x,y:(y==null?void 0:y.y)??b.position.y,z:se,duration:1,ease:"power3.out",overwrite:"auto",onUpdate:()=>{b.lookAt($)},onComplete:()=>{if(b.lookAt($),H=!1,N=null,document.body.classList.remove("no-scrollbar"),ae&&ae(!1),ce&&yt(ce,!1),ge!=null&&ge.userData.closeButton){const Re=ge.userData.closeButton.children.filter(me=>me instanceof Ye).map(me=>me.material);Ve.to(Re,{opacity:0,duration:.5,onUpdate:()=>{ge.userData.closeButton.visible=!1},onComplete:()=>{ge.userData.closeButton.updateMatrixWorld(!0),ge.userData.standaloneDebugPlane&&(ge.userData.standaloneDebugPlane.visible=!1,ge.userData.standaloneDebugPlane.userData.locked=!1,ge.userData.standaloneDebugPlane.updateMatrixWorld(!0),console.log("Standalone debug plane hidden on exit, position unchanged:",ge.userData.standaloneDebugPlane.getWorldPosition(new de))),ge.userData.lockedPosition=null}})}G=null,y=null,U=null,b.userData.lockedLookAt=null,D=!1,B.forEach(Re=>{Math.abs(b.position.z-Re.position.z+90)<=g&&be.set(Re,0)})}})},yt=(ce,$=!0)=>{const se=[ce,...ce.children.filter(Re=>Re instanceof Gt&&Re.userData.isPortal)],ge=$?25:2;se.forEach((Re,me)=>{let k=-me*ge;(ce.position.y>0&&ce.rotation.x===-Math.PI/2||ce.position.y<0&&ce.rotation.x===Math.PI/2)&&(k=me*ge);const $e=$?Re.userData.maxOpacity:0;Ve.to(Re.position,{z:k,duration:1,ease:"power3.out",delay:.5}),Ve.to(Re.material,{opacity:$e,duration:1,ease:"power3.out",delay:.5})})},ut=ce=>{C.x=ce.clientX/window.innerWidth*2-1,C.y=-(ce.clientY/window.innerHeight)*2+1,L.setFromCamera(C,b),b.userData.lockedLookAt&&(b.lookAt(b.userData.lockedLookAt),b.updateMatrixWorld(!0)),B.forEach(k=>{k.userData.lockedPosition&&(k.position.equals(k.userData.lockedPosition)||k.position.copy(k.userData.lockedPosition)),k.updateMatrixWorld(!0),k.children.forEach($e=>$e.updateMatrixWorld(!0))});const $=B.flatMap(k=>{const $e=[];return k.userData.isActive&&k.children.forEach(O=>{O instanceof Ye&&O.userData.isPortalHitbox&&$e.push(O)}),H&&N&&k===N.parent&&k.children.forEach(O=>{O instanceof _t&&O===k.userData.closeButton&&O.children.forEach(x=>{x instanceof Ye&&x.userData.isCloseHitbox&&$e.push(x)})}),$e}),se=L.intersectObjects($),ge=new ps,Re=new de(0,0,-1e3),me=new de(100.21107012893698,70.33307489093076,-958).sub(Re).normalize();if(ge.set(Re,me),se.length>0){const k=se[0].object;if(k.userData.isPortalHitbox){const $e=k.userData.portal;if(a!==$e){if(a){const x=a.material;Ve.to(x.color,{r:(f>>16&255)/255,g:(f>>8&255)/255,b:(f&255)/255,duration:.5})}a=$e;const O=a.material;Ve.to(O.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5})}P.style.cursor="pointer"}else k.userData.isCloseHitbox?P.style.cursor="pointer":P.style.cursor="auto"}else{if(a){const k=a.material;Ve.to(k.color,{r:(f>>16&255)/255,g:(f>>8&255)/255,b:(f&255)/255,duration:.5}),a=null}P.style.cursor="auto"}},Te=ce=>{if(D)return;C.x=ce.clientX/window.innerWidth*2-1,C.y=-(ce.clientY/window.innerHeight)*2+1,L.setFromCamera(C,b);const $=B.flatMap(x=>{const Z=[];return H&&N&&x===N.parent&&x.children.forEach(d=>{d instanceof _t&&d===x.userData.closeButton&&d.children.forEach(Y=>{Y instanceof Ye&&Y.userData.isCloseHitbox&&Z.push(Y)})}),Z}),se=B.flatMap(x=>x.userData.isActive?x.children.filter(Z=>Z instanceof Ye&&Z.userData.isPortalHitbox):[]);let ge=L.intersectObjects($);for(const x of ge)if(x.object.userData.isCloseHitbox){He();return}if(ge=L.intersectObjects(se),ge.length===0)return;const Re=ge[0].object,me=Re.userData.portal,k=Re.parent,$e=B.indexOf(k),O=r[$e];if(H&&me===N){let x=new de;const Z=e.CUBE_SIZE/2;me.position.x===Z?x.set(-1,0,0):me.position.x===-Z?x.set(1,0,0):me.position.y===Z?x.set(0,-1,0):me.position.y===-Z&&x.set(0,1,0),x.applyQuaternion(k.getWorldQuaternion(new Bn)).normalize();const Y=b.position.clone().clone().add(x.clone().multiplyScalar(-675)),F=x.clone().multiplyScalar(-1e3),te=Y.clone().add(F);D=!0,Ve.to(b.position,{x:Y.x,y:Y.y,z:Y.z,duration:1,ease:"power2.in",onUpdate:()=>b.lookAt(te),onComplete:()=>{O!=null&&O.slug&&(l.setScrollPosition(window.scrollY),gn.visit(route("project.show",{project:O.slug}),{preserveScroll:!1})),D=!1}})}else if(!H){y||(y=b.position.clone(),U=new de(0,0,h)),ae&&K(!0,y,U);const x=me.getWorldPosition(new de);q=!0,D=!0,G=window.scrollY,Ve.to(b.position,{x:0,y:0,z:k.getWorldPosition(new de).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{H=!0,N=me,document.body.classList.add("no-scrollbar"),yt(me,!0),k.userData.lockedPosition=k.position.clone(),Fe(k)},onComplete:()=>{if(k.userData.closeButton){k.userData.initialCloseGroupPosition&&k.userData.closeButton.position.copy(k.userData.initialCloseGroupPosition),k.userData.closeButton.visible=!0,k.userData.closeButton.updateMatrixWorld(!0),k.updateMatrixWorld(!0),k.userData.closeButton.updateMatrixWorld(!0);const Z=k.userData.closeButton.children.filter(d=>d instanceof Ye&&!d.userData.isCloseHitbox).map(d=>d.material);Z.length>0&&Ve.to(Z,{opacity:1,duration:.5,onComplete:()=>{k.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),Ve.to({},{duration:2,ease:"power3.out",overwrite:"all",onUpdate:function(){const Z=this.progress(),d=b.getWorldDirection(new de).multiplyScalar(1e3).add(b.position),Y=Ue.lerp(d.x,x.x,Z),F=Ue.lerp(d.y,x.y,Z),te=Ue.lerp(d.z,x.z,Z);b.lookAt(Y,F,te)},onComplete:()=>{b.lookAt(x.x,x.y,x.z),b.updateMatrixWorld(!0),q=!1,D=!1,b.userData.lockedLookAt=x.clone()}})}};P.addEventListener("mousemove",ut),P.addEventListener("click",Te),P.addEventListener("touchstart",j,{passive:!0}),P.addEventListener("touchmove",le,{passive:!1}),P.addEventListener("touchend",M,{passive:!0}),window.addEventListener("wheel",je,{passive:!1}),window.addEventListener("scroll",je,{passive:!1});const Ze=()=>{xe.forEach((ce,$)=>{ce.forEach(se=>{$.remove(se.mesh),se.mesh.geometry.dispose(),se.mesh.material.dispose()})}),xe.clear(),be.clear(),Me.clear()},J=()=>{P.removeEventListener("mousemove",ut),P.removeEventListener("click",Te),P.removeEventListener("touchstart",j),P.removeEventListener("touchmove",le),P.removeEventListener("touchend",M),window.removeEventListener("wheel",je),window.removeEventListener("scroll",je)};return()=>{J(),Ze()}},updateClickHereParticles:(b,P)=>{const K=performance.now()/1e3,I=b.position.z;B.forEach(G=>{const N=G.position.z;if(Math.abs(I-N+90)<=g&&!H){const q=be.get(G)||0;if(K-q>=Pe){const j=G.children.find(le=>le instanceof Gt&&le.userData.isPortal);j&&(Ge(G,j),be.set(G,K))}const D=(xe.get(G)||[]).filter(j=>(j.distanceTraveled+=A*P,j.mesh.position.copy(j.direction.clone().multiplyScalar(j.distanceTraveled)),j.distanceTraveled>=j.totalDistance?(G.remove(j.mesh),j.mesh.geometry.dispose(),j.mesh.material.dispose(),!1):!0));xe.set(G,D)}else Fe(G)})}}}function Si(n,e,r,t){const S=r-1e3,De=Math.abs(-500-S),Q=Math.ceil(De/100),A=()=>{const C=new _t;let a=null,y=null;const U=[],H=[],ae=[],xe=[],be=[];{const Me=new Mo(100,100,100),Xe=new Uo(Me),Ae=32*Q,Oe=new Ln;Oe.copy(Xe),Oe.instanceCount=Ae;const Le=new Dt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),Ie=new Float32Array(Ae*3),W=new Float32Array(Ae*3),pe=new Float32Array(Ae*3),Ge=32*100,Fe=-3200/2+100/2,u=-500;for(let le=0;le<32;le++){const M=Pe(le);for(let je=0;je<Q;je++){const He=le*Q+je,yt=Fe+le*100,ut=u-je*100,Te=Ue.randFloat(100,300),Ze=Te/100,J=-600+Te/2;Ie[He*3]=yt,Ie[He*3+1]=J,Ie[He*3+2]=ut,W[He*3]=1,W[He*3+1]=Ze,W[He*3+2]=1,pe[He*3]=M,pe[He*3+1]=M,pe[He*3+2]=M}}Oe.setAttribute("instancePosition",new Rr(Ie,3)),Oe.setAttribute("instanceScale",new Rr(W,3)),Oe.setAttribute("color",new Rr(pe,3)),Le.onBeforeCompile=le=>{le.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${le.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new Gt(Oe,Le);const ze=-3200/2,Qe=Ge/2,b=-600,P=-300,K=S,I=-500;Oe.boundingBox=new Ns(new de(ze,b,K),new de(Qe,P,I));const G=(ze+Qe)/2,N=(b+P)/2,X=(K+I)/2,q=Qe-ze,fe=P-b,D=I-K,j=Math.sqrt(q*q+fe*fe+D*D)/2;Oe.boundingSphere=new Fs(new de(G,N,X),j),C.add(a)}{y=new _t;const Me=32*100/5,Xe=-3200/2;for(let Oe=0;Oe<6;Oe++){let Ie=Xe+Oe*Me,W=-500;const pe=[new de(Ie,-450,W)];let Ge=0;for(;W>S;){const Fe=W===-500?Ue.randFloat(300,800):Math.min(Ue.randFloat(300,800),Math.abs(W-S));if(W-=Fe,pe.push(new de(Ie,-450,W)),Ge+=Fe,W<=S){pe[pe.length-1].z=S;break}const u=Math.random()<.5?-1:1,ze=Ue.randFloat(100,300);Ie+=u*ze,pe.push(new de(Ie,-450,W)),Ge+=ze}H.push({points:pe,totalLength:Ge})}const Ae=new Mo(4,4,4);for(let Oe=0;Oe<6;Oe++){const Le=H[Oe],Ie=Le.totalLength,W=Ie/60;for(let pe=0;pe<60;pe++){const Ge=new Et({color:16711680,fog:!0}),Fe=new Ye(Ae,Ge),u=pe*W;let ze=u;for(let Qe=0;Qe<Le.points.length-1;Qe++){const b=Le.points[Qe],P=Le.points[Qe+1],K=b.distanceTo(P);if(ze<=K){const I=ze/K;Fe.position.lerpVectors(b,P,I);break}ze-=K}U.push(Fe),ae.push(u),xe.push(Oe),be.push(1),y.add(Fe)}for(let pe=0;pe<60;pe++){const Ge=new Et({color:16777215,fog:!0}),Fe=new Ye(Ae,Ge),u=Ie-(pe*W+W/2);let ze=Ie-u;const Qe=[...Le.points].reverse();for(let b=0;b<Qe.length-1;b++){const P=Qe[b],K=Qe[b+1],I=P.distanceTo(K);if(ze<=I){const G=ze/I;Fe.position.lerpVectors(P,K,G);break}ze-=I}U.push(Fe),ae.push(u),xe.push(Oe),be.push(-1),y.add(Fe)}}e.add(y)}return e.add(C),{cityGroup:C,instancedLines:a,particleGroup:y,particles:U,paths:H,particleDistances:ae,particlePaths:xe,particleDirections:be}},Pe=C=>{if(C<10)return .05+C*.10555555555555556;if(C>=22){const a=31-C,y=(1-.05)/9;return .05+a*y}return 1},{cityGroup:oe,instancedLines:m,particleGroup:z,particles:v,paths:B,particleDistances:ie,particlePaths:Se,particleDirections:Be}=A();return{cityGroup:oe,buildingLines:m?[m]:[],updateParticles:C=>{const a=100*C;for(let y=0;y<v.length;y++){const U=Be[y],H=Se[y],ae=B[H],xe=ae.totalLength;ie[y]+=a*U,U===1?(ie[y]=ie[y]%xe,ie[y]<0&&(ie[y]+=xe)):ie[y]=(ie[y]+xe)%xe;const be=ie[y],Me=U===1?ae.points:[...ae.points].reverse();let Xe=U===1?be:xe-be;for(let Ae=0;Ae<Me.length-1;Ae++){const Oe=Me[Ae],Le=Me[Ae+1],Ie=Oe.distanceTo(Le);if(Xe<=Ie){const W=Xe/Ie;v[y].position.lerpVectors(Oe,Le,W);break}Xe-=Ie}}},dispose:()=>{m&&(oe.remove(m),m.geometry.dispose(),m.material.dispose()),z&&(e.remove(z),z.children.forEach(C=>{C.geometry.dispose(),C.material.dispose()})),e.remove(oe)}}}Ve.registerPlugin(_e);function Mi(n,e,r,t,o,s,i={},l,p){const{CUBE_SPACING:_,FIRST_CUBE_Z:T}=s,h=(t==null?void 0:t.length)||0,f=T-(h+1)*_;let c=!1;const w=Math.abs(f)+(h-1)*_;let E=Ve.timeline();return E=Ve.timeline({scrollTrigger:{trigger:r.value,start:"top top",end:`+=${w}`,scrub:i.scrub||.5,pin:!0,onUpdate:re=>{if(!c){const ee=re.progress,ne=Ue.lerp(0,f,ee);e.position.set(0,0,ne),e.lookAt(0,0,f)}o(e)}}}),E.fromTo(e.position,{z:0},{z:f,duration:1,ease:"none"},0),{setReverting:re=>{c=re},timeline:E}}function Ei(n,e,r){const l=r-1e3,p=1e3,_=r,T=150,h=-500,f=r,c=new To,w=new Float32Array(2e3*3),E=new Float32Array(2e3),g=new Float32Array(2e3);let re=0;for(;re<2e3;){const Q=(Math.random()-.5)*4e3,A=(Math.random()-.5)*4e3,Pe=-1e3+Math.random()*(l- -1e3),oe=Pe>_&&Math.abs(Q)<p&&Math.abs(A)<p,m=Math.abs(Q)<T&&Math.abs(A)<T&&Pe>f&&Pe<h;if(!oe&&!m){const z=re*3;w[z]=Q,w[z+1]=A,w[z+2]=Pe;const v=.1+Math.random()*(.7-.1);E[re]=v,g[re]=v,re++}}c.setAttribute("position",new hs(w,3)),c.setAttribute("opacity",new hs(g,1));const ee=new ao({uniforms:{color:{value:new Ct(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),ne=new Nn(c,ee);n.add(ne);const S=c.attributes.opacity;for(let Q=0;Q<2e3;Q++)Ve.to({opacity:E[Q]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){g[Q]=this.targets()[0].opacity,S.needsUpdate=!0}});return{dispose:()=>{Ve.killTweensOf(g),n.remove(ne),c.dispose(),ee.dispose()}}}function Ii(n,e){const t=e-1500,o=100,s=2,i=64,l=1e3,p=i*3,_=[4,4.5,5],T=6;let h,f,c,w,E,g;const re=[],ee=[[],[],[]],ne=[[],[],[]],S=[[],[],[]];let De=[0,0,0];const Q=()=>{const m=0-t,z=[];for(let C=0;C<o;C++){const a=C/(o-1),y=0-a*m,U=a*5*2*Math.PI,H=90*(.8+.2*Math.sin(U*2)),ae=new de(H*Math.cos(U),H*Math.sin(U),y);(isNaN(ae.x)||isNaN(ae.y)||isNaN(ae.z))&&console.error("NaN in chaserPath points",{t:a,z:y,projectMaxZ:e}),z.push(ae)}h=new kr(z);const v=new To().setFromPoints(h.getPoints(200));w=new Or(v,new Dt({color:16711935,linewidth:2,visible:!1})),n.add(w);const B=[];for(let C=0;C<o;C++){const a=C/(o-1),y=0-a*m,U=a*3*2*Math.PI,H=60*(.8+.2*Math.sin(U*4)),ae=new de(H*Math.cos(U),H*Math.sin(U),y);(isNaN(ae.x)||isNaN(ae.y)||isNaN(ae.z))&&console.error("NaN in chaserPath2 points",{t:a,z:y,projectMaxZ:e}),B.push(ae)}f=new kr(B);const ie=new To().setFromPoints(f.getPoints(200));E=new Or(ie,new Dt({color:65535,linewidth:2,visible:!1})),n.add(E);const Se=[];for(let C=0;C<o;C++){const a=C/(o-1),y=0-a*m,U=a*7*2*Math.PI,H=100,ae=90,xe=.1*Math.sin(U),be=new de(H*(1+xe)*Math.cos(U),ae*(1-xe)*Math.sin(U),y);(isNaN(be.x)||isNaN(be.y)||isNaN(be.z))&&console.error("NaN in chaserPath3 points",{t:a,z:y,projectMaxZ:e}),Se.push(be)}c=new kr(Se);const Be=new To().setFromPoints(c.getPoints(200));g=new Or(Be,new Dt({color:16776960,linewidth:2,visible:!1})),n.add(g);const V=[16711680,65280,255],L=new Mo(s,s,s);L.attributes.color&&delete L.attributes.color;for(let C=0;C<3;C++){const a=new _t;a.opacity=1,a.renderOrder=1,re[C]=a,n.add(a);for(let y=0;y<p;y++){const U=new Et({color:V[C],transparent:!0,opacity:0,blending:Fn,fog:!0,depthWrite:!1}),H=new Ye(L,U);H.renderOrder=1,H.visible=!1,a.add(H),ee[C][y]=H,ne[C][y]=0,S[C][y]=!1}}},A=m=>{const z=[h,f,c][m],v=z.getLength(),B=S[m].filter(Se=>Se).length;if(p-B>=i){let Se=0;for(let Be=0;Be<i;Be++){const V=S[m].findIndex(ae=>!ae);if(V===-1){console.warn(`No available chasers for path ${m}, emitted ${Se}/${i}`);break}const L=Se/(i-1),C=.05+(1-.05)*Math.pow(L,3),a=new Et({color:[16711680,65280,255][m],transparent:!0,opacity:C,blending:Wt,fog:!0,depthWrite:!1});ee[m][V].material=a,ee[m][V].visible=!0;const y=Se*T;ne[m][V]=y,S[m][V]=!0;const U=y/v,H=z.getPointAt(U);ee[m][V].position.copy(H),Se++}}},Pe=m=>{const z=performance.now()/1e3,v=[h,f,c];for(let B=0;B<3;B++){z-De[B]>=_[B]&&(A(B),De[B]=z);const ie=v[B],Se=ie.getLength(),Be=l*m;for(let V=0;V<p;V++)if(S[B][V]){ne[B][V]+=Be;const L=ne[B][V]/Se;if(L>=1)ee[B][V].visible=!1,S[B][V]=!1,ne[B][V]=0;else{const C=ie.getPointAt(L);ee[B][V].position.copy(C)}}}};return Q(),{chaserPath:h,chaserPath2:f,chaserPath3:c,updateChasers:Pe,dispose:()=>{n.remove(w),n.remove(E),n.remove(g),w.geometry.dispose(),w.material.dispose(),E.geometry.dispose(),E.material.dispose(),g.geometry.dispose(),g.material.dispose(),re.forEach(m=>{m.children.forEach(z=>{z.geometry.dispose(),z.material.dispose()}),n.remove(m)})}}}const Di={class:"preloader"},Ai={class:"progress-label"},Ri=es({__name:"Preloader",props:{progress:{}},setup(n){return(e,r)=>(Cr(),ts("div",Di,[io("div",Ai,mn(Math.round(e.progress))+"%",1)]))}}),ki=zs(Ri,[["__scopeId","data-v-e5eadefa"]]),Os=250,gr=500,Oo=-500,Gr=-520,Bs=-720,Ls=4e3,Oi=es({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(n){Ve.registerPlugin(_e);const e=Hs();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const r=n,t={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},o=_o(null),s=_o(null),i=_o(!1),l=_o(0),p=_o(!1),_=_o(!0),T=new Map;let h,f,c,w,E,g,re,ee=null,ne=null,S=null,De=null,Q=null,A=[],Pe=null,oe=null,m=0,z=null,v;const B=()=>{const L=o.value?o.value.getBoundingClientRect().width:window.innerWidth,C=window.innerHeight,a=e.isMobile?.75:1,y=e.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;c.setSize(L*a,C*a),c.setPixelRatio(y),w.setSize(L*a,C*a),f.aspect=L/C,f.updateProjectionMatrix(),c.domElement.style.width=`${L}px`,c.domElement.style.height=`${C}px`},ie=L=>T.has(L)?Promise.resolve(T.get(L)):new Promise((C,a)=>{new Wn().load(L,U=>{U.encoding=void 0,T.set(L,U),C(U)},void 0,U=>a(U))}),Se=async()=>{h=new zn,h.background=new Ct(0),h.fog=new Hn(0,700,Ls),f=new Un(75,window.innerWidth/window.innerHeight,1,Ls+6e3),f.position.set(0,0,0),f.lookAt(0,0,1e3),c=new Gn({antialias:!0}),e.isMobile?c.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):c.setPixelRatio(window.devicePixelRatio),c.toneMapping=Yn,c.toneMappingExposure=1,c.outputEncoding=void 0,w=new mi(c);const L=new _i(h,f);if(w.addPass(L),e.isMobile?E=new mo(new kt(window.innerWidth,window.innerHeight),1.3,.2,0):E=new mo(new kt(window.innerWidth,window.innerHeight),1.6,.2,0),E.renderToScreen=!0,w.addPass(E),o.value)o.value.appendChild(c.domElement),c.domElement.style.opacity="0";else return;g=new qo,g.dom.style.position="fixed",g.dom.style.top="0px",g.dom.style.left="0px",g.dom.style.zIndex="1000",document.body.appendChild(g.dom);const a=r.projects.filter(H=>H.keyart).length+2;let y=0;const U=()=>{y++,l.value=y/a*100,y===a&&(i.value=!0)};await ie(r.projectGridFile).then(()=>U()).catch(()=>U()),await ie(r.projectGridFile2).then(()=>U()).catch(()=>U());for(const H of r.projects)H.keyart?await ie(H.keyart).then(()=>U()).catch(()=>U()):U();z=Pi(h,{CUBE_SIZE:Os,CUBE_SPACING:gr,FIRST_CUBE_Z:Oo},r.projects,r.projectGridFile,r.projectGridFile2,t,T);try{const H=await z.getInitializedData();if(v=H.maxZ,v===void 0||isNaN(v))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:ae}=yi(h,h,{CUBE_SIZE:Os,FIRST_CUBE_Z:Oo},t);if(A=[...ae,...H.projectCubes],Pe=H.updateCubeColors,t.showCars){const{cityGroup:xe,updateParticles:be,dispose:Me}=Si(h,h,v,t);re=be,Q=Me}if(t.showStarfield){const{dispose:xe}=Ei(h,f,v);ee=xe}if(t.showChasers){const{dispose:xe,updateChasers:be}=Ii(h,v);S=xe,De=be}B()}catch(H){console.error("Error initializing project cubes:",H),v=Oo-(r.projects.length+1)*gr}},Be=(L=0)=>{if(oe=requestAnimationFrame(Be),c&&w){const C=(L-m)/1e3;m=L,re(C),De&&De(C),z!=null&&z.updateClickHereParticles&&z.updateClickHereParticles(f,C);const a=4e3,y=1e3,U=Math.abs(f.position.z-v);f.far=Math.max(a+y,U),f.updateProjectionMatrix();const H=Bs-Gr;let ae=0;f.position.z>=Gr?ae=0:f.position.z<=Bs?ae=1:ae=(f.position.z-Gr)/H,e.isMobile?E.strength=Ue.lerp(1.3,0,ae):E.strength=Ue.lerp(1.6,.125,ae),w.render()}g.update()};_n(()=>{Se().then(()=>{if(i.value){oe=requestAnimationFrame(Be);let L=null;const C=z.getInitializedData().then(({projectCubes:y})=>{y.forEach(H=>{H.userData.isActive=!0});const U=Oo-(r.projects.length-1)*gr;f.position.set(0,0,5e3),f.lookAt(0,0,U),f.updateProjectionMatrix(),Pe(f),w.render(),A.length&&Pe&&(L=Mi(h,f,s,A,Pe,{CUBE_SPACING:gr,FIRST_CUBE_Z:Oo},{scrub:e.isMobile?3:1}).setReverting),c&&ne===null&&(ne=z.setupInteractivity(f,c.domElement,H=>{L&&L(H)})),window.scrollTo({top:0,behavior:"auto"})}),a=()=>{C.then(()=>{_.value=!1,f.position.set(0,0,5e3),f.updateProjectionMatrix(),Ve.to(c.domElement,{opacity:1,duration:.5,ease:"power4.out"});const y={z:5e3};Ve.to(y,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{f.position.z=y.z,f.updateProjectionMatrix()},onComplete:()=>{f.position.z=0,p.value=!0}})})};Ve.delayedCall(.5,a)}}).catch(L=>{console.error("Initialization failed:",L)}),window.addEventListener("resize",V)}),wn(()=>{oe!==null&&cancelAnimationFrame(oe),ne&&ne(),window.removeEventListener("resize",V),_e.getAll().forEach(L=>L.kill()),c.dispose(),w.dispose(),h.clear(),document.body.removeChild(g.dom),ee&&ee(),S&&S(),Q&&Q()});const V=()=>{B(),_e.refresh()};return(L,C)=>(Cr(),ts("section",{ref_key:"wrapper",ref:s,class:"wrapper"},[Bo(vn,{name:"fade"},{default:yn(()=>[_.value?(Cr(),xn(ki,{key:0,progress:l.value},null,8,["progress"])):bn("",!0)]),_:1}),io("div",{ref_key:"tunnelWrapper",ref:o,class:"tunnel-wrapper"},null,512)],512))}}),Bi=zs(Oi,[["__scopeId","data-v-753a7cfd"]]),Li={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Ni={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Fi={class:"overflow-hidden"},Gi=es({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(n){return(e,r)=>(Cr(),ts(Pn,null,[Bo(Tn(Cn),{title:"Welcome"}),io("div",Li,[io("nav",Ni,[Bo(Xn)]),io("div",Fi,[Bo(Bi,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),r[0]||(r[0]=io("div",{class:"flex justify-center items-center"},null,-1)),r[1]||(r[1]=io("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),Bo(Zn)])],64))}});export{Gi as default};
