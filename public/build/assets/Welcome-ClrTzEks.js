import{J as hi,W as gi,I as rn,e as on,o as Co,a as ir,t as mi,d as rr,x as _i,y as vi,b as Or,T as wi,w as yi,c as bi,f as xi,u as Ti,m as Si,F as Ci}from"./app-Rtesa62g.js";import{M as Ne,O as Pi,B as xr,F as hn,S as sr,U as Wo,V as xt,W as _o,H as vo,N as Mi,C as Ei,a as Mt,b as Ue,A as Tt,c as pt,E as Ii,d as gt,e as Bt,g as Fe,f as Re,h as qr,i as zr,j as Ut,k as Ai,l as Di,m as Ri,R as ki,n as Oi,T as vr,P as Vt,D as Xt,o as Fn,p as Un,q as gn,Q as Bi,I as Li,r as ko,s as mn,t as Ni,u as Oo,v as Bo,w as Fi,x as Ui,y as zi,z as Hi,J as Gi,K as Yi,L as Xi,G as Wi}from"./GlobalFooter-OXCWDDEp.js";import{_ as zn}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Hn=hi("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(i,e){i.isMobile=e}},actions:{setActiveProject(i){this.activeProjectSlug=i},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(i){this.scrollPosition=i,console.log("Scroll position stored:",i)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function Zi(i,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function ji(i,e,o){return e&&Zi(i.prototype,e),i}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Je,wo,Ct,Qt,qt,Tr,Gn,or,Hr,Yn,Zt,Ot,Xn,Wn=function(){return Je||typeof window<"u"&&(Je=window.gsap)&&Je.registerPlugin&&Je},Zn=1,br=[],_e=[],Gt=[],Gr=Date.now,Zo=function(e,o){return o},Vi=function(){var e=Hr.core,o=e.bridge||{},t=e._scrollers,r=e._proxies;t.push.apply(t,_e),r.push.apply(r,Gt),_e=t,Gt=r,Zo=function(s,l){return o[s](l)}},Kt=function(e,o){return~Gt.indexOf(e)&&Gt[Gt.indexOf(e)+1][o]},Yr=function(e){return!!~Yn.indexOf(e)},at=function(e,o,t,r,n){return e.addEventListener(o,t,{passive:r!==!1,capture:!!n})},st=function(e,o,t,r){return e.removeEventListener(o,t,!!r)},oo="scrollLeft",no="scrollTop",jo=function(){return Zt&&Zt.isPressed||_e.cache++},Po=function(e,o){var t=function r(n){if(n||n===0){Zn&&(Ct.history.scrollRestoration="manual");var s=Zt&&Zt.isPressed;n=r.v=Math.round(n)||(Zt&&Zt.iOS?1:0),e(n),r.cacheID=_e.cache,s&&Zo("ss",n)}else(o||_e.cache!==r.cacheID||Zo("ref"))&&(r.cacheID=_e.cache,r.v=e());return r.v+r.offset};return t.offset=0,e&&t},ft={s:oo,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Po(function(i){return arguments.length?Ct.scrollTo(i,We.sc()):Ct.pageXOffset||Qt[oo]||qt[oo]||Tr[oo]||0})},We={s:no,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:ft,sc:Po(function(i){return arguments.length?Ct.scrollTo(ft.sc(),i):Ct.pageYOffset||Qt[no]||qt[no]||Tr[no]||0})},ht=function(e,o){return(o&&o._ctx&&o._ctx.selector||Je.utils.toArray)(e)[0]||(typeof e=="string"&&Je.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Jt=function(e,o){var t=o.s,r=o.sc;Yr(e)&&(e=Qt.scrollingElement||qt);var n=_e.indexOf(e),s=r===We.sc?1:2;!~n&&(n=_e.push(e)-1),_e[n+s]||at(e,"scroll",jo);var l=_e[n+s],f=l||(_e[n+s]=Po(Kt(e,t),!0)||(Yr(e)?r:Po(function(_){return arguments.length?e[t]=_:e[t]})));return f.target=e,l||(f.smooth=Je.getProperty(e,"scrollBehavior")==="smooth"),f},Vo=function(e,o,t){var r=e,n=e,s=Gr(),l=s,f=o||50,_=Math.max(500,f*3),w=function(g,M){var m=Gr();M||m-s>f?(n=r,r=g,l=s,s=m):t?r+=g:r=n+(g-n)/(m-l)*(s-l)},p=function(){n=r=t?0:r,l=s=0},d=function(g){var M=l,m=n,re=Gr();return(g||g===0)&&g!==r&&w(g),s===l||re-l>_?0:(r+(t?m:-m))/((t?re:s)-M)*1e3};return{update:w,reset:p,getVelocity:d}},Dr=function(e,o){return o&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},_n=function(e){var o=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(o)>=Math.abs(t)?o:t},jn=function(){Hr=Je.core.globals().ScrollTrigger,Hr&&Hr.core&&Vi()},Vn=function(e){return Je=e||Wn(),!wo&&Je&&typeof document<"u"&&document.body&&(Ct=window,Qt=document,qt=Qt.documentElement,Tr=Qt.body,Yn=[Ct,Qt,qt,Tr],Je.utils.clamp,Xn=Je.core.context||function(){},or="onpointerenter"in Tr?"pointer":"mouse",Gn=ze.isTouch=Ct.matchMedia&&Ct.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ct||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Ot=ze.eventTypes=("ontouchstart"in qt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in qt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Zn=0},500),jn(),wo=1),wo};ft.op=We;_e.cache=0;var ze=function(){function i(o){this.init(o)}var e=i.prototype;return e.init=function(t){wo||Vn(Je)||console.warn("Please gsap.registerPlugin(Observer)"),Hr||jn();var r=t.tolerance,n=t.dragMinimum,s=t.type,l=t.target,f=t.lineHeight,_=t.debounce,w=t.preventDefault,p=t.onStop,d=t.onStopDelay,u=t.ignore,g=t.wheelSpeed,M=t.event,m=t.onDragStart,re=t.onDragEnd,$=t.onDrag,ee=t.onPress,b=t.onRelease,Te=t.onRight,H=t.onLeft,I=t.onUp,he=t.onDown,X=t.onChangeX,h=t.onChangeY,N=t.onChange,v=t.onToggleX,G=t.onToggleY,Q=t.onHover,ve=t.onHoverEnd,q=t.onMove,A=t.ignoreCheck,oe=t.isNormalizer,x=t.onGestureStart,a=t.onGestureEnd,E=t.onWheel,V=t.onEnable,be=t.onDisable,ae=t.onClick,Me=t.scrollSpeed,C=t.capture,P=t.allowClicks,ie=t.lockAxis,U=t.onLockAxis;this.target=l=ht(l)||qt,this.vars=t,u&&(u=Je.utils.toArray(u)),r=r||1e-9,n=n||0,g=g||1,Me=Me||1,s=s||"wheel,touch,pointer",_=_!==!1,f||(f=parseFloat(Ct.getComputedStyle(Tr).lineHeight)||22);var Y,L,O,S,R,B,D,c=this,y=0,z=0,se=t.passive||!w&&t.passive!==!1,ne=Jt(l,ft),we=Jt(l,We),Z=ne(),xe=we(),Se=~s.indexOf("touch")&&!~s.indexOf("pointer")&&Ot[0]==="pointerdown",Oe=Yr(l),j=l.ownerDocument||Qt,de=[0,0,0],Ze=[0,0,0],dt=0,K=function(){return dt=Gr()},ge=function(J,Ce){return(c.event=J)&&u&&~u.indexOf(J.target)||Ce&&Se&&J.pointerType!=="touch"||A&&A(J,Ce)},Ge=function(){c._vx.reset(),c._vy.reset(),L.pause(),p&&p(c)},F=function(){var J=c.deltaX=_n(de),Ce=c.deltaY=_n(Ze),T=Math.abs(J)>=r,le=Math.abs(Ce)>=r;N&&(T||le)&&N(c,J,Ce,de,Ze),T&&(Te&&c.deltaX>0&&Te(c),H&&c.deltaX<0&&H(c),X&&X(c),v&&c.deltaX<0!=y<0&&v(c),y=c.deltaX,de[0]=de[1]=de[2]=0),le&&(he&&c.deltaY>0&&he(c),I&&c.deltaY<0&&I(c),h&&h(c),G&&c.deltaY<0!=z<0&&G(c),z=c.deltaY,Ze[0]=Ze[1]=Ze[2]=0),(S||O)&&(q&&q(c),O&&(m&&O===1&&m(c),$&&$(c),O=0),S=!1),B&&!(B=!1)&&U&&U(c),R&&(E(c),R=!1),Y=0},Pt=function(J,Ce,T){de[T]+=J,Ze[T]+=Ce,c._vx.update(J),c._vy.update(Ce),_?Y||(Y=requestAnimationFrame(F)):F()},Dt=function(J,Ce){ie&&!D&&(c.axis=D=Math.abs(J)>Math.abs(Ce)?"x":"y",B=!0),D!=="y"&&(de[2]+=J,c._vx.update(J,!0)),D!=="x"&&(Ze[2]+=Ce,c._vy.update(Ce,!0)),_?Y||(Y=requestAnimationFrame(F)):F()},Ae=function(J){if(!ge(J,1)){J=Dr(J,w);var Ce=J.clientX,T=J.clientY,le=Ce-c.x,W=T-c.y,ce=c.isDragging;c.x=Ce,c.y=T,(ce||(le||W)&&(Math.abs(c.startX-Ce)>=n||Math.abs(c.startY-T)>=n))&&(O=ce?2:1,ce||(c.isDragging=!0),Dt(le,W))}},mt=c.onPress=function(ue){ge(ue,1)||ue&&ue.button||(c.axis=D=null,L.pause(),c.isPressed=!0,ue=Dr(ue),y=z=0,c.startX=c.x=ue.clientX,c.startY=c.y=ue.clientY,c._vx.reset(),c._vy.reset(),at(oe?l:j,Ot[1],Ae,se,!0),c.deltaX=c.deltaY=0,ee&&ee(c))},te=c.onRelease=function(ue){if(!ge(ue,1)){st(oe?l:j,Ot[1],Ae,!0);var J=!isNaN(c.y-c.startY),Ce=c.isDragging,T=Ce&&(Math.abs(c.x-c.startX)>3||Math.abs(c.y-c.startY)>3),le=Dr(ue);!T&&J&&(c._vx.reset(),c._vy.reset(),w&&P&&Je.delayedCall(.08,function(){if(Gr()-dt>300&&!ue.defaultPrevented){if(ue.target.click)ue.target.click();else if(j.createEvent){var W=j.createEvent("MouseEvents");W.initMouseEvent("click",!0,!0,Ct,1,le.screenX,le.screenY,le.clientX,le.clientY,!1,!1,!1,!1,0,null),ue.target.dispatchEvent(W)}}})),c.isDragging=c.isGesturing=c.isPressed=!1,p&&Ce&&!oe&&L.restart(!0),O&&F(),re&&Ce&&re(c),b&&b(c,T)}},_t=function(J){return J.touches&&J.touches.length>1&&(c.isGesturing=!0)&&x(J,c.isDragging)},vt=function(){return(c.isGesturing=!1)||a(c)},Qe=function(J){if(!ge(J)){var Ce=ne(),T=we();Pt((Ce-Z)*Me,(T-xe)*Me,1),Z=Ce,xe=T,p&&L.restart(!0)}},Rt=function(J){if(!ge(J)){J=Dr(J,w),E&&(R=!0);var Ce=(J.deltaMode===1?f:J.deltaMode===2?Ct.innerHeight:1)*g;Pt(J.deltaX*Ce,J.deltaY*Ce,0),p&&!oe&&L.restart(!0)}},er=function(J){if(!ge(J)){var Ce=J.clientX,T=J.clientY,le=Ce-c.x,W=T-c.y;c.x=Ce,c.y=T,S=!0,p&&L.restart(!0),(le||W)&&Dt(le,W)}},gr=function(J){c.event=J,Q(c)},Yt=function(J){c.event=J,ve(c)},Mr=function(J){return ge(J)||Dr(J,w)&&ae(c)};L=c._dc=Je.delayedCall(d||.25,Ge).pause(),c.deltaX=c.deltaY=0,c._vx=Vo(0,50,!0),c._vy=Vo(0,50,!0),c.scrollX=ne,c.scrollY=we,c.isDragging=c.isGesturing=c.isPressed=!1,Xn(this),c.enable=function(ue){return c.isEnabled||(at(Oe?j:l,"scroll",jo),s.indexOf("scroll")>=0&&at(Oe?j:l,"scroll",Qe,se,C),s.indexOf("wheel")>=0&&at(l,"wheel",Rt,se,C),(s.indexOf("touch")>=0&&Gn||s.indexOf("pointer")>=0)&&(at(l,Ot[0],mt,se,C),at(j,Ot[2],te),at(j,Ot[3],te),P&&at(l,"click",K,!0,!0),ae&&at(l,"click",Mr),x&&at(j,"gesturestart",_t),a&&at(j,"gestureend",vt),Q&&at(l,or+"enter",gr),ve&&at(l,or+"leave",Yt),q&&at(l,or+"move",er)),c.isEnabled=!0,c.isDragging=c.isGesturing=c.isPressed=S=O=!1,c._vx.reset(),c._vy.reset(),Z=ne(),xe=we(),ue&&ue.type&&mt(ue),V&&V(c)),c},c.disable=function(){c.isEnabled&&(br.filter(function(ue){return ue!==c&&Yr(ue.target)}).length||st(Oe?j:l,"scroll",jo),c.isPressed&&(c._vx.reset(),c._vy.reset(),st(oe?l:j,Ot[1],Ae,!0)),st(Oe?j:l,"scroll",Qe,C),st(l,"wheel",Rt,C),st(l,Ot[0],mt,C),st(j,Ot[2],te),st(j,Ot[3],te),st(l,"click",K,!0),st(l,"click",Mr),st(j,"gesturestart",_t),st(j,"gestureend",vt),st(l,or+"enter",gr),st(l,or+"leave",Yt),st(l,or+"move",er),c.isEnabled=c.isPressed=c.isDragging=!1,be&&be(c))},c.kill=c.revert=function(){c.disable();var ue=br.indexOf(c);ue>=0&&br.splice(ue,1),Zt===c&&(Zt=0)},br.push(c),oe&&Yr(l)&&(Zt=c),c.enable(M)},ji(i,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),i}();ze.version="3.12.7";ze.create=function(i){return new ze(i)};ze.register=Vn;ze.getAll=function(){return br.slice()};ze.getById=function(i){return br.filter(function(e){return e.vars.id===i})[0]};Wn()&&Je.registerPlugin(ze);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var k,wr,me,Ie,St,Pe,nn,Mo,Kr,Xr,Br,io,ot,Do,$o,ct,vn,wn,yr,$n,Lo,Qn,lt,Qo,qn,Kn,$t,qo,sn,Sr,an,Eo,Ko,No,so=1,nt=Date.now,Fo=nt(),At=0,Lr=0,yn=function(e,o,t){var r=bt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+o+"Clamp"]=r,r?e.substr(6,e.length-7):e},bn=function(e,o){return o&&(!bt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},$i=function i(){return Lr&&requestAnimationFrame(i)},xn=function(){return Do=1},Tn=function(){return Do=0},zt=function(e){return e},Nr=function(e){return Math.round(e*1e5)/1e5||0},Jn=function(){return typeof window<"u"},ei=function(){return k||Jn()&&(k=window.gsap)&&k.registerPlugin&&k},fr=function(e){return!!~nn.indexOf(e)},ti=function(e){return(e==="Height"?an:me["inner"+e])||St["client"+e]||Pe["client"+e]},ri=function(e){return Kt(e,"getBoundingClientRect")||(fr(e)?function(){return So.width=me.innerWidth,So.height=an,So}:function(){return Wt(e)})},Qi=function(e,o,t){var r=t.d,n=t.d2,s=t.a;return(s=Kt(e,"getBoundingClientRect"))?function(){return s()[r]}:function(){return(o?ti(n):e["client"+n])||0}},qi=function(e,o){return!o||~Gt.indexOf(e)?ri(e):function(){return So}},Ht=function(e,o){var t=o.s,r=o.d2,n=o.d,s=o.a;return Math.max(0,(t="scroll"+r)&&(s=Kt(e,t))?s()-ri(e)()[n]:fr(e)?(St[t]||Pe[t])-ti(r):e[t]-e["offset"+r])},ao=function(e,o){for(var t=0;t<yr.length;t+=3)(!o||~o.indexOf(yr[t+1]))&&e(yr[t],yr[t+1],yr[t+2])},bt=function(e){return typeof e=="string"},it=function(e){return typeof e=="function"},Fr=function(e){return typeof e=="number"},nr=function(e){return typeof e=="object"},Rr=function(e,o,t){return e&&e.progress(o?0:1)&&t&&e.pause()},Uo=function(e,o){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return o(e)}):o(e);t&&t.totalTime&&(e.callbackAnimation=t)}},mr=Math.abs,oi="left",ni="top",ln="right",cn="bottom",lr="width",cr="height",Wr="Right",Zr="Left",jr="Top",Vr="Bottom",He="padding",Et="margin",Pr="Width",un="Height",Xe="px",It=function(e){return me.getComputedStyle(e)},Ki=function(e){var o=It(e).position;e.style.position=o==="absolute"||o==="fixed"?o:"relative"},Sn=function(e,o){for(var t in o)t in e||(e[t]=o[t]);return e},Wt=function(e,o){var t=o&&It(e)[$o]!=="matrix(1, 0, 0, 1, 0, 0)"&&k.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return t&&t.progress(0).kill(),r},Io=function(e,o){var t=o.d2;return e["offset"+t]||e["client"+t]||0},ii=function(e){var o=[],t=e.labels,r=e.duration(),n;for(n in t)o.push(t[n]/r);return o},Ji=function(e){return function(o){return k.utils.snap(ii(e),o)}},fn=function(e){var o=k.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(r,n){return r-n});return t?function(r,n,s){s===void 0&&(s=.001);var l;if(!n)return o(r);if(n>0){for(r-=s,l=0;l<t.length;l++)if(t[l]>=r)return t[l];return t[l-1]}else for(l=t.length,r+=s;l--;)if(t[l]<=r)return t[l];return t[0]}:function(r,n,s){s===void 0&&(s=.001);var l=o(r);return!n||Math.abs(l-r)<s||l-r<0==n<0?l:o(n<0?r-e:r+e)}},es=function(e){return function(o,t){return fn(ii(e))(o,t.direction)}},lo=function(e,o,t,r){return t.split(",").forEach(function(n){return e(o,n,r)})},$e=function(e,o,t,r,n){return e.addEventListener(o,t,{passive:!r,capture:!!n})},Ve=function(e,o,t,r){return e.removeEventListener(o,t,!!r)},co=function(e,o,t){t=t&&t.wheelHandler,t&&(e(o,"wheel",t),e(o,"touchmove",t))},Cn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},uo={toggleActions:"play",anticipatePin:0},Ao={top:0,left:0,center:.5,bottom:1,right:1},yo=function(e,o){if(bt(e)){var t=e.indexOf("="),r=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(r*=o/100),e=e.substr(0,t-1)),e=r+(e in Ao?Ao[e]*o:~e.indexOf("%")?parseFloat(e)*o/100:parseFloat(e)||0)}return e},fo=function(e,o,t,r,n,s,l,f){var _=n.startColor,w=n.endColor,p=n.fontSize,d=n.indent,u=n.fontWeight,g=Ie.createElement("div"),M=fr(t)||Kt(t,"pinType")==="fixed",m=e.indexOf("scroller")!==-1,re=M?Pe:t,$=e.indexOf("start")!==-1,ee=$?_:w,b="border-color:"+ee+";font-size:"+p+";color:"+ee+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((m||f)&&M?"fixed;":"absolute;"),(m||f||!M)&&(b+=(r===We?ln:cn)+":"+(s+parseFloat(d))+"px;"),l&&(b+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),g._isStart=$,g.setAttribute("class","gsap-marker-"+e+(o?" marker-"+o:"")),g.style.cssText=b,g.innerText=o||o===0?e+"-"+o:e,re.children[0]?re.insertBefore(g,re.children[0]):re.appendChild(g),g._offset=g["offset"+r.op.d2],bo(g,0,r,$),g},bo=function(e,o,t,r){var n={display:"block"},s=t[r?"os2":"p2"],l=t[r?"p2":"os2"];e._isFlipped=r,n[t.a+"Percent"]=r?-100:0,n[t.a]=r?"1px":0,n["border"+s+Pr]=1,n["border"+l+Pr]=0,n[t.p]=o+"px",k.set(e,n)},pe=[],Jo={},Jr,Pn=function(){return nt()-At>34&&(Jr||(Jr=requestAnimationFrame(jt)))},_r=function(){(!lt||!lt.isPressed||lt.startX>Pe.clientWidth)&&(_e.cache++,lt?Jr||(Jr=requestAnimationFrame(jt)):jt(),At||pr("scrollStart"),At=nt())},zo=function(){Kn=me.innerWidth,qn=me.innerHeight},Ur=function(e){_e.cache++,(e===!0||!ot&&!Qn&&!Ie.fullscreenElement&&!Ie.webkitFullscreenElement&&(!Qo||Kn!==me.innerWidth||Math.abs(me.innerHeight-qn)>me.innerHeight*.25))&&Mo.restart(!0)},dr={},ts=[],si=function i(){return Ve(fe,"scrollEnd",i)||ar(!0)},pr=function(e){return dr[e]&&dr[e].map(function(o){return o()})||ts},yt=[],ai=function(e){for(var o=0;o<yt.length;o+=5)(!e||yt[o+4]&&yt[o+4].query===e)&&(yt[o].style.cssText=yt[o+1],yt[o].getBBox&&yt[o].setAttribute("transform",yt[o+2]||""),yt[o+3].uncache=1)},dn=function(e,o){var t;for(ct=0;ct<pe.length;ct++)t=pe[ct],t&&(!o||t._ctx===o)&&(e?t.kill(1):t.revert(!0,!0));Eo=!0,o&&ai(o),o||pr("revert")},li=function(e,o){_e.cache++,(o||!ut)&&_e.forEach(function(t){return it(t)&&t.cacheID++&&(t.rec=0)}),bt(e)&&(me.history.scrollRestoration=sn=e)},ut,ur=0,Mn,rs=function(){if(Mn!==ur){var e=Mn=ur;requestAnimationFrame(function(){return e===ur&&ar(!0)})}},ci=function(){Pe.appendChild(Sr),an=!lt&&Sr.offsetHeight||me.innerHeight,Pe.removeChild(Sr)},En=function(e){return Kr(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(o){return o.style.display=e?"none":"block"})},ar=function(e,o){if(St=Ie.documentElement,Pe=Ie.body,nn=[me,Ie,St,Pe],At&&!e&&!Eo){$e(fe,"scrollEnd",si);return}ci(),ut=fe.isRefreshing=!0,_e.forEach(function(r){return it(r)&&++r.cacheID&&(r.rec=r())});var t=pr("refreshInit");$n&&fe.sort(),o||dn(),_e.forEach(function(r){it(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),pe.slice(0).forEach(function(r){return r.refresh()}),Eo=!1,pe.forEach(function(r){if(r._subPinOffset&&r.pin){var n=r.vars.horizontal?"offsetWidth":"offsetHeight",s=r.pin[n];r.revert(!0,1),r.adjustPinSpacing(r.pin[n]-s),r.refresh()}}),Ko=1,En(!0),pe.forEach(function(r){var n=Ht(r.scroller,r._dir),s=r.vars.end==="max"||r._endClamp&&r.end>n,l=r._startClamp&&r.start>=n;(s||l)&&r.setPositions(l?n-1:r.start,s?Math.max(l?n:r.start+1,n):r.end,!0)}),En(!1),Ko=0,t.forEach(function(r){return r&&r.render&&r.render(-1)}),_e.forEach(function(r){it(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),li(sn,1),Mo.pause(),ur++,ut=2,jt(2),pe.forEach(function(r){return it(r.vars.onRefresh)&&r.vars.onRefresh(r)}),ut=fe.isRefreshing=!1,pr("refresh")},en=0,xo=1,$r,jt=function(e){if(e===2||!ut&&!Eo){fe.isUpdating=!0,$r&&$r.update(0);var o=pe.length,t=nt(),r=t-Fo>=50,n=o&&pe[0].scroll();if(xo=en>n?-1:1,ut||(en=n),r&&(At&&!Do&&t-At>200&&(At=0,pr("scrollEnd")),Br=Fo,Fo=t),xo<0){for(ct=o;ct-- >0;)pe[ct]&&pe[ct].update(0,r);xo=1}else for(ct=0;ct<o;ct++)pe[ct]&&pe[ct].update(0,r);fe.isUpdating=!1}Jr=0},tn=[oi,ni,cn,ln,Et+Vr,Et+Wr,Et+jr,Et+Zr,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],To=tn.concat([lr,cr,"boxSizing","max"+Pr,"max"+un,"position",Et,He,He+jr,He+Wr,He+Vr,He+Zr]),os=function(e,o,t){Cr(t);var r=e._gsap;if(r.spacerIsNative)Cr(r.spacerState);else if(e._gsap.swappedIn){var n=o.parentNode;n&&(n.insertBefore(e,o),n.removeChild(o))}e._gsap.swappedIn=!1},Ho=function(e,o,t,r){if(!e._gsap.swappedIn){for(var n=tn.length,s=o.style,l=e.style,f;n--;)f=tn[n],s[f]=t[f];s.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(s.display="inline-block"),l[cn]=l[ln]="auto",s.flexBasis=t.flexBasis||"auto",s.overflow="visible",s.boxSizing="border-box",s[lr]=Io(e,ft)+Xe,s[cr]=Io(e,We)+Xe,s[He]=l[Et]=l[ni]=l[oi]="0",Cr(r),l[lr]=l["max"+Pr]=t[lr],l[cr]=l["max"+un]=t[cr],l[He]=t[He],e.parentNode!==o&&(e.parentNode.insertBefore(o,e),o.appendChild(e)),e._gsap.swappedIn=!0}},ns=/([A-Z])/g,Cr=function(e){if(e){var o=e.t.style,t=e.length,r=0,n,s;for((e.t._gsap||k.core.getCache(e.t)).uncache=1;r<t;r+=2)s=e[r+1],n=e[r],s?o[n]=s:o[n]&&o.removeProperty(n.replace(ns,"-$1").toLowerCase())}},po=function(e){for(var o=To.length,t=e.style,r=[],n=0;n<o;n++)r.push(To[n],t[To[n]]);return r.t=e,r},is=function(e,o,t){for(var r=[],n=e.length,s=t?8:0,l;s<n;s+=2)l=e[s],r.push(l,l in o?o[l]:e[s+1]);return r.t=e.t,r},So={left:0,top:0},In=function(e,o,t,r,n,s,l,f,_,w,p,d,u,g){it(e)&&(e=e(f)),bt(e)&&e.substr(0,3)==="max"&&(e=d+(e.charAt(4)==="="?yo("0"+e.substr(3),t):0));var M=u?u.time():0,m,re,$;if(u&&u.seek(0),isNaN(e)||(e=+e),Fr(e))u&&(e=k.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,d,e)),l&&bo(l,t,r,!0);else{it(o)&&(o=o(f));var ee=(e||"0").split(" "),b,Te,H,I;$=ht(o,f)||Pe,b=Wt($)||{},(!b||!b.left&&!b.top)&&It($).display==="none"&&(I=$.style.display,$.style.display="block",b=Wt($),I?$.style.display=I:$.style.removeProperty("display")),Te=yo(ee[0],b[r.d]),H=yo(ee[1]||"0",t),e=b[r.p]-_[r.p]-w+Te+n-H,l&&bo(l,H,r,t-H<20||l._isStart&&H>20),t-=t-H}if(g&&(f[g]=e||-.001,e<0&&(e=0)),s){var he=e+t,X=s._isStart;m="scroll"+r.d2,bo(s,he,r,X&&he>20||!X&&(p?Math.max(Pe[m],St[m]):s.parentNode[m])<=he+1),p&&(_=Wt(l),p&&(s.style[r.op.p]=_[r.op.p]-r.op.m-s._offset+Xe))}return u&&$&&(m=Wt($),u.seek(d),re=Wt($),u._caScrollDist=m[r.p]-re[r.p],e=e/u._caScrollDist*d),u&&u.seek(M),u?e:Math.round(e)},ss=/(webkit|moz|length|cssText|inset)/i,An=function(e,o,t,r){if(e.parentNode!==o){var n=e.style,s,l;if(o===Pe){e._stOrig=n.cssText,l=It(e);for(s in l)!+s&&!ss.test(s)&&l[s]&&typeof n[s]=="string"&&s!=="0"&&(n[s]=l[s]);n.top=t,n.left=r}else n.cssText=e._stOrig;k.core.getCache(e).uncache=1,o.appendChild(e)}},ui=function(e,o,t){var r=o,n=r;return function(s){var l=Math.round(e());return l!==r&&l!==n&&Math.abs(l-r)>3&&Math.abs(l-n)>3&&(s=l,t&&t()),n=r,r=Math.round(s),r}},ho=function(e,o,t){var r={};r[o.p]="+="+t,k.set(e,r)},Dn=function(e,o){var t=Jt(e,o),r="_scroll"+o.p2,n=function s(l,f,_,w,p){var d=s.tween,u=f.onComplete,g={};_=_||t();var M=ui(t,_,function(){d.kill(),s.tween=0});return p=w&&p||0,w=w||l-_,d&&d.kill(),f[r]=l,f.inherit=!1,f.modifiers=g,g[r]=function(){return M(_+w*d.ratio+p*d.ratio*d.ratio)},f.onUpdate=function(){_e.cache++,s.tween&&jt()},f.onComplete=function(){s.tween=0,u&&u.call(d)},d=s.tween=k.to(e,f),d};return e[r]=t,t.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},$e(e,"wheel",t.wheelHandler),fe.isTouch&&$e(e,"touchmove",t.wheelHandler),n},fe=function(){function i(o,t){wr||i.register(k)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),qo(this),this.init(o,t)}var e=i.prototype;return e.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Lr){this.update=this.refresh=this.kill=zt;return}t=Sn(bt(t)||Fr(t)||t.nodeType?{trigger:t}:t,uo);var n=t,s=n.onUpdate,l=n.toggleClass,f=n.id,_=n.onToggle,w=n.onRefresh,p=n.scrub,d=n.trigger,u=n.pin,g=n.pinSpacing,M=n.invalidateOnRefresh,m=n.anticipatePin,re=n.onScrubComplete,$=n.onSnapComplete,ee=n.once,b=n.snap,Te=n.pinReparent,H=n.pinSpacer,I=n.containerAnimation,he=n.fastScrollEnd,X=n.preventOverlaps,h=t.horizontal||t.containerAnimation&&t.horizontal!==!1?ft:We,N=!p&&p!==0,v=ht(t.scroller||me),G=k.core.getCache(v),Q=fr(v),ve=("pinType"in t?t.pinType:Kt(v,"pinType")||Q&&"fixed")==="fixed",q=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],A=N&&t.toggleActions.split(" "),oe="markers"in t?t.markers:uo.markers,x=Q?0:parseFloat(It(v)["border"+h.p2+Pr])||0,a=this,E=t.onRefreshInit&&function(){return t.onRefreshInit(a)},V=Qi(v,Q,h),be=qi(v,Q),ae=0,Me=0,C=0,P=Jt(v,h),ie,U,Y,L,O,S,R,B,D,c,y,z,se,ne,we,Z,xe,Se,Oe,j,de,Ze,dt,K,ge,Ge,F,Pt,Dt,Ae,mt,te,_t,vt,Qe,Rt,er,gr,Yt;if(a._startClamp=a._endClamp=!1,a._dir=h,m*=45,a.scroller=v,a.scroll=I?I.time.bind(I):P,L=P(),a.vars=t,r=r||t.animation,"refreshPriority"in t&&($n=1,t.refreshPriority===-9999&&($r=a)),G.tweenScroll=G.tweenScroll||{top:Dn(v,We),left:Dn(v,ft)},a.tweenTo=ie=G.tweenScroll[h.p],a.scrubDuration=function(T){_t=Fr(T)&&T,_t?te?te.duration(T):te=k.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:_t,paused:!0,onComplete:function(){return re&&re(a)}}):(te&&te.progress(1).kill(),te=0)},r&&(r.vars.lazy=!1,r._initted&&!a.isReverted||r.vars.immediateRender!==!1&&t.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),a.animation=r.pause(),r.scrollTrigger=a,a.scrubDuration(p),Ae=0,f||(f=r.vars.id)),b&&((!nr(b)||b.push)&&(b={snapTo:b}),"scrollBehavior"in Pe.style&&k.set(Q?[Pe,St]:v,{scrollBehavior:"auto"}),_e.forEach(function(T){return it(T)&&T.target===(Q?Ie.scrollingElement||St:v)&&(T.smooth=!1)}),Y=it(b.snapTo)?b.snapTo:b.snapTo==="labels"?Ji(r):b.snapTo==="labelsDirectional"?es(r):b.directional!==!1?function(T,le){return fn(b.snapTo)(T,nt()-Me<500?0:le.direction)}:k.utils.snap(b.snapTo),vt=b.duration||{min:.1,max:2},vt=nr(vt)?Xr(vt.min,vt.max):Xr(vt,vt),Qe=k.delayedCall(b.delay||_t/2||.1,function(){var T=P(),le=nt()-Me<500,W=ie.tween;if((le||Math.abs(a.getVelocity())<10)&&!W&&!Do&&ae!==T){var ce=(T-S)/ne,je=r&&!N?r.totalProgress():ce,ye=le?0:(je-mt)/(nt()-Br)*1e3||0,Le=k.utils.clamp(-ce,1-ce,mr(ye/2)*ye/.185),et=ce+(b.inertia===!1?0:Le),Be,De,Ee=b,kt=Ee.onStart,ke=Ee.onInterrupt,wt=Ee.onComplete;if(Be=Y(et,a),Fr(Be)||(Be=et),De=Math.max(0,Math.round(S+Be*ne)),T<=R&&T>=S&&De!==T){if(W&&!W._initted&&W.data<=mr(De-T))return;b.inertia===!1&&(Le=Be-ce),ie(De,{duration:vt(mr(Math.max(mr(et-je),mr(Be-je))*.185/ye/.05||0)),ease:b.ease||"power3",data:mr(De-T),onInterrupt:function(){return Qe.restart(!0)&&ke&&ke(a)},onComplete:function(){a.update(),ae=P(),r&&!N&&(te?te.resetTo("totalProgress",Be,r._tTime/r._tDur):r.progress(Be)),Ae=mt=r&&!N?r.totalProgress():a.progress,$&&$(a),wt&&wt(a)}},T,Le*ne,De-T-Le*ne),kt&&kt(a,ie.tween)}}else a.isActive&&ae!==T&&Qe.restart(!0)}).pause()),f&&(Jo[f]=a),d=a.trigger=ht(d||u!==!0&&u),Yt=d&&d._gsap&&d._gsap.stRevert,Yt&&(Yt=Yt(a)),u=u===!0?d:ht(u),bt(l)&&(l={targets:d,className:l}),u&&(g===!1||g===Et||(g=!g&&u.parentNode&&u.parentNode.style&&It(u.parentNode).display==="flex"?!1:He),a.pin=u,U=k.core.getCache(u),U.spacer?we=U.pinState:(H&&(H=ht(H),H&&!H.nodeType&&(H=H.current||H.nativeElement),U.spacerIsNative=!!H,H&&(U.spacerState=po(H))),U.spacer=Se=H||Ie.createElement("div"),Se.classList.add("pin-spacer"),f&&Se.classList.add("pin-spacer-"+f),U.pinState=we=po(u)),t.force3D!==!1&&k.set(u,{force3D:!0}),a.spacer=Se=U.spacer,Dt=It(u),K=Dt[g+h.os2],j=k.getProperty(u),de=k.quickSetter(u,h.a,Xe),Ho(u,Se,Dt),xe=po(u)),oe){z=nr(oe)?Sn(oe,Cn):Cn,c=fo("scroller-start",f,v,h,z,0),y=fo("scroller-end",f,v,h,z,0,c),Oe=c["offset"+h.op.d2];var Mr=ht(Kt(v,"content")||v);B=this.markerStart=fo("start",f,Mr,h,z,Oe,0,I),D=this.markerEnd=fo("end",f,Mr,h,z,Oe,0,I),I&&(gr=k.quickSetter([B,D],h.a,Xe)),!ve&&!(Gt.length&&Kt(v,"fixedMarkers")===!0)&&(Ki(Q?Pe:v),k.set([c,y],{force3D:!0}),Ge=k.quickSetter(c,h.a,Xe),Pt=k.quickSetter(y,h.a,Xe))}if(I){var ue=I.vars.onUpdate,J=I.vars.onUpdateParams;I.eventCallback("onUpdate",function(){a.update(0,0,1),ue&&ue.apply(I,J||[])})}if(a.previous=function(){return pe[pe.indexOf(a)-1]},a.next=function(){return pe[pe.indexOf(a)+1]},a.revert=function(T,le){if(!le)return a.kill(!0);var W=T!==!1||!a.enabled,ce=ot;W!==a.isReverted&&(W&&(Rt=Math.max(P(),a.scroll.rec||0),C=a.progress,er=r&&r.progress()),B&&[B,D,c,y].forEach(function(je){return je.style.display=W?"none":"block"}),W&&(ot=a,a.update(W)),u&&(!Te||!a.isActive)&&(W?os(u,Se,we):Ho(u,Se,It(u),ge)),W||a.update(W),ot=ce,a.isReverted=W)},a.refresh=function(T,le,W,ce){if(!((ot||!a.enabled)&&!le)){if(u&&T&&At){$e(i,"scrollEnd",si);return}!ut&&E&&E(a),ot=a,ie.tween&&!W&&(ie.tween.kill(),ie.tween=0),te&&te.pause(),M&&r&&r.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var je=V(),ye=be(),Le=I?I.duration():Ht(v,h),et=ne<=.01,Be=0,De=ce||0,Ee=nr(W)?W.end:t.end,kt=t.endTrigger||d,ke=nr(W)?W.start:t.start||(t.start===0||!d?0:u?"0 0":"0 100%"),wt=a.pinnedContainer=t.pinnedContainer&&ht(t.pinnedContainer,a),Lt=d&&Math.max(0,pe.indexOf(a))||0,qe=Lt,Ke,tt,tr,to,rt,Ye,Nt,Ro,pn,Er,Ft,Ir,ro;for(oe&&nr(W)&&(Ir=k.getProperty(c,h.p),ro=k.getProperty(y,h.p));qe-- >0;)Ye=pe[qe],Ye.end||Ye.refresh(0,1)||(ot=a),Nt=Ye.pin,Nt&&(Nt===d||Nt===u||Nt===wt)&&!Ye.isReverted&&(Er||(Er=[]),Er.unshift(Ye),Ye.revert(!0,!0)),Ye!==pe[qe]&&(Lt--,qe--);for(it(ke)&&(ke=ke(a)),ke=yn(ke,"start",a),S=In(ke,d,je,h,P(),B,c,a,ye,x,ve,Le,I,a._startClamp&&"_startClamp")||(u?-.001:0),it(Ee)&&(Ee=Ee(a)),bt(Ee)&&!Ee.indexOf("+=")&&(~Ee.indexOf(" ")?Ee=(bt(ke)?ke.split(" ")[0]:"")+Ee:(Be=yo(Ee.substr(2),je),Ee=bt(ke)?ke:(I?k.utils.mapRange(0,I.duration(),I.scrollTrigger.start,I.scrollTrigger.end,S):S)+Be,kt=d)),Ee=yn(Ee,"end",a),R=Math.max(S,In(Ee||(kt?"100% 0":Le),kt,je,h,P()+Be,D,y,a,ye,x,ve,Le,I,a._endClamp&&"_endClamp"))||-.001,Be=0,qe=Lt;qe--;)Ye=pe[qe],Nt=Ye.pin,Nt&&Ye.start-Ye._pinPush<=S&&!I&&Ye.end>0&&(Ke=Ye.end-(a._startClamp?Math.max(0,Ye.start):Ye.start),(Nt===d&&Ye.start-Ye._pinPush<S||Nt===wt)&&isNaN(ke)&&(Be+=Ke*(1-Ye.progress)),Nt===u&&(De+=Ke));if(S+=Be,R+=Be,a._startClamp&&(a._startClamp+=Be),a._endClamp&&!ut&&(a._endClamp=R||-.001,R=Math.min(R,Ht(v,h))),ne=R-S||(S-=.01)&&.001,et&&(C=k.utils.clamp(0,1,k.utils.normalize(S,R,Rt))),a._pinPush=De,B&&Be&&(Ke={},Ke[h.a]="+="+Be,wt&&(Ke[h.p]="-="+P()),k.set([B,D],Ke)),u&&!(Ko&&a.end>=Ht(v,h)))Ke=It(u),to=h===We,tr=P(),Ze=parseFloat(j(h.a))+De,!Le&&R>1&&(Ft=(Q?Ie.scrollingElement||St:v).style,Ft={style:Ft,value:Ft["overflow"+h.a.toUpperCase()]},Q&&It(Pe)["overflow"+h.a.toUpperCase()]!=="scroll"&&(Ft.style["overflow"+h.a.toUpperCase()]="scroll")),Ho(u,Se,Ke),xe=po(u),tt=Wt(u,!0),Ro=ve&&Jt(v,to?ft:We)(),g?(ge=[g+h.os2,ne+De+Xe],ge.t=Se,qe=g===He?Io(u,h)+ne+De:0,qe&&(ge.push(h.d,qe+Xe),Se.style.flexBasis!=="auto"&&(Se.style.flexBasis=qe+Xe)),Cr(ge),wt&&pe.forEach(function(Ar){Ar.pin===wt&&Ar.vars.pinSpacing!==!1&&(Ar._subPinOffset=!0)}),ve&&P(Rt)):(qe=Io(u,h),qe&&Se.style.flexBasis!=="auto"&&(Se.style.flexBasis=qe+Xe)),ve&&(rt={top:tt.top+(to?tr-S:Ro)+Xe,left:tt.left+(to?Ro:tr-S)+Xe,boxSizing:"border-box",position:"fixed"},rt[lr]=rt["max"+Pr]=Math.ceil(tt.width)+Xe,rt[cr]=rt["max"+un]=Math.ceil(tt.height)+Xe,rt[Et]=rt[Et+jr]=rt[Et+Wr]=rt[Et+Vr]=rt[Et+Zr]="0",rt[He]=Ke[He],rt[He+jr]=Ke[He+jr],rt[He+Wr]=Ke[He+Wr],rt[He+Vr]=Ke[He+Vr],rt[He+Zr]=Ke[He+Zr],Z=is(we,rt,Te),ut&&P(0)),r?(pn=r._initted,Lo(1),r.render(r.duration(),!0,!0),dt=j(h.a)-Ze+ne+De,F=Math.abs(ne-dt)>1,ve&&F&&Z.splice(Z.length-2,2),r.render(0,!0,!0),pn||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),Lo(0)):dt=ne,Ft&&(Ft.value?Ft.style["overflow"+h.a.toUpperCase()]=Ft.value:Ft.style.removeProperty("overflow-"+h.a));else if(d&&P()&&!I)for(tt=d.parentNode;tt&&tt!==Pe;)tt._pinOffset&&(S-=tt._pinOffset,R-=tt._pinOffset),tt=tt.parentNode;Er&&Er.forEach(function(Ar){return Ar.revert(!1,!0)}),a.start=S,a.end=R,L=O=ut?Rt:P(),!I&&!ut&&(L<Rt&&P(Rt),a.scroll.rec=0),a.revert(!1,!0),Me=nt(),Qe&&(ae=-1,Qe.restart(!0)),ot=0,r&&N&&(r._initted||er)&&r.progress()!==er&&r.progress(er||0,!0).render(r.time(),!0,!0),(et||C!==a.progress||I||M||r&&!r._initted)&&(r&&!N&&r.totalProgress(I&&S<-.001&&!C?k.utils.normalize(S,R,0):C,!0),a.progress=et||(L-S)/ne===C?0:C),u&&g&&(Se._pinOffset=Math.round(a.progress*dt)),te&&te.invalidate(),isNaN(Ir)||(Ir-=k.getProperty(c,h.p),ro-=k.getProperty(y,h.p),ho(c,h,Ir),ho(B,h,Ir-(ce||0)),ho(y,h,ro),ho(D,h,ro-(ce||0))),et&&!ut&&a.update(),w&&!ut&&!se&&(se=!0,w(a),se=!1)}},a.getVelocity=function(){return(P()-O)/(nt()-Br)*1e3||0},a.endAnimation=function(){Rr(a.callbackAnimation),r&&(te?te.progress(1):r.paused()?N||Rr(r,a.direction<0,1):Rr(r,r.reversed()))},a.labelToScroll=function(T){return r&&r.labels&&(S||a.refresh()||S)+r.labels[T]/r.duration()*ne||0},a.getTrailing=function(T){var le=pe.indexOf(a),W=a.direction>0?pe.slice(0,le).reverse():pe.slice(le+1);return(bt(T)?W.filter(function(ce){return ce.vars.preventOverlaps===T}):W).filter(function(ce){return a.direction>0?ce.end<=S:ce.start>=R})},a.update=function(T,le,W){if(!(I&&!W&&!T)){var ce=ut===!0?Rt:a.scroll(),je=T?0:(ce-S)/ne,ye=je<0?0:je>1?1:je||0,Le=a.progress,et,Be,De,Ee,kt,ke,wt,Lt;if(le&&(O=L,L=I?P():ce,b&&(mt=Ae,Ae=r&&!N?r.totalProgress():ye)),m&&u&&!ot&&!so&&At&&(!ye&&S<ce+(ce-O)/(nt()-Br)*m?ye=1e-4:ye===1&&R>ce+(ce-O)/(nt()-Br)*m&&(ye=.9999)),ye!==Le&&a.enabled){if(et=a.isActive=!!ye&&ye<1,Be=!!Le&&Le<1,ke=et!==Be,kt=ke||!!ye!=!!Le,a.direction=ye>Le?1:-1,a.progress=ye,kt&&!ot&&(De=ye&&!Le?0:ye===1?1:Le===1?2:3,N&&(Ee=!ke&&A[De+1]!=="none"&&A[De+1]||A[De],Lt=r&&(Ee==="complete"||Ee==="reset"||Ee in r))),X&&(ke||Lt)&&(Lt||p||!r)&&(it(X)?X(a):a.getTrailing(X).forEach(function(tr){return tr.endAnimation()})),N||(te&&!ot&&!so?(te._dp._time-te._start!==te._time&&te.render(te._dp._time-te._start),te.resetTo?te.resetTo("totalProgress",ye,r._tTime/r._tDur):(te.vars.totalProgress=ye,te.invalidate().restart())):r&&r.totalProgress(ye,!!(ot&&(Me||T)))),u){if(T&&g&&(Se.style[g+h.os2]=K),!ve)de(Nr(Ze+dt*ye));else if(kt){if(wt=!T&&ye>Le&&R+1>ce&&ce+1>=Ht(v,h),Te)if(!T&&(et||wt)){var qe=Wt(u,!0),Ke=ce-S;An(u,Pe,qe.top+(h===We?Ke:0)+Xe,qe.left+(h===We?0:Ke)+Xe)}else An(u,Se);Cr(et||wt?Z:xe),F&&ye<1&&et||de(Ze+(ye===1&&!wt?dt:0))}}b&&!ie.tween&&!ot&&!so&&Qe.restart(!0),l&&(ke||ee&&ye&&(ye<1||!No))&&Kr(l.targets).forEach(function(tr){return tr.classList[et||ee?"add":"remove"](l.className)}),s&&!N&&!T&&s(a),kt&&!ot?(N&&(Lt&&(Ee==="complete"?r.pause().totalProgress(1):Ee==="reset"?r.restart(!0).pause():Ee==="restart"?r.restart(!0):r[Ee]()),s&&s(a)),(ke||!No)&&(_&&ke&&Uo(a,_),q[De]&&Uo(a,q[De]),ee&&(ye===1?a.kill(!1,1):q[De]=0),ke||(De=ye===1?1:3,q[De]&&Uo(a,q[De]))),he&&!et&&Math.abs(a.getVelocity())>(Fr(he)?he:2500)&&(Rr(a.callbackAnimation),te?te.progress(1):Rr(r,Ee==="reverse"?1:!ye,1))):N&&s&&!ot&&s(a)}if(Pt){var tt=I?ce/I.duration()*(I._caScrollDist||0):ce;Ge(tt+(c._isFlipped?1:0)),Pt(tt)}gr&&gr(-ce/I.duration()*(I._caScrollDist||0))}},a.enable=function(T,le){a.enabled||(a.enabled=!0,$e(v,"resize",Ur),Q||$e(v,"scroll",_r),E&&$e(i,"refreshInit",E),T!==!1&&(a.progress=C=0,L=O=ae=P()),le!==!1&&a.refresh())},a.getTween=function(T){return T&&ie?ie.tween:te},a.setPositions=function(T,le,W,ce){if(I){var je=I.scrollTrigger,ye=I.duration(),Le=je.end-je.start;T=je.start+Le*T/ye,le=je.start+Le*le/ye}a.refresh(!1,!1,{start:bn(T,W&&!!a._startClamp),end:bn(le,W&&!!a._endClamp)},ce),a.update()},a.adjustPinSpacing=function(T){if(ge&&T){var le=ge.indexOf(h.d)+1;ge[le]=parseFloat(ge[le])+T+Xe,ge[1]=parseFloat(ge[1])+T+Xe,Cr(ge)}},a.disable=function(T,le){if(a.enabled&&(T!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,le||te&&te.pause(),Rt=0,U&&(U.uncache=1),E&&Ve(i,"refreshInit",E),Qe&&(Qe.pause(),ie.tween&&ie.tween.kill()&&(ie.tween=0)),!Q)){for(var W=pe.length;W--;)if(pe[W].scroller===v&&pe[W]!==a)return;Ve(v,"resize",Ur),Q||Ve(v,"scroll",_r)}},a.kill=function(T,le){a.disable(T,le),te&&!le&&te.kill(),f&&delete Jo[f];var W=pe.indexOf(a);W>=0&&pe.splice(W,1),W===ct&&xo>0&&ct--,W=0,pe.forEach(function(ce){return ce.scroller===a.scroller&&(W=1)}),W||ut||(a.scroll.rec=0),r&&(r.scrollTrigger=null,T&&r.revert({kill:!1}),le||r.kill()),B&&[B,D,c,y].forEach(function(ce){return ce.parentNode&&ce.parentNode.removeChild(ce)}),$r===a&&($r=0),u&&(U&&(U.uncache=1),W=0,pe.forEach(function(ce){return ce.pin===u&&W++}),W||(U.spacer=0)),t.onKill&&t.onKill(a)},pe.push(a),a.enable(!1,!1),Yt&&Yt(a),r&&r.add&&!ne){var Ce=a.update;a.update=function(){a.update=Ce,_e.cache++,S||R||a.refresh()},k.delayedCall(.01,a.update),ne=.01,S=R=0}else a.refresh();u&&rs()},i.register=function(t){return wr||(k=t||ei(),Jn()&&window.document&&i.enable(),wr=Lr),wr},i.defaults=function(t){if(t)for(var r in t)uo[r]=t[r];return uo},i.disable=function(t,r){Lr=0,pe.forEach(function(s){return s[r?"kill":"disable"](t)}),Ve(me,"wheel",_r),Ve(Ie,"scroll",_r),clearInterval(io),Ve(Ie,"touchcancel",zt),Ve(Pe,"touchstart",zt),lo(Ve,Ie,"pointerdown,touchstart,mousedown",xn),lo(Ve,Ie,"pointerup,touchend,mouseup",Tn),Mo.kill(),ao(Ve);for(var n=0;n<_e.length;n+=3)co(Ve,_e[n],_e[n+1]),co(Ve,_e[n],_e[n+2])},i.enable=function(){if(me=window,Ie=document,St=Ie.documentElement,Pe=Ie.body,k&&(Kr=k.utils.toArray,Xr=k.utils.clamp,qo=k.core.context||zt,Lo=k.core.suppressOverwrites||zt,sn=me.history.scrollRestoration||"auto",en=me.pageYOffset||0,k.core.globals("ScrollTrigger",i),Pe)){Lr=1,Sr=document.createElement("div"),Sr.style.height="100vh",Sr.style.position="absolute",ci(),$i(),ze.register(k),i.isTouch=ze.isTouch,$t=ze.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Qo=ze.isTouch===1,$e(me,"wheel",_r),nn=[me,Ie,St,Pe],k.matchMedia?(i.matchMedia=function(_){var w=k.matchMedia(),p;for(p in _)w.add(p,_[p]);return w},k.addEventListener("matchMediaInit",function(){return dn()}),k.addEventListener("matchMediaRevert",function(){return ai()}),k.addEventListener("matchMedia",function(){ar(0,1),pr("matchMedia")}),k.matchMedia().add("(orientation: portrait)",function(){return zo(),zo})):console.warn("Requires GSAP 3.11.0 or later"),zo(),$e(Ie,"scroll",_r);var t=Pe.hasAttribute("style"),r=Pe.style,n=r.borderTopStyle,s=k.core.Animation.prototype,l,f;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",l=Wt(Pe),We.m=Math.round(l.top+We.sc())||0,ft.m=Math.round(l.left+ft.sc())||0,n?r.borderTopStyle=n:r.removeProperty("border-top-style"),t||(Pe.setAttribute("style",""),Pe.removeAttribute("style")),io=setInterval(Pn,250),k.delayedCall(.5,function(){return so=0}),$e(Ie,"touchcancel",zt),$e(Pe,"touchstart",zt),lo($e,Ie,"pointerdown,touchstart,mousedown",xn),lo($e,Ie,"pointerup,touchend,mouseup",Tn),$o=k.utils.checkPrefix("transform"),To.push($o),wr=nt(),Mo=k.delayedCall(.2,ar).pause(),yr=[Ie,"visibilitychange",function(){var _=me.innerWidth,w=me.innerHeight;Ie.hidden?(vn=_,wn=w):(vn!==_||wn!==w)&&Ur()},Ie,"DOMContentLoaded",ar,me,"load",ar,me,"resize",Ur],ao($e),pe.forEach(function(_){return _.enable(0,1)}),f=0;f<_e.length;f+=3)co(Ve,_e[f],_e[f+1]),co(Ve,_e[f],_e[f+2])}},i.config=function(t){"limitCallbacks"in t&&(No=!!t.limitCallbacks);var r=t.syncInterval;r&&clearInterval(io)||(io=r)&&setInterval(Pn,r),"ignoreMobileResize"in t&&(Qo=i.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(ao(Ve)||ao($e,t.autoRefreshEvents||"none"),Qn=(t.autoRefreshEvents+"").indexOf("resize")===-1)},i.scrollerProxy=function(t,r){var n=ht(t),s=_e.indexOf(n),l=fr(n);~s&&_e.splice(s,l?6:2),r&&(l?Gt.unshift(me,r,Pe,r,St,r):Gt.unshift(n,r))},i.clearMatchMedia=function(t){pe.forEach(function(r){return r._ctx&&r._ctx.query===t&&r._ctx.kill(!0,!0)})},i.isInViewport=function(t,r,n){var s=(bt(t)?ht(t):t).getBoundingClientRect(),l=s[n?lr:cr]*r||0;return n?s.right-l>0&&s.left+l<me.innerWidth:s.bottom-l>0&&s.top+l<me.innerHeight},i.positionInViewport=function(t,r,n){bt(t)&&(t=ht(t));var s=t.getBoundingClientRect(),l=s[n?lr:cr],f=r==null?l/2:r in Ao?Ao[r]*l:~r.indexOf("%")?parseFloat(r)*l/100:parseFloat(r)||0;return n?(s.left+f)/me.innerWidth:(s.top+f)/me.innerHeight},i.killAll=function(t){if(pe.slice(0).forEach(function(n){return n.vars.id!=="ScrollSmoother"&&n.kill()}),t!==!0){var r=dr.killAll||[];dr={},r.forEach(function(n){return n()})}},i}();fe.version="3.12.7";fe.saveStyles=function(i){return i?Kr(i).forEach(function(e){if(e&&e.style){var o=yt.indexOf(e);o>=0&&yt.splice(o,5),yt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),k.core.getCache(e),qo())}}):yt};fe.revert=function(i,e){return dn(!i,e)};fe.create=function(i,e){return new fe(i,e)};fe.refresh=function(i){return i?Ur(!0):(wr||fe.register())&&ar(!0)};fe.update=function(i){return++_e.cache&&jt(i===!0?2:0)};fe.clearScrollMemory=li;fe.maxScroll=function(i,e){return Ht(i,e?ft:We)};fe.getScrollFunc=function(i,e){return Jt(ht(i),e?ft:We)};fe.getById=function(i){return Jo[i]};fe.getAll=function(){return pe.filter(function(i){return i.vars.id!=="ScrollSmoother"})};fe.isScrolling=function(){return!!At};fe.snapDirectional=fn;fe.addEventListener=function(i,e){var o=dr[i]||(dr[i]=[]);~o.indexOf(e)||o.push(e)};fe.removeEventListener=function(i,e){var o=dr[i],t=o&&o.indexOf(e);t>=0&&o.splice(t,1)};fe.batch=function(i,e){var o=[],t={},r=e.interval||.016,n=e.batchMax||1e9,s=function(_,w){var p=[],d=[],u=k.delayedCall(r,function(){w(p,d),p=[],d=[]}).pause();return function(g){p.length||u.restart(!0),p.push(g.trigger),d.push(g),n<=p.length&&u.progress(1)}},l;for(l in e)t[l]=l.substr(0,2)==="on"&&it(e[l])&&l!=="onRefreshInit"?s(l,e[l]):e[l];return it(n)&&(n=n(),$e(fe,"refresh",function(){return n=e.batchMax()})),Kr(i).forEach(function(f){var _={};for(l in t)_[l]=t[l];_.trigger=f,o.push(fe.create(_))}),o};var Rn=function(e,o,t,r){return o>r?e(r):o<0&&e(0),t>r?(r-o)/(t-o):t<0?o/(o-t):1},Go=function i(e,o){o===!0?e.style.removeProperty("touch-action"):e.style.touchAction=o===!0?"auto":o?"pan-"+o+(ze.isTouch?" pinch-zoom":""):"none",e===St&&i(Pe,o)},go={auto:1,scroll:1},as=function(e){var o=e.event,t=e.target,r=e.axis,n=(o.changedTouches?o.changedTouches[0]:o).target,s=n._gsap||k.core.getCache(n),l=nt(),f;if(!s._isScrollT||l-s._isScrollT>2e3){for(;n&&n!==Pe&&(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth||!(go[(f=It(n)).overflowY]||go[f.overflowX]));)n=n.parentNode;s._isScroll=n&&n!==t&&!fr(n)&&(go[(f=It(n)).overflowY]||go[f.overflowX]),s._isScrollT=l}(s._isScroll||r==="x")&&(o.stopPropagation(),o._gsapAllow=!0)},fi=function(e,o,t,r){return ze.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:o,onWheel:r=r&&as,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return t&&$e(Ie,ze.eventTypes[0],On,!1,!0)},onDisable:function(){return Ve(Ie,ze.eventTypes[0],On,!0)}})},ls=/(input|label|select|textarea)/i,kn,On=function(e){var o=ls.test(e.target.tagName);(o||kn)&&(e._gsapAllow=!0,kn=o)},cs=function(e){nr(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var o=e,t=o.normalizeScrollX,r=o.momentum,n=o.allowNestedScroll,s=o.onRelease,l,f,_=ht(e.target)||St,w=k.core.globals().ScrollSmoother,p=w&&w.get(),d=$t&&(e.content&&ht(e.content)||p&&e.content!==!1&&!p.smooth()&&p.content()),u=Jt(_,We),g=Jt(_,ft),M=1,m=(ze.isTouch&&me.visualViewport?me.visualViewport.scale*me.visualViewport.width:me.outerWidth)/me.innerWidth,re=0,$=it(r)?function(){return r(l)}:function(){return r||2.8},ee,b,Te=fi(_,e.type,!0,n),H=function(){return b=!1},I=zt,he=zt,X=function(){f=Ht(_,We),he=Xr($t?1:0,f),t&&(I=Xr(0,Ht(_,ft))),ee=ur},h=function(){d._gsap.y=Nr(parseFloat(d._gsap.y)+u.offset)+"px",d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(d._gsap.y)+", 0, 1)",u.offset=u.cacheID=0},N=function(){if(b){requestAnimationFrame(H);var oe=Nr(l.deltaY/2),x=he(u.v-oe);if(d&&x!==u.v+u.offset){u.offset=x-u.v;var a=Nr((parseFloat(d&&d._gsap.y)||0)-u.offset);d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",d._gsap.y=a+"px",u.cacheID=_e.cache,jt()}return!0}u.offset&&h(),b=!0},v,G,Q,ve,q=function(){X(),v.isActive()&&v.vars.scrollY>f&&(u()>f?v.progress(1)&&u(f):v.resetTo("scrollY",f))};return d&&k.set(d,{y:"+=0"}),e.ignoreCheck=function(A){return $t&&A.type==="touchmove"&&N()||M>1.05&&A.type!=="touchstart"||l.isGesturing||A.touches&&A.touches.length>1},e.onPress=function(){b=!1;var A=M;M=Nr((me.visualViewport&&me.visualViewport.scale||1)/m),v.pause(),A!==M&&Go(_,M>1.01?!0:t?!1:"x"),G=g(),Q=u(),X(),ee=ur},e.onRelease=e.onGestureStart=function(A,oe){if(u.offset&&h(),!oe)ve.restart(!0);else{_e.cache++;var x=$(),a,E;t&&(a=g(),E=a+x*.05*-A.velocityX/.227,x*=Rn(g,a,E,Ht(_,ft)),v.vars.scrollX=I(E)),a=u(),E=a+x*.05*-A.velocityY/.227,x*=Rn(u,a,E,Ht(_,We)),v.vars.scrollY=he(E),v.invalidate().duration(x).play(.01),($t&&v.vars.scrollY>=f||a>=f-1)&&k.to({},{onUpdate:q,duration:x})}s&&s(A)},e.onWheel=function(){v._ts&&v.pause(),nt()-re>1e3&&(ee=0,re=nt())},e.onChange=function(A,oe,x,a,E){if(ur!==ee&&X(),oe&&t&&g(I(a[2]===oe?G+(A.startX-A.x):g()+oe-a[1])),x){u.offset&&h();var V=E[2]===x,be=V?Q+A.startY-A.y:u()+x-E[1],ae=he(be);V&&be!==ae&&(Q+=ae-be),u(ae)}(x||oe)&&jt()},e.onEnable=function(){Go(_,t?!1:"x"),fe.addEventListener("refresh",q),$e(me,"resize",q),u.smooth&&(u.target.style.scrollBehavior="auto",u.smooth=g.smooth=!1),Te.enable()},e.onDisable=function(){Go(_,!0),Ve(me,"resize",q),fe.removeEventListener("refresh",q),Te.kill()},e.lockAxis=e.lockAxis!==!1,l=new ze(e),l.iOS=$t,$t&&!u()&&u(1),$t&&k.ticker.add(zt),ve=l._dc,v=k.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:ui(u,u(),function(){return v.pause()})},onUpdate:jt,onComplete:ve.vars.onComplete}),l};fe.sort=function(i){if(it(i))return pe.sort(i);var e=me.pageYOffset||0;return fe.getAll().forEach(function(o){return o._sortY=o.trigger?e+o.trigger.getBoundingClientRect().top:o.start+me.innerHeight}),pe.sort(i||function(o,t){return(o.vars.refreshPriority||0)*-1e6+(o.vars.containerAnimation?1e6:o._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};fe.observe=function(i){return new ze(i)};fe.normalizeScroll=function(i){if(typeof i>"u")return lt;if(i===!0&&lt)return lt.enable();if(i===!1){lt&&lt.kill(),lt=i;return}var e=i instanceof ze?i:cs(i);return lt&&lt.target===e.target&&lt.kill(),fr(e.target)&&(lt=e),e};fe.core={_getVelocityProp:Vo,_inputObserver:fi,_scrollers:_e,_proxies:Gt,bridge:{ss:function(){At||pr("scrollStart"),At=nt()},ref:function(){return ot}}};ei()&&k.registerPlugin(fe);var Qr=function(){var i=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(w){w.preventDefault(),t(++i%e.children.length)},!1);function o(w){return e.appendChild(w.dom),w}function t(w){for(var p=0;p<e.children.length;p++)e.children[p].style.display=p===w?"block":"none";i=w}var r=(performance||Date).now(),n=r,s=0,l=o(new Qr.Panel("FPS","#0ff","#002")),f=o(new Qr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var _=o(new Qr.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:o,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){s++;var w=(performance||Date).now();if(f.update(w-r,200),w>=n+1e3&&(l.update(s*1e3/(w-n),100),n=w,s=0,_)){var p=performance.memory;_.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return w},update:function(){r=this.end()},domElement:e,setMode:t}};Qr.Panel=function(i,e,o){var t=1/0,r=0,n=Math.round,s=n(window.devicePixelRatio||1),l=80*s,f=48*s,_=3*s,w=2*s,p=3*s,d=15*s,u=74*s,g=30*s,M=document.createElement("canvas");M.width=l,M.height=f,M.style.cssText="width:80px;height:48px";var m=M.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=o,m.fillRect(0,0,l,f),m.fillStyle=e,m.fillText(i,_,w),m.fillRect(p,d,u,g),m.fillStyle=o,m.globalAlpha=.9,m.fillRect(p,d,u,g),{dom:M,update:function(re,$){t=Math.min(t,re),r=Math.max(r,re),m.fillStyle=o,m.globalAlpha=1,m.fillRect(0,0,l,d),m.fillStyle=e,m.fillText(n(re)+" "+i+" ("+n(t)+"-"+n(r)+")",_,w),m.drawImage(M,p+s,d,u-s,g,p,d,u-s,g),m.fillRect(p+u-s,d,s,g),m.fillStyle=o,m.globalAlpha=.9,m.fillRect(p+u-s,d,s,n((1-re/$)*g))}}};const di={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class eo{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const us=new Pi(-1,1,1,-1,0,1);class fs extends xr{constructor(){super(),this.setAttribute("position",new hn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new hn([0,2,0,0,2,0],2))}}const ds=new fs;class pi{constructor(e){this._mesh=new Ne(ds,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,us)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ps extends eo{constructor(e,o){super(),this.textureID=o!==void 0?o:"tDiffuse",e instanceof sr?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Wo.clone(e.uniforms),this.material=new sr({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new pi(this.material)}render(e,o,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(o),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Bn extends eo{constructor(e,o){super(),this.scene=e,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,o,t){const r=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let s,l;this.inverse?(s=0,l=1):(s=1,l=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),n.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),n.buffers.stencil.setClear(l),n.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(o),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.color.setMask(!0),n.buffers.depth.setMask(!0),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(r.EQUAL,1,4294967295),n.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),n.buffers.stencil.setLocked(!0)}}class hs extends eo{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class gs{constructor(e,o){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),o===void 0){const t=e.getSize(new xt);this._width=t.width,this._height=t.height,o=new _o(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:vo}),o.texture.name="EffectComposer.rt1"}else this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ps(di),this.copyPass.material.blending=Mi,this.clock=new Ei}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,o){this.passes.splice(o,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const o=this.passes.indexOf(e);o!==-1&&this.passes.splice(o,1)}isLastEnabledPass(e){for(let o=e+1;o<this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const o=this.renderer.getRenderTarget();let t=!1;for(let r=0,n=this.passes.length;r<n;r++){const s=this.passes[r];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),s.needsSwap){if(t){const l=this.renderer.getContext(),f=this.renderer.state.buffers.stencil;f.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),f.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}Bn!==void 0&&(s instanceof Bn?t=!0:s instanceof hs&&(t=!1))}}this.renderer.setRenderTarget(o)}reset(e){if(e===void 0){const o=this.renderer.getSize(new xt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,o){this._width=e,this._height=o;const t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class ms extends eo{constructor(e,o,t=null,r=null,n=null){super(),this.scene=e,this.camera=o,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Mt}render(e,o,t){const r=e.autoClear;e.autoClear=!1;let n,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(n),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=r}}const _s={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Mt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class hr extends eo{constructor(e,o,t,r){super(),this.strength=o!==void 0?o:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new xt(e.x,e.y):new xt(256,256),this.clearColor=new Mt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let n=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new _o(n,s,{type:vo}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let p=0;p<this.nMips;p++){const d=new _o(n,s,{type:vo});d.texture.name="UnrealBloomPass.h"+p,d.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(d);const u=new _o(n,s,{type:vo});u.texture.name="UnrealBloomPass.v"+p,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),n=Math.round(n/2),s=Math.round(s/2)}const l=_s;this.highPassUniforms=Wo.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new sr({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const f=[3,5,7,9,11];n=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let p=0;p<this.nMips;p++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(f[p])),this.separableBlurMaterials[p].uniforms.invSize.value=new xt(1/n,1/s),n=Math.round(n/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=o,this.compositeMaterial.uniforms.bloomRadius.value=.1;const _=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=_,this.bloomTintColors=[new Ue(1,1,1),new Ue(1,1,1),new Ue(1,1,1),new Ue(1,1,1),new Ue(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const w=di;this.copyUniforms=Wo.clone(w.uniforms),this.blendMaterial=new sr({uniforms:this.copyUniforms,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,blending:Tt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Mt,this.oldClearAlpha=1,this.basic=new pt,this.fsQuad=new pi(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,o){let t=Math.round(e/2),r=Math.round(o/2);this.renderTargetBright.setSize(t,r);for(let n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(t,r),this.renderTargetsVertical[n].setSize(t,r),this.separableBlurMaterials[n].uniforms.invSize.value=new xt(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,o,t,r,n){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),n&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let f=0;f<this.nMips;f++)this.fsQuad.material=this.separableBlurMaterials[f],this.separableBlurMaterials[f].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[f].uniforms.direction.value=hr.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[f]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[f].uniforms.colorTexture.value=this.renderTargetsHorizontal[f].texture,this.separableBlurMaterials[f].uniforms.direction.value=hr.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[f]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[f];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,n&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeparableBlurMaterial(e){const o=[];for(let t=0;t<e;t++)o.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new sr({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new xt(.5,.5)},direction:{value:new xt(.5,.5)},gaussianCoefficients:{value:o}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new sr({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}hr.BlurDirectionX=new xt(1,0);hr.BlurDirectionY=new xt(0,1);class vs extends Ii{constructor(e,o={}){const t=o.font;if(t===void 0)super();else{const r=t.generateShapes(e,o.size);o.depth===void 0&&(o.depth=50),o.bevelThickness===void 0&&(o.bevelThickness=10),o.bevelSize===void 0&&(o.bevelSize=8),o.bevelEnabled===void 0&&(o.bevelEnabled=!1),super(r,o)}this.type="TextGeometry"}}function ws(i,e,o,t){const{CUBE_SIZE:r,FIRST_CUBE_Z:n}=o,s=8,l=24,f=.075;let _,w=[],p=[],d=[],u=[];const g=(m,re,$,ee)=>{const b=new qr(m,m,m),Te=new zr(b),H=[new gt({color:16711680,transparent:!0,opacity:ee.opacity,blending:Tt}),new gt({color:65280,transparent:!0,opacity:ee.opacity,blending:Tt}),new gt({color:255,transparent:!0,opacity:ee.opacity,blending:Tt}),new gt({color:65535,transparent:!0,opacity:ee.opacity,blending:Tt}),new gt({color:16711935,transparent:!0,opacity:ee.opacity,blending:Tt}),new gt({color:16776960,transparent:!0,opacity:ee.opacity,blending:Tt})],I=new Bt,he=Te.getAttribute("position").array,X=[];for(let v=0;v<he.length/3;v+=2)X.push(v,v+1);const h=Array(6).fill(null).map(()=>new xr),N=Array(6).fill(null).map(()=>[]);for(let v=0;v<X.length/2;v++){const G=v%6;N[G].push(X[v*2],X[v*2+1])}return h.forEach((v,G)=>{v.setIndex(N[G]),v.setAttribute("position",Te.getAttribute("position"));const Q=new Ut(v,H[G]);I.add(Q)}),I.position.z=re,I.rotation.z=$,I};return(()=>{const $=.9/(l-1);for(let X=0;X<l;X++)p[X]=new gt({transparent:!0,opacity:1-X*$});if(_=new Bt,!_){console.error("introGroup failed to initialize");return}for(let X=0;X<l;X++){const h=r-X*s,N=g(h,0,0,p[X]),v=N.children.map(G=>G.material);u.push(v.map(G=>({material:G,originalColor:G.color.clone()}))),_.add(N)}_.position.z=n,e.add(_),w.push(_),d=p.map(X=>X.opacity);const ee=Fe.timeline({repeat:-1});ee.to(_.rotation,{x:Re.degToRad(360),duration:12,ease:"none"},0),ee.to(_.rotation,{y:Re.degToRad(360),duration:10,ease:"none"},0),ee.to(_.rotation,{z:Re.degToRad(360),duration:14,ease:"none"},0);let b=-1,Te=0;const H=f*1e3,I=l*H,he=X=>{const h=X%I/H,N=Math.floor(h)%l;b!==-1&&X-Te>=H&&(u[b].forEach(Q=>{Q.material.opacity=d[b],Q.material.color.copy(Q.originalColor)}),b=-1),b===-1&&N!==b&&(b=N,Te=X,u[b].forEach(G=>{G.material.opacity=1,G.material.color.set(1,1,1)})),requestAnimationFrame(he)};requestAnimationFrame(he)})(),{introCubes:w}}class ys extends Ai{constructor(e){super(e)}load(e,o,t,r){const n=this,s=new Di(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){const f=n.parse(JSON.parse(l));o&&o(f)},t,r)}parse(e){return new bs(e)}}class bs{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,o=100){const t=[],r=xs(e,o,this.data);for(let n=0,s=r.length;n<s;n++)t.push(...r[n].toShapes());return t}}function xs(i,e,o){const t=Array.from(i),r=e/o.resolution,n=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*r,s=[];let l=0,f=0;for(let _=0;_<t.length;_++){const w=t[_];if(w===`
`)l=0,f-=n;else{const p=Ts(w,r,l,f,o);l+=p.offsetX,s.push(p.path)}}return s}function Ts(i,e,o,t,r){const n=r.glyphs[i]||r.glyphs["?"];if(!n){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const s=new Ri;let l,f,_,w,p,d,u,g;if(n.o){const M=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let m=0,re=M.length;m<re;)switch(M[m++]){case"m":l=M[m++]*e+o,f=M[m++]*e+t,s.moveTo(l,f);break;case"l":l=M[m++]*e+o,f=M[m++]*e+t,s.lineTo(l,f);break;case"q":_=M[m++]*e+o,w=M[m++]*e+t,p=M[m++]*e+o,d=M[m++]*e+t,s.quadraticCurveTo(p,d,_,w);break;case"b":_=M[m++]*e+o,w=M[m++]*e+t,p=M[m++]*e+o,d=M[m++]*e+t,u=M[m++]*e+o,g=M[m++]*e+t,s.bezierCurveTo(p,d,u,g,_,w);break}}return{offsetX:n.ha*e,path:s}}function Ln(i,e,o,t,r,n){const{CUBE_SIZE:s,CUBE_SPACING:l,FIRST_CUBE_Z:f}=e,_=f-(o.length+1)*l,w=65535,p=16711935,d=16711680,u=Re.degToRad(15),g=1e3,M=.5,m=80,re=1,$=15,ee=.1;let b=[],Te=null,H=null,I=!1,he=!1,X=new ki,h=new xt,N=null,v=null,G=null,Q=!1,ve=null;const q=Hn(),A=(C,P,ie,U,Y,L)=>{const O=new Bt;O.position.z=ie,O.rotation.z=U,O.userData.isActive=!1;const S=new qr(P,P,P),R=new zr(S),B=new gt({color:new Mt(w),transparent:!0,opacity:0}),D=new Ut(R,B);D.geometry.computeBoundingSphere(),O.add(D);let c="right";const y=P/2;if(Y&&n.showKeyarts)switch(["left","top","right","bottom"].includes(L)?L:"left"){case"left":c="right";break;case"top":c="bottom";break;case"right":c="left";break;case"bottom":c="top";break}const z=()=>{const Se=new gn(40,24),Oe=new zr(Se),j=new gt({color:new Mt(w),transparent:!0,opacity:0,visible:!0}),de=new Ut(Oe,j);de.userData.isPortal=!0,de.userData.isAnimating=!1,de.geometry.computeBoundingSphere();const Ze=new Vt(120,120),dt=new pt({visible:!1,side:Xt}),K=new Ne(Ze,dt);K.userData.isPortalHitbox=!0,K.userData.portal=de,K.geometry.computeBoundingSphere();const ge=new Bt,Ge=new Vt(re,$),F=65/2;for(let Ae=0;Ae<m;Ae++){const mt=new pt({color:new Mt(p),transparent:!0,opacity:0,visible:!1,side:Xt}),te=new Ne(Ge,mt),_t=Ae/m*Math.PI*2;te.position.set(Math.cos(_t)*F,Math.sin(_t)*F,0),te.rotation.z=_t+Math.PI/2,te.userData.baseOpacity=.01,te.userData.index=Ae,te.geometry.computeBoundingSphere(),ge.add(te)}const Pt=2,Dt=25;for(let Ae=1;Ae<Dt;Ae++){const mt=new gn(40,24),te=new zr(mt),_t=Re.lerp(1,.1,Ae/(Dt-1)),vt=new gt({color:new Mt(w),transparent:!0,opacity:0}),Qe=new Ut(te,vt);Qe.userData.isPortal=!0,Qe.userData.maxOpacity=_t,Qe.position.z=-Ae*Pt,Qe.geometry.computeBoundingSphere(),de.add(Qe)}switch(de.userData.maxOpacity=1,c){case"left":case"right":ge.children.forEach(Ae=>Ae.position.x+=ee);break;case"top":case"bottom":ge.children.forEach(Ae=>Ae.position.y+=ee);break}switch(de.add(ge),O.add(de),O.add(K),de.updateMatrixWorld(!0),ge.updateMatrixWorld(!0),c){case"left":de.position.set(-y,0,0),de.rotation.y=Math.PI/2,K.position.set(-y,0,0),K.rotation.y=Math.PI/2;break;case"top":de.position.set(0,y,0),de.rotation.x=-Math.PI/2,K.position.set(0,y,0),K.rotation.x=Math.PI/2;break;case"right":de.position.set(y,0,0),de.rotation.y=-Math.PI/2,K.position.set(y,0,0),K.rotation.y=-Math.PI/2;break;case"bottom":de.position.set(0,-y,0),de.rotation.x=Math.PI/2,K.position.set(0,-y,0),K.rotation.x=Math.PI/2;break}},se=Z=>{(Z instanceof Ut||Z instanceof Ne)&&Z.geometry&&Z.geometry.computeBoundingSphere(),O.add(Z)};Y&&n.showKeyarts?new vr().load(Y,xe=>{xe.encoding=void 0;const Se=new Vt(P-1,P-1),Oe=new pt({map:xe,transparent:!0,opacity:0,blending:Tt,side:Xt}),j=new Ne(Se,Oe);switch(L){case"left":j.position.set(-y,0,0),U>=Re.degToRad(120)?(j.rotation.y=Math.PI/2,j.rotation.z=-Math.PI):j.rotation.y=Math.PI/2;break;case"top":j.position.set(0,y,0),j.rotation.x=Math.PI/2,j.rotation.z=-Math.PI/2;break;case"right":j.position.set(y,0,0),U>=Re.degToRad(120)?(j.rotation.y=-Math.PI/2,j.rotation.z=-Math.PI):j.rotation.y=-Math.PI/2;break;case"bottom":j.position.set(0,-y,0),U>=Re.degToRad(120)?(j.rotation.x=-Math.PI/2,j.rotation.z=Math.PI/2):(j.rotation.x=-Math.PI/2,j.rotation.z=-Math.PI/2);break}j.geometry.computeBoundingSphere(),se(j),z()},void 0,xe=>{console.error("Error loading keyart:",xe),z()}):z();{new vr().load(t,K=>{K.encoding=void 0;const ge=new Vt(P-1,P-1),Ge=new pt({map:K,transparent:!0,opacity:0,blending:Tt,side:Xt,depthWrite:!1}),F=new Ne(ge,Ge);F.position.set(0,0,-P/2-1),F.rotation.y=0,F.userData.isGridPlane=!0,F.geometry.computeBoundingSphere(),se(F)},void 0,K=>{console.error("Error loading projectGridFile:",K)}),new vr().load(t,K=>{K.encoding=void 0;const ge=new Vt(P-1,P-1),Ge=new pt({map:K,transparent:!0,opacity:0,blending:Tt,side:Xt,depthWrite:!1,color:new Mt(16744448)}),F=new Ne(ge,Ge);F.position.set(0,0,P/2+1),F.rotation.y=0,F.userData.isGridPlane=!0,F.geometry.computeBoundingSphere(),se(F)},void 0,K=>{console.error("Error loading projectGridFile:",K)});const Se=["left","top","right","bottom"],j=[Y&&n.showKeyarts?L||"left":null,c].filter(Boolean),de=Se.filter(K=>!j.includes(K));new vr().load(t,K=>{K.encoding=void 0;const ge=new Vt(P-1,P-1),Ge=new pt({map:K,transparent:!0,opacity:0,blending:Tt,side:Xt,depthWrite:!1,color:new Mt(255)}),F=new Ne(ge,Ge);switch(de[0]){case"left":F.position.set(-y,0,0),F.rotation.y=-Math.PI/2;break;case"top":F.position.set(0,y,0),F.rotation.x=Math.PI/2;break;case"right":F.position.set(y,0,0),F.rotation.y=Math.PI/2;break;case"bottom":F.position.set(0,-y,0),F.rotation.x=-Math.PI/2;break}F.userData.isGridPlane=!0,F.geometry.computeBoundingSphere(),se(F)},void 0,K=>{console.error("Error loading projectGridFile:",K)}),new vr().load(r,K=>{K.encoding=void 0;const ge=new Vt(P-1,P-1),Ge=new pt({map:K,transparent:!0,opacity:0,blending:Tt,side:Xt,depthWrite:!1}),F=new Ne(ge,Ge);switch(de[1]){case"left":F.position.set(-y,0,0),F.rotation.y=-Math.PI/2;break;case"top":F.position.set(0,y,0),F.rotation.x=Math.PI/2;break;case"right":F.position.set(y,0,0),F.rotation.y=Math.PI/2;break;case"bottom":F.position.set(0,-y,0),F.rotation.x=-Math.PI/2;break}F.userData.isGridPlane=!0,F.geometry.computeBoundingSphere(),se(F)},void 0,K=>{console.error("Error loading projectGridFile2:",K)})}O.children.forEach(Z=>{(Z instanceof Ut||Z instanceof Ne)&&Z.geometry&&!Z.geometry.boundingSphere&&Z.geometry.computeBoundingSphere()}),O.updateMatrixWorld(!0);const ne=new Fn().setFromObject(O),we=new Un;return ne.getBoundingSphere(we),O.boundingSphere=we,O},oe=(C,P,ie,U,Y,L)=>{const O=new vs(C,{font:L,size:Y,depth:0,curveSegments:12,bevelEnabled:!1});O.computeBoundingBox(),O.center();const S=new pt({color:16777215,transparent:!0,opacity:0,side:Xt}),R=new Ne(O,S);R.position.set(P,ie,U);const B=O.boundingBox,D=B.max.x-B.min.x,c=B.max.y-B.min.y,y=D+8,z=c+4,se=new Vt(y,z),ne=new pt({color:0,transparent:!0,opacity:0,side:Xt}),we=new Ne(se,ne);return we.position.set(P,ie,U-1),i.add(we),i.add(R),R.userData.backgroundPlane=we,R},x=()=>new Promise(C=>{Te=new ys,Te.load("/fonts/Poppins_Regular.json",P=>{H=P;const ie=Array.isArray(o)?o:[];Array.isArray(o)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",o),ie.forEach((U,Y)=>{const L=f-(Y+1)*l,O=(Y+1)*u,S=A(U,s,L,O,U.keyart,U.keyartLocation);i.add(S),b.push(S),oe(U.title,0,U.size-15,f+90-(Y+1)*l,U.size,P)}),C()},void 0,P=>console.error("Error loading font:",P))}),a=()=>I?Promise.resolve({projectCubes:b,updateCubeColors:ae,loadedFont:H,maxZ:_}):x().then(()=>(I=!0,{projectCubes:b,updateCubeColors:ae,loadedFont:H,maxZ:_})).catch(C=>{throw console.error("Error in loadFontAndText:",C),C}),E=C=>{if(C.userData.isAnimating)return;C.userData.isAnimating=!0;const P=C.children.find(O=>O instanceof Bt);if(!P)return;const ie=P.children,U=ie.length,Y=Fe.timeline({repeat:-1,defaults:{ease:"none"}}),L={value:0};Y.to(L,{value:1,duration:1.5,onUpdate:()=>{ie.forEach(S=>{const R=S.material;if(R.visible){const B=(S.userData.index/U+L.value)%1,c=(Math.sin(B*Math.PI*2)+1)/2,y=.01+(1-.01)*Math.pow(c,4);R.opacity=y}})}}),C.userData.animationTimeline=Y},V=C=>{if(!C.userData.isAnimating)return;C.userData.isAnimating=!1;const P=C.children.find(ie=>ie instanceof Bt);P&&(C.userData.animationTimeline&&(C.userData.animationTimeline.kill(),delete C.userData.animationTimeline),P.children.forEach(ie=>{const U=ie.material;U.opacity=0}))},be=new Oi,ae=C=>{const P=performance.now();be.setFromProjectionMatrix(C.projectionMatrix.clone().multiply(C.matrixWorldInverse));const ie=C.position.z;let U=[];i.traverse(L=>{L instanceof Ne&&L.geometry&&L.geometry.type==="TextGeometry"&&U.push(L)}),he||(he=!0),b.forEach((L,O)=>{if(!L.geometry&&!L.children.length){console.warn(`Cube ${O} has no geometry or children`,L);return}try{if(!be.intersectsObject(L))return}catch(D){console.error(`Error with cube ${O}`,L,D);return}const S=L.position.z,R=Math.abs(ie-S);let B=0;R<=g&&(B=1-R/g),L.userData.isActive=B>=M,L.children.forEach(D=>{if(D instanceof Ut&&!D.userData.isPortal&&!D.userData.isPortalHitbox){const c=D.material;if(R<=g){const y=Re.lerp((w>>16&255)/255,(p>>16&255)/255,B),z=Re.lerp((w>>8&255)/255,(p>>8&255)/255,B),se=Re.lerp((w&255)/255,(p&255)/255,B);c.color.set(y,z,se),c.opacity=Math.min(1,B*2)}else c.opacity=0}else if(D instanceof Ut&&D.userData.isPortal)he&&(B>.1?D.children.forEach(c=>{c instanceof Bt&&c.children.forEach(y=>{y instanceof Ne&&(y.material.visible=!0,!D.userData.animationStarted&&n.showPortalPulses&&(E(D),D.userData.animationStarted=!0))})}):B<=.1&&D.userData.animationStarted&&(D.children.forEach(c=>{c instanceof Bt&&c.children.forEach(y=>{y instanceof Ne&&(y.material.visible=!1)})}),V(D),delete D.userData.animationStarted));else if(D instanceof Ne&&!D.userData.isPortalHitbox){const c=D.material;if(R<=g){const y=1-R/g;c.opacity=Math.min(.8,y*2)}else c.opacity=0}})}),U.forEach(L=>{const O=L.material,S=L.userData.backgroundPlane,R=S==null?void 0:S.material,B=L.position.z,D=Math.abs(ie-B+120);if(D<=g){const c=1-D/g,y=Math.min(1,c*2);O.opacity=y,R&&(R.opacity=y*.8)}else O.opacity=0,R&&(R.opacity=0)});const Y=performance.now();Y-P>16&&console.log(`updateCubeColors: ${Y-P}ms`)};return{getInitializedData:a,updateCubeColors:ae,setupInteractivity:(C,P,ie)=>{ve=ie;let U=null,Y=null;const L=(B,D=!0)=>{const c=[B,...B.children.filter(z=>z instanceof Ut&&z.userData.isPortal)],y=D?25:2;c.forEach((z,se)=>{let ne=-se*y;(B.position.y>0&&B.rotation.x===-Math.PI/2||B.position.y<0&&B.rotation.x===Math.PI/2)&&(ne=se*y);const we=D?z.userData.maxOpacity:0;Fe.to(z.position,{z:ne,duration:1,ease:"power3.out",delay:.5}),Fe.to(z.material,{opacity:we,duration:1,ease:"power3.out",delay:.5})})},O=B=>{h.x=B.clientX/window.innerWidth*2-1,h.y=-(B.clientY/window.innerHeight)*2+1,X.setFromCamera(h,C);const D=b.flatMap(y=>y.userData.isActive?y.children.filter(z=>z instanceof Ne&&z.userData.isPortalHitbox):[]),c=X.intersectObjects(D);if(c.length>0){const z=c[0].object.userData.portal;if(N!==z){if(N){const ne=N.material;Fe.to(ne.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5})}N=z;const se=N.material;Fe.to(se.color,{r:(d>>16&255)/255,g:(d>>8&255)/255,b:(d&255)/255,duration:.5})}P.style.cursor="pointer"}else{if(N){const y=N.material;Fe.to(y.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5}),N=null}P.style.cursor="auto"}},S=B=>{h.x=B.clientX/window.innerWidth*2-1,h.y=-(B.clientY/window.innerHeight)*2+1,X.setFromCamera(h,C);const D=b.flatMap(Z=>Z.userData.isActive?Z.children.filter(xe=>xe instanceof Ne&&xe.userData.isPortalHitbox):[]),c=X.intersectObjects(D);if(c.length===0)return;const y=c[0].object,z=y.userData.portal,se=y.parent,ne=b.indexOf(se),we=o[ne];if(Q&&z===Y){z.getWorldPosition(new Ue);let Z=new Ue;const xe=e.CUBE_SIZE/2;z.position.x===xe?Z.set(-1,0,0):z.position.x===-xe?Z.set(1,0,0):z.position.y===xe?Z.set(0,-1,0):z.position.y===-xe&&Z.set(0,1,0),Z.applyQuaternion(se.getWorldQuaternion(new Bi)).normalize();const Oe=C.position.clone().clone().add(Z.clone().multiplyScalar(-675)),j=Z.clone().multiplyScalar(-1e3),de=Oe.clone().add(j);Fe.to(C.position,{x:Oe.x,y:Oe.y,z:Oe.z,duration:1,ease:"power2.in",onUpdate:()=>C.lookAt(de),onComplete:()=>{we!=null&&we.slug&&(q.setScrollPosition(window.scrollY),gi.visit(route("project.show",{project:we.slug}),{preserveScroll:!1}))}})}else if(!Q){v||(v=C.position.clone(),G=new Ue(0,0,_)),ve&&ie(!0,v,G);const Z=z.getWorldPosition(new Ue);Fe.to(C.position,{x:0,y:0,z:se.getWorldPosition(new Ue).z,duration:2,ease:"power3.out"}),Fe.to({},{duration:2,ease:"power3.out",onUpdate:function(){const xe=this.progress(),Se=C.getWorldDirection(new Ue).multiplyScalar(1e3).add(C.position),Oe=Re.lerp(Se.x,Z.x,xe),j=Re.lerp(Se.y,Z.y,xe),de=Re.lerp(Se.z,Z.z,xe);C.lookAt(Oe,j,de)},onStart:()=>{Q=!0,U=window.scrollY,document.body.classList.add("no-scrollbar"),Y=z,L(z,!0)}})}},R=B=>{if(!Q||!Y||!v||!G)return;let D=0;if(B instanceof WheelEvent?D=B.deltaY:D=window.scrollY-(U||0),B.preventDefault(),B.stopPropagation(),D>0){window.scrollTo(0,U);return}if(D<0){const c=Y,y=G.clone(),z=v.z;Fe.to(C.position,{x:v.x,y:v.y,z,duration:1,ease:"power3.out"}),Fe.to({},{duration:1,ease:"power3.out",onUpdate:function(){const se=this.progress(),ne=C.getWorldDirection(new Ue).multiplyScalar(1e3).add(C.position),we=Re.lerp(ne.x,y.x,se),Z=Re.lerp(ne.y,y.y,se),xe=Re.lerp(ne.z,y.z,se);C.lookAt(we,Z,xe)},onComplete:()=>{C.lookAt(y),Q=!1,Y=null,document.body.classList.remove("no-scrollbar"),ve&&ie(!1),L(c,!1),U=null,v=null,G=null}})}};return P.addEventListener("mousemove",O),P.addEventListener("click",S),window.addEventListener("wheel",R,{passive:!1}),window.addEventListener("scroll",R,{passive:!1}),()=>{P.removeEventListener("mousemove",O),P.removeEventListener("click",S),window.removeEventListener("wheel",R),window.removeEventListener("scroll",R)}}}}function Ss(i,e,o,t){const b=o-1e3,Te=Math.abs(-500-b),H=Math.ceil(Te/100),I=()=>{const x=new Bt;let a=null,E=null;const V=[],be=[],ae=[],Me=[],C=[];{const P=new qr(100,100,100),ie=new zr(P),U=32*H,Y=new Li;Y.copy(ie),Y.instanceCount=U;const L=new gt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),O=new Float32Array(U*3),S=new Float32Array(U*3),R=new Float32Array(U*3),B=32*100,D=-3200/2+100/2,c=-500;for(let K=0;K<32;K++){const ge=he(K);for(let Ge=0;Ge<H;Ge++){const F=K*H+Ge,Pt=D+K*100,Dt=c-Ge*100,Ae=Re.randFloat(100,300),mt=Ae/100,te=-600+Ae/2;O[F*3]=Pt,O[F*3+1]=te,O[F*3+2]=Dt,S[F*3]=1,S[F*3+1]=mt,S[F*3+2]=1,R[F*3]=ge,R[F*3+1]=ge,R[F*3+2]=ge}}Y.setAttribute("instancePosition",new ko(O,3)),Y.setAttribute("instanceScale",new ko(S,3)),Y.setAttribute("color",new ko(R,3)),L.onBeforeCompile=K=>{K.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${K.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new Ut(Y,L);const y=-3200/2,z=B/2,se=-600,ne=-300,we=b,Z=-500;Y.boundingBox=new Fn(new Ue(y,se,we),new Ue(z,ne,Z));const xe=(y+z)/2,Se=(se+ne)/2,Oe=(we+Z)/2,j=z-y,de=ne-se,Ze=Z-we,dt=Math.sqrt(j*j+de*de+Ze*Ze)/2;Y.boundingSphere=new Un(new Ue(xe,Se,Oe),dt),x.add(a)}{E=new Bt;const P=32*100/5,ie=-3200/2;for(let Y=0;Y<6;Y++){let O=ie+Y*P,S=-500;const R=[new Ue(O,-450,S)];let B=0;for(;S>b;){const D=S===-500?Re.randFloat(300,800):Math.min(Re.randFloat(300,800),Math.abs(S-b));if(S-=D,R.push(new Ue(O,-450,S)),B+=D,S<=b){R[R.length-1].z=b;break}const c=Math.random()<.5?-1:1,y=Re.randFloat(100,300);O+=c*y,R.push(new Ue(O,-450,S)),B+=y}be.push({points:R,totalLength:B})}const U=new qr(4,4,4);for(let Y=0;Y<6;Y++){const L=be[Y],O=L.totalLength,S=O/60;for(let R=0;R<60;R++){const B=new pt({color:16711680,fog:!0}),D=new Ne(U,B),c=R*S;let y=c;for(let z=0;z<L.points.length-1;z++){const se=L.points[z],ne=L.points[z+1],we=se.distanceTo(ne);if(y<=we){const Z=y/we;D.position.lerpVectors(se,ne,Z);break}y-=we}V.push(D),ae.push(c),Me.push(Y),C.push(1),E.add(D)}for(let R=0;R<60;R++){const B=new pt({color:16777215,fog:!0}),D=new Ne(U,B),c=O-(R*S+S/2);let y=O-c;const z=[...L.points].reverse();for(let se=0;se<z.length-1;se++){const ne=z[se],we=z[se+1],Z=ne.distanceTo(we);if(y<=Z){const xe=y/Z;D.position.lerpVectors(ne,we,xe);break}y-=Z}V.push(D),ae.push(c),Me.push(Y),C.push(-1),E.add(D)}}e.add(E)}return e.add(x),{cityGroup:x,instancedLines:a,particleGroup:E,particles:V,paths:be,particleDistances:ae,particlePaths:Me,particleDirections:C}},he=x=>{if(x<10)return .05+x*.10555555555555556;if(x>=22){const a=31-x,E=(1-.05)/9;return .05+a*E}return 1},{cityGroup:X,instancedLines:h,particleGroup:N,particles:v,paths:G,particleDistances:Q,particlePaths:ve,particleDirections:q}=I();return{cityGroup:X,buildingLines:h?[h]:[],updateParticles:x=>{const a=100*x;for(let E=0;E<v.length;E++){const V=q[E],be=ve[E],ae=G[be],Me=ae.totalLength;Q[E]+=a*V,V===1?(Q[E]=Q[E]%Me,Q[E]<0&&(Q[E]+=Me)):Q[E]=(Q[E]+Me)%Me;const C=Q[E],P=V===1?ae.points:[...ae.points].reverse();let ie=V===1?C:Me-C;for(let U=0;U<P.length-1;U++){const Y=P[U],L=P[U+1],O=Y.distanceTo(L);if(ie<=O){const S=ie/O;v[E].position.lerpVectors(Y,L,S);break}ie-=O}}},dispose:()=>{h&&(X.remove(h),h.geometry.dispose(),h.material.dispose()),N&&(e.remove(N),N.children.forEach(x=>{x.geometry.dispose(),x.material.dispose()})),e.remove(X)}}}Fe.registerPlugin(fe);function Cs(i,e,o,t,r,n,s={},l,f){fe.config({syncTouch:!0});const{CUBE_SPACING:_,FIRST_CUBE_Z:w}=n,p=(t==null?void 0:t.length)||0,d=w-(p+1)*_;let u=!1;const g=Math.abs(d)+(p-1)*_,M=Fe.timeline();return Fe.timeline({scrollTrigger:{trigger:o.value,start:"top top",end:`+=${g}`,scrub:s.scrub||.5,pin:!0,onUpdate:$=>{if(!u){const ee=$.progress,b=Re.lerp(0,d,ee);e.position.set(0,0,b),e.lookAt(0,0,d)}r(e)}}}).fromTo(e.position,{z:0},{z:d,duration:1,ease:"none"}),{setReverting:re=>{u=re},timeline:M}}function Ps(i,e,o){const l=o-1e3,f=1e3,_=o,w=150,p=-500,d=o,u=new xr,g=new Float32Array(2e3*3),M=new Float32Array(2e3),m=new Float32Array(2e3);let re=0;for(;re<2e3;){const H=(Math.random()-.5)*4e3,I=(Math.random()-.5)*4e3,he=-1e3+Math.random()*(l- -1e3),X=he>_&&Math.abs(H)<f&&Math.abs(I)<f,h=Math.abs(H)<w&&Math.abs(I)<w&&he>d&&he<p;if(!X&&!h){const N=re*3;g[N]=H,g[N+1]=I,g[N+2]=he;const v=.1+Math.random()*(.7-.1);M[re]=v,m[re]=v,re++}}u.setAttribute("position",new mn(g,3)),u.setAttribute("opacity",new mn(m,1));const $=new sr({uniforms:{color:{value:new Mt(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),ee=new Ni(u,$);i.add(ee);const b=u.attributes.opacity;for(let H=0;H<2e3;H++)Fe.to({opacity:M[H]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){m[H]=this.targets()[0].opacity,b.needsUpdate=!0}});return{dispose:()=>{Fe.killTweensOf(m),i.remove(ee),u.dispose(),$.dispose()}}}function Ms(i,e){const t=e-1500,r=100,n=2,s=64,l=1e3,f=s*3,_=[4,4.5,5],w=6;let p,d,u,g,M,m;const re=[],$=[[],[],[]],ee=[[],[],[]],b=[[],[],[]];let Te=[0,0,0];const H=()=>{const h=0-t,N=[];for(let x=0;x<r;x++){const a=x/(r-1),E=0-a*h,V=a*5*2*Math.PI,be=90*(.8+.2*Math.sin(V*2)),ae=new Ue(be*Math.cos(V),be*Math.sin(V),E);(isNaN(ae.x)||isNaN(ae.y)||isNaN(ae.z))&&console.error("NaN in chaserPath points",{t:a,z:E,projectMaxZ:e}),N.push(ae)}p=new Oo(N);const v=new xr().setFromPoints(p.getPoints(200));g=new Bo(v,new gt({color:16711935,linewidth:2,visible:!1})),i.add(g);const G=[];for(let x=0;x<r;x++){const a=x/(r-1),E=0-a*h,V=a*3*2*Math.PI,be=60*(.8+.2*Math.sin(V*4)),ae=new Ue(be*Math.cos(V),be*Math.sin(V),E);(isNaN(ae.x)||isNaN(ae.y)||isNaN(ae.z))&&console.error("NaN in chaserPath2 points",{t:a,z:E,projectMaxZ:e}),G.push(ae)}d=new Oo(G);const Q=new xr().setFromPoints(d.getPoints(200));M=new Bo(Q,new gt({color:65535,linewidth:2,visible:!1})),i.add(M);const ve=[];for(let x=0;x<r;x++){const a=x/(r-1),E=0-a*h,V=a*7*2*Math.PI,be=100,ae=90,Me=.1*Math.sin(V),C=new Ue(be*(1+Me)*Math.cos(V),ae*(1-Me)*Math.sin(V),E);(isNaN(C.x)||isNaN(C.y)||isNaN(C.z))&&console.error("NaN in chaserPath3 points",{t:a,z:E,projectMaxZ:e}),ve.push(C)}u=new Oo(ve);const q=new xr().setFromPoints(u.getPoints(200));m=new Bo(q,new gt({color:16776960,linewidth:2,visible:!1})),i.add(m);const A=[16711680,65280,255],oe=new qr(n,n,n);oe.attributes.color&&delete oe.attributes.color;for(let x=0;x<3;x++){const a=new Bt;a.opacity=1,a.renderOrder=1,re[x]=a,i.add(a);for(let E=0;E<f;E++){const V=new pt({color:A[x],transparent:!0,opacity:0,blending:Fi,fog:!0,depthWrite:!1}),be=new Ne(oe,V);be.renderOrder=1,be.visible=!1,a.add(be),$[x][E]=be,ee[x][E]=0,b[x][E]=!1}}},I=h=>{const N=[p,d,u][h],v=N.getLength(),G=b[h].filter(ve=>ve).length;if(f-G>=s){let ve=0;for(let q=0;q<s;q++){const A=b[h].findIndex(ae=>!ae);if(A===-1){console.warn(`No available chasers for path ${h}, emitted ${ve}/${s}`);break}const oe=ve/(s-1),x=.05+(1-.05)*Math.pow(oe,3),a=new pt({color:[16711680,65280,255][h],transparent:!0,opacity:x,blending:Tt,fog:!0,depthWrite:!1});$[h][A].material=a,$[h][A].visible=!0;const E=ve*w;ee[h][A]=E,b[h][A]=!0;const V=E/v,be=N.getPointAt(V);$[h][A].position.copy(be),ve++}}},he=h=>{const N=performance.now()/1e3,v=[p,d,u];for(let G=0;G<3;G++){N-Te[G]>=_[G]&&(I(G),Te[G]=N);const Q=v[G],ve=Q.getLength(),q=l*h;for(let A=0;A<f;A++)if(b[G][A]){ee[G][A]+=q;const oe=ee[G][A]/ve;if(oe>=1)$[G][A].visible=!1,b[G][A]=!1,ee[G][A]=0;else{const x=Q.getPointAt(oe);$[G][A].position.copy(x)}}}};return H(),{chaserPath:p,chaserPath2:d,chaserPath3:u,updateChasers:he,dispose:()=>{i.remove(g),i.remove(M),i.remove(m),g.geometry.dispose(),g.material.dispose(),M.geometry.dispose(),M.material.dispose(),m.geometry.dispose(),m.material.dispose(),re.forEach(h=>{h.children.forEach(N=>{N.geometry.dispose(),N.material.dispose()}),i.remove(h)})}}}const Es={class:"preloader"},Is={class:"progress-label"},As=rn({__name:"Preloader",props:{progress:{}},setup(i){return(e,o)=>(Co(),on("div",Es,[ir("div",Is,mi(Math.round(e.progress))+"%",1)]))}}),Ds=zn(As,[["__scopeId","data-v-e5eadefa"]]),Yo=250,mo=500,kr=-500,Xo=-520,Nn=-720,Rs=rn({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(i){Fe.registerPlugin(fe);const e=Hn();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const o=i,t={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0},r=rr(null),n=rr(null),s=rr(!1),l=rr(0),f=rr(!1),_=rr(!0),w=new Map;rr(null);let p,d,u,g,M,m,re,$=null,ee=null,b=null,Te=null,H=null,I=[],he=null,X=null,h=0;const N=()=>{const q=r.value?r.value.getBoundingClientRect().width:window.innerWidth,A=window.innerHeight,oe=e.isMobile?.75:1;u.setSize(q*oe,A*oe),g.setSize(q*oe,A*oe),d.aspect=q/A,d.far=6e4,d.updateProjectionMatrix(),u.domElement.style.width=`${q}px`,u.domElement.style.height=`${A}px`},v=q=>w.has(q)?Promise.resolve(w.get(q)):new Promise((A,oe)=>{new vr().load(q,a=>{a.encoding=void 0,w.set(q,a),A(a)},void 0,a=>oe(a))}),G=async()=>{p=new Ui,p.background=new Mt(0),p.fog=new zi(0,700,4e3),d=new Hi(75,window.innerWidth/window.innerHeight,1,6e4),d.position.set(0,0,0),d.lookAt(0,0,1e3),u=new Gi({antialias:!0}),e.isMobile?u.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):u.setPixelRatio(window.devicePixelRatio),u.toneMapping=Yi,u.toneMappingExposure=1,u.outputEncoding=void 0,g=new gs(u);const q=new ms(p,d);if(g.addPass(q),e.isMobile?M=new hr(new xt(window.innerWidth,window.innerHeight),1,.2,0):M=new hr(new xt(window.innerWidth,window.innerHeight),1.6,.2,0),M.renderToScreen=!0,g.addPass(M),r.value)r.value.appendChild(u.domElement),u.domElement.style.opacity="0";else return;m=new Qr,m.dom.style.position="fixed",m.dom.style.top="0px",m.dom.style.left="0px",m.dom.style.zIndex="1000",document.body.appendChild(m.dom);const A=o.projects.length+2+1;let oe=0;const x=()=>{oe++,l.value=oe/A*100,oe===A&&(s.value=!0)};await v(o.projectGridFile).then(()=>x()).catch(()=>x()),await v(o.projectGridFile2).then(()=>x()).catch(()=>x());for(const V of o.projects)V.keyart?await v(V.keyart).then(()=>x()).catch(()=>x()):x();const a=Ln(p,{CUBE_SIZE:Yo,CUBE_SPACING:mo,FIRST_CUBE_Z:kr},o.projects,o.projectGridFile,o.projectGridFile2,t);let E=-8500;try{const V=await a.getInitializedData();E=V.maxZ!==void 0&&!isNaN(V.maxZ)?V.maxZ:-8500,x();const{introCubes:be}=ws(p,p,{CUBE_SIZE:Yo,FIRST_CUBE_Z:kr},t);if(I=[...be,...V.projectCubes],he=V.updateCubeColors,t.showCars){const{cityGroup:ae,updateParticles:Me,dispose:C}=Ss(p,p,E,t);re=Me,H=C}if(t.showStarfield){const{dispose:ae}=Ps(p,d,E);$=ae}if(t.showChasers){const{dispose:ae,updateChasers:Me}=Ms(p,E);b=ae,Te=Me}N()}catch(V){console.error("Error initializing project cubes:",V)}},Q=(q=0)=>{if(X=requestAnimationFrame(Q),u&&g){const A=(q-h)/1e3;h=q,re(A),Te&&Te(A);const oe=Nn-Xo;let x=0;d.position.z>=Xo?x=0:d.position.z<=Nn?x=1:x=(d.position.z-Xo)/oe,e.isMobile?M.strength=Re.lerp(.5,0,x):M.strength=Re.lerp(1.6,.125,x),g.render()}m.update()};_i(()=>{G().then(()=>{if(s.value){X=requestAnimationFrame(Q);const q=Ln(p,{CUBE_SIZE:Yo,CUBE_SPACING:mo,FIRST_CUBE_Z:kr},o.projects,o.projectGridFile,o.projectGridFile2,t);let A=null;const oe=q.getInitializedData().then(({projectCubes:a})=>{a.forEach(V=>{V.userData.isActive=!0});const E=kr-(o.projects.length-1)*mo;d.position.set(0,0,5e3),d.lookAt(0,0,E),d.updateProjectionMatrix(),he(d),g.render(),I.length&&he&&(A=Cs(p,d,n,I,he,{CUBE_SPACING:mo,FIRST_CUBE_Z:kr},{scrub:e.isMobile?3:1}).setReverting),u&&ee===null&&(ee=q.setupInteractivity(d,u.domElement,V=>{A&&A(V)})),window.scrollTo({top:0,behavior:"auto"})}),x=()=>{oe.then(()=>{_.value=!1,d.position.set(0,0,5e3),d.updateProjectionMatrix(),Fe.to(u.domElement,{opacity:1,duration:.5,ease:"power4.out"});const a={z:5e3};Fe.to(a,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{d.position.z=a.z,d.updateProjectionMatrix()},onComplete:()=>{d.position.z=0,f.value=!0}})})};Fe.delayedCall(.1,x)}}).catch(q=>{console.error("Initialization failed:",q)}),window.addEventListener("resize",ve)}),vi(()=>{X!==null&&cancelAnimationFrame(X),ee&&ee(),window.removeEventListener("resize",ve),fe.getAll().forEach(q=>q.kill()),u.dispose(),g.dispose(),p.clear(),document.body.removeChild(m.dom),$&&$(),b&&b(),H&&H()});const ve=()=>{N(),fe.refresh()};return(q,A)=>(Co(),on("section",{ref_key:"wrapper",ref:n,class:"wrapper"},[Or(wi,{name:"fade"},{default:yi(()=>[_.value?(Co(),bi(Ds,{key:0,progress:l.value},null,8,["progress"])):xi("",!0)]),_:1}),ir("div",{ref_key:"tunnelWrapper",ref:r,class:"tunnel-wrapper"},null,512)],512))}}),ks=zn(Rs,[["__scopeId","data-v-2256df47"]]),Os={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Bs={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Ls={class:"overflow-hidden"},zs=rn({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(i){return(e,o)=>(Co(),on(Ci,null,[Or(Ti(Si),{title:"Welcome"}),ir("div",Os,[ir("nav",Bs,[Or(Xi)]),ir("div",Ls,[Or(ks,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),o[0]||(o[0]=ir("div",{class:"flex justify-center items-center"},null,-1)),o[1]||(o[1]=ir("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),Or(Wi)])],64))}});export{zs as default};
