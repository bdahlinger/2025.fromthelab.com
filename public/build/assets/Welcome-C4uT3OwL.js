import{J as hn,W as gn,I as es,e as ts,o as Cr,a as io,t as mn,d as _o,x as _n,y as wn,b as Lo,T as vn,w as yn,c as xn,f as bn,u as Tn,m as Cn,F as Pn}from"./app-BpeunyZF.js";import{M as We,O as Sn,B as To,F as fs,S as ao,U as Yr,V as kt,W as mr,H as _r,N as Mn,C as En,a as Ct,b as pe,A as Wt,c as Et,E as In,d as Dt,e as _t,g as Ze,f as Fe,h as Mo,i as Uo,j as Gt,k as Dn,l as An,m as Rn,R as ps,n as kn,o as On,P as ro,D as Qt,p as Ns,q as Fs,r as ds,Q as Ln,I as Bn,s as Rr,t as hs,u as Nn,v as kr,w as Or,x as Fn,y as zn,z as Hn,J as Un,K as Gn,T as Yn,X as Wn,L as Xn,G as Zn}from"./GlobalFooter-tuyiAQBq.js";import{_ as zs}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Hs=hn("tunnel",{state:()=>({isMobile:!1,activeProjectSlug:null,scrollPosition:0}),mutations:{storeIsMobile(n,e){n.isMobile=e}},actions:{setActiveProject(n){this.activeProjectSlug=n},clearActiveProject(){this.activeProjectSlug=null},setScrollPosition(n){this.scrollPosition=n,console.log("Scroll position stored:",n)},clearScrollPosition(){this.scrollPosition=0}},persist:!0});function Vn(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function jn(n,e,r){return e&&Vn(n.prototype,e),n}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ht,wr,Lt,Kt,Jt,Co,Us,so,Go,Gs,jt,zt,Ys,Ws=function(){return ht||typeof window<"u"&&(ht=window.gsap)&&ht.registerPlugin&&ht},Xs=1,bo=[],ye=[],Zt=[],Yo=Date.now,Wr=function(e,r){return r},$n=function(){var e=Go.core,r=e.bridge||{},t=e._scrollers,o=e._proxies;t.push.apply(t,ye),o.push.apply(o,Zt),ye=t,Zt=o,Wr=function(i,l){return r[i](l)}},eo=function(e,r){return~Zt.indexOf(e)&&Zt[Zt.indexOf(e)+1][r]},Wo=function(e){return!!~Gs.indexOf(e)},bt=function(e,r,t,o,s){return e.addEventListener(r,t,{passive:o!==!1,capture:!!s})},xt=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},rr="scrollLeft",sr="scrollTop",Xr=function(){return jt&&jt.isPressed||ye.cache++},Pr=function(e,r){var t=function o(s){if(s||s===0){Xs&&(Lt.history.scrollRestoration="manual");var i=jt&&jt.isPressed;s=o.v=Math.round(s)||(jt&&jt.iOS?1:0),e(s),o.cacheID=ye.cache,i&&Wr("ss",s)}else(r||ye.cache!==o.cacheID||Wr("ref"))&&(o.cacheID=ye.cache,o.v=e());return o.v+o.offset};return t.offset=0,e&&t},Mt={s:rr,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Pr(function(n){return arguments.length?Lt.scrollTo(n,ct.sc()):Lt.pageXOffset||Kt[rr]||Jt[rr]||Co[rr]||0})},ct={s:sr,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Mt,sc:Pr(function(n){return arguments.length?Lt.scrollTo(Mt.sc(),n):Lt.pageYOffset||Kt[sr]||Jt[sr]||Co[sr]||0})},It=function(e,r){return(r&&r._ctx&&r._ctx.selector||ht.utils.toArray)(e)[0]||(typeof e=="string"&&ht.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},to=function(e,r){var t=r.s,o=r.sc;Wo(e)&&(e=Kt.scrollingElement||Jt);var s=ye.indexOf(e),i=o===ct.sc?1:2;!~s&&(s=ye.push(e)-1),ye[s+i]||bt(e,"scroll",Xr);var l=ye[s+i],p=l||(ye[s+i]=Pr(eo(e,t),!0)||(Wo(e)?o:Pr(function(_){return arguments.length?e[t]=_:e[t]})));return p.target=e,l||(p.smooth=ht.getProperty(e,"scrollBehavior")==="smooth"),p},Zr=function(e,r,t){var o=e,s=e,i=Yo(),l=i,p=r||50,_=Math.max(500,p*3),T=function(w,I){var g=Yo();I||g-i>p?(s=o,o=w,l=i,i=g):t?o+=w:o=s+(w-s)/(g-l)*(i-l)},h=function(){s=o=t?0:o,l=i=0},f=function(w){var I=l,g=s,re=Yo();return(w||w===0)&&w!==o&&T(w),i===l||re-l>_?0:(o+(t?g:-g))/((t?re:i)-I)*1e3};return{update:T,reset:h,getVelocity:f}},Ro=function(e,r){return r&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},gs=function(e){var r=Math.max.apply(Math,e),t=Math.min.apply(Math,e);return Math.abs(r)>=Math.abs(t)?r:t},Zs=function(){Go=ht.core.globals().ScrollTrigger,Go&&Go.core&&$n()},Vs=function(e){return ht=e||Ws(),!wr&&ht&&typeof document<"u"&&document.body&&(Lt=window,Kt=document,Jt=Kt.documentElement,Co=Kt.body,Gs=[Lt,Kt,Jt,Co],ht.utils.clamp,Ys=ht.core.context||function(){},so="onpointerenter"in Co?"pointer":"mouse",Us=rt.isTouch=Lt.matchMedia&&Lt.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Lt||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,zt=rt.eventTypes=("ontouchstart"in Jt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Jt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Xs=0},500),Zs(),wr=1),wr};Mt.op=ct;ye.cache=0;var rt=function(){function n(r){this.init(r)}var e=n.prototype;return e.init=function(t){wr||Vs(ht)||console.warn("Please gsap.registerPlugin(Observer)"),Go||Zs();var o=t.tolerance,s=t.dragMinimum,i=t.type,l=t.target,p=t.lineHeight,_=t.debounce,T=t.preventDefault,h=t.onStop,f=t.onStopDelay,c=t.ignore,w=t.wheelSpeed,I=t.event,g=t.onDragStart,re=t.onDragEnd,ee=t.onDrag,ne=t.onPress,S=t.onRelease,De=t.onRight,Q=t.onLeft,R=t.onUp,Pe=t.onDown,oe=t.onChangeX,m=t.onChangeY,z=t.onChange,v=t.onToggleX,L=t.onToggleY,ie=t.onHover,Se=t.onHoverEnd,Le=t.onMove,j=t.ignoreCheck,B=t.isNormalizer,C=t.onGestureStart,a=t.onGestureEnd,y=t.onWheel,U=t.onEnable,H=t.onDisable,ae=t.onClick,xe=t.scrollSpeed,be=t.capture,Me=t.allowClicks,Ve=t.lockAxis,Ae=t.onLockAxis;this.target=l=It(l)||Jt,this.vars=t,c&&(c=ht.utils.toArray(c)),o=o||1e-9,s=s||0,w=w||1,xe=xe||1,i=i||"wheel,touch,pointer",_=_!==!1,p||(p=parseFloat(Lt.getComputedStyle(Co).lineHeight)||22);var Oe,Be,Ie,X,de,Ye,He,u=this,Ue=0,Qe=0,x=t.passive||!T&&t.passive!==!1,P=to(l,Mt),K=to(l,ct),D=P(),G=K(),N=~i.indexOf("touch")&&!~i.indexOf("pointer")&&zt[0]==="pointerdown",Z=Wo(l),q=l.ownerDocument||Kt,fe=[0,0,0],A=[0,0,0],$=0,le=function(){return $=Yo()},M=function(b,V){return(u.event=b)&&c&&~c.indexOf(b.target)||V&&N&&b.pointerType!=="touch"||j&&j(b,V)},$e=function(){u._vx.reset(),u._vy.reset(),Be.pause(),h&&h(u)},Ge=function(){var b=u.deltaX=gs(fe),V=u.deltaY=gs(A),d=Math.abs(b)>=o,W=Math.abs(V)>=o;z&&(d||W)&&z(u,b,V,fe,A),d&&(De&&u.deltaX>0&&De(u),Q&&u.deltaX<0&&Q(u),oe&&oe(u),v&&u.deltaX<0!=Ue<0&&v(u),Ue=u.deltaX,fe[0]=fe[1]=fe[2]=0),W&&(Pe&&u.deltaY>0&&Pe(u),R&&u.deltaY<0&&R(u),m&&m(u),L&&u.deltaY<0!=Qe<0&&L(u),Qe=u.deltaY,A[0]=A[1]=A[2]=0),(X||Ie)&&(Le&&Le(u),Ie&&(g&&Ie===1&&g(u),ee&&ee(u),Ie=0),X=!1),Ye&&!(Ye=!1)&&Ae&&Ae(u),de&&(y(u),de=!1),Oe=0},yt=function(b,V,d){fe[d]+=b,A[d]+=V,u._vx.update(b),u._vy.update(V),_?Oe||(Oe=requestAnimationFrame(Ge)):Ge()},ut=function(b,V){Ve&&!He&&(u.axis=He=Math.abs(b)>Math.abs(V)?"x":"y",Ye=!0),He!=="y"&&(fe[2]+=b,u._vx.update(b,!0)),He!=="x"&&(A[2]+=V,u._vy.update(V,!0)),_?Oe||(Oe=requestAnimationFrame(Ge)):Ge()},Te=function(b){if(!M(b,1)){b=Ro(b,T);var V=b.clientX,d=b.clientY,W=V-u.x,F=d-u.y,te=u.isDragging;u.x=V,u.y=d,(te||(W||F)&&(Math.abs(u.startX-V)>=s||Math.abs(u.startY-d)>=s))&&(Ie=te?2:1,te||(u.isDragging=!0),ut(W,F))}},je=u.onPress=function(O){M(O,1)||O&&O.button||(u.axis=He=null,Be.pause(),u.isPressed=!0,O=Ro(O),Ue=Qe=0,u.startX=u.x=O.clientX,u.startY=u.y=O.clientY,u._vx.reset(),u._vy.reset(),bt(B?l:q,zt[1],Te,x,!0),u.deltaX=u.deltaY=0,ne&&ne(u))},J=u.onRelease=function(O){if(!M(O,1)){xt(B?l:q,zt[1],Te,!0);var b=!isNaN(u.y-u.startY),V=u.isDragging,d=V&&(Math.abs(u.x-u.startX)>3||Math.abs(u.y-u.startY)>3),W=Ro(O);!d&&b&&(u._vx.reset(),u._vy.reset(),T&&Me&&ht.delayedCall(.08,function(){if(Yo()-$>300&&!O.defaultPrevented){if(O.target.click)O.target.click();else if(q.createEvent){var F=q.createEvent("MouseEvents");F.initMouseEvent("click",!0,!0,Lt,1,W.screenX,W.screenY,W.clientX,W.clientY,!1,!1,!1,!1,0,null),O.target.dispatchEvent(F)}}})),u.isDragging=u.isGesturing=u.isPressed=!1,h&&V&&!B&&Be.restart(!0),Ie&&Ge(),re&&V&&re(u),S&&S(u,d)}},ce=function(b){return b.touches&&b.touches.length>1&&(u.isGesturing=!0)&&C(b,u.isDragging)},Y=function(){return(u.isGesturing=!1)||a(u)},se=function(b){if(!M(b)){var V=P(),d=K();yt((V-D)*xe,(d-G)*xe,1),D=V,G=d,h&&Be.restart(!0)}},ge=function(b){if(!M(b)){b=Ro(b,T),y&&(de=!0);var V=(b.deltaMode===1?p:b.deltaMode===2?Lt.innerHeight:1)*w;yt(b.deltaX*V,b.deltaY*V,0),h&&!B&&Be.restart(!0)}},Re=function(b){if(!M(b)){var V=b.clientX,d=b.clientY,W=V-u.x,F=d-u.y;u.x=V,u.y=d,X=!0,h&&Be.restart(!0),(W||F)&&ut(W,F)}},_e=function(b){u.event=b,ie(u)},E=function(b){u.event=b,Se(u)},Ne=function(b){return M(b)||Ro(b,T)&&ae(u)};Be=u._dc=ht.delayedCall(f||.25,$e).pause(),u.deltaX=u.deltaY=0,u._vx=Zr(0,50,!0),u._vy=Zr(0,50,!0),u.scrollX=P,u.scrollY=K,u.isDragging=u.isGesturing=u.isPressed=!1,Ys(this),u.enable=function(O){return u.isEnabled||(bt(Z?q:l,"scroll",Xr),i.indexOf("scroll")>=0&&bt(Z?q:l,"scroll",se,x,be),i.indexOf("wheel")>=0&&bt(l,"wheel",ge,x,be),(i.indexOf("touch")>=0&&Us||i.indexOf("pointer")>=0)&&(bt(l,zt[0],je,x,be),bt(q,zt[2],J),bt(q,zt[3],J),Me&&bt(l,"click",le,!0,!0),ae&&bt(l,"click",Ne),C&&bt(q,"gesturestart",ce),a&&bt(q,"gestureend",Y),ie&&bt(l,so+"enter",_e),Se&&bt(l,so+"leave",E),Le&&bt(l,so+"move",Re)),u.isEnabled=!0,u.isDragging=u.isGesturing=u.isPressed=X=Ie=!1,u._vx.reset(),u._vy.reset(),D=P(),G=K(),O&&O.type&&je(O),U&&U(u)),u},u.disable=function(){u.isEnabled&&(bo.filter(function(O){return O!==u&&Wo(O.target)}).length||xt(Z?q:l,"scroll",Xr),u.isPressed&&(u._vx.reset(),u._vy.reset(),xt(B?l:q,zt[1],Te,!0)),xt(Z?q:l,"scroll",se,be),xt(l,"wheel",ge,be),xt(l,zt[0],je,be),xt(q,zt[2],J),xt(q,zt[3],J),xt(l,"click",le,!0),xt(l,"click",Ne),xt(q,"gesturestart",ce),xt(q,"gestureend",Y),xt(l,so+"enter",_e),xt(l,so+"leave",E),xt(l,so+"move",Re),u.isEnabled=u.isPressed=u.isDragging=!1,H&&H(u))},u.kill=u.revert=function(){u.disable();var O=bo.indexOf(u);O>=0&&bo.splice(O,1),jt===u&&(jt=0)},bo.push(u),B&&Wo(l)&&(jt=u),u.enable(I)},jn(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();rt.version="3.12.7";rt.create=function(n){return new rt(n)};rt.register=Vs;rt.getAll=function(){return bo.slice()};rt.getById=function(n){return bo.filter(function(e){return e.vars.id===n})[0]};Ws()&&ht.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var k,yo,ve,Xe,Ot,ze,os,Sr,Ko,Xo,Bo,nr,mt,Dr,Vr,Pt,ms,_s,xo,js,Lr,$s,Tt,jr,Qs,qs,qt,$r,rs,Po,ss,Mr,Qr,Br,ir=1,wt=Date.now,Nr=wt(),Ft=0,No=0,ws=function(e,r,t){var o=Rt(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return t["_"+r+"Clamp"]=o,o?e.substr(6,e.length-7):e},vs=function(e,r){return r&&(!Rt(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Qn=function n(){return No&&requestAnimationFrame(n)},ys=function(){return Dr=1},xs=function(){return Dr=0},Yt=function(e){return e},Fo=function(e){return Math.round(e*1e5)/1e5||0},Ks=function(){return typeof window<"u"},Js=function(){return k||Ks()&&(k=window.gsap)&&k.registerPlugin&&k},po=function(e){return!!~os.indexOf(e)},en=function(e){return(e==="Height"?ss:ve["inner"+e])||Ot["client"+e]||ze["client"+e]},tn=function(e){return eo(e,"getBoundingClientRect")||(po(e)?function(){return Tr.width=ve.innerWidth,Tr.height=ss,Tr}:function(){return Vt(e)})},qn=function(e,r,t){var o=t.d,s=t.d2,i=t.a;return(i=eo(e,"getBoundingClientRect"))?function(){return i()[o]}:function(){return(r?en(s):e["client"+s])||0}},Kn=function(e,r){return!r||~Zt.indexOf(e)?tn(e):function(){return Tr}},Xt=function(e,r){var t=r.s,o=r.d2,s=r.d,i=r.a;return Math.max(0,(t="scroll"+o)&&(i=eo(e,t))?i()-tn(e)()[s]:po(e)?(Ot[t]||ze[t])-en(o):e[t]-e["offset"+o])},ar=function(e,r){for(var t=0;t<xo.length;t+=3)(!r||~r.indexOf(xo[t+1]))&&e(xo[t],xo[t+1],xo[t+2])},Rt=function(e){return typeof e=="string"},vt=function(e){return typeof e=="function"},zo=function(e){return typeof e=="number"},no=function(e){return typeof e=="object"},ko=function(e,r,t){return e&&e.progress(r?0:1)&&t&&e.pause()},Fr=function(e,r){if(e.enabled){var t=e._ctx?e._ctx.add(function(){return r(e)}):r(e);t&&t.totalTime&&(e.callbackAnimation=t)}},wo=Math.abs,on="left",rn="top",ns="right",is="bottom",co="width",uo="height",Zo="Right",Vo="Left",jo="Top",$o="Bottom",st="padding",Bt="margin",Eo="Width",as="Height",lt="px",Nt=function(e){return ve.getComputedStyle(e)},Jn=function(e){var r=Nt(e).position;e.style.position=r==="absolute"||r==="fixed"?r:"relative"},bs=function(e,r){for(var t in r)t in e||(e[t]=r[t]);return e},Vt=function(e,r){var t=r&&Nt(e)[Vr]!=="matrix(1, 0, 0, 1, 0, 0)"&&k.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return t&&t.progress(0).kill(),o},Er=function(e,r){var t=r.d2;return e["offset"+t]||e["client"+t]||0},sn=function(e){var r=[],t=e.labels,o=e.duration(),s;for(s in t)r.push(t[s]/o);return r},ei=function(e){return function(r){return k.utils.snap(sn(e),r)}},ls=function(e){var r=k.utils.snap(e),t=Array.isArray(e)&&e.slice(0).sort(function(o,s){return o-s});return t?function(o,s,i){i===void 0&&(i=.001);var l;if(!s)return r(o);if(s>0){for(o-=i,l=0;l<t.length;l++)if(t[l]>=o)return t[l];return t[l-1]}else for(l=t.length,o+=i;l--;)if(t[l]<=o)return t[l];return t[0]}:function(o,s,i){i===void 0&&(i=.001);var l=r(o);return!s||Math.abs(l-o)<i||l-o<0==s<0?l:r(s<0?o-e:o+e)}},ti=function(e){return function(r,t){return ls(sn(e))(r,t.direction)}},lr=function(e,r,t,o){return t.split(",").forEach(function(s){return e(r,s,o)})},pt=function(e,r,t,o,s){return e.addEventListener(r,t,{passive:!o,capture:!!s})},ft=function(e,r,t,o){return e.removeEventListener(r,t,!!o)},cr=function(e,r,t){t=t&&t.wheelHandler,t&&(e(r,"wheel",t),e(r,"touchmove",t))},Ts={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ur={toggleActions:"play",anticipatePin:0},Ir={top:0,left:0,center:.5,bottom:1,right:1},vr=function(e,r){if(Rt(e)){var t=e.indexOf("="),o=~t?+(e.charAt(t-1)+1)*parseFloat(e.substr(t+1)):0;~t&&(e.indexOf("%")>t&&(o*=r/100),e=e.substr(0,t-1)),e=o+(e in Ir?Ir[e]*r:~e.indexOf("%")?parseFloat(e)*r/100:parseFloat(e)||0)}return e},fr=function(e,r,t,o,s,i,l,p){var _=s.startColor,T=s.endColor,h=s.fontSize,f=s.indent,c=s.fontWeight,w=Xe.createElement("div"),I=po(t)||eo(t,"pinType")==="fixed",g=e.indexOf("scroller")!==-1,re=I?ze:t,ee=e.indexOf("start")!==-1,ne=ee?_:T,S="border-color:"+ne+";font-size:"+h+";color:"+ne+";font-weight:"+c+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return S+="position:"+((g||p)&&I?"fixed;":"absolute;"),(g||p||!I)&&(S+=(o===ct?ns:is)+":"+(i+parseFloat(f))+"px;"),l&&(S+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),w._isStart=ee,w.setAttribute("class","gsap-marker-"+e+(r?" marker-"+r:"")),w.style.cssText=S,w.innerText=r||r===0?e+"-"+r:e,re.children[0]?re.insertBefore(w,re.children[0]):re.appendChild(w),w._offset=w["offset"+o.op.d2],yr(w,0,o,ee),w},yr=function(e,r,t,o){var s={display:"block"},i=t[o?"os2":"p2"],l=t[o?"p2":"os2"];e._isFlipped=o,s[t.a+"Percent"]=o?-100:0,s[t.a]=o?"1px":0,s["border"+i+Eo]=1,s["border"+l+Eo]=0,s[t.p]=r+"px",k.set(e,s)},we=[],qr={},Jo,Cs=function(){return wt()-Ft>34&&(Jo||(Jo=requestAnimationFrame($t)))},vo=function(){(!Tt||!Tt.isPressed||Tt.startX>ze.clientWidth)&&(ye.cache++,Tt?Jo||(Jo=requestAnimationFrame($t)):$t(),Ft||go("scrollStart"),Ft=wt())},zr=function(){qs=ve.innerWidth,Qs=ve.innerHeight},Ho=function(e){ye.cache++,(e===!0||!mt&&!$s&&!Xe.fullscreenElement&&!Xe.webkitFullscreenElement&&(!jr||qs!==ve.innerWidth||Math.abs(ve.innerHeight-Qs)>ve.innerHeight*.25))&&Sr.restart(!0)},ho={},oi=[],nn=function n(){return ft(me,"scrollEnd",n)||lo(!0)},go=function(e){return ho[e]&&ho[e].map(function(r){return r()})||oi},At=[],an=function(e){for(var r=0;r<At.length;r+=5)(!e||At[r+4]&&At[r+4].query===e)&&(At[r].style.cssText=At[r+1],At[r].getBBox&&At[r].setAttribute("transform",At[r+2]||""),At[r+3].uncache=1)},cs=function(e,r){var t;for(Pt=0;Pt<we.length;Pt++)t=we[Pt],t&&(!r||t._ctx===r)&&(e?t.kill(1):t.revert(!0,!0));Mr=!0,r&&an(r),r||go("revert")},ln=function(e,r){ye.cache++,(r||!St)&&ye.forEach(function(t){return vt(t)&&t.cacheID++&&(t.rec=0)}),Rt(e)&&(ve.history.scrollRestoration=rs=e)},St,fo=0,Ps,ri=function(){if(Ps!==fo){var e=Ps=fo;requestAnimationFrame(function(){return e===fo&&lo(!0)})}},cn=function(){ze.appendChild(Po),ss=!Tt&&Po.offsetHeight||ve.innerHeight,ze.removeChild(Po)},Ss=function(e){return Ko(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(r){return r.style.display=e?"none":"block"})},lo=function(e,r){if(Ot=Xe.documentElement,ze=Xe.body,os=[ve,Xe,Ot,ze],Ft&&!e&&!Mr){pt(me,"scrollEnd",nn);return}cn(),St=me.isRefreshing=!0,ye.forEach(function(o){return vt(o)&&++o.cacheID&&(o.rec=o())});var t=go("refreshInit");js&&me.sort(),r||cs(),ye.forEach(function(o){vt(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),we.slice(0).forEach(function(o){return o.refresh()}),Mr=!1,we.forEach(function(o){if(o._subPinOffset&&o.pin){var s=o.vars.horizontal?"offsetWidth":"offsetHeight",i=o.pin[s];o.revert(!0,1),o.adjustPinSpacing(o.pin[s]-i),o.refresh()}}),Qr=1,Ss(!0),we.forEach(function(o){var s=Xt(o.scroller,o._dir),i=o.vars.end==="max"||o._endClamp&&o.end>s,l=o._startClamp&&o.start>=s;(i||l)&&o.setPositions(l?s-1:o.start,i?Math.max(l?s:o.start+1,s):o.end,!0)}),Ss(!1),Qr=0,t.forEach(function(o){return o&&o.render&&o.render(-1)}),ye.forEach(function(o){vt(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),ln(rs,1),Sr.pause(),fo++,St=2,$t(2),we.forEach(function(o){return vt(o.vars.onRefresh)&&o.vars.onRefresh(o)}),St=me.isRefreshing=!1,go("refresh")},Kr=0,xr=1,Qo,$t=function(e){if(e===2||!St&&!Mr){me.isUpdating=!0,Qo&&Qo.update(0);var r=we.length,t=wt(),o=t-Nr>=50,s=r&&we[0].scroll();if(xr=Kr>s?-1:1,St||(Kr=s),o&&(Ft&&!Dr&&t-Ft>200&&(Ft=0,go("scrollEnd")),Bo=Nr,Nr=t),xr<0){for(Pt=r;Pt-- >0;)we[Pt]&&we[Pt].update(0,o);xr=1}else for(Pt=0;Pt<r;Pt++)we[Pt]&&we[Pt].update(0,o);me.isUpdating=!1}Jo=0},Jr=[on,rn,is,ns,Bt+$o,Bt+Zo,Bt+jo,Bt+Vo,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],br=Jr.concat([co,uo,"boxSizing","max"+Eo,"max"+as,"position",Bt,st,st+jo,st+Zo,st+$o,st+Vo]),si=function(e,r,t){So(t);var o=e._gsap;if(o.spacerIsNative)So(o.spacerState);else if(e._gsap.swappedIn){var s=r.parentNode;s&&(s.insertBefore(e,r),s.removeChild(r))}e._gsap.swappedIn=!1},Hr=function(e,r,t,o){if(!e._gsap.swappedIn){for(var s=Jr.length,i=r.style,l=e.style,p;s--;)p=Jr[s],i[p]=t[p];i.position=t.position==="absolute"?"absolute":"relative",t.display==="inline"&&(i.display="inline-block"),l[is]=l[ns]="auto",i.flexBasis=t.flexBasis||"auto",i.overflow="visible",i.boxSizing="border-box",i[co]=Er(e,Mt)+lt,i[uo]=Er(e,ct)+lt,i[st]=l[Bt]=l[rn]=l[on]="0",So(o),l[co]=l["max"+Eo]=t[co],l[uo]=l["max"+as]=t[uo],l[st]=t[st],e.parentNode!==r&&(e.parentNode.insertBefore(r,e),r.appendChild(e)),e._gsap.swappedIn=!0}},ni=/([A-Z])/g,So=function(e){if(e){var r=e.t.style,t=e.length,o=0,s,i;for((e.t._gsap||k.core.getCache(e.t)).uncache=1;o<t;o+=2)i=e[o+1],s=e[o],i?r[s]=i:r[s]&&r.removeProperty(s.replace(ni,"-$1").toLowerCase())}},pr=function(e){for(var r=br.length,t=e.style,o=[],s=0;s<r;s++)o.push(br[s],t[br[s]]);return o.t=e,o},ii=function(e,r,t){for(var o=[],s=e.length,i=t?8:0,l;i<s;i+=2)l=e[i],o.push(l,l in r?r[l]:e[i+1]);return o.t=e.t,o},Tr={left:0,top:0},Ms=function(e,r,t,o,s,i,l,p,_,T,h,f,c,w){vt(e)&&(e=e(p)),Rt(e)&&e.substr(0,3)==="max"&&(e=f+(e.charAt(4)==="="?vr("0"+e.substr(3),t):0));var I=c?c.time():0,g,re,ee;if(c&&c.seek(0),isNaN(e)||(e=+e),zo(e))c&&(e=k.utils.mapRange(c.scrollTrigger.start,c.scrollTrigger.end,0,f,e)),l&&yr(l,t,o,!0);else{vt(r)&&(r=r(p));var ne=(e||"0").split(" "),S,De,Q,R;ee=It(r,p)||ze,S=Vt(ee)||{},(!S||!S.left&&!S.top)&&Nt(ee).display==="none"&&(R=ee.style.display,ee.style.display="block",S=Vt(ee),R?ee.style.display=R:ee.style.removeProperty("display")),De=vr(ne[0],S[o.d]),Q=vr(ne[1]||"0",t),e=S[o.p]-_[o.p]-T+De+s-Q,l&&yr(l,Q,o,t-Q<20||l._isStart&&Q>20),t-=t-Q}if(w&&(p[w]=e||-.001,e<0&&(e=0)),i){var Pe=e+t,oe=i._isStart;g="scroll"+o.d2,yr(i,Pe,o,oe&&Pe>20||!oe&&(h?Math.max(ze[g],Ot[g]):i.parentNode[g])<=Pe+1),h&&(_=Vt(l),h&&(i.style[o.op.p]=_[o.op.p]-o.op.m-i._offset+lt))}return c&&ee&&(g=Vt(ee),c.seek(f),re=Vt(ee),c._caScrollDist=g[o.p]-re[o.p],e=e/c._caScrollDist*f),c&&c.seek(I),c?e:Math.round(e)},ai=/(webkit|moz|length|cssText|inset)/i,Es=function(e,r,t,o){if(e.parentNode!==r){var s=e.style,i,l;if(r===ze){e._stOrig=s.cssText,l=Nt(e);for(i in l)!+i&&!ai.test(i)&&l[i]&&typeof s[i]=="string"&&i!=="0"&&(s[i]=l[i]);s.top=t,s.left=o}else s.cssText=e._stOrig;k.core.getCache(e).uncache=1,r.appendChild(e)}},un=function(e,r,t){var o=r,s=o;return function(i){var l=Math.round(e());return l!==o&&l!==s&&Math.abs(l-o)>3&&Math.abs(l-s)>3&&(i=l,t&&t()),s=o,o=Math.round(i),o}},dr=function(e,r,t){var o={};o[r.p]="+="+t,k.set(e,o)},Is=function(e,r){var t=to(e,r),o="_scroll"+r.p2,s=function i(l,p,_,T,h){var f=i.tween,c=p.onComplete,w={};_=_||t();var I=un(t,_,function(){f.kill(),i.tween=0});return h=T&&h||0,T=T||l-_,f&&f.kill(),p[o]=l,p.inherit=!1,p.modifiers=w,w[o]=function(){return I(_+T*f.ratio+h*f.ratio*f.ratio)},p.onUpdate=function(){ye.cache++,i.tween&&$t()},p.onComplete=function(){i.tween=0,c&&c.call(f)},f=i.tween=k.to(e,p),f};return e[o]=t,t.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},pt(e,"wheel",t.wheelHandler),me.isTouch&&pt(e,"touchmove",t.wheelHandler),s},me=function(){function n(r,t){yo||n.register(k)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),$r(this),this.init(r,t)}var e=n.prototype;return e.init=function(t,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!No){this.update=this.refresh=this.kill=Yt;return}t=bs(Rt(t)||zo(t)||t.nodeType?{trigger:t}:t,ur);var s=t,i=s.onUpdate,l=s.toggleClass,p=s.id,_=s.onToggle,T=s.onRefresh,h=s.scrub,f=s.trigger,c=s.pin,w=s.pinSpacing,I=s.invalidateOnRefresh,g=s.anticipatePin,re=s.onScrubComplete,ee=s.onSnapComplete,ne=s.once,S=s.snap,De=s.pinReparent,Q=s.pinSpacer,R=s.containerAnimation,Pe=s.fastScrollEnd,oe=s.preventOverlaps,m=t.horizontal||t.containerAnimation&&t.horizontal!==!1?Mt:ct,z=!h&&h!==0,v=It(t.scroller||ve),L=k.core.getCache(v),ie=po(v),Se=("pinType"in t?t.pinType:eo(v,"pinType")||ie&&"fixed")==="fixed",Le=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],j=z&&t.toggleActions.split(" "),B="markers"in t?t.markers:ur.markers,C=ie?0:parseFloat(Nt(v)["border"+m.p2+Eo])||0,a=this,y=t.onRefreshInit&&function(){return t.onRefreshInit(a)},U=qn(v,ie,m),H=Kn(v,ie),ae=0,xe=0,be=0,Me=to(v,m),Ve,Ae,Oe,Be,Ie,X,de,Ye,He,u,Ue,Qe,x,P,K,D,G,N,Z,q,fe,A,$,le,M,$e,Ge,yt,ut,Te,je,J,ce,Y,se,ge,Re,_e,E;if(a._startClamp=a._endClamp=!1,a._dir=m,g*=45,a.scroller=v,a.scroll=R?R.time.bind(R):Me,Be=Me(),a.vars=t,o=o||t.animation,"refreshPriority"in t&&(js=1,t.refreshPriority===-9999&&(Qo=a)),L.tweenScroll=L.tweenScroll||{top:Is(v,ct),left:Is(v,Mt)},a.tweenTo=Ve=L.tweenScroll[m.p],a.scrubDuration=function(d){ce=zo(d)&&d,ce?J?J.duration(d):J=k.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ce,paused:!0,onComplete:function(){return re&&re(a)}}):(J&&J.progress(1).kill(),J=0)},o&&(o.vars.lazy=!1,o._initted&&!a.isReverted||o.vars.immediateRender!==!1&&t.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),a.animation=o.pause(),o.scrollTrigger=a,a.scrubDuration(h),Te=0,p||(p=o.vars.id)),S&&((!no(S)||S.push)&&(S={snapTo:S}),"scrollBehavior"in ze.style&&k.set(ie?[ze,Ot]:v,{scrollBehavior:"auto"}),ye.forEach(function(d){return vt(d)&&d.target===(ie?Xe.scrollingElement||Ot:v)&&(d.smooth=!1)}),Oe=vt(S.snapTo)?S.snapTo:S.snapTo==="labels"?ei(o):S.snapTo==="labelsDirectional"?ti(o):S.directional!==!1?function(d,W){return ls(S.snapTo)(d,wt()-xe<500?0:W.direction)}:k.utils.snap(S.snapTo),Y=S.duration||{min:.1,max:2},Y=no(Y)?Xo(Y.min,Y.max):Xo(Y,Y),se=k.delayedCall(S.delay||ce/2||.1,function(){var d=Me(),W=wt()-xe<500,F=Ve.tween;if((W||Math.abs(a.getVelocity())<10)&&!F&&!Dr&&ae!==d){var te=(d-X)/P,tt=o&&!z?o.totalProgress():te,Ce=W?0:(tt-je)/(wt()-Bo)*1e3||0,qe=k.utils.clamp(-te,1-te,wo(Ce/2)*Ce/.185),ot=te+(S.inertia===!1?0:qe),ke,Ee,ue=S,Je=ue.onStart,he=ue.onInterrupt,dt=ue.onComplete;if(ke=Oe(ot,a),zo(ke)||(ke=ot),Ee=Math.max(0,Math.round(X+ke*P)),d<=de&&d>=X&&Ee!==d){if(F&&!F._initted&&F.data<=wo(Ee-d))return;S.inertia===!1&&(qe=ke-te),Ve(Ee,{duration:Y(wo(Math.max(wo(ot-tt),wo(ke-tt))*.185/Ce/.05||0)),ease:S.ease||"power3",data:wo(Ee-d),onInterrupt:function(){return se.restart(!0)&&he&&he(a)},onComplete:function(){a.update(),ae=Me(),o&&!z&&(J?J.resetTo("totalProgress",ke,o._tTime/o._tDur):o.progress(ke)),Te=je=o&&!z?o.totalProgress():a.progress,ee&&ee(a),dt&&dt(a)}},d,qe*P,Ee-d-qe*P),Je&&Je(a,Ve.tween)}}else a.isActive&&ae!==d&&se.restart(!0)}).pause()),p&&(qr[p]=a),f=a.trigger=It(f||c!==!0&&c),E=f&&f._gsap&&f._gsap.stRevert,E&&(E=E(a)),c=c===!0?f:It(c),Rt(l)&&(l={targets:f,className:l}),c&&(w===!1||w===Bt||(w=!w&&c.parentNode&&c.parentNode.style&&Nt(c.parentNode).display==="flex"?!1:st),a.pin=c,Ae=k.core.getCache(c),Ae.spacer?K=Ae.pinState:(Q&&(Q=It(Q),Q&&!Q.nodeType&&(Q=Q.current||Q.nativeElement),Ae.spacerIsNative=!!Q,Q&&(Ae.spacerState=pr(Q))),Ae.spacer=N=Q||Xe.createElement("div"),N.classList.add("pin-spacer"),p&&N.classList.add("pin-spacer-"+p),Ae.pinState=K=pr(c)),t.force3D!==!1&&k.set(c,{force3D:!0}),a.spacer=N=Ae.spacer,ut=Nt(c),le=ut[w+m.os2],q=k.getProperty(c),fe=k.quickSetter(c,m.a,lt),Hr(c,N,ut),G=pr(c)),B){Qe=no(B)?bs(B,Ts):Ts,u=fr("scroller-start",p,v,m,Qe,0),Ue=fr("scroller-end",p,v,m,Qe,0,u),Z=u["offset"+m.op.d2];var Ne=It(eo(v,"content")||v);Ye=this.markerStart=fr("start",p,Ne,m,Qe,Z,0,R),He=this.markerEnd=fr("end",p,Ne,m,Qe,Z,0,R),R&&(_e=k.quickSetter([Ye,He],m.a,lt)),!Se&&!(Zt.length&&eo(v,"fixedMarkers")===!0)&&(Jn(ie?ze:v),k.set([u,Ue],{force3D:!0}),$e=k.quickSetter(u,m.a,lt),yt=k.quickSetter(Ue,m.a,lt))}if(R){var O=R.vars.onUpdate,b=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){a.update(0,0,1),O&&O.apply(R,b||[])})}if(a.previous=function(){return we[we.indexOf(a)-1]},a.next=function(){return we[we.indexOf(a)+1]},a.revert=function(d,W){if(!W)return a.kill(!0);var F=d!==!1||!a.enabled,te=mt;F!==a.isReverted&&(F&&(ge=Math.max(Me(),a.scroll.rec||0),be=a.progress,Re=o&&o.progress()),Ye&&[Ye,He,u,Ue].forEach(function(tt){return tt.style.display=F?"none":"block"}),F&&(mt=a,a.update(F)),c&&(!De||!a.isActive)&&(F?si(c,N,K):Hr(c,N,Nt(c),M)),F||a.update(F),mt=te,a.isReverted=F)},a.refresh=function(d,W,F,te){if(!((mt||!a.enabled)&&!W)){if(c&&d&&Ft){pt(n,"scrollEnd",nn);return}!St&&y&&y(a),mt=a,Ve.tween&&!F&&(Ve.tween.kill(),Ve.tween=0),J&&J.pause(),I&&o&&o.revert({kill:!1}).invalidate(),a.isReverted||a.revert(!0,!0),a._subPinOffset=!1;var tt=U(),Ce=H(),qe=R?R.duration():Xt(v,m),ot=P<=.01,ke=0,Ee=te||0,ue=no(F)?F.end:t.end,Je=t.endTrigger||f,he=no(F)?F.start:t.start||(t.start===0||!f?0:c?"0 0":"0 100%"),dt=a.pinnedContainer=t.pinnedContainer&&It(t.pinnedContainer,a),nt=f&&Math.max(0,we.indexOf(a))||0,Ke=nt,it,et,oo,tr,gt,at,Ht,Ar,us,Io,Ut,Do,or;for(B&&no(F)&&(Do=k.getProperty(u,m.p),or=k.getProperty(Ue,m.p));Ke-- >0;)at=we[Ke],at.end||at.refresh(0,1)||(mt=a),Ht=at.pin,Ht&&(Ht===f||Ht===c||Ht===dt)&&!at.isReverted&&(Io||(Io=[]),Io.unshift(at),at.revert(!0,!0)),at!==we[Ke]&&(nt--,Ke--);for(vt(he)&&(he=he(a)),he=ws(he,"start",a),X=Ms(he,f,tt,m,Me(),Ye,u,a,Ce,C,Se,qe,R,a._startClamp&&"_startClamp")||(c?-.001:0),vt(ue)&&(ue=ue(a)),Rt(ue)&&!ue.indexOf("+=")&&(~ue.indexOf(" ")?ue=(Rt(he)?he.split(" ")[0]:"")+ue:(ke=vr(ue.substr(2),tt),ue=Rt(he)?he:(R?k.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,X):X)+ke,Je=f)),ue=ws(ue,"end",a),de=Math.max(X,Ms(ue||(Je?"100% 0":qe),Je,tt,m,Me()+ke,He,Ue,a,Ce,C,Se,qe,R,a._endClamp&&"_endClamp"))||-.001,ke=0,Ke=nt;Ke--;)at=we[Ke],Ht=at.pin,Ht&&at.start-at._pinPush<=X&&!R&&at.end>0&&(it=at.end-(a._startClamp?Math.max(0,at.start):at.start),(Ht===f&&at.start-at._pinPush<X||Ht===dt)&&isNaN(he)&&(ke+=it*(1-at.progress)),Ht===c&&(Ee+=it));if(X+=ke,de+=ke,a._startClamp&&(a._startClamp+=ke),a._endClamp&&!St&&(a._endClamp=de||-.001,de=Math.min(de,Xt(v,m))),P=de-X||(X-=.01)&&.001,ot&&(be=k.utils.clamp(0,1,k.utils.normalize(X,de,ge))),a._pinPush=Ee,Ye&&ke&&(it={},it[m.a]="+="+ke,dt&&(it[m.p]="-="+Me()),k.set([Ye,He],it)),c&&!(Qr&&a.end>=Xt(v,m)))it=Nt(c),tr=m===ct,oo=Me(),A=parseFloat(q(m.a))+Ee,!qe&&de>1&&(Ut=(ie?Xe.scrollingElement||Ot:v).style,Ut={style:Ut,value:Ut["overflow"+m.a.toUpperCase()]},ie&&Nt(ze)["overflow"+m.a.toUpperCase()]!=="scroll"&&(Ut.style["overflow"+m.a.toUpperCase()]="scroll")),Hr(c,N,it),G=pr(c),et=Vt(c,!0),Ar=Se&&to(v,tr?Mt:ct)(),w?(M=[w+m.os2,P+Ee+lt],M.t=N,Ke=w===st?Er(c,m)+P+Ee:0,Ke&&(M.push(m.d,Ke+lt),N.style.flexBasis!=="auto"&&(N.style.flexBasis=Ke+lt)),So(M),dt&&we.forEach(function(Ao){Ao.pin===dt&&Ao.vars.pinSpacing!==!1&&(Ao._subPinOffset=!0)}),Se&&Me(ge)):(Ke=Er(c,m),Ke&&N.style.flexBasis!=="auto"&&(N.style.flexBasis=Ke+lt)),Se&&(gt={top:et.top+(tr?oo-X:Ar)+lt,left:et.left+(tr?Ar:oo-X)+lt,boxSizing:"border-box",position:"fixed"},gt[co]=gt["max"+Eo]=Math.ceil(et.width)+lt,gt[uo]=gt["max"+as]=Math.ceil(et.height)+lt,gt[Bt]=gt[Bt+jo]=gt[Bt+Zo]=gt[Bt+$o]=gt[Bt+Vo]="0",gt[st]=it[st],gt[st+jo]=it[st+jo],gt[st+Zo]=it[st+Zo],gt[st+$o]=it[st+$o],gt[st+Vo]=it[st+Vo],D=ii(K,gt,De),St&&Me(0)),o?(us=o._initted,Lr(1),o.render(o.duration(),!0,!0),$=q(m.a)-A+P+Ee,Ge=Math.abs(P-$)>1,Se&&Ge&&D.splice(D.length-2,2),o.render(0,!0,!0),us||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),Lr(0)):$=P,Ut&&(Ut.value?Ut.style["overflow"+m.a.toUpperCase()]=Ut.value:Ut.style.removeProperty("overflow-"+m.a));else if(f&&Me()&&!R)for(et=f.parentNode;et&&et!==ze;)et._pinOffset&&(X-=et._pinOffset,de-=et._pinOffset),et=et.parentNode;Io&&Io.forEach(function(Ao){return Ao.revert(!1,!0)}),a.start=X,a.end=de,Be=Ie=St?ge:Me(),!R&&!St&&(Be<ge&&Me(ge),a.scroll.rec=0),a.revert(!1,!0),xe=wt(),se&&(ae=-1,se.restart(!0)),mt=0,o&&z&&(o._initted||Re)&&o.progress()!==Re&&o.progress(Re||0,!0).render(o.time(),!0,!0),(ot||be!==a.progress||R||I||o&&!o._initted)&&(o&&!z&&o.totalProgress(R&&X<-.001&&!be?k.utils.normalize(X,de,0):be,!0),a.progress=ot||(Be-X)/P===be?0:be),c&&w&&(N._pinOffset=Math.round(a.progress*$)),J&&J.invalidate(),isNaN(Do)||(Do-=k.getProperty(u,m.p),or-=k.getProperty(Ue,m.p),dr(u,m,Do),dr(Ye,m,Do-(te||0)),dr(Ue,m,or),dr(He,m,or-(te||0))),ot&&!St&&a.update(),T&&!St&&!x&&(x=!0,T(a),x=!1)}},a.getVelocity=function(){return(Me()-Ie)/(wt()-Bo)*1e3||0},a.endAnimation=function(){ko(a.callbackAnimation),o&&(J?J.progress(1):o.paused()?z||ko(o,a.direction<0,1):ko(o,o.reversed()))},a.labelToScroll=function(d){return o&&o.labels&&(X||a.refresh()||X)+o.labels[d]/o.duration()*P||0},a.getTrailing=function(d){var W=we.indexOf(a),F=a.direction>0?we.slice(0,W).reverse():we.slice(W+1);return(Rt(d)?F.filter(function(te){return te.vars.preventOverlaps===d}):F).filter(function(te){return a.direction>0?te.end<=X:te.start>=de})},a.update=function(d,W,F){if(!(R&&!F&&!d)){var te=St===!0?ge:a.scroll(),tt=d?0:(te-X)/P,Ce=tt<0?0:tt>1?1:tt||0,qe=a.progress,ot,ke,Ee,ue,Je,he,dt,nt;if(W&&(Ie=Be,Be=R?Me():te,S&&(je=Te,Te=o&&!z?o.totalProgress():Ce)),g&&c&&!mt&&!ir&&Ft&&(!Ce&&X<te+(te-Ie)/(wt()-Bo)*g?Ce=1e-4:Ce===1&&de>te+(te-Ie)/(wt()-Bo)*g&&(Ce=.9999)),Ce!==qe&&a.enabled){if(ot=a.isActive=!!Ce&&Ce<1,ke=!!qe&&qe<1,he=ot!==ke,Je=he||!!Ce!=!!qe,a.direction=Ce>qe?1:-1,a.progress=Ce,Je&&!mt&&(Ee=Ce&&!qe?0:Ce===1?1:qe===1?2:3,z&&(ue=!he&&j[Ee+1]!=="none"&&j[Ee+1]||j[Ee],nt=o&&(ue==="complete"||ue==="reset"||ue in o))),oe&&(he||nt)&&(nt||h||!o)&&(vt(oe)?oe(a):a.getTrailing(oe).forEach(function(oo){return oo.endAnimation()})),z||(J&&!mt&&!ir?(J._dp._time-J._start!==J._time&&J.render(J._dp._time-J._start),J.resetTo?J.resetTo("totalProgress",Ce,o._tTime/o._tDur):(J.vars.totalProgress=Ce,J.invalidate().restart())):o&&o.totalProgress(Ce,!!(mt&&(xe||d)))),c){if(d&&w&&(N.style[w+m.os2]=le),!Se)fe(Fo(A+$*Ce));else if(Je){if(dt=!d&&Ce>qe&&de+1>te&&te+1>=Xt(v,m),De)if(!d&&(ot||dt)){var Ke=Vt(c,!0),it=te-X;Es(c,ze,Ke.top+(m===ct?it:0)+lt,Ke.left+(m===ct?0:it)+lt)}else Es(c,N);So(ot||dt?D:G),Ge&&Ce<1&&ot||fe(A+(Ce===1&&!dt?$:0))}}S&&!Ve.tween&&!mt&&!ir&&se.restart(!0),l&&(he||ne&&Ce&&(Ce<1||!Br))&&Ko(l.targets).forEach(function(oo){return oo.classList[ot||ne?"add":"remove"](l.className)}),i&&!z&&!d&&i(a),Je&&!mt?(z&&(nt&&(ue==="complete"?o.pause().totalProgress(1):ue==="reset"?o.restart(!0).pause():ue==="restart"?o.restart(!0):o[ue]()),i&&i(a)),(he||!Br)&&(_&&he&&Fr(a,_),Le[Ee]&&Fr(a,Le[Ee]),ne&&(Ce===1?a.kill(!1,1):Le[Ee]=0),he||(Ee=Ce===1?1:3,Le[Ee]&&Fr(a,Le[Ee]))),Pe&&!ot&&Math.abs(a.getVelocity())>(zo(Pe)?Pe:2500)&&(ko(a.callbackAnimation),J?J.progress(1):ko(o,ue==="reverse"?1:!Ce,1))):z&&i&&!mt&&i(a)}if(yt){var et=R?te/R.duration()*(R._caScrollDist||0):te;$e(et+(u._isFlipped?1:0)),yt(et)}_e&&_e(-te/R.duration()*(R._caScrollDist||0))}},a.enable=function(d,W){a.enabled||(a.enabled=!0,pt(v,"resize",Ho),ie||pt(v,"scroll",vo),y&&pt(n,"refreshInit",y),d!==!1&&(a.progress=be=0,Be=Ie=ae=Me()),W!==!1&&a.refresh())},a.getTween=function(d){return d&&Ve?Ve.tween:J},a.setPositions=function(d,W,F,te){if(R){var tt=R.scrollTrigger,Ce=R.duration(),qe=tt.end-tt.start;d=tt.start+qe*d/Ce,W=tt.start+qe*W/Ce}a.refresh(!1,!1,{start:vs(d,F&&!!a._startClamp),end:vs(W,F&&!!a._endClamp)},te),a.update()},a.adjustPinSpacing=function(d){if(M&&d){var W=M.indexOf(m.d)+1;M[W]=parseFloat(M[W])+d+lt,M[1]=parseFloat(M[1])+d+lt,So(M)}},a.disable=function(d,W){if(a.enabled&&(d!==!1&&a.revert(!0,!0),a.enabled=a.isActive=!1,W||J&&J.pause(),ge=0,Ae&&(Ae.uncache=1),y&&ft(n,"refreshInit",y),se&&(se.pause(),Ve.tween&&Ve.tween.kill()&&(Ve.tween=0)),!ie)){for(var F=we.length;F--;)if(we[F].scroller===v&&we[F]!==a)return;ft(v,"resize",Ho),ie||ft(v,"scroll",vo)}},a.kill=function(d,W){a.disable(d,W),J&&!W&&J.kill(),p&&delete qr[p];var F=we.indexOf(a);F>=0&&we.splice(F,1),F===Pt&&xr>0&&Pt--,F=0,we.forEach(function(te){return te.scroller===a.scroller&&(F=1)}),F||St||(a.scroll.rec=0),o&&(o.scrollTrigger=null,d&&o.revert({kill:!1}),W||o.kill()),Ye&&[Ye,He,u,Ue].forEach(function(te){return te.parentNode&&te.parentNode.removeChild(te)}),Qo===a&&(Qo=0),c&&(Ae&&(Ae.uncache=1),F=0,we.forEach(function(te){return te.pin===c&&F++}),F||(Ae.spacer=0)),t.onKill&&t.onKill(a)},we.push(a),a.enable(!1,!1),E&&E(a),o&&o.add&&!P){var V=a.update;a.update=function(){a.update=V,ye.cache++,X||de||a.refresh()},k.delayedCall(.01,a.update),P=.01,X=de=0}else a.refresh();c&&ri()},n.register=function(t){return yo||(k=t||Js(),Ks()&&window.document&&n.enable(),yo=No),yo},n.defaults=function(t){if(t)for(var o in t)ur[o]=t[o];return ur},n.disable=function(t,o){No=0,we.forEach(function(i){return i[o?"kill":"disable"](t)}),ft(ve,"wheel",vo),ft(Xe,"scroll",vo),clearInterval(nr),ft(Xe,"touchcancel",Yt),ft(ze,"touchstart",Yt),lr(ft,Xe,"pointerdown,touchstart,mousedown",ys),lr(ft,Xe,"pointerup,touchend,mouseup",xs),Sr.kill(),ar(ft);for(var s=0;s<ye.length;s+=3)cr(ft,ye[s],ye[s+1]),cr(ft,ye[s],ye[s+2])},n.enable=function(){if(ve=window,Xe=document,Ot=Xe.documentElement,ze=Xe.body,k&&(Ko=k.utils.toArray,Xo=k.utils.clamp,$r=k.core.context||Yt,Lr=k.core.suppressOverwrites||Yt,rs=ve.history.scrollRestoration||"auto",Kr=ve.pageYOffset||0,k.core.globals("ScrollTrigger",n),ze)){No=1,Po=document.createElement("div"),Po.style.height="100vh",Po.style.position="absolute",cn(),Qn(),rt.register(k),n.isTouch=rt.isTouch,qt=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),jr=rt.isTouch===1,pt(ve,"wheel",vo),os=[ve,Xe,Ot,ze],k.matchMedia?(n.matchMedia=function(_){var T=k.matchMedia(),h;for(h in _)T.add(h,_[h]);return T},k.addEventListener("matchMediaInit",function(){return cs()}),k.addEventListener("matchMediaRevert",function(){return an()}),k.addEventListener("matchMedia",function(){lo(0,1),go("matchMedia")}),k.matchMedia().add("(orientation: portrait)",function(){return zr(),zr})):console.warn("Requires GSAP 3.11.0 or later"),zr(),pt(Xe,"scroll",vo);var t=ze.hasAttribute("style"),o=ze.style,s=o.borderTopStyle,i=k.core.Animation.prototype,l,p;for(i.revert||Object.defineProperty(i,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",l=Vt(ze),ct.m=Math.round(l.top+ct.sc())||0,Mt.m=Math.round(l.left+Mt.sc())||0,s?o.borderTopStyle=s:o.removeProperty("border-top-style"),t||(ze.setAttribute("style",""),ze.removeAttribute("style")),nr=setInterval(Cs,250),k.delayedCall(.5,function(){return ir=0}),pt(Xe,"touchcancel",Yt),pt(ze,"touchstart",Yt),lr(pt,Xe,"pointerdown,touchstart,mousedown",ys),lr(pt,Xe,"pointerup,touchend,mouseup",xs),Vr=k.utils.checkPrefix("transform"),br.push(Vr),yo=wt(),Sr=k.delayedCall(.2,lo).pause(),xo=[Xe,"visibilitychange",function(){var _=ve.innerWidth,T=ve.innerHeight;Xe.hidden?(ms=_,_s=T):(ms!==_||_s!==T)&&Ho()},Xe,"DOMContentLoaded",lo,ve,"load",lo,ve,"resize",Ho],ar(pt),we.forEach(function(_){return _.enable(0,1)}),p=0;p<ye.length;p+=3)cr(ft,ye[p],ye[p+1]),cr(ft,ye[p],ye[p+2])}},n.config=function(t){"limitCallbacks"in t&&(Br=!!t.limitCallbacks);var o=t.syncInterval;o&&clearInterval(nr)||(nr=o)&&setInterval(Cs,o),"ignoreMobileResize"in t&&(jr=n.isTouch===1&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(ar(ft)||ar(pt,t.autoRefreshEvents||"none"),$s=(t.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(t,o){var s=It(t),i=ye.indexOf(s),l=po(s);~i&&ye.splice(i,l?6:2),o&&(l?Zt.unshift(ve,o,ze,o,Ot,o):Zt.unshift(s,o))},n.clearMatchMedia=function(t){we.forEach(function(o){return o._ctx&&o._ctx.query===t&&o._ctx.kill(!0,!0)})},n.isInViewport=function(t,o,s){var i=(Rt(t)?It(t):t).getBoundingClientRect(),l=i[s?co:uo]*o||0;return s?i.right-l>0&&i.left+l<ve.innerWidth:i.bottom-l>0&&i.top+l<ve.innerHeight},n.positionInViewport=function(t,o,s){Rt(t)&&(t=It(t));var i=t.getBoundingClientRect(),l=i[s?co:uo],p=o==null?l/2:o in Ir?Ir[o]*l:~o.indexOf("%")?parseFloat(o)*l/100:parseFloat(o)||0;return s?(i.left+p)/ve.innerWidth:(i.top+p)/ve.innerHeight},n.killAll=function(t){if(we.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),t!==!0){var o=ho.killAll||[];ho={},o.forEach(function(s){return s()})}},n}();me.version="3.12.7";me.saveStyles=function(n){return n?Ko(n).forEach(function(e){if(e&&e.style){var r=At.indexOf(e);r>=0&&At.splice(r,5),At.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),k.core.getCache(e),$r())}}):At};me.revert=function(n,e){return cs(!n,e)};me.create=function(n,e){return new me(n,e)};me.refresh=function(n){return n?Ho(!0):(yo||me.register())&&lo(!0)};me.update=function(n){return++ye.cache&&$t(n===!0?2:0)};me.clearScrollMemory=ln;me.maxScroll=function(n,e){return Xt(n,e?Mt:ct)};me.getScrollFunc=function(n,e){return to(It(n),e?Mt:ct)};me.getById=function(n){return qr[n]};me.getAll=function(){return we.filter(function(n){return n.vars.id!=="ScrollSmoother"})};me.isScrolling=function(){return!!Ft};me.snapDirectional=ls;me.addEventListener=function(n,e){var r=ho[n]||(ho[n]=[]);~r.indexOf(e)||r.push(e)};me.removeEventListener=function(n,e){var r=ho[n],t=r&&r.indexOf(e);t>=0&&r.splice(t,1)};me.batch=function(n,e){var r=[],t={},o=e.interval||.016,s=e.batchMax||1e9,i=function(_,T){var h=[],f=[],c=k.delayedCall(o,function(){T(h,f),h=[],f=[]}).pause();return function(w){h.length||c.restart(!0),h.push(w.trigger),f.push(w),s<=h.length&&c.progress(1)}},l;for(l in e)t[l]=l.substr(0,2)==="on"&&vt(e[l])&&l!=="onRefreshInit"?i(l,e[l]):e[l];return vt(s)&&(s=s(),pt(me,"refresh",function(){return s=e.batchMax()})),Ko(n).forEach(function(p){var _={};for(l in t)_[l]=t[l];_.trigger=p,r.push(me.create(_))}),r};var Ds=function(e,r,t,o){return r>o?e(o):r<0&&e(0),t>o?(o-r)/(t-r):t<0?r/(r-t):1},Ur=function n(e,r){r===!0?e.style.removeProperty("touch-action"):e.style.touchAction=r===!0?"auto":r?"pan-"+r+(rt.isTouch?" pinch-zoom":""):"none",e===Ot&&n(ze,r)},hr={auto:1,scroll:1},li=function(e){var r=e.event,t=e.target,o=e.axis,s=(r.changedTouches?r.changedTouches[0]:r).target,i=s._gsap||k.core.getCache(s),l=wt(),p;if(!i._isScrollT||l-i._isScrollT>2e3){for(;s&&s!==ze&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(hr[(p=Nt(s)).overflowY]||hr[p.overflowX]));)s=s.parentNode;i._isScroll=s&&s!==t&&!po(s)&&(hr[(p=Nt(s)).overflowY]||hr[p.overflowX]),i._isScrollT=l}(i._isScroll||o==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},fn=function(e,r,t,o){return rt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:o=o&&li,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return t&&pt(Xe,rt.eventTypes[0],Rs,!1,!0)},onDisable:function(){return ft(Xe,rt.eventTypes[0],Rs,!0)}})},ci=/(input|label|select|textarea)/i,As,Rs=function(e){var r=ci.test(e.target.tagName);(r||As)&&(e._gsapAllow=!0,As=r)},ui=function(e){no(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var r=e,t=r.normalizeScrollX,o=r.momentum,s=r.allowNestedScroll,i=r.onRelease,l,p,_=It(e.target)||Ot,T=k.core.globals().ScrollSmoother,h=T&&T.get(),f=qt&&(e.content&&It(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),c=to(_,ct),w=to(_,Mt),I=1,g=(rt.isTouch&&ve.visualViewport?ve.visualViewport.scale*ve.visualViewport.width:ve.outerWidth)/ve.innerWidth,re=0,ee=vt(o)?function(){return o(l)}:function(){return o||2.8},ne,S,De=fn(_,e.type,!0,s),Q=function(){return S=!1},R=Yt,Pe=Yt,oe=function(){p=Xt(_,ct),Pe=Xo(qt?1:0,p),t&&(R=Xo(0,Xt(_,Mt))),ne=fo},m=function(){f._gsap.y=Fo(parseFloat(f._gsap.y)+c.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",c.offset=c.cacheID=0},z=function(){if(S){requestAnimationFrame(Q);var B=Fo(l.deltaY/2),C=Pe(c.v-B);if(f&&C!==c.v+c.offset){c.offset=C-c.v;var a=Fo((parseFloat(f&&f._gsap.y)||0)-c.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+a+", 0, 1)",f._gsap.y=a+"px",c.cacheID=ye.cache,$t()}return!0}c.offset&&m(),S=!0},v,L,ie,Se,Le=function(){oe(),v.isActive()&&v.vars.scrollY>p&&(c()>p?v.progress(1)&&c(p):v.resetTo("scrollY",p))};return f&&k.set(f,{y:"+=0"}),e.ignoreCheck=function(j){return qt&&j.type==="touchmove"&&z()||I>1.05&&j.type!=="touchstart"||l.isGesturing||j.touches&&j.touches.length>1},e.onPress=function(){S=!1;var j=I;I=Fo((ve.visualViewport&&ve.visualViewport.scale||1)/g),v.pause(),j!==I&&Ur(_,I>1.01?!0:t?!1:"x"),L=w(),ie=c(),oe(),ne=fo},e.onRelease=e.onGestureStart=function(j,B){if(c.offset&&m(),!B)Se.restart(!0);else{ye.cache++;var C=ee(),a,y;t&&(a=w(),y=a+C*.05*-j.velocityX/.227,C*=Ds(w,a,y,Xt(_,Mt)),v.vars.scrollX=R(y)),a=c(),y=a+C*.05*-j.velocityY/.227,C*=Ds(c,a,y,Xt(_,ct)),v.vars.scrollY=Pe(y),v.invalidate().duration(C).play(.01),(qt&&v.vars.scrollY>=p||a>=p-1)&&k.to({},{onUpdate:Le,duration:C})}i&&i(j)},e.onWheel=function(){v._ts&&v.pause(),wt()-re>1e3&&(ne=0,re=wt())},e.onChange=function(j,B,C,a,y){if(fo!==ne&&oe(),B&&t&&w(R(a[2]===B?L+(j.startX-j.x):w()+B-a[1])),C){c.offset&&m();var U=y[2]===C,H=U?ie+j.startY-j.y:c()+C-y[1],ae=Pe(H);U&&H!==ae&&(ie+=ae-H),c(ae)}(C||B)&&$t()},e.onEnable=function(){Ur(_,t?!1:"x"),me.addEventListener("refresh",Le),pt(ve,"resize",Le),c.smooth&&(c.target.style.scrollBehavior="auto",c.smooth=w.smooth=!1),De.enable()},e.onDisable=function(){Ur(_,!0),ft(ve,"resize",Le),me.removeEventListener("refresh",Le),De.kill()},e.lockAxis=e.lockAxis!==!1,l=new rt(e),l.iOS=qt,qt&&!c()&&c(1),qt&&k.ticker.add(Yt),Se=l._dc,v=k.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:t?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:un(c,c(),function(){return v.pause()})},onUpdate:$t,onComplete:Se.vars.onComplete}),l};me.sort=function(n){if(vt(n))return we.sort(n);var e=ve.pageYOffset||0;return me.getAll().forEach(function(r){return r._sortY=r.trigger?e+r.trigger.getBoundingClientRect().top:r.start+ve.innerHeight}),we.sort(n||function(r,t){return(r.vars.refreshPriority||0)*-1e6+(r.vars.containerAnimation?1e6:r._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+(t.vars.refreshPriority||0)*-1e6)})};me.observe=function(n){return new rt(n)};me.normalizeScroll=function(n){if(typeof n>"u")return Tt;if(n===!0&&Tt)return Tt.enable();if(n===!1){Tt&&Tt.kill(),Tt=n;return}var e=n instanceof rt?n:ui(n);return Tt&&Tt.target===e.target&&Tt.kill(),po(e.target)&&(Tt=e),e};me.core={_getVelocityProp:Zr,_inputObserver:fn,_scrollers:ye,_proxies:Zt,bridge:{ss:function(){Ft||go("scrollStart"),Ft=wt()},ref:function(){return mt}}};Js()&&k.registerPlugin(me);var qo=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(T){T.preventDefault(),t(++n%e.children.length)},!1);function r(T){return e.appendChild(T.dom),T}function t(T){for(var h=0;h<e.children.length;h++)e.children[h].style.display=h===T?"block":"none";n=T}var o=(performance||Date).now(),s=o,i=0,l=r(new qo.Panel("FPS","#0ff","#002")),p=r(new qo.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var _=r(new qo.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:r,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){i++;var T=(performance||Date).now();if(p.update(T-o,200),T>=s+1e3&&(l.update(i*1e3/(T-s),100),s=T,i=0,_)){var h=performance.memory;_.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return T},update:function(){o=this.end()},domElement:e,setMode:t}};qo.Panel=function(n,e,r){var t=1/0,o=0,s=Math.round,i=s(window.devicePixelRatio||1),l=80*i,p=48*i,_=3*i,T=2*i,h=3*i,f=15*i,c=74*i,w=30*i,I=document.createElement("canvas");I.width=l,I.height=p,I.style.cssText="width:80px;height:48px";var g=I.getContext("2d");return g.font="bold "+9*i+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=r,g.fillRect(0,0,l,p),g.fillStyle=e,g.fillText(n,_,T),g.fillRect(h,f,c,w),g.fillStyle=r,g.globalAlpha=.9,g.fillRect(h,f,c,w),{dom:I,update:function(re,ee){t=Math.min(t,re),o=Math.max(o,re),g.fillStyle=r,g.globalAlpha=1,g.fillRect(0,0,l,f),g.fillStyle=e,g.fillText(s(re)+" "+n+" ("+s(t)+"-"+s(o)+")",_,T),g.drawImage(I,h+i,f,c-i,w,h,f,c-i,w),g.fillRect(h+c-i,f,i,w),g.fillStyle=r,g.globalAlpha=.9,g.fillRect(h+c-i,f,i,s((1-re/ee)*w))}}};const pn={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class er{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const fi=new Sn(-1,1,1,-1,0,1);class pi extends To{constructor(){super(),this.setAttribute("position",new fs([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new fs([0,2,0,0,2,0],2))}}const di=new pi;class dn{constructor(e){this._mesh=new We(di,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,fi)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class hi extends er{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof ao?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Yr.clone(e.uniforms),this.material=new ao({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new dn(this.material)}render(e,r,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class ks extends er{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,t){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let i,l;this.inverse?(i=0,l=1):(i=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class gi extends er{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class mi{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const t=e.getSize(new kt);this._width=t.width,this._height=t.height,r=new mr(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:_r}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new hi(pn),this.copyPass.material.blending=Mn,this.clock=new En}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let t=!1;for(let o=0,s=this.passes.length;o<s;o++){const i=this.passes[o];if(i.enabled!==!1){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),i.needsSwap){if(t){const l=this.renderer.getContext(),p=this.renderer.state.buffers.stencil;p.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),p.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}ks!==void 0&&(i instanceof ks?t=!0:i instanceof gi&&(t=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new kt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(t,o),this.renderTarget2.setSize(t,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(t,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class _i extends er{constructor(e,r,t=null,o=null,s=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=t,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ct}render(e,r,t){const o=e.autoClear;e.autoClear=!1;let s,i;this.overrideMaterial!==null&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=i),e.autoClear=o}}const wi={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ct(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class mo extends er{constructor(e,r,t,o){super(),this.strength=r!==void 0?r:1,this.radius=t,this.threshold=o,this.resolution=e!==void 0?new kt(e.x,e.y):new kt(256,256),this.clearColor=new Ct(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);this.renderTargetBright=new mr(s,i,{type:_r}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let h=0;h<this.nMips;h++){const f=new mr(s,i,{type:_r});f.texture.name="UnrealBloomPass.h"+h,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const c=new mr(s,i,{type:_r});c.texture.name="UnrealBloomPass.v"+h,c.texture.generateMipmaps=!1,this.renderTargetsVertical.push(c),s=Math.round(s/2),i=Math.round(i/2)}const l=wi;this.highPassUniforms=Yr.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ao({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const p=[3,5,7,9,11];s=Math.round(this.resolution.x/2),i=Math.round(this.resolution.y/2);for(let h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(p[h])),this.separableBlurMaterials[h].uniforms.invSize.value=new kt(1/s,1/i),s=Math.round(s/2),i=Math.round(i/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const _=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=_,this.bloomTintColors=[new pe(1,1,1),new pe(1,1,1),new pe(1,1,1),new pe(1,1,1),new pe(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const T=pn;this.copyUniforms=Yr.clone(T.uniforms),this.blendMaterial=new ao({uniforms:this.copyUniforms,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,blending:Wt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ct,this.oldClearAlpha=1,this.basic=new Et,this.fsQuad=new dn(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let t=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(t,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(t,o),this.renderTargetsVertical[s].setSize(t,o),this.separableBlurMaterials[s].uniforms.invSize.value=new kt(1/t,1/o),t=Math.round(t/2),o=Math.round(o/2)}render(e,r,t,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const i=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let p=0;p<this.nMips;p++)this.fsQuad.material=this.separableBlurMaterials[p],this.separableBlurMaterials[p].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[p].uniforms.direction.value=mo.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[p]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[p].uniforms.colorTexture.value=this.renderTargetsHorizontal[p].texture,this.separableBlurMaterials[p].uniforms.direction.value=mo.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[p]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[p];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=i}getSeparableBlurMaterial(e){const r=[];for(let t=0;t<e;t++)r.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new ao({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new kt(.5,.5)},direction:{value:new kt(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new ao({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}mo.BlurDirectionX=new kt(1,0);mo.BlurDirectionY=new kt(0,1);class vi extends In{constructor(e,r={}){const t=r.font;if(t===void 0)super();else{const o=t.generateShapes(e,r.size);r.depth===void 0&&(r.depth=50),r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),super(o,r)}this.type="TextGeometry"}}function yi(n,e,r,t){const{CUBE_SIZE:o,FIRST_CUBE_Z:s}=r,i=8,l=24,p=.075;let _,T=[],h=[],f=[],c=[];const w=(g,re,ee,ne)=>{const S=new Mo(g,g,g),De=new Uo(S),Q=[new Dt({color:16711680,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:65280,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:255,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:65535,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:16711935,transparent:!0,opacity:ne.opacity,blending:Wt}),new Dt({color:16776960,transparent:!0,opacity:ne.opacity,blending:Wt})],R=new _t,Pe=De.getAttribute("position").array,oe=[];for(let v=0;v<Pe.length/3;v+=2)oe.push(v,v+1);const m=Array(6).fill(null).map(()=>new To),z=Array(6).fill(null).map(()=>[]);for(let v=0;v<oe.length/2;v++){const L=v%6;z[L].push(oe[v*2],oe[v*2+1])}return m.forEach((v,L)=>{v.setIndex(z[L]),v.setAttribute("position",De.getAttribute("position"));const ie=new Gt(v,Q[L]);R.add(ie)}),R.position.z=re,R.rotation.z=ee,R};return(()=>{const ee=.9/(l-1);for(let oe=0;oe<l;oe++)h[oe]=new Dt({transparent:!0,opacity:1-oe*ee});if(_=new _t,!_){console.error("introGroup failed to initialize");return}for(let oe=0;oe<l;oe++){const m=o-oe*i,z=w(m,0,0,h[oe]),v=z.children.map(L=>L.material);c.push(v.map(L=>({material:L,originalColor:L.color.clone()}))),_.add(z)}_.position.z=s,e.add(_),T.push(_),f=h.map(oe=>oe.opacity);const ne=Ze.timeline({repeat:-1});ne.to(_.rotation,{x:Fe.degToRad(360),duration:12,ease:"none"},0),ne.to(_.rotation,{y:Fe.degToRad(360),duration:10,ease:"none"},0),ne.to(_.rotation,{z:Fe.degToRad(360),duration:14,ease:"none"},0);let S=-1,De=0;const Q=p*1e3,R=l*Q,Pe=oe=>{const m=oe%R/Q,z=Math.floor(m)%l;S!==-1&&oe-De>=Q&&(c[S].forEach(ie=>{ie.material.opacity=f[S],ie.material.color.copy(ie.originalColor)}),S=-1),S===-1&&z!==S&&(S=z,De=oe,c[S].forEach(L=>{L.material.opacity=1,L.material.color.set(1,1,1)})),requestAnimationFrame(Pe)};requestAnimationFrame(Pe)})(),{introCubes:T}}class xi extends Dn{constructor(e){super(e)}load(e,r,t,o){const s=this,i=new An(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(l){const p=s.parse(JSON.parse(l));r&&r(p)},t,o)}parse(e){return new bi(e)}}class bi{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,r=100){const t=[],o=Ti(e,r,this.data);for(let s=0,i=o.length;s<i;s++)t.push(...o[s].toShapes());return t}}function Ti(n,e,r){const t=Array.from(n),o=e/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,i=[];let l=0,p=0;for(let _=0;_<t.length;_++){const T=t[_];if(T===`
`)l=0,p-=s;else{const h=Ci(T,o,l,p,r);l+=h.offsetX,i.push(h.path)}}return i}function Ci(n,e,r,t,o){const s=o.glyphs[n]||o.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+o.familyName+".");return}const i=new Rn;let l,p,_,T,h,f,c,w;if(s.o){const I=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let g=0,re=I.length;g<re;)switch(I[g++]){case"m":l=I[g++]*e+r,p=I[g++]*e+t,i.moveTo(l,p);break;case"l":l=I[g++]*e+r,p=I[g++]*e+t,i.lineTo(l,p);break;case"q":_=I[g++]*e+r,T=I[g++]*e+t,h=I[g++]*e+r,f=I[g++]*e+t,i.quadraticCurveTo(h,f,_,T);break;case"b":_=I[g++]*e+r,T=I[g++]*e+t,h=I[g++]*e+r,f=I[g++]*e+t,c=I[g++]*e+r,w=I[g++]*e+t,i.bezierCurveTo(h,f,c,w,_,T);break}}return{offsetX:s.ha*e,path:i}}function Pi(n,e,r,t,o,s,i){const l=Hs(),{CUBE_SIZE:p,CUBE_SPACING:_,FIRST_CUBE_Z:T}=e,h=T-(r.length+1)*_,f=65535,c=16711935,w=16711680,I=Fe.degToRad(15),g=1e3,re=.5,ee=80,ne=1,S=15,De=.1,Q=l.isMobile?1:.5,R=40,Pe=.125,oe=100,m=5,z=l.isMobile?1.5:2,v=l.isMobile?2:2.5;let L=[];L.length=0;let ie=null,Se=null,Le=!1,j=!1,B=new ps,C=new kt,a=null,y=null,U=null,H=!1,ae=null;const xe=new Map,be=new Map,Me=new Map,Ve=(x,P,K,D,G,N)=>{const Z=new _t;Z.position.z=K,Z.rotation.z=D,Z.userData.isActive=!1;const q=new Mo(P,P,P),fe=new Uo(q),A=new Dt({color:new Ct(f),transparent:!0,opacity:0}),$=new Gt(fe,A);$.geometry.computeBoundingSphere(),Z.add($);let le="right";const M=P/2,$e=()=>{const J=new ds(40,24),ce=new Uo(J),Y=new Dt({color:new Ct(f),transparent:!0,opacity:0,visible:!0}),se=new Gt(ce,Y);se.userData.isPortal=!0,se.userData.isAnimating=!1,se.geometry.computeBoundingSphere();const ge=new ro(80,80),Re=new Et({visible:!1,side:Qt}),_e=new We(ge,Re);_e.userData.isPortalHitbox=!0,_e.userData.portal=se,_e.geometry.computeBoundingSphere();const E=new _t,Ne=new ro(ne,S),O=65/2;for(let he=0;he<ee;he++){const dt=new Et({color:new Ct(c),transparent:!0,opacity:0,visible:!1,side:Qt}),nt=new We(Ne,dt),Ke=he/ee*Math.PI*2;nt.position.set(Math.cos(Ke)*O,Math.sin(Ke)*O,0),nt.rotation.z=Ke+Math.PI/2,nt.userData.baseOpacity=.01,nt.userData.index=he,nt.geometry.computeBoundingSphere(),E.add(nt)}const b=2,V=25;for(let he=1;he<V;he++){const dt=new ds(40,24),nt=new Uo(dt),Ke=Fe.lerp(1,.1,he/(V-1)),it=new Dt({color:new Ct(f),transparent:!0,opacity:0}),et=new Gt(nt,it);et.userData.isPortal=!0,et.userData.maxOpacity=Ke,et.position.z=-he*b,et.geometry.computeBoundingSphere(),se.add(et)}se.userData.maxOpacity=1;const d=new _t,W=new ro(12,1),F=new Et({color:16777215,transparent:!0,opacity:0,side:Qt}),te=new We(W,F);te.rotation.z=Math.PI/4;const tt=new We(W,F);tt.rotation.z=-Math.PI/4,d.add(te,tt);const Ce=new ro(30,30),qe=new Et({opacity:0,transparent:!0,side:Qt,visible:!0}),ot=new We(Ce,qe);ot.userData.isCloseHitbox=!0,ot.geometry.computeBoundingSphere(),ot.renderOrder=2,d.add(ot);const ke=42,Ee=42,ue=-10;d.visible=!1;let Je;switch(le){case"left":se.position.set(-M,0,0),se.rotation.y=Math.PI/2,_e.position.set(-M,0,0),_e.rotation.y=Math.PI/2,D>=Fe.degToRad(120)?(d.position.set(-M+ue,-42,ke),Je=new pe(-M+ue,-42,ke)):(d.position.set(-M+ue,Ee,-42),Je=new pe(-M+ue,Ee,-42)),d.rotation.y=Math.PI/2,E.children.forEach(he=>he.position.x+=De);break;case"top":se.position.set(0,-M,0),se.rotation.x=-Math.PI/2,_e.position.set(0,-M,0),_e.rotation.x=Math.PI/2,D>=Fe.degToRad(100)?D>=Fe.degToRad(180)?(d.position.set(-42,-M+ue,-42),Je=new pe(-42,-M+ue,-42)):(d.position.set(Ee,-M+ue,ke),Je=new pe(Ee,-M+ue,ke)):(d.position.set(Ee,-M+ue,ke),Je=new pe(Ee,-M+ue,ke)),d.rotation.x=-Math.PI/2,E.children.forEach(he=>he.position.y+=De);break;case"right":se.position.set(M,0,0),se.rotation.y=-Math.PI/2,_e.position.set(M,0,0),_e.rotation.y=-Math.PI/2,D>=Fe.degToRad(120)?(d.position.set(M+ue,-42,-42),Je=new pe(M+ue,-42,-42)):(d.position.set(M+ue,Ee,ke),Je=new pe(M+ue,Ee,ke)),d.rotation.y=-Math.PI/2,E.children.forEach(he=>he.position.x+=De);break;case"bottom":se.position.set(0,M,0),se.rotation.x=Math.PI/2,_e.position.set(0,M,0),_e.rotation.x=Math.PI/2,D>=Fe.degToRad(100)?(d.position.set(ke,M-ue,-42),Je=new pe(ke,M-ue,-42)):(d.position.set(Ee,M-ue,-42),Je=new pe(Ee,M-ue,-42)),d.rotation.x=Math.PI/2,E.children.forEach(he=>he.position.y+=De);break}Z.userData.initialCloseGroupPosition=Je,d.updateMatrixWorld(!0),se.add(E),Z.add(se),Z.add(_e),Z.add(d),Z.userData.closeButton=d,se.updateMatrixWorld(!0),E.updateMatrixWorld(!0),d.updateMatrixWorld(!0),xe.set(Z,[]),be.set(Z,0),Me.set(Z,0)},Ge=Te=>{(Te instanceof Gt||Te instanceof We)&&Te.geometry&&Te.geometry.computeBoundingSphere(),Z.add(Te)};if(G&&s.showKeyarts){switch(["left","top","right","bottom"].includes(N)?N:"left"){case"left":le="right";break;case"top":le="bottom";break;case"right":le="left";break;case"bottom":le="top";break}const je=i.get(G);if(je){const J=new ro(P-1,P-1),ce=new Et({map:je,transparent:!0,opacity:0,blending:Wt,side:Qt}),Y=new We(J,ce);switch(Y.userData.isLoaded=!0,N){case"left":Y.position.set(-M,0,0),D>=Fe.degToRad(120)?(Y.rotation.y=Math.PI/2,Y.rotation.z=-Math.PI):Y.rotation.y=Math.PI/2;break;case"top":Y.position.set(0,-M,0),Y.rotation.x=-Math.PI/2,Y.rotation.z=-Math.PI/2;break;case"right":Y.position.set(M,0,0),D>=Fe.degToRad(120)?(Y.rotation.y=-Math.PI/2,Y.rotation.z=-Math.PI):Y.rotation.y=-Math.PI/2;break;case"bottom":Y.position.set(0,M,0),D>=Fe.degToRad(180)?D>=Fe.degToRad(220)?(Y.rotation.x=Math.PI/2,Y.rotation.z=Math.PI/2):(Y.rotation.x=-Math.PI/2,Y.rotation.z=Math.PI/2):(Y.rotation.x=Math.PI/2,Y.rotation.z=-Math.PI/2);break}Y.geometry.computeBoundingSphere(),Ge(Y),$e()}else console.warn(`Keyart texture not preloaded for ${x.title}: ${G}`),$e()}else $e();Z.userData.portalLocation=le;{const Te=(Re,_e,E,Ne)=>{const O=new ro(P-1,P-1),b={map:Re,transparent:!0,opacity:0,blending:Wt,side:Qt,depthWrite:!1};Ne&&(b.color=Ne);const V=new Et(b),d=new We(O,V);d.position.copy(_e),E.x&&(d.rotation.x=E.x),E.y&&(d.rotation.y=E.y),d.userData.isGridPlane=!0,d.geometry.computeBoundingSphere(),Ge(d)},je=i.get(t),J=i.get(o),ce=["left","top","right","bottom"],se=[G&&s.showKeyarts?N||"left":null,le].filter(Boolean),ge=ce.filter(Re=>!se.includes(Re));if(je)switch(Te(je,new pe(0,0,-P/2-1),{y:0}),Te(je,new pe(0,0,P/2+1),{y:0},new Ct(16744448)),ge[0]){case"left":Te(je,new pe(-M,0,0),{y:-Math.PI/2},new Ct(255));break;case"top":Te(je,new pe(0,M,0),{x:Math.PI/2},new Ct(255));break;case"right":Te(je,new pe(M,0,0),{y:Math.PI/2},new Ct(255));break;case"bottom":Te(je,new pe(0,-M,0),{x:-Math.PI/2},new Ct(255));break}else console.warn(`Grid texture not preloaded: ${t}`);if(J)switch(ge[1]){case"left":Te(J,new pe(-M,0,0),{y:-Math.PI/2});break;case"top":Te(J,new pe(0,M,0),{x:Math.PI/2});break;case"right":Te(J,new pe(M,0,0),{y:Math.PI/2});break;case"bottom":Te(J,new pe(0,-M,0),{x:-Math.PI/2});break}else console.warn(`Grid texture not preloaded: ${o}`)}Z.children.forEach(Te=>{Te.updateMatrixWorld(!0),Te instanceof _t&&Te.children.forEach(je=>{je.updateMatrixWorld(!0)})}),Z.updateMatrixWorld(!0);const yt=new Ns().setFromObject(Z),ut=new Fs;return yt.getBoundingSphere(ut),Z.boundingSphere=ut,Z},Ae=new kn,Oe=(x,P,K,D,G,N)=>{const Z=new vi(x,{font:N,size:G,depth:0,curveSegments:12,bevelEnabled:!1});Z.computeBoundingBox(),Z.center();const q=new Et({color:16777215,transparent:!0,opacity:0,side:Qt}),fe=new We(Z,q);fe.position.set(P,K,D);const A=Z.boundingBox,$=A.max.x-A.min.x,le=A.max.y-A.min.y,M=$+8,$e=le+4,Ge=new ro(M,$e),yt=new Et({color:0,transparent:!0,opacity:0,side:Qt}),ut=new We(Ge,yt);return ut.position.set(P,K,D-1),n.add(ut),n.add(fe),fe.userData.backgroundPlane=ut,fe},Be=()=>new Promise(x=>{ie=new xi,ie.load("/fonts/Poppins_Regular.json",P=>{Se=P;const K=Array.isArray(r)?r:[];Array.isArray(r)||console.warn("useProjectCubes: projects is not an array, defaulting to empty array",r),K.forEach((D,G)=>{const N=T-(G+1)*_,Z=(G+1)*I,q=Ve(D,p,N,Z,D.keyart,D.keyartLocation);n.add(q),L.push(q),Oe(D.title,0,D.size-15,T+90-(G+1)*_,D.size,P)}),x()},void 0,P=>console.error("Error loading font:",P))}),Ie=()=>Le?Promise.resolve({projectCubes:L,updateCubeColors:u,loadedFont:Se,maxZ:h}):Be().then(()=>(Le=!0,{projectCubes:L,updateCubeColors:u,loadedFont:Se,maxZ:h})).catch(x=>{throw console.error("Error in loadFontAndText:",x),x}),X=x=>{if(x.userData.isAnimating)return;x.userData.isAnimating=!0;const P=x.children.find(Z=>Z instanceof _t);if(!P)return;const K=P.children,D=K.length,G=Ze.timeline({repeat:-1,defaults:{ease:"none"}}),N={value:0};G.to(N,{value:1,duration:1.5,onUpdate:()=>{K.forEach(q=>{const fe=q.material;if(fe.visible){const A=(q.userData.index/D+N.value)%1,le=(Math.sin(A*Math.PI*2)+1)/2;fe.opacity=.01+(1-.01)*Math.pow(le,4)}})}}),x.userData.animationTimeline=G},de=x=>{if(!x.userData.isAnimating)return;x.userData.isAnimating=!1;const P=x.children.find(K=>K instanceof _t);P&&(x.userData.animationTimeline&&(x.userData.animationTimeline.kill(),delete x.userData.animationTimeline),P.children.forEach(K=>{const D=K.material;D.opacity=0}))},Ye=(x,P)=>{let K;const D=(Me.get(x)||0)+1;Me.set(x,D),D%m===0?K=new On(z,v,6,1):K=new Mo(Q,Q,Q);const G=new Et({color:16777215}),N=new We(K,G);N.position.set(0,0,0);const Z=P.position.clone(),q=Z.clone().normalize(),fe=Z.length()+oe;if(D%m===0){const $=N.position.clone().add(q);N.lookAt($),N.rotateX(Math.PI/2)}x.add(N);const A=xe.get(x)||[];A.push({mesh:N,direction:q,distanceTraveled:0,totalDistance:fe}),xe.set(x,A)},He=x=>{(xe.get(x)||[]).forEach(K=>{x.remove(K.mesh),K.mesh.geometry.dispose(),K.mesh.material.dispose()}),xe.set(x,[])},u=x=>{Ae.setFromProjectionMatrix(x.projectionMatrix.clone().multiply(x.matrixWorldInverse));const P=x.position.z;let K=[];n.traverse(D=>{var G;return D instanceof We&&((G=D.geometry)==null?void 0:G.type)==="TextGeometry"&&K.push(D)}),j||(j=!0),L.forEach((D,G)=>{const N=D.boundingSphere;if(N){const A=N.clone();if(A.radius*=1.5,!Ae.intersectsSphere(A))return}else console.warn(`Cube ${G} has no boundingSphere`);const Z=D.position.z,q=Math.abs(P-Z+90);let fe=0;q<=g&&(fe=1-q/g),D.userData.isActive=fe>=re,D.children.forEach(A=>{if(A instanceof Gt&&!A.userData.isPortal&&!A.userData.isPortalHitbox){const $=A.material;if(q<=g){const le=Fe.lerp((f>>16&255)/255,(c>>16&255)/255,fe),M=Fe.lerp((f>>8&255)/255,(c>>8&255)/255,fe),$e=Fe.lerp((f&255)/255,(c&255)/255,fe);$.color.set(le,M,$e),$.opacity=Math.min(1,fe*2)}else $.opacity=0}else if(A instanceof Gt&&A.userData.isPortal)j&&(fe>.1?A.children.forEach($=>{$ instanceof _t&&$.children.forEach(le=>{le instanceof We&&(le.material.visible=!0,!A.userData.animationStarted&&s.showPortalPulses&&(X(A),A.userData.animationStarted=!0))})}):fe<=.1&&A.userData.animationStarted&&(A.children.forEach($=>{$ instanceof _t&&$.children.forEach(le=>{le instanceof We&&(le.material.visible=!1)})}),de(A),delete A.userData.animationStarted));else if(A instanceof We&&!A.userData.isPortalHitbox&&!A.userData.isCloseHitbox){const $=A.material;if(A.userData.isLoaded||A.userData.isGridPlane)if(q<=g){const le=1-q/g;$.opacity=Math.min(.8,le*2)}else $.opacity=0}else if(A instanceof _t&&A.userData.closeButton){const $=Math.abs(P-A.position.z);A.children.forEach(le=>{if(le instanceof We&&!le.userData.isCloseHitbox){const M=le.material;if($<=g){const $e=1-$/g;M.opacity=Math.min(1,$e*2)}else M.opacity=0}})}})}),K.forEach(D=>{if(!Ae.intersectsObject(D))return;const G=D.material,N=D.userData.backgroundPlane,Z=N==null?void 0:N.material,q=D.position.z,fe=Math.abs(P-q+120);if(fe<=g){const A=1-fe/g,$=Math.min(1,A*2);G.opacity=$,Z&&(Z.opacity=$*.8)}else G.opacity=0,Z&&(Z.opacity=0)})};return{getInitializedData:Ie,updateCubeColors:u,setupInteractivity:(x,P,K)=>{ae=K;let D=null,G=null,N=null,Z=!1,q=!1,fe=!1,A=!1;const $=ce=>{H&&(D=ce.touches[0].clientY,G=G??window.scrollY,Z=!0)},le=ce=>{if(!H||!N||!D)return;const se=ce.touches[0].clientY-D;se<-20&&!q?(Ge(),D=null):se>20&&(ce.preventDefault(),window.scrollTo(0,G),Ze.to(window,{scrollTo:{y:G},duration:0}))},M=()=>{D=null,Z=!1,fe=!0,Ze.delayedCall(.5,()=>{fe=!1})},$e=ce=>{if(Z||q||fe){ce.preventDefault(),ce.stopPropagation(),G!==null&&(window.scrollTo(0,G),Ze.to(window,{scrollTo:{y:G},duration:0}));return}if(!H||!N||!y||!U)return;let Y=0;if(ce instanceof WheelEvent?Y=ce.deltaY:Y=window.scrollY-(G||0),ce.preventDefault(),ce.stopPropagation(),Y>0){window.scrollTo(0,G);return}Y<0&&Ge()},Ge=()=>{const ce=N,Y=U?U.clone():new pe(0,0,h),se=(y==null?void 0:y.z)??x.position.z,ge=ce==null?void 0:ce.parent;A=!0;const Re=x.userData.lockedLookAt?x.userData.lockedLookAt.clone():x.getWorldDirection(new pe).multiplyScalar(1e3).add(x.position);console.log("startLookAt",Re,"targetLookAt",Y);const _e={progress:0};Ze.to(x.position,{x:(y==null?void 0:y.x)??x.position.x,y:(y==null?void 0:y.y)??x.position.y,z:se,duration:2,ease:"power3.inOut",overwrite:"auto",onUpdate:()=>{const E=_e.progress,Ne=Fe.lerp(Re.x,Y.x,E),O=Fe.lerp(Re.y,Y.y,E),b=Fe.lerp(Re.z,Y.z,E);x.lookAt(Ne,O,b),x.updateMatrixWorld(!0)},onComplete:()=>{if(x.lookAt(Y),H=!1,N=null,document.body.classList.remove("no-scrollbar"),ae&&ae(!1),ce&&yt(ce,!1),ge!=null&&ge.userData.closeButton){const E=ge.userData.closeButton.children.filter(Ne=>Ne instanceof We).map(Ne=>Ne.material);Ze.to(E,{opacity:0,duration:.5,onUpdate:()=>{ge.userData.closeButton.visible=!1},onComplete:()=>{ge.userData.closeButton.updateMatrixWorld(!0),ge.userData.standaloneDebugPlane&&(ge.userData.standaloneDebugPlane.visible=!1,ge.userData.standaloneDebugPlane.userData.locked=!1,ge.userData.standaloneDebugPlane.updateMatrixWorld(!0),console.log("Standalone debug plane hidden on exit, position unchanged:",ge.userData.standaloneDebugPlane.getWorldPosition(new pe))),ge.userData.lockedPosition=null}})}G=null,y=null,U=null,x.userData.lockedLookAt=null,A=!1,L.forEach(E=>{Math.abs(x.position.z-E.position.z+90)<=g&&be.set(E,0)})}}),Ze.to(_e,{progress:1,duration:2,ease:"power3.inOut",overwrite:"auto"})},yt=(ce,Y=!0)=>{const se=[ce,...ce.children.filter(Re=>Re instanceof Gt&&Re.userData.isPortal)],ge=Y?25:2;se.forEach((Re,_e)=>{let E=-_e*ge;(ce.position.y>0&&ce.rotation.x===-Math.PI/2||ce.position.y<0&&ce.rotation.x===Math.PI/2)&&(E=_e*ge);const Ne=Y?Re.userData.maxOpacity:0;Ze.to(Re.position,{z:E,duration:1,ease:"power3.out",delay:.5}),Ze.to(Re.material,{opacity:Ne,duration:1,ease:"power3.out",delay:.5})})},ut=ce=>{C.x=ce.clientX/window.innerWidth*2-1,C.y=-(ce.clientY/window.innerHeight)*2+1,B.setFromCamera(C,x),x.userData.lockedLookAt&&(x.lookAt(x.userData.lockedLookAt),x.updateMatrixWorld(!0)),L.forEach(E=>{E.userData.lockedPosition&&(E.position.equals(E.userData.lockedPosition)||E.position.copy(E.userData.lockedPosition)),E.updateMatrixWorld(!0),E.children.forEach(Ne=>Ne.updateMatrixWorld(!0))});const Y=L.flatMap(E=>{const Ne=[];return E.userData.isActive&&E.children.forEach(O=>{O instanceof We&&O.userData.isPortalHitbox&&Ne.push(O)}),H&&N&&E===N.parent&&E.children.forEach(O=>{O instanceof _t&&O===E.userData.closeButton&&O.children.forEach(b=>{b instanceof We&&b.userData.isCloseHitbox&&Ne.push(b)})}),Ne}),se=B.intersectObjects(Y),ge=new ps,Re=new pe(0,0,-1e3),_e=new pe(100.21107012893698,70.33307489093076,-958).sub(Re).normalize();if(ge.set(Re,_e),se.length>0){const E=se[0].object;if(E.userData.isPortalHitbox){const Ne=E.userData.portal;if(a!==Ne){if(a){const b=a.material;Ze.to(b.color,{r:(f>>16&255)/255,g:(f>>8&255)/255,b:(f&255)/255,duration:.5})}a=Ne;const O=a.material;Ze.to(O.color,{r:(w>>16&255)/255,g:(w>>8&255)/255,b:(w&255)/255,duration:.5})}P.style.cursor="pointer"}else E.userData.isCloseHitbox?P.style.cursor="pointer":P.style.cursor="auto"}else{if(a){const E=a.material;Ze.to(E.color,{r:(f>>16&255)/255,g:(f>>8&255)/255,b:(f&255)/255,duration:.5}),a=null}P.style.cursor="auto"}},Te=ce=>{if(A)return;C.x=ce.clientX/window.innerWidth*2-1,C.y=-(ce.clientY/window.innerHeight)*2+1,B.setFromCamera(C,x);const Y=L.flatMap(b=>{const V=[];return H&&N&&b===N.parent&&b.children.forEach(d=>{d instanceof _t&&d===b.userData.closeButton&&d.children.forEach(W=>{W instanceof We&&W.userData.isCloseHitbox&&V.push(W)})}),V}),se=L.flatMap(b=>b.userData.isActive?b.children.filter(V=>V instanceof We&&V.userData.isPortalHitbox):[]);let ge=B.intersectObjects(Y);for(const b of ge)if(b.object.userData.isCloseHitbox){Ge();return}if(ge=B.intersectObjects(se),ge.length===0)return;const Re=ge[0].object,_e=Re.userData.portal,E=Re.parent,Ne=L.indexOf(E),O=r[Ne];if(H&&_e===N){let b=new pe;const V=e.CUBE_SIZE/2;_e.position.x===V?b.set(-1,0,0):_e.position.x===-V?b.set(1,0,0):_e.position.y===V?b.set(0,-1,0):_e.position.y===-V&&b.set(0,1,0),b.applyQuaternion(E.getWorldQuaternion(new Ln)).normalize();const W=x.position.clone().clone().add(b.clone().multiplyScalar(-675)),F=b.clone().multiplyScalar(-1e3),te=W.clone().add(F);A=!0,Ze.to(x.position,{x:W.x,y:W.y,z:W.z,duration:1,ease:"power2.in",onUpdate:()=>x.lookAt(te),onComplete:()=>{O!=null&&O.slug&&(l.setScrollPosition(window.scrollY),gn.visit(route("project.show",{project:O.slug}),{preserveScroll:!1})),A=!1}})}else if(!H){y||(y=x.position.clone(),U=new pe(0,0,h)),ae&&K(!0,y,U);const b=_e.getWorldPosition(new pe);q=!0,A=!0,G=window.scrollY,Ze.to(x.position,{x:0,y:0,z:E.getWorldPosition(new pe).z,duration:2,ease:"power3.out",overwrite:"all",onStart:()=>{H=!0,N=_e,document.body.classList.add("no-scrollbar"),yt(_e,!0),E.userData.lockedPosition=E.position.clone(),He(E)},onComplete:()=>{if(E.userData.closeButton){E.userData.initialCloseGroupPosition&&E.userData.closeButton.position.copy(E.userData.initialCloseGroupPosition),E.userData.closeButton.visible=!0,E.userData.closeButton.updateMatrixWorld(!0),E.updateMatrixWorld(!0),E.userData.closeButton.updateMatrixWorld(!0);const V=E.userData.closeButton.children.filter(d=>d instanceof We&&!d.userData.isCloseHitbox).map(d=>d.material);V.length>0&&Ze.to(V,{opacity:1,duration:.5,onComplete:()=>{E.userData.closeButton.updateMatrixWorld(!0)}})}else console.warn("Close button not found in cube.userData")}}),Ze.to({},{duration:2,ease:"power3.out",overwrite:"all",onUpdate:function(){const V=this.progress(),d=x.getWorldDirection(new pe).multiplyScalar(1e3).add(x.position),W=Fe.lerp(d.x,b.x,V),F=Fe.lerp(d.y,b.y,V),te=Fe.lerp(d.z,b.z,V);x.lookAt(W,F,te)},onComplete:()=>{x.lookAt(b.x,b.y,b.z),x.updateMatrixWorld(!0),q=!1,A=!1,x.userData.lockedLookAt=b.clone()}})}};P.addEventListener("mousemove",ut),P.addEventListener("click",Te),P.addEventListener("touchstart",$,{passive:!0}),P.addEventListener("touchmove",le,{passive:!1}),P.addEventListener("touchend",M,{passive:!0}),window.addEventListener("wheel",$e,{passive:!1}),window.addEventListener("scroll",$e,{passive:!1});const je=()=>{xe.forEach((ce,Y)=>{ce.forEach(se=>{Y.remove(se.mesh),se.mesh.geometry.dispose(),se.mesh.material.dispose()})}),xe.clear(),be.clear(),Me.clear()},J=()=>{P.removeEventListener("mousemove",ut),P.removeEventListener("click",Te),P.removeEventListener("touchstart",$),P.removeEventListener("touchmove",le),P.removeEventListener("touchend",M),window.removeEventListener("wheel",$e),window.removeEventListener("scroll",$e)};return()=>{J(),je()}},updateClickHereParticles:(x,P)=>{const K=performance.now()/1e3,D=x.position.z;L.forEach(G=>{const N=G.position.z;if(Math.abs(D-N+90)<=g&&!H){const q=be.get(G)||0;if(K-q>=Pe){const $=G.children.find(le=>le instanceof Gt&&le.userData.isPortal);$&&(Ye(G,$),be.set(G,K))}const A=(xe.get(G)||[]).filter($=>($.distanceTraveled+=R*P,$.mesh.position.copy($.direction.clone().multiplyScalar($.distanceTraveled)),$.distanceTraveled>=$.totalDistance?(G.remove($.mesh),$.mesh.geometry.dispose(),$.mesh.material.dispose(),!1):!0));xe.set(G,A)}else He(G)})}}}function Si(n,e,r,t){const S=r-1e3,De=Math.abs(-500-S),Q=Math.ceil(De/100),R=()=>{const C=new _t;let a=null,y=null;const U=[],H=[],ae=[],xe=[],be=[];{const Me=new Mo(100,100,100),Ve=new Uo(Me),Ae=32*Q,Oe=new Bn;Oe.copy(Ve),Oe.instanceCount=Ae;const Be=new Dt({color:3355443,transparent:!0,fog:!0,vertexColors:!0}),Ie=new Float32Array(Ae*3),X=new Float32Array(Ae*3),de=new Float32Array(Ae*3),Ye=32*100,He=-3200/2+100/2,u=-500;for(let le=0;le<32;le++){const M=Pe(le);for(let $e=0;$e<Q;$e++){const Ge=le*Q+$e,yt=He+le*100,ut=u-$e*100,Te=Fe.randFloat(100,300),je=Te/100,J=-600+Te/2;Ie[Ge*3]=yt,Ie[Ge*3+1]=J,Ie[Ge*3+2]=ut,X[Ge*3]=1,X[Ge*3+1]=je,X[Ge*3+2]=1,de[Ge*3]=M,de[Ge*3+1]=M,de[Ge*3+2]=M}}Oe.setAttribute("instancePosition",new Rr(Ie,3)),Oe.setAttribute("instanceScale",new Rr(X,3)),Oe.setAttribute("color",new Rr(de,3)),Be.onBeforeCompile=le=>{le.vertexShader=`
                    attribute vec3 instancePosition;
                    attribute vec3 instanceScale;
                    ${le.vertexShader}
                `.replace("#include <begin_vertex>",`#include <begin_vertex>
                    transformed *= instanceScale;
                    transformed += instancePosition;`)},a=new Gt(Oe,Be);const Ue=-3200/2,Qe=Ye/2,x=-600,P=-300,K=S,D=-500;Oe.boundingBox=new Ns(new pe(Ue,x,K),new pe(Qe,P,D));const G=(Ue+Qe)/2,N=(x+P)/2,Z=(K+D)/2,q=Qe-Ue,fe=P-x,A=D-K,$=Math.sqrt(q*q+fe*fe+A*A)/2;Oe.boundingSphere=new Fs(new pe(G,N,Z),$),C.add(a)}{y=new _t;const Me=32*100/5,Ve=-3200/2;for(let Oe=0;Oe<6;Oe++){let Ie=Ve+Oe*Me,X=-500;const de=[new pe(Ie,-450,X)];let Ye=0;for(;X>S;){const He=X===-500?Fe.randFloat(300,800):Math.min(Fe.randFloat(300,800),Math.abs(X-S));if(X-=He,de.push(new pe(Ie,-450,X)),Ye+=He,X<=S){de[de.length-1].z=S;break}const u=Math.random()<.5?-1:1,Ue=Fe.randFloat(100,300);Ie+=u*Ue,de.push(new pe(Ie,-450,X)),Ye+=Ue}H.push({points:de,totalLength:Ye})}const Ae=new Mo(4,4,4);for(let Oe=0;Oe<6;Oe++){const Be=H[Oe],Ie=Be.totalLength,X=Ie/60;for(let de=0;de<60;de++){const Ye=new Et({color:16711680,fog:!0}),He=new We(Ae,Ye),u=de*X;let Ue=u;for(let Qe=0;Qe<Be.points.length-1;Qe++){const x=Be.points[Qe],P=Be.points[Qe+1],K=x.distanceTo(P);if(Ue<=K){const D=Ue/K;He.position.lerpVectors(x,P,D);break}Ue-=K}U.push(He),ae.push(u),xe.push(Oe),be.push(1),y.add(He)}for(let de=0;de<60;de++){const Ye=new Et({color:16777215,fog:!0}),He=new We(Ae,Ye),u=Ie-(de*X+X/2);let Ue=Ie-u;const Qe=[...Be.points].reverse();for(let x=0;x<Qe.length-1;x++){const P=Qe[x],K=Qe[x+1],D=P.distanceTo(K);if(Ue<=D){const G=Ue/D;He.position.lerpVectors(P,K,G);break}Ue-=D}U.push(He),ae.push(u),xe.push(Oe),be.push(-1),y.add(He)}}e.add(y)}return e.add(C),{cityGroup:C,instancedLines:a,particleGroup:y,particles:U,paths:H,particleDistances:ae,particlePaths:xe,particleDirections:be}},Pe=C=>{if(C<10)return .05+C*.10555555555555556;if(C>=22){const a=31-C,y=(1-.05)/9;return .05+a*y}return 1},{cityGroup:oe,instancedLines:m,particleGroup:z,particles:v,paths:L,particleDistances:ie,particlePaths:Se,particleDirections:Le}=R();return{cityGroup:oe,buildingLines:m?[m]:[],updateParticles:C=>{const a=100*C;for(let y=0;y<v.length;y++){const U=Le[y],H=Se[y],ae=L[H],xe=ae.totalLength;ie[y]+=a*U,U===1?(ie[y]=ie[y]%xe,ie[y]<0&&(ie[y]+=xe)):ie[y]=(ie[y]+xe)%xe;const be=ie[y],Me=U===1?ae.points:[...ae.points].reverse();let Ve=U===1?be:xe-be;for(let Ae=0;Ae<Me.length-1;Ae++){const Oe=Me[Ae],Be=Me[Ae+1],Ie=Oe.distanceTo(Be);if(Ve<=Ie){const X=Ve/Ie;v[y].position.lerpVectors(Oe,Be,X);break}Ve-=Ie}}},dispose:()=>{m&&(oe.remove(m),m.geometry.dispose(),m.material.dispose()),z&&(e.remove(z),z.children.forEach(C=>{C.geometry.dispose(),C.material.dispose()})),e.remove(oe)}}}Ze.registerPlugin(me);function Mi(n,e,r,t,o,s,i={},l,p){const{CUBE_SPACING:_,FIRST_CUBE_Z:T}=s,h=(t==null?void 0:t.length)||0,f=T-(h+1)*_;let c=!1;const w=Math.abs(f)+(h-1)*_;let I=Ze.timeline();return I=Ze.timeline({scrollTrigger:{trigger:r.value,start:"top top",end:`+=${w}`,scrub:i.scrub||.5,pin:!0,onUpdate:re=>{if(!c){const ee=re.progress,ne=Fe.lerp(0,f,ee);e.position.set(0,0,ne),e.lookAt(0,0,f)}o(e)}}}),I.fromTo(e.position,{z:0},{z:f,duration:1,ease:"none"},0),{setReverting:re=>{c=re},timeline:I}}function Ei(n,e,r){const l=r-1e3,p=1e3,_=r,T=150,h=-500,f=r,c=new To,w=new Float32Array(2e3*3),I=new Float32Array(2e3),g=new Float32Array(2e3);let re=0;for(;re<2e3;){const Q=(Math.random()-.5)*4e3,R=(Math.random()-.5)*4e3,Pe=-1e3+Math.random()*(l- -1e3),oe=Pe>_&&Math.abs(Q)<p&&Math.abs(R)<p,m=Math.abs(Q)<T&&Math.abs(R)<T&&Pe>f&&Pe<h;if(!oe&&!m){const z=re*3;w[z]=Q,w[z+1]=R,w[z+2]=Pe;const v=.1+Math.random()*(.7-.1);I[re]=v,g[re]=v,re++}}c.setAttribute("position",new hs(w,3)),c.setAttribute("opacity",new hs(g,1));const ee=new ao({uniforms:{color:{value:new Ct(1,1,1)},size:{value:20}},vertexShader:`
            attribute float opacity;
            varying float vOpacity;
            uniform float size;
            void main() {
                vOpacity = opacity;
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                gl_Position = projectionMatrix * mvPosition;
            }
        `,fragmentShader:`
            uniform vec3 color;
            varying float vOpacity;
            void main() {
                float dist = distance(gl_PointCoord, vec2(0.5, 0.5)) * 2.0;
                float alpha = vOpacity * (1.0 - dist);
                if (alpha <= 0.0) discard;
                gl_FragColor = vec4(color, alpha);
            }
        `,transparent:!0,fog:!1,depthWrite:!1}),ne=new Nn(c,ee);n.add(ne);const S=c.attributes.opacity;for(let Q=0;Q<2e3;Q++)Ze.to({opacity:I[Q]},{opacity:.05,duration:1+Math.random(),yoyo:!0,repeat:-1,ease:"sine.inOut",delay:Math.random()*2,onUpdate:function(){g[Q]=this.targets()[0].opacity,S.needsUpdate=!0}});return{dispose:()=>{Ze.killTweensOf(g),n.remove(ne),c.dispose(),ee.dispose()}}}function Ii(n,e){const t=e-1500,o=100,s=2,i=64,l=1e3,p=i*3,_=[4,4.5,5],T=6;let h,f,c,w,I,g;const re=[],ee=[[],[],[]],ne=[[],[],[]],S=[[],[],[]];let De=[0,0,0];const Q=()=>{const m=0-t,z=[];for(let C=0;C<o;C++){const a=C/(o-1),y=0-a*m,U=a*5*2*Math.PI,H=90*(.8+.2*Math.sin(U*2)),ae=new pe(H*Math.cos(U),H*Math.sin(U),y);(isNaN(ae.x)||isNaN(ae.y)||isNaN(ae.z))&&console.error("NaN in chaserPath points",{t:a,z:y,projectMaxZ:e}),z.push(ae)}h=new kr(z);const v=new To().setFromPoints(h.getPoints(200));w=new Or(v,new Dt({color:16711935,linewidth:2,visible:!1})),n.add(w);const L=[];for(let C=0;C<o;C++){const a=C/(o-1),y=0-a*m,U=a*3*2*Math.PI,H=60*(.8+.2*Math.sin(U*4)),ae=new pe(H*Math.cos(U),H*Math.sin(U),y);(isNaN(ae.x)||isNaN(ae.y)||isNaN(ae.z))&&console.error("NaN in chaserPath2 points",{t:a,z:y,projectMaxZ:e}),L.push(ae)}f=new kr(L);const ie=new To().setFromPoints(f.getPoints(200));I=new Or(ie,new Dt({color:65535,linewidth:2,visible:!1})),n.add(I);const Se=[];for(let C=0;C<o;C++){const a=C/(o-1),y=0-a*m,U=a*7*2*Math.PI,H=100,ae=90,xe=.1*Math.sin(U),be=new pe(H*(1+xe)*Math.cos(U),ae*(1-xe)*Math.sin(U),y);(isNaN(be.x)||isNaN(be.y)||isNaN(be.z))&&console.error("NaN in chaserPath3 points",{t:a,z:y,projectMaxZ:e}),Se.push(be)}c=new kr(Se);const Le=new To().setFromPoints(c.getPoints(200));g=new Or(Le,new Dt({color:16776960,linewidth:2,visible:!1})),n.add(g);const j=[16711680,65280,255],B=new Mo(s,s,s);B.attributes.color&&delete B.attributes.color;for(let C=0;C<3;C++){const a=new _t;a.opacity=1,a.renderOrder=1,re[C]=a,n.add(a);for(let y=0;y<p;y++){const U=new Et({color:j[C],transparent:!0,opacity:0,blending:Fn,fog:!0,depthWrite:!1}),H=new We(B,U);H.renderOrder=1,H.visible=!1,a.add(H),ee[C][y]=H,ne[C][y]=0,S[C][y]=!1}}},R=m=>{const z=[h,f,c][m],v=z.getLength(),L=S[m].filter(Se=>Se).length;if(p-L>=i){let Se=0;for(let Le=0;Le<i;Le++){const j=S[m].findIndex(ae=>!ae);if(j===-1){console.warn(`No available chasers for path ${m}, emitted ${Se}/${i}`);break}const B=Se/(i-1),C=.05+(1-.05)*Math.pow(B,3),a=new Et({color:[16711680,65280,255][m],transparent:!0,opacity:C,blending:Wt,fog:!0,depthWrite:!1});ee[m][j].material=a,ee[m][j].visible=!0;const y=Se*T;ne[m][j]=y,S[m][j]=!0;const U=y/v,H=z.getPointAt(U);ee[m][j].position.copy(H),Se++}}},Pe=m=>{const z=performance.now()/1e3,v=[h,f,c];for(let L=0;L<3;L++){z-De[L]>=_[L]&&(R(L),De[L]=z);const ie=v[L],Se=ie.getLength(),Le=l*m;for(let j=0;j<p;j++)if(S[L][j]){ne[L][j]+=Le;const B=ne[L][j]/Se;if(B>=1)ee[L][j].visible=!1,S[L][j]=!1,ne[L][j]=0;else{const C=ie.getPointAt(B);ee[L][j].position.copy(C)}}}};return Q(),{chaserPath:h,chaserPath2:f,chaserPath3:c,updateChasers:Pe,dispose:()=>{n.remove(w),n.remove(I),n.remove(g),w.geometry.dispose(),w.material.dispose(),I.geometry.dispose(),I.material.dispose(),g.geometry.dispose(),g.material.dispose(),re.forEach(m=>{m.children.forEach(z=>{z.geometry.dispose(),z.material.dispose()}),n.remove(m)})}}}const Di={class:"preloader"},Ai={class:"progress-label"},Ri=es({__name:"Preloader",props:{progress:{}},setup(n){return(e,r)=>(Cr(),ts("div",Di,[io("div",Ai,mn(Math.round(e.progress))+"%",1)]))}}),ki=zs(Ri,[["__scopeId","data-v-e5eadefa"]]),Os=250,gr=500,Oo=-500,Gr=-520,Ls=-720,Bs=4e3,Oi=es({__name:"HallwayEngine",props:{projects:{},projectGridFile:{},projectGridFile2:{},initialSlug:{}},setup(n){Ze.registerPlugin(me);const e=Hs();e.isMobile=/iPhone|iPad|Android/i.test(navigator.userAgent);const r=n,t={showChasers:!0,showStarfield:!0,showCars:!0,showBuildings:!0,showPortalPulses:!0,showKeyarts:!0,showProjectGrids:!0,showProjectTitles:!0,showIntroCubes:!0,showScrollTrigger:!0,showStats:!0},o=_o(null),s=_o(null),i=_o(!1),l=_o(0),p=_o(!1),_=_o(!0),T=new Map;let h,f,c,w,I,g,re,ee=null,ne=null,S=null,De=null,Q=null,R=[],Pe=null,oe=null,m=0,z=null,v;const L=()=>{const B=o.value?o.value.getBoundingClientRect().width:window.innerWidth,C=window.innerHeight,a=e.isMobile?.75:1,y=e.isMobile?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio;c.setSize(B*a,C*a),c.setPixelRatio(y),w.setSize(B*a,C*a),f.aspect=B/C,f.updateProjectionMatrix(),c.domElement.style.width=`${B}px`,c.domElement.style.height=`${C}px`},ie=B=>T.has(B)?Promise.resolve(T.get(B)):new Promise((C,a)=>{new Wn().load(B,U=>{U.encoding=void 0,T.set(B,U),C(U)},void 0,U=>a(U))}),Se=async()=>{h=new zn,h.background=new Ct(0),h.fog=new Hn(0,700,Bs),f=new Un(75,window.innerWidth/window.innerHeight,1,Bs+6e3),f.position.set(0,0,0),f.lookAt(0,0,1e3),c=new Gn({antialias:!0}),e.isMobile?c.setPixelRatio(Math.min(window.devicePixelRatio,1.5)):c.setPixelRatio(window.devicePixelRatio),c.toneMapping=Yn,c.toneMappingExposure=1,c.outputEncoding=void 0,w=new mi(c);const B=new _i(h,f);if(w.addPass(B),e.isMobile?I=new mo(new kt(window.innerWidth,window.innerHeight),1.3,.2,0):I=new mo(new kt(window.innerWidth,window.innerHeight),1.6,.2,0),I.renderToScreen=!0,w.addPass(I),o.value)o.value.appendChild(c.domElement),c.domElement.style.opacity="0";else return;g=new qo,g.dom.style.position="fixed",g.dom.style.top="0px",g.dom.style.left="0px",g.dom.style.zIndex="1000",document.body.appendChild(g.dom);const a=r.projects.filter(H=>H.keyart).length+2;let y=0;const U=()=>{y++,l.value=y/a*100,y===a&&(i.value=!0)};await ie(r.projectGridFile).then(()=>U()).catch(()=>U()),await ie(r.projectGridFile2).then(()=>U()).catch(()=>U());for(const H of r.projects)H.keyart?await ie(H.keyart).then(()=>U()).catch(()=>U()):U();z=Pi(h,{CUBE_SIZE:Os,CUBE_SPACING:gr,FIRST_CUBE_Z:Oo},r.projects,r.projectGridFile,r.projectGridFile2,t,T);try{const H=await z.getInitializedData();if(v=H.maxZ,v===void 0||isNaN(v))throw new Error("Invalid maxZ from projectCubesInstance");const{introCubes:ae}=yi(h,h,{CUBE_SIZE:Os,FIRST_CUBE_Z:Oo},t);if(R=[...ae,...H.projectCubes],Pe=H.updateCubeColors,t.showCars){const{cityGroup:xe,updateParticles:be,dispose:Me}=Si(h,h,v,t);re=be,Q=Me}if(t.showStarfield){const{dispose:xe}=Ei(h,f,v);ee=xe}if(t.showChasers){const{dispose:xe,updateChasers:be}=Ii(h,v);S=xe,De=be}L()}catch(H){console.error("Error initializing project cubes:",H),v=Oo-(r.projects.length+1)*gr}},Le=(B=0)=>{if(oe=requestAnimationFrame(Le),c&&w){const C=(B-m)/1e3;m=B,re(C),De&&De(C),z!=null&&z.updateClickHereParticles&&z.updateClickHereParticles(f,C);const a=4e3,y=1e3,U=Math.abs(f.position.z-v);f.far=Math.max(a+y,U),f.updateProjectionMatrix();const H=Ls-Gr;let ae=0;f.position.z>=Gr?ae=0:f.position.z<=Ls?ae=1:ae=(f.position.z-Gr)/H,e.isMobile?I.strength=Fe.lerp(1.3,0,ae):I.strength=Fe.lerp(1.6,.125,ae),w.render()}g.update()};_n(()=>{Se().then(()=>{if(i.value){oe=requestAnimationFrame(Le);let B=null;const C=z.getInitializedData().then(({projectCubes:y})=>{y.forEach(H=>{H.userData.isActive=!0});const U=Oo-(r.projects.length-1)*gr;f.position.set(0,0,5e3),f.lookAt(0,0,U),f.updateProjectionMatrix(),Pe(f),w.render(),R.length&&Pe&&(B=Mi(h,f,s,R,Pe,{CUBE_SPACING:gr,FIRST_CUBE_Z:Oo},{scrub:e.isMobile?3:1}).setReverting),c&&ne===null&&(ne=z.setupInteractivity(f,c.domElement,H=>{B&&B(H)})),window.scrollTo({top:0,behavior:"auto"})}),a=()=>{C.then(()=>{_.value=!1,f.position.set(0,0,5e3),f.updateProjectionMatrix(),Ze.to(c.domElement,{opacity:1,duration:.5,ease:"power4.out"});const y={z:5e3};Ze.to(y,{z:0,duration:2,ease:"power4.out",onUpdate:()=>{f.position.z=y.z,f.updateProjectionMatrix()},onComplete:()=>{f.position.z=0,p.value=!0}})})};Ze.delayedCall(.5,a)}}).catch(B=>{console.error("Initialization failed:",B)}),window.addEventListener("resize",j)}),wn(()=>{oe!==null&&cancelAnimationFrame(oe),ne&&ne(),window.removeEventListener("resize",j),me.getAll().forEach(B=>B.kill()),c.dispose(),w.dispose(),h.clear(),document.body.removeChild(g.dom),ee&&ee(),S&&S(),Q&&Q()});const j=()=>{L(),me.refresh()};return(B,C)=>(Cr(),ts("section",{ref_key:"wrapper",ref:s,class:"wrapper"},[Lo(vn,{name:"fade"},{default:yn(()=>[_.value?(Cr(),xn(ki,{key:0,progress:l.value},null,8,["progress"])):bn("",!0)]),_:1}),io("div",{ref_key:"tunnelWrapper",ref:o,class:"tunnel-wrapper"},null,512)],512))}}),Li=zs(Oi,[["__scopeId","data-v-753a7cfd"]]),Bi={class:"relative bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},Ni={class:"absolute z-10 flex flex-col items-center justify-center top-32 left-1/2 transform -translate-x-1/2"},Fi={class:"overflow-hidden"},Gi=es({__name:"Welcome",props:{projects:{},projectGridFile:{},projectGridFile2:{}},setup(n){return(e,r)=>(Cr(),ts(Pn,null,[Lo(Tn(Cn),{title:"Welcome"}),io("div",Bi,[io("nav",Ni,[Lo(Xn)]),io("div",Fi,[Lo(Li,{projects:e.projects,"project-grid-file":e.projectGridFile,"project-grid-file-2":e.projectGridFile2},null,8,["projects","project-grid-file","project-grid-file-2"])]),r[0]||(r[0]=io("div",{class:"flex justify-center items-center"},null,-1)),r[1]||(r[1]=io("div",{class:"flex justify-center items-center -mt-24 mix-blend-screen"},null,-1)),Lo(Zn)])],64))}});export{Gi as default};
